function hae(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function dp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wP={exports:{}},FT={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4;function pae(){if(L4)return FT;L4=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var o in s)o!=="key"&&(r[o]=s[o])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return FT.Fragment=e,FT.jsx=t,FT.jsxs=t,FT}var U4;function mae(){return U4||(U4=1,wP.exports=pae()),wP.exports}var B=mae(),MP={exports:{}},Ei={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B4;function gae(){if(B4)return Ei;B4=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(q){return q===null||typeof q!="object"?null:(q=h&&q[h]||q["@@iterator"],typeof q=="function"?q:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function T(q,ue,Ae){this.props=q,this.context=ue,this.refs=x,this.updater=Ae||v}T.prototype.isReactComponent={},T.prototype.setState=function(q,ue){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ue,"setState")},T.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function b(){}b.prototype=T.prototype;function w(q,ue,Ae){this.props=q,this.context=ue,this.refs=x,this.updater=Ae||v}var M=w.prototype=new b;M.constructor=w,_(M,T.prototype),M.isPureReactComponent=!0;var R=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function L(q,ue,Ae,Ne,we,pt){return Ae=pt.ref,{$$typeof:i,type:q,key:ue,ref:Ae!==void 0?Ae:null,props:pt}}function F(q,ue){return L(q.type,ue,void 0,void 0,void 0,q.props)}function I(q){return typeof q=="object"&&q!==null&&q.$$typeof===i}function z(q){var ue={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Ae){return ue[Ae]})}var H=/\/+/g;function Y(q,ue){return typeof q=="object"&&q!==null&&q.key!=null?z(""+q.key):ue.toString(36)}function Z(){}function se(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(Z,Z):(q.status="pending",q.then(function(ue){q.status==="pending"&&(q.status="fulfilled",q.value=ue)},function(ue){q.status==="pending"&&(q.status="rejected",q.reason=ue)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function oe(q,ue,Ae,Ne,we){var pt=typeof q;(pt==="undefined"||pt==="boolean")&&(q=null);var Ee=!1;if(q===null)Ee=!0;else switch(pt){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(q.$$typeof){case i:case e:Ee=!0;break;case d:return Ee=q._init,oe(Ee(q._payload),ue,Ae,Ne,we)}}if(Ee)return we=we(q),Ee=Ne===""?"."+Y(q,0):Ne,R(we)?(Ae="",Ee!=null&&(Ae=Ee.replace(H,"$&/")+"/"),oe(we,ue,Ae,"",function(Be){return Be})):we!=null&&(I(we)&&(we=F(we,Ae+(we.key==null||q&&q.key===we.key?"":(""+we.key).replace(H,"$&/")+"/")+Ee)),ue.push(we)),1;Ee=0;var Ue=Ne===""?".":Ne+":";if(R(q))for(var Ve=0;Ve<q.length;Ve++)Ne=q[Ve],pt=Ue+Y(Ne,Ve),Ee+=oe(Ne,ue,Ae,pt,we);else if(Ve=m(q),typeof Ve=="function")for(q=Ve.call(q),Ve=0;!(Ne=q.next()).done;)Ne=Ne.value,pt=Ue+Y(Ne,Ve++),Ee+=oe(Ne,ue,Ae,pt,we);else if(pt==="object"){if(typeof q.then=="function")return oe(se(q),ue,Ae,Ne,we);throw ue=String(q),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function G(q,ue,Ae){if(q==null)return q;var Ne=[],we=0;return oe(q,Ne,"","",function(pt){return ue.call(Ae,pt,we++)}),Ne}function K(q){if(q._status===-1){var ue=q._result;ue=ue(),ue.then(function(Ae){(q._status===0||q._status===-1)&&(q._status=1,q._result=Ae)},function(Ae){(q._status===0||q._status===-1)&&(q._status=2,q._result=Ae)}),q._status===-1&&(q._status=0,q._result=ue)}if(q._status===1)return q._result.default;throw q._result}var $=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function ce(){}return Ei.Children={map:G,forEach:function(q,ue,Ae){G(q,function(){ue.apply(this,arguments)},Ae)},count:function(q){var ue=0;return G(q,function(){ue++}),ue},toArray:function(q){return G(q,function(ue){return ue})||[]},only:function(q){if(!I(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Ei.Component=T,Ei.Fragment=t,Ei.Profiler=s,Ei.PureComponent=w,Ei.StrictMode=n,Ei.Suspense=l,Ei.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ei.__COMPILER_RUNTIME={__proto__:null,c:function(q){return N.H.useMemoCache(q)}},Ei.cache=function(q){return function(){return q.apply(null,arguments)}},Ei.cloneElement=function(q,ue,Ae){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Ne=_({},q.props),we=q.key,pt=void 0;if(ue!=null)for(Ee in ue.ref!==void 0&&(pt=void 0),ue.key!==void 0&&(we=""+ue.key),ue)!D.call(ue,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ue.ref===void 0||(Ne[Ee]=ue[Ee]);var Ee=arguments.length-2;if(Ee===1)Ne.children=Ae;else if(1<Ee){for(var Ue=Array(Ee),Ve=0;Ve<Ee;Ve++)Ue[Ve]=arguments[Ve+2];Ne.children=Ue}return L(q.type,we,void 0,void 0,pt,Ne)},Ei.createContext=function(q){return q={$$typeof:a,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:r,_context:q},q},Ei.createElement=function(q,ue,Ae){var Ne,we={},pt=null;if(ue!=null)for(Ne in ue.key!==void 0&&(pt=""+ue.key),ue)D.call(ue,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(we[Ne]=ue[Ne]);var Ee=arguments.length-2;if(Ee===1)we.children=Ae;else if(1<Ee){for(var Ue=Array(Ee),Ve=0;Ve<Ee;Ve++)Ue[Ve]=arguments[Ve+2];we.children=Ue}if(q&&q.defaultProps)for(Ne in Ee=q.defaultProps,Ee)we[Ne]===void 0&&(we[Ne]=Ee[Ne]);return L(q,pt,void 0,void 0,null,we)},Ei.createRef=function(){return{current:null}},Ei.forwardRef=function(q){return{$$typeof:o,render:q}},Ei.isValidElement=I,Ei.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:K}},Ei.memo=function(q,ue){return{$$typeof:c,type:q,compare:ue===void 0?null:ue}},Ei.startTransition=function(q){var ue=N.T,Ae={};N.T=Ae;try{var Ne=q(),we=N.S;we!==null&&we(Ae,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(ce,$)}catch(pt){$(pt)}finally{N.T=ue}},Ei.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ei.use=function(q){return N.H.use(q)},Ei.useActionState=function(q,ue,Ae){return N.H.useActionState(q,ue,Ae)},Ei.useCallback=function(q,ue){return N.H.useCallback(q,ue)},Ei.useContext=function(q){return N.H.useContext(q)},Ei.useDebugValue=function(){},Ei.useDeferredValue=function(q,ue){return N.H.useDeferredValue(q,ue)},Ei.useEffect=function(q,ue,Ae){var Ne=N.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ne.useEffect(q,ue)},Ei.useId=function(){return N.H.useId()},Ei.useImperativeHandle=function(q,ue,Ae){return N.H.useImperativeHandle(q,ue,Ae)},Ei.useInsertionEffect=function(q,ue){return N.H.useInsertionEffect(q,ue)},Ei.useLayoutEffect=function(q,ue){return N.H.useLayoutEffect(q,ue)},Ei.useMemo=function(q,ue){return N.H.useMemo(q,ue)},Ei.useOptimistic=function(q,ue){return N.H.useOptimistic(q,ue)},Ei.useReducer=function(q,ue,Ae){return N.H.useReducer(q,ue,Ae)},Ei.useRef=function(q){return N.H.useRef(q)},Ei.useState=function(q){return N.H.useState(q)},Ei.useSyncExternalStore=function(q,ue,Ae){return N.H.useSyncExternalStore(q,ue,Ae)},Ei.useTransition=function(){return N.H.useTransition()},Ei.version="19.1.1",Ei}var I4;function oS(){return I4||(I4=1,MP.exports=gae()),MP.exports}var P=oS();const fe=dp(P),$N=hae({__proto__:null,default:fe},[P]);var AP={exports:{}},zT={},CP={exports:{}},RP={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4;function yae(){return F4||(F4=1,(function(i){function e(G,K){var $=G.length;G.push(K);e:for(;0<$;){var ce=$-1>>>1,q=G[ce];if(0<s(q,K))G[ce]=K,G[$]=q,$=ce;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var K=G[0],$=G.pop();if($!==K){G[0]=$;e:for(var ce=0,q=G.length,ue=q>>>1;ce<ue;){var Ae=2*(ce+1)-1,Ne=G[Ae],we=Ae+1,pt=G[we];if(0>s(Ne,$))we<q&&0>s(pt,Ne)?(G[ce]=pt,G[we]=$,ce=we):(G[ce]=Ne,G[Ae]=$,ce=Ae);else if(we<q&&0>s(pt,$))G[ce]=pt,G[we]=$,ce=we;else break e}}return K}function s(G,K){var $=G.sortIndex-K.sortIndex;return $!==0?$:G.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,m=3,v=!1,_=!1,x=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function R(G){for(var K=t(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=G)n(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function N(G){if(x=!1,R(G),!_)if(t(l)!==null)_=!0,D||(D=!0,Y());else{var K=t(c);K!==null&&oe(N,K.startTime-G)}}var D=!1,L=-1,F=5,I=-1;function z(){return T?!0:!(i.unstable_now()-I<F)}function H(){if(T=!1,D){var G=i.unstable_now();I=G;var K=!0;try{e:{_=!1,x&&(x=!1,w(L),L=-1),v=!0;var $=m;try{t:{for(R(G),h=t(l);h!==null&&!(h.expirationTime>G&&z());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,m=h.priorityLevel;var q=ce(h.expirationTime<=G);if(G=i.unstable_now(),typeof q=="function"){h.callback=q,R(G),K=!0;break t}h===t(l)&&n(l),R(G)}else n(l);h=t(l)}if(h!==null)K=!0;else{var ue=t(c);ue!==null&&oe(N,ue.startTime-G),K=!1}}break e}finally{h=null,m=$,v=!1}K=void 0}}finally{K?Y():D=!1}}}var Y;if(typeof M=="function")Y=function(){M(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,se=Z.port2;Z.port1.onmessage=H,Y=function(){se.postMessage(null)}}else Y=function(){b(H,0)};function oe(G,K){L=b(function(){G(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_next=function(G){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var $=m;m=K;try{return G()}finally{m=$}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var $=m;m=G;try{return K()}finally{m=$}},i.unstable_scheduleCallback=function(G,K,$){var ce=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ce+$:ce):$=ce,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=$+q,G={id:d++,callback:K,priorityLevel:G,startTime:$,expirationTime:q,sortIndex:-1},$>ce?(G.sortIndex=$,e(c,G),t(l)===null&&G===t(c)&&(x?(w(L),L=-1):x=!0,oe(N,$-ce))):(G.sortIndex=q,e(l,G),_||v||(_=!0,D||(D=!0,Y()))),G},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(G){var K=m;return function(){var $=m;m=K;try{return G.apply(this,arguments)}finally{m=$}}}})(RP)),RP}var z4;function vae(){return z4||(z4=1,CP.exports=yae()),CP.exports}var NP={exports:{}},Ul={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V4;function _ae(){if(V4)return Ul;V4=1;var i=oS();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ul.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ul.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return r(l,c,null,d)},Ul.flushSync=function(l){var c=a.T,d=n.p;try{if(a.T=null,n.p=2,l)return l()}finally{a.T=c,n.p=d,n.d.f()}},Ul.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},Ul.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Ul.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,v=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:v}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:v,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ul.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},Ul.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ul.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},Ul.requestFormReset=function(l){n.d.r(l)},Ul.unstable_batchedUpdates=function(l,c){return l(c)},Ul.useFormState=function(l,c,d){return a.H.useFormState(l,c,d)},Ul.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ul.version="19.1.1",Ul}var k4;function zW(){if(k4)return NP.exports;k4=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),NP.exports=_ae(),NP.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G4;function xae(){if(G4)return zT;G4=1;var i=vae(),e=oS(),t=zW();function n(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function r(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function a(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(r(u)!==u)throw Error(n(188))}function l(u){var f=u.alternate;if(!f){if(f=r(u),f===null)throw Error(n(188));return f!==u?null:u}for(var y=u,S=f;;){var A=y.return;if(A===null)break;var O=A.alternate;if(O===null){if(S=A.return,S!==null){y=S;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===y)return o(A),u;if(O===S)return o(A),f;O=O.sibling}throw Error(n(188))}if(y.return!==S.return)y=A,S=O;else{for(var j=!1,J=A.child;J;){if(J===y){j=!0,y=A,S=O;break}if(J===S){j=!0,S=A,y=O;break}J=J.sibling}if(!j){for(J=O.child;J;){if(J===y){j=!0,y=O,S=A;break}if(J===S){j=!0,S=O,y=A;break}J=J.sibling}if(!j)throw Error(n(189))}}if(y.alternate!==S)throw Error(n(190))}if(y.tag!==3)throw Error(n(188));return y.stateNode.current===y?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),M=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function Y(u){return u===null||typeof u!="object"?null:(u=H&&u[H]||u["@@iterator"],typeof u=="function"?u:null)}var Z=Symbol.for("react.client.reference");function se(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Z?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case _:return"Fragment";case T:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList";case I:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case v:return"Portal";case M:return(u.displayName||"Context")+".Provider";case w:return(u._context.displayName||"Context")+".Consumer";case R:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case L:return f=u.displayName||null,f!==null?f:se(u.type)||"Memo";case F:f=u._payload,u=u._init;try{return se(u(f))}catch{}}return null}var oe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ce=[],q=-1;function ue(u){return{current:u}}function Ae(u){0>q||(u.current=ce[q],ce[q]=null,q--)}function Ne(u,f){q++,ce[q]=u.current,u.current=f}var we=ue(null),pt=ue(null),Ee=ue(null),Ue=ue(null);function Ve(u,f){switch(Ne(Ee,f),Ne(pt,u),Ne(we,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?l4(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=l4(f),u=c4(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Ae(we),Ne(we,u)}function Be(){Ae(we),Ae(pt),Ae(Ee)}function Mt(u){u.memoizedState!==null&&Ne(Ue,u);var f=we.current,y=c4(f,u.type);f!==y&&(Ne(pt,u),Ne(we,y))}function ct(u){pt.current===u&&(Ae(we),Ae(pt)),Ue.current===u&&(Ae(Ue),OT._currentValue=$)}var Et=Object.prototype.hasOwnProperty,le=i.unstable_scheduleCallback,$e=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,Xe=i.unstable_requestPaint,We=i.unstable_now,_t=i.unstable_getCurrentPriorityLevel,ut=i.unstable_ImmediatePriority,ht=i.unstable_UserBlockingPriority,Bt=i.unstable_NormalPriority,kt=i.unstable_LowPriority,X=i.unstable_IdlePriority,W=i.log,Se=i.unstable_setDisableYieldValue,Fe=null,tt=null;function et(u){if(typeof W=="function"&&Se(u),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(Fe,u)}catch{}}var Lt=Math.clz32?Math.clz32:Zt,wt=Math.log,It=Math.LN2;function Zt(u){return u>>>=0,u===0?32:31-(wt(u)/It|0)|0}var yt=256,Rt=4194304;function Xt(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Qt(u,f,y){var S=u.pendingLanes;if(S===0)return 0;var A=0,O=u.suspendedLanes,j=u.pingedLanes;u=u.warmLanes;var J=S&134217727;return J!==0?(S=J&~O,S!==0?A=Xt(S):(j&=J,j!==0?A=Xt(j):y||(y=J&~u,y!==0&&(A=Xt(y))))):(J=S&~O,J!==0?A=Xt(J):j!==0?A=Xt(j):y||(y=S&~u,y!==0&&(A=Xt(y)))),A===0?0:f!==0&&f!==A&&(f&O)===0&&(O=A&-A,y=f&-f,O>=y||O===32&&(y&4194048)!==0)?f:A}function Ct(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function An(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var u=yt;return yt<<=1,(yt&4194048)===0&&(yt=256),u}function bt(){var u=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),u}function Nt(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function $t(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function xt(u,f,y,S,A,O){var j=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var J=u.entanglements,pe=u.expirationTimes,ke=u.hiddenUpdates;for(y=j&~y;0<y;){var ft=31-Lt(y),vt=1<<ft;J[ft]=0,pe[ft]=-1;var qe=ke[ft];if(qe!==null)for(ke[ft]=null,ft=0;ft<qe.length;ft++){var Qe=qe[ft];Qe!==null&&(Qe.lane&=-536870913)}y&=~vt}S!==0&&at(u,S,0),O!==0&&A===0&&u.tag!==0&&(u.suspendedLanes|=O&~(j&~f))}function at(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var S=31-Lt(f);u.entangledLanes|=f,u.entanglements[S]=u.entanglements[S]|1073741824|y&4194090}function nn(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var S=31-Lt(y),A=1<<S;A&f|u[S]&f&&(u[S]|=f),y&=~A}}function dn(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function _i(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Si(){var u=K.p;return u!==0?u:(u=window.event,u===void 0?32:C4(u.type))}function Ko(u,f){var y=K.p;try{return K.p=u,f()}finally{K.p=y}}var Ur=Math.random().toString(36).slice(2),wr="__reactFiber$"+Ur,Ds="__reactProps$"+Ur,Mr="__reactContainer$"+Ur,Na="__reactEvents$"+Ur,Zf="__reactListeners$"+Ur,Mo="__reactHandles$"+Ur,Yr="__reactResources$"+Ur,Ao="__reactMarker$"+Ur;function ms(u){delete u[wr],delete u[Ds],delete u[Na],delete u[Zf],delete u[Mo]}function ec(u){var f=u[wr];if(f)return f;for(var y=u.parentNode;y;){if(f=y[Mr]||y[wr]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(u=h4(u);u!==null;){if(y=u[wr])return y;u=h4(u)}return f}u=y,y=u.parentNode}return null}function Ic(u){if(u=u[wr]||u[Mr]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function Da(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(n(33))}function El(u){var f=u[Yr];return f||(f=u[Yr]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Hi(u){u[Ao]=!0}var Ar=new Set,Fc={};function ee(u,f){be(u,f),be(u+"Capture",f)}function be(u,f){for(Fc[u]=f,u=0;u<f.length;u++)Ar.add(f[u])}var Ie=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),je={},Ce={};function St(u){return Et.call(Ce,u)?!0:Et.call(je,u)?!1:Ie.test(u)?Ce[u]=!0:(je[u]=!0,!1)}function Dt(u,f,y){if(St(f))if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+y)}}function Yt(u,f,y){if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+y)}}function Ut(u,f,y,S){if(S===null)u.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(f,y,""+S)}}var fn,Tn;function sn(u){if(fn===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);fn=f&&f[1]||"",Tn=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+u+Tn}var qn=!1;function Ti(u,f){if(!u||qn)return"";qn=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(Qe){var qe=Qe}Reflect.construct(u,[],vt)}else{try{vt.call()}catch(Qe){qe=Qe}u.call(vt.prototype)}}else{try{throw Error()}catch(Qe){qe=Qe}(vt=u())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(Qe){if(Qe&&qe&&typeof Qe.stack=="string")return[Qe.stack,qe.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=S.DetermineComponentFrameRoot(),j=O[0],J=O[1];if(j&&J){var pe=j.split(`
`),ke=J.split(`
`);for(A=S=0;S<pe.length&&!pe[S].includes("DetermineComponentFrameRoot");)S++;for(;A<ke.length&&!ke[A].includes("DetermineComponentFrameRoot");)A++;if(S===pe.length||A===ke.length)for(S=pe.length-1,A=ke.length-1;1<=S&&0<=A&&pe[S]!==ke[A];)A--;for(;1<=S&&0<=A;S--,A--)if(pe[S]!==ke[A]){if(S!==1||A!==1)do if(S--,A--,0>A||pe[S]!==ke[A]){var ft=`
`+pe[S].replace(" at new "," at ");return u.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",u.displayName)),ft}while(1<=S&&0<=A);break}}}finally{qn=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?sn(y):""}function Jn(u){switch(u.tag){case 26:case 27:case 5:return sn(u.type);case 16:return sn("Lazy");case 13:return sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return Ti(u.type,!1);case 11:return Ti(u.type.render,!1);case 1:return Ti(u.type,!0);case 31:return sn("Activity");default:return""}}function fi(u){try{var f="";do f+=Jn(u),u=u.return;while(u);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Vn(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function xn(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function si(u){var f=xn(u)?"checked":"value",y=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),S=""+u[f];if(!u.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var A=y.get,O=y.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return A.call(this)},set:function(j){S=""+j,O.call(this,j)}}),Object.defineProperty(u,f,{enumerable:y.enumerable}),{getValue:function(){return S},setValue:function(j){S=""+j},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function On(u){u._valueTracker||(u._valueTracker=si(u))}function Pa(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return u&&(S=xn(u)?u.checked?"true":"false":u.value),u=S,u!==y?(f.setValue(u),!0):!1}function Zo(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Ps=/[\n"\\]/g;function hr(u){return u.replace(Ps,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function is(u,f,y,S,A,O,j,J){u.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?u.type=j:u.removeAttribute("type"),f!=null?j==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+Vn(f)):u.value!==""+Vn(f)&&(u.value=""+Vn(f)):j!=="submit"&&j!=="reset"||u.removeAttribute("value"),f!=null?Kr(u,j,Vn(f)):y!=null?Kr(u,j,Vn(y)):S!=null&&u.removeAttribute("value"),A==null&&O!=null&&(u.defaultChecked=!!O),A!=null&&(u.checked=A&&typeof A!="function"&&typeof A!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?u.name=""+Vn(J):u.removeAttribute("name")}function Xa(u,f,y,S,A,O,j,J){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(u.type=O),f!=null||y!=null){if(!(O!=="submit"&&O!=="reset"||f!=null))return;y=y!=null?""+Vn(y):"",f=f!=null?""+Vn(f):y,J||f===u.value||(u.value=f),u.defaultValue=f}S=S??A,S=typeof S!="function"&&typeof S!="symbol"&&!!S,u.checked=J?u.checked:!!S,u.defaultChecked=!!S,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(u.name=j)}function Kr(u,f,y){f==="number"&&Zo(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function sr(u,f,y,S){if(u=u.options,f){f={};for(var A=0;A<y.length;A++)f["$"+y[A]]=!0;for(y=0;y<u.length;y++)A=f.hasOwnProperty("$"+u[y].value),u[y].selected!==A&&(u[y].selected=A),A&&S&&(u[y].defaultSelected=!0)}else{for(y=""+Vn(y),f=null,A=0;A<u.length;A++){if(u[A].value===y){u[A].selected=!0,S&&(u[A].defaultSelected=!0);return}f!==null||u[A].disabled||(f=u[A])}f!==null&&(f.selected=!0)}}function Br(u,f,y){if(f!=null&&(f=""+Vn(f),f!==u.value&&(u.value=f),y==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=y!=null?""+Vn(y):""}function Vs(u,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(n(92));if(oe(S)){if(1<S.length)throw Error(n(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=Vn(f),u.defaultValue=y,S=u.textContent,S===y&&S!==""&&S!==null&&(u.value=S)}function Ai(u,f){if(f){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=f;return}}u.textContent=f}var yp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qf(u,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":S?u.setProperty(f,y):typeof y!="number"||y===0||yp.has(f)?f==="float"?u.cssFloat=y:u[f]=(""+y).trim():u[f]=y+"px"}function cd(u,f,y){if(f!=null&&typeof f!="object")throw Error(n(62));if(u=u.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?u.setProperty(S,""):S==="float"?u.cssFloat="":u[S]="");for(var A in f)S=f[A],f.hasOwnProperty(A)&&y[A]!==S&&Qf(u,A,S)}else for(var O in f)f.hasOwnProperty(O)&&Qf(u,O,f[O])}function of(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ud(u){return vp.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var ai=null;function eh(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var wl=null,dd=null;function fd(u){var f=Ic(u);if(f&&(u=f.stateNode)){var y=u[Ds]||null;e:switch(u=f.stateNode,f.type){case"input":if(is(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+hr(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==u&&S.form===u.form){var A=S[Ds]||null;if(!A)throw Error(n(90));is(S,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===u.form&&Pa(S)}break e;case"textarea":Br(u,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&sr(u,!!y.multiple,f,!1)}}}var lf=!1;function cf(u,f,y){if(lf)return u(f,y);lf=!0;try{var S=u(f);return S}finally{if(lf=!1,(wl!==null||dd!==null)&&(Rd(),wl&&(f=wl,u=dd,dd=wl=null,fd(f),u)))for(f=0;f<u.length;f++)fd(u[f])}}function Ml(u,f){var y=u.stateNode;if(y===null)return null;var S=y[Ds]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(u=u.type,S=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!S;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(n(231,f,typeof y));return y}var zc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),th=!1;if(zc)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){th=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{th=!1}var Cr=null,qm=null,nh=null;function Xm(){if(nh)return nh;var u,f=qm,y=f.length,S,A="value"in Cr?Cr.value:Cr.textContent,O=A.length;for(u=0;u<y&&f[u]===A[u];u++);var j=y-u;for(S=1;S<=j&&f[y-S]===A[O-S];S++);return nh=A.slice(u,1<S?1-S:void 0)}function pr(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Cl(){return!0}function ih(){return!1}function fo(u){function f(y,S,A,O,j){this._reactName=y,this._targetInst=A,this.type=S,this.nativeEvent=O,this.target=j,this.currentTarget=null;for(var J in u)u.hasOwnProperty(J)&&(y=u[J],this[J]=y?y(O):O[J]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Cl:ih,this.isPropagationStopped=ih,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),f}var xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=fo(xu),Rl=d({},xu,{view:0,detail:0}),Ym=fo(Rl),Nl,Vc,Co,hd=d({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rh,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Co&&(Co&&u.type==="mousemove"?(Nl=u.screenX-Co.screenX,Vc=u.screenY-Co.screenY):Vc=Nl=0,Co=u),Nl)},movementY:function(u){return"movementY"in u?u.movementY:Vc}}),sh=fo(hd),C_=d({},hd,{dataTransfer:0}),u0=fo(C_),Oa=d({},Rl,{relatedTarget:0}),bu=fo(Oa),_p=d({},xu,{animationName:0,elapsedTime:0,pseudoElement:0}),R_=fo(_p),xp=d({},xu,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),d0=fo(xp),bp=d({},xu,{data:0}),Sp=fo(bp),f0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hi(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=h0[u])?!!f[u]:!1}function rh(){return hi}var Km=d({},Rl,{key:function(u){if(u.key){var f=f0[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=pr(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Tp[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rh,charCode:function(u){return u.type==="keypress"?pr(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?pr(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),ah=fo(Km),p0=d({},hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ep=fo(p0),N_=d({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rh}),Zm=fo(N_),m0=d({},xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Su=fo(m0),De=d({},hd,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=fo(De),he=d({},xu,{newState:0,oldState:0}),ie=fo(he),re=[9,13,27,32],Me=zc&&"CompositionEvent"in window,nt=null;zc&&"documentMode"in document&&(nt=document.documentMode);var Ge=zc&&"TextEvent"in window&&!nt,Gt=zc&&(!Me||nt&&8<nt&&11>=nt),En=" ",kn=!1;function oi(u,f){switch(u){case"keyup":return re.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wn(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var gt=!1;function Mn(u,f){switch(u){case"compositionend":return wn(f);case"keypress":return f.which!==32?null:(kn=!0,En);case"textInput":return u=f.data,u===En&&kn?null:u;default:return null}}function ks(u,f){if(gt)return u==="compositionend"||!Me&&oi(u,f)?(u=Xm(),nh=qm=Cr=null,gt=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Gt&&f.locale!=="ko"?null:f.data;default:return null}}var ss={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!ss[u.type]:f==="textarea"}function Ci(u,f,y,S){wl?dd?dd.push(S):dd=[S]:wl=S,f=mA(f,"onChange"),0<f.length&&(y=new uf("onChange","change",null,y,S),u.push({event:y,listeners:f}))}var mr=null,Gn=null;function Qo(u){i4(u,0)}function ls(u){var f=Da(u);if(Pa(f))return u}function Bn(u,f){if(u==="change")return f}var ya=!1;if(zc){var La;if(zc){var vn="oninput"in document;if(!vn){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),vn=typeof rr.oninput=="function"}La=vn}else La=!1;ya=La&&(!document.documentMode||9<document.documentMode)}function en(){mr&&(mr.detachEvent("onpropertychange",kc),Gn=mr=null)}function kc(u){if(u.propertyName==="value"&&ls(Gn)){var f=[];Ci(f,Gn,u,eh(u)),cf(Qo,f)}}function Zr(u,f,y){u==="focusin"?(en(),mr=f,Gn=y,mr.attachEvent("onpropertychange",kc)):u==="focusout"&&en()}function Ya(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return ls(Gn)}function Qr(u,f){if(u==="click")return ls(f)}function Bi(u,f){if(u==="input"||u==="change")return ls(f)}function Nr(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var zi=typeof Object.is=="function"?Object.is:Nr;function Le(u,f){if(zi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var A=y[S];if(!Et.call(f,A)||!zi(u[A],f[A]))return!1}return!0}function ji(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Tu(u,f){var y=ji(u);u=0;for(var S;y;){if(y.nodeType===3){if(S=u+y.textContent.length,u<=f&&S>=f)return{node:y,offset:f-u};u=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=ji(y)}}function Gc(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?Gc(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function Ro(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Zo(u.document);f instanceof u.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)u=f.contentWindow;else break;f=Zo(u.document)}return f}function Jo(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var va=zc&&"documentMode"in document&&11>=document.documentMode,cs=null,_a=null,Ir=null,tc=!1;function Ua(u,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;tc||cs==null||cs!==Zo(S)||(S=cs,"selectionStart"in S&&Jo(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Ir&&Le(Ir,S)||(Ir=S,S=mA(_a,"onSelect"),0<S.length&&(f=new uf("onSelect","select",null,f,y),u.push({event:f,listeners:S}),f.target=cs)))}function Ji(u,f){var y={};return y[u.toLowerCase()]=f.toLowerCase(),y["Webkit"+u]="webkit"+f,y["Moz"+u]="moz"+f,y}var pi={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},Gs={},ho={};zc&&(ho=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Dr(u){if(Gs[u])return Gs[u];if(!pi[u])return u;var f=pi[u],y;for(y in f)if(f.hasOwnProperty(y)&&y in ho)return Gs[u]=f[y];return u}var Ke=Dr("animationend"),po=Dr("animationiteration"),gr=Dr("animationstart"),Eu=Dr("transitionrun"),es=Dr("transitionstart"),No=Dr("transitioncancel"),Ka=Dr("transitionend"),Hc=new Map,yr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yr.push("scrollEnd");function Os(u,f){Hc.set(u,f),ee(f,[u])}var ar=new WeakMap;function gs(u,f){if(typeof u=="object"&&u!==null){var y=ar.get(u);return y!==void 0?y:(f={value:u,source:f,stack:fi(f)},ar.set(u,f),f)}return{value:u,source:f,stack:fi(f)}}var ys=[],Fr=0,pd=0;function Hs(){for(var u=Fr,f=pd=Fr=0;f<u;){var y=ys[f];ys[f++]=null;var S=ys[f];ys[f++]=null;var A=ys[f];ys[f++]=null;var O=ys[f];if(ys[f++]=null,S!==null&&A!==null){var j=S.pending;j===null?A.next=A:(A.next=j.next,j.next=A),S.pending=A}O!==0&&md(y,A,O)}}function nc(u,f,y,S){ys[Fr++]=u,ys[Fr++]=f,ys[Fr++]=y,ys[Fr++]=S,pd|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function Dl(u,f,y,S){return nc(u,f,y,S),el(u)}function Do(u,f){return nc(u,null,null,f),el(u)}function md(u,f,y){u.lanes|=y;var S=u.alternate;S!==null&&(S.lanes|=y);for(var A=!1,O=u.return;O!==null;)O.childLanes|=y,S=O.alternate,S!==null&&(S.childLanes|=y),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(A=!0)),u=O,O=O.return;return u.tag===3?(O=u.stateNode,A&&f!==null&&(A=31-Lt(y),u=O.hiddenUpdates,S=u[A],S===null?u[A]=[f]:S.push(f),f.lane=y|536870912),O):null}function el(u){if(50<Cd)throw Cd=0,Gp=null,Error(n(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var Po={};function yi(u,f,y,S){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(u,f,y,S){return new yi(u,f,y,S)}function mo(u){return u=u.prototype,!(!u||!u.isReactComponent)}function qi(u,f){var y=u.alternate;return y===null?(y=zr(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function tl(u,f){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function js(u,f,y,S,A,O){var j=0;if(S=u,typeof u=="function")mo(u)&&(j=1);else if(typeof u=="string")j=eae(u,y,we.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case I:return u=zr(31,y,f,A),u.elementType=I,u.lanes=O,u;case _:return nl(y.children,A,O,f);case x:j=8,A|=24;break;case T:return u=zr(12,y,f,A|2),u.elementType=T,u.lanes=O,u;case N:return u=zr(13,y,f,A),u.elementType=N,u.lanes=O,u;case D:return u=zr(19,y,f,A),u.elementType=D,u.lanes=O,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case b:case M:j=10;break e;case w:j=9;break e;case R:j=11;break e;case L:j=14;break e;case F:j=16,S=null;break e}j=29,y=Error(n(130,u===null?"null":typeof u,"")),S=null}return f=zr(j,y,f,A),f.elementType=u,f.type=S,f.lanes=O,f}function nl(u,f,y,S){return u=zr(7,u,S,f),u.lanes=y,u}function il(u,f,y){return u=zr(6,u,null,f),u.lanes=y,u}function gd(u,f,y){return f=zr(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var Hn=[],ln=0,Di=null,zt=0,_n=[],rn=0,Pn=null,vs=1,ei="";function rs(u,f){Hn[ln++]=zt,Hn[ln++]=Di,Di=u,zt=f}function Jr(u,f,y){_n[rn++]=vs,_n[rn++]=ei,_n[rn++]=Pn,Pn=u;var S=vs;u=ei;var A=32-Lt(S)-1;S&=~(1<<A),y+=1;var O=32-Lt(f)+A;if(30<O){var j=A-A%5;O=(S&(1<<j)-1).toString(32),S>>=j,A-=j,vs=1<<32-Lt(f)+A|y<<A|S,ei=O+u}else vs=1<<O|y<<A|S,ei=u}function $s(u){u.return!==null&&(rs(u,1),Jr(u,1,0))}function ws(u){for(;u===Di;)Di=Hn[--ln],Hn[ln]=null,zt=Hn[--ln],Hn[ln]=null;for(;u===Pn;)Pn=_n[--rn],_n[rn]=null,ei=_n[--rn],_n[rn]=null,vs=_n[--rn],_n[rn]=null}var li=null,Vi=null,Cn=!1,Ws=null,vr=!1,Vr=Error(n(519));function qs(u){var f=Error(n(418,""));throw Za(gs(f,u)),Vr}function Ba(u){var f=u.stateNode,y=u.type,S=u.memoizedProps;switch(f[wr]=u,f[Ds]=S,y){case"dialog":ki("cancel",f),ki("close",f);break;case"iframe":case"object":case"embed":ki("load",f);break;case"video":case"audio":for(y=0;y<AT.length;y++)ki(AT[y],f);break;case"source":ki("error",f);break;case"img":case"image":case"link":ki("error",f),ki("load",f);break;case"details":ki("toggle",f);break;case"input":ki("invalid",f),Xa(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),On(f);break;case"select":ki("invalid",f);break;case"textarea":ki("invalid",f),Vs(f,S.value,S.defaultValue,S.children),On(f)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||o4(f.textContent,y)?(S.popover!=null&&(ki("beforetoggle",f),ki("toggle",f)),S.onScroll!=null&&ki("scroll",f),S.onScrollEnd!=null&&ki("scrollend",f),S.onClick!=null&&(f.onclick=gA),f=!0):f=!1,f||qs(u)}function wu(u){for(li=u.return;li;)switch(li.tag){case 5:case 13:vr=!1;return;case 27:case 3:vr=!0;return;default:li=li.return}}function Oo(u){if(u!==li)return!1;if(!Cn)return wu(u),Cn=!0,!1;var f=u.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||dP(u.type,u.memoizedProps)),y=!y),y&&Vi&&qs(u),wu(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(y=u.data,y==="/$"){if(f===0){Vi=Sf(u.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;u=u.nextSibling}Vi=null}}else f===27?(f=Vi,bg(u.type)?(u=mP,mP=null,Vi=u):Vi=f):Vi=li?Sf(u.stateNode.nextSibling):null;return!0}function Pr(){Vi=li=null,Cn=!1}function In(){var u=Ws;return u!==null&&(Fn===null?Fn=u:Fn.push.apply(Fn,u),Ws=null),u}function Za(u){Ws===null?Ws=[u]:Ws.push(u)}var wp=ue(null),Mu=null,sl=null;function Ia(u,f,y){Ne(wp,f._currentValue),f._currentValue=y}function rl(u){u._currentValue=wp.current,Ae(wp)}function oh(u,f,y){for(;u!==null;){var S=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),u===y)break;u=u.return}}function Pl(u,f,y,S){var A=u.child;for(A!==null&&(A.return=u);A!==null;){var O=A.dependencies;if(O!==null){var j=A.child;O=O.firstContext;e:for(;O!==null;){var J=O;O=A;for(var pe=0;pe<f.length;pe++)if(J.context===f[pe]){O.lanes|=y,J=O.alternate,J!==null&&(J.lanes|=y),oh(O.return,y,u),S||(j=null);break e}O=J.next}}else if(A.tag===18){if(j=A.return,j===null)throw Error(n(341));j.lanes|=y,O=j.alternate,O!==null&&(O.lanes|=y),oh(j,y,u),j=null}else j=A.child;if(j!==null)j.return=A;else for(j=A;j!==null;){if(j===u){j=null;break}if(A=j.sibling,A!==null){A.return=j.return,j=A;break}j=j.return}A=j}}function jc(u,f,y,S){u=null;for(var A=f,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var j=A.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var J=A.type;zi(A.pendingProps.value,j.value)||(u!==null?u.push(J):u=[J])}}else if(A===Ue.current){if(j=A.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(u!==null?u.push(OT):u=[OT])}A=A.return}u!==null&&Pl(f,u,y,S),f.flags|=262144}function g0(u){for(u=u.firstContext;u!==null;){if(!zi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function yd(u){Mu=u,sl=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function kr(u){return D_(Mu,u)}function y0(u,f){return Mu===null&&yd(u),D_(u,f)}function D_(u,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},sl===null){if(u===null)throw Error(n(308));sl=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else sl=sl.next=f;return y}var eT=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,S){u.push(S)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},WD=i.unstable_scheduleCallback,EM=i.unstable_NormalPriority,xa={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function P_(){return{controller:new eT,data:new Map,refCount:0}}function Qm(u){u.refCount--,u.refCount===0&&WD(EM,function(){u.controller.abort()})}var Jm=null,v0=0,mi=0,eg=null;function ic(u,f){if(Jm===null){var y=Jm=[];v0=0,mi=nP(),eg={status:"pending",value:void 0,then:function(S){y.push(S)}}}return v0++,f.then(O_,O_),f}function O_(){if(--v0===0&&Jm!==null){eg!==null&&(eg.status="fulfilled");var u=Jm;Jm=null,mi=0,eg=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function qD(u,f){var y=[],S={status:"pending",value:null,reason:null,then:function(A){y.push(A)}};return u.then(function(){S.status="fulfilled",S.value=f;for(var A=0;A<y.length;A++)(0,y[A])(f)},function(A){for(S.status="rejected",S.reason=A,A=0;A<y.length;A++)(0,y[A])(void 0)}),S}var _0=G.S;G.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&ic(u,f),_0!==null&&_0(u,f)};var $c=ue(null);function lh(){var u=$c.current;return u!==null?u:ci.pooledCache}function x0(u,f){f===null?Ne($c,$c.current):Ne($c,f.pool)}function L_(){var u=lh();return u===null?null:{parent:xa._currentValue,pool:u}}var b0=Error(n(460)),tT=Error(n(474)),Au=Error(n(542)),S0={then:function(){}};function U_(u){return u=u.status,u==="fulfilled"||u==="rejected"}function tg(){}function B_(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(tg,tg),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,wM(u),u;default:if(typeof f.status=="string")f.then(tg,tg);else{if(u=ci,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=f,u.status="pending",u.then(function(S){if(f.status==="pending"){var A=f;A.status="fulfilled",A.value=S}},function(S){if(f.status==="pending"){var A=f;A.status="rejected",A.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,wM(u),u}throw Wc=f,b0}}var Wc=null;function nT(){if(Wc===null)throw Error(n(459));var u=Wc;return Wc=null,u}function wM(u){if(u===b0||u===Au)throw Error(n(483))}var df=!1;function iT(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xn(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function vd(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function ff(u,f,y){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,(us&2)!==0){var A=S.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),S.pending=f,f=el(u),md(u,null,y),f}return nc(u,S,f,y),el(u)}function Mp(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=u.pendingLanes,y|=S,f.lanes=y,nn(u,y)}}function ng(u,f){var y=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var A=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var j={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};O===null?A=O=j:O=O.next=j,y=y.next}while(y!==null);O===null?A=O=f:O=O.next=f}else A=O=f;y={baseState:S.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:S.shared,callbacks:S.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}var sT=!1;function T0(){if(sT){var u=eg;if(u!==null)throw u}}function ig(u,f,y,S){sT=!1;var A=u.updateQueue;df=!1;var O=A.firstBaseUpdate,j=A.lastBaseUpdate,J=A.shared.pending;if(J!==null){A.shared.pending=null;var pe=J,ke=pe.next;pe.next=null,j===null?O=ke:j.next=ke,j=pe;var ft=u.alternate;ft!==null&&(ft=ft.updateQueue,J=ft.lastBaseUpdate,J!==j&&(J===null?ft.firstBaseUpdate=ke:J.next=ke,ft.lastBaseUpdate=pe))}if(O!==null){var vt=A.baseState;j=0,ft=ke=pe=null,J=O;do{var qe=J.lane&-536870913,Qe=qe!==J.lane;if(Qe?(Dn&qe)===qe:(S&qe)===qe){qe!==0&&qe===mi&&(sT=!0),ft!==null&&(ft=ft.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var ti=u,jn=J;qe=f;var Qs=y;switch(jn.tag){case 1:if(ti=jn.payload,typeof ti=="function"){vt=ti.call(Qs,vt,qe);break e}vt=ti;break e;case 3:ti.flags=ti.flags&-65537|128;case 0:if(ti=jn.payload,qe=typeof ti=="function"?ti.call(Qs,vt,qe):ti,qe==null)break e;vt=d({},vt,qe);break e;case 2:df=!0}}qe=J.callback,qe!==null&&(u.flags|=64,Qe&&(u.flags|=8192),Qe=A.callbacks,Qe===null?A.callbacks=[qe]:Qe.push(qe))}else Qe={lane:qe,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ft===null?(ke=ft=Qe,pe=vt):ft=ft.next=Qe,j|=qe;if(J=J.next,J===null){if(J=A.shared.pending,J===null)break;Qe=J,J=Qe.next,Qe.next=null,A.lastBaseUpdate=Qe,A.shared.pending=null}}while(!0);ft===null&&(pe=vt),A.baseState=pe,A.firstBaseUpdate=ke,A.lastBaseUpdate=ft,O===null&&(A.shared.lanes=0),Uu|=j,u.lanes=j,u.memoizedState=vt}}function sg(u,f){if(typeof u!="function")throw Error(n(191,u));u.call(f)}function MM(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)sg(y[u],f)}var rg=ue(null),I_=ue(0);function AM(u,f){u=Qc,Ne(I_,u),Ne(rg,f),Qc=u|f.baseLanes}function rT(){Ne(I_,Qc),Ne(rg,rg.current)}function E0(){Qc=I_.current,Ae(rg),Ae(I_)}var hf=0,gi=null,_s=null,ba=null,F_=!1,ch=!1,al=!1,Fa=0,qc=0,go=null,CM=0;function ea(){throw Error(n(321))}function Lo(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!zi(u[y],f[y]))return!1;return!0}function pf(u,f,y,S,A,O){return hf=O,gi=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,G.H=u===null||u.memoizedState===null?q_:bT,al=!1,O=y(S,A),al=!1,ch&&(O=NM(f,y,S,A)),RM(u),O}function RM(u){G.H=A0;var f=_s!==null&&_s.next!==null;if(hf=0,ba=_s=gi=null,F_=!1,qc=0,go=null,f)throw Error(n(300));u===null||Qa||(u=u.dependencies,u!==null&&g0(u)&&(Qa=!0))}function NM(u,f,y,S){gi=u;var A=0;do{if(ch&&(go=null),qc=0,ch=!1,25<=A)throw Error(n(301));if(A+=1,ba=_s=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}G.H=nA,O=f(y,S)}while(ch);return O}function XD(){var u=G.H,f=u.useState()[0];return f=typeof f.then=="function"?Cu(f):f,u=u.useState()[0],(_s!==null?_s.memoizedState:null)!==u&&(gi.flags|=1024),f}function aT(){var u=Fa!==0;return Fa=0,u}function z_(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function oT(u){if(F_){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}F_=!1}hf=0,ba=_s=gi=null,ch=!1,qc=Fa=0,go=null}function ol(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?gi.memoizedState=ba=u:ba=ba.next=u,ba}function Sa(){if(_s===null){var u=gi.alternate;u=u!==null?u.memoizedState:null}else u=_s.next;var f=ba===null?gi.memoizedState:ba.next;if(f!==null)ba=f,_s=u;else{if(u===null)throw gi.alternate===null?Error(n(467)):Error(n(310));_s=u,u={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},ba===null?gi.memoizedState=ba=u:ba=ba.next=u}return ba}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cu(u){var f=qc;return qc+=1,go===null&&(go=[]),u=B_(go,u,f),f=gi,(ba===null?f.memoizedState:ba.next)===null&&(f=f.alternate,G.H=f===null||f.memoizedState===null?q_:bT),u}function V_(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Cu(u);if(u.$$typeof===M)return kr(u)}throw Error(n(438,String(u)))}function lT(u){var f=null,y=gi.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=gi.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(A){return A.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=uh(),gi.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),S=0;S<u;S++)y[S]=z;return f.index++,y}function mf(u,f){return typeof f=="function"?f(u):f}function dh(u){var f=Sa();return cT(f,_s,u)}function cT(u,f,y){var S=u.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=y;var A=u.baseQueue,O=S.pending;if(O!==null){if(A!==null){var j=A.next;A.next=O.next,O.next=j}f.baseQueue=A=O,S.pending=null}if(O=u.baseState,A===null)u.memoizedState=O;else{f=A.next;var J=j=null,pe=null,ke=f,ft=!1;do{var vt=ke.lane&-536870913;if(vt!==ke.lane?(Dn&vt)===vt:(hf&vt)===vt){var qe=ke.revertLane;if(qe===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),vt===mi&&(ft=!0);else if((hf&qe)===qe){ke=ke.next,qe===mi&&(ft=!0);continue}else vt={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},pe===null?(J=pe=vt,j=O):pe=pe.next=vt,gi.lanes|=qe,Uu|=qe;vt=ke.action,al&&y(O,vt),O=ke.hasEagerState?ke.eagerState:y(O,vt)}else qe={lane:vt,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},pe===null?(J=pe=qe,j=O):pe=pe.next=qe,gi.lanes|=vt,Uu|=vt;ke=ke.next}while(ke!==null&&ke!==f);if(pe===null?j=O:pe.next=J,!zi(O,u.memoizedState)&&(Qa=!0,ft&&(y=eg,y!==null)))throw y;u.memoizedState=O,u.baseState=j,u.baseQueue=pe,S.lastRenderedState=O}return A===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function uT(u){var f=Sa(),y=f.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=u;var S=y.dispatch,A=y.pending,O=f.memoizedState;if(A!==null){y.pending=null;var j=A=A.next;do O=u(O,j.action),j=j.next;while(j!==A);zi(O,f.memoizedState)||(Qa=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),y.lastRenderedState=O}return[O,S]}function DM(u,f,y){var S=gi,A=Sa(),O=Cn;if(O){if(y===void 0)throw Error(n(407));y=y()}else y=f();var j=!zi((_s||A).memoizedState,y);j&&(A.memoizedState=y,Qa=!0),A=A.queue;var J=OM.bind(null,S,A,u);if(lg(2048,8,J,[u]),A.getSnapshot!==f||j||ba!==null&&ba.memoizedState.tag&1){if(S.flags|=2048,og(9,w0(),PM.bind(null,S,A,y,f),null),ci===null)throw Error(n(349));O||(hf&124)!==0||ag(S,f,y)}return y}function ag(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=gi.updateQueue,f===null?(f=uh(),gi.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function PM(u,f,y,S){f.value=y,f.getSnapshot=S,LM(f)&&UM(u)}function OM(u,f,y){return y(function(){LM(f)&&UM(u)})}function LM(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!zi(u,y)}catch{return!0}}function UM(u){var f=Do(u,2);f!==null&&ul(f,u,2)}function dT(u){var f=ol();if(typeof u=="function"){var y=u;if(u=y(),al){et(!0);try{y()}finally{et(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:u},f}function BM(u,f,y,S){return u.baseState=y,cT(u,_s,typeof S=="function"?S:mf)}function YD(u,f,y,S,A){if(W_(u))throw Error(n(485));if(u=f.action,u!==null){var O={payload:A,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){O.listeners.push(j)}};G.T!==null?y(!0):O.isTransition=!1,S(O),y=f.pending,y===null?(O.next=f.pending=O,IM(f,O)):(O.next=y.next,f.pending=y.next=O)}}function IM(u,f){var y=f.action,S=f.payload,A=u.state;if(f.isTransition){var O=G.T,j={};G.T=j;try{var J=y(A,S),pe=G.S;pe!==null&&pe(j,J),FM(u,f,J)}catch(ke){fT(u,f,ke)}finally{G.T=O}}else try{O=y(A,S),FM(u,f,O)}catch(ke){fT(u,f,ke)}}function FM(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){zM(u,f,S)},function(S){return fT(u,f,S)}):zM(u,f,y)}function zM(u,f,y){f.status="fulfilled",f.value=y,VM(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,IM(u,y)))}function fT(u,f,y){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,VM(f),f=f.next;while(f!==S)}u.action=null}function VM(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function hT(u,f){return f}function kM(u,f){if(Cn){var y=ci.formState;if(y!==null){e:{var S=gi;if(Cn){if(Vi){t:{for(var A=Vi,O=vr;A.nodeType!==8;){if(!O){A=null;break t}if(A=Sf(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){Vi=Sf(A.nextSibling),S=A.data==="F!";break e}}qs(S)}S=!1}S&&(f=y[0])}}return y=ol(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hT,lastRenderedState:f},y.queue=S,y=eA.bind(null,gi,S),S.dispatch=y,S=dT(!1),O=$_.bind(null,gi,!1,S.queue),S=ol(),A={state:f,dispatch:null,action:u,pending:null},S.queue=A,y=YD.bind(null,gi,A,O,y),A.dispatch=y,S.memoizedState=u,[f,y,!1]}function GM(u){var f=Sa();return HM(f,_s,u)}function HM(u,f,y){if(f=cT(u,f,hT)[0],u=dh(mf)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=Cu(f)}catch(j){throw j===b0?Au:j}else S=f;f=Sa();var A=f.queue,O=A.dispatch;return y!==f.memoizedState&&(gi.flags|=2048,og(9,w0(),KD.bind(null,A,y),null)),[S,O,u]}function KD(u,f){u.action=f}function jM(u){var f=Sa(),y=_s;if(y!==null)return HM(f,y,u);Sa(),f=f.memoizedState,y=Sa();var S=y.queue.dispatch;return y.memoizedState=u,[f,S,!1]}function og(u,f,y,S){return u={tag:u,create:y,deps:S,inst:f,next:null},f=gi.updateQueue,f===null&&(f=uh(),gi.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(S=y.next,y.next=u,u.next=S,f.lastEffect=u),u}function w0(){return{destroy:void 0,resource:void 0}}function pT(){return Sa().memoizedState}function k_(u,f,y,S){var A=ol();S=S===void 0?null:S,gi.flags|=u,A.memoizedState=og(1|f,w0(),y,S)}function lg(u,f,y,S){var A=Sa();S=S===void 0?null:S;var O=A.memoizedState.inst;_s!==null&&S!==null&&Lo(S,_s.memoizedState.deps)?A.memoizedState=og(f,O,y,S):(gi.flags|=u,A.memoizedState=og(1|f,O,y,S))}function mT(u,f){k_(8390656,8,u,f)}function gT(u,f){lg(2048,8,u,f)}function G_(u,f){return lg(4,2,u,f)}function H_(u,f){return lg(4,4,u,f)}function $M(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function WM(u,f,y){y=y!=null?y.concat([u]):null,lg(4,4,$M.bind(null,f,u),y)}function yT(){}function qM(u,f){var y=Sa();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&Lo(f,S[1])?S[0]:(y.memoizedState=[u,f],u)}function vT(u,f){var y=Sa();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&Lo(f,S[1]))return S[0];if(S=u(),al){et(!0);try{u()}finally{et(!1)}}return y.memoizedState=[S,f],S}function j_(u,f,y){return y===void 0||(hf&1073741824)!==0?u.memoizedState=f:(u.memoizedState=y,u=sx(),gi.lanes|=u,Uu|=u,y)}function XM(u,f,y,S){return zi(y,f)?y:rg.current!==null?(u=j_(u,y,S),zi(u,f)||(Qa=!0),u):(hf&42)===0?(Qa=!0,u.memoizedState=y):(u=sx(),gi.lanes|=u,Uu|=u,f)}function YM(u,f,y,S,A){var O=K.p;K.p=O!==0&&8>O?O:8;var j=G.T,J={};G.T=J,$_(u,!1,f,y);try{var pe=A(),ke=G.S;if(ke!==null&&ke(J,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var ft=qD(pe,S);M0(u,f,ft,jr(u))}else M0(u,f,S,jr(u))}catch(vt){M0(u,f,{then:function(){},status:"rejected",reason:vt},jr())}finally{K.p=O,G.T=j}}function ZD(){}function _T(u,f,y,S){if(u.tag!==5)throw Error(n(476));var A=KM(u).queue;YM(u,A,f,$,y===null?ZD:function(){return ZM(u),y(S)})}function KM(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:$},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function ZM(u){var f=KM(u).next.queue;M0(u,f,{},jr())}function xT(){return kr(OT)}function QM(){return Sa().memoizedState}function JM(){return Sa().memoizedState}function QD(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=jr();u=vd(y);var S=ff(f,u,y);S!==null&&(ul(S,f,y),Mp(S,f,y)),f={cache:P_()},u.payload=f;return}f=f.return}}function JD(u,f,y){var S=jr();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},W_(u)?tA(f,y):(y=Dl(u,f,y,S),y!==null&&(ul(y,u,S),sc(y,f,S)))}function eA(u,f,y){var S=jr();M0(u,f,y,S)}function M0(u,f,y,S){var A={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(W_(u))tA(f,A);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var j=f.lastRenderedState,J=O(j,y);if(A.hasEagerState=!0,A.eagerState=J,zi(J,j))return nc(u,f,A,0),ci===null&&Hs(),!1}catch{}finally{}if(y=Dl(u,f,A,S),y!==null)return ul(y,u,S),sc(y,f,S),!0}return!1}function $_(u,f,y,S){if(S={lane:2,revertLane:nP(),action:S,hasEagerState:!1,eagerState:null,next:null},W_(u)){if(f)throw Error(n(479))}else f=Dl(u,y,S,2),f!==null&&ul(f,u,2)}function W_(u){var f=u.alternate;return u===gi||f!==null&&f===gi}function tA(u,f){ch=F_=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function sc(u,f,y){if((y&4194048)!==0){var S=f.lanes;S&=u.pendingLanes,y|=S,f.lanes=y,nn(u,y)}}var A0={readContext:kr,use:V_,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useInsertionEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useSyncExternalStore:ea,useId:ea,useHostTransitionStatus:ea,useFormState:ea,useActionState:ea,useOptimistic:ea,useMemoCache:ea,useCacheRefresh:ea},q_={readContext:kr,use:V_,useCallback:function(u,f){return ol().memoizedState=[u,f===void 0?null:f],u},useContext:kr,useEffect:mT,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,k_(4194308,4,$M.bind(null,f,u),y)},useLayoutEffect:function(u,f){return k_(4194308,4,u,f)},useInsertionEffect:function(u,f){k_(4,2,u,f)},useMemo:function(u,f){var y=ol();f=f===void 0?null:f;var S=u();if(al){et(!0);try{u()}finally{et(!1)}}return y.memoizedState=[S,f],S},useReducer:function(u,f,y){var S=ol();if(y!==void 0){var A=y(f);if(al){et(!0);try{y(f)}finally{et(!1)}}}else A=f;return S.memoizedState=S.baseState=A,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:A},S.queue=u,u=u.dispatch=JD.bind(null,gi,u),[S.memoizedState,u]},useRef:function(u){var f=ol();return u={current:u},f.memoizedState=u},useState:function(u){u=dT(u);var f=u.queue,y=eA.bind(null,gi,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:yT,useDeferredValue:function(u,f){var y=ol();return j_(y,u,f)},useTransition:function(){var u=dT(!1);return u=YM.bind(null,gi,u.queue,!0,!1),ol().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var S=gi,A=ol();if(Cn){if(y===void 0)throw Error(n(407));y=y()}else{if(y=f(),ci===null)throw Error(n(349));(Dn&124)!==0||ag(S,f,y)}A.memoizedState=y;var O={value:y,getSnapshot:f};return A.queue=O,mT(OM.bind(null,S,O,u),[u]),S.flags|=2048,og(9,w0(),PM.bind(null,S,O,y,f),null),y},useId:function(){var u=ol(),f=ci.identifierPrefix;if(Cn){var y=ei,S=vs;y=(S&~(1<<32-Lt(S)-1)).toString(32)+y,f=""+f+"R"+y,y=Fa++,0<y&&(f+="H"+y.toString(32)),f+=""}else y=CM++,f=""+f+"r"+y.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:xT,useFormState:kM,useActionState:kM,useOptimistic:function(u){var f=ol();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=$_.bind(null,gi,!0,y),y.dispatch=f,[u,f]},useMemoCache:lT,useCacheRefresh:function(){return ol().memoizedState=QD.bind(null,gi)}},bT={readContext:kr,use:V_,useCallback:qM,useContext:kr,useEffect:gT,useImperativeHandle:WM,useInsertionEffect:G_,useLayoutEffect:H_,useMemo:vT,useReducer:dh,useRef:pT,useState:function(){return dh(mf)},useDebugValue:yT,useDeferredValue:function(u,f){var y=Sa();return XM(y,_s.memoizedState,u,f)},useTransition:function(){var u=dh(mf)[0],f=Sa().memoizedState;return[typeof u=="boolean"?u:Cu(u),f]},useSyncExternalStore:DM,useId:QM,useHostTransitionStatus:xT,useFormState:GM,useActionState:GM,useOptimistic:function(u,f){var y=Sa();return BM(y,_s,u,f)},useMemoCache:lT,useCacheRefresh:JM},nA={readContext:kr,use:V_,useCallback:qM,useContext:kr,useEffect:gT,useImperativeHandle:WM,useInsertionEffect:G_,useLayoutEffect:H_,useMemo:vT,useReducer:uT,useRef:pT,useState:function(){return uT(mf)},useDebugValue:yT,useDeferredValue:function(u,f){var y=Sa();return _s===null?j_(y,u,f):XM(y,_s.memoizedState,u,f)},useTransition:function(){var u=uT(mf)[0],f=Sa().memoizedState;return[typeof u=="boolean"?u:Cu(u),f]},useSyncExternalStore:DM,useId:QM,useHostTransitionStatus:xT,useFormState:jM,useActionState:jM,useOptimistic:function(u,f){var y=Sa();return _s!==null?BM(y,_s,u,f):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:lT,useCacheRefresh:JM},Ap=null,C0=0;function R0(u){var f=C0;return C0+=1,Ap===null&&(Ap=[]),B_(Ap,u,f)}function cg(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function X_(u,f){throw f.$$typeof===h?Error(n(525)):(u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function iA(u){var f=u._init;return f(u._payload)}function sA(u){function f(Re,Te){if(u){var ze=Re.deletions;ze===null?(Re.deletions=[Te],Re.flags|=16):ze.push(Te)}}function y(Re,Te){if(!u)return null;for(;Te!==null;)f(Re,Te),Te=Te.sibling;return null}function S(Re){for(var Te=new Map;Re!==null;)Re.key!==null?Te.set(Re.key,Re):Te.set(Re.index,Re),Re=Re.sibling;return Te}function A(Re,Te){return Re=qi(Re,Te),Re.index=0,Re.sibling=null,Re}function O(Re,Te,ze){return Re.index=ze,u?(ze=Re.alternate,ze!==null?(ze=ze.index,ze<Te?(Re.flags|=67108866,Te):ze):(Re.flags|=67108866,Te)):(Re.flags|=1048576,Te)}function j(Re){return u&&Re.alternate===null&&(Re.flags|=67108866),Re}function J(Re,Te,ze,mt){return Te===null||Te.tag!==6?(Te=il(ze,Re.mode,mt),Te.return=Re,Te):(Te=A(Te,ze),Te.return=Re,Te)}function pe(Re,Te,ze,mt){var mn=ze.type;return mn===_?ft(Re,Te,ze.props.children,mt,ze.key):Te!==null&&(Te.elementType===mn||typeof mn=="object"&&mn!==null&&mn.$$typeof===F&&iA(mn)===Te.type)?(Te=A(Te,ze.props),cg(Te,ze),Te.return=Re,Te):(Te=js(ze.type,ze.key,ze.props,null,Re.mode,mt),cg(Te,ze),Te.return=Re,Te)}function ke(Re,Te,ze,mt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==ze.containerInfo||Te.stateNode.implementation!==ze.implementation?(Te=gd(ze,Re.mode,mt),Te.return=Re,Te):(Te=A(Te,ze.children||[]),Te.return=Re,Te)}function ft(Re,Te,ze,mt,mn){return Te===null||Te.tag!==7?(Te=nl(ze,Re.mode,mt,mn),Te.return=Re,Te):(Te=A(Te,ze),Te.return=Re,Te)}function vt(Re,Te,ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=il(""+Te,Re.mode,ze),Te.return=Re,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case m:return ze=js(Te.type,Te.key,Te.props,null,Re.mode,ze),cg(ze,Te),ze.return=Re,ze;case v:return Te=gd(Te,Re.mode,ze),Te.return=Re,Te;case F:var mt=Te._init;return Te=mt(Te._payload),vt(Re,Te,ze)}if(oe(Te)||Y(Te))return Te=nl(Te,Re.mode,ze,null),Te.return=Re,Te;if(typeof Te.then=="function")return vt(Re,R0(Te),ze);if(Te.$$typeof===M)return vt(Re,y0(Re,Te),ze);X_(Re,Te)}return null}function qe(Re,Te,ze,mt){var mn=Te!==null?Te.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return mn!==null?null:J(Re,Te,""+ze,mt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case m:return ze.key===mn?pe(Re,Te,ze,mt):null;case v:return ze.key===mn?ke(Re,Te,ze,mt):null;case F:return mn=ze._init,ze=mn(ze._payload),qe(Re,Te,ze,mt)}if(oe(ze)||Y(ze))return mn!==null?null:ft(Re,Te,ze,mt,null);if(typeof ze.then=="function")return qe(Re,Te,R0(ze),mt);if(ze.$$typeof===M)return qe(Re,Te,y0(Re,ze),mt);X_(Re,ze)}return null}function Qe(Re,Te,ze,mt,mn){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Re=Re.get(ze)||null,J(Te,Re,""+mt,mn);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case m:return Re=Re.get(mt.key===null?ze:mt.key)||null,pe(Te,Re,mt,mn);case v:return Re=Re.get(mt.key===null?ze:mt.key)||null,ke(Te,Re,mt,mn);case F:var Fi=mt._init;return mt=Fi(mt._payload),Qe(Re,Te,ze,mt,mn)}if(oe(mt)||Y(mt))return Re=Re.get(ze)||null,ft(Te,Re,mt,mn,null);if(typeof mt.then=="function")return Qe(Re,Te,ze,R0(mt),mn);if(mt.$$typeof===M)return Qe(Re,Te,ze,y0(Te,mt),mn);X_(Te,mt)}return null}function ti(Re,Te,ze,mt){for(var mn=null,Fi=null,Nn=Te,$n=Te=0,Io=null;Nn!==null&&$n<ze.length;$n++){Nn.index>$n?(Io=Nn,Nn=null):Io=Nn.sibling;var fs=qe(Re,Nn,ze[$n],mt);if(fs===null){Nn===null&&(Nn=Io);break}u&&Nn&&fs.alternate===null&&f(Re,Nn),Te=O(fs,Te,$n),Fi===null?mn=fs:Fi.sibling=fs,Fi=fs,Nn=Io}if($n===ze.length)return y(Re,Nn),Cn&&rs(Re,$n),mn;if(Nn===null){for(;$n<ze.length;$n++)Nn=vt(Re,ze[$n],mt),Nn!==null&&(Te=O(Nn,Te,$n),Fi===null?mn=Nn:Fi.sibling=Nn,Fi=Nn);return Cn&&rs(Re,$n),mn}for(Nn=S(Nn);$n<ze.length;$n++)Io=Qe(Nn,Re,$n,ze[$n],mt),Io!==null&&(u&&Io.alternate!==null&&Nn.delete(Io.key===null?$n:Io.key),Te=O(Io,Te,$n),Fi===null?mn=Io:Fi.sibling=Io,Fi=Io);return u&&Nn.forEach(function(Mg){return f(Re,Mg)}),Cn&&rs(Re,$n),mn}function jn(Re,Te,ze,mt){if(ze==null)throw Error(n(151));for(var mn=null,Fi=null,Nn=Te,$n=Te=0,Io=null,fs=ze.next();Nn!==null&&!fs.done;$n++,fs=ze.next()){Nn.index>$n?(Io=Nn,Nn=null):Io=Nn.sibling;var Mg=qe(Re,Nn,fs.value,mt);if(Mg===null){Nn===null&&(Nn=Io);break}u&&Nn&&Mg.alternate===null&&f(Re,Nn),Te=O(Mg,Te,$n),Fi===null?mn=Mg:Fi.sibling=Mg,Fi=Mg,Nn=Io}if(fs.done)return y(Re,Nn),Cn&&rs(Re,$n),mn;if(Nn===null){for(;!fs.done;$n++,fs=ze.next())fs=vt(Re,fs.value,mt),fs!==null&&(Te=O(fs,Te,$n),Fi===null?mn=fs:Fi.sibling=fs,Fi=fs);return Cn&&rs(Re,$n),mn}for(Nn=S(Nn);!fs.done;$n++,fs=ze.next())fs=Qe(Nn,Re,$n,fs.value,mt),fs!==null&&(u&&fs.alternate!==null&&Nn.delete(fs.key===null?$n:fs.key),Te=O(fs,Te,$n),Fi===null?mn=fs:Fi.sibling=fs,Fi=fs);return u&&Nn.forEach(function(fae){return f(Re,fae)}),Cn&&rs(Re,$n),mn}function Qs(Re,Te,ze,mt){if(typeof ze=="object"&&ze!==null&&ze.type===_&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case m:e:{for(var mn=ze.key;Te!==null;){if(Te.key===mn){if(mn=ze.type,mn===_){if(Te.tag===7){y(Re,Te.sibling),mt=A(Te,ze.props.children),mt.return=Re,Re=mt;break e}}else if(Te.elementType===mn||typeof mn=="object"&&mn!==null&&mn.$$typeof===F&&iA(mn)===Te.type){y(Re,Te.sibling),mt=A(Te,ze.props),cg(mt,ze),mt.return=Re,Re=mt;break e}y(Re,Te);break}else f(Re,Te);Te=Te.sibling}ze.type===_?(mt=nl(ze.props.children,Re.mode,mt,ze.key),mt.return=Re,Re=mt):(mt=js(ze.type,ze.key,ze.props,null,Re.mode,mt),cg(mt,ze),mt.return=Re,Re=mt)}return j(Re);case v:e:{for(mn=ze.key;Te!==null;){if(Te.key===mn)if(Te.tag===4&&Te.stateNode.containerInfo===ze.containerInfo&&Te.stateNode.implementation===ze.implementation){y(Re,Te.sibling),mt=A(Te,ze.children||[]),mt.return=Re,Re=mt;break e}else{y(Re,Te);break}else f(Re,Te);Te=Te.sibling}mt=gd(ze,Re.mode,mt),mt.return=Re,Re=mt}return j(Re);case F:return mn=ze._init,ze=mn(ze._payload),Qs(Re,Te,ze,mt)}if(oe(ze))return ti(Re,Te,ze,mt);if(Y(ze)){if(mn=Y(ze),typeof mn!="function")throw Error(n(150));return ze=mn.call(ze),jn(Re,Te,ze,mt)}if(typeof ze.then=="function")return Qs(Re,Te,R0(ze),mt);if(ze.$$typeof===M)return Qs(Re,Te,y0(Re,ze),mt);X_(Re,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Te!==null&&Te.tag===6?(y(Re,Te.sibling),mt=A(Te,ze),mt.return=Re,Re=mt):(y(Re,Te),mt=il(ze,Re.mode,mt),mt.return=Re,Re=mt),j(Re)):y(Re,Te)}return function(Re,Te,ze,mt){try{C0=0;var mn=Qs(Re,Te,ze,mt);return Ap=null,mn}catch(Nn){if(Nn===b0||Nn===Au)throw Nn;var Fi=zr(29,Nn,null,Re.mode);return Fi.lanes=mt,Fi.return=Re,Fi}finally{}}}var Cp=sA(!0),rA=sA(!1),Ls=ue(null),Ru=null;function fh(u){var f=u.alternate;Ne(ta,ta.current&1),Ne(Ls,u),Ru===null&&(f===null||rg.current!==null||f.memoizedState!==null)&&(Ru=u)}function aA(u){if(u.tag===22){if(Ne(ta,ta.current),Ne(Ls,u),Ru===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(Ru=u)}}else hh()}function hh(){Ne(ta,ta.current),Ne(Ls,Ls.current)}function _d(u){Ae(Ls),Ru===u&&(Ru=null),Ae(ta)}var ta=ue(0);function gf(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||pP(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function ph(u,f,y,S){f=u.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var ll={enqueueSetState:function(u,f,y){u=u._reactInternals;var S=jr(),A=vd(S);A.payload=f,y!=null&&(A.callback=y),f=ff(u,A,S),f!==null&&(ul(f,u,S),Mp(f,u,S))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var S=jr(),A=vd(S);A.tag=1,A.payload=f,y!=null&&(A.callback=y),f=ff(u,A,S),f!==null&&(ul(f,u,S),Mp(f,u,S))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=jr(),S=vd(y);S.tag=2,f!=null&&(S.callback=f),f=ff(u,S,y),f!==null&&(ul(f,u,y),Mp(f,u,y))}};function oA(u,f,y,S,A,O,j){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,O,j):f.prototype&&f.prototype.isPureReactComponent?!Le(y,S)||!Le(A,O):!0}function lA(u,f,y,S){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==u&&ll.enqueueReplaceState(f,f.state,null)}function xd(u,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(u=u.defaultProps){y===f&&(y=d({},y));for(var A in u)y[A]===void 0&&(y[A]=u[A])}return y}var Rp=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function N0(u){Rp(u)}function Y_(u){console.error(u)}function cA(u){Rp(u)}function K_(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function Xc(u,f,y){try{var S=u.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Z_(u,f,y){return y=vd(y),y.tag=3,y.payload={element:null},y.callback=function(){K_(u,f)},y}function uA(u){return u=vd(u),u.tag=3,u}function Q_(u,f,y,S){var A=y.type.getDerivedStateFromError;if(typeof A=="function"){var O=S.value;u.payload=function(){return A(O)},u.callback=function(){Xc(f,y,S)}}var j=y.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(u.callback=function(){Xc(f,y,S),typeof A!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var J=S.stack;this.componentDidCatch(S.value,{componentStack:J!==null?J:""})})}function eP(u,f,y,S,A){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&jc(f,y,A,!0),y=Ls.current,y!==null){switch(y.tag){case 13:return Ru===null?p():y.alternate===null&&or===0&&(or=3),y.flags&=-257,y.flags|=65536,y.lanes=A,S===S0?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),Je(u,S,A)),!1;case 22:return y.flags|=65536,S===S0?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),Je(u,S,A)),!1}throw Error(n(435,y.tag))}return Je(u,S,A),p(),!1}if(Cn)return f=Ls.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=A,S!==Vr&&(u=Error(n(422),{cause:S}),Za(gs(u,y)))):(S!==Vr&&(f=Error(n(423),{cause:S}),Za(gs(f,y))),u=u.current.alternate,u.flags|=65536,A&=-A,u.lanes|=A,S=gs(S,y),A=Z_(u.stateNode,S,A),ng(u,A),or!==4&&(or=2)),!1;var O=Error(n(520),{cause:S});if(O=gs(O,y),ds===null?ds=[O]:ds.push(O),or!==4&&(or=2),f===null)return!0;S=gs(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=A&-A,y.lanes|=u,u=Z_(y.stateNode,S,u),ng(y,u),!1;case 1:if(f=y.type,O=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(fc===null||!fc.has(O))))return y.flags|=65536,A&=-A,y.lanes|=A,A=uA(A),Q_(A,u,y,S),ng(y,A),!1}y=y.return}while(y!==null);return!1}var dA=Error(n(461)),Qa=!1;function na(u,f,y,S){f.child=u===null?rA(f,null,y,S):Cp(f,u.child,y,S)}function Ol(u,f,y,S,A){y=y.render;var O=f.ref;if("ref"in S){var j={};for(var J in S)J!=="ref"&&(j[J]=S[J])}else j=S;return yd(f),S=pf(u,f,y,j,O,A),J=aT(),u!==null&&!Qa?(z_(u,f,A),Ja(u,f,A)):(Cn&&J&&$s(f),f.flags|=1,na(u,f,S,A),f.child)}function Ll(u,f,y,S,A){if(u===null){var O=y.type;return typeof O=="function"&&!mo(O)&&O.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=O,ST(u,f,O,S,A)):(u=js(y.type,null,S,f,f.mode,A),u.ref=f.ref,u.return=f,f.child=u)}if(O=u.child,!D0(u,A)){var j=O.memoizedProps;if(y=y.compare,y=y!==null?y:Le,y(j,S)&&u.ref===f.ref)return Ja(u,f,A)}return f.flags|=1,u=qi(O,S),u.ref=f.ref,u.return=f,f.child=u}function ST(u,f,y,S,A){if(u!==null){var O=u.memoizedProps;if(Le(O,S)&&u.ref===f.ref)if(Qa=!1,f.pendingProps=S=O,D0(u,A))(u.flags&131072)!==0&&(Qa=!0);else return f.lanes=u.lanes,Ja(u,f,A)}return ug(u,f,y,S,A)}function Np(u,f,y){var S=f.pendingProps,A=S.children,O=u!==null?u.memoizedState:null;if(S.mode==="hidden"){if((f.flags&128)!==0){if(S=O!==null?O.baseLanes|y:y,u!==null){for(A=f.child=u.child,O=0;A!==null;)O=O|A.lanes|A.childLanes,A=A.sibling;f.childLanes=O&~S}else f.childLanes=0,f.child=null;return Dp(u,f,S,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&x0(f,O!==null?O.cachePool:null),O!==null?AM(f,O):rT(),aA(f);else return f.lanes=f.childLanes=536870912,Dp(u,f,O!==null?O.baseLanes|y:y,y)}else O!==null?(x0(f,O.cachePool),AM(f,O),hh(),f.memoizedState=null):(u!==null&&x0(f,null),rT(),hh());return na(u,f,A,y),f.child}function Dp(u,f,y,S){var A=lh();return A=A===null?null:{parent:xa._currentValue,pool:A},f.memoizedState={baseLanes:y,cachePool:A},u!==null&&x0(f,null),rT(),aA(f),u!==null&&jc(u,f,S,!0),null}function Pp(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(n(284));(u===null||u.ref!==y)&&(f.flags|=4194816)}}function ug(u,f,y,S,A){return yd(f),y=pf(u,f,y,S,void 0,A),S=aT(),u!==null&&!Qa?(z_(u,f,A),Ja(u,f,A)):(Cn&&S&&$s(f),f.flags|=1,na(u,f,y,A),f.child)}function rc(u,f,y,S,A,O){return yd(f),f.updateQueue=null,y=NM(f,S,y,A),RM(u),S=aT(),u!==null&&!Qa?(z_(u,f,O),Ja(u,f,O)):(Cn&&S&&$s(f),f.flags|=1,na(u,f,y,O),f.child)}function ac(u,f,y,S,A){if(yd(f),f.stateNode===null){var O=Po,j=y.contextType;typeof j=="object"&&j!==null&&(O=kr(j)),O=new y(S,O),f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=ll,f.stateNode=O,O._reactInternals=f,O=f.stateNode,O.props=S,O.state=f.memoizedState,O.refs={},iT(f),j=y.contextType,O.context=typeof j=="object"&&j!==null?kr(j):Po,O.state=f.memoizedState,j=y.getDerivedStateFromProps,typeof j=="function"&&(ph(f,y,j,S),O.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(j=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),j!==O.state&&ll.enqueueReplaceState(O,O.state,null),ig(f,S,O,A),T0(),O.state=f.memoizedState),typeof O.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(u===null){O=f.stateNode;var J=f.memoizedProps,pe=xd(y,J);O.props=pe;var ke=O.context,ft=y.contextType;j=Po,typeof ft=="object"&&ft!==null&&(j=kr(ft));var vt=y.getDerivedStateFromProps;ft=typeof vt=="function"||typeof O.getSnapshotBeforeUpdate=="function",J=f.pendingProps!==J,ft||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(J||ke!==j)&&lA(f,O,S,j),df=!1;var qe=f.memoizedState;O.state=qe,ig(f,S,O,A),T0(),ke=f.memoizedState,J||qe!==ke||df?(typeof vt=="function"&&(ph(f,y,vt,S),ke=f.memoizedState),(pe=df||oA(f,y,pe,S,qe,ke,j))?(ft||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=ke),O.props=S,O.state=ke,O.context=j,S=pe):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{O=f.stateNode,Xn(u,f),j=f.memoizedProps,ft=xd(y,j),O.props=ft,vt=f.pendingProps,qe=O.context,ke=y.contextType,pe=Po,typeof ke=="object"&&ke!==null&&(pe=kr(ke)),J=y.getDerivedStateFromProps,(ke=typeof J=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(j!==vt||qe!==pe)&&lA(f,O,S,pe),df=!1,qe=f.memoizedState,O.state=qe,ig(f,S,O,A),T0();var Qe=f.memoizedState;j!==vt||qe!==Qe||df||u!==null&&u.dependencies!==null&&g0(u.dependencies)?(typeof J=="function"&&(ph(f,y,J,S),Qe=f.memoizedState),(ft=df||oA(f,y,ft,S,qe,Qe,pe)||u!==null&&u.dependencies!==null&&g0(u.dependencies))?(ke||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(S,Qe,pe),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(S,Qe,pe)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||j===u.memoizedProps&&qe===u.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||j===u.memoizedProps&&qe===u.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=Qe),O.props=S,O.state=Qe,O.context=pe,S=ft):(typeof O.componentDidUpdate!="function"||j===u.memoizedProps&&qe===u.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||j===u.memoizedProps&&qe===u.memoizedState||(f.flags|=1024),S=!1)}return O=S,Pp(u,f),S=(f.flags&128)!==0,O||S?(O=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:O.render(),f.flags|=1,u!==null&&S?(f.child=Cp(f,u.child,null,A),f.child=Cp(f,null,y,A)):na(u,f,y,A),f.memoizedState=O.state,u=f.child):u=Ja(u,f,A),u}function mh(u,f,y,S){return Pr(),f.flags|=256,na(u,f,y,S),f.child}var Nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Du(u){return{baseLanes:u,cachePool:L_()}}function za(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=Jc),u}function dg(u,f,y){var S=f.pendingProps,A=!1,O=(f.flags&128)!==0,j;if((j=O)||(j=u!==null&&u.memoizedState===null?!1:(ta.current&2)!==0),j&&(A=!0,f.flags&=-129),j=(f.flags&32)!==0,f.flags&=-33,u===null){if(Cn){if(A?fh(f):hh(),Cn){var J=Vi,pe;if(pe=J){e:{for(pe=J,J=vr;pe.nodeType!==8;){if(!J){J=null;break e}if(pe=Sf(pe.nextSibling),pe===null){J=null;break e}}J=pe}J!==null?(f.memoizedState={dehydrated:J,treeContext:Pn!==null?{id:vs,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},pe=zr(18,null,null,0),pe.stateNode=J,pe.return=f,f.child=pe,li=f,Vi=null,pe=!0):pe=!1}pe||qs(f)}if(J=f.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return pP(J)?f.lanes=32:f.lanes=536870912,null;_d(f)}return J=S.children,S=S.fallback,A?(hh(),A=f.mode,J=Op({mode:"hidden",children:J},A),S=nl(S,A,y,null),J.return=f,S.return=f,J.sibling=S,f.child=J,A=f.child,A.memoizedState=Du(y),A.childLanes=za(u,j,y),f.memoizedState=Nu,S):(fh(f),bd(f,J))}if(pe=u.memoizedState,pe!==null&&(J=pe.dehydrated,J!==null)){if(O)f.flags&256?(fh(f),f.flags&=-257,f=yo(u,f,y)):f.memoizedState!==null?(hh(),f.child=u.child,f.flags|=128,f=null):(hh(),A=S.fallback,J=f.mode,S=Op({mode:"visible",children:S.children},J),A=nl(A,J,y,null),A.flags|=2,S.return=f,A.return=f,S.sibling=A,f.child=S,Cp(f,u.child,null,y),S=f.child,S.memoizedState=Du(y),S.childLanes=za(u,j,y),f.memoizedState=Nu,f=A);else if(fh(f),pP(J)){if(j=J.nextSibling&&J.nextSibling.dataset,j)var ke=j.dgst;j=ke,S=Error(n(419)),S.stack="",S.digest=j,Za({value:S,source:null,stack:null}),f=yo(u,f,y)}else if(Qa||jc(u,f,y,!1),j=(y&u.childLanes)!==0,Qa||j){if(j=ci,j!==null&&(S=y&-y,S=(S&42)!==0?1:dn(S),S=(S&(j.suspendedLanes|y))!==0?0:S,S!==0&&S!==pe.retryLane))throw pe.retryLane=S,Do(u,S),ul(j,u,S),dA;J.data==="$?"||p(),f=yo(u,f,y)}else J.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=pe.treeContext,Vi=Sf(J.nextSibling),li=f,Cn=!0,Ws=null,vr=!1,u!==null&&(_n[rn++]=vs,_n[rn++]=ei,_n[rn++]=Pn,vs=u.id,ei=u.overflow,Pn=f),f=bd(f,S.children),f.flags|=4096);return f}return A?(hh(),A=S.fallback,J=f.mode,pe=u.child,ke=pe.sibling,S=qi(pe,{mode:"hidden",children:S.children}),S.subtreeFlags=pe.subtreeFlags&65011712,ke!==null?A=qi(ke,A):(A=nl(A,J,y,null),A.flags|=2),A.return=f,S.return=f,S.sibling=A,f.child=S,S=A,A=f.child,J=u.child.memoizedState,J===null?J=Du(y):(pe=J.cachePool,pe!==null?(ke=xa._currentValue,pe=pe.parent!==ke?{parent:ke,pool:ke}:pe):pe=L_(),J={baseLanes:J.baseLanes|y,cachePool:pe}),A.memoizedState=J,A.childLanes=za(u,j,y),f.memoizedState=Nu,S):(fh(f),y=u.child,u=y.sibling,y=qi(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,u!==null&&(j=f.deletions,j===null?(f.deletions=[u],f.flags|=16):j.push(u)),f.child=y,f.memoizedState=null,y)}function bd(u,f){return f=Op({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function Op(u,f){return u=zr(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function yo(u,f,y){return Cp(f,u.child,null,y),u=bd(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function vo(u,f,y){u.lanes|=f;var S=u.alternate;S!==null&&(S.lanes|=f),oh(u.return,f,y)}function $i(u,f,y,S,A){var O=u.memoizedState;O===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:A}:(O.isBackwards=f,O.rendering=null,O.renderingStartTime=0,O.last=S,O.tail=y,O.tailMode=A)}function Yc(u,f,y){var S=f.pendingProps,A=S.revealOrder,O=S.tail;if(na(u,f,S.children,y),S=ta.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&vo(u,y,f);else if(u.tag===19)vo(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}switch(Ne(ta,S),A){case"forwards":for(y=f.child,A=null;y!==null;)u=y.alternate,u!==null&&gf(u)===null&&(A=y),y=y.sibling;y=A,y===null?(A=f.child,f.child=null):(A=y.sibling,y.sibling=null),$i(f,!1,A,y,O);break;case"backwards":for(y=null,A=f.child,f.child=null;A!==null;){if(u=A.alternate,u!==null&&gf(u)===null){f.child=A;break}u=A.sibling,A.sibling=y,y=A,A=u}$i(f,!0,y,null,O);break;case"together":$i(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ja(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),Uu|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(jc(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,y=qi(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=qi(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function D0(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&g0(u)))}function Kc(u,f,y){switch(f.tag){case 3:Ve(f,f.stateNode.containerInfo),Ia(f,xa,u.memoizedState.cache),Pr();break;case 27:case 5:Mt(f);break;case 4:Ve(f,f.stateNode.containerInfo);break;case 10:Ia(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(fh(f),f.flags|=128,null):(y&f.child.childLanes)!==0?dg(u,f,y):(fh(f),u=Ja(u,f,y),u!==null?u.sibling:null);fh(f);break;case 19:var A=(u.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(jc(u,f,y,!1),S=(y&f.childLanes)!==0),A){if(S)return Yc(u,f,y);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Ne(ta,ta.current),S)break;return null;case 22:case 23:return f.lanes=0,Np(u,f,y);case 24:Ia(f,xa,u.memoizedState.cache)}return Ja(u,f,y)}function Lp(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)Qa=!0;else{if(!D0(u,y)&&(f.flags&128)===0)return Qa=!1,Kc(u,f,y);Qa=(u.flags&131072)!==0}else Qa=!1,Cn&&(f.flags&1048576)!==0&&Jr(f,zt,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var S=f.elementType,A=S._init;if(S=A(S._payload),f.type=S,typeof S=="function")mo(S)?(u=xd(S,u),f.tag=1,f=ac(null,f,S,u,y)):(f.tag=0,f=ug(null,f,S,u,y));else{if(S!=null){if(A=S.$$typeof,A===R){f.tag=11,f=Ol(null,f,S,u,y);break e}else if(A===L){f.tag=14,f=Ll(null,f,S,u,y);break e}}throw f=se(S)||S,Error(n(306,f,""))}}return f;case 0:return ug(u,f,f.type,f.pendingProps,y);case 1:return S=f.type,A=xd(S,f.pendingProps),ac(u,f,S,A,y);case 3:e:{if(Ve(f,f.stateNode.containerInfo),u===null)throw Error(n(387));S=f.pendingProps;var O=f.memoizedState;A=O.element,Xn(u,f),ig(f,S,null,y);var j=f.memoizedState;if(S=j.cache,Ia(f,xa,S),S!==O.cache&&Pl(f,[xa],y,!0),T0(),S=j.element,O.isDehydrated)if(O={element:S,isDehydrated:!1,cache:j.cache},f.updateQueue.baseState=O,f.memoizedState=O,f.flags&256){f=mh(u,f,S,y);break e}else if(S!==A){A=gs(Error(n(424)),f),Za(A),f=mh(u,f,S,y);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Vi=Sf(u.firstChild),li=f,Cn=!0,Ws=null,vr=!0,y=rA(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Pr(),S===A){f=Ja(u,f,y);break e}na(u,f,S,y)}f=f.child}return f;case 26:return Pp(u,f),u===null?(y=y4(f.type,null,f.pendingProps,null))?f.memoizedState=y:Cn||(y=f.type,u=f.pendingProps,S=yA(Ee.current).createElement(y),S[wr]=f,S[Ds]=u,dl(S,y,u),Hi(S),f.stateNode=S):f.memoizedState=y4(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Mt(f),u===null&&Cn&&(S=f.stateNode=p4(f.type,f.pendingProps,Ee.current),li=f,vr=!0,A=Vi,bg(f.type)?(mP=A,Vi=Sf(S.firstChild)):Vi=A),na(u,f,f.pendingProps.children,y),Pp(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Cn&&((A=S=Vi)&&(S=kre(S,f.type,f.pendingProps,vr),S!==null?(f.stateNode=S,li=f,Vi=Sf(S.firstChild),vr=!1,A=!0):A=!1),A||qs(f)),Mt(f),A=f.type,O=f.pendingProps,j=u!==null?u.memoizedProps:null,S=O.children,dP(A,O)?S=null:j!==null&&dP(A,j)&&(f.flags|=32),f.memoizedState!==null&&(A=pf(u,f,XD,null,null,y),OT._currentValue=A),Pp(u,f),na(u,f,S,y),f.child;case 6:return u===null&&Cn&&((u=y=Vi)&&(y=Gre(y,f.pendingProps,vr),y!==null?(f.stateNode=y,li=f,Vi=null,u=!0):u=!1),u||qs(f)),null;case 13:return dg(u,f,y);case 4:return Ve(f,f.stateNode.containerInfo),S=f.pendingProps,u===null?f.child=Cp(f,null,S,y):na(u,f,S,y),f.child;case 11:return Ol(u,f,f.type,f.pendingProps,y);case 7:return na(u,f,f.pendingProps,y),f.child;case 8:return na(u,f,f.pendingProps.children,y),f.child;case 12:return na(u,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,Ia(f,f.type,S.value),na(u,f,S.children,y),f.child;case 9:return A=f.type._context,S=f.pendingProps.children,yd(f),A=kr(A),S=S(A),f.flags|=1,na(u,f,S,y),f.child;case 14:return Ll(u,f,f.type,f.pendingProps,y);case 15:return ST(u,f,f.type,f.pendingProps,y);case 19:return Yc(u,f,y);case 31:return S=f.pendingProps,y=f.mode,S={mode:S.mode,children:S.children},u===null?(y=Op(S,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=qi(u.child,S),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return Np(u,f,y);case 24:return yd(f),S=kr(xa),u===null?(A=lh(),A===null&&(A=ci,O=P_(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=y),A=O),f.memoizedState={parent:S,cache:A},iT(f),Ia(f,xa,A)):((u.lanes&y)!==0&&(Xn(u,f),ig(f,null,null,y),T0()),A=u.memoizedState,O=f.memoizedState,A.parent!==S?(A={parent:S,cache:S},f.memoizedState=A,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=A),Ia(f,xa,S)):(S=O.cache,Ia(f,xa,S),S!==A.cache&&Pl(f,[xa],y,!0))),na(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function Pu(u){u.flags|=4}function P0(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!S4(f)){if(f=Ls.current,f!==null&&((Dn&4194048)===Dn?Ru!==null:(Dn&62914560)!==Dn&&(Dn&536870912)===0||f!==Ru))throw Wc=S0,tT;u.flags|=8192}}function yf(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?bt():536870912,u.lanes|=f,Yi|=f)}function Up(u,f){if(!Cn)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Xs(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,S=0;if(f)for(var A=u.child;A!==null;)y|=A.lanes|A.childLanes,S|=A.subtreeFlags&65011712,S|=A.flags&65011712,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)y|=A.lanes|A.childLanes,S|=A.subtreeFlags,S|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=S,u.childLanes=y,f}function TT(u,f,y){var S=f.pendingProps;switch(ws(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(f),null;case 1:return Xs(f),null;case 3:return y=f.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),rl(xa),Be(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Oo(f)?Pu(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,In())),Xs(f),null;case 26:return y=f.memoizedState,u===null?(Pu(f),y!==null?(Xs(f),P0(f,y)):(Xs(f),f.flags&=-16777217)):y?y!==u.memoizedState?(Pu(f),Xs(f),P0(f,y)):(Xs(f),f.flags&=-16777217):(u.memoizedProps!==S&&Pu(f),Xs(f),f.flags&=-16777217),null;case 27:ct(f),y=Ee.current;var A=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==S&&Pu(f);else{if(!S){if(f.stateNode===null)throw Error(n(166));return Xs(f),null}u=we.current,Oo(f)?Ba(f):(u=p4(A,S,y),f.stateNode=u,Pu(f))}return Xs(f),null;case 5:if(ct(f),y=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==S&&Pu(f);else{if(!S){if(f.stateNode===null)throw Error(n(166));return Xs(f),null}if(u=we.current,Oo(f))Ba(f);else{switch(A=yA(Ee.current),u){case 1:u=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:u=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":u=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":u=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof S.is=="string"?A.createElement("select",{is:S.is}):A.createElement("select"),S.multiple?u.multiple=!0:S.size&&(u.size=S.size);break;default:u=typeof S.is=="string"?A.createElement(y,{is:S.is}):A.createElement(y)}}u[wr]=f,u[Ds]=S;e:for(A=f.child;A!==null;){if(A.tag===5||A.tag===6)u.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}f.stateNode=u;e:switch(dl(u,y,S),y){case"button":case"input":case"select":case"textarea":u=!!S.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Pu(f)}}return Xs(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==S&&Pu(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(n(166));if(u=Ee.current,Oo(f)){if(u=f.stateNode,y=f.memoizedProps,S=null,A=li,A!==null)switch(A.tag){case 27:case 5:S=A.memoizedProps}u[wr]=f,u=!!(u.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||o4(u.nodeValue,y)),u||qs(f)}else u=yA(u).createTextNode(S),u[wr]=f,f.stateNode=u}return Xs(f),null;case 13:if(S=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(A=Oo(f),S!==null&&S.dehydrated!==null){if(u===null){if(!A)throw Error(n(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[wr]=f}else Pr(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Xs(f),A=!1}else A=In(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=A),A=!0;if(!A)return f.flags&256?(_d(f),f):(_d(f),null)}if(_d(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=S!==null,u=u!==null&&u.memoizedState!==null,y){S=f.child,A=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(A=S.alternate.memoizedState.cachePool.pool);var O=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(O=S.memoizedState.cachePool.pool),O!==A&&(S.flags|=2048)}return y!==u&&y&&(f.child.flags|=8192),yf(f,f.updateQueue),Xs(f),null;case 4:return Be(),u===null&&aP(f.stateNode.containerInfo),Xs(f),null;case 10:return rl(f.type),Xs(f),null;case 19:if(Ae(ta),A=f.memoizedState,A===null)return Xs(f),null;if(S=(f.flags&128)!==0,O=A.rendering,O===null)if(S)Up(A,!1);else{if(or!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(O=gf(u),O!==null){for(f.flags|=128,Up(A,!1),u=O.updateQueue,f.updateQueue=u,yf(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)tl(y,u),y=y.sibling;return Ne(ta,ta.current&1|2),f.child}u=u.sibling}A.tail!==null&&We()>Uo&&(f.flags|=128,S=!0,Up(A,!1),f.lanes=4194304)}else{if(!S)if(u=gf(O),u!==null){if(f.flags|=128,S=!0,u=u.updateQueue,f.updateQueue=u,yf(f,u),Up(A,!0),A.tail===null&&A.tailMode==="hidden"&&!O.alternate&&!Cn)return Xs(f),null}else 2*We()-A.renderingStartTime>Uo&&y!==536870912&&(f.flags|=128,S=!0,Up(A,!1),f.lanes=4194304);A.isBackwards?(O.sibling=f.child,f.child=O):(u=A.last,u!==null?u.sibling=O:f.child=O,A.last=O)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=We(),f.sibling=null,u=ta.current,Ne(ta,S?u&1|2:u&1),f):(Xs(f),null);case 22:case 23:return _d(f),E0(),S=f.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(Xs(f),f.subtreeFlags&6&&(f.flags|=8192)):Xs(f),y=f.updateQueue,y!==null&&yf(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),u!==null&&Ae($c),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),rl(xa),Xs(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function fg(u,f){switch(ws(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return rl(xa),Be(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return ct(f),null;case 13:if(_d(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Pr()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return Ae(ta),null;case 4:return Be(),null;case 10:return rl(f.type),null;case 22:case 23:return _d(f),E0(),u!==null&&Ae($c),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return rl(xa),null;case 25:return null;default:return null}}function hg(u,f){switch(ws(f),f.tag){case 3:rl(xa),Be();break;case 26:case 27:case 5:ct(f);break;case 4:Be();break;case 13:_d(f);break;case 19:Ae(ta);break;case 10:rl(f.type);break;case 22:case 23:_d(f),E0(),u!==null&&Ae($c);break;case 24:rl(xa)}}function Bp(u,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var A=S.next;y=A;do{if((y.tag&u)===u){S=void 0;var O=y.create,j=y.inst;S=O(),j.destroy=S}y=y.next}while(y!==A)}}catch(J){_e(f,f.return,J)}}function oc(u,f,y){try{var S=f.updateQueue,A=S!==null?S.lastEffect:null;if(A!==null){var O=A.next;S=O;do{if((S.tag&u)===u){var j=S.inst,J=j.destroy;if(J!==void 0){j.destroy=void 0,A=f;var pe=y,ke=J;try{ke()}catch(ft){_e(A,pe,ft)}}}S=S.next}while(S!==O)}}catch(ft){_e(f,f.return,ft)}}function Ip(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{MM(f,y)}catch(S){_e(u,u.return,S)}}}function vf(u,f,y){y.props=xd(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(S){_e(u,f,S)}}function Fp(u,f){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var S=u.stateNode;break;case 30:S=u.stateNode;break;default:S=u.stateNode}typeof y=="function"?u.refCleanup=y(S):y.current=S}}catch(A){_e(u,f,A)}}function Sd(u,f){var y=u.ref,S=u.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(A){_e(u,f,A)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(A){_e(u,f,A)}else y.current=null}function pg(u){var f=u.type,y=u.memoizedProps,S=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(A){_e(u,u.return,A)}}function O0(u,f,y){try{var S=u.stateNode;Bre(S,u.type,y,f),S[Ds]=f}catch(A){_e(u,u.return,A)}}function L0(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&bg(u.type)||u.tag===4}function gh(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||L0(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&bg(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function yh(u,f,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(u),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=gA));else if(S!==4&&(S===27&&bg(u.type)&&(y=u.stateNode,f=null),u=u.child,u!==null))for(yh(u,f,y),u=u.sibling;u!==null;)yh(u,f,y),u=u.sibling}function vh(u,f,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?y.insertBefore(u,f):y.appendChild(u);else if(S!==4&&(S===27&&bg(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(vh(u,f,y),u=u.sibling;u!==null;)vh(u,f,y),u=u.sibling}function _h(u){var f=u.stateNode,y=u.memoizedProps;try{for(var S=u.type,A=f.attributes;A.length;)f.removeAttributeNode(A[0]);dl(f,S,y),f[wr]=u,f[Ds]=y}catch(O){_e(u,u.return,O)}}var Td=!1,Ys=!1,mg=!1,lc=typeof WeakSet=="function"?WeakSet:Set,Us=null;function Va(u,f){if(u=u.containerInfo,cP=TA,u=Ro(u),Jo(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var A=S.anchorOffset,O=S.focusNode;S=S.focusOffset;try{y.nodeType,O.nodeType}catch{y=null;break e}var j=0,J=-1,pe=-1,ke=0,ft=0,vt=u,qe=null;t:for(;;){for(var Qe;vt!==y||A!==0&&vt.nodeType!==3||(J=j+A),vt!==O||S!==0&&vt.nodeType!==3||(pe=j+S),vt.nodeType===3&&(j+=vt.nodeValue.length),(Qe=vt.firstChild)!==null;)qe=vt,vt=Qe;for(;;){if(vt===u)break t;if(qe===y&&++ke===A&&(J=j),qe===O&&++ft===S&&(pe=j),(Qe=vt.nextSibling)!==null)break;vt=qe,qe=vt.parentNode}vt=Qe}y=J===-1||pe===-1?null:{start:J,end:pe}}else y=null}y=y||{start:0,end:0}}else y=null;for(uP={focusedElem:u,selectionRange:y},TA=!1,Us=f;Us!==null;)if(f=Us,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Us=u;else for(;Us!==null;){switch(f=Us,O=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&O!==null){u=void 0,y=f,A=O.memoizedProps,O=O.memoizedState,S=y.stateNode;try{var ti=xd(y.type,A,y.elementType===y.type);u=S.getSnapshotBeforeUpdate(ti,O),S.__reactInternalSnapshotBeforeUpdate=u}catch(jn){_e(y,y.return,jn)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,y=u.nodeType,y===9)hP(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":hP(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=f.sibling,u!==null){u.return=f.return,Us=u;break}Us=f.return}}function _f(u,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:cl(u,y),S&4&&Bp(5,y);break;case 1:if(cl(u,y),S&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(j){_e(y,y.return,j)}else{var A=xd(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(A,f,u.__reactInternalSnapshotBeforeUpdate)}catch(j){_e(y,y.return,j)}}S&64&&Ip(y),S&512&&Fp(y,y.return);break;case 3:if(cl(u,y),S&64&&(u=y.updateQueue,u!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{MM(u,f)}catch(j){_e(y,y.return,j)}}break;case 27:f===null&&S&4&&_h(y);case 26:case 5:cl(u,y),f===null&&S&4&&pg(y),S&512&&Fp(y,y.return);break;case 12:cl(u,y);break;case 13:cl(u,y),S&4&&xh(u,y),S&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=lr.bind(null,y),Hre(u,y))));break;case 22:if(S=y.memoizedState!==null||Td,!S){f=f!==null&&f.memoizedState!==null||Ys,A=Td;var O=Ys;Td=S,(Ys=f)&&!O?Ed(u,y,(y.subtreeFlags&8772)!==0):cl(u,y),Td=A,Ys=O}break;case 30:break;default:cl(u,y)}}function xi(u){var f=u.alternate;f!==null&&(u.alternate=null,xi(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&ms(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ln=null,Xi=!1;function Zc(u,f,y){for(y=y.child;y!==null;)zp(u,f,y),y=y.sibling}function zp(u,f,y){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Fe,y)}catch{}switch(y.tag){case 26:Ys||Sd(y,f),Zc(u,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Ys||Sd(y,f);var S=Ln,A=Xi;bg(y.type)&&(Ln=y.stateNode,Xi=!1),Zc(u,f,y),RT(y.stateNode),Ln=S,Xi=A;break;case 5:Ys||Sd(y,f);case 6:if(S=Ln,A=Xi,Ln=null,Zc(u,f,y),Ln=S,Xi=A,Ln!==null)if(Xi)try{(Ln.nodeType===9?Ln.body:Ln.nodeName==="HTML"?Ln.ownerDocument.body:Ln).removeChild(y.stateNode)}catch(O){_e(y,f,O)}else try{Ln.removeChild(y.stateNode)}catch(O){_e(y,f,O)}break;case 18:Ln!==null&&(Xi?(u=Ln,f4(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),IT(u)):f4(Ln,y.stateNode));break;case 4:S=Ln,A=Xi,Ln=y.stateNode.containerInfo,Xi=!0,Zc(u,f,y),Ln=S,Xi=A;break;case 0:case 11:case 14:case 15:Ys||oc(2,y,f),Ys||oc(4,y,f),Zc(u,f,y);break;case 1:Ys||(Sd(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&vf(y,f,S)),Zc(u,f,y);break;case 21:Zc(u,f,y);break;case 22:Ys=(S=Ys)||y.memoizedState!==null,Zc(u,f,y),Ys=S;break;default:Zc(u,f,y)}}function xh(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{IT(u)}catch(y){_e(f,f.return,y)}}function J_(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new lc),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new lc),f;default:throw Error(n(435,u.tag))}}function Vp(u,f){var y=J_(u);f.forEach(function(S){var A=Yn.bind(null,u,S);y.has(S)||(y.add(S),S.then(A,A))})}function eo(u,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var A=y[S],O=u,j=f,J=j;e:for(;J!==null;){switch(J.tag){case 27:if(bg(J.type)){Ln=J.stateNode,Xi=!1;break e}break;case 5:Ln=J.stateNode,Xi=!1;break e;case 3:case 4:Ln=J.stateNode.containerInfo,Xi=!0;break e}J=J.return}if(Ln===null)throw Error(n(160));zp(O,j,A),Ln=null,Xi=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)ex(f,u),f=f.sibling}var Ou=null;function ex(u,f){var y=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:eo(f,u),Gr(u),S&4&&(oc(3,u,u.return),Bp(3,u),oc(5,u,u.return));break;case 1:eo(f,u),Gr(u),S&512&&(Ys||y===null||Sd(y,y.return)),S&64&&Td&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var A=Ou;if(eo(f,u),Gr(u),S&512&&(Ys||y===null||Sd(y,y.return)),S&4){var O=y!==null?y.memoizedState:null;if(S=u.memoizedState,y===null)if(S===null)if(u.stateNode===null){e:{S=u.type,y=u.memoizedProps,A=A.ownerDocument||A;t:switch(S){case"title":O=A.getElementsByTagName("title")[0],(!O||O[Ao]||O[wr]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(S),A.head.insertBefore(O,A.querySelector("head > title"))),dl(O,S,y),O[wr]=u,Hi(O),S=O;break e;case"link":var j=x4("link","href",A).get(S+(y.href||""));if(j){for(var J=0;J<j.length;J++)if(O=j[J],O.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&O.getAttribute("rel")===(y.rel==null?null:y.rel)&&O.getAttribute("title")===(y.title==null?null:y.title)&&O.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){j.splice(J,1);break t}}O=A.createElement(S),dl(O,S,y),A.head.appendChild(O);break;case"meta":if(j=x4("meta","content",A).get(S+(y.content||""))){for(J=0;J<j.length;J++)if(O=j[J],O.getAttribute("content")===(y.content==null?null:""+y.content)&&O.getAttribute("name")===(y.name==null?null:y.name)&&O.getAttribute("property")===(y.property==null?null:y.property)&&O.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&O.getAttribute("charset")===(y.charSet==null?null:y.charSet)){j.splice(J,1);break t}}O=A.createElement(S),dl(O,S,y),A.head.appendChild(O);break;default:throw Error(n(468,S))}O[wr]=u,Hi(O),S=O}u.stateNode=S}else b4(A,u.type,u.stateNode);else u.stateNode=_4(A,S,u.memoizedProps);else O!==S?(O===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):O.count--,S===null?b4(A,u.type,u.stateNode):_4(A,S,u.memoizedProps)):S===null&&u.stateNode!==null&&O0(u,u.memoizedProps,y.memoizedProps)}break;case 27:eo(f,u),Gr(u),S&512&&(Ys||y===null||Sd(y,y.return)),y!==null&&S&4&&O0(u,u.memoizedProps,y.memoizedProps);break;case 5:if(eo(f,u),Gr(u),S&512&&(Ys||y===null||Sd(y,y.return)),u.flags&32){A=u.stateNode;try{Ai(A,"")}catch(Qe){_e(u,u.return,Qe)}}S&4&&u.stateNode!=null&&(A=u.memoizedProps,O0(u,A,y!==null?y.memoizedProps:A)),S&1024&&(mg=!0);break;case 6:if(eo(f,u),Gr(u),S&4){if(u.stateNode===null)throw Error(n(162));S=u.memoizedProps,y=u.stateNode;try{y.nodeValue=S}catch(Qe){_e(u,u.return,Qe)}}break;case 3:if(xA=null,A=Ou,Ou=vA(f.containerInfo),eo(f,u),Ou=A,Gr(u),S&4&&y!==null&&y.memoizedState.isDehydrated)try{IT(f.containerInfo)}catch(Qe){_e(u,u.return,Qe)}mg&&(mg=!1,bh(u));break;case 4:S=Ou,Ou=vA(u.stateNode.containerInfo),eo(f,u),Gr(u),Ou=S;break;case 12:eo(f,u),Gr(u);break;case 13:eo(f,u),Gr(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Ms=We()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Vp(u,S)));break;case 22:A=u.memoizedState!==null;var pe=y!==null&&y.memoizedState!==null,ke=Td,ft=Ys;if(Td=ke||A,Ys=ft||pe,eo(f,u),Ys=ft,Td=ke,Gr(u),S&8192)e:for(f=u.stateNode,f._visibility=A?f._visibility&-2:f._visibility|1,A&&(y===null||pe||Td||Ys||cc(u)),y=null,f=u;;){if(f.tag===5||f.tag===26){if(y===null){pe=y=f;try{if(O=pe.stateNode,A)j=O.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{J=pe.stateNode;var vt=pe.memoizedProps.style,qe=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;J.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(Qe){_e(pe,pe.return,Qe)}}}else if(f.tag===6){if(y===null){pe=f;try{pe.stateNode.nodeValue=A?"":pe.memoizedProps}catch(Qe){_e(pe,pe.return,Qe)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=u.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,Vp(u,y))));break;case 19:eo(f,u),Gr(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,Vp(u,S)));break;case 30:break;case 21:break;default:eo(f,u),Gr(u)}}function Gr(u){var f=u.flags;if(f&2){try{for(var y,S=u.return;S!==null;){if(L0(S)){y=S;break}S=S.return}if(y==null)throw Error(n(160));switch(y.tag){case 27:var A=y.stateNode,O=gh(u);vh(u,O,A);break;case 5:var j=y.stateNode;y.flags&32&&(Ai(j,""),y.flags&=-33);var J=gh(u);vh(u,J,j);break;case 3:case 4:var pe=y.stateNode.containerInfo,ke=gh(u);yh(u,ke,pe);break;default:throw Error(n(161))}}catch(ft){_e(u,u.return,ft)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function bh(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;bh(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function cl(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)_f(u,f.alternate,f),f=f.sibling}function cc(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:oc(4,f,f.return),cc(f);break;case 1:Sd(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&vf(f,f.return,y),cc(f);break;case 27:RT(f.stateNode);case 26:case 5:Sd(f,f.return),cc(f);break;case 22:f.memoizedState===null&&cc(f);break;case 30:cc(f);break;default:cc(f)}u=u.sibling}}function Ed(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,A=u,O=f,j=O.flags;switch(O.tag){case 0:case 11:case 15:Ed(A,O,y),Bp(4,O);break;case 1:if(Ed(A,O,y),S=O,A=S.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ke){_e(S,S.return,ke)}if(S=O,A=S.updateQueue,A!==null){var J=S.stateNode;try{var pe=A.shared.hiddenCallbacks;if(pe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<pe.length;A++)sg(pe[A],J)}catch(ke){_e(S,S.return,ke)}}y&&j&64&&Ip(O),Fp(O,O.return);break;case 27:_h(O);case 26:case 5:Ed(A,O,y),y&&S===null&&j&4&&pg(O),Fp(O,O.return);break;case 12:Ed(A,O,y);break;case 13:Ed(A,O,y),y&&j&4&&xh(A,O);break;case 22:O.memoizedState===null&&Ed(A,O,y),Fp(O,O.return);break;case 30:break;default:Ed(A,O,y)}f=f.sibling}}function tx(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&Qm(y))}function nx(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Qm(u))}function Bs(u,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)ix(u,f,y,S),f=f.sibling}function ix(u,f,y,S){var A=f.flags;switch(f.tag){case 0:case 11:case 15:Bs(u,f,y,S),A&2048&&Bp(9,f);break;case 1:Bs(u,f,y,S);break;case 3:Bs(u,f,y,S),A&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Qm(u)));break;case 12:if(A&2048){Bs(u,f,y,S),u=f.stateNode;try{var O=f.memoizedProps,j=O.id,J=O.onPostCommit;typeof J=="function"&&J(j,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(pe){_e(f,f.return,pe)}}else Bs(u,f,y,S);break;case 13:Bs(u,f,y,S);break;case 23:break;case 22:O=f.stateNode,j=f.alternate,f.memoizedState!==null?O._visibility&2?Bs(u,f,y,S):Lu(u,f):O._visibility&2?Bs(u,f,y,S):(O._visibility|=2,xf(u,f,y,S,(f.subtreeFlags&10256)!==0)),A&2048&&tx(j,f);break;case 24:Bs(u,f,y,S),A&2048&&nx(f.alternate,f);break;default:Bs(u,f,y,S)}}function xf(u,f,y,S,A){for(A=A&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var O=u,j=f,J=y,pe=S,ke=j.flags;switch(j.tag){case 0:case 11:case 15:xf(O,j,J,pe,A),Bp(8,j);break;case 23:break;case 22:var ft=j.stateNode;j.memoizedState!==null?ft._visibility&2?xf(O,j,J,pe,A):Lu(O,j):(ft._visibility|=2,xf(O,j,J,pe,A)),A&&ke&2048&&tx(j.alternate,j);break;case 24:xf(O,j,J,pe,A),A&&ke&2048&&nx(j.alternate,j);break;default:xf(O,j,J,pe,A)}f=f.sibling}}function Lu(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,S=f,A=S.flags;switch(S.tag){case 22:Lu(y,S),A&2048&&tx(S.alternate,S);break;case 24:Lu(y,S),A&2048&&nx(S.alternate,S);break;default:Lu(y,S)}f=f.sibling}}var uc=8192;function gg(u){if(u.subtreeFlags&uc)for(u=u.child;u!==null;)fA(u),u=u.sibling}function fA(u){switch(u.tag){case 26:gg(u),u.flags&uc&&u.memoizedState!==null&&nae(Ou,u.memoizedState,u.memoizedProps);break;case 5:gg(u);break;case 3:case 4:var f=Ou;Ou=vA(u.stateNode.containerInfo),gg(u),Ou=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=uc,uc=16777216,gg(u),uc=f):gg(u));break;default:gg(u)}}function hA(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function Ks(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Us=S,Md(S,u)}hA(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)ET(u),u=u.sibling}function ET(u){switch(u.tag){case 0:case 11:case 15:Ks(u),u.flags&2048&&oc(9,u,u.return);break;case 3:Ks(u);break;case 12:Ks(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,wd(u)):Ks(u);break;default:Ks(u)}}function wd(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Us=S,Md(S,u)}hA(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:oc(8,f,f.return),wd(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,wd(f));break;default:wd(f)}u=u.sibling}}function Md(u,f){for(;Us!==null;){var y=Us;switch(y.tag){case 0:case 11:case 15:oc(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Qm(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Us=S;else e:for(y=u;Us!==null;){S=Us;var A=S.sibling,O=S.return;if(xi(S),S===y){Us=null;break e}if(A!==null){A.return=O,Us=A;break e}Us=O}}}var Hr={getCacheForType:function(u){var f=kr(xa),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y}},wT=typeof WeakMap=="function"?WeakMap:Map,us=0,ci=null,Ri=null,Dn=0,vi=0,Or=null,dc=!1,yg=!1,vg=!1,Qc=0,or=0,Uu=0,Ad=0,kp=0,Jc=0,Yi=0,ds=null,Fn=null,Ii=!1,Ms=0,Uo=1/0,eu=null,fc=null,ka=0,Bo=null,Is=null,hc=0,bf=0,U0=null,pc=null,Cd=0,Gp=null;function jr(){if((us&2)!==0&&Dn!==0)return Dn&-Dn;if(G.T!==null){var u=mi;return u!==0?u:nP()}return Si()}function sx(){Jc===0&&(Jc=(Dn&536870912)===0||Cn?xe():536870912);var u=Ls.current;return u!==null&&(u.flags|=32),Jc}function ul(u,f,y){(u===ci&&(vi===2||vi===9)||u.cancelPendingCommit!==null)&&(Th(u,0),Bu(u,Dn,Jc,!1)),$t(u,y),((us&2)===0||u!==ci)&&(u===ci&&((us&2)===0&&(Ad|=y),or===4&&Bu(u,Dn,Jc,!1)),Mh(u))}function _g(u,f,y){if((us&6)!==0)throw Error(n(327));var S=!y&&(f&124)===0&&(f&u.expiredLanes)===0||Ct(u,f),A=S?C(u,f):g(u,f,!0),O=S;do{if(A===0){yg&&!S&&Bu(u,f,0,!1);break}else{if(y=u.current.alternate,O&&!Sh(y)){A=g(u,f,!1),O=!1;continue}if(A===2){if(O=f,u.errorRecoveryDisabledLanes&O)var j=0;else j=u.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){f=j;e:{var J=u;A=ds;var pe=J.current.memoizedState.isDehydrated;if(pe&&(Th(J,j).flags|=256),j=g(J,j,!1),j!==2){if(vg&&!pe){J.errorRecoveryDisabledLanes|=O,Ad|=O,A=4;break e}O=Fn,Fn=A,O!==null&&(Fn===null?Fn=O:Fn.push.apply(Fn,O))}A=j}if(O=!1,A!==2)continue}}if(A===1){Th(u,0),Bu(u,f,0,!0);break}e:{switch(S=u,O=A,O){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:Bu(S,f,Jc,!dc);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(A=Ms+300-We(),10<A)){if(Bu(S,f,Jc,!dc),Qt(S,0,!0)!==0)break e;S.timeoutHandle=u4(B0.bind(null,S,y,Fn,eu,Ii,f,Jc,Ad,Yi,dc,O,2,-0,0),A);break e}B0(S,y,Fn,eu,Ii,f,Jc,Ad,Yi,dc,O,0,-0,0)}}break}while(!0);Mh(u)}function B0(u,f,y,S,A,O,j,J,pe,ke,ft,vt,qe,Qe){if(u.timeoutHandle=-1,vt=f.subtreeFlags,(vt&8192||(vt&16785408)===16785408)&&(PT={stylesheets:null,count:0,unsuspend:tae},fA(f),vt=iae(),vt!==null)){u.cancelPendingCommit=vt(Pt.bind(null,u,f,O,y,S,A,j,J,pe,ft,1,qe,Qe)),Bu(u,O,j,!ke);return}Pt(u,f,O,y,S,A,j,J,pe)}function Sh(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var A=y[S],O=A.getSnapshot;A=A.value;try{if(!zi(O(),A))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Bu(u,f,y,S){f&=~kp,f&=~Ad,u.suspendedLanes|=f,u.pingedLanes&=~f,S&&(u.warmLanes|=f),S=u.expirationTimes;for(var A=f;0<A;){var O=31-Lt(A),j=1<<O;S[O]=-1,A&=~j}y!==0&&at(u,y,f)}function Rd(){return(us&6)===0?(MT(0),!1):!0}function Hp(){if(Ri!==null){if(vi===0)var u=Ri.return;else u=Ri,sl=Mu=null,oT(u),Ap=null,C0=0,u=Ri;for(;u!==null;)hg(u.alternate,u),u=u.return;Ri=null}}function Th(u,f){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,Fre(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),Hp(),ci=u,Ri=y=qi(u.current,null),Dn=f,vi=0,Or=null,dc=!1,yg=Ct(u,f),vg=!1,Yi=Jc=kp=Ad=Uu=or=0,Fn=ds=null,Ii=!1,(f&8)!==0&&(f|=f&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=f;0<S;){var A=31-Lt(S),O=1<<A;f|=u[A],S&=~O}return Qc=f,Hs(),y}function rx(u,f){gi=null,G.H=A0,f===b0||f===Au?(f=nT(),vi=3):f===tT?(f=nT(),vi=4):vi=f===dA?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Or=f,Ri===null&&(or=1,K_(u,gs(f,u.current)))}function xg(){var u=G.H;return G.H=A0,u===null?A0:u}function ax(){var u=G.A;return G.A=Hr,u}function p(){or=4,dc||(Dn&4194048)!==Dn&&Ls.current!==null||(yg=!0),(Uu&134217727)===0&&(Ad&134217727)===0||ci===null||Bu(ci,Dn,Jc,!1)}function g(u,f,y){var S=us;us|=2;var A=xg(),O=ax();(ci!==u||Dn!==f)&&(eu=null,Th(u,f)),f=!1;var j=or;e:do try{if(vi!==0&&Ri!==null){var J=Ri,pe=Or;switch(vi){case 8:Hp(),j=6;break e;case 3:case 2:case 9:case 6:Ls.current===null&&(f=!0);var ke=vi;if(vi=0,Or=null,me(u,J,pe,ke),y&&yg){j=0;break e}break;default:ke=vi,vi=0,Or=null,me(u,J,pe,ke)}}E(),j=or;break}catch(ft){rx(u,ft)}while(!0);return f&&u.shellSuspendCounter++,sl=Mu=null,us=S,G.H=A,G.A=O,Ri===null&&(ci=null,Dn=0,Hs()),j}function E(){for(;Ri!==null;)k(Ri)}function C(u,f){var y=us;us|=2;var S=xg(),A=ax();ci!==u||Dn!==f?(eu=null,Uo=We()+500,Th(u,f)):yg=Ct(u,f);e:do try{if(vi!==0&&Ri!==null){f=Ri;var O=Or;t:switch(vi){case 1:vi=0,Or=null,me(u,f,O,1);break;case 2:case 9:if(U_(O)){vi=0,Or=null,ne(f);break}f=function(){vi!==2&&vi!==9||ci!==u||(vi=7),Mh(u)},O.then(f,f);break e;case 3:vi=7;break e;case 4:vi=5;break e;case 7:U_(O)?(vi=0,Or=null,ne(f)):(vi=0,Or=null,me(u,f,O,7));break;case 5:var j=null;switch(Ri.tag){case 26:j=Ri.memoizedState;case 5:case 27:var J=Ri;if(!j||S4(j)){vi=0,Or=null;var pe=J.sibling;if(pe!==null)Ri=pe;else{var ke=J.return;ke!==null?(Ri=ke,Pe(ke)):Ri=null}break t}}vi=0,Or=null,me(u,f,O,5);break;case 6:vi=0,Or=null,me(u,f,O,6);break;case 8:Hp(),or=6;break e;default:throw Error(n(462))}}U();break}catch(ft){rx(u,ft)}while(!0);return sl=Mu=null,G.H=S,G.A=A,us=y,Ri!==null?0:(ci=null,Dn=0,Hs(),or)}function U(){for(;Ri!==null&&!Ze();)k(Ri)}function k(u){var f=Lp(u.alternate,u,Qc);u.memoizedProps=u.pendingProps,f===null?Pe(u):Ri=f}function ne(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=rc(y,f,f.pendingProps,f.type,void 0,Dn);break;case 11:f=rc(y,f,f.pendingProps,f.type.render,f.ref,Dn);break;case 5:oT(f);default:hg(y,f),f=Ri=tl(f,Qc),f=Lp(y,f,Qc)}u.memoizedProps=u.pendingProps,f===null?Pe(u):Ri=f}function me(u,f,y,S){sl=Mu=null,oT(f),Ap=null,C0=0;var A=f.return;try{if(eP(u,A,f,y,Dn)){or=1,K_(u,gs(y,u.current)),Ri=null;return}}catch(O){if(A!==null)throw Ri=A,O;or=1,K_(u,gs(y,u.current)),Ri=null;return}f.flags&32768?(Cn||S===1?u=!0:yg||(Dn&536870912)!==0?u=!1:(dc=u=!0,(S===2||S===9||S===3||S===6)&&(S=Ls.current,S!==null&&S.tag===13&&(S.flags|=16384))),dt(f,u)):Pe(f)}function Pe(u){var f=u;do{if((f.flags&32768)!==0){dt(f,dc);return}u=f.return;var y=TT(f.alternate,f,Qc);if(y!==null){Ri=y;return}if(f=f.sibling,f!==null){Ri=f;return}Ri=f=u}while(f!==null);or===0&&(or=5)}function dt(u,f){do{var y=fg(u.alternate,u);if(y!==null){y.flags&=32767,Ri=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){Ri=u;return}Ri=u=y}while(u!==null);or=6,Ri=null}function Pt(u,f,y,S,A,O,j,J,pe){u.cancelPendingCommit=null;do Eh();while(ka!==0);if((us&6)!==0)throw Error(n(327));if(f!==null){if(f===u.current)throw Error(n(177));if(O=f.lanes|f.childLanes,O|=pd,xt(u,y,O,j,J,pe),u===ci&&(Ri=ci=null,Dn=0),Is=f,Bo=u,hc=y,bf=O,U0=A,pc=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,ts(Bt,function(){return wh(),null})):(u.callbackNode=null,u.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=G.T,G.T=null,A=K.p,K.p=2,j=us,us|=4;try{Va(u,f,y)}finally{us=j,K.p=A,G.T=S}}ka=1,Wt(),tn(),ui()}}function Wt(){if(ka===1){ka=0;var u=Bo,f=Is,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=G.T,G.T=null;var S=K.p;K.p=2;var A=us;us|=4;try{ex(f,u);var O=uP,j=Ro(u.containerInfo),J=O.focusedElem,pe=O.selectionRange;if(j!==J&&J&&J.ownerDocument&&Gc(J.ownerDocument.documentElement,J)){if(pe!==null&&Jo(J)){var ke=pe.start,ft=pe.end;if(ft===void 0&&(ft=ke),"selectionStart"in J)J.selectionStart=ke,J.selectionEnd=Math.min(ft,J.value.length);else{var vt=J.ownerDocument||document,qe=vt&&vt.defaultView||window;if(qe.getSelection){var Qe=qe.getSelection(),ti=J.textContent.length,jn=Math.min(pe.start,ti),Qs=pe.end===void 0?jn:Math.min(pe.end,ti);!Qe.extend&&jn>Qs&&(j=Qs,Qs=jn,jn=j);var Re=Tu(J,jn),Te=Tu(J,Qs);if(Re&&Te&&(Qe.rangeCount!==1||Qe.anchorNode!==Re.node||Qe.anchorOffset!==Re.offset||Qe.focusNode!==Te.node||Qe.focusOffset!==Te.offset)){var ze=vt.createRange();ze.setStart(Re.node,Re.offset),Qe.removeAllRanges(),jn>Qs?(Qe.addRange(ze),Qe.extend(Te.node,Te.offset)):(ze.setEnd(Te.node,Te.offset),Qe.addRange(ze))}}}}for(vt=[],Qe=J;Qe=Qe.parentNode;)Qe.nodeType===1&&vt.push({element:Qe,left:Qe.scrollLeft,top:Qe.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<vt.length;J++){var mt=vt[J];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}TA=!!cP,uP=cP=null}finally{us=A,K.p=S,G.T=y}}u.current=f,ka=2}}function tn(){if(ka===2){ka=0;var u=Bo,f=Is,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=G.T,G.T=null;var S=K.p;K.p=2;var A=us;us|=4;try{_f(u,f.alternate,f)}finally{us=A,K.p=S,G.T=y}}ka=3}}function ui(){if(ka===4||ka===3){ka=0,Xe();var u=Bo,f=Is,y=hc,S=pc;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ka=5:(ka=0,Is=Bo=null,mc(u,u.pendingLanes));var A=u.pendingLanes;if(A===0&&(fc=null),_i(y),f=f.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Fe,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=G.T,A=K.p,K.p=2,G.T=null;try{for(var O=u.onRecoverableError,j=0;j<S.length;j++){var J=S[j];O(J.value,{componentStack:J.stack})}}finally{G.T=f,K.p=A}}(hc&3)!==0&&Eh(),Mh(u),A=u.pendingLanes,(y&4194090)!==0&&(A&42)!==0?u===Gp?Cd++:(Cd=0,Gp=u):Cd=0,MT(0)}}function mc(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Qm(f)))}function Eh(u){return Wt(),tn(),ui(),wh()}function wh(){if(ka!==5)return!1;var u=Bo,f=bf;bf=0;var y=_i(hc),S=G.T,A=K.p;try{K.p=32>y?32:y,G.T=null,y=U0,U0=null;var O=Bo,j=hc;if(ka=0,Is=Bo=null,hc=0,(us&6)!==0)throw Error(n(331));var J=us;if(us|=4,ET(O.current),ix(O,O.current,j,y),us=J,MT(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Fe,O)}catch{}return!0}finally{K.p=A,G.T=S,mc(u,f)}}function He(u,f,y){f=gs(y,f),f=Z_(u.stateNode,f,2),u=ff(u,f,2),u!==null&&($t(u,2),Mh(u))}function _e(u,f,y){if(u.tag===3)He(u,u,y);else for(;f!==null;){if(f.tag===3){He(f,u,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(fc===null||!fc.has(S))){u=gs(y,u),y=uA(2),S=ff(f,y,2),S!==null&&(Q_(y,S,f,u),$t(S,2),Mh(S));break}}f=f.return}}function Je(u,f,y){var S=u.pingCache;if(S===null){S=u.pingCache=new wT;var A=new Set;S.set(f,A)}else A=S.get(f),A===void 0&&(A=new Set,S.set(f,A));A.has(y)||(vg=!0,A.add(y),u=At.bind(null,u,f,y),f.then(u,u))}function At(u,f,y){var S=u.pingCache;S!==null&&S.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,ci===u&&(Dn&y)===y&&(or===4||or===3&&(Dn&62914560)===Dn&&300>We()-Ms?(us&2)===0&&Th(u,0):kp|=y,Yi===Dn&&(Yi=0)),Mh(u)}function Rn(u,f){f===0&&(f=bt()),u=Do(u,f),u!==null&&($t(u,f),Mh(u))}function lr(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),Rn(u,y)}function Yn(u,f){var y=0;switch(u.tag){case 13:var S=u.stateNode,A=u.memoizedState;A!==null&&(y=A.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(n(314))}S!==null&&S.delete(f),Rn(u,y)}function ts(u,f){return le(u,f)}var ia=null,Pi=null,Nd=!1,ox=!1,tP=!1,I0=0;function Mh(u){u!==Pi&&u.next===null&&(Pi===null?ia=Pi=u:Pi=Pi.next=u),ox=!0,Nd||(Nd=!0,Rre())}function MT(u,f){if(!tP&&ox){tP=!0;do for(var y=!1,S=ia;S!==null;){if(u!==0){var A=S.pendingLanes;if(A===0)var O=0;else{var j=S.suspendedLanes,J=S.pingedLanes;O=(1<<31-Lt(42|u)+1)-1,O&=A&~(j&~J),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(y=!0,e4(S,O))}else O=Dn,O=Qt(S,S===ci?O:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(O&3)===0||Ct(S,O)||(y=!0,e4(S,O));S=S.next}while(y);tP=!1}}function Cre(){Zk()}function Zk(){ox=Nd=!1;var u=0;I0!==0&&(Ire()&&(u=I0),I0=0);for(var f=We(),y=null,S=ia;S!==null;){var A=S.next,O=Qk(S,f);O===0?(S.next=null,y===null?ia=A:y.next=A,A===null&&(Pi=y)):(y=S,(u!==0||(O&3)!==0)&&(ox=!0)),S=A}MT(u)}function Qk(u,f){for(var y=u.suspendedLanes,S=u.pingedLanes,A=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var j=31-Lt(O),J=1<<j,pe=A[j];pe===-1?((J&y)===0||(J&S)!==0)&&(A[j]=An(J,f)):pe<=f&&(u.expiredLanes|=J),O&=~J}if(f=ci,y=Dn,y=Qt(u,u===f?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S=u.callbackNode,y===0||u===f&&(vi===2||vi===9)||u.cancelPendingCommit!==null)return S!==null&&S!==null&&$e(S),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||Ct(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(S!==null&&$e(S),_i(y)){case 2:case 8:y=ht;break;case 32:y=Bt;break;case 268435456:y=X;break;default:y=Bt}return S=Jk.bind(null,u),y=le(y,S),u.callbackPriority=f,u.callbackNode=y,f}return S!==null&&S!==null&&$e(S),u.callbackPriority=2,u.callbackNode=null,2}function Jk(u,f){if(ka!==0&&ka!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(Eh()&&u.callbackNode!==y)return null;var S=Dn;return S=Qt(u,u===ci?S:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S===0?null:(_g(u,S,f),Qk(u,We()),u.callbackNode!=null&&u.callbackNode===y?Jk.bind(null,u):null)}function e4(u,f){if(Eh())return null;_g(u,f,!0)}function Rre(){zre(function(){(us&6)!==0?le(ut,Cre):Zk()})}function nP(){return I0===0&&(I0=xe()),I0}function t4(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:ud(""+u)}function n4(u,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,u.id&&y.setAttribute("form",u.id),f.parentNode.insertBefore(y,f),u=new FormData(u),y.parentNode.removeChild(y),u}function Nre(u,f,y,S,A){if(f==="submit"&&y&&y.stateNode===A){var O=t4((A[Ds]||null).action),j=S.submitter;j&&(f=(f=j[Ds]||null)?t4(f.formAction):j.getAttribute("formAction"),f!==null&&(O=f,j=null));var J=new uf("action","action",null,S,A);u.push({event:J,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(I0!==0){var pe=j?n4(A,j):new FormData(A);_T(y,{pending:!0,data:pe,method:A.method,action:O},null,pe)}}else typeof O=="function"&&(J.preventDefault(),pe=j?n4(A,j):new FormData(A),_T(y,{pending:!0,data:pe,method:A.method,action:O},O,pe))},currentTarget:A}]})}}for(var iP=0;iP<yr.length;iP++){var sP=yr[iP],Dre=sP.toLowerCase(),Pre=sP[0].toUpperCase()+sP.slice(1);Os(Dre,"on"+Pre)}Os(Ke,"onAnimationEnd"),Os(po,"onAnimationIteration"),Os(gr,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Eu,"onTransitionRun"),Os(es,"onTransitionStart"),Os(No,"onTransitionCancel"),Os(Ka,"onTransitionEnd"),be("onMouseEnter",["mouseout","mouseover"]),be("onMouseLeave",["mouseout","mouseover"]),be("onPointerEnter",["pointerout","pointerover"]),be("onPointerLeave",["pointerout","pointerover"]),ee("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ee("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ee("onBeforeInput",["compositionend","keypress","textInput","paste"]),ee("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ee("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ee("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var AT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ore=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(AT));function i4(u,f){f=(f&4)!==0;for(var y=0;y<u.length;y++){var S=u[y],A=S.event;S=S.listeners;e:{var O=void 0;if(f)for(var j=S.length-1;0<=j;j--){var J=S[j],pe=J.instance,ke=J.currentTarget;if(J=J.listener,pe!==O&&A.isPropagationStopped())break e;O=J,A.currentTarget=ke;try{O(A)}catch(ft){Rp(ft)}A.currentTarget=null,O=pe}else for(j=0;j<S.length;j++){if(J=S[j],pe=J.instance,ke=J.currentTarget,J=J.listener,pe!==O&&A.isPropagationStopped())break e;O=J,A.currentTarget=ke;try{O(A)}catch(ft){Rp(ft)}A.currentTarget=null,O=pe}}}}function ki(u,f){var y=f[Na];y===void 0&&(y=f[Na]=new Set);var S=u+"__bubble";y.has(S)||(s4(f,u,2,!1),y.add(S))}function rP(u,f,y){var S=0;f&&(S|=4),s4(y,u,S,f)}var pA="_reactListening"+Math.random().toString(36).slice(2);function aP(u){if(!u[pA]){u[pA]=!0,Ar.forEach(function(y){y!=="selectionchange"&&(Ore.has(y)||rP(y,!1,u),rP(y,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[pA]||(f[pA]=!0,rP("selectionchange",!1,f))}}function s4(u,f,y,S){switch(C4(f)){case 2:var A=aae;break;case 8:A=oae;break;default:A=xP}y=A.bind(null,f,y,u),A=void 0,!th||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),S?A!==void 0?u.addEventListener(f,y,{capture:!0,passive:A}):u.addEventListener(f,y,!0):A!==void 0?u.addEventListener(f,y,{passive:A}):u.addEventListener(f,y,!1)}function oP(u,f,y,S,A){var O=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var j=S.tag;if(j===3||j===4){var J=S.stateNode.containerInfo;if(J===A)break;if(j===4)for(j=S.return;j!==null;){var pe=j.tag;if((pe===3||pe===4)&&j.stateNode.containerInfo===A)return;j=j.return}for(;J!==null;){if(j=ec(J),j===null)return;if(pe=j.tag,pe===5||pe===6||pe===26||pe===27){S=O=j;continue e}J=J.parentNode}}S=S.return}cf(function(){var ke=O,ft=eh(y),vt=[];e:{var qe=Hc.get(u);if(qe!==void 0){var Qe=uf,ti=u;switch(u){case"keypress":if(pr(y)===0)break e;case"keydown":case"keyup":Qe=ah;break;case"focusin":ti="focus",Qe=bu;break;case"focusout":ti="blur",Qe=bu;break;case"beforeblur":case"afterblur":Qe=bu;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=u0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=Zm;break;case Ke:case po:case gr:Qe=R_;break;case Ka:Qe=Su;break;case"scroll":case"scrollend":Qe=Ym;break;case"wheel":Qe=Q;break;case"copy":case"cut":case"paste":Qe=d0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=Ep;break;case"toggle":case"beforetoggle":Qe=ie}var jn=(f&4)!==0,Qs=!jn&&(u==="scroll"||u==="scrollend"),Re=jn?qe!==null?qe+"Capture":null:qe;jn=[];for(var Te=ke,ze;Te!==null;){var mt=Te;if(ze=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||ze===null||Re===null||(mt=Ml(Te,Re),mt!=null&&jn.push(CT(Te,mt,ze))),Qs)break;Te=Te.return}0<jn.length&&(qe=new Qe(qe,ti,null,y,ft),vt.push({event:qe,listeners:jn}))}}if((f&7)===0){e:{if(qe=u==="mouseover"||u==="pointerover",Qe=u==="mouseout"||u==="pointerout",qe&&y!==ai&&(ti=y.relatedTarget||y.fromElement)&&(ec(ti)||ti[Mr]))break e;if((Qe||qe)&&(qe=ft.window===ft?ft:(qe=ft.ownerDocument)?qe.defaultView||qe.parentWindow:window,Qe?(ti=y.relatedTarget||y.toElement,Qe=ke,ti=ti?ec(ti):null,ti!==null&&(Qs=r(ti),jn=ti.tag,ti!==Qs||jn!==5&&jn!==27&&jn!==6)&&(ti=null)):(Qe=null,ti=ke),Qe!==ti)){if(jn=sh,mt="onMouseLeave",Re="onMouseEnter",Te="mouse",(u==="pointerout"||u==="pointerover")&&(jn=Ep,mt="onPointerLeave",Re="onPointerEnter",Te="pointer"),Qs=Qe==null?qe:Da(Qe),ze=ti==null?qe:Da(ti),qe=new jn(mt,Te+"leave",Qe,y,ft),qe.target=Qs,qe.relatedTarget=ze,mt=null,ec(ft)===ke&&(jn=new jn(Re,Te+"enter",ti,y,ft),jn.target=ze,jn.relatedTarget=Qs,mt=jn),Qs=mt,Qe&&ti)t:{for(jn=Qe,Re=ti,Te=0,ze=jn;ze;ze=lx(ze))Te++;for(ze=0,mt=Re;mt;mt=lx(mt))ze++;for(;0<Te-ze;)jn=lx(jn),Te--;for(;0<ze-Te;)Re=lx(Re),ze--;for(;Te--;){if(jn===Re||Re!==null&&jn===Re.alternate)break t;jn=lx(jn),Re=lx(Re)}jn=null}else jn=null;Qe!==null&&r4(vt,qe,Qe,jn,!1),ti!==null&&Qs!==null&&r4(vt,Qs,ti,jn,!0)}}e:{if(qe=ke?Da(ke):window,Qe=qe.nodeName&&qe.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&qe.type==="file")var mn=Bn;else if(Rr(qe))if(ya)mn=Bi;else{mn=Ya;var Fi=Zr}else Qe=qe.nodeName,!Qe||Qe.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?ke&&of(ke.elementType)&&(mn=Bn):mn=Qr;if(mn&&(mn=mn(u,ke))){Ci(vt,mn,y,ft);break e}Fi&&Fi(u,qe,ke),u==="focusout"&&ke&&qe.type==="number"&&ke.memoizedProps.value!=null&&Kr(qe,"number",qe.value)}switch(Fi=ke?Da(ke):window,u){case"focusin":(Rr(Fi)||Fi.contentEditable==="true")&&(cs=Fi,_a=ke,Ir=null);break;case"focusout":Ir=_a=cs=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Ua(vt,y,ft);break;case"selectionchange":if(va)break;case"keydown":case"keyup":Ua(vt,y,ft)}var Nn;if(Me)e:{switch(u){case"compositionstart":var $n="onCompositionStart";break e;case"compositionend":$n="onCompositionEnd";break e;case"compositionupdate":$n="onCompositionUpdate";break e}$n=void 0}else gt?oi(u,y)&&($n="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&($n="onCompositionStart");$n&&(Gt&&y.locale!=="ko"&&(gt||$n!=="onCompositionStart"?$n==="onCompositionEnd"&&gt&&(Nn=Xm()):(Cr=ft,qm="value"in Cr?Cr.value:Cr.textContent,gt=!0)),Fi=mA(ke,$n),0<Fi.length&&($n=new Sp($n,u,null,y,ft),vt.push({event:$n,listeners:Fi}),Nn?$n.data=Nn:(Nn=wn(y),Nn!==null&&($n.data=Nn)))),(Nn=Ge?Mn(u,y):ks(u,y))&&($n=mA(ke,"onBeforeInput"),0<$n.length&&(Fi=new Sp("onBeforeInput","beforeinput",null,y,ft),vt.push({event:Fi,listeners:$n}),Fi.data=Nn)),Nre(vt,u,ke,y,ft)}i4(vt,f)})}function CT(u,f,y){return{instance:u,listener:f,currentTarget:y}}function mA(u,f){for(var y=f+"Capture",S=[];u!==null;){var A=u,O=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=Ml(u,y),A!=null&&S.unshift(CT(u,A,O)),A=Ml(u,f),A!=null&&S.push(CT(u,A,O))),u.tag===3)return S;u=u.return}return[]}function lx(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function r4(u,f,y,S,A){for(var O=f._reactName,j=[];y!==null&&y!==S;){var J=y,pe=J.alternate,ke=J.stateNode;if(J=J.tag,pe!==null&&pe===S)break;J!==5&&J!==26&&J!==27||ke===null||(pe=ke,A?(ke=Ml(y,O),ke!=null&&j.unshift(CT(y,ke,pe))):A||(ke=Ml(y,O),ke!=null&&j.push(CT(y,ke,pe)))),y=y.return}j.length!==0&&u.push({event:f,listeners:j})}var Lre=/\r\n?/g,Ure=/\u0000|\uFFFD/g;function a4(u){return(typeof u=="string"?u:""+u).replace(Lre,`
`).replace(Ure,"")}function o4(u,f){return f=a4(f),a4(u)===f}function gA(){}function Zs(u,f,y,S,A,O){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Ai(u,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Ai(u,""+S);break;case"className":Yt(u,"class",S);break;case"tabIndex":Yt(u,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Yt(u,y,S);break;case"style":cd(u,S,O);break;case"data":if(f!=="object"){Yt(u,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){u.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=ud(""+S),u.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(y==="formAction"?(f!=="input"&&Zs(u,f,"name",A.name,A,null),Zs(u,f,"formEncType",A.formEncType,A,null),Zs(u,f,"formMethod",A.formMethod,A,null),Zs(u,f,"formTarget",A.formTarget,A,null)):(Zs(u,f,"encType",A.encType,A,null),Zs(u,f,"method",A.method,A,null),Zs(u,f,"target",A.target,A,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=ud(""+S),u.setAttribute(y,S);break;case"onClick":S!=null&&(u.onclick=gA);break;case"onScroll":S!=null&&ki("scroll",u);break;case"onScrollEnd":S!=null&&ki("scrollend",u);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(A.children!=null)throw Error(n(60));u.innerHTML=y}}break;case"multiple":u.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":u.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){u.removeAttribute("xlink:href");break}y=ud(""+S),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""+S):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":S===!0?u.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,S):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?u.setAttribute(y,S):u.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?u.removeAttribute(y):u.setAttribute(y,S);break;case"popover":ki("beforetoggle",u),ki("toggle",u),Dt(u,"popover",S);break;case"xlinkActuate":Ut(u,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Ut(u,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Ut(u,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Ut(u,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Ut(u,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Ut(u,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Ut(u,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Ut(u,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Ut(u,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Dt(u,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Jf.get(y)||y,Dt(u,y,S))}}function lP(u,f,y,S,A,O){switch(y){case"style":cd(u,S,O);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(A.children!=null)throw Error(n(60));u.innerHTML=y}}break;case"children":typeof S=="string"?Ai(u,S):(typeof S=="number"||typeof S=="bigint")&&Ai(u,""+S);break;case"onScroll":S!=null&&ki("scroll",u);break;case"onScrollEnd":S!=null&&ki("scrollend",u);break;case"onClick":S!=null&&(u.onclick=gA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fc.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(A=y.endsWith("Capture"),f=y.slice(2,A?y.length-7:void 0),O=u[Ds]||null,O=O!=null?O[y]:null,typeof O=="function"&&u.removeEventListener(f,O,A),typeof S=="function")){typeof O!="function"&&O!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(f,S,A);break e}y in u?u[y]=S:S===!0?u.setAttribute(y,""):Dt(u,y,S)}}}function dl(u,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ki("error",u),ki("load",u);var S=!1,A=!1,O;for(O in y)if(y.hasOwnProperty(O)){var j=y[O];if(j!=null)switch(O){case"src":S=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zs(u,f,O,j,y,null)}}A&&Zs(u,f,"srcSet",y.srcSet,y,null),S&&Zs(u,f,"src",y.src,y,null);return;case"input":ki("invalid",u);var J=O=j=A=null,pe=null,ke=null;for(S in y)if(y.hasOwnProperty(S)){var ft=y[S];if(ft!=null)switch(S){case"name":A=ft;break;case"type":j=ft;break;case"checked":pe=ft;break;case"defaultChecked":ke=ft;break;case"value":O=ft;break;case"defaultValue":J=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,f));break;default:Zs(u,f,S,ft,y,null)}}Xa(u,O,J,pe,ke,j,A,!1),On(u);return;case"select":ki("invalid",u),S=j=O=null;for(A in y)if(y.hasOwnProperty(A)&&(J=y[A],J!=null))switch(A){case"value":O=J;break;case"defaultValue":j=J;break;case"multiple":S=J;default:Zs(u,f,A,J,y,null)}f=O,y=j,u.multiple=!!S,f!=null?sr(u,!!S,f,!1):y!=null&&sr(u,!!S,y,!0);return;case"textarea":ki("invalid",u),O=A=S=null;for(j in y)if(y.hasOwnProperty(j)&&(J=y[j],J!=null))switch(j){case"value":S=J;break;case"defaultValue":A=J;break;case"children":O=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(91));break;default:Zs(u,f,j,J,y,null)}Vs(u,S,A,O),On(u);return;case"option":for(pe in y)if(y.hasOwnProperty(pe)&&(S=y[pe],S!=null))switch(pe){case"selected":u.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Zs(u,f,pe,S,y,null)}return;case"dialog":ki("beforetoggle",u),ki("toggle",u),ki("cancel",u),ki("close",u);break;case"iframe":case"object":ki("load",u);break;case"video":case"audio":for(S=0;S<AT.length;S++)ki(AT[S],u);break;case"image":ki("error",u),ki("load",u);break;case"details":ki("toggle",u);break;case"embed":case"source":case"link":ki("error",u),ki("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in y)if(y.hasOwnProperty(ke)&&(S=y[ke],S!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zs(u,f,ke,S,y,null)}return;default:if(of(f)){for(ft in y)y.hasOwnProperty(ft)&&(S=y[ft],S!==void 0&&lP(u,f,ft,S,y,void 0));return}}for(J in y)y.hasOwnProperty(J)&&(S=y[J],S!=null&&Zs(u,f,J,S,y,null))}function Bre(u,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,j=null,J=null,pe=null,ke=null,ft=null;for(Qe in y){var vt=y[Qe];if(y.hasOwnProperty(Qe)&&vt!=null)switch(Qe){case"checked":break;case"value":break;case"defaultValue":pe=vt;default:S.hasOwnProperty(Qe)||Zs(u,f,Qe,null,S,vt)}}for(var qe in S){var Qe=S[qe];if(vt=y[qe],S.hasOwnProperty(qe)&&(Qe!=null||vt!=null))switch(qe){case"type":O=Qe;break;case"name":A=Qe;break;case"checked":ke=Qe;break;case"defaultChecked":ft=Qe;break;case"value":j=Qe;break;case"defaultValue":J=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(n(137,f));break;default:Qe!==vt&&Zs(u,f,qe,Qe,S,vt)}}is(u,j,J,pe,ke,ft,O,A);return;case"select":Qe=j=J=qe=null;for(O in y)if(pe=y[O],y.hasOwnProperty(O)&&pe!=null)switch(O){case"value":break;case"multiple":Qe=pe;default:S.hasOwnProperty(O)||Zs(u,f,O,null,S,pe)}for(A in S)if(O=S[A],pe=y[A],S.hasOwnProperty(A)&&(O!=null||pe!=null))switch(A){case"value":qe=O;break;case"defaultValue":J=O;break;case"multiple":j=O;default:O!==pe&&Zs(u,f,A,O,S,pe)}f=J,y=j,S=Qe,qe!=null?sr(u,!!y,qe,!1):!!S!=!!y&&(f!=null?sr(u,!!y,f,!0):sr(u,!!y,y?[]:"",!1));return;case"textarea":Qe=qe=null;for(J in y)if(A=y[J],y.hasOwnProperty(J)&&A!=null&&!S.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:Zs(u,f,J,null,S,A)}for(j in S)if(A=S[j],O=y[j],S.hasOwnProperty(j)&&(A!=null||O!=null))switch(j){case"value":qe=A;break;case"defaultValue":Qe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==O&&Zs(u,f,j,A,S,O)}Br(u,qe,Qe);return;case"option":for(var ti in y)if(qe=y[ti],y.hasOwnProperty(ti)&&qe!=null&&!S.hasOwnProperty(ti))switch(ti){case"selected":u.selected=!1;break;default:Zs(u,f,ti,null,S,qe)}for(pe in S)if(qe=S[pe],Qe=y[pe],S.hasOwnProperty(pe)&&qe!==Qe&&(qe!=null||Qe!=null))switch(pe){case"selected":u.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Zs(u,f,pe,qe,S,Qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jn in y)qe=y[jn],y.hasOwnProperty(jn)&&qe!=null&&!S.hasOwnProperty(jn)&&Zs(u,f,jn,null,S,qe);for(ke in S)if(qe=S[ke],Qe=y[ke],S.hasOwnProperty(ke)&&qe!==Qe&&(qe!=null||Qe!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,f));break;default:Zs(u,f,ke,qe,S,Qe)}return;default:if(of(f)){for(var Qs in y)qe=y[Qs],y.hasOwnProperty(Qs)&&qe!==void 0&&!S.hasOwnProperty(Qs)&&lP(u,f,Qs,void 0,S,qe);for(ft in S)qe=S[ft],Qe=y[ft],!S.hasOwnProperty(ft)||qe===Qe||qe===void 0&&Qe===void 0||lP(u,f,ft,qe,S,Qe);return}}for(var Re in y)qe=y[Re],y.hasOwnProperty(Re)&&qe!=null&&!S.hasOwnProperty(Re)&&Zs(u,f,Re,null,S,qe);for(vt in S)qe=S[vt],Qe=y[vt],!S.hasOwnProperty(vt)||qe===Qe||qe==null&&Qe==null||Zs(u,f,vt,qe,S,Qe)}var cP=null,uP=null;function yA(u){return u.nodeType===9?u:u.ownerDocument}function l4(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c4(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function dP(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var fP=null;function Ire(){var u=window.event;return u&&u.type==="popstate"?u===fP?!1:(fP=u,!0):(fP=null,!1)}var u4=typeof setTimeout=="function"?setTimeout:void 0,Fre=typeof clearTimeout=="function"?clearTimeout:void 0,d4=typeof Promise=="function"?Promise:void 0,zre=typeof queueMicrotask=="function"?queueMicrotask:typeof d4<"u"?function(u){return d4.resolve(null).then(u).catch(Vre)}:u4;function Vre(u){setTimeout(function(){throw u})}function bg(u){return u==="head"}function f4(u,f){var y=f,S=0,A=0;do{var O=y.nextSibling;if(u.removeChild(y),O&&O.nodeType===8)if(y=O.data,y==="/$"){if(0<S&&8>S){y=S;var j=u.ownerDocument;if(y&1&&RT(j.documentElement),y&2&&RT(j.body),y&4)for(y=j.head,RT(y),j=y.firstChild;j;){var J=j.nextSibling,pe=j.nodeName;j[Ao]||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&j.rel.toLowerCase()==="stylesheet"||y.removeChild(j),j=J}}if(A===0){u.removeChild(O),IT(f);return}A--}else y==="$"||y==="$?"||y==="$!"?A++:S=y.charCodeAt(0)-48;else S=0;y=O}while(y);IT(f)}function hP(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":hP(y),ms(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function kre(u,f,y,S){for(;u.nodeType===1;){var A=y;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(S){if(!u[Ao])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(O=u.getAttribute("rel"),O==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(O!==A.rel||u.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||u.getAttribute("title")!==(A.title==null?null:A.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(O=u.getAttribute("src"),(O!==(A.src==null?null:A.src)||u.getAttribute("type")!==(A.type==null?null:A.type)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&u.getAttribute("name")===O)return u}else return u;if(u=Sf(u.nextSibling),u===null)break}return null}function Gre(u,f,y){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=Sf(u.nextSibling),u===null))return null;return u}function pP(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Hre(u,f){var y=u.ownerDocument;if(u.data!=="$?"||y.readyState==="complete")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),u._reactRetry=S}}function Sf(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var mP=null;function h4(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return u;f--}else y==="/$"&&f++}u=u.previousSibling}return null}function p4(u,f,y){switch(f=yA(y),u){case"html":if(u=f.documentElement,!u)throw Error(n(452));return u;case"head":if(u=f.head,!u)throw Error(n(453));return u;case"body":if(u=f.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function RT(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);ms(u)}var Dd=new Map,m4=new Set;function vA(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var jp=K.d;K.d={f:jre,r:$re,D:Wre,C:qre,L:Xre,m:Yre,X:Zre,S:Kre,M:Qre};function jre(){var u=jp.f(),f=Rd();return u||f}function $re(u){var f=Ic(u);f!==null&&f.tag===5&&f.type==="form"?ZM(f):jp.r(u)}var cx=typeof document>"u"?null:document;function g4(u,f,y){var S=cx;if(S&&typeof f=="string"&&f){var A=hr(f);A='link[rel="'+u+'"][href="'+A+'"]',typeof y=="string"&&(A+='[crossorigin="'+y+'"]'),m4.has(A)||(m4.add(A),u={rel:u,crossOrigin:y,href:f},S.querySelector(A)===null&&(f=S.createElement("link"),dl(f,"link",u),Hi(f),S.head.appendChild(f)))}}function Wre(u){jp.D(u),g4("dns-prefetch",u,null)}function qre(u,f){jp.C(u,f),g4("preconnect",u,f)}function Xre(u,f,y){jp.L(u,f,y);var S=cx;if(S&&u&&f){var A='link[rel="preload"][as="'+hr(f)+'"]';f==="image"&&y&&y.imageSrcSet?(A+='[imagesrcset="'+hr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(A+='[imagesizes="'+hr(y.imageSizes)+'"]')):A+='[href="'+hr(u)+'"]';var O=A;switch(f){case"style":O=ux(u);break;case"script":O=dx(u)}Dd.has(O)||(u=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:u,as:f},y),Dd.set(O,u),S.querySelector(A)!==null||f==="style"&&S.querySelector(NT(O))||f==="script"&&S.querySelector(DT(O))||(f=S.createElement("link"),dl(f,"link",u),Hi(f),S.head.appendChild(f)))}}function Yre(u,f){jp.m(u,f);var y=cx;if(y&&u){var S=f&&typeof f.as=="string"?f.as:"script",A='link[rel="modulepreload"][as="'+hr(S)+'"][href="'+hr(u)+'"]',O=A;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=dx(u)}if(!Dd.has(O)&&(u=d({rel:"modulepreload",href:u},f),Dd.set(O,u),y.querySelector(A)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(DT(O)))return}S=y.createElement("link"),dl(S,"link",u),Hi(S),y.head.appendChild(S)}}}function Kre(u,f,y){jp.S(u,f,y);var S=cx;if(S&&u){var A=El(S).hoistableStyles,O=ux(u);f=f||"default";var j=A.get(O);if(!j){var J={loading:0,preload:null};if(j=S.querySelector(NT(O)))J.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},y),(y=Dd.get(O))&&gP(u,y);var pe=j=S.createElement("link");Hi(pe),dl(pe,"link",u),pe._p=new Promise(function(ke,ft){pe.onload=ke,pe.onerror=ft}),pe.addEventListener("load",function(){J.loading|=1}),pe.addEventListener("error",function(){J.loading|=2}),J.loading|=4,_A(j,f,S)}j={type:"stylesheet",instance:j,count:1,state:J},A.set(O,j)}}}function Zre(u,f){jp.X(u,f);var y=cx;if(y&&u){var S=El(y).hoistableScripts,A=dx(u),O=S.get(A);O||(O=y.querySelector(DT(A)),O||(u=d({src:u,async:!0},f),(f=Dd.get(A))&&yP(u,f),O=y.createElement("script"),Hi(O),dl(O,"link",u),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(A,O))}}function Qre(u,f){jp.M(u,f);var y=cx;if(y&&u){var S=El(y).hoistableScripts,A=dx(u),O=S.get(A);O||(O=y.querySelector(DT(A)),O||(u=d({src:u,async:!0,type:"module"},f),(f=Dd.get(A))&&yP(u,f),O=y.createElement("script"),Hi(O),dl(O,"link",u),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(A,O))}}function y4(u,f,y,S){var A=(A=Ee.current)?vA(A):null;if(!A)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=ux(y.href),y=El(A).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=ux(y.href);var O=El(A).hoistableStyles,j=O.get(u);if(j||(A=A.ownerDocument||A,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(u,j),(O=A.querySelector(NT(u)))&&!O._p&&(j.instance=O,j.state.loading=5),Dd.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Dd.set(u,y),O||Jre(A,u,y,j.state))),f&&S===null)throw Error(n(528,""));return j}if(f&&S!==null)throw Error(n(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=dx(y),y=El(A).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function ux(u){return'href="'+hr(u)+'"'}function NT(u){return'link[rel="stylesheet"]['+u+"]"}function v4(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function Jre(u,f,y,S){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=u.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),dl(f,"link",y),Hi(f),u.head.appendChild(f))}function dx(u){return'[src="'+hr(u)+'"]'}function DT(u){return"script[async]"+u}function _4(u,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=u.querySelector('style[data-href~="'+hr(y.href)+'"]');if(S)return f.instance=S,Hi(S),S;var A=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(u.ownerDocument||u).createElement("style"),Hi(S),dl(S,"style",A),_A(S,y.precedence,u),f.instance=S;case"stylesheet":A=ux(y.href);var O=u.querySelector(NT(A));if(O)return f.state.loading|=4,f.instance=O,Hi(O),O;S=v4(y),(A=Dd.get(A))&&gP(S,A),O=(u.ownerDocument||u).createElement("link"),Hi(O);var j=O;return j._p=new Promise(function(J,pe){j.onload=J,j.onerror=pe}),dl(O,"link",S),f.state.loading|=4,_A(O,y.precedence,u),f.instance=O;case"script":return O=dx(y.src),(A=u.querySelector(DT(O)))?(f.instance=A,Hi(A),A):(S=y,(A=Dd.get(O))&&(S=d({},y),yP(S,A)),u=u.ownerDocument||u,A=u.createElement("script"),Hi(A),dl(A,"link",S),u.head.appendChild(A),f.instance=A);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,_A(S,y.precedence,u));return f.instance}function _A(u,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=S.length?S[S.length-1]:null,O=A,j=0;j<S.length;j++){var J=S[j];if(J.dataset.precedence===f)O=J;else if(O!==A)break}O?O.parentNode.insertBefore(u,O.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(u,f.firstChild))}function gP(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function yP(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var xA=null;function x4(u,f,y){if(xA===null){var S=new Map,A=xA=new Map;A.set(y,S)}else A=xA,S=A.get(y),S||(S=new Map,A.set(y,S));if(S.has(u))return S;for(S.set(u,null),y=y.getElementsByTagName(u),A=0;A<y.length;A++){var O=y[A];if(!(O[Ao]||O[wr]||u==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var j=O.getAttribute(f)||"";j=u+j;var J=S.get(j);J?J.push(O):S.set(j,[O])}}return S}function b4(u,f,y){u=u.ownerDocument||u,u.head.insertBefore(y,f==="title"?u.querySelector("head > title"):null)}function eae(u,f,y){if(y===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function S4(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var PT=null;function tae(){}function nae(u,f,y){if(PT===null)throw Error(n(475));var S=PT;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var A=ux(y.href),O=u.querySelector(NT(A));if(O){u=O._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(S.count++,S=bA.bind(S),u.then(S,S)),f.state.loading|=4,f.instance=O,Hi(O);return}O=u.ownerDocument||u,y=v4(y),(A=Dd.get(A))&&gP(y,A),O=O.createElement("link"),Hi(O);var j=O;j._p=new Promise(function(J,pe){j.onload=J,j.onerror=pe}),dl(O,"link",y),f.instance=O}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(S.count++,f=bA.bind(S),u.addEventListener("load",f),u.addEventListener("error",f))}}function iae(){if(PT===null)throw Error(n(475));var u=PT;return u.stylesheets&&u.count===0&&vP(u,u.stylesheets),0<u.count?function(f){var y=setTimeout(function(){if(u.stylesheets&&vP(u,u.stylesheets),u.unsuspend){var S=u.unsuspend;u.unsuspend=null,S()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(y)}}:null}function bA(){if(this.count--,this.count===0){if(this.stylesheets)vP(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var SA=null;function vP(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,SA=new Map,f.forEach(sae,u),SA=null,bA.call(u))}function sae(u,f){if(!(f.state.loading&4)){var y=SA.get(u);if(y)var S=y.get(null);else{y=new Map,SA.set(u,y);for(var A=u.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var j=A[O];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(y.set(j.dataset.precedence,j),S=j)}S&&y.set(null,S)}A=f.instance,j=A.getAttribute("data-precedence"),O=y.get(j)||S,O===S&&y.set(null,A),y.set(j,A),this.count++,S=bA.bind(this),A.addEventListener("load",S),A.addEventListener("error",S),O?O.parentNode.insertBefore(A,O.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(A,u.firstChild)),f.state.loading|=4}}var OT={$$typeof:M,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function rae(u,f,y,S,A,O,j,J){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=S,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function T4(u,f,y,S,A,O,j,J,pe,ke,ft,vt){return u=new rae(u,f,y,j,J,pe,ke,vt),f=1,O===!0&&(f|=24),O=zr(3,null,null,f),u.current=O,O.stateNode=u,f=P_(),f.refCount++,u.pooledCache=f,f.refCount++,O.memoizedState={element:S,isDehydrated:y,cache:f},iT(O),u}function E4(u){return u?(u=Po,u):Po}function w4(u,f,y,S,A,O){A=E4(A),S.context===null?S.context=A:S.pendingContext=A,S=vd(f),S.payload={element:y},O=O===void 0?null:O,O!==null&&(S.callback=O),y=ff(u,S,f),y!==null&&(ul(y,u,f),Mp(y,u,f))}function M4(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function _P(u,f){M4(u,f),(u=u.alternate)&&M4(u,f)}function A4(u){if(u.tag===13){var f=Do(u,67108864);f!==null&&ul(f,u,67108864),_P(u,67108864)}}var TA=!0;function aae(u,f,y,S){var A=G.T;G.T=null;var O=K.p;try{K.p=2,xP(u,f,y,S)}finally{K.p=O,G.T=A}}function oae(u,f,y,S){var A=G.T;G.T=null;var O=K.p;try{K.p=8,xP(u,f,y,S)}finally{K.p=O,G.T=A}}function xP(u,f,y,S){if(TA){var A=bP(S);if(A===null)oP(u,f,S,EA,y),R4(u,S);else if(cae(A,u,f,y,S))S.stopPropagation();else if(R4(u,S),f&4&&-1<lae.indexOf(u)){for(;A!==null;){var O=Ic(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var j=Xt(O.pendingLanes);if(j!==0){var J=O;for(J.pendingLanes|=2,J.entangledLanes|=2;j;){var pe=1<<31-Lt(j);J.entanglements[1]|=pe,j&=~pe}Mh(O),(us&6)===0&&(Uo=We()+500,MT(0))}}break;case 13:J=Do(O,2),J!==null&&ul(J,O,2),Rd(),_P(O,2)}if(O=bP(S),O===null&&oP(u,f,S,EA,y),O===A)break;A=O}A!==null&&S.stopPropagation()}else oP(u,f,S,null,y)}}function bP(u){return u=eh(u),SP(u)}var EA=null;function SP(u){if(EA=null,u=ec(u),u!==null){var f=r(u);if(f===null)u=null;else{var y=f.tag;if(y===13){if(u=a(f),u!==null)return u;u=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return EA=u,null}function C4(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_t()){case ut:return 2;case ht:return 8;case Bt:case kt:return 32;case X:return 268435456;default:return 32}default:return 32}}var TP=!1,Sg=null,Tg=null,Eg=null,LT=new Map,UT=new Map,wg=[],lae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R4(u,f){switch(u){case"focusin":case"focusout":Sg=null;break;case"dragenter":case"dragleave":Tg=null;break;case"mouseover":case"mouseout":Eg=null;break;case"pointerover":case"pointerout":LT.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":UT.delete(f.pointerId)}}function BT(u,f,y,S,A,O){return u===null||u.nativeEvent!==O?(u={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:O,targetContainers:[A]},f!==null&&(f=Ic(f),f!==null&&A4(f)),u):(u.eventSystemFlags|=S,f=u.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),u)}function cae(u,f,y,S,A){switch(f){case"focusin":return Sg=BT(Sg,u,f,y,S,A),!0;case"dragenter":return Tg=BT(Tg,u,f,y,S,A),!0;case"mouseover":return Eg=BT(Eg,u,f,y,S,A),!0;case"pointerover":var O=A.pointerId;return LT.set(O,BT(LT.get(O)||null,u,f,y,S,A)),!0;case"gotpointercapture":return O=A.pointerId,UT.set(O,BT(UT.get(O)||null,u,f,y,S,A)),!0}return!1}function N4(u){var f=ec(u.target);if(f!==null){var y=r(f);if(y!==null){if(f=y.tag,f===13){if(f=a(y),f!==null){u.blockedOn=f,Ko(u.priority,function(){if(y.tag===13){var S=jr();S=dn(S);var A=Do(y,S);A!==null&&ul(A,y,S),_P(y,S)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function wA(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var y=bP(u.nativeEvent);if(y===null){y=u.nativeEvent;var S=new y.constructor(y.type,y);ai=S,y.target.dispatchEvent(S),ai=null}else return f=Ic(y),f!==null&&A4(f),u.blockedOn=y,!1;f.shift()}return!0}function D4(u,f,y){wA(u)&&y.delete(f)}function uae(){TP=!1,Sg!==null&&wA(Sg)&&(Sg=null),Tg!==null&&wA(Tg)&&(Tg=null),Eg!==null&&wA(Eg)&&(Eg=null),LT.forEach(D4),UT.forEach(D4)}function MA(u,f){u.blockedOn===f&&(u.blockedOn=null,TP||(TP=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,uae)))}var AA=null;function P4(u){AA!==u&&(AA=u,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){AA===u&&(AA=null);for(var f=0;f<u.length;f+=3){var y=u[f],S=u[f+1],A=u[f+2];if(typeof S!="function"){if(SP(S||y)===null)continue;break}var O=Ic(y);O!==null&&(u.splice(f,3),f-=3,_T(O,{pending:!0,data:A,method:y.method,action:S},S,A))}}))}function IT(u){function f(pe){return MA(pe,u)}Sg!==null&&MA(Sg,u),Tg!==null&&MA(Tg,u),Eg!==null&&MA(Eg,u),LT.forEach(f),UT.forEach(f);for(var y=0;y<wg.length;y++){var S=wg[y];S.blockedOn===u&&(S.blockedOn=null)}for(;0<wg.length&&(y=wg[0],y.blockedOn===null);)N4(y),y.blockedOn===null&&wg.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var A=y[S],O=y[S+1],j=A[Ds]||null;if(typeof O=="function")j||P4(y);else if(j){var J=null;if(O&&O.hasAttribute("formAction")){if(A=O,j=O[Ds]||null)J=j.formAction;else if(SP(A)!==null)continue}else J=j.action;typeof J=="function"?y[S+1]=J:(y.splice(S,3),S-=3),P4(y)}}}function EP(u){this._internalRoot=u}CA.prototype.render=EP.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));var y=f.current,S=jr();w4(y,S,u,f,null,null)},CA.prototype.unmount=EP.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;w4(u.current,2,null,u,null,null),Rd(),f[Mr]=null}};function CA(u){this._internalRoot=u}CA.prototype.unstable_scheduleHydration=function(u){if(u){var f=Si();u={blockedOn:null,target:u,priority:f};for(var y=0;y<wg.length&&f!==0&&f<wg[y].priority;y++);wg.splice(y,0,u),y===0&&N4(u)}};var O4=e.version;if(O4!=="19.1.1")throw Error(n(527,O4,"19.1.1"));K.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var dae={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var RA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!RA.isDisabled&&RA.supportsFiber)try{Fe=RA.inject(dae),tt=RA}catch{}}return zT.createRoot=function(u,f){if(!s(u))throw Error(n(299));var y=!1,S="",A=N0,O=Y_,j=cA,J=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(J=f.unstable_transitionCallbacks)),f=T4(u,1,!1,null,null,y,S,A,O,j,J,null),u[Mr]=f.current,aP(u),new EP(f)},zT.hydrateRoot=function(u,f,y){if(!s(u))throw Error(n(299));var S=!1,A="",O=N0,j=Y_,J=cA,pe=null,ke=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(A=y.identifierPrefix),y.onUncaughtError!==void 0&&(O=y.onUncaughtError),y.onCaughtError!==void 0&&(j=y.onCaughtError),y.onRecoverableError!==void 0&&(J=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(pe=y.unstable_transitionCallbacks),y.formState!==void 0&&(ke=y.formState)),f=T4(u,1,!0,f,y??null,S,A,O,j,J,pe,ke),f.context=E4(null),y=f.current,S=jr(),S=dn(S),A=vd(S),A.callback=null,ff(y,A,S),y=S,f.current.lanes=y,$t(f,y),Mh(f),u[Mr]=f.current,aP(u),new CA(f)},zT.version="19.1.1",zT}var H4;function bae(){if(H4)return AP.exports;H4=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),AP.exports=xae(),AP.exports}var VW=bae();const Sae=dp(VW);var h_=zW();const JB=dp(h_);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dE(){return dE=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},dE.apply(this,arguments)}var $g;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})($g||($g={}));const j4="popstate";function Tae(i){i===void 0&&(i={});function e(n,s){let{pathname:r,search:a,hash:o}=n.location;return UU("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:zR(s)}return wae(e,t,null,i)}function lo(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function kW(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Eae(){return Math.random().toString(36).substr(2,8)}function $4(i,e){return{usr:i.state,key:i.key,idx:e}}function UU(i,e,t,n){return t===void 0&&(t=null),dE({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?lS(e):e,{state:t,key:e&&e.key||n||Eae()})}function zR(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function lS(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function wae(i,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:r=!1}=n,a=s.history,o=$g.Pop,l=null,c=d();c==null&&(c=0,a.replaceState(dE({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=$g.Pop;let T=d(),b=T==null?null:T-c;c=T,l&&l({action:o,location:x.location,delta:b})}function m(T,b){o=$g.Push;let w=UU(x.location,T,b);c=d()+1;let M=$4(w,c),R=x.createHref(w);try{a.pushState(M,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(R)}r&&l&&l({action:o,location:x.location,delta:1})}function v(T,b){o=$g.Replace;let w=UU(x.location,T,b);c=d();let M=$4(w,c),R=x.createHref(w);a.replaceState(M,"",R),r&&l&&l({action:o,location:x.location,delta:0})}function _(T){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof T=="string"?T:zR(T);return w=w.replace(/ $/,"%20"),lo(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let x={get action(){return o},get location(){return i(s,a)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(j4,h),l=T,()=>{s.removeEventListener(j4,h),l=null}},createHref(T){return e(s,T)},createURL:_,encodeLocation(T){let b=_(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:v,go(T){return a.go(T)}};return x}var W4;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(W4||(W4={}));function Mae(i,e,t){return t===void 0&&(t="/"),Aae(i,e,t)}function Aae(i,e,t,n){let s=typeof e=="string"?lS(e):e,r=eI(s.pathname||"/",t);if(r==null)return null;let a=GW(i);Cae(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Vae(r);o=Iae(a[l],c)}return o}function GW(i,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(r,a,o)=>{let l={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};l.relativePath.startsWith("/")&&(lo(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ty([n,l.relativePath]),d=t.concat(l);r.children&&r.children.length>0&&(lo(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),GW(r.children,e,d,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:Uae(c,r.index),routesMeta:d})};return i.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))s(r,a);else for(let l of HW(r.path))s(r,a,l)}),e}function HW(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let a=HW(n.join("/")),o=[];return o.push(...a.map(l=>l===""?r:[r,l].join("/"))),s&&o.push(...a),o.map(l=>i.startsWith("/")&&l===""?"/":l)}function Cae(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:Bae(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const Rae=/^:[\w-]+$/,Nae=3,Dae=2,Pae=1,Oae=10,Lae=-2,q4=i=>i==="*";function Uae(i,e){let t=i.split("/"),n=t.length;return t.some(q4)&&(n+=Lae),e&&(n+=Dae),t.filter(s=>!q4(s)).reduce((s,r)=>s+(Rae.test(r)?Nae:r===""?Pae:Oae),n)}function Bae(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function Iae(i,e,t){let{routesMeta:n}=i,s={},r="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",h=Fae({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:ty([r,h.pathname]),pathnameBase:jae(ty([r,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(r=ty([r,h.pathnameBase]))}return a}function Fae(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=zae(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:m,isOptional:v}=d;if(m==="*"){let x=o[h]||"";a=r.slice(0,r.length-x.length).replace(/(.)\/+$/,"$1")}const _=o[h];return v&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:a,pattern:i}}function zae(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),kW(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Vae(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kW(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function eI(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function kae(i,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?lS(i):i;return{pathname:t?t.startsWith("/")?t:Gae(t,e):e,search:$ae(n),hash:Wae(s)}}function Gae(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function DP(i,e,t,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hae(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jW(i,e){let t=Hae(i);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function $W(i,e,t,n){n===void 0&&(n=!1);let s;typeof i=="string"?s=lS(i):(s=dE({},i),lo(!s.pathname||!s.pathname.includes("?"),DP("?","pathname","search",s)),lo(!s.pathname||!s.pathname.includes("#"),DP("#","pathname","hash",s)),lo(!s.search||!s.search.includes("#"),DP("#","search","hash",s)));let r=i===""||s.pathname==="",a=r?"/":s.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=kae(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(r||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ty=i=>i.join("/").replace(/\/\/+/g,"/"),jae=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),$ae=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Wae=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function qae(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const WW=["post","put","patch","delete"];new Set(WW);const Xae=["get",...WW];new Set(Xae);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fE(){return fE=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},fE.apply(this,arguments)}const tI=P.createContext(null),Yae=P.createContext(null),p_=P.createContext(null),WN=P.createContext(null),m_=P.createContext({outlet:null,matches:[],isDataRoute:!1}),qW=P.createContext(null);function Kae(i,e){let{relative:t}=e===void 0?{}:e;nw()||lo(!1);let{basename:n,navigator:s}=P.useContext(p_),{hash:r,pathname:a,search:o}=YW(i,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:ty([n,a])),s.createHref({pathname:l,search:o,hash:r})}function nw(){return P.useContext(WN)!=null}function cS(){return nw()||lo(!1),P.useContext(WN).location}function XW(i){P.useContext(p_).static||P.useLayoutEffect(i)}function Zae(){let{isDataRoute:i}=P.useContext(m_);return i?uoe():Qae()}function Qae(){nw()||lo(!1);let i=P.useContext(tI),{basename:e,future:t,navigator:n}=P.useContext(p_),{matches:s}=P.useContext(m_),{pathname:r}=cS(),a=JSON.stringify(jW(s,t.v7_relativeSplatPath)),o=P.useRef(!1);return XW(()=>{o.current=!0}),P.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=$W(c,JSON.parse(a),r,d.relative==="path");i==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ty([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,r,i])}function YW(i,e){let{relative:t}=e===void 0?{}:e,{future:n}=P.useContext(p_),{matches:s}=P.useContext(m_),{pathname:r}=cS(),a=JSON.stringify(jW(s,n.v7_relativeSplatPath));return P.useMemo(()=>$W(i,JSON.parse(a),r,t==="path"),[i,a,r,t])}function Jae(i,e){return eoe(i,e)}function eoe(i,e,t,n){nw()||lo(!1);let{navigator:s}=P.useContext(p_),{matches:r}=P.useContext(m_),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=cS(),d;if(e){var h;let T=typeof e=="string"?lS(e):e;l==="/"||(h=T.pathname)!=null&&h.startsWith(l)||lo(!1),d=T}else d=c;let m=d.pathname||"/",v=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=Mae(i,{pathname:v}),x=roe(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},o,T.params),pathname:ty([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ty([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),r,t,n);return e&&x?P.createElement(WN.Provider,{value:{location:fE({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:$g.Pop}},x):x}function toe(){let i=coe(),e=qae(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,null)}const noe=P.createElement(toe,null);class ioe extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(m_.Provider,{value:this.props.routeContext},P.createElement(qW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function soe(i){let{routeContext:e,match:t,children:n}=i,s=P.useContext(tI);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(m_.Provider,{value:e},n)}function roe(i,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),i==null){var r;if(!t)return null;if(t.errors)i=t.matches;else if((r=n)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,o=(s=t)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);d>=0||lo(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(t&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:v}=t,_=h.route.loader&&m[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let v,_=!1,x=null,T=null;t&&(v=o&&h.route.id?o[h.route.id]:void 0,x=h.route.errorElement||noe,l&&(c<0&&m===0?(doe("route-fallback"),_=!0,T=null):c===m&&(_=!0,T=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),w=()=>{let M;return v?M=x:_?M=T:h.route.Component?M=P.createElement(h.route.Component,null):h.route.element?M=h.route.element:M=d,P.createElement(soe,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:t!=null},children:M})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?P.createElement(ioe,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var KW=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(KW||{}),ZW=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(ZW||{});function aoe(i){let e=P.useContext(tI);return e||lo(!1),e}function ooe(i){let e=P.useContext(Yae);return e||lo(!1),e}function loe(i){let e=P.useContext(m_);return e||lo(!1),e}function QW(i){let e=loe(),t=e.matches[e.matches.length-1];return t.route.id||lo(!1),t.route.id}function coe(){var i;let e=P.useContext(qW),t=ooe(),n=QW();return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function uoe(){let{router:i}=aoe(KW.UseNavigateStable),e=QW(ZW.UseNavigateStable),t=P.useRef(!1);return XW(()=>{t.current=!0}),P.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?i.navigate(s):i.navigate(s,fE({fromRouteId:e},r)))},[i,e])}const X4={};function doe(i,e,t){X4[i]||(X4[i]=!0)}function foe(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function w1(i){lo(!1)}function hoe(i){let{basename:e="/",children:t=null,location:n,navigationType:s=$g.Pop,navigator:r,static:a=!1,future:o}=i;nw()&&lo(!1);let l=e.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:r,static:a,future:fE({v7_relativeSplatPath:!1},o)}),[l,o,r,a]);typeof n=="string"&&(n=lS(n));let{pathname:d="/",search:h="",hash:m="",state:v=null,key:_="default"}=n,x=P.useMemo(()=>{let T=eI(d,l);return T==null?null:{location:{pathname:T,search:h,hash:m,state:v,key:_},navigationType:s}},[l,d,h,m,v,_,s]);return x==null?null:P.createElement(p_.Provider,{value:c},P.createElement(WN.Provider,{children:t,value:x}))}function poe(i){let{children:e,location:t}=i;return Jae(BU(e),t)}new Promise(()=>{});function BU(i,e){e===void 0&&(e=[]);let t=[];return P.Children.forEach(i,(n,s)=>{if(!P.isValidElement(n))return;let r=[...e,s];if(n.type===P.Fragment){t.push.apply(t,BU(n.props.children,r));return}n.type!==w1&&lo(!1),!n.props.index||!n.props.children||lo(!1);let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=BU(n.props.children,r)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IU(){return IU=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},IU.apply(this,arguments)}function moe(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function goe(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function yoe(i,e){return i.button===0&&(!e||e==="_self")&&!goe(i)}const voe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_oe="6";try{window.__reactRouterVersion=_oe}catch{}const xoe="startTransition",Y4=$N[xoe];function boe(i){let{basename:e,children:t,future:n,window:s}=i,r=P.useRef();r.current==null&&(r.current=Tae({window:s,v5Compat:!0}));let a=r.current,[o,l]=P.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=P.useCallback(h=>{c&&Y4?Y4(()=>l(h)):l(h)},[l,c]);return P.useLayoutEffect(()=>a.listen(d),[a,d]),P.useEffect(()=>foe(n),[n]),P.createElement(hoe,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}const Soe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Toe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PP=P.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:r,replace:a,state:o,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,m=moe(e,voe),{basename:v}=P.useContext(p_),_,x=!1;if(typeof c=="string"&&Toe.test(c)&&(_=c,Soe))try{let M=new URL(window.location.href),R=c.startsWith("//")?new URL(M.protocol+c):new URL(c),N=eI(R.pathname,v);R.origin===M.origin&&N!=null?c=N+R.search+R.hash:x=!0}catch{}let T=Kae(c,{relative:s}),b=Eoe(c,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:h});function w(M){n&&n(M),M.defaultPrevented||b(M)}return P.createElement("a",IU({},m,{href:_||T,onClick:x||r?n:w,ref:t,target:l}))});var K4;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(K4||(K4={}));var Z4;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Z4||(Z4={}));function Eoe(i,e){let{target:t,replace:n,state:s,preventScrollReset:r,relative:a,viewTransition:o}=e===void 0?{}:e,l=Zae(),c=cS(),d=YW(i,{relative:a});return P.useCallback(h=>{if(yoe(h,t)){h.preventDefault();let m=n!==void 0?n:zR(c)===zR(d);l(i,{replace:m,state:s,preventScrollReset:r,relative:a,viewTransition:o})}},[c,l,d,n,s,t,i,r,a,o])}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JW=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Moe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=P.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:r,iconNode:a,...o},l)=>P.createElement("svg",{ref:l,...Moe,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:JW("lucide",s),...o},[...a.map(([c,d])=>P.createElement(c,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=(i,e)=>{const t=P.forwardRef(({className:n,...s},r)=>P.createElement(Aoe,{ref:r,iconNode:e,className:JW(`lucide-${woe(i)}`,n),...s}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=jy("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=jy("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=jy("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=jy("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=jy("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=jy("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=jy("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=jy("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Boe=()=>B.jsx("img",{src:"https://i.postimg.cc/KvvNMK89/stickerverselogo.png",alt:"StickerVerse",className:"h-8 w-auto"});function Q4(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function nI(...i){return e=>{let t=!1;const n=i.map(s=>{const r=Q4(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<n.length;s++){const r=n[s];typeof r=="function"?r():Q4(i[s],null)}}}}function Bc(...i){return P.useCallback(nI(...i),i)}function hu(i){const e=Foe(i),t=P.forwardRef((n,s)=>{const{children:r,...a}=n,o=P.Children.toArray(r),l=o.find(Voe);if(l){const c=l.props.children,d=o.map(h=>h===l?P.Children.count(c)>1?P.Children.only(null):P.isValidElement(c)?c.props.children:null:h);return B.jsx(e,{...a,ref:s,children:P.isValidElement(c)?P.cloneElement(c,void 0,d):null})}return B.jsx(e,{...a,ref:s,children:r})});return t.displayName=`${i}.Slot`,t}var Ioe=hu("Slot");function Foe(i){const e=P.forwardRef((t,n)=>{const{children:s,...r}=t;if(P.isValidElement(s)){const a=Goe(s),o=koe(r,s.props);return s.type!==P.Fragment&&(o.ref=n?nI(n,a):a),P.cloneElement(s,o)}return P.Children.count(s)>1?P.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var zoe=Symbol("radix.slottable");function Voe(i){return P.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===zoe}function koe(i,e){const t={...e};for(const n in e){const s=i[n],r=e[n];/^on[A-Z]/.test(n)?s&&r?t[n]=(...o)=>{const l=r(...o);return s(...o),l}:s&&(t[n]=s):n==="style"?t[n]={...s,...r}:n==="className"&&(t[n]=[s,r].filter(Boolean).join(" "))}return{...i,...t}}function Goe(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function e9(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(t=e9(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function t9(){for(var i,e,t=0,n="",s=arguments.length;t<s;t++)(i=arguments[t])&&(e=e9(i))&&(n&&(n+=" "),n+=e);return n}const J4=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,eG=t9,n9=(i,e)=>t=>{var n;if(e?.variants==null)return eG(i,t?.class,t?.className);const{variants:s,defaultVariants:r}=e,a=Object.keys(s).map(c=>{const d=t?.[c],h=r?.[c];if(d===null)return null;const m=J4(d)||J4(h);return s[c][m]}),o=t&&Object.entries(t).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,d)=>{let{class:h,className:m,...v}=d;return Object.entries(v).every(_=>{let[x,T]=_;return Array.isArray(T)?T.includes({...r,...o}[x]):{...r,...o}[x]===T})?[...c,h,m]:c},[]);return eG(i,a,l,t?.class,t?.className)},iI="-",Hoe=i=>{const e=$oe(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:a=>{const o=a.split(iI);return o[0]===""&&o.length!==1&&o.shift(),i9(o,e)||joe(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},i9=(i,e)=>{if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),s=n?i9(i.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const r=i.join(iI);return e.validators.find(({validator:a})=>a(r))?.classGroupId},tG=/^\[(.+)\]$/,joe=i=>{if(tG.test(i)){const e=tG.exec(i)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},$oe=i=>{const{theme:e,classGroups:t}=i,n={nextPart:new Map,validators:[]};for(const s in t)FU(t[s],n,s,e);return n},FU=(i,e,t,n)=>{i.forEach(s=>{if(typeof s=="string"){const r=s===""?e:nG(e,s);r.classGroupId=t;return}if(typeof s=="function"){if(Woe(s)){FU(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([r,a])=>{FU(a,nG(e,r),t,n)})})},nG=(i,e)=>{let t=i;return e.split(iI).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},Woe=i=>i.isThemeGetter,qoe=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(r,a)=>{t.set(r,a),e++,e>i&&(e=0,n=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=n.get(r))!==void 0)return s(r,a),a},set(r,a){t.has(r)?t.set(r,a):s(r,a)}}},zU="!",VU=":",Xoe=VU.length,Yoe=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=s=>{const r=[];let a=0,o=0,l=0,c;for(let _=0;_<s.length;_++){let x=s[_];if(a===0&&o===0){if(x===VU){r.push(s.slice(l,_)),l=_+Xoe;continue}if(x==="/"){c=_;continue}}x==="["?a++:x==="]"?a--:x==="("?o++:x===")"&&o--}const d=r.length===0?s:s.substring(l),h=Koe(d),m=h!==d,v=c&&c>l?c-l:void 0;return{modifiers:r,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:v}};if(e){const s=e+VU,r=n;n=a=>a.startsWith(s)?r(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(t){const s=n;n=r=>t({className:r,parseClassName:s})}return n},Koe=i=>i.endsWith(zU)?i.substring(0,i.length-1):i.startsWith(zU)?i.substring(1):i,Zoe=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let r=[];return n.forEach(a=>{a[0]==="["||e[a]?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s}},Qoe=i=>({cache:qoe(i.cacheSize),parseClassName:Yoe(i),sortModifiers:Zoe(i),...Hoe(i)}),Joe=/\s+/,ele=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:r}=e,a=[],o=i.trim().split(Joe);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{isExternal:h,modifiers:m,hasImportantModifier:v,baseClassName:_,maybePostfixModifierPosition:x}=t(d);if(h){l=d+(l.length>0?" "+l:l);continue}let T=!!x,b=n(T?_.substring(0,x):_);if(!b){if(!T){l=d+(l.length>0?" "+l:l);continue}if(b=n(_),!b){l=d+(l.length>0?" "+l:l);continue}T=!1}const w=r(m).join(":"),M=v?w+zU:w,R=M+b;if(a.includes(R))continue;a.push(R);const N=s(b,T);for(let D=0;D<N.length;++D){const L=N[D];a.push(M+L)}l=d+(l.length>0?" "+l:l)}return l};function tle(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=s9(e))&&(n&&(n+=" "),n+=t);return n}const s9=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=s9(i[n]))&&(t&&(t+=" "),t+=e);return t};function nle(i,...e){let t,n,s,r=a;function a(l){const c=e.reduce((d,h)=>h(d),i());return t=Qoe(c),n=t.cache.get,s=t.cache.set,r=o,o(l)}function o(l){const c=n(l);if(c)return c;const d=ele(l,t);return s(l,d),d}return function(){return r(tle.apply(null,arguments))}}const _o=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},r9=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,a9=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ile=/^\d+\/\d+$/,sle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ale=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ole=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lle=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fx=i=>ile.test(i),Oi=i=>!!i&&!Number.isNaN(Number(i)),Ag=i=>!!i&&Number.isInteger(Number(i)),OP=i=>i.endsWith("%")&&Oi(i.slice(0,-1)),$p=i=>sle.test(i),cle=()=>!0,ule=i=>rle.test(i)&&!ale.test(i),o9=()=>!1,dle=i=>ole.test(i),fle=i=>lle.test(i),hle=i=>!gn(i)&&!yn(i),ple=i=>uS(i,u9,o9),gn=i=>r9.test(i),F0=i=>uS(i,d9,ule),LP=i=>uS(i,_le,Oi),iG=i=>uS(i,l9,o9),mle=i=>uS(i,c9,fle),NA=i=>uS(i,f9,dle),yn=i=>a9.test(i),VT=i=>dS(i,d9),gle=i=>dS(i,xle),sG=i=>dS(i,l9),yle=i=>dS(i,u9),vle=i=>dS(i,c9),DA=i=>dS(i,f9,!0),uS=(i,e,t)=>{const n=r9.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},dS=(i,e,t=!1)=>{const n=a9.exec(i);return n?n[1]?e(n[1]):t:!1},l9=i=>i==="position"||i==="percentage",c9=i=>i==="image"||i==="url",u9=i=>i==="length"||i==="size"||i==="bg-size",d9=i=>i==="length",_le=i=>i==="number",xle=i=>i==="family-name",f9=i=>i==="shadow",ble=()=>{const i=_o("color"),e=_o("font"),t=_o("text"),n=_o("font-weight"),s=_o("tracking"),r=_o("leading"),a=_o("breakpoint"),o=_o("container"),l=_o("spacing"),c=_o("radius"),d=_o("shadow"),h=_o("inset-shadow"),m=_o("text-shadow"),v=_o("drop-shadow"),_=_o("blur"),x=_o("perspective"),T=_o("aspect"),b=_o("ease"),w=_o("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...R(),yn,gn],D=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],F=()=>[yn,gn,l],I=()=>[fx,"full","auto",...F()],z=()=>[Ag,"none","subgrid",yn,gn],H=()=>["auto",{span:["full",Ag,yn,gn]},Ag,yn,gn],Y=()=>[Ag,"auto",yn,gn],Z=()=>["auto","min","max","fr",yn,gn],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...F()],K=()=>[fx,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],$=()=>[i,yn,gn],ce=()=>[...R(),sG,iG,{position:[yn,gn]}],q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ue=()=>["auto","cover","contain",yle,ple,{size:[yn,gn]}],Ae=()=>[OP,VT,F0],Ne=()=>["","none","full",c,yn,gn],we=()=>["",Oi,VT,F0],pt=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ue=()=>[Oi,OP,sG,iG],Ve=()=>["","none",_,yn,gn],Be=()=>["none",Oi,yn,gn],Mt=()=>["none",Oi,yn,gn],ct=()=>[Oi,yn,gn],Et=()=>[fx,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[$p],breakpoint:[$p],color:[cle],container:[$p],"drop-shadow":[$p],ease:["in","out","in-out"],font:[hle],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[$p],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[$p],shadow:[$p],spacing:["px",Oi],text:[$p],"text-shadow":[$p],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fx,gn,yn,T]}],container:["container"],columns:[{columns:[Oi,gn,yn,o]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Ag,"auto",yn,gn]}],basis:[{basis:[fx,"full","auto",o,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Oi,fx,"auto","initial","none",gn]}],grow:[{grow:["",Oi,yn,gn]}],shrink:[{shrink:["",Oi,yn,gn]}],order:[{order:[Ag,"first","last","none",yn,gn]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[o,"screen",...K()]}],"min-w":[{"min-w":[o,"screen","none",...K()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",t,VT,F0]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,yn,LP]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",OP,gn]}],"font-family":[{font:[gle,gn,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,yn,gn]}],"line-clamp":[{"line-clamp":[Oi,"none",yn,LP]}],leading:[{leading:[r,...F()]}],"list-image":[{"list-image":["none",yn,gn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",yn,gn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Oi,"from-font","auto",yn,F0]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[Oi,"auto",yn,gn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yn,gn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yn,gn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:q()}],"bg-size":[{bg:ue()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ag,yn,gn],radial:["",yn,gn],conic:[Ag,yn,gn]},vle,mle]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:Ae()}],"gradient-via-pos":[{via:Ae()}],"gradient-to-pos":[{to:Ae()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:Ne()}],"rounded-s":[{"rounded-s":Ne()}],"rounded-e":[{"rounded-e":Ne()}],"rounded-t":[{"rounded-t":Ne()}],"rounded-r":[{"rounded-r":Ne()}],"rounded-b":[{"rounded-b":Ne()}],"rounded-l":[{"rounded-l":Ne()}],"rounded-ss":[{"rounded-ss":Ne()}],"rounded-se":[{"rounded-se":Ne()}],"rounded-ee":[{"rounded-ee":Ne()}],"rounded-es":[{"rounded-es":Ne()}],"rounded-tl":[{"rounded-tl":Ne()}],"rounded-tr":[{"rounded-tr":Ne()}],"rounded-br":[{"rounded-br":Ne()}],"rounded-bl":[{"rounded-bl":Ne()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pt(),"hidden","none"]}],"divide-style":[{divide:[...pt(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Oi,yn,gn]}],"outline-w":[{outline:["",Oi,VT,F0]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",d,DA,NA]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",h,DA,NA]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[Oi,F0]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",m,DA,NA]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[Oi,yn,gn]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Oi]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ue()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":Ue()}],"mask-image-t-to-pos":[{"mask-t-to":Ue()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":Ue()}],"mask-image-r-to-pos":[{"mask-r-to":Ue()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":Ue()}],"mask-image-b-to-pos":[{"mask-b-to":Ue()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":Ue()}],"mask-image-l-to-pos":[{"mask-l-to":Ue()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":Ue()}],"mask-image-x-to-pos":[{"mask-x-to":Ue()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":Ue()}],"mask-image-y-to-pos":[{"mask-y-to":Ue()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[yn,gn]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ue()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[Oi]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ue()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:q()}],"mask-size":[{mask:ue()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",yn,gn]}],filter:[{filter:["","none",yn,gn]}],blur:[{blur:Ve()}],brightness:[{brightness:[Oi,yn,gn]}],contrast:[{contrast:[Oi,yn,gn]}],"drop-shadow":[{"drop-shadow":["","none",v,DA,NA]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",Oi,yn,gn]}],"hue-rotate":[{"hue-rotate":[Oi,yn,gn]}],invert:[{invert:["",Oi,yn,gn]}],saturate:[{saturate:[Oi,yn,gn]}],sepia:[{sepia:["",Oi,yn,gn]}],"backdrop-filter":[{"backdrop-filter":["","none",yn,gn]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[Oi,yn,gn]}],"backdrop-contrast":[{"backdrop-contrast":[Oi,yn,gn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Oi,yn,gn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Oi,yn,gn]}],"backdrop-invert":[{"backdrop-invert":["",Oi,yn,gn]}],"backdrop-opacity":[{"backdrop-opacity":[Oi,yn,gn]}],"backdrop-saturate":[{"backdrop-saturate":[Oi,yn,gn]}],"backdrop-sepia":[{"backdrop-sepia":["",Oi,yn,gn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",yn,gn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Oi,"initial",yn,gn]}],ease:[{ease:["linear","initial",b,yn,gn]}],delay:[{delay:[Oi,yn,gn]}],animate:[{animate:["none",w,yn,gn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,yn,gn]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:Be()}],"rotate-x":[{"rotate-x":Be()}],"rotate-y":[{"rotate-y":Be()}],"rotate-z":[{"rotate-z":Be()}],scale:[{scale:Mt()}],"scale-x":[{"scale-x":Mt()}],"scale-y":[{"scale-y":Mt()}],"scale-z":[{"scale-z":Mt()}],"scale-3d":["scale-3d"],skew:[{skew:ct()}],"skew-x":[{"skew-x":ct()}],"skew-y":[{"skew-y":ct()}],transform:[{transform:[yn,gn,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Et()}],"translate-x":[{"translate-x":Et()}],"translate-y":[{"translate-y":Et()}],"translate-z":[{"translate-z":Et()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yn,gn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yn,gn]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[Oi,VT,F0,LP]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Sle=nle(ble);function bl(...i){return Sle(t9(i))}const Tle=n9("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),nm=P.forwardRef(({className:i,variant:e,size:t,asChild:n=!1,...s},r)=>{const a=n?Ioe:"button";return B.jsx(a,{className:bl(Tle({variant:e,size:t,className:i})),ref:r,...s})});nm.displayName="Button";function ca(i,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(i?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function iw(i,e=[]){let t=[];function n(r,a){const o=P.createContext(a),l=t.length;t=[...t,a];const c=h=>{const{scope:m,children:v,..._}=h,x=m?.[i]?.[l]||o,T=P.useMemo(()=>_,Object.values(_));return B.jsx(x.Provider,{value:T,children:v})};c.displayName=r+"Provider";function d(h,m){const v=m?.[i]?.[l]||o,_=P.useContext(v);if(_)return _;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${r}\``)}return[c,d]}const s=()=>{const r=t.map(a=>P.createContext(a));return function(o){const l=o?.[i]||r;return P.useMemo(()=>({[`__scope${i}`]:{...o,[i]:l}}),[o,l])}};return s.scopeName=i,[n,Ele(s,...e)]}function Ele(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const h=l(r)[`__scope${c}`];return{...o,...h}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var wle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],h9=wle.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function Mle(i,e){i&&h_.flushSync(()=>i.dispatchEvent(e))}function au(i){const e=P.useRef(i);return P.useEffect(()=>{e.current=i}),P.useMemo(()=>(...t)=>e.current?.(...t),[])}function Ale(i,e=globalThis?.document){const t=au(i);P.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var Cle="DismissableLayer",kU="dismissableLayer.update",Rle="dismissableLayer.pointerDownOutside",Nle="dismissableLayer.focusOutside",rG,p9=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sI=P.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:a,onDismiss:o,...l}=i,c=P.useContext(p9),[d,h]=P.useState(null),m=d?.ownerDocument??globalThis?.document,[,v]=P.useState({}),_=Bc(e,L=>h(L)),x=Array.from(c.layers),[T]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(T),w=d?x.indexOf(d):-1,M=c.layersWithOutsidePointerEventsDisabled.size>0,R=w>=b,N=Ole(L=>{const F=L.target,I=[...c.branches].some(z=>z.contains(F));!R||I||(s?.(L),a?.(L),L.defaultPrevented||o?.())},m),D=Lle(L=>{const F=L.target;[...c.branches].some(z=>z.contains(F))||(r?.(L),a?.(L),L.defaultPrevented||o?.())},m);return Ale(L=>{w===c.layers.size-1&&(n?.(L),!L.defaultPrevented&&o&&(L.preventDefault(),o()))},m),P.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(rG=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),aG(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=rG)}},[d,m,t,c]),P.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),aG())},[d,c]),P.useEffect(()=>{const L=()=>v({});return document.addEventListener(kU,L),()=>document.removeEventListener(kU,L)},[]),B.jsx(h9.div,{...l,ref:_,style:{pointerEvents:M?R?"auto":"none":void 0,...i.style},onFocusCapture:ca(i.onFocusCapture,D.onFocusCapture),onBlurCapture:ca(i.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ca(i.onPointerDownCapture,N.onPointerDownCapture)})});sI.displayName=Cle;var Dle="DismissableLayerBranch",Ple=P.forwardRef((i,e)=>{const t=P.useContext(p9),n=P.useRef(null),s=Bc(e,n);return P.useEffect(()=>{const r=n.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),B.jsx(h9.div,{...i,ref:s})});Ple.displayName=Dle;function Ole(i,e=globalThis?.document){const t=au(i),n=P.useRef(!1),s=P.useRef(()=>{});return P.useEffect(()=>{const r=o=>{if(o.target&&!n.current){let l=function(){m9(Rle,t,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function Lle(i,e=globalThis?.document){const t=au(i),n=P.useRef(!1);return P.useEffect(()=>{const s=r=>{r.target&&!n.current&&m9(Nle,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function aG(){const i=new CustomEvent(kU);document.dispatchEvent(i)}function m9(i,e,t,{discrete:n}){const s=t.originalEvent.target,r=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(i,e,{once:!0}),n?Mle(s,r):s.dispatchEvent(r)}var UP=0;function Ule(){P.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??oG()),document.body.insertAdjacentElement("beforeend",i[1]??oG()),UP++,()=>{UP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),UP--}},[])}function oG(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Ble=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ile=Ble.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),BP="focusScope.autoFocusOnMount",IP="focusScope.autoFocusOnUnmount",lG={bubbles:!1,cancelable:!0},Fle="FocusScope",g9=P.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...a}=i,[o,l]=P.useState(null),c=au(s),d=au(r),h=P.useRef(null),m=Bc(e,x=>l(x)),v=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(n){let x=function(M){if(v.paused||!o)return;const R=M.target;o.contains(R)?h.current=R:Fg(h.current,{select:!0})},T=function(M){if(v.paused||!o)return;const R=M.relatedTarget;R!==null&&(o.contains(R)||Fg(h.current,{select:!0}))},b=function(M){if(document.activeElement===document.body)for(const N of M)N.removedNodes.length>0&&Fg(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",T);const w=new MutationObserver(b);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",T),w.disconnect()}}},[n,o,v.paused]),P.useEffect(()=>{if(o){uG.add(v);const x=document.activeElement;if(!o.contains(x)){const b=new CustomEvent(BP,lG);o.addEventListener(BP,c),o.dispatchEvent(b),b.defaultPrevented||(zle(jle(y9(o)),{select:!0}),document.activeElement===x&&Fg(o))}return()=>{o.removeEventListener(BP,c),setTimeout(()=>{const b=new CustomEvent(IP,lG);o.addEventListener(IP,d),o.dispatchEvent(b),b.defaultPrevented||Fg(x??document.body,{select:!0}),o.removeEventListener(IP,d),uG.remove(v)},0)}}},[o,c,d,v]);const _=P.useCallback(x=>{if(!t&&!n||v.paused)return;const T=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,b=document.activeElement;if(T&&b){const w=x.currentTarget,[M,R]=Vle(w);M&&R?!x.shiftKey&&b===R?(x.preventDefault(),t&&Fg(M,{select:!0})):x.shiftKey&&b===M&&(x.preventDefault(),t&&Fg(R,{select:!0})):b===w&&x.preventDefault()}},[t,n,v.paused]);return B.jsx(Ile.div,{tabIndex:-1,...a,ref:m,onKeyDown:_})});g9.displayName=Fle;function zle(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(Fg(n,{select:e}),document.activeElement!==t)return}function Vle(i){const e=y9(i),t=cG(e,i),n=cG(e.reverse(),i);return[t,n]}function y9(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function cG(i,e){for(const t of i)if(!kle(t,{upTo:e}))return t}function kle(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function Gle(i){return i instanceof HTMLInputElement&&"select"in i}function Fg(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&Gle(i)&&e&&i.select()}}var uG=Hle();function Hle(){let i=[];return{add(e){const t=i[0];e!==t&&t?.pause(),i=dG(i,e),i.unshift(e)},remove(e){i=dG(i,e),i[0]?.resume()}}}function dG(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function jle(i){return i.filter(e=>e.tagName!=="A")}var pu=globalThis?.document?P.useLayoutEffect:()=>{},$le=$N[" useId ".trim().toString()]||(()=>{}),Wle=0;function rI(i){const[e,t]=P.useState($le());return pu(()=>{t(n=>n??String(Wle++))},[i]),i||(e?`radix-${e}`:"")}const qle=["top","right","bottom","left"],cy=Math.min,ju=Math.max,VR=Math.round,PA=Math.floor,$h=i=>({x:i,y:i}),Xle={left:"right",right:"left",bottom:"top",top:"bottom"},Yle={start:"end",end:"start"};function GU(i,e,t){return ju(i,cy(e,t))}function Em(i,e){return typeof i=="function"?i(e):i}function wm(i){return i.split("-")[0]}function fS(i){return i.split("-")[1]}function aI(i){return i==="x"?"y":"x"}function oI(i){return i==="y"?"height":"width"}const Kle=new Set(["top","bottom"]);function Gh(i){return Kle.has(wm(i))?"y":"x"}function lI(i){return aI(Gh(i))}function Zle(i,e,t){t===void 0&&(t=!1);const n=fS(i),s=lI(i),r=oI(s);let a=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=kR(a)),[a,kR(a)]}function Qle(i){const e=kR(i);return[HU(i),e,HU(e)]}function HU(i){return i.replace(/start|end/g,e=>Yle[e])}const fG=["left","right"],hG=["right","left"],Jle=["top","bottom"],ece=["bottom","top"];function tce(i,e,t){switch(i){case"top":case"bottom":return t?e?hG:fG:e?fG:hG;case"left":case"right":return e?Jle:ece;default:return[]}}function nce(i,e,t,n){const s=fS(i);let r=tce(wm(i),t==="start",n);return s&&(r=r.map(a=>a+"-"+s),e&&(r=r.concat(r.map(HU)))),r}function kR(i){return i.replace(/left|right|bottom|top/g,e=>Xle[e])}function ice(i){return{top:0,right:0,bottom:0,left:0,...i}}function v9(i){return typeof i!="number"?ice(i):{top:i,right:i,bottom:i,left:i}}function GR(i){const{x:e,y:t,width:n,height:s}=i;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function pG(i,e,t){let{reference:n,floating:s}=i;const r=Gh(e),a=lI(e),o=oI(a),l=wm(e),c=r==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[o]/2-s[o]/2;let v;switch(l){case"top":v={x:d,y:n.y-s.height};break;case"bottom":v={x:d,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:h};break;case"left":v={x:n.x-s.width,y:h};break;default:v={x:n.x,y:n.y}}switch(fS(e)){case"start":v[a]-=m*(t&&c?-1:1);break;case"end":v[a]+=m*(t&&c?-1:1);break}return v}const sce=async(i,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:a}=t,o=r.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:i,floating:e,strategy:s}),{x:d,y:h}=pG(c,n,l),m=n,v={},_=0;for(let x=0;x<o.length;x++){const{name:T,fn:b}=o[x],{x:w,y:M,data:R,reset:N}=await b({x:d,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:v,rects:c,platform:a,elements:{reference:i,floating:e}});d=w??d,h=M??h,v={...v,[T]:{...v[T],...R}},N&&_<=50&&(_++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(c=N.rects===!0?await a.getElementRects({reference:i,floating:e,strategy:s}):N.rects),{x:d,y:h}=pG(c,m,l)),x=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:v}};async function hE(i,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:r,rects:a,elements:o,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:v=0}=Em(e,i),_=v9(v),T=o[m?h==="floating"?"reference":"floating":h],b=GR(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(T)))==null||t?T:T.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),w=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,M=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),R=await(r.isElement==null?void 0:r.isElement(M))?await(r.getScale==null?void 0:r.getScale(M))||{x:1,y:1}:{x:1,y:1},N=GR(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:M,strategy:l}):w);return{top:(b.top-N.top+_.top)/R.y,bottom:(N.bottom-b.bottom+_.bottom)/R.y,left:(b.left-N.left+_.left)/R.x,right:(N.right-b.right+_.right)/R.x}}const rce=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:s,rects:r,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:d=0}=Em(i,e)||{};if(c==null)return{};const h=v9(d),m={x:t,y:n},v=lI(s),_=oI(v),x=await a.getDimensions(c),T=v==="y",b=T?"top":"left",w=T?"bottom":"right",M=T?"clientHeight":"clientWidth",R=r.reference[_]+r.reference[v]-m[v]-r.floating[_],N=m[v]-r.reference[v],D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let L=D?D[M]:0;(!L||!await(a.isElement==null?void 0:a.isElement(D)))&&(L=o.floating[M]||r.floating[_]);const F=R/2-N/2,I=L/2-x[_]/2-1,z=cy(h[b],I),H=cy(h[w],I),Y=z,Z=L-x[_]-H,se=L/2-x[_]/2+F,oe=GU(Y,se,Z),G=!l.arrow&&fS(s)!=null&&se!==oe&&r.reference[_]/2-(se<Y?z:H)-x[_]/2<0,K=G?se<Y?se-Y:se-Z:0;return{[v]:m[v]+K,data:{[v]:oe,centerOffset:se-oe-K,...G&&{alignmentOffset:K}},reset:G}}}),ace=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:s,middlewareData:r,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:x=!0,...T}=Em(i,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const b=wm(s),w=Gh(o),M=wm(o)===o,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),N=m||(M||!x?[kR(o)]:Qle(o)),D=_!=="none";!m&&D&&N.push(...nce(o,x,_,R));const L=[o,...N],F=await hE(e,T),I=[];let z=((n=r.flip)==null?void 0:n.overflows)||[];if(d&&I.push(F[b]),h){const se=Zle(s,a,R);I.push(F[se[0]],F[se[1]])}if(z=[...z,{placement:s,overflows:I}],!I.every(se=>se<=0)){var H,Y;const se=(((H=r.flip)==null?void 0:H.index)||0)+1,oe=L[se];if(oe&&(!(h==="alignment"?w!==Gh(oe):!1)||z.every($=>Gh($.placement)===w?$.overflows[0]>0:!0)))return{data:{index:se,overflows:z},reset:{placement:oe}};let G=(Y=z.filter(K=>K.overflows[0]<=0).sort((K,$)=>K.overflows[1]-$.overflows[1])[0])==null?void 0:Y.placement;if(!G)switch(v){case"bestFit":{var Z;const K=(Z=z.filter($=>{if(D){const ce=Gh($.placement);return ce===w||ce==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ce=>ce>0).reduce((ce,q)=>ce+q,0)]).sort(($,ce)=>$[1]-ce[1])[0])==null?void 0:Z[0];K&&(G=K);break}case"initialPlacement":G=o;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function mG(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function gG(i){return qle.some(e=>i[e]>=0)}const oce=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=Em(i,e);switch(n){case"referenceHidden":{const r=await hE(e,{...s,elementContext:"reference"}),a=mG(r,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:gG(a)}}}case"escaped":{const r=await hE(e,{...s,altBoundary:!0}),a=mG(r,t.floating);return{data:{escapedOffsets:a,escaped:gG(a)}}}default:return{}}}}},_9=new Set(["left","top"]);async function lce(i,e){const{placement:t,platform:n,elements:s}=i,r=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=wm(t),o=fS(t),l=Gh(t)==="y",c=_9.has(a)?-1:1,d=r&&l?-1:1,h=Em(e,i);let{mainAxis:m,crossAxis:v,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof _=="number"&&(v=o==="end"?_*-1:_),l?{x:v*d,y:m*c}:{x:m*c,y:v*d}}const cce=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:s,y:r,placement:a,middlewareData:o}=e,l=await lce(e,i);return a===((t=o.offset)==null?void 0:t.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:a}}}}},uce=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:o={fn:T=>{let{x:b,y:w}=T;return{x:b,y:w}}},...l}=Em(i,e),c={x:t,y:n},d=await hE(e,l),h=Gh(wm(s)),m=aI(h);let v=c[m],_=c[h];if(r){const T=m==="y"?"top":"left",b=m==="y"?"bottom":"right",w=v+d[T],M=v-d[b];v=GU(w,v,M)}if(a){const T=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=_+d[T],M=_-d[b];_=GU(w,_,M)}const x=o.fn({...e,[m]:v,[h]:_});return{...x,data:{x:x.x-t,y:x.y-n,enabled:{[m]:r,[h]:a}}}}}},dce=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:s,rects:r,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Em(i,e),d={x:t,y:n},h=Gh(s),m=aI(h);let v=d[m],_=d[h];const x=Em(o,e),T=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const M=m==="y"?"height":"width",R=r.reference[m]-r.floating[M]+T.mainAxis,N=r.reference[m]+r.reference[M]-T.mainAxis;v<R?v=R:v>N&&(v=N)}if(c){var b,w;const M=m==="y"?"width":"height",R=_9.has(wm(s)),N=r.reference[h]-r.floating[M]+(R&&((b=a.offset)==null?void 0:b[h])||0)+(R?0:T.crossAxis),D=r.reference[h]+r.reference[M]+(R?0:((w=a.offset)==null?void 0:w[h])||0)-(R?T.crossAxis:0);_<N?_=N:_>D&&(_=D)}return{[m]:v,[h]:_}}}},fce=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:s,rects:r,platform:a,elements:o}=e,{apply:l=()=>{},...c}=Em(i,e),d=await hE(e,c),h=wm(s),m=fS(s),v=Gh(s)==="y",{width:_,height:x}=r.floating;let T,b;h==="top"||h==="bottom"?(T=h,b=m===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(b=h,T=m==="end"?"top":"bottom");const w=x-d.top-d.bottom,M=_-d.left-d.right,R=cy(x-d[T],w),N=cy(_-d[b],M),D=!e.middlewareData.shift;let L=R,F=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(F=M),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(L=w),D&&!m){const z=ju(d.left,0),H=ju(d.right,0),Y=ju(d.top,0),Z=ju(d.bottom,0);v?F=_-2*(z!==0||H!==0?z+H:ju(d.left,d.right)):L=x-2*(Y!==0||Z!==0?Y+Z:ju(d.top,d.bottom))}await l({...e,availableWidth:F,availableHeight:L});const I=await a.getDimensions(o.floating);return _!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}};function qN(){return typeof window<"u"}function hS(i){return x9(i)?(i.nodeName||"").toLowerCase():"#document"}function Yu(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function fp(i){var e;return(e=(x9(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function x9(i){return qN()?i instanceof Node||i instanceof Yu(i).Node:!1}function Ff(i){return qN()?i instanceof Element||i instanceof Yu(i).Element:!1}function ip(i){return qN()?i instanceof HTMLElement||i instanceof Yu(i).HTMLElement:!1}function yG(i){return!qN()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Yu(i).ShadowRoot}const hce=new Set(["inline","contents"]);function sw(i){const{overflow:e,overflowX:t,overflowY:n,display:s}=zf(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!hce.has(s)}const pce=new Set(["table","td","th"]);function mce(i){return pce.has(hS(i))}const gce=[":popover-open",":modal"];function XN(i){return gce.some(e=>{try{return i.matches(e)}catch{return!1}})}const yce=["transform","translate","scale","rotate","perspective"],vce=["transform","translate","scale","rotate","perspective","filter"],_ce=["paint","layout","strict","content"];function cI(i){const e=uI(),t=Ff(i)?zf(i):i;return yce.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||vce.some(n=>(t.willChange||"").includes(n))||_ce.some(n=>(t.contain||"").includes(n))}function xce(i){let e=uy(i);for(;ip(e)&&!Lb(e);){if(cI(e))return e;if(XN(e))return null;e=uy(e)}return null}function uI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bce=new Set(["html","body","#document"]);function Lb(i){return bce.has(hS(i))}function zf(i){return Yu(i).getComputedStyle(i)}function YN(i){return Ff(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function uy(i){if(hS(i)==="html")return i;const e=i.assignedSlot||i.parentNode||yG(i)&&i.host||fp(i);return yG(e)?e.host:e}function b9(i){const e=uy(i);return Lb(e)?i.ownerDocument?i.ownerDocument.body:i.body:ip(e)&&sw(e)?e:b9(e)}function pE(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=b9(i),r=s===((n=i.ownerDocument)==null?void 0:n.body),a=Yu(s);if(r){const o=jU(a);return e.concat(a,a.visualViewport||[],sw(s)?s:[],o&&t?pE(o):[])}return e.concat(s,pE(s,[],t))}function jU(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function S9(i){const e=zf(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=ip(i),r=s?i.offsetWidth:t,a=s?i.offsetHeight:n,o=VR(t)!==r||VR(n)!==a;return o&&(t=r,n=a),{width:t,height:n,$:o}}function dI(i){return Ff(i)?i:i.contextElement}function _b(i){const e=dI(i);if(!ip(e))return $h(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:r}=S9(e);let a=(r?VR(t.width):t.width)/n,o=(r?VR(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Sce=$h(0);function T9(i){const e=Yu(i);return!uI()||!e.visualViewport?Sce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Tce(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Yu(i)?!1:e}function Hv(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=i.getBoundingClientRect(),r=dI(i);let a=$h(1);e&&(n?Ff(n)&&(a=_b(n)):a=_b(i));const o=Tce(r,t,n)?T9(r):$h(0);let l=(s.left+o.x)/a.x,c=(s.top+o.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(r){const m=Yu(r),v=n&&Ff(n)?Yu(n):n;let _=m,x=jU(_);for(;x&&n&&v!==_;){const T=_b(x),b=x.getBoundingClientRect(),w=zf(x),M=b.left+(x.clientLeft+parseFloat(w.paddingLeft))*T.x,R=b.top+(x.clientTop+parseFloat(w.paddingTop))*T.y;l*=T.x,c*=T.y,d*=T.x,h*=T.y,l+=M,c+=R,_=Yu(x),x=jU(_)}}return GR({width:d,height:h,x:l,y:c})}function KN(i,e){const t=YN(i).scrollLeft;return e?e.left+t:Hv(fp(i)).left+t}function E9(i,e){const t=i.getBoundingClientRect(),n=t.left+e.scrollLeft-KN(i,t),s=t.top+e.scrollTop;return{x:n,y:s}}function Ece(i){let{elements:e,rect:t,offsetParent:n,strategy:s}=i;const r=s==="fixed",a=fp(n),o=e?XN(e.floating):!1;if(n===a||o&&r)return t;let l={scrollLeft:0,scrollTop:0},c=$h(1);const d=$h(0),h=ip(n);if((h||!h&&!r)&&((hS(n)!=="body"||sw(a))&&(l=YN(n)),ip(n))){const v=Hv(n);c=_b(n),d.x=v.x+n.clientLeft,d.y=v.y+n.clientTop}const m=a&&!h&&!r?E9(a,l):$h(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:t.y*c.y-l.scrollTop*c.y+d.y+m.y}}function wce(i){return Array.from(i.getClientRects())}function Mce(i){const e=fp(i),t=YN(i),n=i.ownerDocument.body,s=ju(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),r=ju(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+KN(i);const o=-t.scrollTop;return zf(n).direction==="rtl"&&(a+=ju(e.clientWidth,n.clientWidth)-s),{width:s,height:r,x:a,y:o}}const vG=25;function Ace(i,e){const t=Yu(i),n=fp(i),s=t.visualViewport;let r=n.clientWidth,a=n.clientHeight,o=0,l=0;if(s){r=s.width,a=s.height;const d=uI();(!d||d&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const c=KN(n);if(c<=0){const d=n.ownerDocument,h=d.body,m=getComputedStyle(h),v=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,_=Math.abs(n.clientWidth-h.clientWidth-v);_<=vG&&(r-=_)}else c<=vG&&(r+=c);return{width:r,height:a,x:o,y:l}}const Cce=new Set(["absolute","fixed"]);function Rce(i,e){const t=Hv(i,!0,e==="fixed"),n=t.top+i.clientTop,s=t.left+i.clientLeft,r=ip(i)?_b(i):$h(1),a=i.clientWidth*r.x,o=i.clientHeight*r.y,l=s*r.x,c=n*r.y;return{width:a,height:o,x:l,y:c}}function _G(i,e,t){let n;if(e==="viewport")n=Ace(i,t);else if(e==="document")n=Mce(fp(i));else if(Ff(e))n=Rce(e,t);else{const s=T9(i);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return GR(n)}function w9(i,e){const t=uy(i);return t===e||!Ff(t)||Lb(t)?!1:zf(t).position==="fixed"||w9(t,e)}function Nce(i,e){const t=e.get(i);if(t)return t;let n=pE(i,[],!1).filter(o=>Ff(o)&&hS(o)!=="body"),s=null;const r=zf(i).position==="fixed";let a=r?uy(i):i;for(;Ff(a)&&!Lb(a);){const o=zf(a),l=cI(a);!l&&o.position==="fixed"&&(s=null),(r?!l&&!s:!l&&o.position==="static"&&!!s&&Cce.has(s.position)||sw(a)&&!l&&w9(i,a))?n=n.filter(d=>d!==a):s=o,a=uy(a)}return e.set(i,n),n}function Dce(i){let{element:e,boundary:t,rootBoundary:n,strategy:s}=i;const a=[...t==="clippingAncestors"?XN(e)?[]:Nce(e,this._c):[].concat(t),n],o=a[0],l=a.reduce((c,d)=>{const h=_G(e,d,s);return c.top=ju(h.top,c.top),c.right=cy(h.right,c.right),c.bottom=cy(h.bottom,c.bottom),c.left=ju(h.left,c.left),c},_G(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Pce(i){const{width:e,height:t}=S9(i);return{width:e,height:t}}function Oce(i,e,t){const n=ip(e),s=fp(e),r=t==="fixed",a=Hv(i,!0,r,e);let o={scrollLeft:0,scrollTop:0};const l=$h(0);function c(){l.x=KN(s)}if(n||!n&&!r)if((hS(e)!=="body"||sw(s))&&(o=YN(e)),n){const v=Hv(e,!0,r,e);l.x=v.x+e.clientLeft,l.y=v.y+e.clientTop}else s&&c();r&&!n&&s&&c();const d=s&&!n&&!r?E9(s,o):$h(0),h=a.left+o.scrollLeft-l.x-d.x,m=a.top+o.scrollTop-l.y-d.y;return{x:h,y:m,width:a.width,height:a.height}}function FP(i){return zf(i).position==="static"}function xG(i,e){if(!ip(i)||zf(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return fp(i)===t&&(t=t.ownerDocument.body),t}function M9(i,e){const t=Yu(i);if(XN(i))return t;if(!ip(i)){let s=uy(i);for(;s&&!Lb(s);){if(Ff(s)&&!FP(s))return s;s=uy(s)}return t}let n=xG(i,e);for(;n&&mce(n)&&FP(n);)n=xG(n,e);return n&&Lb(n)&&FP(n)&&!cI(n)?t:n||xce(i)||t}const Lce=async function(i){const e=this.getOffsetParent||M9,t=this.getDimensions,n=await t(i.floating);return{reference:Oce(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Uce(i){return zf(i).direction==="rtl"}const Bce={convertOffsetParentRelativeRectToViewportRelativeRect:Ece,getDocumentElement:fp,getClippingRect:Dce,getOffsetParent:M9,getElementRects:Lce,getClientRects:wce,getDimensions:Pce,getScale:_b,isElement:Ff,isRTL:Uce};function A9(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function Ice(i,e){let t=null,n;const s=fp(i);function r(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),r();const c=i.getBoundingClientRect(),{left:d,top:h,width:m,height:v}=c;if(o||e(),!m||!v)return;const _=PA(h),x=PA(s.clientWidth-(d+m)),T=PA(s.clientHeight-(h+v)),b=PA(d),M={rootMargin:-_+"px "+-x+"px "+-T+"px "+-b+"px",threshold:ju(0,cy(1,l))||1};let R=!0;function N(D){const L=D[0].intersectionRatio;if(L!==l){if(!R)return a();L?a(!1,L):n=setTimeout(()=>{a(!1,1e-7)},1e3)}L===1&&!A9(c,i.getBoundingClientRect())&&a(),R=!1}try{t=new IntersectionObserver(N,{...M,root:s.ownerDocument})}catch{t=new IntersectionObserver(N,M)}t.observe(i)}return a(!0),r}function Fce(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=dI(i),d=s||r?[...c?pE(c):[],...pE(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",t,{passive:!0}),r&&b.addEventListener("resize",t)});const h=c&&o?Ice(c,t):null;let m=-1,v=null;a&&(v=new ResizeObserver(b=>{let[w]=b;w&&w.target===c&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var M;(M=v)==null||M.observe(e)})),t()}),c&&!l&&v.observe(c),v.observe(e));let _,x=l?Hv(i):null;l&&T();function T(){const b=Hv(i);x&&!A9(x,b)&&t(),x=b,_=requestAnimationFrame(T)}return t(),()=>{var b;d.forEach(w=>{s&&w.removeEventListener("scroll",t),r&&w.removeEventListener("resize",t)}),h?.(),(b=v)==null||b.disconnect(),v=null,l&&cancelAnimationFrame(_)}}const zce=cce,Vce=uce,kce=ace,Gce=fce,Hce=oce,bG=rce,jce=dce,$ce=(i,e,t)=>{const n=new Map,s={platform:Bce,...t},r={...s.platform,_c:n};return sce(i,e,{...s,platform:r})};var Wce=typeof document<"u",qce=function(){},yR=Wce?P.useLayoutEffect:qce;function HR(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,s;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!HR(i[n],e[n]))return!1;return!0}if(s=Object.keys(i),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const r=s[n];if(!(r==="_owner"&&i.$$typeof)&&!HR(i[r],e[r]))return!1}return!0}return i!==i&&e!==e}function C9(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function SG(i,e){const t=C9(i);return Math.round(e*t)/t}function zP(i){const e=P.useRef(i);return yR(()=>{e.current=i}),e}function Xce(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:r,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=i,[d,h]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=P.useState(n);HR(m,n)||v(n);const[_,x]=P.useState(null),[T,b]=P.useState(null),w=P.useCallback($=>{$!==D.current&&(D.current=$,x($))},[]),M=P.useCallback($=>{$!==L.current&&(L.current=$,b($))},[]),R=r||_,N=a||T,D=P.useRef(null),L=P.useRef(null),F=P.useRef(d),I=l!=null,z=zP(l),H=zP(s),Y=zP(c),Z=P.useCallback(()=>{if(!D.current||!L.current)return;const $={placement:e,strategy:t,middleware:m};H.current&&($.platform=H.current),$ce(D.current,L.current,$).then(ce=>{const q={...ce,isPositioned:Y.current!==!1};se.current&&!HR(F.current,q)&&(F.current=q,h_.flushSync(()=>{h(q)}))})},[m,e,t,H,Y]);yR(()=>{c===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[c]);const se=P.useRef(!1);yR(()=>(se.current=!0,()=>{se.current=!1}),[]),yR(()=>{if(R&&(D.current=R),N&&(L.current=N),R&&N){if(z.current)return z.current(R,N,Z);Z()}},[R,N,Z,z,I]);const oe=P.useMemo(()=>({reference:D,floating:L,setReference:w,setFloating:M}),[w,M]),G=P.useMemo(()=>({reference:R,floating:N}),[R,N]),K=P.useMemo(()=>{const $={position:t,left:0,top:0};if(!G.floating)return $;const ce=SG(G.floating,d.x),q=SG(G.floating,d.y);return o?{...$,transform:"translate("+ce+"px, "+q+"px)",...C9(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ce,top:q}},[t,o,G.floating,d.x,d.y]);return P.useMemo(()=>({...d,update:Z,refs:oe,elements:G,floatingStyles:K}),[d,Z,oe,G,K])}const Yce=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:s}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?bG({element:n.current,padding:s}).fn(t):{}:n?bG({element:n,padding:s}).fn(t):{}}}},Kce=(i,e)=>({...zce(i),options:[i,e]}),Zce=(i,e)=>({...Vce(i),options:[i,e]}),Qce=(i,e)=>({...jce(i),options:[i,e]}),Jce=(i,e)=>({...kce(i),options:[i,e]}),eue=(i,e)=>({...Gce(i),options:[i,e]}),tue=(i,e)=>({...Hce(i),options:[i,e]}),nue=(i,e)=>({...Yce(i),options:[i,e]});var iue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sue=iue.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),rue="Arrow",R9=P.forwardRef((i,e)=>{const{children:t,width:n=10,height:s=5,...r}=i;return B.jsx(sue.svg,{...r,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:B.jsx("polygon",{points:"0,0 30,0 15,10"})})});R9.displayName=rue;var aue=R9,oue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],N9=oue.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function lue(i){const[e,t]=P.useState(void 0);return pu(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let a,o;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=i.offsetWidth,o=i.offsetHeight;t({width:a,height:o})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var fI="Popper",[D9,P9]=iw(fI),[cue,O9]=D9(fI),L9=i=>{const{__scopePopper:e,children:t}=i,[n,s]=P.useState(null);return B.jsx(cue,{scope:e,anchor:n,onAnchorChange:s,children:t})};L9.displayName=fI;var U9="PopperAnchor",B9=P.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...s}=i,r=O9(U9,t),a=P.useRef(null),o=Bc(e,a),l=P.useRef(null);return P.useEffect(()=>{const c=l.current;l.current=n?.current||a.current,c!==l.current&&r.onAnchorChange(l.current)}),n?null:B.jsx(N9.div,{...s,ref:o})});B9.displayName=U9;var hI="PopperContent",[uue,due]=D9(hI),I9=P.forwardRef((i,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:r="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:_,...x}=i,T=O9(hI,t),[b,w]=P.useState(null),M=Bc(e,Ue=>w(Ue)),[R,N]=P.useState(null),D=lue(R),L=D?.width??0,F=D?.height??0,I=n+(r!=="center"?"-"+r:""),z=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},H=Array.isArray(c)?c:[c],Y=H.length>0,Z={padding:z,boundary:H.filter(hue),altBoundary:Y},{refs:se,floatingStyles:oe,placement:G,isPositioned:K,middlewareData:$}=Xce({strategy:"fixed",placement:I,whileElementsMounted:(...Ue)=>Fce(...Ue,{animationFrame:v==="always"}),elements:{reference:T.anchor},middleware:[Kce({mainAxis:s+F,alignmentAxis:a}),l&&Zce({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Qce():void 0,...Z}),l&&Jce({...Z}),eue({...Z,apply:({elements:Ue,rects:Ve,availableWidth:Be,availableHeight:Mt})=>{const{width:ct,height:Et}=Ve.reference,le=Ue.floating.style;le.setProperty("--radix-popper-available-width",`${Be}px`),le.setProperty("--radix-popper-available-height",`${Mt}px`),le.setProperty("--radix-popper-anchor-width",`${ct}px`),le.setProperty("--radix-popper-anchor-height",`${Et}px`)}}),R&&nue({element:R,padding:o}),pue({arrowWidth:L,arrowHeight:F}),m&&tue({strategy:"referenceHidden",...Z})]}),[ce,q]=V9(G),ue=au(_);pu(()=>{K&&ue?.()},[K,ue]);const Ae=$.arrow?.x,Ne=$.arrow?.y,we=$.arrow?.centerOffset!==0,[pt,Ee]=P.useState();return pu(()=>{b&&Ee(window.getComputedStyle(b).zIndex)},[b]),B.jsx("div",{ref:se.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:K?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pt,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:B.jsx(uue,{scope:t,placedSide:ce,onArrowChange:N,arrowX:Ae,arrowY:Ne,shouldHideArrow:we,children:B.jsx(N9.div,{"data-side":ce,"data-align":q,...x,ref:M,style:{...x.style,animation:K?void 0:"none"}})})})});I9.displayName=hI;var F9="PopperArrow",fue={top:"bottom",right:"left",bottom:"top",left:"right"},z9=P.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,r=due(F9,n),a=fue[r.placedSide];return B.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:B.jsx(aue,{...s,ref:t,style:{...s.style,display:"block"}})})});z9.displayName=F9;function hue(i){return i!==null}var pue=i=>({name:"transformOrigin",options:i,fn(e){const{placement:t,rects:n,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,o=a?0:i.arrowWidth,l=a?0:i.arrowHeight,[c,d]=V9(t),h={start:"0%",center:"50%",end:"100%"}[d],m=(s.arrow?.x??0)+o/2,v=(s.arrow?.y??0)+l/2;let _="",x="";return c==="bottom"?(_=a?h:`${m}px`,x=`${-l}px`):c==="top"?(_=a?h:`${m}px`,x=`${n.floating.height+l}px`):c==="right"?(_=`${-l}px`,x=a?h:`${v}px`):c==="left"&&(_=`${n.floating.width+l}px`,x=a?h:`${v}px`),{data:{x:_,y:x}}}});function V9(i){const[e,t="center"]=i.split("-");return[e,t]}var mue=L9,k9=B9,gue=I9,yue=z9,vue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_ue=vue.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),xue="Portal",G9=P.forwardRef((i,e)=>{const{container:t,...n}=i,[s,r]=P.useState(!1);pu(()=>r(!0),[]);const a=t||s&&globalThis?.document?.body;return a?JB.createPortal(B.jsx(_ue.div,{...n,ref:e}),a):null});G9.displayName=xue;function bue(i,e){return P.useReducer((t,n)=>e[t][n]??t,i)}var g_=i=>{const{present:e,children:t}=i,n=Sue(e),s=typeof t=="function"?t({present:n.isPresent}):P.Children.only(t),r=Bc(n.ref,Tue(s));return typeof t=="function"||n.isPresent?P.cloneElement(s,{ref:r}):null};g_.displayName="Presence";function Sue(i){const[e,t]=P.useState(),n=P.useRef(null),s=P.useRef(i),r=P.useRef("none"),a=i?"mounted":"unmounted",[o,l]=bue(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const c=OA(n.current);r.current=o==="mounted"?c:"none"},[o]),pu(()=>{const c=n.current,d=s.current;if(d!==i){const m=r.current,v=OA(c);i?l("MOUNT"):v==="none"||c?.display==="none"?l("UNMOUNT"):l(d&&m!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=i}},[i,l]),pu(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=v=>{const x=OA(n.current).includes(CSS.escape(v.animationName));if(v.target===e&&x&&(l("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},m=v=>{v.target===e&&(r.current=OA(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:P.useCallback(c=>{n.current=c?getComputedStyle(c):null,t(c)},[])}}function OA(i){return i?.animationName||"none"}function Tue(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var Eue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],H9=Eue.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),wue=$N[" useInsertionEffect ".trim().toString()]||pu;function pI({prop:i,defaultProp:e,onChange:t=()=>{},caller:n}){const[s,r,a]=Mue({defaultProp:e,onChange:t}),o=i!==void 0,l=o?i:s;{const d=P.useRef(i!==void 0);P.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,n])}const c=P.useCallback(d=>{if(o){const h=Aue(d)?d(i):d;h!==i&&a.current?.(h)}else r(d)},[o,i,r,a]);return[l,c]}function Mue({defaultProp:i,onChange:e}){const[t,n]=P.useState(i),s=P.useRef(t),r=P.useRef(e);return wue(()=>{r.current=e},[e]),P.useEffect(()=>{s.current!==t&&(r.current?.(t),s.current=t)},[t,s]),[t,n,r]}function Aue(i){return typeof i=="function"}var Cue=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},hx=new WeakMap,LA=new WeakMap,UA={},VP=0,j9=function(i){return i&&(i.host||j9(i.parentNode))},Rue=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=j9(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},Nue=function(i,e,t,n){var s=Rue(e,Array.isArray(i)?i:[i]);UA[t]||(UA[t]=new WeakMap);var r=UA[t],a=[],o=new Set,l=new Set(s),c=function(h){!h||o.has(h)||(o.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var v=m.getAttribute(n),_=v!==null&&v!=="false",x=(hx.get(m)||0)+1,T=(r.get(m)||0)+1;hx.set(m,x),r.set(m,T),a.push(m),x===1&&_&&LA.set(m,!0),T===1&&m.setAttribute(t,"true"),_||m.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return d(e),o.clear(),VP++,function(){a.forEach(function(h){var m=hx.get(h)-1,v=r.get(h)-1;hx.set(h,m),r.set(h,v),m||(LA.has(h)||h.removeAttribute(n),LA.delete(h)),v||h.removeAttribute(t)}),VP--,VP||(hx=new WeakMap,hx=new WeakMap,LA=new WeakMap,UA={})}},Due=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),s=Cue(i);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Nue(n,s,t,"aria-hidden")):function(){return null}},zh=function(){return zh=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zh.apply(this,arguments)};function $9(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function pS(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(d){try{c(n.next(d))}catch(h){a(h)}}function l(d){try{c(n.throw(d))}catch(h){a(h)}}function c(d){d.done?r(d.value):s(d.value).then(o,l)}c((n=n.apply(i,e||[])).next())})}function mS(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(n=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(d){c=[6,d],s=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Pue(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),s,r=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return r}function Oue(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Pue(arguments[e]));return i}function Lue(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}var vR="right-scroll-bar-position",_R="width-before-scroll-bar",Uue="with-scroll-bars-hidden",Bue="--removed-body-scroll-bar-size";function kP(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function Iue(i,e){var t=P.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var Fue=typeof window<"u"?P.useLayoutEffect:P.useEffect,TG=new WeakMap;function zue(i,e){var t=Iue(null,function(n){return i.forEach(function(s){return kP(s,n)})});return Fue(function(){var n=TG.get(t);if(n){var s=new Set(n),r=new Set(i),a=t.current;s.forEach(function(o){r.has(o)||kP(o,null)}),r.forEach(function(o){s.has(o)||kP(o,a)})}TG.set(t,i)},[i]),t}function Vue(i){return i}function kue(i,e){e===void 0&&(e=Vue);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(r){var a=e(r,n);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(r){for(n=!0;t.length;){var a=t;t=[],a.forEach(r)}t={push:function(o){return r(o)},filter:function(){return t}}},assignMedium:function(r){n=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(r),a=t}var l=function(){var d=a;a=[],d.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(d){a.push(d),c()},filter:function(d){return a=a.filter(d),t}}}};return s}function Gue(i){i===void 0&&(i={});var e=kue(null);return e.options=zh({async:!0,ssr:!1},i),e}var W9=function(i){var e=i.sideCar,t=$9(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return P.createElement(n,zh({},t))};W9.isSideCarExport=!0;function Hue(i,e){return i.useMedium(e),W9}var q9=Gue(),GP=function(){},ZN=P.forwardRef(function(i,e){var t=P.useRef(null),n=P.useState({onScrollCapture:GP,onWheelCapture:GP,onTouchMoveCapture:GP}),s=n[0],r=n[1],a=i.forwardProps,o=i.children,l=i.className,c=i.removeScrollBar,d=i.enabled,h=i.shards,m=i.sideCar,v=i.noRelative,_=i.noIsolation,x=i.inert,T=i.allowPinchZoom,b=i.as,w=b===void 0?"div":b,M=i.gapMode,R=$9(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,D=zue([t,e]),L=zh(zh({},R),s);return P.createElement(P.Fragment,null,d&&P.createElement(N,{sideCar:q9,removeScrollBar:c,shards:h,noRelative:v,noIsolation:_,inert:x,setCallbacks:r,allowPinchZoom:!!T,lockRef:t,gapMode:M}),a?P.cloneElement(P.Children.only(o),zh(zh({},L),{ref:D})):P.createElement(w,zh({},L,{className:l,ref:D}),o))});ZN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ZN.classNames={fullWidth:_R,zeroRight:vR};var jue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $ue(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=jue();return e&&i.setAttribute("nonce",e),i}function Wue(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function que(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var Xue=function(){var i=0,e=null;return{add:function(t){i==0&&(e=$ue())&&(Wue(e,t),que(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Yue=function(){var i=Xue();return function(e,t){P.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},X9=function(){var i=Yue(),e=function(t){var n=t.styles,s=t.dynamic;return i(n,s),null};return e},Kue={left:0,top:0,right:0,gap:0},HP=function(i){return parseInt(i||"",10)||0},Zue=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],s=e[i==="padding"?"paddingRight":"marginRight"];return[HP(t),HP(n),HP(s)]},Que=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return Kue;var e=Zue(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},Jue=X9(),xb="data-scroll-locked",ede=function(i,e,t,n){var s=i.left,r=i.top,a=i.right,o=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(Uue,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(xb,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vR,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(_R,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(vR," .").concat(vR,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(_R," .").concat(_R,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(xb,`] {
    `).concat(Bue,": ").concat(o,`px;
  }
`)},EG=function(){var i=parseInt(document.body.getAttribute(xb)||"0",10);return isFinite(i)?i:0},tde=function(){P.useEffect(function(){return document.body.setAttribute(xb,(EG()+1).toString()),function(){var i=EG()-1;i<=0?document.body.removeAttribute(xb):document.body.setAttribute(xb,i.toString())}},[])},nde=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,s=n===void 0?"margin":n;tde();var r=P.useMemo(function(){return Que(s)},[s]);return P.createElement(Jue,{styles:ede(r,!e,s,t?"":"!important")})},$U=!1;if(typeof window<"u")try{var BA=Object.defineProperty({},"passive",{get:function(){return $U=!0,!0}});window.addEventListener("test",BA,BA),window.removeEventListener("test",BA,BA)}catch{$U=!1}var px=$U?{passive:!1}:!1,ide=function(i){return i.tagName==="TEXTAREA"},Y9=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!ide(i)&&t[e]==="visible")},sde=function(i){return Y9(i,"overflowY")},rde=function(i){return Y9(i,"overflowX")},wG=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=K9(i,n);if(s){var r=Z9(i,n),a=r[1],o=r[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},ade=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},ode=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},K9=function(i,e){return i==="v"?sde(e):rde(e)},Z9=function(i,e){return i==="v"?ade(e):ode(e)},lde=function(i,e){return i==="h"&&e==="rtl"?-1:1},cde=function(i,e,t,n,s){var r=lde(i,window.getComputedStyle(e).direction),a=r*n,o=t.target,l=e.contains(o),c=!1,d=a>0,h=0,m=0;do{if(!o)break;var v=Z9(i,o),_=v[0],x=v[1],T=v[2],b=x-T-r*_;(_||b)&&K9(i,o)&&(h+=b,m+=_);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(c=!0),c},IA=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},MG=function(i){return[i.deltaX,i.deltaY]},AG=function(i){return i&&"current"in i?i.current:i},ude=function(i,e){return i[0]===e[0]&&i[1]===e[1]},dde=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},fde=0,mx=[];function hde(i){var e=P.useRef([]),t=P.useRef([0,0]),n=P.useRef(),s=P.useState(fde++)[0],r=P.useState(X9)[0],a=P.useRef(i);P.useEffect(function(){a.current=i},[i]),P.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(s));var x=Lue([i.lockRef.current],(i.shards||[]).map(AG),!0).filter(Boolean);return x.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[i.inert,i.lockRef.current,i.shards]);var o=P.useCallback(function(x,T){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var b=IA(x),w=t.current,M="deltaX"in x?x.deltaX:w[0]-b[0],R="deltaY"in x?x.deltaY:w[1]-b[1],N,D=x.target,L=Math.abs(M)>Math.abs(R)?"h":"v";if("touches"in x&&L==="h"&&D.type==="range")return!1;var F=wG(L,D);if(!F)return!0;if(F?N=L:(N=L==="v"?"h":"v",F=wG(L,D)),!F)return!1;if(!n.current&&"changedTouches"in x&&(M||R)&&(n.current=N),!N)return!0;var I=n.current||N;return cde(I,T,x,I==="h"?M:R)},[]),l=P.useCallback(function(x){var T=x;if(!(!mx.length||mx[mx.length-1]!==r)){var b="deltaY"in T?MG(T):IA(T),w=e.current.filter(function(N){return N.name===T.type&&(N.target===T.target||T.target===N.shadowParent)&&ude(N.delta,b)})[0];if(w&&w.should){T.cancelable&&T.preventDefault();return}if(!w){var M=(a.current.shards||[]).map(AG).filter(Boolean).filter(function(N){return N.contains(T.target)}),R=M.length>0?o(T,M[0]):!a.current.noIsolation;R&&T.cancelable&&T.preventDefault()}}},[]),c=P.useCallback(function(x,T,b,w){var M={name:x,delta:T,target:b,should:w,shadowParent:pde(b)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(R){return R!==M})},1)},[]),d=P.useCallback(function(x){t.current=IA(x),n.current=void 0},[]),h=P.useCallback(function(x){c(x.type,MG(x),x.target,o(x,i.lockRef.current))},[]),m=P.useCallback(function(x){c(x.type,IA(x),x.target,o(x,i.lockRef.current))},[]);P.useEffect(function(){return mx.push(r),i.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,px),document.addEventListener("touchmove",l,px),document.addEventListener("touchstart",d,px),function(){mx=mx.filter(function(x){return x!==r}),document.removeEventListener("wheel",l,px),document.removeEventListener("touchmove",l,px),document.removeEventListener("touchstart",d,px)}},[]);var v=i.removeScrollBar,_=i.inert;return P.createElement(P.Fragment,null,_?P.createElement(r,{styles:dde(s)}):null,v?P.createElement(nde,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function pde(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const mde=Hue(q9,hde);var Q9=P.forwardRef(function(i,e){return P.createElement(ZN,zh({},i,{ref:e,sideCar:mde}))});Q9.classNames=ZN.classNames;var QN="Popover",[J9]=iw(QN,[P9]),rw=P9(),[gde,$y]=J9(QN),e7=i=>{const{__scopePopover:e,children:t,open:n,defaultOpen:s,onOpenChange:r,modal:a=!1}=i,o=rw(e),l=P.useRef(null),[c,d]=P.useState(!1),[h,m]=pI({prop:n,defaultProp:s??!1,onChange:r,caller:QN});return B.jsx(mue,{...o,children:B.jsx(gde,{scope:e,contentId:rI(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:P.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:c,onCustomAnchorAdd:P.useCallback(()=>d(!0),[]),onCustomAnchorRemove:P.useCallback(()=>d(!1),[]),modal:a,children:t})})};e7.displayName=QN;var t7="PopoverAnchor",yde=P.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,s=$y(t7,t),r=rw(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return P.useEffect(()=>(a(),()=>o()),[a,o]),B.jsx(k9,{...r,...n,ref:e})});yde.displayName=t7;var n7="PopoverTrigger",i7=P.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,s=$y(n7,t),r=rw(t),a=Bc(e,s.triggerRef),o=B.jsx(H9.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":l7(s.open),...n,ref:a,onClick:ca(i.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:B.jsx(k9,{asChild:!0,...r,children:o})});i7.displayName=n7;var mI="PopoverPortal",[vde,_de]=J9(mI,{forceMount:void 0}),s7=i=>{const{__scopePopover:e,forceMount:t,children:n,container:s}=i,r=$y(mI,e);return B.jsx(vde,{scope:e,forceMount:t,children:B.jsx(g_,{present:t||r.open,children:B.jsx(G9,{asChild:!0,container:s,children:n})})})};s7.displayName=mI;var Ub="PopoverContent",r7=P.forwardRef((i,e)=>{const t=_de(Ub,i.__scopePopover),{forceMount:n=t.forceMount,...s}=i,r=$y(Ub,i.__scopePopover);return B.jsx(g_,{present:n||r.open,children:r.modal?B.jsx(bde,{...s,ref:e}):B.jsx(Sde,{...s,ref:e})})});r7.displayName=Ub;var xde=hu("PopoverContent.RemoveScroll"),bde=P.forwardRef((i,e)=>{const t=$y(Ub,i.__scopePopover),n=P.useRef(null),s=Bc(e,n),r=P.useRef(!1);return P.useEffect(()=>{const a=n.current;if(a)return Due(a)},[]),B.jsx(Q9,{as:xde,allowPinchZoom:!0,children:B.jsx(a7,{...i,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ca(i.onCloseAutoFocus,a=>{a.preventDefault(),r.current||t.triggerRef.current?.focus()}),onPointerDownOutside:ca(i.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;r.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ca(i.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Sde=P.forwardRef((i,e)=>{const t=$y(Ub,i.__scopePopover),n=P.useRef(!1),s=P.useRef(!1);return B.jsx(a7,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{i.onCloseAutoFocus?.(r),r.defaultPrevented||(n.current||t.triggerRef.current?.focus(),r.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:r=>{i.onInteractOutside?.(r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=r.target;t.triggerRef.current?.contains(a)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),a7=P.forwardRef((i,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...h}=i,m=$y(Ub,t),v=rw(t);return Ule(),B.jsx(g9,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:r,children:B.jsx(sI,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:B.jsx(gue,{"data-state":l7(m.open),role:"dialog",id:m.contentId,...v,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),o7="PopoverClose",Tde=P.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,s=$y(o7,t);return B.jsx(H9.button,{type:"button",...n,ref:e,onClick:ca(i.onClick,()=>s.onOpenChange(!1))})});Tde.displayName=o7;var Ede="PopoverArrow",wde=P.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,s=rw(t);return B.jsx(yue,{...s,...n,ref:e})});wde.displayName=Ede;function l7(i){return i?"open":"closed"}var Mde=e7,Ade=i7,Cde=s7,Rde=r7;function gI({...i}){return B.jsx(Mde,{"data-slot":"popover",...i})}function yI({...i}){return B.jsx(Ade,{"data-slot":"popover-trigger",...i})}function vI({className:i,align:e="center",sideOffset:t=4,...n}){return B.jsx(Cde,{children:B.jsx(Rde,{"data-slot":"popover-content",align:e,sideOffset:t,className:bl("bg-popover text-popover-foreground z-50 w-72 rounded-md border shadow-md outline-none",i),...n})})}const Nde=()=>B.jsxs(gI,{children:[B.jsx(yI,{asChild:!0,children:B.jsxs(nm,{variant:"ghost",size:"icon",className:"relative",children:[B.jsx(Coe,{size:16}),B.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-destructive text-destructive-foreground rounded-full flex items-center justify-center text-xs",children:"3"})]})}),B.jsx(vI,{className:"w-80",align:"end",children:B.jsxs("div",{className:"space-y-2",children:[B.jsx("h4",{className:"font-medium leading-none",children:"Notifications"}),B.jsxs("div",{className:"space-y-2",children:[B.jsxs("div",{className:"p-2 rounded-md bg-muted/50",children:[B.jsx("p",{className:"text-sm",children:"Your sticker order #1234 has shipped!"}),B.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"2 hours ago"})]}),B.jsxs("div",{className:"p-2 rounded-md bg-muted/50",children:[B.jsx("p",{className:"text-sm",children:"New design templates available"}),B.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"1 day ago"})]}),B.jsxs("div",{className:"p-2 rounded-md bg-muted/50",children:[B.jsx("p",{className:"text-sm",children:"Welcome to StickerVerse!"}),B.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"2 days ago"})]})]})]})})]});var Dde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_I=Dde.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),jP={exports:{}},$P={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CG;function Pde(){if(CG)return $P;CG=1;var i=oS();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,a=i.useDebugValue;function o(h,m){var v=m(),_=n({inst:{value:v,getSnapshot:m}}),x=_[0].inst,T=_[1];return r(function(){x.value=v,x.getSnapshot=m,l(x)&&T({inst:x})},[h,v,m]),s(function(){return l(x)&&T({inst:x}),h(function(){l(x)&&T({inst:x})})},[h]),a(v),v}function l(h){var m=h.getSnapshot;h=h.value;try{var v=m();return!t(h,v)}catch{return!0}}function c(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return $P.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,$P}var RG;function c7(){return RG||(RG=1,jP.exports=Pde()),jP.exports}var Ode=c7();function Lde(){return Ode.useSyncExternalStore(Ude,()=>!0,()=>!1)}function Ude(){return()=>{}}var xI="Avatar",[Bde]=iw(xI),[Ide,u7]=Bde(xI),d7=P.forwardRef((i,e)=>{const{__scopeAvatar:t,...n}=i,[s,r]=P.useState("idle");return B.jsx(Ide,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:r,children:B.jsx(_I.span,{...n,ref:e})})});d7.displayName=xI;var f7="AvatarImage",h7=P.forwardRef((i,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:s=()=>{},...r}=i,a=u7(f7,t),o=Fde(n,r),l=au(c=>{s(c),a.onImageLoadingStatusChange(c)});return pu(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?B.jsx(_I.img,{...r,ref:e,src:n}):null});h7.displayName=f7;var p7="AvatarFallback",m7=P.forwardRef((i,e)=>{const{__scopeAvatar:t,delayMs:n,...s}=i,r=u7(p7,t),[a,o]=P.useState(n===void 0);return P.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(l)}},[n]),a&&r.imageLoadingStatus!=="loaded"?B.jsx(_I.span,{...s,ref:e}):null});m7.displayName=p7;function NG(i,e){return i?e?(i.src!==e&&(i.src=e),i.complete&&i.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Fde(i,{referrerPolicy:e,crossOrigin:t}){const n=Lde(),s=P.useRef(null),r=n?(s.current||(s.current=new window.Image),s.current):null,[a,o]=P.useState(()=>NG(r,i));return pu(()=>{o(NG(r,i))},[r,i]),pu(()=>{const l=h=>()=>{o(h)};if(!r)return;const c=l("loaded"),d=l("error");return r.addEventListener("load",c),r.addEventListener("error",d),e&&(r.referrerPolicy=e),typeof t=="string"&&(r.crossOrigin=t),()=>{r.removeEventListener("load",c),r.removeEventListener("error",d)}},[r,t,e]),a}var g7=d7,y7=h7,v7=m7;const WU=P.forwardRef(({className:i,...e},t)=>B.jsx(g7,{ref:t,className:bl("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i),...e}));WU.displayName=g7.displayName;const qU=P.forwardRef(({className:i,...e},t)=>B.jsx(y7,{ref:t,className:bl("aspect-square h-full w-full",i),...e}));qU.displayName=y7.displayName;const XU=P.forwardRef(({className:i,...e},t)=>B.jsx(v7,{ref:t,className:bl("flex h-full w-full items-center justify-center rounded-full bg-muted",i),...e}));XU.displayName=v7.displayName;var zde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vde=zde.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),kde="Separator",DG="horizontal",Gde=["horizontal","vertical"],_7=P.forwardRef((i,e)=>{const{decorative:t,orientation:n=DG,...s}=i,r=Hde(n)?n:DG,o=t?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return B.jsx(Vde.div,{"data-orientation":r,...o,...s,ref:e})});_7.displayName=kde;function Hde(i){return Gde.includes(i)}var x7=_7;const YU=P.forwardRef(({className:i,orientation:e="horizontal",decorative:t=!0,...n},s)=>B.jsx(x7,{ref:s,decorative:t,orientation:e,className:bl("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i),...n}));YU.displayName=x7.displayName;const jde=()=>B.jsxs(gI,{children:[B.jsx(yI,{asChild:!0,children:B.jsx(nm,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:B.jsxs(WU,{className:"h-8 w-8",children:[B.jsx(qU,{src:"",alt:"User"}),B.jsx(XU,{children:"JD"})]})})}),B.jsxs(vI,{className:"w-56",align:"end",children:[B.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[B.jsxs(WU,{className:"h-8 w-8",children:[B.jsx(qU,{src:"",alt:"User"}),B.jsx(XU,{children:"JD"})]}),B.jsxs("div",{className:"space-y-1",children:[B.jsx("p",{className:"text-sm font-medium leading-none",children:"John Doe"}),B.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:"john.doe@example.com"})]})]}),B.jsx(YU,{}),B.jsxs("div",{className:"p-1",children:[B.jsxs(nm,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[B.jsx(Uoe,{className:"mr-2 h-4 w-4"}),"Profile"]}),B.jsxs(nm,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[B.jsx(Poe,{className:"mr-2 h-4 w-4"}),"Orders"]}),B.jsxs(nm,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[B.jsx(Noe,{className:"mr-2 h-4 w-4"}),"Favorites"]}),B.jsxs(nm,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[B.jsx(Loe,{className:"mr-2 h-4 w-4"}),"Settings"]})]}),B.jsx(YU,{}),B.jsx("div",{className:"p-1",children:B.jsxs(nm,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[B.jsx(Doe,{className:"mr-2 h-4 w-4"}),"Log out"]})})]})]}),b7=P.forwardRef(({className:i,type:e,...t},n)=>B.jsx("input",{type:e,className:bl("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:n,...t}));b7.displayName="Input";var $de=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vf=$de.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function PG(i,e){i&&h_.flushSync(()=>i.dispatchEvent(e))}var Wde=P.createContext(void 0);function qde(i){const e=P.useContext(Wde);return i||e||"ltr"}function S7(i){const e=i+"CollectionProvider",[t,n]=iw(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:T,children:b}=x,w=fe.useRef(null),M=fe.useRef(new Map).current;return B.jsx(s,{scope:T,itemMap:M,collectionRef:w,children:b})};a.displayName=e;const o=i+"CollectionSlot",l=hu(o),c=fe.forwardRef((x,T)=>{const{scope:b,children:w}=x,M=r(o,b),R=Bc(T,M.collectionRef);return B.jsx(l,{ref:R,children:w})});c.displayName=o;const d=i+"CollectionItemSlot",h="data-radix-collection-item",m=hu(d),v=fe.forwardRef((x,T)=>{const{scope:b,children:w,...M}=x,R=fe.useRef(null),N=Bc(T,R),D=r(d,b);return fe.useEffect(()=>(D.itemMap.set(R,{ref:R,...M}),()=>void D.itemMap.delete(R))),B.jsx(m,{[h]:"",ref:N,children:w})});v.displayName=d;function _(x){const T=r(i+"CollectionConsumer",x);return fe.useCallback(()=>{const w=T.collectionRef.current;if(!w)return[];const M=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(T.itemMap.values()).sort((D,L)=>M.indexOf(D.ref.current)-M.indexOf(L.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:a,Slot:c,ItemSlot:v},_,n]}function Xde(i){const e=P.useRef({value:i,previous:i});return P.useMemo(()=>(e.current.value!==i&&(e.current.previous=e.current.value,e.current.value=i),e.current.previous),[i])}var Yde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kde=Yde.reduce((i,e)=>{const t=hu(`Primitive.${e}`),n=P.forwardRef((s,r)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(l,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{}),Zde=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Qde="VisuallyHidden",T7=P.forwardRef((i,e)=>B.jsx(Kde.span,{...i,ref:e,style:{...Zde,...i.style}}));T7.displayName=Qde;var Jde=T7,y_="NavigationMenu",[bI,E7,efe]=S7(y_),[KU,tfe,nfe]=S7(y_),[SI]=iw(y_,[efe,nfe]),[ife,nf]=SI(y_),[sfe,rfe]=SI(y_),w7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,value:n,onValueChange:s,defaultValue:r,delayDuration:a=200,skipDelayDuration:o=300,orientation:l="horizontal",dir:c,...d}=i,[h,m]=P.useState(null),v=Bc(e,I=>m(I)),_=qde(c),x=P.useRef(0),T=P.useRef(0),b=P.useRef(0),[w,M]=P.useState(!0),[R,N]=pI({prop:n,onChange:I=>{const z=I!=="",H=o>0;z?(window.clearTimeout(b.current),H&&M(!1)):(window.clearTimeout(b.current),b.current=window.setTimeout(()=>M(!0),o)),s?.(I)},defaultProp:r??"",caller:y_}),D=P.useCallback(()=>{window.clearTimeout(T.current),T.current=window.setTimeout(()=>N(""),150)},[N]),L=P.useCallback(I=>{window.clearTimeout(T.current),N(I)},[N]),F=P.useCallback(I=>{R===I?window.clearTimeout(T.current):x.current=window.setTimeout(()=>{window.clearTimeout(T.current),N(I)},a)},[R,N,a]);return P.useEffect(()=>()=>{window.clearTimeout(x.current),window.clearTimeout(T.current),window.clearTimeout(b.current)},[]),B.jsx(M7,{scope:t,isRootMenu:!0,value:R,dir:_,orientation:l,rootNavigationMenu:h,onTriggerEnter:I=>{window.clearTimeout(x.current),w?F(I):L(I)},onTriggerLeave:()=>{window.clearTimeout(x.current),D()},onContentEnter:()=>window.clearTimeout(T.current),onContentLeave:D,onItemSelect:I=>{N(z=>z===I?"":I)},onItemDismiss:()=>N(""),children:B.jsx(Vf.nav,{"aria-label":"Main","data-orientation":l,dir:_,...d,ref:v})})});w7.displayName=y_;var ZU="NavigationMenuSub",afe=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,value:n,onValueChange:s,defaultValue:r,orientation:a="horizontal",...o}=i,l=nf(ZU,t),[c,d]=pI({prop:n,onChange:s,defaultProp:r??"",caller:ZU});return B.jsx(M7,{scope:t,isRootMenu:!1,value:c,dir:l.dir,orientation:a,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:h=>d(h),onItemSelect:h=>d(h),onItemDismiss:()=>d(""),children:B.jsx(Vf.div,{"data-orientation":a,...o,ref:e})})});afe.displayName=ZU;var M7=i=>{const{scope:e,isRootMenu:t,rootNavigationMenu:n,dir:s,orientation:r,children:a,value:o,onItemSelect:l,onItemDismiss:c,onTriggerEnter:d,onTriggerLeave:h,onContentEnter:m,onContentLeave:v}=i,[_,x]=P.useState(null),[T,b]=P.useState(new Map),[w,M]=P.useState(null);return B.jsx(ife,{scope:e,isRootMenu:t,rootNavigationMenu:n,value:o,previousValue:Xde(o),baseId:rI(),dir:s,orientation:r,viewport:_,onViewportChange:x,indicatorTrack:w,onIndicatorTrackChange:M,onTriggerEnter:au(d),onTriggerLeave:au(h),onContentEnter:au(m),onContentLeave:au(v),onItemSelect:au(l),onItemDismiss:au(c),onViewportContentChange:P.useCallback((R,N)=>{b(D=>(D.set(R,N),new Map(D)))},[]),onViewportContentRemove:P.useCallback(R=>{b(N=>N.has(R)?(N.delete(R),new Map(N)):N)},[]),children:B.jsx(bI.Provider,{scope:e,children:B.jsx(sfe,{scope:e,items:T,children:a})})})},A7="NavigationMenuList",C7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,...n}=i,s=nf(A7,t),r=B.jsx(Vf.ul,{"data-orientation":s.orientation,...n,ref:e});return B.jsx(Vf.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:B.jsx(bI.Slot,{scope:t,children:s.isRootMenu?B.jsx(F7,{asChild:!0,children:r}):r})})});C7.displayName=A7;var R7="NavigationMenuItem",[ofe,N7]=SI(R7),D7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,value:n,...s}=i,r=rI(),a=n||r||"LEGACY_REACT_AUTO_VALUE",o=P.useRef(null),l=P.useRef(null),c=P.useRef(null),d=P.useRef(()=>{}),h=P.useRef(!1),m=P.useCallback((_="start")=>{if(o.current){d.current();const x=JU(o.current);x.length&&wI(_==="start"?x:x.reverse())}},[]),v=P.useCallback(()=>{if(o.current){const _=JU(o.current);_.length&&(d.current=pfe(_))}},[]);return B.jsx(ofe,{scope:t,value:a,triggerRef:l,contentRef:o,focusProxyRef:c,wasEscapeCloseRef:h,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:v,onContentFocusOutside:v,children:B.jsx(Vf.li,{...s,ref:e})})});D7.displayName=R7;var QU="NavigationMenuTrigger",P7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,disabled:n,...s}=i,r=nf(QU,i.__scopeNavigationMenu),a=N7(QU,i.__scopeNavigationMenu),o=P.useRef(null),l=Bc(o,a.triggerRef,e),c=V7(r.baseId,a.value),d=k7(r.baseId,a.value),h=P.useRef(!1),m=P.useRef(!1),v=a.value===r.value;return B.jsxs(B.Fragment,{children:[B.jsx(bI.ItemSlot,{scope:t,value:a.value,children:B.jsx(z7,{asChild:!0,children:B.jsx(Vf.button,{id:c,disabled:n,"data-disabled":n?"":void 0,"data-state":MI(v),"aria-expanded":v,"aria-controls":d,...s,ref:l,onPointerEnter:ca(i.onPointerEnter,()=>{m.current=!1,a.wasEscapeCloseRef.current=!1}),onPointerMove:ca(i.onPointerMove,jR(()=>{n||m.current||a.wasEscapeCloseRef.current||h.current||(r.onTriggerEnter(a.value),h.current=!0)})),onPointerLeave:ca(i.onPointerLeave,jR(()=>{n||(r.onTriggerLeave(),h.current=!1)})),onClick:ca(i.onClick,()=>{r.onItemSelect(a.value),m.current=v}),onKeyDown:ca(i.onKeyDown,_=>{const T={horizontal:"ArrowDown",vertical:r.dir==="rtl"?"ArrowLeft":"ArrowRight"}[r.orientation];v&&_.key===T&&(a.onEntryKeyDown(),_.preventDefault())})})})}),v&&B.jsxs(B.Fragment,{children:[B.jsx(Jde,{"aria-hidden":!0,tabIndex:0,ref:a.focusProxyRef,onFocus:_=>{const x=a.contentRef.current,T=_.relatedTarget,b=T===o.current,w=x?.contains(T);(b||!w)&&a.onFocusProxyEnter(b?"start":"end")}}),r.viewport&&B.jsx("span",{"aria-owns":d})]})]})});P7.displayName=QU;var lfe="NavigationMenuLink",OG="navigationMenu.linkSelect",O7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,active:n,onSelect:s,...r}=i;return B.jsx(z7,{asChild:!0,children:B.jsx(Vf.a,{"data-active":n?"":void 0,"aria-current":n?"page":void 0,...r,ref:e,onClick:ca(i.onClick,a=>{const o=a.target,l=new CustomEvent(OG,{bubbles:!0,cancelable:!0});if(o.addEventListener(OG,c=>s?.(c),{once:!0}),PG(o,l),!l.defaultPrevented&&!a.metaKey){const c=new CustomEvent(xR,{bubbles:!0,cancelable:!0});PG(o,c)}},{checkForDefaultPrevented:!1})})})});O7.displayName=lfe;var TI="NavigationMenuIndicator",L7=P.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=nf(TI,i.__scopeNavigationMenu),r=!!s.value;return s.indicatorTrack?JB.createPortal(B.jsx(g_,{present:t||r,children:B.jsx(cfe,{...n,ref:e})}),s.indicatorTrack):null});L7.displayName=TI;var cfe=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,...n}=i,s=nf(TI,t),r=E7(t),[a,o]=P.useState(null),[l,c]=P.useState(null),d=s.orientation==="horizontal",h=!!s.value;P.useEffect(()=>{const _=r().find(x=>x.value===s.value)?.ref.current;_&&o(_)},[r,s.value]);const m=()=>{a&&c({size:d?a.offsetWidth:a.offsetHeight,offset:d?a.offsetLeft:a.offsetTop})};return e3(a,m),e3(s.indicatorTrack,m),l?B.jsx(Vf.div,{"aria-hidden":!0,"data-state":h?"visible":"hidden","data-orientation":s.orientation,...n,ref:e,style:{position:"absolute",...d?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...n.style}}):null}),Bb="NavigationMenuContent",U7=P.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=nf(Bb,i.__scopeNavigationMenu),r=N7(Bb,i.__scopeNavigationMenu),a=Bc(r.contentRef,e),o=r.value===s.value,l={value:r.value,triggerRef:r.triggerRef,focusProxyRef:r.focusProxyRef,wasEscapeCloseRef:r.wasEscapeCloseRef,onContentFocusOutside:r.onContentFocusOutside,onRootContentClose:r.onRootContentClose,...n};return s.viewport?B.jsx(ufe,{forceMount:t,...l,ref:a}):B.jsx(g_,{present:t||o,children:B.jsx(B7,{"data-state":MI(o),...l,ref:a,onPointerEnter:ca(i.onPointerEnter,s.onContentEnter),onPointerLeave:ca(i.onPointerLeave,jR(s.onContentLeave)),style:{pointerEvents:!o&&s.isRootMenu?"none":void 0,...l.style}})})});U7.displayName=Bb;var ufe=P.forwardRef((i,e)=>{const t=nf(Bb,i.__scopeNavigationMenu),{onViewportContentChange:n,onViewportContentRemove:s}=t;return pu(()=>{n(i.value,{ref:e,...i})},[i,e,n]),pu(()=>()=>s(i.value),[i.value,s]),null}),xR="navigationMenu.rootContentDismiss",B7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,value:n,triggerRef:s,focusProxyRef:r,wasEscapeCloseRef:a,onRootContentClose:o,onContentFocusOutside:l,...c}=i,d=nf(Bb,t),h=P.useRef(null),m=Bc(h,e),v=V7(d.baseId,n),_=k7(d.baseId,n),x=E7(t),T=P.useRef(null),{onItemDismiss:b}=d;P.useEffect(()=>{const M=h.current;if(d.isRootMenu&&M){const R=()=>{b(),o(),M.contains(document.activeElement)&&s.current?.focus()};return M.addEventListener(xR,R),()=>M.removeEventListener(xR,R)}},[d.isRootMenu,i.value,s,b,o]);const w=P.useMemo(()=>{const R=x().map(z=>z.value);d.dir==="rtl"&&R.reverse();const N=R.indexOf(d.value),D=R.indexOf(d.previousValue),L=n===d.value,F=D===R.indexOf(n);if(!L&&!F)return T.current;const I=(()=>{if(N!==D){if(L&&D!==-1)return N>D?"from-end":"from-start";if(F&&N!==-1)return N>D?"to-start":"to-end"}return null})();return T.current=I,I},[d.previousValue,d.value,d.dir,x,n]);return B.jsx(F7,{asChild:!0,children:B.jsx(sI,{id:_,"aria-labelledby":v,"data-motion":w,"data-orientation":d.orientation,...c,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{const M=new Event(xR,{bubbles:!0,cancelable:!0});h.current?.dispatchEvent(M)},onFocusOutside:ca(i.onFocusOutside,M=>{l();const R=M.target;d.rootNavigationMenu?.contains(R)&&M.preventDefault()}),onPointerDownOutside:ca(i.onPointerDownOutside,M=>{const R=M.target,N=x().some(L=>L.ref.current?.contains(R)),D=d.isRootMenu&&d.viewport?.contains(R);(N||D||!d.isRootMenu)&&M.preventDefault()}),onKeyDown:ca(i.onKeyDown,M=>{const R=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!R){const D=JU(M.currentTarget),L=document.activeElement,F=D.findIndex(H=>H===L),z=M.shiftKey?D.slice(0,F).reverse():D.slice(F+1,D.length);wI(z)?M.preventDefault():r.current?.focus()}}),onEscapeKeyDown:ca(i.onEscapeKeyDown,M=>{a.current=!0})})})}),EI="NavigationMenuViewport",I7=P.forwardRef((i,e)=>{const{forceMount:t,...n}=i,r=!!nf(EI,i.__scopeNavigationMenu).value;return B.jsx(g_,{present:t||r,children:B.jsx(dfe,{...n,ref:e})})});I7.displayName=EI;var dfe=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,children:n,...s}=i,r=nf(EI,t),a=Bc(e,r.onViewportChange),o=rfe(Bb,i.__scopeNavigationMenu),[l,c]=P.useState(null),[d,h]=P.useState(null),m=l?l?.width+"px":void 0,v=l?l?.height+"px":void 0,_=!!r.value,x=_?r.value:r.previousValue;return e3(d,()=>{d&&c({width:d.offsetWidth,height:d.offsetHeight})}),B.jsx(Vf.div,{"data-state":MI(_),"data-orientation":r.orientation,...s,ref:a,style:{pointerEvents:!_&&r.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":v,...s.style},onPointerEnter:ca(i.onPointerEnter,r.onContentEnter),onPointerLeave:ca(i.onPointerLeave,jR(r.onContentLeave)),children:Array.from(o.items).map(([b,{ref:w,forceMount:M,...R}])=>{const N=x===b;return B.jsx(g_,{present:M||N,children:B.jsx(B7,{...R,ref:nI(w,D=>{N&&D&&h(D)})})},b)})})}),ffe="FocusGroup",F7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,...n}=i,s=nf(ffe,t);return B.jsx(KU.Provider,{scope:t,children:B.jsx(KU.Slot,{scope:t,children:B.jsx(Vf.div,{dir:s.dir,...n,ref:e})})})}),LG=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],hfe="FocusGroupItem",z7=P.forwardRef((i,e)=>{const{__scopeNavigationMenu:t,...n}=i,s=tfe(t),r=nf(hfe,t);return B.jsx(KU.ItemSlot,{scope:t,children:B.jsx(Vf.button,{...n,ref:e,onKeyDown:ca(i.onKeyDown,a=>{if(["Home","End",...LG].includes(a.key)){let l=s().map(h=>h.ref.current);if([r.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(a.key)&&l.reverse(),LG.includes(a.key)){const h=l.indexOf(a.currentTarget);l=l.slice(h+1)}setTimeout(()=>wI(l)),a.preventDefault()}})})})});function JU(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function wI(i){const e=document.activeElement;return i.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}function pfe(i){return i.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}),()=>{i.forEach(e=>{const t=e.dataset.tabindex;e.setAttribute("tabindex",t)})}}function e3(i,e){const t=au(e);pu(()=>{let n=0;if(i){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return s.observe(i),()=>{window.cancelAnimationFrame(n),s.unobserve(i)}}},[i,t])}function MI(i){return i?"open":"closed"}function V7(i,e){return`${i}-trigger-${e}`}function k7(i,e){return`${i}-content-${e}`}function jR(i){return e=>e.pointerType==="mouse"?i(e):void 0}var G7=w7,H7=C7,mfe=D7,j7=P7,$7=O7,W7=L7,q7=U7,X7=I7;const t3=P.forwardRef(({className:i,children:e,...t},n)=>B.jsxs(G7,{ref:n,className:bl("relative z-10 flex max-w-max flex-1 items-center justify-center",i),...t,children:[e,B.jsx(K7,{})]}));t3.displayName=G7.displayName;const n3=P.forwardRef(({className:i,...e},t)=>B.jsx(H7,{ref:t,className:bl("group flex flex-1 list-none items-center justify-center space-x-1",i),...e}));n3.displayName=H7.displayName;const UG=mfe,Y7=n9("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),gfe=P.forwardRef(({className:i,children:e,...t},n)=>B.jsxs(j7,{ref:n,className:bl(Y7(),"group",i),...t,children:[e," ",B.jsx(Roe,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));gfe.displayName=j7.displayName;const yfe=P.forwardRef(({className:i,...e},t)=>B.jsx(q7,{ref:t,className:bl("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",i),...e}));yfe.displayName=q7.displayName;const i3=P.forwardRef(({className:i,active:e,...t},n)=>B.jsx($7,{ref:n,className:bl(Y7(),e&&"bg-accent text-accent-foreground",i),...t}));i3.displayName=$7.displayName;const K7=P.forwardRef(({className:i,...e},t)=>B.jsx("div",{className:bl("absolute left-0 top-full flex justify-center"),children:B.jsx(X7,{className:bl("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",i),ref:t,...e})}));K7.displayName=X7.displayName;const vfe=P.forwardRef(({className:i,...e},t)=>B.jsx(W7,{ref:t,className:bl("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",i),...e,children:B.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));vfe.displayName=W7.displayName;const BG=[{href:"/",label:"Home"},{href:"/shop",label:"Shop"},{href:"/shop-copy",label:"Shop Copy"},{href:"/designer",label:"Designer"},{href:"/checkout",label:"Checkout"}];function _fe(){const i=P.useId(),e=cS();return B.jsxs("header",{className:"border-b px-4 md:px-6",children:[B.jsxs("div",{className:"flex h-16 items-center justify-between gap-4",children:[B.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[B.jsxs(gI,{children:[B.jsx(yI,{asChild:!0,children:B.jsx(nm,{className:"group size-8 md:hidden",variant:"ghost",size:"icon",children:B.jsxs("svg",{className:"pointer-events-none",width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[B.jsx("path",{d:"M4 12L20 12",className:"origin-center -translate-y-[7px] transition-all duration-300 ease-[cubic-bezier(.5,.85,.25,1.1)] group-aria-expanded:translate-x-0 group-aria-expanded:translate-y-0 group-aria-expanded:rotate-[315deg]"}),B.jsx("path",{d:"M4 12H20",className:"origin-center transition-all duration-300 ease-[cubic-bezier(.5,.85,.25,1.8)] group-aria-expanded:rotate-45"}),B.jsx("path",{d:"M4 12H20",className:"origin-center translate-y-[7px] transition-all duration-300 ease-[cubic-bezier(.5,.85,.25,1.1)] group-aria-expanded:translate-y-0 group-aria-expanded:rotate-[135deg]"})]})})}),B.jsx(vI,{align:"start",className:"w-36 p-1 md:hidden",children:B.jsx(t3,{className:"max-w-none *:w-full",children:B.jsx(n3,{className:"flex-col items-start gap-0 md:gap-2",children:BG.map((t,n)=>B.jsx(UG,{className:"w-full",children:B.jsx(i3,{asChild:!0,className:"py-1.5",active:e.pathname===t.href,children:B.jsx(PP,{to:t.href,"data-testid":`nav-${t.label.toLowerCase().replace(" ","-")}-link`,children:t.label})})},n))})})})]}),B.jsx("div",{className:"flex items-center",children:B.jsx(PP,{to:"/",className:"text-primary hover:text-primary/90",children:B.jsx(Boe,{})})})]}),B.jsx("div",{className:"grow",children:B.jsxs("div",{className:"relative mx-auto w-full max-w-xs",children:[B.jsx(b7,{id:i,className:"peer h-8 ps-8 pe-10",placeholder:"Search stickers...",type:"search"}),B.jsx("div",{className:"text-muted-foreground/80 pointer-events-none absolute inset-y-0 start-0 flex items-center justify-center ps-2 peer-disabled:opacity-50",children:B.jsx(Ooe,{size:16})}),B.jsx("div",{className:"text-muted-foreground pointer-events-none absolute inset-y-0 end-0 flex items-center justify-center pe-2",children:B.jsx("kbd",{className:"text-muted-foreground/70 inline-flex h-5 max-h-full items-center rounded border px-1 font-[inherit] text-[0.625rem] font-medium",children:"K"})})]})}),B.jsxs("div",{className:"flex flex-1 items-center justify-end gap-2",children:[B.jsx(Nde,{}),B.jsx(jde,{})]})]}),B.jsx("div",{className:"border-t py-2 max-md:hidden",children:B.jsx(t3,{children:B.jsx(n3,{className:"gap-2",children:BG.map((t,n)=>B.jsx(UG,{children:B.jsx(i3,{asChild:!0,active:e.pathname===t.href,className:"text-muted-foreground hover:text-primary py-1.5 font-medium",children:B.jsx(PP,{to:t.href,"data-testid":`nav-${t.label.toLowerCase().replace(" ","-")}-link`,children:t.label})})},n))})})})]})}const xfe=({className:i})=>B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),bfe=({className:i})=>B.jsx("img",{src:"https://checkoutshopper-live.adyen.com/checkoutshopper/images/logos/card.svg",alt:"Credit Card",className:i}),Sfe=({className:i})=>B.jsx("img",{src:"https://checkoutshopper-live.adyen.com/checkoutshopper/images/logos/paypal.svg",alt:"PayPal",className:i}),Tfe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/32x30/0d3bac0c35/white-ic-som-instagram.svg",alt:"Instagram",className:i}),Efe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/30x28/885aa3c949/white-ic-som-facebook.svg",alt:"Facebook",className:i}),wfe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/34x24/89ef8a3eb0/white-ic-som-youtube.svg",alt:"YouTube",className:i}),Mfe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/28x28/3649f38bad/white-ic-som-linkedin.svg",alt:"LinkedIn",className:i}),Afe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/28x28/397b48854a/white-ic-som-x.svg",alt:"X",className:i}),Cfe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/28x28/851da58739/white-ic-som-pinterest.svg",alt:"Pinterest",className:i}),Rfe=({className:i})=>B.jsx("img",{src:"https://stickerapp.com/media/25x28/0f10792d9a/white-ic-som-tiktok.svg",alt:"TikTok",className:i}),Fo=({href:i,children:e})=>B.jsx("li",{children:B.jsx("a",{href:i,className:"text-white hover:text-yellow-300 transition-colors leading-loose",children:e})}),WP=({title:i,children:e})=>B.jsxs("div",{className:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5 mb-8",children:[B.jsx("h4",{className:"font-semibold text-white mb-4 uppercase tracking-wider",children:i}),B.jsx("ul",{children:e})]}),z0=({href:i,children:e})=>B.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-yellow-300 transition-colors",children:e}),Nfe=()=>B.jsx("footer",{className:"bg-zinc-900 text-white",children:B.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[B.jsxs("div",{className:"flex flex-wrap",children:[B.jsxs(WP,{title:"Useful links",children:[B.jsx(Fo,{href:"#",children:"Usages"}),B.jsx(Fo,{href:"#",children:"Add-Ons"}),B.jsx(Fo,{href:"#",children:"Our Sticker Packs"}),B.jsx(Fo,{href:"#",children:"Order Samples"}),B.jsx(Fo,{href:"#",children:"Shop"}),B.jsx(Fo,{href:"#",children:"Blog"})]}),B.jsxs(WP,{title:"Support",children:[B.jsx(Fo,{href:"#",children:"Contact us"}),B.jsx(Fo,{href:"#",children:"Quote"}),B.jsx(Fo,{href:"#",children:"FAQs"}),B.jsx(Fo,{href:"#",children:"How to's"}),B.jsx(Fo,{href:"#",children:"Shipping"}),B.jsx(Fo,{href:"#",children:"Payments"})]}),B.jsxs(WP,{title:"Company",children:[B.jsx(Fo,{href:"#",children:"About us"}),B.jsx(Fo,{href:"#",children:"Legal"}),B.jsx(Fo,{href:"#",children:"Reviews"}),B.jsx(Fo,{href:"#",children:"Press"}),B.jsx(Fo,{href:"#",children:"Cookies"}),B.jsx(Fo,{href:"#",children:"Accessibility"})]}),B.jsxs("div",{className:"w-full md:w-2/4 lg:w-2/5",children:[B.jsx("h4",{className:"font-semibold text-white mb-4 uppercase tracking-wider",children:"Stay connected"}),B.jsx("p",{className:"mb-4",children:"Sign up to our email list for insider deals, tips and inspiration."}),B.jsxs("div",{className:"flex",children:[B.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 rounded-l-md border-0 text-zinc-800"}),B.jsx("button",{className:"bg-yellow-400 text-zinc-900 font-bold px-4 py-2 rounded-r-md hover:bg-yellow-500 transition-colors",children:"SUBSCRIBE"})]})]})]}),B.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-700 flex flex-col md:flex-row items-center justify-between",children:[B.jsxs("div",{className:"flex gap-6 mb-6 md:mb-0",children:[B.jsx(z0,{href:"https://www.instagram.com/stickerapp/",children:B.jsx(Tfe,{className:"w-6 h-6"})}),B.jsx(z0,{href:"https://www.facebook.com/StickerApp/",children:B.jsx(Efe,{className:"w-6 h-6"})}),B.jsx(z0,{href:"https://www.youtube.com/StickerApp",children:B.jsx(wfe,{className:"w-6 h-6"})}),B.jsx(z0,{href:"https://www.linkedin.com/company/stickerapp/",children:B.jsx(Mfe,{className:"w-6 h-6"})}),B.jsx(z0,{href:"https://x.com/StickerApp",children:B.jsx(Afe,{className:"w-6 h-6"})}),B.jsx(z0,{href:"https://se.pinterest.com/stickerapp/",children:B.jsx(Cfe,{className:"w-6 h-6"})}),B.jsx(z0,{href:"https://www.tiktok.com/@stickerapp",children:B.jsx(Rfe,{className:"w-6 h-6"})})]}),B.jsx("p",{className:"text-sm text-gray-400",children:" StickerApp 2025"})]})]})}),qP=({children:i})=>{const e=cS(),t=!e.pathname.startsWith("/checkout")&&e.pathname!=="/",n=!e.pathname.startsWith("/checkout");return B.jsxs("div",{className:"min-h-screen flex flex-col",children:[t&&B.jsx(_fe,{}),B.jsx("main",{className:"flex-grow",children:i}),n&&B.jsx(Nfe,{})]})};function tm(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Z7(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ku={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ib={duration:.5,overwrite:!1,delay:0},AI,_l,Wr,Vd=1e8,ur=1/Vd,s3=Math.PI*2,Dfe=s3/4,Pfe=0,Q7=Math.sqrt,Ofe=Math.cos,Lfe=Math.sin,Yo=function(e){return typeof e=="string"},Ca=function(e){return typeof e=="function"},Mm=function(e){return typeof e=="number"},CI=function(e){return typeof e>"u"},sp=function(e){return typeof e=="object"},cu=function(e){return e!==!1},RI=function(){return typeof window<"u"},FA=function(e){return Ca(e)||Yo(e)},J7=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Wl=Array.isArray,r3=/(?:-?\.?\d|\.)+/gi,eq=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,rb=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,XP=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,tq=/[+-]=-?[.\d]+/,nq=/[^,'"\[\]\s]+/gi,Ufe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,oa,Fh,a3,NI,ed={},$R={},iq,sq=function(e){return($R=Fb(e,ed))&&mu},DI=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},mE=function(e,t){return!t&&console.warn(e)},rq=function(e,t){return e&&(ed[e]=t)&&$R&&($R[e]=t)||ed},gE=function(){return 0},Bfe={suppressEvents:!0,isStart:!0,kill:!1},bR={suppressEvents:!0,kill:!1},Ife={suppressEvents:!0},PI={},ny=[],o3={},aq,Gu={},YP={},IG=30,SR=[],OI="",LI=function(e){var t=e[0],n,s;if(sp(t)||Ca(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(s=SR.length;s--&&!SR[s].targetTest(t););n=SR[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Nq(e[s],n)))||e.splice(s,1);return e},Rv=function(e){return e._gsap||LI(kd(e))[0]._gsap},oq=function(e,t,n){return(n=e[t])&&Ca(n)?e[t]():CI(n)&&e.getAttribute&&e.getAttribute(t)||n},uu=function(e,t){return(e=e.split(",")).forEach(t)||e},ja=function(e){return Math.round(e*1e5)/1e5||0},ro=function(e){return Math.round(e*1e7)/1e7||0},bb=function(e,t){var n=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},Ffe=function(e,t){for(var n=t.length,s=0;e.indexOf(t[s])<0&&++s<n;);return s<n},WR=function(){var e=ny.length,t=ny.slice(0),n,s;for(o3={},ny.length=0,n=0;n<e;n++)s=t[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},UI=function(e){return!!(e._initted||e._startAt||e.add)},lq=function(e,t,n,s){ny.length&&!_l&&WR(),e.render(t,n,!!(_l&&t<0&&UI(e))),ny.length&&!_l&&WR()},cq=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(nq).length<2?t:Yo(e)?e.trim():e},uq=function(e){return e},td=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},zfe=function(e){return function(t,n){for(var s in n)s in t||s==="duration"&&e||s==="ease"||(t[s]=n[s])}},Fb=function(e,t){for(var n in t)e[n]=t[n];return e},FG=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=sp(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},qR=function(e,t){var n={},s;for(s in e)s in t||(n[s]=e[s]);return n},F1=function(e){var t=e.parent||oa,n=e.keyframes?zfe(Wl(e.keyframes)):td;if(cu(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Vfe=function(e,t){for(var n=e.length,s=n===t.length;s&&n--&&e[n]===t[n];);return n<0},dq=function(e,t,n,s,r){var a=e[s],o;if(r)for(o=t[r];a&&a[r]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[s]=t,t._prev=a,t.parent=t._dp=e,t},JN=function(e,t,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var r=t._prev,a=t._next;r?r._next=a:e[n]===t&&(e[n]=a),a?a._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},dy=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Nv=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},kfe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},l3=function(e,t,n,s){return e._startAt&&(_l?e._startAt.revert(bR):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},Gfe=function i(e){return!e||e._ts&&i(e.parent)},zG=function(e){return e._repeat?zb(e._tTime,e=e.duration()+e._rDelay)*e:0},zb=function(e,t){var n=Math.floor(e=ro(e/t));return e&&n===e?n-1:n},XR=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},e2=function(e){return e._end=ro(e._start+(e._tDur/Math.abs(e._ts||e._rts||ur)||0))},t2=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ro(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),e2(e),n._dirty||Nv(n,e)),e},fq=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=XR(e.rawTime(),t),(!t._dur||aw(0,t.totalDuration(),n)-t._tTime>ur)&&t.render(n,!0)),Nv(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-ur}},Vh=function(e,t,n,s){return t.parent&&dy(t),t._start=ro((Mm(n)?n:n||e!==oa?Ld(e,n,t):e._time)+t._delay),t._end=ro(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),dq(e,t,"_first","_last",e._sort?"_start":0),c3(t)||(e._recent=t),s||fq(e,t),e._ts<0&&t2(e,e._tTime),e},hq=function(e,t){return(ed.ScrollTrigger||DI("scrollTrigger",t))&&ed.ScrollTrigger.create(t,e)},pq=function(e,t,n,s,r){if(II(e,t,r),!e._initted)return 1;if(!n&&e._pt&&!_l&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&aq!==Wu.frame)return ny.push(e),e._lazy=[r,s],1},Hfe=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},c3=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},jfe=function(e,t,n,s){var r=e.ratio,a=t<0||!t&&(!e._start&&Hfe(e)&&!(!e._initted&&c3(e))||(e._ts<0||e._dp._ts<0)&&!c3(e))?0:1,o=e._rDelay,l=0,c,d,h;if(o&&e._repeat&&(l=aw(0,e._tDur,t),d=zb(l,o),e._yoyo&&d&1&&(a=1-a),d!==zb(e._tTime,o)&&(r=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==r||_l||s||e._zTime===ur||!t&&e._zTime){if(!e._initted&&pq(e,t,s,n,l))return;for(h=e._zTime,e._zTime=t||(n?ur:0),n||(n=t&&!h),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&l3(e,t,n,!0),e._onUpdate&&!n&&qu(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&qu(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&dy(e,1),!n&&!_l&&(qu(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},$fe=function(e,t,n){var s;if(n>t)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},Vb=function(e,t,n,s){var r=e._repeat,a=ro(t)||0,o=e._tTime/e._tDur;return o&&!s&&(e._time*=a/e._dur),e._dur=a,e._tDur=r?r<0?1e10:ro(a*(r+1)+e._rDelay*r):a,o>0&&!s&&t2(e,e._tTime=e._tDur*o),e.parent&&e2(e),n||Nv(e.parent,e),e},VG=function(e){return e instanceof Tc?Nv(e):Vb(e,e._dur)},Wfe={_start:0,endTime:gE,totalDuration:gE},Ld=function i(e,t,n){var s=e.labels,r=e._recent||Wfe,a=e.duration()>=Vd?r.endTime(!1):e._dur,o,l,c;return Yo(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?r:n).totalDuration()/100:1)):o<0?(t in s||(s[t]=a),s[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&n&&(l=l/100*(Wl(n)?n[0]:n).totalDuration()),o>1?i(e,t.substr(0,o-1),n)+l:a+l)):t==null?a:+t},z1=function(e,t,n){var s=Mm(t[1]),r=(s?2:1)+(e<2?0:1),a=t[r],o,l;if(s&&(a.duration=t[1]),a.parent=n,e){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=cu(l.vars.inherit)&&l.parent;a.immediateRender=cu(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[r-1]}return new so(t[0],a,t[r+1])},Wy=function(e,t){return e||e===0?t(e):t},aw=function(e,t,n){return n<e?e:n>t?t:n},Vl=function(e,t){return!Yo(e)||!(t=Ufe.exec(e))?"":t[1]},qfe=function(e,t,n){return Wy(n,function(s){return aw(e,t,s)})},u3=[].slice,mq=function(e,t){return e&&sp(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&sp(e[0]))&&!e.nodeType&&e!==Fh},Xfe=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(s){var r;return Yo(s)&&!t||mq(s,1)?(r=n).push.apply(r,kd(s)):n.push(s)})||n},kd=function(e,t,n){return Wr&&!t&&Wr.selector?Wr.selector(e):Yo(e)&&!n&&(a3||!kb())?u3.call((t||NI).querySelectorAll(e),0):Wl(e)?Xfe(e,n):mq(e)?u3.call(e,0):e?[e]:[]},d3=function(e){return e=kd(e)[0]||mE("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return kd(t,n.querySelectorAll?n:n===e?mE("Invalid scope")||NI.createElement("div"):e)}},gq=function(e){return e.sort(function(){return .5-Math.random()})},yq=function(e){if(Ca(e))return e;var t=sp(e)?e:{each:e},n=Dv(t.ease),s=t.from||0,r=parseFloat(t.base)||0,a={},o=s>0&&s<1,l=isNaN(s)||o,c=t.axis,d=s,h=s;return Yo(s)?d=h={center:.5,edges:.5,end:1}[s]||0:!o&&l&&(d=s[0],h=s[1]),function(m,v,_){var x=(_||t).length,T=a[x],b,w,M,R,N,D,L,F,I;if(!T){if(I=t.grid==="auto"?0:(t.grid||[1,Vd])[1],!I){for(L=-Vd;L<(L=_[I++].getBoundingClientRect().left)&&I<x;);I<x&&I--}for(T=a[x]=[],b=l?Math.min(I,x)*d-.5:s%I,w=I===Vd?0:l?x*h/I-.5:s/I|0,L=0,F=Vd,D=0;D<x;D++)M=D%I-b,R=w-(D/I|0),T[D]=N=c?Math.abs(c==="y"?R:M):Q7(M*M+R*R),N>L&&(L=N),N<F&&(F=N);s==="random"&&gq(T),T.max=L-F,T.min=F,T.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(I>x?x-1:c?c==="y"?x/I:I:Math.max(I,x/I))||0)*(s==="edges"?-1:1),T.b=x<0?r-x:r,T.u=Vl(t.amount||t.each)||0,n=n&&x<0?Aq(n):n}return x=(T[m]-T.min)/T.max||0,ro(T.b+(n?n(x):x)*T.v)+T.u}},f3=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=ro(Math.round(parseFloat(n)/e)*e*t);return(s-s%1)/t+(Mm(n)?0:Vl(n))}},vq=function(e,t){var n=Wl(e),s,r;return!n&&sp(e)&&(s=n=e.radius||Vd,e.values?(e=kd(e.values),(r=!Mm(e[0]))&&(s*=s)):e=f3(e.increment)),Wy(t,n?Ca(e)?function(a){return r=e(a),Math.abs(r-a)<=s?r:a}:function(a){for(var o=parseFloat(r?a.x:a),l=parseFloat(r?a.y:0),c=Vd,d=0,h=e.length,m,v;h--;)r?(m=e[h].x-o,v=e[h].y-l,m=m*m+v*v):m=Math.abs(e[h]-o),m<c&&(c=m,d=h);return d=!s||c<=s?e[d]:a,r||d===a||Mm(a)?d:d+Vl(a)}:f3(e))},_q=function(e,t,n,s){return Wy(Wl(e)?!t:n===!0?!!(n=0):!s,function(){return Wl(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*s)/s})},Yfe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduce(function(r,a){return a(r)},s)}},Kfe=function(e,t){return function(n){return e(parseFloat(n))+(t||Vl(n))}},Zfe=function(e,t,n){return bq(e,t,0,1,n)},xq=function(e,t,n){return Wy(n,function(s){return e[~~t(s)]})},Qfe=function i(e,t,n){var s=t-e;return Wl(e)?xq(e,i(0,e.length),t):Wy(n,function(r){return(s+(r-e)%s)%s+e})},Jfe=function i(e,t,n){var s=t-e,r=s*2;return Wl(e)?xq(e,i(0,e.length-1),t):Wy(n,function(a){return a=(r+(a-e)%r)%r||0,e+(a>s?r-a:a)})},yE=function(e){for(var t=0,n="",s,r,a,o;~(s=e.indexOf("random(",t));)a=e.indexOf(")",s),o=e.charAt(s+7)==="[",r=e.substr(s+7,a-s-7).match(o?nq:r3),n+=e.substr(t,s-t)+_q(o?r:+r[0],o?0:+r[1],+r[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},bq=function(e,t,n,s,r){var a=t-e,o=s-n;return Wy(r,function(l){return n+((l-e)/a*o||0)})},ehe=function i(e,t,n,s){var r=isNaN(e+t)?0:function(v){return(1-v)*e+v*t};if(!r){var a=Yo(e),o={},l,c,d,h,m;if(n===!0&&(s=1)&&(n=null),a)e={p:e},t={p:t};else if(Wl(e)&&!Wl(t)){for(d=[],h=e.length,m=h-2,c=1;c<h;c++)d.push(i(e[c-1],e[c]));h--,r=function(_){_*=h;var x=Math.min(m,~~_);return d[x](_-x)},n=t}else s||(e=Fb(Wl(e)?[]:{},e));if(!d){for(l in t)BI.call(o,e,l,"get",t[l]);r=function(_){return VI(_,o)||(a?e.p:e)}}}return Wy(n,r)},kG=function(e,t,n){var s=e.labels,r=Vd,a,o,l;for(a in s)o=s[a]-t,o<0==!!n&&o&&r>(o=Math.abs(o))&&(l=a,r=o);return l},qu=function(e,t,n){var s=e.vars,r=s[t],a=Wr,o=e._ctx,l,c,d;if(r)return l=s[t+"Params"],c=s.callbackScope||e,n&&ny.length&&WR(),o&&(Wr=o),d=l?r.apply(c,l):r.call(c),Wr=a,d},M1=function(e){return dy(e),e.scrollTrigger&&e.scrollTrigger.kill(!!_l),e.progress()<1&&qu(e,"onInterrupt"),e},ab,Sq=[],Tq=function(e){if(e)if(e=!e.name&&e.default||e,RI()||e.headless){var t=e.name,n=Ca(e),s=t&&!n&&e.init?function(){this._props=[]}:e,r={init:gE,render:VI,add:BI,kill:ghe,modifier:mhe,rawVars:0},a={targetTest:0,get:0,getSetter:zI,aliases:{},register:0};if(kb(),e!==s){if(Gu[t])return;td(s,td(qR(e,r),a)),Fb(s.prototype,Fb(r,qR(e,a))),Gu[s.prop=t]=s,e.targetTest&&(SR.push(s),PI[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}rq(t,s),e.register&&e.register(mu,s,du)}else Sq.push(e)},cr=255,A1={aqua:[0,cr,cr],lime:[0,cr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,cr],navy:[0,0,128],white:[cr,cr,cr],olive:[128,128,0],yellow:[cr,cr,0],orange:[cr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[cr,0,0],pink:[cr,192,203],cyan:[0,cr,cr],transparent:[cr,cr,cr,0]},KP=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*cr+.5|0},Eq=function(e,t,n){var s=e?Mm(e)?[e>>16,e>>8&cr,e&cr]:0:A1.black,r,a,o,l,c,d,h,m,v,_;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),A1[e])s=A1[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+r+r+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&cr,s&cr,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&cr,e&cr]}else if(e.substr(0,3)==="hsl"){if(s=_=e.match(r3),!t)l=+s[0]%360/360,c=+s[1]/100,d=+s[2]/100,a=d<=.5?d*(c+1):d+c-d*c,r=d*2-a,s.length>3&&(s[3]*=1),s[0]=KP(l+1/3,r,a),s[1]=KP(l,r,a),s[2]=KP(l-1/3,r,a);else if(~e.indexOf("="))return s=e.match(eq),n&&s.length<4&&(s[3]=1),s}else s=e.match(r3)||A1.transparent;s=s.map(Number)}return t&&!_&&(r=s[0]/cr,a=s[1]/cr,o=s[2]/cr,h=Math.max(r,a,o),m=Math.min(r,a,o),d=(h+m)/2,h===m?l=c=0:(v=h-m,c=d>.5?v/(2-h-m):v/(h+m),l=h===r?(a-o)/v+(a<o?6:0):h===a?(o-r)/v+2:(r-a)/v+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(d*100+.5)),n&&s.length<4&&(s[3]=1),s},wq=function(e){var t=[],n=[],s=-1;return e.split(iy).forEach(function(r){var a=r.match(rb)||[];t.push.apply(t,a),n.push(s+=a.length+1)}),t.c=n,t},GG=function(e,t,n){var s="",r=(e+s).match(iy),a=t?"hsla(":"rgba(",o=0,l,c,d,h;if(!r)return e;if(r=r.map(function(m){return(m=Eq(m,t,1))&&a+(t?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(d=wq(e),l=n.c,l.join(s)!==d.c.join(s)))for(c=e.replace(iy,"1").split(rb),h=c.length-1;o<h;o++)s+=c[o]+(~l.indexOf(o)?r.shift()||a+"0,0,0,0)":(d.length?d:r.length?r:n).shift());if(!c)for(c=e.split(iy),h=c.length-1;o<h;o++)s+=c[o]+r[o];return s+c[h]},iy=(function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in A1)i+="|"+e+"\\b";return new RegExp(i+")","gi")})(),the=/hsl[a]?\(/,Mq=function(e){var t=e.join(" "),n;if(iy.lastIndex=0,iy.test(t))return n=the.test(t),e[1]=GG(e[1],n),e[0]=GG(e[0],n,wq(e[1])),!0},vE,Wu=(function(){var i=Date.now,e=500,t=33,n=i(),s=n,r=1e3/240,a=r,o=[],l,c,d,h,m,v,_=function x(T){var b=i()-s,w=T===!0,M,R,N,D;if((b>e||b<0)&&(n+=b-t),s+=b,N=s-n,M=N-a,(M>0||w)&&(D=++h.frame,m=N-h.time*1e3,h.time=N=N/1e3,a+=M+(M>=r?4:r-M),R=1),w||(l=c(x)),R)for(v=0;v<o.length;v++)o[v](N,m,D,T)};return h={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(T){return m/(1e3/(T||60))},wake:function(){iq&&(!a3&&RI()&&(Fh=a3=window,NI=Fh.document||{},ed.gsap=mu,(Fh.gsapVersions||(Fh.gsapVersions=[])).push(mu.version),sq($R||Fh.GreenSockGlobals||!Fh.gsap&&Fh||{}),Sq.forEach(Tq)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=d||function(T){return setTimeout(T,a-h.time*1e3+1|0)},vE=1,_(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),vE=0,c=gE},lagSmoothing:function(T,b){e=T||1/0,t=Math.min(b||33,e)},fps:function(T){r=1e3/(T||240),a=h.time*1e3+r},add:function(T,b,w){var M=b?function(R,N,D,L){T(R,N,D,L),h.remove(M)}:T;return h.remove(T),o[w?"unshift":"push"](M),kb(),M},remove:function(T,b){~(b=o.indexOf(T))&&o.splice(b,1)&&v>=b&&v--},_listeners:o},h})(),kb=function(){return!vE&&Wu.wake()},Ki={},nhe=/^[\d.\-M][\d.\-,\s]/,ihe=/["']/g,she=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),s=n[0],r=1,a=n.length,o,l,c;r<a;r++)l=n[r],o=r!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[s]=isNaN(c)?c.replace(ihe,"").trim():+c,s=l.substr(o+1).trim();return t},rhe=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<n?e.indexOf(")",n+1):n)},ahe=function(e){var t=(e+"").split("("),n=Ki[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[she(t[1])]:rhe(e).split(",").map(cq)):Ki._CE&&nhe.test(e)?Ki._CE("",e):n},Aq=function(e){return function(t){return 1-e(1-t)}},Cq=function i(e,t){for(var n=e._first,s;n;)n instanceof Tc?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=t)),n=n._next},Dv=function(e,t){return e&&(Ca(e)?e:Ki[e]||ahe(e))||t},v_=function(e,t,n,s){n===void 0&&(n=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:n,easeInOut:s},a;return uu(e,function(o){Ki[o]=ed[o]=r,Ki[a=o.toLowerCase()]=n;for(var l in r)Ki[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ki[o+"."+l]=r[l]}),r},Rq=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},ZP=function i(e,t,n){var s=t>=1?t:1,r=(n||(e?.3:.45))/(t<1?t:1),a=r/s3*(Math.asin(1/s)||0),o=function(d){return d===1?1:s*Math.pow(2,-10*d)*Lfe((d-a)*r)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:Rq(o);return r=s3/r,l.config=function(c,d){return i(e,c,d)},l},QP=function i(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1:0},s=e==="out"?n:e==="in"?function(r){return 1-n(1-r)}:Rq(n);return s.config=function(r){return i(e,r)},s};uu("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;v_(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Ki.Linear.easeNone=Ki.none=Ki.Linear.easeIn;v_("Elastic",ZP("in"),ZP("out"),ZP());(function(i,e){var t=1/e,n=2*t,s=2.5*t,r=function(o){return o<t?i*o*o:o<n?i*Math.pow(o-1.5/e,2)+.75:o<s?i*(o-=2.25/e)*o+.9375:i*Math.pow(o-2.625/e,2)+.984375};v_("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);v_("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});v_("Circ",function(i){return-(Q7(1-i*i)-1)});v_("Sine",function(i){return i===1?1:-Ofe(i*Dfe)+1});v_("Back",QP("in"),QP("out"),QP());Ki.SteppedEase=Ki.steps=ed.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,s=e+(t?0:1),r=t?1:0,a=1-ur;return function(o){return((s*aw(0,a,o)|0)+r)*n}}};Ib.ease=Ki["quad.out"];uu("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return OI+=i+","+i+"Params,"});var Nq=function(e,t){this.id=Pfe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:oq,this.set=t?t.getSetter:zI},_E=(function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Vb(this,+t.duration,1,1),this.data=t.data,Wr&&(this._ctx=Wr,Wr.data.push(this)),vE||Wu.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Vb(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(kb(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(t2(this,n),!r._dp||r.parent||fq(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Vh(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===ur||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),lq(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+zG(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+zG(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,s):this._repeat?zb(this._tTime,r)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-ur?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?XR(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-ur?0:this._rts,this.totalTime(aw(-Math.abs(this._delay),this.totalDuration(),r),s!==!1),e2(this),kfe(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(kb(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ur&&(this._tTime-=ur)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&Vh(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(cu(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?XR(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Ife);var s=_l;return _l=n,UI(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),_l=s,this},e.globalTime=function(n){for(var s=this,r=arguments.length?n:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):r},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,VG(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,VG(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(Ld(this,n),cu(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,cu(s)),this._dur||(this._zTime=-ur),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-ur:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ur,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=s&&r<this.endTime(!0)-ur)},e.eventCallback=function(n,s,r){var a=this.vars;return arguments.length>1?(s?(a[n]=s,r&&(a[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=s)):delete a[n],this):a[n]},e.then=function(n){var s=this;return new Promise(function(r){var a=Ca(n)?n:uq,o=function(){var c=s.then;s.then=null,Ca(a)&&(a=a(s))&&(a.then||a===s)&&(s.then=c),r(a),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?o():s._prom=o})},e.kill=function(){M1(this)},i})();td(_E.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ur,_prom:0,_ps:!1,_rts:1});var Tc=(function(i){Z7(e,i);function e(n,s){var r;return n===void 0&&(n={}),r=i.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=cu(n.sortChildren),oa&&Vh(n.parent||oa,tm(r),s),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&hq(tm(r),n.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,a){return z1(0,arguments,this),this},t.from=function(s,r,a){return z1(1,arguments,this),this},t.fromTo=function(s,r,a,o){return z1(2,arguments,this),this},t.set=function(s,r,a){return r.duration=0,r.parent=this,F1(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new so(s,r,Ld(this,a),1),this},t.call=function(s,r,a){return Vh(this,so.delayedCall(0,s,r),a)},t.staggerTo=function(s,r,a,o,l,c,d){return a.duration=r,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=d,a.parent=this,new so(s,a,Ld(this,l)),this},t.staggerFrom=function(s,r,a,o,l,c,d){return a.runBackwards=1,F1(a).immediateRender=cu(a.immediateRender),this.staggerTo(s,r,a,o,l,c,d)},t.staggerFromTo=function(s,r,a,o,l,c,d,h){return o.startAt=a,F1(o).immediateRender=cu(o.immediateRender),this.staggerTo(s,r,o,l,c,d,h)},t.render=function(s,r,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=s<=0?0:ro(s),h=this._zTime<0!=s<0&&(this._initted||!c),m,v,_,x,T,b,w,M,R,N,D,L;if(this!==oa&&d>l&&s>=0&&(d=l),d!==this._tTime||a||h){if(o!==this._time&&c&&(d+=this._time-o,s+=this._time-o),m=d,R=this._start,M=this._ts,b=!M,h&&(c||(o=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(D=this._yoyo,T=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(T*100+s,r,a);if(m=ro(d%T),d===l?(x=this._repeat,m=c):(N=ro(d/T),x=~~N,x&&x===N&&(m=c,x--),m>c&&(m=c)),N=zb(this._tTime,T),!o&&this._tTime&&N!==x&&this._tTime-N*T-this._dur<=0&&(N=x),D&&x&1&&(m=c-m,L=1),x!==N&&!this._lock){var F=D&&N&1,I=F===(D&&x&1);if(x<N&&(F=!F),o=F?0:d%c?c:d,this._lock=1,this.render(o||(L?0:ro(x*T)),r,!c)._lock=0,this._tTime=d,!r&&this.parent&&qu(this,"onRepeat"),this.vars.repeatRefresh&&!L&&(this.invalidate()._lock=1),o&&o!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,I&&(this._lock=2,o=F?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!L&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;Cq(this,L)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=$fe(this,ro(o),ro(m)),w&&(d-=m-(m=w._start))),this._tTime=d,this._time=m,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,o=0),!o&&d&&!r&&!N&&(qu(this,"onStart"),this._tTime!==d))return this;if(m>=o&&s>=0)for(v=this._first;v;){if(_=v._next,(v._act||m>=v._start)&&v._ts&&w!==v){if(v.parent!==this)return this.render(s,r,a);if(v.render(v._ts>0?(m-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(m-v._start)*v._ts,r,a),m!==this._time||!this._ts&&!b){w=0,_&&(d+=this._zTime=-ur);break}}v=_}else{v=this._last;for(var z=s<0?s:m;v;){if(_=v._prev,(v._act||z<=v._end)&&v._ts&&w!==v){if(v.parent!==this)return this.render(s,r,a);if(v.render(v._ts>0?(z-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(z-v._start)*v._ts,r,a||_l&&UI(v)),m!==this._time||!this._ts&&!b){w=0,_&&(d+=this._zTime=z?-ur:ur);break}}v=_}}if(w&&!r&&(this.pause(),w.render(m>=o?0:-ur)._zTime=m>=o?1:-1,this._ts))return this._start=R,e2(this),this.render(s,r,a);this._onUpdate&&!r&&qu(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&o)&&(R===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&dy(this,1),!r&&!(s<0&&!o)&&(d||o||!l)&&(qu(this,d===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var a=this;if(Mm(r)||(r=Ld(this,r,s)),!(s instanceof _E)){if(Wl(s))return s.forEach(function(o){return a.add(o,r)}),this;if(Yo(s))return this.addLabel(s,r);if(Ca(s))s=so.delayedCall(0,s);else return this}return this!==s?Vh(this,s,r):this},t.getChildren=function(s,r,a,o){s===void 0&&(s=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),o===void 0&&(o=-Vd);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof so?r&&l.push(c):(a&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,a)))),c=c._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===s)return r[a]},t.remove=function(s){return Yo(s)?this.removeLabel(s):Ca(s)?this.killTweensOf(s):(s.parent===this&&JN(this,s),s===this._recent&&(this._recent=this._last),Nv(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ro(Wu.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),i.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=Ld(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,a){var o=so.delayedCall(0,r||gE,a);return o.data="isPause",this._hasPause=1,Vh(this,o,Ld(this,s))},t.removePause=function(s){var r=this._first;for(s=Ld(this,s);r;)r._start===s&&r.data==="isPause"&&dy(r),r=r._next},t.killTweensOf=function(s,r,a){for(var o=this.getTweensOf(s,a),l=o.length;l--;)Wg!==o[l]&&o[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var a=[],o=kd(s),l=this._first,c=Mm(r),d;l;)l instanceof so?Ffe(l._targets,o)&&(c?(!Wg||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&a.push(l):(d=l.getTweensOf(o,r)).length&&a.push.apply(a,d),l=l._next;return a},t.tweenTo=function(s,r){r=r||{};var a=this,o=Ld(a,s),l=r,c=l.startAt,d=l.onStart,h=l.onStartParams,m=l.immediateRender,v,_=so.to(a,td({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:r.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||ur,onStart:function(){if(a.pause(),!v){var T=r.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());_._dur!==T&&Vb(_,T,0,1).render(_._time,!0,!0),v=1}d&&d.apply(_,h||[])}},r));return m?_.render(0):_},t.tweenFromTo=function(s,r,a){return this.tweenTo(r,td({startAt:{time:Ld(this,s)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),kG(this,Ld(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),kG(this,Ld(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+ur)},t.shiftChildren=function(s,r,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=s,o._end+=s),o=o._next;if(r)for(c in l)l[c]>=a&&(l[c]+=s);return Nv(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return i.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Nv(this)},t.totalDuration=function(s){var r=0,a=this,o=a._last,l=Vd,c,d,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-s:s));if(a._dirty){for(h=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Vh(a,o,d-o._delay,1)._lock=0):l=d,d<0&&o._ts&&(r-=d,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),l=0),o._end>r&&o._ts&&(r=o._end),o=c;Vb(a,a===oa&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(s){if(oa._ts&&(lq(oa,XR(s,oa)),aq=Wu.frame),Wu.frame>=IG){IG+=Ku.autoSleep||120;var r=oa._first;if((!r||!r._ts)&&Ku.autoSleep&&Wu._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Wu.sleep()}}},e})(_E);td(Tc.prototype,{_lock:0,_hasPause:0,_forcing:0});var ohe=function(e,t,n,s,r,a,o){var l=new du(this._pt,e,t,0,1,Bq,null,r),c=0,d=0,h,m,v,_,x,T,b,w;for(l.b=n,l.e=s,n+="",s+="",(b=~s.indexOf("random("))&&(s=yE(s)),a&&(w=[n,s],a(w,e,t),n=w[0],s=w[1]),m=n.match(XP)||[];h=XP.exec(s);)_=h[0],x=s.substring(c,h.index),v?v=(v+1)%5:x.substr(-5)==="rgba("&&(v=1),_!==m[d++]&&(T=parseFloat(m[d-1])||0,l._pt={_next:l._pt,p:x||d===1?x:",",s:T,c:_.charAt(1)==="="?bb(T,_)-T:parseFloat(_)-T,m:v&&v<4?Math.round:0},c=XP.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=o,(tq.test(s)||b)&&(l.e=0),this._pt=l,l},BI=function(e,t,n,s,r,a,o,l,c,d){Ca(s)&&(s=s(r||0,e,a));var h=e[t],m=n!=="get"?n:Ca(h)?c?e[t.indexOf("set")||!Ca(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,v=Ca(h)?c?fhe:Lq:FI,_;if(Yo(s)&&(~s.indexOf("random(")&&(s=yE(s)),s.charAt(1)==="="&&(_=bb(m,s)+(Vl(m)||0),(_||_===0)&&(s=_))),!d||m!==s||h3)return!isNaN(m*s)&&s!==""?(_=new du(this._pt,e,t,+m||0,s-(m||0),typeof h=="boolean"?phe:Uq,0,v),c&&(_.fp=c),o&&_.modifier(o,this,e),this._pt=_):(!h&&!(t in e)&&DI(t,s),ohe.call(this,e,t,m,s,v,l||Ku.stringFilter,c))},lhe=function(e,t,n,s,r){if(Ca(e)&&(e=V1(e,r,t,n,s)),!sp(e)||e.style&&e.nodeType||Wl(e)||J7(e))return Yo(e)?V1(e,r,t,n,s):e;var a={},o;for(o in e)a[o]=V1(e[o],r,t,n,s);return a},Dq=function(e,t,n,s,r,a){var o,l,c,d;if(Gu[e]&&(o=new Gu[e]).init(r,o.rawVars?t[e]:lhe(t[e],s,r,a,n),n,s,a)!==!1&&(n._pt=l=new du(n._pt,r,e,0,1,o.render,o,0,o.priority),n!==ab))for(c=n._ptLookup[n._targets.indexOf(r)],d=o._props.length;d--;)c[o._props[d]]=l;return o},Wg,h3,II=function i(e,t,n){var s=e.vars,r=s.ease,a=s.startAt,o=s.immediateRender,l=s.lazy,c=s.onUpdate,d=s.runBackwards,h=s.yoyoEase,m=s.keyframes,v=s.autoRevert,_=e._dur,x=e._startAt,T=e._targets,b=e.parent,w=b&&b.data==="nested"?b.vars.targets:T,M=e._overwrite==="auto"&&!AI,R=e.timeline,N,D,L,F,I,z,H,Y,Z,se,oe,G,K;if(R&&(!m||!r)&&(r="none"),e._ease=Dv(r,Ib.ease),e._yEase=h?Aq(Dv(h===!0?r:h,Ib.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!R&&!!s.runBackwards,!R||m&&!s.stagger){if(Y=T[0]?Rv(T[0]).harness:0,G=Y&&s[Y.prop],N=qR(s,PI),x&&(x._zTime<0&&x.progress(1),t<0&&d&&o&&!v?x.render(-1,!0):x.revert(d&&_?bR:Bfe),x._lazy=0),a){if(dy(e._startAt=so.set(T,td({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!x&&cu(l),startAt:null,delay:0,onUpdate:c&&function(){return qu(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_l||!o&&!v)&&e._startAt.revert(bR),o&&_&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(d&&_&&!x){if(t&&(o=!1),L=td({overwrite:!1,data:"isFromStart",lazy:o&&!x&&cu(l),immediateRender:o,stagger:0,parent:b},N),G&&(L[Y.prop]=G),dy(e._startAt=so.set(T,L)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_l?e._startAt.revert(bR):e._startAt.render(-1,!0)),e._zTime=t,!o)i(e._startAt,ur,ur);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&cu(l)||l&&!_,D=0;D<T.length;D++){if(I=T[D],H=I._gsap||LI(T)[D]._gsap,e._ptLookup[D]=se={},o3[H.id]&&ny.length&&WR(),oe=w===T?D:w.indexOf(I),Y&&(Z=new Y).init(I,G||N,e,oe,w)!==!1&&(e._pt=F=new du(e._pt,I,Z.name,0,1,Z.render,Z,0,Z.priority),Z._props.forEach(function($){se[$]=F}),Z.priority&&(z=1)),!Y||G)for(L in N)Gu[L]&&(Z=Dq(L,N,e,oe,I,w))?Z.priority&&(z=1):se[L]=F=BI.call(e,I,L,"get",N[L],oe,w,0,s.stringFilter);e._op&&e._op[D]&&e.kill(I,e._op[D]),M&&e._pt&&(Wg=e,oa.killTweensOf(I,se,e.globalTime(t)),K=!e.parent,Wg=0),e._pt&&l&&(o3[H.id]=1)}z&&Iq(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!K,m&&t<=0&&R.render(Vd,!0,!0)},che=function(e,t,n,s,r,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,h,m,v;if(!c)for(c=e._ptCache[t]=[],m=e._ptLookup,v=e._targets.length;v--;){if(d=m[v][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return h3=1,e.vars[t]="+=0",II(e,o),h3=0,l?mE(t+" not eligible for reset"):1;c.push(d)}for(v=c.length;v--;)h=c[v],d=h._pt||h,d.s=(s||s===0)&&!r?s:d.s+(s||0)+a*d.c,d.c=n-d.s,h.e&&(h.e=ja(n)+Vl(h.e)),h.b&&(h.b=d.s+Vl(h.b))},uhe=function(e,t){var n=e[0]?Rv(e[0]).harness:0,s=n&&n.aliases,r,a,o,l;if(!s)return t;r=Fb({},t);for(a in s)if(a in r)for(l=s[a].split(","),o=l.length;o--;)r[l[o]]=r[a];return r},dhe=function(e,t,n,s){var r=t.ease||s||"power1.inOut",a,o;if(Wl(t))o=n[e]||(n[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:r})});else for(a in t)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:r})},V1=function(e,t,n,s,r){return Ca(e)?e.call(t,n,s,r):Yo(e)&&~e.indexOf("random(")?yE(e):e},Pq=OI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Oq={};uu(Pq+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return Oq[i]=1});var so=(function(i){Z7(e,i);function e(n,s,r,a){var o;typeof s=="number"&&(r.duration=s,s=r,r=null),o=i.call(this,a?s:F1(s))||this;var l=o.vars,c=l.duration,d=l.delay,h=l.immediateRender,m=l.stagger,v=l.overwrite,_=l.keyframes,x=l.defaults,T=l.scrollTrigger,b=l.yoyoEase,w=s.parent||oa,M=(Wl(n)||J7(n)?Mm(n[0]):"length"in s)?[n]:kd(n),R,N,D,L,F,I,z,H;if(o._targets=M.length?LI(M):mE("GSAP target "+n+" not found. https://gsap.com",!Ku.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=v,_||m||FA(c)||FA(d)){if(s=o.vars,R=o.timeline=new Tc({data:"nested",defaults:x||{},targets:w&&w.data==="nested"?w.vars.targets:M}),R.kill(),R.parent=R._dp=tm(o),R._start=0,m||FA(c)||FA(d)){if(L=M.length,z=m&&yq(m),sp(m))for(F in m)~Pq.indexOf(F)&&(H||(H={}),H[F]=m[F]);for(N=0;N<L;N++)D=qR(s,Oq),D.stagger=0,b&&(D.yoyoEase=b),H&&Fb(D,H),I=M[N],D.duration=+V1(c,tm(o),N,I,M),D.delay=(+V1(d,tm(o),N,I,M)||0)-o._delay,!m&&L===1&&D.delay&&(o._delay=d=D.delay,o._start+=d,D.delay=0),R.to(I,D,z?z(N,I,M):0),R._ease=Ki.none;R.duration()?c=d=0:o.timeline=0}else if(_){F1(td(R.vars.defaults,{ease:"none"})),R._ease=Dv(_.ease||s.ease||"none");var Y=0,Z,se,oe;if(Wl(_))_.forEach(function(G){return R.to(M,G,">")}),R.duration();else{D={};for(F in _)F==="ease"||F==="easeEach"||dhe(F,_[F],D,_.easeEach);for(F in D)for(Z=D[F].sort(function(G,K){return G.t-K.t}),Y=0,N=0;N<Z.length;N++)se=Z[N],oe={ease:se.e,duration:(se.t-(N?Z[N-1].t:0))/100*c},oe[F]=se.v,R.to(M,oe,Y),Y+=oe.duration;R.duration()<c&&R.to({},{duration:c-R.duration()})}}c||o.duration(c=R.duration())}else o.timeline=0;return v===!0&&!AI&&(Wg=tm(o),oa.killTweensOf(M),Wg=0),Vh(w,tm(o),r),s.reversed&&o.reverse(),s.paused&&o.paused(!0),(h||!c&&!_&&o._start===ro(w._time)&&cu(h)&&Gfe(tm(o))&&w.data!=="nested")&&(o._tTime=-ur,o.render(Math.max(0,-d)||0)),T&&hq(tm(o),T),o}var t=e.prototype;return t.render=function(s,r,a){var o=this._time,l=this._tDur,c=this._dur,d=s<0,h=s>l-ur&&!d?l:s<ur?0:s,m,v,_,x,T,b,w,M,R;if(!c)jfe(this,s,r,a);else if(h!==this._tTime||!s||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=h,M=this.timeline,this._repeat){if(x=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(x*100+s,r,a);if(m=ro(h%x),h===l?(_=this._repeat,m=c):(T=ro(h/x),_=~~T,_&&_===T?(m=c,_--):m>c&&(m=c)),b=this._yoyo&&_&1,b&&(R=this._yEase,m=c-m),T=zb(this._tTime,x),m===o&&!a&&this._initted&&_===T)return this._tTime=h,this;_!==T&&(M&&this._yEase&&Cq(M,b),this.vars.repeatRefresh&&!b&&!this._lock&&m!==x&&this._initted&&(this._lock=a=1,this.render(ro(x*_),!0).invalidate()._lock=0))}if(!this._initted){if(pq(this,d?s:m,a,r,h))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&_!==T))return this;if(c!==this._dur)return this.render(s,r,a)}if(this._tTime=h,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(R||this._ease)(m/c),this._from&&(this.ratio=w=1-w),!o&&h&&!r&&!T&&(qu(this,"onStart"),this._tTime!==h))return this;for(v=this._pt;v;)v.r(w,v.d),v=v._next;M&&M.render(s<0?s:M._dur*M._ease(m/this._dur),r,a)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(d&&l3(this,s,r,a),qu(this,"onUpdate")),this._repeat&&_!==T&&this.vars.onRepeat&&!r&&this.parent&&qu(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&l3(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&dy(this,1),!r&&!(d&&!o)&&(h||o||b)&&(qu(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),i.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,a,o,l){vE||Wu.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||II(this,c),d=this._ease(c/this._dur),che(this,s,r,a,o,d,c,l)?this.resetTo(s,r,a,o,1):(t2(this,0),this.parent||dq(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?M1(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_l),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,Wg&&Wg.vars.overwrite!==!0)._first||M1(this),this.parent&&a!==this.timeline.totalDuration()&&Vb(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=s?kd(s):o,c=this._ptLookup,d=this._pt,h,m,v,_,x,T,b;if((!r||r==="all")&&Vfe(o,l))return r==="all"&&(this._pt=0),M1(this);for(h=this._op=this._op||[],r!=="all"&&(Yo(r)&&(x={},uu(r,function(w){return x[w]=1}),r=x),r=uhe(o,r)),b=o.length;b--;)if(~l.indexOf(o[b])){m=c[b],r==="all"?(h[b]=r,_=m,v={}):(v=h[b]=h[b]||{},_=r);for(x in _)T=m&&m[x],T&&((!("kill"in T.d)||T.d.kill(x)===!0)&&JN(this,T,"_pt"),delete m[x]),v!=="all"&&(v[x]=1)}return this._initted&&!this._pt&&d&&M1(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return z1(1,arguments)},e.delayedCall=function(s,r,a,o){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(s,r,a){return z1(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,a){return oa.killTweensOf(s,r,a)},e})(_E);td(so.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});uu("staggerTo,staggerFrom,staggerFromTo",function(i){so[i]=function(){var e=new Tc,t=u3.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var FI=function(e,t,n){return e[t]=n},Lq=function(e,t,n){return e[t](n)},fhe=function(e,t,n,s){return e[t](s.fp,n)},hhe=function(e,t,n){return e.setAttribute(t,n)},zI=function(e,t){return Ca(e[t])?Lq:CI(e[t])&&e.setAttribute?hhe:FI},Uq=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},phe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Bq=function(e,t){var n=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=t.c}t.set(t.t,t.p,s,t)},VI=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},mhe=function(e,t,n,s){for(var r=this._pt,a;r;)a=r._next,r.p===s&&r.modifier(e,t,n),r=a},ghe=function(e){for(var t=this._pt,n,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?JN(this,t,"_pt"):t.dep||(n=1),t=s;return!n},yhe=function(e,t,n,s){s.mSet(e,t,s.m.call(s.tween,n,s.mt),s)},Iq=function(e){for(var t=e._pt,n,s,r,a;t;){for(n=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:a)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:a=t,t=n}e._pt=r},du=(function(){function i(t,n,s,r,a,o,l,c,d){this.t=n,this.s=r,this.c=a,this.p=s,this.r=o||Uq,this.d=l||this,this.set=c||FI,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,s,r){this.mSet=this.mSet||this.set,this.set=yhe,this.m=n,this.mt=r,this.tween=s},i})();uu(OI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return PI[i]=1});ed.TweenMax=ed.TweenLite=so;ed.TimelineLite=ed.TimelineMax=Tc;oa=new Tc({sortChildren:!1,defaults:Ib,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ku.stringFilter=Mq;var Pv=[],TR={},vhe=[],HG=0,_he=0,JP=function(e){return(TR[e]||vhe).map(function(t){return t()})},p3=function(){var e=Date.now(),t=[];e-HG>2&&(JP("matchMediaInit"),Pv.forEach(function(n){var s=n.queries,r=n.conditions,a,o,l,c;for(o in s)a=Fh.matchMedia(s[o]).matches,a&&(l=1),a!==r[o]&&(r[o]=a,c=1);c&&(n.revert(),l&&t.push(n))}),JP("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),HG=e,JP("matchMedia"))},Fq=(function(){function i(t,n){this.selector=n&&d3(n),this.data=[],this._r=[],this.isReverted=!1,this.id=_he++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,s,r){Ca(n)&&(r=s,s=n,n=Ca);var a=this,o=function(){var c=Wr,d=a.selector,h;return c&&c!==a&&c.data.push(a),r&&(a.selector=d3(r)),Wr=a,h=s.apply(a,arguments),Ca(h)&&a._r.push(h),Wr=c,a.selector=d,a.isReverted=!1,h};return a.last=o,n===Ca?o(a,function(l){return a.add(null,l)}):n?a[n]=o:o},e.ignore=function(n){var s=Wr;Wr=null,n(this),Wr=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof i?n.push.apply(n,s.getTweens()):s instanceof so&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var r=this;if(n?(function(){for(var o=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(n)}),l=r.data.length;l--;)c=r.data[l],c instanceof Tc?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof so)&&c.revert&&c.revert(n);r._r.forEach(function(d){return d(n,r)}),r.isReverted=!0})():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),s)for(var a=Pv.length;a--;)Pv[a].id===this.id&&Pv.splice(a,1)},e.revert=function(n){this.kill(n||{})},i})(),xhe=(function(){function i(t){this.contexts=[],this.scope=t,Wr&&Wr.data.push(this)}var e=i.prototype;return e.add=function(n,s,r){sp(n)||(n={matches:n});var a=new Fq(0,r||this.scope),o=a.conditions={},l,c,d;Wr&&!a.selector&&(a.selector=Wr.selector),this.contexts.push(a),s=a.add("onMatch",s),a.queries=n;for(c in n)c==="all"?d=1:(l=Fh.matchMedia(n[c]),l&&(Pv.indexOf(a)<0&&Pv.push(a),(o[c]=l.matches)&&(d=1),l.addListener?l.addListener(p3):l.addEventListener("change",p3)));return d&&s(a,function(h){return a.add(null,h)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},i})(),YR={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(s){return Tq(s)})},timeline:function(e){return new Tc(e)},getTweensOf:function(e,t){return oa.getTweensOf(e,t)},getProperty:function(e,t,n,s){Yo(e)&&(e=kd(e)[0]);var r=Rv(e||{}).get,a=n?uq:cq;return n==="native"&&(n=""),e&&(t?a((Gu[t]&&Gu[t].get||r)(e,t,n,s)):function(o,l,c){return a((Gu[o]&&Gu[o].get||r)(e,o,l,c))})},quickSetter:function(e,t,n){if(e=kd(e),e.length>1){var s=e.map(function(d){return mu.quickSetter(d,t,n)}),r=s.length;return function(d){for(var h=r;h--;)s[h](d)}}e=e[0]||{};var a=Gu[t],o=Rv(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(d){var h=new a;ab._pt=0,h.init(e,n?d+n:d,ab,0,[e]),h.render(1,h),ab._pt&&VI(1,ab)}:o.set(e,l);return a?c:function(d){return c(e,l,n?d+n:d,o,1)}},quickTo:function(e,t,n){var s,r=mu.to(e,td((s={},s[t]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),a=function(l,c,d){return r.resetTo(t,l,c,d)};return a.tween=r,a},isTweening:function(e){return oa.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Dv(e.ease,Ib.ease)),FG(Ib,e||{})},config:function(e){return FG(Ku,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.plugins,r=e.defaults,a=e.extendTimeline;(s||"").split(",").forEach(function(o){return o&&!Gu[o]&&!ed[o]&&mE(t+" effect requires "+o+" plugin.")}),YP[t]=function(o,l,c){return n(kd(o),td(l||{},r),c)},a&&(Tc.prototype[t]=function(o,l,c){return this.add(YP[t](o,sp(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Ki[e]=Dv(t)},parseEase:function(e,t){return arguments.length?Dv(e,t):Ki},getById:function(e){return oa.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Tc(e),s,r;for(n.smoothChildTiming=cu(e.smoothChildTiming),oa.remove(n),n._dp=0,n._time=n._tTime=oa._time,s=oa._first;s;)r=s._next,(t||!(!s._dur&&s instanceof so&&s.vars.onComplete===s._targets[0]))&&Vh(n,s,s._start-s._delay),s=r;return Vh(oa,n,0),n},context:function(e,t){return e?new Fq(e,t):Wr},matchMedia:function(e){return new xhe(e)},matchMediaRefresh:function(){return Pv.forEach(function(e){var t=e.conditions,n,s;for(s in t)t[s]&&(t[s]=!1,n=1);n&&e.revert()})||p3()},addEventListener:function(e,t){var n=TR[e]||(TR[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=TR[e],s=n&&n.indexOf(t);s>=0&&n.splice(s,1)},utils:{wrap:Qfe,wrapYoyo:Jfe,distribute:yq,random:_q,snap:vq,normalize:Zfe,getUnit:Vl,clamp:qfe,splitColor:Eq,toArray:kd,selector:d3,mapRange:bq,pipe:Yfe,unitize:Kfe,interpolate:ehe,shuffle:gq},install:sq,effects:YP,ticker:Wu,updateRoot:Tc.updateRoot,plugins:Gu,globalTimeline:oa,core:{PropTween:du,globals:rq,Tween:so,Timeline:Tc,Animation:_E,getCache:Rv,_removeLinkedListItem:JN,reverting:function(){return _l},context:function(e){return e&&Wr&&(Wr.data.push(e),e._ctx=Wr),Wr},suppressOverwrites:function(e){return AI=e}}};uu("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return YR[i]=so[i]});Wu.add(Tc.updateRoot);ab=YR.to({},{duration:0});var bhe=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},She=function(e,t){var n=e._targets,s,r,a;for(s in t)for(r=n.length;r--;)a=e._ptLookup[r][s],a&&(a=a.d)&&(a._pt&&(a=bhe(a,s)),a&&a.modifier&&a.modifier(t[s],e,n[r],s))},eO=function(e,t){return{name:e,headless:1,rawVars:1,init:function(s,r,a){a._onInit=function(o){var l,c;if(Yo(r)&&(l={},uu(r,function(d){return l[d]=1}),r=l),t){l={};for(c in r)l[c]=t(r[c]);r=l}She(o,r)}}}},mu=YR.registerPlugin({name:"attr",init:function(e,t,n,s,r){var a,o,l;this.tween=n;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],s,r,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)_l?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},eO("roundProps",f3),eO("modifiers"),eO("snap",vq))||YR;so.version=Tc.version=mu.version="3.13.0";iq=1;RI()&&kb();Ki.Power0;Ki.Power1;Ki.Power2;Ki.Power3;Ki.Power4;Ki.Linear;Ki.Quad;Ki.Cubic;Ki.Quart;Ki.Quint;Ki.Strong;Ki.Elastic;Ki.Back;Ki.SteppedEase;Ki.Bounce;Ki.Sine;Ki.Expo;Ki.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var jG,qg,Sb,kI,xv,$G,GI,The=function(){return typeof window<"u"},Am={},fv=180/Math.PI,Tb=Math.PI/180,gx=Math.atan2,WG=1e8,HI=/([A-Z])/g,Ehe=/(left|right|width|margin|padding|x)/i,whe=/[\s,\(]\S/,Hh={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},m3=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Mhe=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ahe=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Che=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},zq=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Vq=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Rhe=function(e,t,n){return e.style[t]=n},Nhe=function(e,t,n){return e.style.setProperty(t,n)},Dhe=function(e,t,n){return e._gsap[t]=n},Phe=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Ohe=function(e,t,n,s,r){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},Lhe=function(e,t,n,s,r){var a=e._gsap;a[t]=n,a.renderTransform(r,a)},ua="transform",fu=ua+"Origin",Uhe=function i(e,t){var n=this,s=this.target,r=s.style,a=s._gsap;if(e in Am&&r){if(this.tfm=this.tfm||{},e!=="transform")e=Hh[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=im(s,o)}):this.tfm[e]=a.x?a[e]:im(s,e),e===fu&&(this.tfm.zOrigin=a.zOrigin);else return Hh.transform.split(",").forEach(function(o){return i.call(n,o,t)});if(this.props.indexOf(ua)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(fu,t,"")),e=ua}(r||t)&&this.props.push(e,t,r[e])},kq=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Bhe=function(){var e=this.props,t=this.target,n=t.style,s=t._gsap,r,a;for(r=0;r<e.length;r+=3)e[r+1]?e[r+1]===2?t[e[r]](e[r+2]):t[e[r]]=e[r+2]:e[r+2]?n[e[r]]=e[r+2]:n.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(HI,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)s[a]=this.tfm[a];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=GI(),(!r||!r.isStart)&&!n[ua]&&(kq(n),s.zOrigin&&n[fu]&&(n[fu]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Gq=function(e,t){var n={target:e,props:[],revert:Bhe,save:Uhe};return e._gsap||mu.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(s){return n.save(s)}),n},Hq,g3=function(e,t){var n=qg.createElementNS?qg.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):qg.createElement(e);return n&&n.style?n:qg.createElement(e)},Gd=function i(e,t,n){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(HI,"-$1").toLowerCase())||s.getPropertyValue(t)||!n&&i(e,Gb(t)||t,1)||""},qG="O,Moz,ms,Ms,Webkit".split(","),Gb=function(e,t,n){var s=t||xv,r=s.style,a=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(qG[a]+e in r););return a<0?null:(a===3?"ms":a>=0?qG[a]:"")+e},y3=function(){The()&&window.document&&(jG=window,qg=jG.document,Sb=qg.documentElement,xv=g3("div")||{style:{}},g3("div"),ua=Gb(ua),fu=ua+"Origin",xv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Hq=!!Gb("perspective"),GI=mu.core.reverting,kI=1)},XG=function(e){var t=e.ownerSVGElement,n=g3("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),r;s.style.display="block",n.appendChild(s),Sb.appendChild(n);try{r=s.getBBox()}catch{}return n.removeChild(s),Sb.removeChild(n),r},YG=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},jq=function(e){var t,n;try{t=e.getBBox()}catch{t=XG(e),n=1}return t&&(t.width||t.height)||n||(t=XG(e)),t&&!t.width&&!t.x&&!t.y?{x:+YG(e,["x","cx","x1"])||0,y:+YG(e,["y","cy","y1"])||0,width:0,height:0}:t},$q=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&jq(e))},jv=function(e,t){if(t){var n=e.style,s;t in Am&&t!==fu&&(t=ua),n.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(s==="--"?t:t.replace(HI,"-$1").toLowerCase())):n.removeAttribute(t)}},Xg=function(e,t,n,s,r,a){var o=new du(e._pt,t,n,0,1,a?Vq:zq);return e._pt=o,o.b=s,o.e=r,e._props.push(n),o},KG={deg:1,rad:1,turn:1},Ihe={grid:1,flex:1},fy=function i(e,t,n,s){var r=parseFloat(n)||0,a=(n+"").trim().substr((r+"").length)||"px",o=xv.style,l=Ehe.test(t),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),h=100,m=s==="px",v=s==="%",_,x,T,b;if(s===a||!r||KG[s]||KG[a])return r;if(a!=="px"&&!m&&(r=i(e,t,n,"px")),b=e.getCTM&&$q(e),(v||a==="%")&&(Am[t]||~t.indexOf("adius")))return _=b?e.getBBox()[l?"width":"height"]:e[d],ja(v?r/_*h:r/100*_);if(o[l?"width":"height"]=h+(m?a:s),x=s!=="rem"&&~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,b&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===qg||!x.appendChild)&&(x=qg.body),T=x._gsap,T&&v&&T.width&&l&&T.time===Wu.time&&!T.uncache)return ja(r/T.width*h);if(v&&(t==="height"||t==="width")){var w=e.style[t];e.style[t]=h+s,_=e[d],w?e.style[t]=w:jv(e,t)}else(v||a==="%")&&!Ihe[Gd(x,"display")]&&(o.position=Gd(e,"position")),x===e&&(o.position="static"),x.appendChild(xv),_=xv[d],x.removeChild(xv),o.position="absolute";return l&&v&&(T=Rv(x),T.time=Wu.time,T.width=x[d]),ja(m?_*r/h:_&&r?h/_*r:0)},im=function(e,t,n,s){var r;return kI||y3(),t in Hh&&t!=="transform"&&(t=Hh[t],~t.indexOf(",")&&(t=t.split(",")[0])),Am[t]&&t!=="transform"?(r=bE(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:ZR(Gd(e,fu))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=KR[t]&&KR[t](e,t,n)||Gd(e,t)||oq(e,t)||(t==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?fy(e,t,r,n)+n:r},Fhe=function(e,t,n,s){if(!n||n==="none"){var r=Gb(t,e,1),a=r&&Gd(e,r,1);a&&a!==n?(t=r,n=a):t==="borderColor"&&(n=Gd(e,"borderTopColor"))}var o=new du(this._pt,e.style,t,0,1,Bq),l=0,c=0,d,h,m,v,_,x,T,b,w,M,R,N;if(o.b=n,o.e=s,n+="",s+="",s.substring(0,6)==="var(--"&&(s=Gd(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(x=e.style[t],e.style[t]=s,s=Gd(e,t)||s,x?e.style[t]=x:jv(e,t)),d=[n,s],Mq(d),n=d[0],s=d[1],m=n.match(rb)||[],N=s.match(rb)||[],N.length){for(;h=rb.exec(s);)T=h[0],w=s.substring(l,h.index),_?_=(_+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(_=1),T!==(x=m[c++]||"")&&(v=parseFloat(x)||0,R=x.substr((v+"").length),T.charAt(1)==="="&&(T=bb(v,T)+R),b=parseFloat(T),M=T.substr((b+"").length),l=rb.lastIndex-M.length,M||(M=M||Ku.units[t]||R,l===s.length&&(s+=M,o.e+=M)),R!==M&&(v=fy(e,t,x,M)||0),o._pt={_next:o._pt,p:w||c===1?w:",",s:v,c:b-v,m:_&&_<4||t==="zIndex"?Math.round:0});o.c=l<s.length?s.substring(l,s.length):""}else o.r=t==="display"&&s==="none"?Vq:zq;return tq.test(s)&&(o.e=0),this._pt=o,o},ZG={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},zhe=function(e){var t=e.split(" "),n=t[0],s=t[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),t[0]=ZG[n]||n,t[1]=ZG[s]||s,t.join(" ")},Vhe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,s=n.style,r=t.u,a=n._gsap,o,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)o=r[c],Am[o]&&(l=1,o=o==="transformOrigin"?fu:ua),jv(n,o);l&&(jv(n,ua),a&&(a.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",bE(n,1),a.uncache=1,kq(s)))}},KR={clearProps:function(e,t,n,s,r){if(r.data!=="isFromStart"){var a=e._pt=new du(e._pt,t,n,0,0,Vhe);return a.u=s,a.pr=-10,a.tween=r,e._props.push(n),1}}},xE=[1,0,0,1,0,0],Wq={},qq=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},QG=function(e){var t=Gd(e,ua);return qq(t)?xE:t.substr(7).match(eq).map(ja)},jI=function(e,t){var n=e._gsap||Rv(e),s=e.style,r=QG(e),a,o,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?xE:r):(r===xE&&!e.offsetParent&&e!==Sb&&!n.svg&&(l=s.display,s.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,o=e.nextElementSibling,Sb.appendChild(e)),r=QG(e),l?s.display=l:jv(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):Sb.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},v3=function(e,t,n,s,r,a){var o=e._gsap,l=r||jI(e,!0),c=o.xOrigin||0,d=o.yOrigin||0,h=o.xOffset||0,m=o.yOffset||0,v=l[0],_=l[1],x=l[2],T=l[3],b=l[4],w=l[5],M=t.split(" "),R=parseFloat(M[0])||0,N=parseFloat(M[1])||0,D,L,F,I;n?l!==xE&&(L=v*T-_*x)&&(F=R*(T/L)+N*(-x/L)+(x*w-T*b)/L,I=R*(-_/L)+N*(v/L)-(v*w-_*b)/L,R=F,N=I):(D=jq(e),R=D.x+(~M[0].indexOf("%")?R/100*D.width:R),N=D.y+(~(M[1]||M[0]).indexOf("%")?N/100*D.height:N)),s||s!==!1&&o.smooth?(b=R-c,w=N-d,o.xOffset=h+(b*v+w*x)-b,o.yOffset=m+(b*_+w*T)-w):o.xOffset=o.yOffset=0,o.xOrigin=R,o.yOrigin=N,o.smooth=!!s,o.origin=t,o.originIsAbsolute=!!n,e.style[fu]="0px 0px",a&&(Xg(a,o,"xOrigin",c,R),Xg(a,o,"yOrigin",d,N),Xg(a,o,"xOffset",h,o.xOffset),Xg(a,o,"yOffset",m,o.yOffset)),e.setAttribute("data-svg-origin",R+" "+N)},bE=function(e,t){var n=e._gsap||new Nq(e);if("x"in n&&!t&&!n.uncache)return n;var s=e.style,r=n.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=Gd(e,fu)||"0",d,h,m,v,_,x,T,b,w,M,R,N,D,L,F,I,z,H,Y,Z,se,oe,G,K,$,ce,q,ue,Ae,Ne,we,pt;return d=h=m=x=T=b=w=M=R=0,v=_=1,n.svg=!!(e.getCTM&&$q(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[ua]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ua]!=="none"?l[ua]:"")),s.scale=s.rotate=s.translate="none"),L=jI(e,n.svg),n.svg&&(n.uncache?($=e.getBBox(),c=n.xOrigin-$.x+"px "+(n.yOrigin-$.y)+"px",K=""):K=!t&&e.getAttribute("data-svg-origin"),v3(e,K||c,!!K||n.originIsAbsolute,n.smooth!==!1,L)),N=n.xOrigin||0,D=n.yOrigin||0,L!==xE&&(H=L[0],Y=L[1],Z=L[2],se=L[3],d=oe=L[4],h=G=L[5],L.length===6?(v=Math.sqrt(H*H+Y*Y),_=Math.sqrt(se*se+Z*Z),x=H||Y?gx(Y,H)*fv:0,w=Z||se?gx(Z,se)*fv+x:0,w&&(_*=Math.abs(Math.cos(w*Tb))),n.svg&&(d-=N-(N*H+D*Z),h-=D-(N*Y+D*se))):(pt=L[6],Ne=L[7],q=L[8],ue=L[9],Ae=L[10],we=L[11],d=L[12],h=L[13],m=L[14],F=gx(pt,Ae),T=F*fv,F&&(I=Math.cos(-F),z=Math.sin(-F),K=oe*I+q*z,$=G*I+ue*z,ce=pt*I+Ae*z,q=oe*-z+q*I,ue=G*-z+ue*I,Ae=pt*-z+Ae*I,we=Ne*-z+we*I,oe=K,G=$,pt=ce),F=gx(-Z,Ae),b=F*fv,F&&(I=Math.cos(-F),z=Math.sin(-F),K=H*I-q*z,$=Y*I-ue*z,ce=Z*I-Ae*z,we=se*z+we*I,H=K,Y=$,Z=ce),F=gx(Y,H),x=F*fv,F&&(I=Math.cos(F),z=Math.sin(F),K=H*I+Y*z,$=oe*I+G*z,Y=Y*I-H*z,G=G*I-oe*z,H=K,oe=$),T&&Math.abs(T)+Math.abs(x)>359.9&&(T=x=0,b=180-b),v=ja(Math.sqrt(H*H+Y*Y+Z*Z)),_=ja(Math.sqrt(G*G+pt*pt)),F=gx(oe,G),w=Math.abs(F)>2e-4?F*fv:0,R=we?1/(we<0?-we:we):0),n.svg&&(K=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!qq(Gd(e,ua)),K&&e.setAttribute("transform",K))),Math.abs(w)>90&&Math.abs(w)<270&&(r?(v*=-1,w+=x<=0?180:-180,x+=x<=0?180:-180):(_*=-1,w+=w<=0?180:-180)),t=t||n.uncache,n.x=d-((n.xPercent=d&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=m+a,n.scaleX=ja(v),n.scaleY=ja(_),n.rotation=ja(x)+o,n.rotationX=ja(T)+o,n.rotationY=ja(b)+o,n.skewX=w+o,n.skewY=M+o,n.transformPerspective=R+a,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(s[fu]=ZR(c)),n.xOffset=n.yOffset=0,n.force3D=Ku.force3D,n.renderTransform=n.svg?Ghe:Hq?Xq:khe,n.uncache=0,n},ZR=function(e){return(e=e.split(" "))[0]+" "+e[1]},tO=function(e,t,n){var s=Vl(t);return ja(parseFloat(t)+parseFloat(fy(e,"x",n+"px",s)))+s},khe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Xq(e,t)},V0="0deg",kT="0px",k0=") ",Xq=function(e,t){var n=t||this,s=n.xPercent,r=n.yPercent,a=n.x,o=n.y,l=n.z,c=n.rotation,d=n.rotationY,h=n.rotationX,m=n.skewX,v=n.skewY,_=n.scaleX,x=n.scaleY,T=n.transformPerspective,b=n.force3D,w=n.target,M=n.zOrigin,R="",N=b==="auto"&&e&&e!==1||b===!0;if(M&&(h!==V0||d!==V0)){var D=parseFloat(d)*Tb,L=Math.sin(D),F=Math.cos(D),I;D=parseFloat(h)*Tb,I=Math.cos(D),a=tO(w,a,L*I*-M),o=tO(w,o,-Math.sin(D)*-M),l=tO(w,l,F*I*-M+M)}T!==kT&&(R+="perspective("+T+k0),(s||r)&&(R+="translate("+s+"%, "+r+"%) "),(N||a!==kT||o!==kT||l!==kT)&&(R+=l!==kT||N?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+k0),c!==V0&&(R+="rotate("+c+k0),d!==V0&&(R+="rotateY("+d+k0),h!==V0&&(R+="rotateX("+h+k0),(m!==V0||v!==V0)&&(R+="skew("+m+", "+v+k0),(_!==1||x!==1)&&(R+="scale("+_+", "+x+k0),w.style[ua]=R||"translate(0, 0)"},Ghe=function(e,t){var n=t||this,s=n.xPercent,r=n.yPercent,a=n.x,o=n.y,l=n.rotation,c=n.skewX,d=n.skewY,h=n.scaleX,m=n.scaleY,v=n.target,_=n.xOrigin,x=n.yOrigin,T=n.xOffset,b=n.yOffset,w=n.forceCSS,M=parseFloat(a),R=parseFloat(o),N,D,L,F,I;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=Tb,c*=Tb,N=Math.cos(l)*h,D=Math.sin(l)*h,L=Math.sin(l-c)*-m,F=Math.cos(l-c)*m,c&&(d*=Tb,I=Math.tan(c-d),I=Math.sqrt(1+I*I),L*=I,F*=I,d&&(I=Math.tan(d),I=Math.sqrt(1+I*I),N*=I,D*=I)),N=ja(N),D=ja(D),L=ja(L),F=ja(F)):(N=h,F=m,D=L=0),(M&&!~(a+"").indexOf("px")||R&&!~(o+"").indexOf("px"))&&(M=fy(v,"x",a,"px"),R=fy(v,"y",o,"px")),(_||x||T||b)&&(M=ja(M+_-(_*N+x*L)+T),R=ja(R+x-(_*D+x*F)+b)),(s||r)&&(I=v.getBBox(),M=ja(M+s/100*I.width),R=ja(R+r/100*I.height)),I="matrix("+N+","+D+","+L+","+F+","+M+","+R+")",v.setAttribute("transform",I),w&&(v.style[ua]=I)},Hhe=function(e,t,n,s,r){var a=360,o=Yo(r),l=parseFloat(r)*(o&&~r.indexOf("rad")?fv:1),c=l-s,d=s+c+"deg",h,m;return o&&(h=r.split("_")[1],h==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),h==="cw"&&c<0?c=(c+a*WG)%a-~~(c/a)*a:h==="ccw"&&c>0&&(c=(c-a*WG)%a-~~(c/a)*a)),e._pt=m=new du(e._pt,t,n,s,c,Mhe),m.e=d,m.u="deg",e._props.push(n),m},JG=function(e,t){for(var n in t)e[n]=t[n];return e},jhe=function(e,t,n){var s=JG({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,c,d,h,m,v,_;s.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),a[ua]=t,o=bE(n,1),jv(n,ua),n.setAttribute("transform",c)):(c=getComputedStyle(n)[ua],a[ua]=t,o=bE(n,1),a[ua]=c);for(l in Am)c=s[l],d=o[l],c!==d&&r.indexOf(l)<0&&(v=Vl(c),_=Vl(d),h=v!==_?fy(n,l,c,_):parseFloat(c),m=parseFloat(d),e._pt=new du(e._pt,o,l,h,m-h,m3),e._pt.u=_||0,e._props.push(l));JG(o,s)};uu("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",s="Bottom",r="Left",a=(e<3?[t,n,s,r]:[t+r,t+n,s+n,s+r]).map(function(o){return e<2?i+o:"border"+o+i});KR[e>1?"border"+i:i]=function(o,l,c,d,h){var m,v;if(arguments.length<4)return m=a.map(function(_){return im(o,_,c)}),v=m.join(" "),v.split(m[0]).length===5?m[0]:v;m=(d+"").split(" "),v={},a.forEach(function(_,x){return v[_]=m[x]=m[x]||m[(x-1)/2|0]}),o.init(l,v,h)}});var Yq={name:"css",register:y3,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,s,r){var a=this._props,o=e.style,l=n.vars.startAt,c,d,h,m,v,_,x,T,b,w,M,R,N,D,L,F;kI||y3(),this.styles=this.styles||Gq(e),F=this.styles.props,this.tween=n;for(x in t)if(x!=="autoRound"&&(d=t[x],!(Gu[x]&&Dq(x,t,n,s,e,r)))){if(v=typeof d,_=KR[x],v==="function"&&(d=d.call(n,s,e,r),v=typeof d),v==="string"&&~d.indexOf("random(")&&(d=yE(d)),_)_(this,e,x,d,n)&&(L=1);else if(x.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(x)+"").trim(),d+="",iy.lastIndex=0,iy.test(c)||(T=Vl(c),b=Vl(d)),b?T!==b&&(c=fy(e,x,c,b)+b):T&&(d+=T),this.add(o,"setProperty",c,d,s,r,0,0,x),a.push(x),F.push(x,0,o[x]);else if(v!=="undefined"){if(l&&x in l?(c=typeof l[x]=="function"?l[x].call(n,s,e,r):l[x],Yo(c)&&~c.indexOf("random(")&&(c=yE(c)),Vl(c+"")||c==="auto"||(c+=Ku.units[x]||Vl(im(e,x))||""),(c+"").charAt(1)==="="&&(c=im(e,x))):c=im(e,x),m=parseFloat(c),w=v==="string"&&d.charAt(1)==="="&&d.substr(0,2),w&&(d=d.substr(2)),h=parseFloat(d),x in Hh&&(x==="autoAlpha"&&(m===1&&im(e,"visibility")==="hidden"&&h&&(m=0),F.push("visibility",0,o.visibility),Xg(this,o,"visibility",m?"inherit":"hidden",h?"inherit":"hidden",!h)),x!=="scale"&&x!=="transform"&&(x=Hh[x],~x.indexOf(",")&&(x=x.split(",")[0]))),M=x in Am,M){if(this.styles.save(x),v==="string"&&d.substring(0,6)==="var(--"&&(d=Gd(e,d.substring(4,d.indexOf(")"))),h=parseFloat(d)),R||(N=e._gsap,N.renderTransform&&!t.parseTransform||bE(e,t.parseTransform),D=t.smoothOrigin!==!1&&N.smooth,R=this._pt=new du(this._pt,o,ua,0,1,N.renderTransform,N,0,-1),R.dep=1),x==="scale")this._pt=new du(this._pt,N,"scaleY",N.scaleY,(w?bb(N.scaleY,w+h):h)-N.scaleY||0,m3),this._pt.u=0,a.push("scaleY",x),x+="X";else if(x==="transformOrigin"){F.push(fu,0,o[fu]),d=zhe(d),N.svg?v3(e,d,0,D,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==N.zOrigin&&Xg(this,N,"zOrigin",N.zOrigin,b),Xg(this,o,x,ZR(c),ZR(d)));continue}else if(x==="svgOrigin"){v3(e,d,1,D,0,this);continue}else if(x in Wq){Hhe(this,N,x,m,w?bb(m,w+d):d);continue}else if(x==="smoothOrigin"){Xg(this,N,"smooth",N.smooth,d);continue}else if(x==="force3D"){N[x]=d;continue}else if(x==="transform"){jhe(this,d,e);continue}}else x in o||(x=Gb(x)||x);if(M||(h||h===0)&&(m||m===0)&&!whe.test(d)&&x in o)T=(c+"").substr((m+"").length),h||(h=0),b=Vl(d)||(x in Ku.units?Ku.units[x]:T),T!==b&&(m=fy(e,x,c,b)),this._pt=new du(this._pt,M?N:o,x,m,(w?bb(m,w+h):h)-m,!M&&(b==="px"||x==="zIndex")&&t.autoRound!==!1?Che:m3),this._pt.u=b||0,T!==b&&b!=="%"&&(this._pt.b=c,this._pt.r=Ahe);else if(x in o)Fhe.call(this,e,x,c,w?w+d:d);else if(x in e)this.add(e,x,c||e[x],w?w+d:d,s,r);else if(x!=="parseTransform"){DI(x,d);continue}M||(x in o?F.push(x,0,o[x]):typeof e[x]=="function"?F.push(x,2,e[x]()):F.push(x,1,c||e[x])),a.push(x)}}L&&Iq(this)},render:function(e,t){if(t.tween._time||!GI())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:im,aliases:Hh,getSetter:function(e,t,n){var s=Hh[t];return s&&s.indexOf(",")<0&&(t=s),t in Am&&t!==fu&&(e._gsap.x||im(e,"x"))?n&&$G===n?t==="scale"?Phe:Dhe:($G=n||{})&&(t==="scale"?Ohe:Lhe):e.style&&!CI(e.style[t])?Rhe:~t.indexOf("-")?Nhe:zI(e,t)},core:{_removeProperty:jv,_getMatrix:jI}};mu.utils.checkPrefix=Gb;mu.core.getStyleSaver=Gq;(function(i,e,t,n){var s=uu(i+","+e+","+t,function(r){Am[r]=1});uu(e,function(r){Ku.units[r]="deg",Wq[r]=1}),Hh[s[13]]=i+","+e,uu(n,function(r){var a=r.split(":");Hh[a[1]]=s[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");uu("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Ku.units[i]="px"});mu.registerPlugin(Yq);var Eb=mu.registerPlugin(Yq)||mu;Eb.core.Tween;/*!
 * @gsap/react 2.1.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let e5=typeof document<"u"?P.useLayoutEffect:P.useEffect,t5=i=>i&&!Array.isArray(i)&&typeof i=="object",zA=[],$he={},Kq=Eb;const n2=(i,e=zA)=>{let t=$he;t5(i)?(t=i,i=null,e="dependencies"in t?t.dependencies:zA):t5(e)&&(t=e,e="dependencies"in t?t.dependencies:zA),i&&typeof i!="function"&&console.warn("First parameter must be a function or config object");const{scope:n,revertOnUpdate:s}=t,r=P.useRef(!1),a=P.useRef(Kq.context(()=>{},n)),o=P.useRef(c=>a.current.add(null,c)),l=e&&e.length&&!s;return l&&e5(()=>(r.current=!0,()=>a.current.revert()),zA),e5(()=>{if(i&&a.current.add(i,n),!l||!r.current)return()=>a.current.revert()},e),{context:a.current,contextSafe:o.current}};n2.register=i=>{Kq=i};n2.headless=!0;var C1={exports:{}},Whe=C1.exports,n5;function qhe(){return n5||(n5=1,(function(i,e){(function(t,n){n(e)})(Whe,(function(t){function n(De,Q){for(var he=0;he<Q.length;he++){var ie=Q[he];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(De,ie.key,ie)}}function s(De,Q,he){return Q&&n(De.prototype,Q),De}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var r,a,o,l,c,d,h,m,v,_,x,T,b,w=function(){return r||typeof window<"u"&&(r=window.gsap)&&r.registerPlugin&&r},M=1,R=[],N=[],D=[],L=Date.now,F=function(Q,he){return he},I=function(){var Q=v.core,he=Q.bridge||{},ie=Q._scrollers,re=Q._proxies;ie.push.apply(ie,N),re.push.apply(re,D),N=ie,D=re,F=function(nt,Ge){return he[nt](Ge)}},z=function(Q,he){return~D.indexOf(Q)&&D[D.indexOf(Q)+1][he]},H=function(Q){return!!~_.indexOf(Q)},Y=function(Q,he,ie,re,Me){return Q.addEventListener(he,ie,{passive:re!==!1,capture:!!Me})},Z=function(Q,he,ie,re){return Q.removeEventListener(he,ie,!!re)},se="scrollLeft",oe="scrollTop",G=function(){return x&&x.isPressed||N.cache++},K=function(Q,he){var ie=function re(Me){if(Me||Me===0){M&&(o.history.scrollRestoration="manual");var nt=x&&x.isPressed;Me=re.v=Math.round(Me)||(x&&x.iOS?1:0),Q(Me),re.cacheID=N.cache,nt&&F("ss",Me)}else(he||N.cache!==re.cacheID||F("ref"))&&(re.cacheID=N.cache,re.v=Q());return re.v+re.offset};return ie.offset=0,Q&&ie},$={s:se,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:K(function(De){return arguments.length?o.scrollTo(De,ce.sc()):o.pageXOffset||l[se]||c[se]||d[se]||0})},ce={s:oe,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:$,sc:K(function(De){return arguments.length?o.scrollTo($.sc(),De):o.pageYOffset||l[oe]||c[oe]||d[oe]||0})},q=function(Q,he){return(he&&he._ctx&&he._ctx.selector||r.utils.toArray)(Q)[0]||(typeof Q=="string"&&r.config().nullTargetWarn!==!1?console.warn("Element not found:",Q):null)},ue=function(Q,he){for(var ie=he.length;ie--;)if(he[ie]===Q||he[ie].contains(Q))return!0;return!1},Ae=function(Q,he){var ie=he.s,re=he.sc;H(Q)&&(Q=l.scrollingElement||c);var Me=N.indexOf(Q),nt=re===ce.sc?1:2;!~Me&&(Me=N.push(Q)-1),N[Me+nt]||Y(Q,"scroll",G);var Ge=N[Me+nt],Gt=Ge||(N[Me+nt]=K(z(Q,ie),!0)||(H(Q)?re:K(function(En){return arguments.length?Q[ie]=En:Q[ie]})));return Gt.target=Q,Ge||(Gt.smooth=r.getProperty(Q,"scrollBehavior")==="smooth"),Gt},Ne=function(Q,he,ie){var re=Q,Me=Q,nt=L(),Ge=nt,Gt=he||50,En=Math.max(500,Gt*3),kn=function(Mn,ks){var ss=L();ks||ss-nt>Gt?(Me=re,re=Mn,Ge=nt,nt=ss):ie?re+=Mn:re=Me+(Mn-Me)/(ss-Ge)*(nt-Ge)},oi=function(){Me=re=ie?0:re,Ge=nt=0},wn=function(Mn){var ks=Ge,ss=Me,Rr=L();return(Mn||Mn===0)&&Mn!==re&&kn(Mn),nt===Ge||Rr-Ge>En?0:(re+(ie?ss:-ss))/((ie?Rr:nt)-ks)*1e3};return{update:kn,reset:oi,getVelocity:wn}},we=function(Q,he){return he&&!Q._gsapAllow&&Q.preventDefault(),Q.changedTouches?Q.changedTouches[0]:Q},pt=function(Q){var he=Math.max.apply(Math,Q),ie=Math.min.apply(Math,Q);return Math.abs(he)>=Math.abs(ie)?he:ie},Ee=function(){v=r.core.globals().ScrollTrigger,v&&v.core&&I()},Ue=function(Q){return r=Q||w(),!a&&r&&typeof document<"u"&&document.body&&(o=window,l=document,c=l.documentElement,d=l.body,_=[o,l,c,d],r.utils.clamp,b=r.core.context||function(){},m="onpointerenter"in d?"pointer":"mouse",h=Ve.isTouch=o.matchMedia&&o.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in o||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,T=Ve.eventTypes=("ontouchstart"in c?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in c?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return M=0},500),Ee(),a=1),a};$.op=ce,N.cache=0;var Ve=(function(){function De(he){this.init(he)}var Q=De.prototype;return Q.init=function(ie){a||Ue(r)||console.warn("Please gsap.registerPlugin(Observer)"),v||Ee();var re=ie.tolerance,Me=ie.dragMinimum,nt=ie.type,Ge=ie.target,Gt=ie.lineHeight,En=ie.debounce,kn=ie.preventDefault,oi=ie.onStop,wn=ie.onStopDelay,gt=ie.ignore,Mn=ie.wheelSpeed,ks=ie.event,ss=ie.onDragStart,Rr=ie.onDragEnd,Ci=ie.onDrag,mr=ie.onPress,Gn=ie.onRelease,Qo=ie.onRight,ls=ie.onLeft,Bn=ie.onUp,ya=ie.onDown,La=ie.onChangeX,vn=ie.onChangeY,rr=ie.onChange,en=ie.onToggleX,kc=ie.onToggleY,Zr=ie.onHover,Ya=ie.onHoverEnd,Qr=ie.onMove,Bi=ie.ignoreCheck,Nr=ie.isNormalizer,zi=ie.onGestureStart,Le=ie.onGestureEnd,ji=ie.onWheel,Tu=ie.onEnable,Gc=ie.onDisable,Ro=ie.onClick,Jo=ie.scrollSpeed,va=ie.capture,cs=ie.allowClicks,_a=ie.lockAxis,Ir=ie.onLockAxis;this.target=Ge=q(Ge)||c,this.vars=ie,gt&&(gt=r.utils.toArray(gt)),re=re||1e-9,Me=Me||0,Mn=Mn||1,Jo=Jo||1,nt=nt||"wheel,touch,pointer",En=En!==!1,Gt||(Gt=parseFloat(o.getComputedStyle(d).lineHeight)||22);var tc,Ua,Ji,pi,Gs,ho,Dr,Ke=this,po=0,gr=0,Eu=ie.passive||!kn&&ie.passive!==!1,es=Ae(Ge,$),No=Ae(Ge,ce),Ka=es(),Hc=No(),yr=~nt.indexOf("touch")&&!~nt.indexOf("pointer")&&T[0]==="pointerdown",Os=H(Ge),ar=Ge.ownerDocument||l,gs=[0,0,0],ys=[0,0,0],Fr=0,pd=function(){return Fr=L()},Hs=function(ln,Di){return(Ke.event=ln)&&gt&&ue(ln.target,gt)||Di&&yr&&ln.pointerType!=="touch"||Bi&&Bi(ln,Di)},nc=function(){Ke._vx.reset(),Ke._vy.reset(),Ua.pause(),oi&&oi(Ke)},Dl=function(){var ln=Ke.deltaX=pt(gs),Di=Ke.deltaY=pt(ys),zt=Math.abs(ln)>=re,_n=Math.abs(Di)>=re;rr&&(zt||_n)&&rr(Ke,ln,Di,gs,ys),zt&&(Qo&&Ke.deltaX>0&&Qo(Ke),ls&&Ke.deltaX<0&&ls(Ke),La&&La(Ke),en&&Ke.deltaX<0!=po<0&&en(Ke),po=Ke.deltaX,gs[0]=gs[1]=gs[2]=0),_n&&(ya&&Ke.deltaY>0&&ya(Ke),Bn&&Ke.deltaY<0&&Bn(Ke),vn&&vn(Ke),kc&&Ke.deltaY<0!=gr<0&&kc(Ke),gr=Ke.deltaY,ys[0]=ys[1]=ys[2]=0),(pi||Ji)&&(Qr&&Qr(Ke),Ji&&(ss&&Ji===1&&ss(Ke),Ci&&Ci(Ke),Ji=0),pi=!1),ho&&!(ho=!1)&&Ir&&Ir(Ke),Gs&&(ji(Ke),Gs=!1),tc=0},Do=function(ln,Di,zt){gs[zt]+=ln,ys[zt]+=Di,Ke._vx.update(ln),Ke._vy.update(Di),En?tc||(tc=requestAnimationFrame(Dl)):Dl()},md=function(ln,Di){_a&&!Dr&&(Ke.axis=Dr=Math.abs(ln)>Math.abs(Di)?"x":"y",ho=!0),Dr!=="y"&&(gs[2]+=ln,Ke._vx.update(ln,!0)),Dr!=="x"&&(ys[2]+=Di,Ke._vy.update(Di,!0)),En?tc||(tc=requestAnimationFrame(Dl)):Dl()},el=function(ln){if(!Hs(ln,1)){ln=we(ln,kn);var Di=ln.clientX,zt=ln.clientY,_n=Di-Ke.x,rn=zt-Ke.y,Pn=Ke.isDragging;Ke.x=Di,Ke.y=zt,(Pn||(_n||rn)&&(Math.abs(Ke.startX-Di)>=Me||Math.abs(Ke.startY-zt)>=Me))&&(Ji=Pn?2:1,Pn||(Ke.isDragging=!0),md(_n,rn))}},Po=Ke.onPress=function(Hn){Hs(Hn,1)||Hn&&Hn.button||(Ke.axis=Dr=null,Ua.pause(),Ke.isPressed=!0,Hn=we(Hn),po=gr=0,Ke.startX=Ke.x=Hn.clientX,Ke.startY=Ke.y=Hn.clientY,Ke._vx.reset(),Ke._vy.reset(),Y(Nr?Ge:ar,T[1],el,Eu,!0),Ke.deltaX=Ke.deltaY=0,mr&&mr(Ke))},yi=Ke.onRelease=function(Hn){if(!Hs(Hn,1)){Z(Nr?Ge:ar,T[1],el,!0);var ln=!isNaN(Ke.y-Ke.startY),Di=Ke.isDragging,zt=Di&&(Math.abs(Ke.x-Ke.startX)>3||Math.abs(Ke.y-Ke.startY)>3),_n=we(Hn);!zt&&ln&&(Ke._vx.reset(),Ke._vy.reset(),kn&&cs&&r.delayedCall(.08,function(){if(L()-Fr>300&&!Hn.defaultPrevented){if(Hn.target.click)Hn.target.click();else if(ar.createEvent){var rn=ar.createEvent("MouseEvents");rn.initMouseEvent("click",!0,!0,o,1,_n.screenX,_n.screenY,_n.clientX,_n.clientY,!1,!1,!1,!1,0,null),Hn.target.dispatchEvent(rn)}}})),Ke.isDragging=Ke.isGesturing=Ke.isPressed=!1,oi&&Di&&!Nr&&Ua.restart(!0),Ji&&Dl(),Rr&&Di&&Rr(Ke),Gn&&Gn(Ke,zt)}},zr=function(ln){return ln.touches&&ln.touches.length>1&&(Ke.isGesturing=!0)&&zi(ln,Ke.isDragging)},mo=function(){return(Ke.isGesturing=!1)||Le(Ke)},qi=function(ln){if(!Hs(ln)){var Di=es(),zt=No();Do((Di-Ka)*Jo,(zt-Hc)*Jo,1),Ka=Di,Hc=zt,oi&&Ua.restart(!0)}},tl=function(ln){if(!Hs(ln)){ln=we(ln,kn),ji&&(Gs=!0);var Di=(ln.deltaMode===1?Gt:ln.deltaMode===2?o.innerHeight:1)*Mn;Do(ln.deltaX*Di,ln.deltaY*Di,0),oi&&!Nr&&Ua.restart(!0)}},js=function(ln){if(!Hs(ln)){var Di=ln.clientX,zt=ln.clientY,_n=Di-Ke.x,rn=zt-Ke.y;Ke.x=Di,Ke.y=zt,pi=!0,oi&&Ua.restart(!0),(_n||rn)&&md(_n,rn)}},nl=function(ln){Ke.event=ln,Zr(Ke)},il=function(ln){Ke.event=ln,Ya(Ke)},gd=function(ln){return Hs(ln)||we(ln,kn)&&Ro(Ke)};Ua=Ke._dc=r.delayedCall(wn||.25,nc).pause(),Ke.deltaX=Ke.deltaY=0,Ke._vx=Ne(0,50,!0),Ke._vy=Ne(0,50,!0),Ke.scrollX=es,Ke.scrollY=No,Ke.isDragging=Ke.isGesturing=Ke.isPressed=!1,b(this),Ke.enable=function(Hn){return Ke.isEnabled||(Y(Os?ar:Ge,"scroll",G),nt.indexOf("scroll")>=0&&Y(Os?ar:Ge,"scroll",qi,Eu,va),nt.indexOf("wheel")>=0&&Y(Ge,"wheel",tl,Eu,va),(nt.indexOf("touch")>=0&&h||nt.indexOf("pointer")>=0)&&(Y(Ge,T[0],Po,Eu,va),Y(ar,T[2],yi),Y(ar,T[3],yi),cs&&Y(Ge,"click",pd,!0,!0),Ro&&Y(Ge,"click",gd),zi&&Y(ar,"gesturestart",zr),Le&&Y(ar,"gestureend",mo),Zr&&Y(Ge,m+"enter",nl),Ya&&Y(Ge,m+"leave",il),Qr&&Y(Ge,m+"move",js)),Ke.isEnabled=!0,Ke.isDragging=Ke.isGesturing=Ke.isPressed=pi=Ji=!1,Ke._vx.reset(),Ke._vy.reset(),Ka=es(),Hc=No(),Hn&&Hn.type&&Po(Hn),Tu&&Tu(Ke)),Ke},Ke.disable=function(){Ke.isEnabled&&(R.filter(function(Hn){return Hn!==Ke&&H(Hn.target)}).length||Z(Os?ar:Ge,"scroll",G),Ke.isPressed&&(Ke._vx.reset(),Ke._vy.reset(),Z(Nr?Ge:ar,T[1],el,!0)),Z(Os?ar:Ge,"scroll",qi,va),Z(Ge,"wheel",tl,va),Z(Ge,T[0],Po,va),Z(ar,T[2],yi),Z(ar,T[3],yi),Z(Ge,"click",pd,!0),Z(Ge,"click",gd),Z(ar,"gesturestart",zr),Z(ar,"gestureend",mo),Z(Ge,m+"enter",nl),Z(Ge,m+"leave",il),Z(Ge,m+"move",js),Ke.isEnabled=Ke.isPressed=Ke.isDragging=!1,Gc&&Gc(Ke))},Ke.kill=Ke.revert=function(){Ke.disable();var Hn=R.indexOf(Ke);Hn>=0&&R.splice(Hn,1),x===Ke&&(x=0)},R.push(Ke),Nr&&H(Ge)&&(x=Ke),Ke.enable(ks)},s(De,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),De})();Ve.version="3.13.0",Ve.create=function(De){return new Ve(De)},Ve.register=Ue,Ve.getAll=function(){return R.slice()},Ve.getById=function(De){return R.filter(function(Q){return Q.vars.id===De})[0]},w()&&r.registerPlugin(Ve);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Be,Mt,ct,Et,le,$e,Ze,Xe,We,_t,ut,ht,Bt,kt,X,W,Se,Fe,tt,et,Lt,wt,It,Zt,yt,Rt,Xt,Qt,Ct,An,xe,bt,Nt,$t,xt=1,at=Date.now,nn=at(),dn=0,_i=0,Si=function(Q,he,ie){var re=Hi(Q)&&(Q.substr(0,6)==="clamp("||Q.indexOf("max")>-1);return ie["_"+he+"Clamp"]=re,re?Q.substr(6,Q.length-7):Q},Ko=function(Q,he){return he&&(!Hi(Q)||Q.substr(0,6)!=="clamp(")?"clamp("+Q+")":Q},Ur=function De(){return _i&&requestAnimationFrame(De)},wr=function(){return kt=1},Ds=function(){return kt=0},Mr=function(Q){return Q},Na=function(Q){return Math.round(Q*1e5)/1e5||0},Zf=function(){return typeof window<"u"},Mo=function(){return Be||Zf()&&(Be=window.gsap)&&Be.registerPlugin&&Be},Yr=function(Q){return!!~Ze.indexOf(Q)},Ao=function(Q){return(Q==="Height"?xe:ct["inner"+Q])||le["client"+Q]||$e["client"+Q]},ms=function(Q){return z(Q,"getBoundingClientRect")||(Yr(Q)?function(){return xp.width=ct.innerWidth,xp.height=xe,xp}:function(){return Ps(Q)})},ec=function(Q,he,ie){var re=ie.d,Me=ie.d2,nt=ie.a;return(nt=z(Q,"getBoundingClientRect"))?function(){return nt()[re]}:function(){return(he?Ao(Me):Q["client"+Me])||0}},Ic=function(Q,he){return!he||~D.indexOf(Q)?ms(Q):function(){return xp}},Da=function(Q,he){var ie=he.s,re=he.d2,Me=he.d,nt=he.a;return Math.max(0,(ie="scroll"+re)&&(nt=z(Q,ie))?nt()-ms(Q)()[Me]:Yr(Q)?(le[ie]||$e[ie])-Ao(re):Q[ie]-Q["offset"+re])},El=function(Q,he){for(var ie=0;ie<tt.length;ie+=3)(!he||~he.indexOf(tt[ie+1]))&&Q(tt[ie],tt[ie+1],tt[ie+2])},Hi=function(Q){return typeof Q=="string"},Ar=function(Q){return typeof Q=="function"},Fc=function(Q){return typeof Q=="number"},ee=function(Q){return typeof Q=="object"},be=function(Q,he,ie){return Q&&Q.progress(he?0:1)&&ie&&Q.pause()},Ie=function(Q,he){if(Q.enabled){var ie=Q._ctx?Q._ctx.add(function(){return he(Q)}):he(Q);ie&&ie.totalTime&&(Q.callbackAnimation=ie)}},je=Math.abs,Ce="left",St="top",Dt="right",Yt="bottom",Ut="width",fn="height",Tn="Right",sn="Left",qn="Top",Ti="Bottom",Jn="padding",fi="margin",Vn="Width",xn="Height",si="px",On=function(Q){return ct.getComputedStyle(Q)},Pa=function(Q){var he=On(Q).position;Q.style.position=he==="absolute"||he==="fixed"?he:"relative"},Zo=function(Q,he){for(var ie in he)ie in Q||(Q[ie]=he[ie]);return Q},Ps=function(Q,he){var ie=he&&On(Q)[X]!=="matrix(1, 0, 0, 1, 0, 0)"&&Be.to(Q,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),re=Q.getBoundingClientRect();return ie&&ie.progress(0).kill(),re},hr=function(Q,he){var ie=he.d2;return Q["offset"+ie]||Q["client"+ie]||0},is=function(Q){var he=[],ie=Q.labels,re=Q.duration(),Me;for(Me in ie)he.push(ie[Me]/re);return he},Xa=function(Q){return function(he){return Be.utils.snap(is(Q),he)}},Kr=function(Q){var he=Be.utils.snap(Q),ie=Array.isArray(Q)&&Q.slice(0).sort(function(re,Me){return re-Me});return ie?function(re,Me,nt){nt===void 0&&(nt=.001);var Ge;if(!Me)return he(re);if(Me>0){for(re-=nt,Ge=0;Ge<ie.length;Ge++)if(ie[Ge]>=re)return ie[Ge];return ie[Ge-1]}else for(Ge=ie.length,re+=nt;Ge--;)if(ie[Ge]<=re)return ie[Ge];return ie[0]}:function(re,Me,nt){nt===void 0&&(nt=.001);var Ge=he(re);return!Me||Math.abs(Ge-re)<nt||Ge-re<0==Me<0?Ge:he(Me<0?re-Q:re+Q)}},sr=function(Q){return function(he,ie){return Kr(is(Q))(he,ie.direction)}},Br=function(Q,he,ie,re){return ie.split(",").forEach(function(Me){return Q(he,Me,re)})},Vs=function(Q,he,ie,re,Me){return Q.addEventListener(he,ie,{passive:!re,capture:!!Me})},Ai=function(Q,he,ie,re){return Q.removeEventListener(he,ie,!!re)},yp=function(Q,he,ie){ie=ie&&ie.wheelHandler,ie&&(Q(he,"wheel",ie),Q(he,"touchmove",ie))},Qf={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},cd={toggleActions:"play",anticipatePin:0},of={top:0,left:0,center:.5,bottom:1,right:1},Jf=function(Q,he){if(Hi(Q)){var ie=Q.indexOf("="),re=~ie?+(Q.charAt(ie-1)+1)*parseFloat(Q.substr(ie+1)):0;~ie&&(Q.indexOf("%")>ie&&(re*=he/100),Q=Q.substr(0,ie-1)),Q=re+(Q in of?of[Q]*he:~Q.indexOf("%")?parseFloat(Q)*he/100:parseFloat(Q)||0)}return Q},vp=function(Q,he,ie,re,Me,nt,Ge,Gt){var En=Me.startColor,kn=Me.endColor,oi=Me.fontSize,wn=Me.indent,gt=Me.fontWeight,Mn=Et.createElement("div"),ks=Yr(ie)||z(ie,"pinType")==="fixed",ss=Q.indexOf("scroller")!==-1,Rr=ks?$e:ie,Ci=Q.indexOf("start")!==-1,mr=Ci?En:kn,Gn="border-color:"+mr+";font-size:"+oi+";color:"+mr+";font-weight:"+gt+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return Gn+="position:"+((ss||Gt)&&ks?"fixed;":"absolute;"),(ss||Gt||!ks)&&(Gn+=(re===ce?Dt:Yt)+":"+(nt+parseFloat(wn))+"px;"),Ge&&(Gn+="box-sizing:border-box;text-align:left;width:"+Ge.offsetWidth+"px;"),Mn._isStart=Ci,Mn.setAttribute("class","gsap-marker-"+Q+(he?" marker-"+he:"")),Mn.style.cssText=Gn,Mn.innerText=he||he===0?Q+"-"+he:Q,Rr.children[0]?Rr.insertBefore(Mn,Rr.children[0]):Rr.appendChild(Mn),Mn._offset=Mn["offset"+re.op.d2],ud(Mn,0,re,Ci),Mn},ud=function(Q,he,ie,re){var Me={display:"block"},nt=ie[re?"os2":"p2"],Ge=ie[re?"p2":"os2"];Q._isFlipped=re,Me[ie.a+"Percent"]=re?-100:0,Me[ie.a]=re?"1px":0,Me["border"+nt+Vn]=1,Me["border"+Ge+Vn]=0,Me[ie.p]=he+"px",Be.set(Q,Me)},ai=[],eh={},wl,dd=function(){return at()-dn>34&&(wl||(wl=requestAnimationFrame(Co)))},fd=function(){(!It||!It.isPressed||It.startX>$e.clientWidth)&&(N.cache++,It?wl||(wl=requestAnimationFrame(Co)):Co(),dn||Al("scrollStart"),dn=at())},lf=function(){Rt=ct.innerWidth,yt=ct.innerHeight},cf=function(Q){N.cache++,(Q===!0||!Bt&&!wt&&!Et.fullscreenElement&&!Et.webkitFullscreenElement&&(!Zt||Rt!==ct.innerWidth||Math.abs(ct.innerHeight-yt)>ct.innerHeight*.25))&&Xe.restart(!0)},Ml={},zc=[],th=function De(){return Ai(hi,"scrollEnd",De)||Rl(!0)},Al=function(Q){return Ml[Q]&&Ml[Q].map(function(he){return he()})||zc},Cr=[],qm=function(Q){for(var he=0;he<Cr.length;he+=5)(!Q||Cr[he+4]&&Cr[he+4].query===Q)&&(Cr[he].style.cssText=Cr[he+1],Cr[he].getBBox&&Cr[he].setAttribute("transform",Cr[he+2]||""),Cr[he+3].uncache=1)},nh=function(Q,he){var ie;for(W=0;W<ai.length;W++)ie=ai[W],ie&&(!he||ie._ctx===he)&&(Q?ie.kill(1):ie.revert(!0,!0));bt=!0,he&&qm(he),he||Al("revert")},Xm=function(Q,he){N.cache++,(he||!pr)&&N.forEach(function(ie){return Ar(ie)&&ie.cacheID++&&(ie.rec=0)}),Hi(Q)&&(ct.history.scrollRestoration=Ct=Q)},pr,Cl=0,ih,fo=function(){if(ih!==Cl){var Q=ih=Cl;requestAnimationFrame(function(){return Q===Cl&&Rl(!0)})}},xu=function(){$e.appendChild(An),xe=!It&&An.offsetHeight||ct.innerHeight,$e.removeChild(An)},uf=function(Q){return We(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(he){return he.style.display=Q?"none":"block"})},Rl=function(Q,he){if(le=Et.documentElement,$e=Et.body,Ze=[ct,Et,le,$e],dn&&!Q&&!bt){Vs(hi,"scrollEnd",th);return}xu(),pr=hi.isRefreshing=!0,N.forEach(function(re){return Ar(re)&&++re.cacheID&&(re.rec=re())});var ie=Al("refreshInit");et&&hi.sort(),he||nh(),N.forEach(function(re){Ar(re)&&(re.smooth&&(re.target.style.scrollBehavior="auto"),re(0))}),ai.slice(0).forEach(function(re){return re.refresh()}),bt=!1,ai.forEach(function(re){if(re._subPinOffset&&re.pin){var Me=re.vars.horizontal?"offsetWidth":"offsetHeight",nt=re.pin[Me];re.revert(!0,1),re.adjustPinSpacing(re.pin[Me]-nt),re.refresh()}}),Nt=1,uf(!0),ai.forEach(function(re){var Me=Da(re.scroller,re._dir),nt=re.vars.end==="max"||re._endClamp&&re.end>Me,Ge=re._startClamp&&re.start>=Me;(nt||Ge)&&re.setPositions(Ge?Me-1:re.start,nt?Math.max(Ge?Me:re.start+1,Me):re.end,!0)}),uf(!1),Nt=0,ie.forEach(function(re){return re&&re.render&&re.render(-1)}),N.forEach(function(re){Ar(re)&&(re.smooth&&requestAnimationFrame(function(){return re.target.style.scrollBehavior="smooth"}),re.rec&&re(re.rec))}),Xm(Ct,1),Xe.pause(),Cl++,pr=2,Co(2),ai.forEach(function(re){return Ar(re.vars.onRefresh)&&re.vars.onRefresh(re)}),pr=hi.isRefreshing=!1,Al("refresh")},Ym=0,Nl=1,Vc,Co=function(Q){if(Q===2||!pr&&!bt){hi.isUpdating=!0,Vc&&Vc.update(0);var he=ai.length,ie=at(),re=ie-nn>=50,Me=he&&ai[0].scroll();if(Nl=Ym>Me?-1:1,pr||(Ym=Me),re&&(dn&&!kt&&ie-dn>200&&(dn=0,Al("scrollEnd")),ut=nn,nn=ie),Nl<0){for(W=he;W-- >0;)ai[W]&&ai[W].update(0,re);Nl=1}else for(W=0;W<he;W++)ai[W]&&ai[W].update(0,re);hi.isUpdating=!1}wl=0},hd=[Ce,St,Yt,Dt,fi+Ti,fi+Tn,fi+qn,fi+sn,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],sh=hd.concat([Ut,fn,"boxSizing","max"+Vn,"max"+xn,"position",fi,Jn,Jn+qn,Jn+Tn,Jn+Ti,Jn+sn]),C_=function(Q,he,ie){bu(ie);var re=Q._gsap;if(re.spacerIsNative)bu(re.spacerState);else if(Q._gsap.swappedIn){var Me=he.parentNode;Me&&(Me.insertBefore(Q,he),Me.removeChild(he))}Q._gsap.swappedIn=!1},u0=function(Q,he,ie,re){if(!Q._gsap.swappedIn){for(var Me=hd.length,nt=he.style,Ge=Q.style,Gt;Me--;)Gt=hd[Me],nt[Gt]=ie[Gt];nt.position=ie.position==="absolute"?"absolute":"relative",ie.display==="inline"&&(nt.display="inline-block"),Ge[Yt]=Ge[Dt]="auto",nt.flexBasis=ie.flexBasis||"auto",nt.overflow="visible",nt.boxSizing="border-box",nt[Ut]=hr(Q,$)+si,nt[fn]=hr(Q,ce)+si,nt[Jn]=Ge[fi]=Ge[St]=Ge[Ce]="0",bu(re),Ge[Ut]=Ge["max"+Vn]=ie[Ut],Ge[fn]=Ge["max"+xn]=ie[fn],Ge[Jn]=ie[Jn],Q.parentNode!==he&&(Q.parentNode.insertBefore(he,Q),he.appendChild(Q)),Q._gsap.swappedIn=!0}},Oa=/([A-Z])/g,bu=function(Q){if(Q){var he=Q.t.style,ie=Q.length,re=0,Me,nt;for((Q.t._gsap||Be.core.getCache(Q.t)).uncache=1;re<ie;re+=2)nt=Q[re+1],Me=Q[re],nt?he[Me]=nt:he[Me]&&he.removeProperty(Me.replace(Oa,"-$1").toLowerCase())}},_p=function(Q){for(var he=sh.length,ie=Q.style,re=[],Me=0;Me<he;Me++)re.push(sh[Me],ie[sh[Me]]);return re.t=Q,re},R_=function(Q,he,ie){for(var re=[],Me=Q.length,nt=ie?8:0,Ge;nt<Me;nt+=2)Ge=Q[nt],re.push(Ge,Ge in he?he[Ge]:Q[nt+1]);return re.t=Q.t,re},xp={left:0,top:0},d0=function(Q,he,ie,re,Me,nt,Ge,Gt,En,kn,oi,wn,gt,Mn){Ar(Q)&&(Q=Q(Gt)),Hi(Q)&&Q.substr(0,3)==="max"&&(Q=wn+(Q.charAt(4)==="="?Jf("0"+Q.substr(3),ie):0));var ks=gt?gt.time():0,ss,Rr,Ci;if(gt&&gt.seek(0),isNaN(Q)||(Q=+Q),Fc(Q))gt&&(Q=Be.utils.mapRange(gt.scrollTrigger.start,gt.scrollTrigger.end,0,wn,Q)),Ge&&ud(Ge,ie,re,!0);else{Ar(he)&&(he=he(Gt));var mr=(Q||"0").split(" "),Gn,Qo,ls,Bn;Ci=q(he,Gt)||$e,Gn=Ps(Ci)||{},(!Gn||!Gn.left&&!Gn.top)&&On(Ci).display==="none"&&(Bn=Ci.style.display,Ci.style.display="block",Gn=Ps(Ci),Bn?Ci.style.display=Bn:Ci.style.removeProperty("display")),Qo=Jf(mr[0],Gn[re.d]),ls=Jf(mr[1]||"0",ie),Q=Gn[re.p]-En[re.p]-kn+Qo+Me-ls,Ge&&ud(Ge,ls,re,ie-ls<20||Ge._isStart&&ls>20),ie-=ie-ls}if(Mn&&(Gt[Mn]=Q||-.001,Q<0&&(Q=0)),nt){var ya=Q+ie,La=nt._isStart;ss="scroll"+re.d2,ud(nt,ya,re,La&&ya>20||!La&&(oi?Math.max($e[ss],le[ss]):nt.parentNode[ss])<=ya+1),oi&&(En=Ps(Ge),oi&&(nt.style[re.op.p]=En[re.op.p]-re.op.m-nt._offset+si))}return gt&&Ci&&(ss=Ps(Ci),gt.seek(wn),Rr=Ps(Ci),gt._caScrollDist=ss[re.p]-Rr[re.p],Q=Q/gt._caScrollDist*wn),gt&&gt.seek(ks),gt?Q:Math.round(Q)},bp=/(webkit|moz|length|cssText|inset)/i,Sp=function(Q,he,ie,re){if(Q.parentNode!==he){var Me=Q.style,nt,Ge;if(he===$e){Q._stOrig=Me.cssText,Ge=On(Q);for(nt in Ge)!+nt&&!bp.test(nt)&&Ge[nt]&&typeof Me[nt]=="string"&&nt!=="0"&&(Me[nt]=Ge[nt]);Me.top=ie,Me.left=re}else Me.cssText=Q._stOrig;Be.core.getCache(Q).uncache=1,he.appendChild(Q)}},f0=function(Q,he,ie){var re=he,Me=re;return function(nt){var Ge=Math.round(Q());return Ge!==re&&Ge!==Me&&Math.abs(Ge-re)>3&&Math.abs(Ge-Me)>3&&(nt=Ge,ie&&ie()),Me=re,re=Math.round(nt),re}},Tp=function(Q,he,ie){var re={};re[he.p]="+="+ie,Be.set(Q,re)},h0=function(Q,he){var ie=Ae(Q,he),re="_scroll"+he.p2,Me=function nt(Ge,Gt,En,kn,oi){var wn=nt.tween,gt=Gt.onComplete,Mn={};En=En||ie();var ks=f0(ie,En,function(){wn.kill(),nt.tween=0});return oi=kn&&oi||0,kn=kn||Ge-En,wn&&wn.kill(),Gt[re]=Ge,Gt.inherit=!1,Gt.modifiers=Mn,Mn[re]=function(){return ks(En+kn*wn.ratio+oi*wn.ratio*wn.ratio)},Gt.onUpdate=function(){N.cache++,nt.tween&&Co()},Gt.onComplete=function(){nt.tween=0,gt&&gt.call(wn)},wn=nt.tween=Be.to(Q,Gt),wn};return Q[re]=ie,ie.wheelHandler=function(){return Me.tween&&Me.tween.kill()&&(Me.tween=0)},Vs(Q,"wheel",ie.wheelHandler),hi.isTouch&&Vs(Q,"touchmove",ie.wheelHandler),Me},hi=(function(){function De(he,ie){Mt||De.register(Be)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Qt(this),this.init(he,ie)}var Q=De.prototype;return Q.init=function(ie,re){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!_i){this.update=this.refresh=this.kill=Mr;return}ie=Zo(Hi(ie)||Fc(ie)||ie.nodeType?{trigger:ie}:ie,cd);var Me=ie,nt=Me.onUpdate,Ge=Me.toggleClass,Gt=Me.id,En=Me.onToggle,kn=Me.onRefresh,oi=Me.scrub,wn=Me.trigger,gt=Me.pin,Mn=Me.pinSpacing,ks=Me.invalidateOnRefresh,ss=Me.anticipatePin,Rr=Me.onScrubComplete,Ci=Me.onSnapComplete,mr=Me.once,Gn=Me.snap,Qo=Me.pinReparent,ls=Me.pinSpacer,Bn=Me.containerAnimation,ya=Me.fastScrollEnd,La=Me.preventOverlaps,vn=ie.horizontal||ie.containerAnimation&&ie.horizontal!==!1?$:ce,rr=!oi&&oi!==0,en=q(ie.scroller||ct),kc=Be.core.getCache(en),Zr=Yr(en),Ya=("pinType"in ie?ie.pinType:z(en,"pinType")||Zr&&"fixed")==="fixed",Qr=[ie.onEnter,ie.onLeave,ie.onEnterBack,ie.onLeaveBack],Bi=rr&&ie.toggleActions.split(" "),Nr="markers"in ie?ie.markers:cd.markers,zi=Zr?0:parseFloat(On(en)["border"+vn.p2+Vn])||0,Le=this,ji=ie.onRefreshInit&&function(){return ie.onRefreshInit(Le)},Tu=ec(en,Zr,vn),Gc=Ic(en,Zr),Ro=0,Jo=0,va=0,cs=Ae(en,vn),_a,Ir,tc,Ua,Ji,pi,Gs,ho,Dr,Ke,po,gr,Eu,es,No,Ka,Hc,yr,Os,ar,gs,ys,Fr,pd,Hs,nc,Dl,Do,md,el,Po,yi,zr,mo,qi,tl,js,nl,il;if(Le._startClamp=Le._endClamp=!1,Le._dir=vn,ss*=45,Le.scroller=en,Le.scroll=Bn?Bn.time.bind(Bn):cs,Ua=cs(),Le.vars=ie,re=re||ie.animation,"refreshPriority"in ie&&(et=1,ie.refreshPriority===-9999&&(Vc=Le)),kc.tweenScroll=kc.tweenScroll||{top:h0(en,ce),left:h0(en,$)},Le.tweenTo=_a=kc.tweenScroll[vn.p],Le.scrubDuration=function(zt){zr=Fc(zt)&&zt,zr?yi?yi.duration(zt):yi=Be.to(re,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:zr,paused:!0,onComplete:function(){return Rr&&Rr(Le)}}):(yi&&yi.progress(1).kill(),yi=0)},re&&(re.vars.lazy=!1,re._initted&&!Le.isReverted||re.vars.immediateRender!==!1&&ie.immediateRender!==!1&&re.duration()&&re.render(0,!0,!0),Le.animation=re.pause(),re.scrollTrigger=Le,Le.scrubDuration(oi),el=0,Gt||(Gt=re.vars.id)),Gn&&((!ee(Gn)||Gn.push)&&(Gn={snapTo:Gn}),"scrollBehavior"in $e.style&&Be.set(Zr?[$e,le]:en,{scrollBehavior:"auto"}),N.forEach(function(zt){return Ar(zt)&&zt.target===(Zr?Et.scrollingElement||le:en)&&(zt.smooth=!1)}),tc=Ar(Gn.snapTo)?Gn.snapTo:Gn.snapTo==="labels"?Xa(re):Gn.snapTo==="labelsDirectional"?sr(re):Gn.directional!==!1?function(zt,_n){return Kr(Gn.snapTo)(zt,at()-Jo<500?0:_n.direction)}:Be.utils.snap(Gn.snapTo),mo=Gn.duration||{min:.1,max:2},mo=ee(mo)?_t(mo.min,mo.max):_t(mo,mo),qi=Be.delayedCall(Gn.delay||zr/2||.1,function(){var zt=cs(),_n=at()-Jo<500,rn=_a.tween;if((_n||Math.abs(Le.getVelocity())<10)&&!rn&&!kt&&Ro!==zt){var Pn=(zt-pi)/es,vs=re&&!rr?re.totalProgress():Pn,ei=_n?0:(vs-Po)/(at()-ut)*1e3||0,rs=Be.utils.clamp(-Pn,1-Pn,je(ei/2)*ei/.185),Jr=Pn+(Gn.inertia===!1?0:rs),$s,ws,li=Gn,Vi=li.onStart,Cn=li.onInterrupt,Ws=li.onComplete;if($s=tc(Jr,Le),Fc($s)||($s=Jr),ws=Math.max(0,Math.round(pi+$s*es)),zt<=Gs&&zt>=pi&&ws!==zt){if(rn&&!rn._initted&&rn.data<=je(ws-zt))return;Gn.inertia===!1&&(rs=$s-Pn),_a(ws,{duration:mo(je(Math.max(je(Jr-vs),je($s-vs))*.185/ei/.05||0)),ease:Gn.ease||"power3",data:je(ws-zt),onInterrupt:function(){return qi.restart(!0)&&Cn&&Cn(Le)},onComplete:function(){Le.update(),Ro=cs(),re&&!rr&&(yi?yi.resetTo("totalProgress",$s,re._tTime/re._tDur):re.progress($s)),el=Po=re&&!rr?re.totalProgress():Le.progress,Ci&&Ci(Le),Ws&&Ws(Le)}},zt,rs*es,ws-zt-rs*es),Vi&&Vi(Le,_a.tween)}}else Le.isActive&&Ro!==zt&&qi.restart(!0)}).pause()),Gt&&(eh[Gt]=Le),wn=Le.trigger=q(wn||gt!==!0&&gt),il=wn&&wn._gsap&&wn._gsap.stRevert,il&&(il=il(Le)),gt=gt===!0?wn:q(gt),Hi(Ge)&&(Ge={targets:wn,className:Ge}),gt&&(Mn===!1||Mn===fi||(Mn=!Mn&&gt.parentNode&&gt.parentNode.style&&On(gt.parentNode).display==="flex"?!1:Jn),Le.pin=gt,Ir=Be.core.getCache(gt),Ir.spacer?No=Ir.pinState:(ls&&(ls=q(ls),ls&&!ls.nodeType&&(ls=ls.current||ls.nativeElement),Ir.spacerIsNative=!!ls,ls&&(Ir.spacerState=_p(ls))),Ir.spacer=yr=ls||Et.createElement("div"),yr.classList.add("pin-spacer"),Gt&&yr.classList.add("pin-spacer-"+Gt),Ir.pinState=No=_p(gt)),ie.force3D!==!1&&Be.set(gt,{force3D:!0}),Le.spacer=yr=Ir.spacer,md=On(gt),pd=md[Mn+vn.os2],ar=Be.getProperty(gt),gs=Be.quickSetter(gt,vn.a,si),u0(gt,yr,md),Hc=_p(gt)),Nr){gr=ee(Nr)?Zo(Nr,Qf):Qf,Ke=vp("scroller-start",Gt,en,vn,gr,0),po=vp("scroller-end",Gt,en,vn,gr,0,Ke),Os=Ke["offset"+vn.op.d2];var gd=q(z(en,"content")||en);ho=this.markerStart=vp("start",Gt,gd,vn,gr,Os,0,Bn),Dr=this.markerEnd=vp("end",Gt,gd,vn,gr,Os,0,Bn),Bn&&(nl=Be.quickSetter([ho,Dr],vn.a,si)),!Ya&&!(D.length&&z(en,"fixedMarkers")===!0)&&(Pa(Zr?$e:en),Be.set([Ke,po],{force3D:!0}),nc=Be.quickSetter(Ke,vn.a,si),Do=Be.quickSetter(po,vn.a,si))}if(Bn){var Hn=Bn.vars.onUpdate,ln=Bn.vars.onUpdateParams;Bn.eventCallback("onUpdate",function(){Le.update(0,0,1),Hn&&Hn.apply(Bn,ln||[])})}if(Le.previous=function(){return ai[ai.indexOf(Le)-1]},Le.next=function(){return ai[ai.indexOf(Le)+1]},Le.revert=function(zt,_n){if(!_n)return Le.kill(!0);var rn=zt!==!1||!Le.enabled,Pn=Bt;rn!==Le.isReverted&&(rn&&(tl=Math.max(cs(),Le.scroll.rec||0),va=Le.progress,js=re&&re.progress()),ho&&[ho,Dr,Ke,po].forEach(function(vs){return vs.style.display=rn?"none":"block"}),rn&&(Bt=Le,Le.update(rn)),gt&&(!Qo||!Le.isActive)&&(rn?C_(gt,yr,No):u0(gt,yr,On(gt),Hs)),rn||Le.update(rn),Bt=Pn,Le.isReverted=rn)},Le.refresh=function(zt,_n,rn,Pn){if(!((Bt||!Le.enabled)&&!_n)){if(gt&&zt&&dn){Vs(De,"scrollEnd",th);return}!pr&&ji&&ji(Le),Bt=Le,_a.tween&&!rn&&(_a.tween.kill(),_a.tween=0),yi&&yi.pause(),ks&&re&&(re.revert({kill:!1}).invalidate(),re.getChildren&&re.getChildren(!0,!0,!1).forEach(function(Pl){return Pl.vars.immediateRender&&Pl.render(0,!0,!0)})),Le.isReverted||Le.revert(!0,!0),Le._subPinOffset=!1;var vs=Tu(),ei=Gc(),rs=Bn?Bn.duration():Da(en,vn),Jr=es<=.01||!es,$s=0,ws=Pn||0,li=ee(rn)?rn.end:ie.end,Vi=ie.endTrigger||wn,Cn=ee(rn)?rn.start:ie.start||(ie.start===0||!wn?0:gt?"0 0":"0 100%"),Ws=Le.pinnedContainer=ie.pinnedContainer&&q(ie.pinnedContainer,Le),vr=wn&&Math.max(0,ai.indexOf(Le))||0,Vr=vr,qs,Ba,wu,Oo,Pr,In,Za,wp,Mu,sl,Ia,rl,oh;for(Nr&&ee(rn)&&(rl=Be.getProperty(Ke,vn.p),oh=Be.getProperty(po,vn.p));Vr-- >0;)In=ai[Vr],In.end||In.refresh(0,1)||(Bt=Le),Za=In.pin,Za&&(Za===wn||Za===gt||Za===Ws)&&!In.isReverted&&(sl||(sl=[]),sl.unshift(In),In.revert(!0,!0)),In!==ai[Vr]&&(vr--,Vr--);for(Ar(Cn)&&(Cn=Cn(Le)),Cn=Si(Cn,"start",Le),pi=d0(Cn,wn,vs,vn,cs(),ho,Ke,Le,ei,zi,Ya,rs,Bn,Le._startClamp&&"_startClamp")||(gt?-.001:0),Ar(li)&&(li=li(Le)),Hi(li)&&!li.indexOf("+=")&&(~li.indexOf(" ")?li=(Hi(Cn)?Cn.split(" ")[0]:"")+li:($s=Jf(li.substr(2),vs),li=Hi(Cn)?Cn:(Bn?Be.utils.mapRange(0,Bn.duration(),Bn.scrollTrigger.start,Bn.scrollTrigger.end,pi):pi)+$s,Vi=wn)),li=Si(li,"end",Le),Gs=Math.max(pi,d0(li||(Vi?"100% 0":rs),Vi,vs,vn,cs()+$s,Dr,po,Le,ei,zi,Ya,rs,Bn,Le._endClamp&&"_endClamp"))||-.001,$s=0,Vr=vr;Vr--;)In=ai[Vr],Za=In.pin,Za&&In.start-In._pinPush<=pi&&!Bn&&In.end>0&&(qs=In.end-(Le._startClamp?Math.max(0,In.start):In.start),(Za===wn&&In.start-In._pinPush<pi||Za===Ws)&&isNaN(Cn)&&($s+=qs*(1-In.progress)),Za===gt&&(ws+=qs));if(pi+=$s,Gs+=$s,Le._startClamp&&(Le._startClamp+=$s),Le._endClamp&&!pr&&(Le._endClamp=Gs||-.001,Gs=Math.min(Gs,Da(en,vn))),es=Gs-pi||(pi-=.01)&&.001,Jr&&(va=Be.utils.clamp(0,1,Be.utils.normalize(pi,Gs,tl))),Le._pinPush=ws,ho&&$s&&(qs={},qs[vn.a]="+="+$s,Ws&&(qs[vn.p]="-="+cs()),Be.set([ho,Dr],qs)),gt&&!(Nt&&Le.end>=Da(en,vn)))qs=On(gt),Oo=vn===ce,wu=cs(),ys=parseFloat(ar(vn.a))+ws,!rs&&Gs>1&&(Ia=(Zr?Et.scrollingElement||le:en).style,Ia={style:Ia,value:Ia["overflow"+vn.a.toUpperCase()]},Zr&&On($e)["overflow"+vn.a.toUpperCase()]!=="scroll"&&(Ia.style["overflow"+vn.a.toUpperCase()]="scroll")),u0(gt,yr,qs),Hc=_p(gt),Ba=Ps(gt,!0),wp=Ya&&Ae(en,Oo?$:ce)(),Mn?(Hs=[Mn+vn.os2,es+ws+si],Hs.t=yr,Vr=Mn===Jn?hr(gt,vn)+es+ws:0,Vr&&(Hs.push(vn.d,Vr+si),yr.style.flexBasis!=="auto"&&(yr.style.flexBasis=Vr+si)),bu(Hs),Ws&&ai.forEach(function(Pl){Pl.pin===Ws&&Pl.vars.pinSpacing!==!1&&(Pl._subPinOffset=!0)}),Ya&&cs(tl)):(Vr=hr(gt,vn),Vr&&yr.style.flexBasis!=="auto"&&(yr.style.flexBasis=Vr+si)),Ya&&(Pr={top:Ba.top+(Oo?wu-pi:wp)+si,left:Ba.left+(Oo?wp:wu-pi)+si,boxSizing:"border-box",position:"fixed"},Pr[Ut]=Pr["max"+Vn]=Math.ceil(Ba.width)+si,Pr[fn]=Pr["max"+xn]=Math.ceil(Ba.height)+si,Pr[fi]=Pr[fi+qn]=Pr[fi+Tn]=Pr[fi+Ti]=Pr[fi+sn]="0",Pr[Jn]=qs[Jn],Pr[Jn+qn]=qs[Jn+qn],Pr[Jn+Tn]=qs[Jn+Tn],Pr[Jn+Ti]=qs[Jn+Ti],Pr[Jn+sn]=qs[Jn+sn],Ka=R_(No,Pr,Qo),pr&&cs(0)),re?(Mu=re._initted,Lt(1),re.render(re.duration(),!0,!0),Fr=ar(vn.a)-ys+es+ws,Dl=Math.abs(es-Fr)>1,Ya&&Dl&&Ka.splice(Ka.length-2,2),re.render(0,!0,!0),Mu||re.invalidate(!0),re.parent||re.totalTime(re.totalTime()),Lt(0)):Fr=es,Ia&&(Ia.value?Ia.style["overflow"+vn.a.toUpperCase()]=Ia.value:Ia.style.removeProperty("overflow-"+vn.a));else if(wn&&cs()&&!Bn)for(Ba=wn.parentNode;Ba&&Ba!==$e;)Ba._pinOffset&&(pi-=Ba._pinOffset,Gs-=Ba._pinOffset),Ba=Ba.parentNode;sl&&sl.forEach(function(Pl){return Pl.revert(!1,!0)}),Le.start=pi,Le.end=Gs,Ua=Ji=pr?tl:cs(),!Bn&&!pr&&(Ua<tl&&cs(tl),Le.scroll.rec=0),Le.revert(!1,!0),Jo=at(),qi&&(Ro=-1,qi.restart(!0)),Bt=0,re&&rr&&(re._initted||js)&&re.progress()!==js&&re.progress(js||0,!0).render(re.time(),!0,!0),(Jr||va!==Le.progress||Bn||ks||re&&!re._initted)&&(re&&!rr&&(re._initted||va||re.vars.immediateRender!==!1)&&re.totalProgress(Bn&&pi<-.001&&!va?Be.utils.normalize(pi,Gs,0):va,!0),Le.progress=Jr||(Ua-pi)/es===va?0:va),gt&&Mn&&(yr._pinOffset=Math.round(Le.progress*Fr)),yi&&yi.invalidate(),isNaN(rl)||(rl-=Be.getProperty(Ke,vn.p),oh-=Be.getProperty(po,vn.p),Tp(Ke,vn,rl),Tp(ho,vn,rl-(Pn||0)),Tp(po,vn,oh),Tp(Dr,vn,oh-(Pn||0))),Jr&&!pr&&Le.update(),kn&&!pr&&!Eu&&(Eu=!0,kn(Le),Eu=!1)}},Le.getVelocity=function(){return(cs()-Ji)/(at()-ut)*1e3||0},Le.endAnimation=function(){be(Le.callbackAnimation),re&&(yi?yi.progress(1):re.paused()?rr||be(re,Le.direction<0,1):be(re,re.reversed()))},Le.labelToScroll=function(zt){return re&&re.labels&&(pi||Le.refresh()||pi)+re.labels[zt]/re.duration()*es||0},Le.getTrailing=function(zt){var _n=ai.indexOf(Le),rn=Le.direction>0?ai.slice(0,_n).reverse():ai.slice(_n+1);return(Hi(zt)?rn.filter(function(Pn){return Pn.vars.preventOverlaps===zt}):rn).filter(function(Pn){return Le.direction>0?Pn.end<=pi:Pn.start>=Gs})},Le.update=function(zt,_n,rn){if(!(Bn&&!rn&&!zt)){var Pn=pr===!0?tl:Le.scroll(),vs=zt?0:(Pn-pi)/es,ei=vs<0?0:vs>1?1:vs||0,rs=Le.progress,Jr,$s,ws,li,Vi,Cn,Ws,vr;if(_n&&(Ji=Ua,Ua=Bn?cs():Pn,Gn&&(Po=el,el=re&&!rr?re.totalProgress():ei)),ss&&gt&&!Bt&&!xt&&dn&&(!ei&&pi<Pn+(Pn-Ji)/(at()-ut)*ss?ei=1e-4:ei===1&&Gs>Pn+(Pn-Ji)/(at()-ut)*ss&&(ei=.9999)),ei!==rs&&Le.enabled){if(Jr=Le.isActive=!!ei&&ei<1,$s=!!rs&&rs<1,Cn=Jr!==$s,Vi=Cn||!!ei!=!!rs,Le.direction=ei>rs?1:-1,Le.progress=ei,Vi&&!Bt&&(ws=ei&&!rs?0:ei===1?1:rs===1?2:3,rr&&(li=!Cn&&Bi[ws+1]!=="none"&&Bi[ws+1]||Bi[ws],vr=re&&(li==="complete"||li==="reset"||li in re))),La&&(Cn||vr)&&(vr||oi||!re)&&(Ar(La)?La(Le):Le.getTrailing(La).forEach(function(wu){return wu.endAnimation()})),rr||(yi&&!Bt&&!xt?(yi._dp._time-yi._start!==yi._time&&yi.render(yi._dp._time-yi._start),yi.resetTo?yi.resetTo("totalProgress",ei,re._tTime/re._tDur):(yi.vars.totalProgress=ei,yi.invalidate().restart())):re&&re.totalProgress(ei,!!(Bt&&(Jo||zt)))),gt){if(zt&&Mn&&(yr.style[Mn+vn.os2]=pd),!Ya)gs(Na(ys+Fr*ei));else if(Vi){if(Ws=!zt&&ei>rs&&Gs+1>Pn&&Pn+1>=Da(en,vn),Qo)if(!zt&&(Jr||Ws)){var Vr=Ps(gt,!0),qs=Pn-pi;Sp(gt,$e,Vr.top+(vn===ce?qs:0)+si,Vr.left+(vn===ce?0:qs)+si)}else Sp(gt,yr);bu(Jr||Ws?Ka:Hc),Dl&&ei<1&&Jr||gs(ys+(ei===1&&!Ws?Fr:0))}}Gn&&!_a.tween&&!Bt&&!xt&&qi.restart(!0),Ge&&(Cn||mr&&ei&&(ei<1||!$t))&&We(Ge.targets).forEach(function(wu){return wu.classList[Jr||mr?"add":"remove"](Ge.className)}),nt&&!rr&&!zt&&nt(Le),Vi&&!Bt?(rr&&(vr&&(li==="complete"?re.pause().totalProgress(1):li==="reset"?re.restart(!0).pause():li==="restart"?re.restart(!0):re[li]()),nt&&nt(Le)),(Cn||!$t)&&(En&&Cn&&Ie(Le,En),Qr[ws]&&Ie(Le,Qr[ws]),mr&&(ei===1?Le.kill(!1,1):Qr[ws]=0),Cn||(ws=ei===1?1:3,Qr[ws]&&Ie(Le,Qr[ws]))),ya&&!Jr&&Math.abs(Le.getVelocity())>(Fc(ya)?ya:2500)&&(be(Le.callbackAnimation),yi?yi.progress(1):be(re,li==="reverse"?1:!ei,1))):rr&&nt&&!Bt&&nt(Le)}if(Do){var Ba=Bn?Pn/Bn.duration()*(Bn._caScrollDist||0):Pn;nc(Ba+(Ke._isFlipped?1:0)),Do(Ba)}nl&&nl(-Pn/Bn.duration()*(Bn._caScrollDist||0))}},Le.enable=function(zt,_n){Le.enabled||(Le.enabled=!0,Vs(en,"resize",cf),Zr||Vs(en,"scroll",fd),ji&&Vs(De,"refreshInit",ji),zt!==!1&&(Le.progress=va=0,Ua=Ji=Ro=cs()),_n!==!1&&Le.refresh())},Le.getTween=function(zt){return zt&&_a?_a.tween:yi},Le.setPositions=function(zt,_n,rn,Pn){if(Bn){var vs=Bn.scrollTrigger,ei=Bn.duration(),rs=vs.end-vs.start;zt=vs.start+rs*zt/ei,_n=vs.start+rs*_n/ei}Le.refresh(!1,!1,{start:Ko(zt,rn&&!!Le._startClamp),end:Ko(_n,rn&&!!Le._endClamp)},Pn),Le.update()},Le.adjustPinSpacing=function(zt){if(Hs&&zt){var _n=Hs.indexOf(vn.d)+1;Hs[_n]=parseFloat(Hs[_n])+zt+si,Hs[1]=parseFloat(Hs[1])+zt+si,bu(Hs)}},Le.disable=function(zt,_n){if(Le.enabled&&(zt!==!1&&Le.revert(!0,!0),Le.enabled=Le.isActive=!1,_n||yi&&yi.pause(),tl=0,Ir&&(Ir.uncache=1),ji&&Ai(De,"refreshInit",ji),qi&&(qi.pause(),_a.tween&&_a.tween.kill()&&(_a.tween=0)),!Zr)){for(var rn=ai.length;rn--;)if(ai[rn].scroller===en&&ai[rn]!==Le)return;Ai(en,"resize",cf),Zr||Ai(en,"scroll",fd)}},Le.kill=function(zt,_n){Le.disable(zt,_n),yi&&!_n&&yi.kill(),Gt&&delete eh[Gt];var rn=ai.indexOf(Le);rn>=0&&ai.splice(rn,1),rn===W&&Nl>0&&W--,rn=0,ai.forEach(function(Pn){return Pn.scroller===Le.scroller&&(rn=1)}),rn||pr||(Le.scroll.rec=0),re&&(re.scrollTrigger=null,zt&&re.revert({kill:!1}),_n||re.kill()),ho&&[ho,Dr,Ke,po].forEach(function(Pn){return Pn.parentNode&&Pn.parentNode.removeChild(Pn)}),Vc===Le&&(Vc=0),gt&&(Ir&&(Ir.uncache=1),rn=0,ai.forEach(function(Pn){return Pn.pin===gt&&rn++}),rn||(Ir.spacer=0)),ie.onKill&&ie.onKill(Le)},ai.push(Le),Le.enable(!1,!1),il&&il(Le),re&&re.add&&!es){var Di=Le.update;Le.update=function(){Le.update=Di,N.cache++,pi||Gs||Le.refresh()},Be.delayedCall(.01,Le.update),es=.01,pi=Gs=0}else Le.refresh();gt&&fo()},De.register=function(ie){return Mt||(Be=ie||Mo(),Zf()&&window.document&&De.enable(),Mt=_i),Mt},De.defaults=function(ie){if(ie)for(var re in ie)cd[re]=ie[re];return cd},De.disable=function(ie,re){_i=0,ai.forEach(function(nt){return nt[re?"kill":"disable"](ie)}),Ai(ct,"wheel",fd),Ai(Et,"scroll",fd),clearInterval(ht),Ai(Et,"touchcancel",Mr),Ai($e,"touchstart",Mr),Br(Ai,Et,"pointerdown,touchstart,mousedown",wr),Br(Ai,Et,"pointerup,touchend,mouseup",Ds),Xe.kill(),El(Ai);for(var Me=0;Me<N.length;Me+=3)yp(Ai,N[Me],N[Me+1]),yp(Ai,N[Me],N[Me+2])},De.enable=function(){if(ct=window,Et=document,le=Et.documentElement,$e=Et.body,Be&&(We=Be.utils.toArray,_t=Be.utils.clamp,Qt=Be.core.context||Mr,Lt=Be.core.suppressOverwrites||Mr,Ct=ct.history.scrollRestoration||"auto",Ym=ct.pageYOffset||0,Be.core.globals("ScrollTrigger",De),$e)){_i=1,An=document.createElement("div"),An.style.height="100vh",An.style.position="absolute",xu(),Ur(),Ve.register(Be),De.isTouch=Ve.isTouch,Xt=Ve.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Zt=Ve.isTouch===1,Vs(ct,"wheel",fd),Ze=[ct,Et,le,$e],Be.matchMedia?(De.matchMedia=function(En){var kn=Be.matchMedia(),oi;for(oi in En)kn.add(oi,En[oi]);return kn},Be.addEventListener("matchMediaInit",function(){return nh()}),Be.addEventListener("matchMediaRevert",function(){return qm()}),Be.addEventListener("matchMedia",function(){Rl(0,1),Al("matchMedia")}),Be.matchMedia().add("(orientation: portrait)",function(){return lf(),lf})):console.warn("Requires GSAP 3.11.0 or later"),lf(),Vs(Et,"scroll",fd);var ie=$e.hasAttribute("style"),re=$e.style,Me=re.borderTopStyle,nt=Be.core.Animation.prototype,Ge,Gt;for(nt.revert||Object.defineProperty(nt,"revert",{value:function(){return this.time(-.01,!0)}}),re.borderTopStyle="solid",Ge=Ps($e),ce.m=Math.round(Ge.top+ce.sc())||0,$.m=Math.round(Ge.left+$.sc())||0,Me?re.borderTopStyle=Me:re.removeProperty("border-top-style"),ie||($e.setAttribute("style",""),$e.removeAttribute("style")),ht=setInterval(dd,250),Be.delayedCall(.5,function(){return xt=0}),Vs(Et,"touchcancel",Mr),Vs($e,"touchstart",Mr),Br(Vs,Et,"pointerdown,touchstart,mousedown",wr),Br(Vs,Et,"pointerup,touchend,mouseup",Ds),X=Be.utils.checkPrefix("transform"),sh.push(X),Mt=at(),Xe=Be.delayedCall(.2,Rl).pause(),tt=[Et,"visibilitychange",function(){var En=ct.innerWidth,kn=ct.innerHeight;Et.hidden?(Se=En,Fe=kn):(Se!==En||Fe!==kn)&&cf()},Et,"DOMContentLoaded",Rl,ct,"load",Rl,ct,"resize",cf],El(Vs),ai.forEach(function(En){return En.enable(0,1)}),Gt=0;Gt<N.length;Gt+=3)yp(Ai,N[Gt],N[Gt+1]),yp(Ai,N[Gt],N[Gt+2])}},De.config=function(ie){"limitCallbacks"in ie&&($t=!!ie.limitCallbacks);var re=ie.syncInterval;re&&clearInterval(ht)||(ht=re)&&setInterval(dd,re),"ignoreMobileResize"in ie&&(Zt=De.isTouch===1&&ie.ignoreMobileResize),"autoRefreshEvents"in ie&&(El(Ai)||El(Vs,ie.autoRefreshEvents||"none"),wt=(ie.autoRefreshEvents+"").indexOf("resize")===-1)},De.scrollerProxy=function(ie,re){var Me=q(ie),nt=N.indexOf(Me),Ge=Yr(Me);~nt&&N.splice(nt,Ge?6:2),re&&(Ge?D.unshift(ct,re,$e,re,le,re):D.unshift(Me,re))},De.clearMatchMedia=function(ie){ai.forEach(function(re){return re._ctx&&re._ctx.query===ie&&re._ctx.kill(!0,!0)})},De.isInViewport=function(ie,re,Me){var nt=(Hi(ie)?q(ie):ie).getBoundingClientRect(),Ge=nt[Me?Ut:fn]*re||0;return Me?nt.right-Ge>0&&nt.left+Ge<ct.innerWidth:nt.bottom-Ge>0&&nt.top+Ge<ct.innerHeight},De.positionInViewport=function(ie,re,Me){Hi(ie)&&(ie=q(ie));var nt=ie.getBoundingClientRect(),Ge=nt[Me?Ut:fn],Gt=re==null?Ge/2:re in of?of[re]*Ge:~re.indexOf("%")?parseFloat(re)*Ge/100:parseFloat(re)||0;return Me?(nt.left+Gt)/ct.innerWidth:(nt.top+Gt)/ct.innerHeight},De.killAll=function(ie){if(ai.slice(0).forEach(function(Me){return Me.vars.id!=="ScrollSmoother"&&Me.kill()}),ie!==!0){var re=Ml.killAll||[];Ml={},re.forEach(function(Me){return Me()})}},De})();hi.version="3.13.0",hi.saveStyles=function(De){return De?We(De).forEach(function(Q){if(Q&&Q.style){var he=Cr.indexOf(Q);he>=0&&Cr.splice(he,5),Cr.push(Q,Q.style.cssText,Q.getBBox&&Q.getAttribute("transform"),Be.core.getCache(Q),Qt())}}):Cr},hi.revert=function(De,Q){return nh(!De,Q)},hi.create=function(De,Q){return new hi(De,Q)},hi.refresh=function(De){return De?cf(!0):(Mt||hi.register())&&Rl(!0)},hi.update=function(De){return++N.cache&&Co(De===!0?2:0)},hi.clearScrollMemory=Xm,hi.maxScroll=function(De,Q){return Da(De,Q?$:ce)},hi.getScrollFunc=function(De,Q){return Ae(q(De),Q?$:ce)},hi.getById=function(De){return eh[De]},hi.getAll=function(){return ai.filter(function(De){return De.vars.id!=="ScrollSmoother"})},hi.isScrolling=function(){return!!dn},hi.snapDirectional=Kr,hi.addEventListener=function(De,Q){var he=Ml[De]||(Ml[De]=[]);~he.indexOf(Q)||he.push(Q)},hi.removeEventListener=function(De,Q){var he=Ml[De],ie=he&&he.indexOf(Q);ie>=0&&he.splice(ie,1)},hi.batch=function(De,Q){var he=[],ie={},re=Q.interval||.016,Me=Q.batchMax||1e9,nt=function(En,kn){var oi=[],wn=[],gt=Be.delayedCall(re,function(){kn(oi,wn),oi=[],wn=[]}).pause();return function(Mn){oi.length||gt.restart(!0),oi.push(Mn.trigger),wn.push(Mn),Me<=oi.length&&gt.progress(1)}},Ge;for(Ge in Q)ie[Ge]=Ge.substr(0,2)==="on"&&Ar(Q[Ge])&&Ge!=="onRefreshInit"?nt(Ge,Q[Ge]):Q[Ge];return Ar(Me)&&(Me=Me(),Vs(hi,"refresh",function(){return Me=Q.batchMax()})),We(De).forEach(function(Gt){var En={};for(Ge in ie)En[Ge]=ie[Ge];En.trigger=Gt,he.push(hi.create(En))}),he};var rh=function(Q,he,ie,re){return he>re?Q(re):he<0&&Q(0),ie>re?(re-he)/(ie-he):ie<0?he/(he-ie):1},Km=function De(Q,he){he===!0?Q.style.removeProperty("touch-action"):Q.style.touchAction=he===!0?"auto":he?"pan-"+he+(Ve.isTouch?" pinch-zoom":""):"none",Q===le&&De($e,he)},ah={auto:1,scroll:1},p0=function(Q){var he=Q.event,ie=Q.target,re=Q.axis,Me=(he.changedTouches?he.changedTouches[0]:he).target,nt=Me._gsap||Be.core.getCache(Me),Ge=at(),Gt;if(!nt._isScrollT||Ge-nt._isScrollT>2e3){for(;Me&&Me!==$e&&(Me.scrollHeight<=Me.clientHeight&&Me.scrollWidth<=Me.clientWidth||!(ah[(Gt=On(Me)).overflowY]||ah[Gt.overflowX]));)Me=Me.parentNode;nt._isScroll=Me&&Me!==ie&&!Yr(Me)&&(ah[(Gt=On(Me)).overflowY]||ah[Gt.overflowX]),nt._isScrollT=Ge}(nt._isScroll||re==="x")&&(he.stopPropagation(),he._gsapAllow=!0)},Ep=function(Q,he,ie,re){return Ve.create({target:Q,capture:!0,debounce:!1,lockAxis:!0,type:he,onWheel:re=re&&p0,onPress:re,onDrag:re,onScroll:re,onEnable:function(){return ie&&Vs(Et,Ve.eventTypes[0],m0,!1,!0)},onDisable:function(){return Ai(Et,Ve.eventTypes[0],m0,!0)}})},N_=/(input|label|select|textarea)/i,Zm,m0=function(Q){var he=N_.test(Q.target.tagName);(he||Zm)&&(Q._gsapAllow=!0,Zm=he)},Su=function(Q){ee(Q)||(Q={}),Q.preventDefault=Q.isNormalizer=Q.allowClicks=!0,Q.type||(Q.type="wheel,touch"),Q.debounce=!!Q.debounce,Q.id=Q.id||"normalizer";var he=Q,ie=he.normalizeScrollX,re=he.momentum,Me=he.allowNestedScroll,nt=he.onRelease,Ge,Gt,En=q(Q.target)||le,kn=Be.core.globals().ScrollSmoother,oi=kn&&kn.get(),wn=Xt&&(Q.content&&q(Q.content)||oi&&Q.content!==!1&&!oi.smooth()&&oi.content()),gt=Ae(En,ce),Mn=Ae(En,$),ks=1,ss=(Ve.isTouch&&ct.visualViewport?ct.visualViewport.scale*ct.visualViewport.width:ct.outerWidth)/ct.innerWidth,Rr=0,Ci=Ar(re)?function(){return re(Ge)}:function(){return re||2.8},mr,Gn,Qo=Ep(En,Q.type,!0,Me),ls=function(){return Gn=!1},Bn=Mr,ya=Mr,La=function(){Gt=Da(En,ce),ya=_t(Xt?1:0,Gt),ie&&(Bn=_t(0,Da(En,$))),mr=Cl},vn=function(){wn._gsap.y=Na(parseFloat(wn._gsap.y)+gt.offset)+"px",wn.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(wn._gsap.y)+", 0, 1)",gt.offset=gt.cacheID=0},rr=function(){if(Gn){requestAnimationFrame(ls);var Nr=Na(Ge.deltaY/2),zi=ya(gt.v-Nr);if(wn&&zi!==gt.v+gt.offset){gt.offset=zi-gt.v;var Le=Na((parseFloat(wn&&wn._gsap.y)||0)-gt.offset);wn.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Le+", 0, 1)",wn._gsap.y=Le+"px",gt.cacheID=N.cache,Co()}return!0}gt.offset&&vn(),Gn=!0},en,kc,Zr,Ya,Qr=function(){La(),en.isActive()&&en.vars.scrollY>Gt&&(gt()>Gt?en.progress(1)&&gt(Gt):en.resetTo("scrollY",Gt))};return wn&&Be.set(wn,{y:"+=0"}),Q.ignoreCheck=function(Bi){return Xt&&Bi.type==="touchmove"&&rr()||ks>1.05&&Bi.type!=="touchstart"||Ge.isGesturing||Bi.touches&&Bi.touches.length>1},Q.onPress=function(){Gn=!1;var Bi=ks;ks=Na((ct.visualViewport&&ct.visualViewport.scale||1)/ss),en.pause(),Bi!==ks&&Km(En,ks>1.01?!0:ie?!1:"x"),kc=Mn(),Zr=gt(),La(),mr=Cl},Q.onRelease=Q.onGestureStart=function(Bi,Nr){if(gt.offset&&vn(),!Nr)Ya.restart(!0);else{N.cache++;var zi=Ci(),Le,ji;ie&&(Le=Mn(),ji=Le+zi*.05*-Bi.velocityX/.227,zi*=rh(Mn,Le,ji,Da(En,$)),en.vars.scrollX=Bn(ji)),Le=gt(),ji=Le+zi*.05*-Bi.velocityY/.227,zi*=rh(gt,Le,ji,Da(En,ce)),en.vars.scrollY=ya(ji),en.invalidate().duration(zi).play(.01),(Xt&&en.vars.scrollY>=Gt||Le>=Gt-1)&&Be.to({},{onUpdate:Qr,duration:zi})}nt&&nt(Bi)},Q.onWheel=function(){en._ts&&en.pause(),at()-Rr>1e3&&(mr=0,Rr=at())},Q.onChange=function(Bi,Nr,zi,Le,ji){if(Cl!==mr&&La(),Nr&&ie&&Mn(Bn(Le[2]===Nr?kc+(Bi.startX-Bi.x):Mn()+Nr-Le[1])),zi){gt.offset&&vn();var Tu=ji[2]===zi,Gc=Tu?Zr+Bi.startY-Bi.y:gt()+zi-ji[1],Ro=ya(Gc);Tu&&Gc!==Ro&&(Zr+=Ro-Gc),gt(Ro)}(zi||Nr)&&Co()},Q.onEnable=function(){Km(En,ie?!1:"x"),hi.addEventListener("refresh",Qr),Vs(ct,"resize",Qr),gt.smooth&&(gt.target.style.scrollBehavior="auto",gt.smooth=Mn.smooth=!1),Qo.enable()},Q.onDisable=function(){Km(En,!0),Ai(ct,"resize",Qr),hi.removeEventListener("refresh",Qr),Qo.kill()},Q.lockAxis=Q.lockAxis!==!1,Ge=new Ve(Q),Ge.iOS=Xt,Xt&&!gt()&&gt(1),Xt&&Be.ticker.add(Mr),Ya=Ge._dc,en=Be.to(Ge,{ease:"power4",paused:!0,inherit:!1,scrollX:ie?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:f0(gt,gt(),function(){return en.pause()})},onUpdate:Co,onComplete:Ya.vars.onComplete}),Ge};hi.sort=function(De){if(Ar(De))return ai.sort(De);var Q=ct.pageYOffset||0;return hi.getAll().forEach(function(he){return he._sortY=he.trigger?Q+he.trigger.getBoundingClientRect().top:he.start+ct.innerHeight}),ai.sort(De||function(he,ie){return(he.vars.refreshPriority||0)*-1e6+(he.vars.containerAnimation?1e6:he._sortY)-((ie.vars.containerAnimation?1e6:ie._sortY)+(ie.vars.refreshPriority||0)*-1e6)})},hi.observe=function(De){return new Ve(De)},hi.normalizeScroll=function(De){if(typeof De>"u")return It;if(De===!0&&It)return It.enable();if(De===!1){It&&It.kill(),It=De;return}var Q=De instanceof Ve?De:Su(De);return It&&It.target===Q.target&&It.kill(),Yr(Q.target)&&(It=Q),Q},hi.core={_getVelocityProp:Ne,_inputObserver:Ep,_scrollers:N,_proxies:D,bridge:{ss:function(){dn||Al("scrollStart"),dn=at()},ref:function(){return Bt}}},Mo()&&Be.registerPlugin(hi),t.ScrollTrigger=hi,t.default=hi,typeof window>"u"||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default}))})(C1,C1.exports)),C1.exports}var Xhe=qhe();const Yhe=dp(Xhe);var R1={exports:{}};/*!
 * SplitText 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2025, GreenSock. All rights reserved. Subject to the terms at https://gsap.com/standard-license.
 * @author: Jack Doyle
 */var Khe=R1.exports,i5;function Zhe(){return i5||(i5=1,(function(i,e){(function(t,n){n(e)})(Khe,(function(t){let n,s,r,a=()=>r||D.register(window.gsap),o=typeof Intl<"u"?new Intl.Segmenter:0,l=L=>typeof L=="string"?l(document.querySelectorAll(L)):"length"in L?Array.from(L):[L],c=L=>l(L).filter(F=>F instanceof HTMLElement),d=[],h=function(){},m=/\s+/g,v=new RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),_={left:0,top:0,width:0,height:0},x=(L,F)=>{if(F){let I=new Set(L.join("").match(F)||d),z=L.length,H,Y,Z,se;if(I.size)for(;--z>-1;){Y=L[z];for(Z of I)if(Z.startsWith(Y)&&Z.length>Y.length){for(H=0,se=Y;Z.startsWith(se+=L[z+ ++H])&&se.length<Z.length;);if(H&&se.length===Z.length){L[z]=Z,L.splice(z+1,H);break}}}}return L},T=L=>window.getComputedStyle(L).display==="inline"&&(L.style.display="inline-block"),b=(L,F,I)=>F.insertBefore(typeof L=="string"?document.createTextNode(L):L,I),w=(L,F,I)=>{let z=F[L+"sClass"]||"",{tag:H="div",aria:Y="auto",propIndex:Z=!1}=F,se=L==="line"?"block":"inline-block",oe=z.indexOf("++")>-1,G=K=>{let $=document.createElement(H),ce=I.length+1;return z&&($.className=z+(oe?" "+z+ce:"")),Z&&$.style.setProperty("--"+L,ce+""),Y!=="none"&&$.setAttribute("aria-hidden","true"),H!=="span"&&($.style.position="relative",$.style.display=se),$.textContent=K,I.push($),$};return oe&&(z=z.replace("++","")),G.collection=I,G},M=(L,F,I,z)=>{let H=w("line",I,z),Y=window.getComputedStyle(L).textAlign||"left";return(Z,se)=>{let oe=H("");for(oe.style.textAlign=Y,L.insertBefore(oe,F[Z]);Z<se;Z++)oe.appendChild(F[Z]);oe.normalize()}},R=(L,F,I,z,H,Y,Z,se,oe,G)=>{var K;let $=Array.from(L.childNodes),ce=0,{wordDelimiter:q,reduceWhiteSpace:ue=!0,prepareText:Ae}=F,Ne=L.getBoundingClientRect(),we=Ne,pt=!ue&&window.getComputedStyle(L).whiteSpace.substring(0,3)==="pre",Ee=0,Ue=I.collection,Ve,Be,Mt,ct,Et,le,$e,Ze,Xe,We,_t,ut,ht,Bt,kt,X,W,Se;for(typeof q=="object"?(Mt=q.delimiter||q,Be=q.replaceWith||""):Be=q===""?"":q||" ",Ve=Be!==" ";ce<$.length;ce++)if(ct=$[ce],ct.nodeType===3){for(kt=ct.textContent||"",ue?kt=kt.replace(m," "):pt&&(kt=kt.replace(/\n/g,Be+`
`)),Ae&&(kt=Ae(kt,L)),ct.textContent=kt,Et=Be||Mt?kt.split(Mt||Be):kt.match(se)||d,W=Et[Et.length-1],Ze=Ve?W.slice(-1)===" ":!W,W||Et.pop(),we=Ne,$e=Ve?Et[0].charAt(0)===" ":!Et[0],$e&&b(" ",L,ct),Et[0]||Et.shift(),x(Et,oe),Y&&G||(ct.textContent=""),Xe=1;Xe<=Et.length;Xe++)if(X=Et[Xe-1],!ue&&pt&&X.charAt(0)===`
`&&((K=ct.previousSibling)==null||K.remove(),b(document.createElement("br"),L,ct),X=X.slice(1)),!ue&&X==="")b(Be,L,ct);else if(X===" ")L.insertBefore(document.createTextNode(" "),ct);else{if(Ve&&X.charAt(0)===" "&&b(" ",L,ct),Ee&&Xe===1&&!$e&&Ue.indexOf(Ee.parentNode)>-1?(le=Ue[Ue.length-1],le.appendChild(document.createTextNode(z?"":X))):(le=I(z?"":X),b(le,L,ct),Ee&&Xe===1&&!$e&&le.insertBefore(Ee,le.firstChild)),z)for(_t=o?x([...o.segment(X)].map(Fe=>Fe.segment),oe):X.match(se)||d,Se=0;Se<_t.length;Se++)le.appendChild(_t[Se]===" "?document.createTextNode(" "):z(_t[Se]));if(Y&&G){if(kt=ct.textContent=kt.substring(X.length+1,kt.length),We=le.getBoundingClientRect(),We.top>we.top&&We.left<=we.left){for(ut=L.cloneNode(),ht=L.childNodes[0];ht&&ht!==le;)Bt=ht,ht=ht.nextSibling,ut.appendChild(Bt);L.parentNode.insertBefore(ut,L),H&&T(ut)}we=We}(Xe<Et.length||Ze)&&b(Xe>=Et.length?" ":Ve&&X.slice(-1)===" "?" "+Be:Be,L,ct)}L.removeChild(ct),Ee=0}else ct.nodeType===1&&(Z&&Z.indexOf(ct)>-1?(Ue.indexOf(ct.previousSibling)>-1&&Ue[Ue.length-1].appendChild(ct),Ee=ct):(R(ct,F,I,z,H,Y,Z,se,oe,!0),Ee=0),H&&T(ct))};const N=class Zq{constructor(F,I){this.isSplit=!1,a(),this.elements=c(F),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=I,this._split=()=>this.isSplit&&this.split(this.vars);let z=[],H,Y=()=>{let Z=z.length,se;for(;Z--;){se=z[Z];let oe=se.element.offsetWidth;if(oe!==se.width){se.width=oe,this._split();return}}};this._data={orig:z,obs:typeof ResizeObserver<"u"&&new ResizeObserver(()=>{clearTimeout(H),H=setTimeout(Y,200)})},h(this),this.split(I)}split(F){this.isSplit&&this.revert(),this.vars=F=F||this.vars||{};let{type:I="chars,words,lines",aria:z="auto",deepSlice:H=!0,smartWrap:Y,onSplit:Z,autoSplit:se=!1,specialChars:oe,mask:G}=this.vars,K=I.indexOf("lines")>-1,$=I.indexOf("chars")>-1,ce=I.indexOf("words")>-1,q=$&&!ce&&!K,ue=oe&&("push"in oe?new RegExp("(?:"+oe.join("|")+")","gu"):oe),Ae=ue?new RegExp(ue.source+"|"+v.source,"gu"):v,Ne=!!F.ignore&&c(F.ignore),{orig:we,animTime:pt,obs:Ee}=this._data,Ue;return($||ce||K)&&(this.elements.forEach((Ve,Be)=>{we[Be]={element:Ve,html:Ve.innerHTML,ariaL:Ve.getAttribute("aria-label"),ariaH:Ve.getAttribute("aria-hidden")},z==="auto"?Ve.setAttribute("aria-label",(Ve.textContent||"").trim()):z==="hidden"&&Ve.setAttribute("aria-hidden","true");let Mt=[],ct=[],Et=[],le=$?w("char",F,Mt):null,$e=w("word",F,ct),Ze,Xe,We,_t;if(R(Ve,F,$e,le,q,H&&(K||q),Ne,Ae,ue,!1),K){let ut=l(Ve.childNodes),ht=M(Ve,ut,F,Et),Bt,kt=[],X=0,W=ut.map(Fe=>Fe.nodeType===1?Fe.getBoundingClientRect():_),Se=_;for(Ze=0;Ze<ut.length;Ze++)Bt=ut[Ze],Bt.nodeType===1&&(Bt.nodeName==="BR"?(kt.push(Bt),ht(X,Ze+1),X=Ze+1,Se=W[X]):(Ze&&W[Ze].top>Se.top&&W[Ze].left<=Se.left&&(ht(X,Ze),X=Ze),Se=W[Ze]));X<Ze&&ht(X,Ze),kt.forEach(Fe=>{var tt;return(tt=Fe.parentNode)==null?void 0:tt.removeChild(Fe)})}if(!ce){for(Ze=0;Ze<ct.length;Ze++)if(Xe=ct[Ze],$||!Xe.nextSibling||Xe.nextSibling.nodeType!==3)if(Y&&!K){for(We=document.createElement("span"),We.style.whiteSpace="nowrap";Xe.firstChild;)We.appendChild(Xe.firstChild);Xe.replaceWith(We)}else Xe.replaceWith(...Xe.childNodes);else _t=Xe.nextSibling,_t&&_t.nodeType===3&&(_t.textContent=(Xe.textContent||"")+(_t.textContent||""),Xe.remove());ct.length=0,Ve.normalize()}this.lines.push(...Et),this.words.push(...ct),this.chars.push(...Mt)}),G&&this[G]&&this.masks.push(...this[G].map(Ve=>{let Be=Ve.cloneNode();return Ve.replaceWith(Be),Be.appendChild(Ve),Ve.className&&(Be.className=Ve.className.replace(/(\b\w+\b)/g,"$1-mask")),Be.style.overflow="clip",Be}))),this.isSplit=!0,s&&(se?s.addEventListener("loadingdone",this._split):s.status==="loading"&&console.warn("SplitText called before fonts loaded")),(Ue=Z&&Z(this))&&Ue.totalTime&&(this._data.anim=pt?Ue.totalTime(pt):Ue),K&&se&&this.elements.forEach((Ve,Be)=>{we[Be].width=Ve.offsetWidth,Ee&&Ee.observe(Ve)}),this}revert(){var F,I;let{orig:z,anim:H,obs:Y}=this._data;return Y&&Y.disconnect(),z.forEach(({element:Z,html:se,ariaL:oe,ariaH:G})=>{Z.innerHTML=se,oe?Z.setAttribute("aria-label",oe):Z.removeAttribute("aria-label"),G?Z.setAttribute("aria-hidden",G):Z.removeAttribute("aria-hidden")}),this.chars.length=this.words.length=this.lines.length=z.length=this.masks.length=0,this.isSplit=!1,s?.removeEventListener("loadingdone",this._split),H&&(this._data.animTime=H.totalTime(),H.revert()),(I=(F=this.vars).onRevert)==null||I.call(F,this),this}static create(F,I){return new Zq(F,I)}static register(F){n=n||F||window.gsap,n&&(l=n.utils.toArray,h=n.core.context||h),!r&&window.innerWidth>0&&(s=document.fonts,r=!0)}};N.version="3.13.0";let D=N;t.SplitText=D,t.default=D,Object.defineProperty(t,"__esModule",{value:!0})}))})(R1,R1.exports)),R1.exports}var Qhe=Zhe();const Jhe=dp(Qhe);function pa(){return pa=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},pa.apply(null,arguments)}function epe(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function tpe(...i){return e=>i.forEach(t=>epe(t,e))}const Qq=P.forwardRef((i,e)=>{const{children:t,...n}=i,s=P.Children.toArray(t),r=s.find(ipe);if(r){const a=r.props.children,o=s.map(l=>l===r?P.Children.count(a)>1?P.Children.only(null):P.isValidElement(a)?a.props.children:null:l);return P.createElement(_3,pa({},n,{ref:e}),P.isValidElement(a)?P.cloneElement(a,void 0,o):null)}return P.createElement(_3,pa({},n,{ref:e}),t)});Qq.displayName="Slot";const _3=P.forwardRef((i,e)=>{const{children:t,...n}=i;return P.isValidElement(t)?P.cloneElement(t,{...spe(n,t.props),ref:tpe(e,t.ref)}):P.Children.count(t)>1?P.Children.only(null):null});_3.displayName="SlotClone";const npe=({children:i})=>P.createElement(P.Fragment,null,i);function ipe(i){return P.isValidElement(i)&&i.type===npe}function spe(i,e){const t={...e};for(const n in e){const s=i[n],r=e[n];/^on[A-Z]/.test(n)?s&&r?t[n]=(...o)=>{r(...o),s(...o)}:s&&(t[n]=s):n==="style"?t[n]={...s,...r}:n==="className"&&(t[n]=[s,r].filter(Boolean).join(" "))}return{...i,...t}}const rpe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ape=rpe.reduce((i,e)=>{const t=P.forwardRef((n,s)=>{const{asChild:r,...a}=n,o=r?Qq:e;return P.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),P.createElement(o,pa({},a,{ref:s}))});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{}),ope=P.forwardRef((i,e)=>{var t;const{container:n=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...s}=i;return n?JB.createPortal(P.createElement(ape.div,pa({},s,{ref:e})),n):null}),lpe=ope;var s5=Object.prototype.hasOwnProperty;function SE(i,e){var t,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&SE(i[n],e[n]););return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(s5.call(i,t)&&++n&&!s5.call(e,t)||!(t in e)||!SE(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}function i2(i,e){if(Object.is(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(i[t[n]],e[t[n]]))return!1;return!0}var s2=function(e,t,n,s){this.name=e,this.fn=t,this.args=n,this.modifiers=s};s2.prototype._test=function(e){var t=this.fn;try{wb(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return wb(this.modifiers.slice(),t,this)(e)}catch{return!1}};s2.prototype._check=function(e){try{wb(this.modifiers.slice(),this.fn,this)(e)}catch{if(wb(this.modifiers.slice(),function(n){return n},this)(!1))return}if(!wb(this.modifiers.slice(),this.fn,this)(e))throw null};s2.prototype._testAsync=function(e){var t=this;return new Promise(function(n,s){eX(t.modifiers.slice(),t.fn,t)(e).then(function(r){r?n(e):s(null)}).catch(function(r){return s(r)})})};function Jq(i,e){return e===void 0&&(e="simple"),typeof i=="object"?i[e]:i}function wb(i,e,t){if(i.length){var n=i.shift(),s=wb(i,e,t);return n.perform(s,t)}else return Jq(e)}function eX(i,e,t){if(i.length){var n=i.shift(),s=eX(i,e,t);return n.performAsync(s,t)}else return function(r){return Promise.resolve(Jq(e,"async")(r))}}var cpe=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},$I=(function(i){function e(t,n,s,r){for(var a=[],o=arguments.length-4;o-- >0;)a[o]=arguments[o+4];i.call(this,a),i.captureStackTrace&&i.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=s,this.target=r}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e})(Error),rp=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};rp.prototype._applyRule=function(e,t){var n=this;return function(){for(var s=[],r=arguments.length;r--;)s[r]=arguments[r];return n.chain.push(new s2(t,e.apply(n,s),s,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}};rp.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new cpe(t,e.simple,e.async)),this};rp.prototype._clone=function(){return new rp(this.chain.slice(),this.nextRuleModifiers.slice())};rp.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};rp.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(s){t.push(new $I(n,e,s))}}),t};rp.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new $I(t,e,n)}})};rp.prototype.testAsync=function(e){var t=this;return new Promise(function(n,s){tX(e,t.chain.slice(),n,s)})};function tX(i,e,t,n){if(e.length){var s=e.shift();s._testAsync(i).then(function(){tX(i,e,t,n)},function(r){n(new $I(s,i,r))})}else t(i)}var r5=function(i,e){return e&&typeof i=="string"&&i.trim().length===0?!0:i==null};function upe(i,e){return e===void 0&&(e=!1),{simple:function(t){return r5(t,e)||i.check(t)===void 0},async:function(t){return r5(t,e)||i.testAsync(t)}}}function ou(){return typeof Proxy<"u"?nX(new rp):x3(new rp)}var TE={};ou.extend=function(i){Object.assign(TE,i)};ou.clearCustomRules=function(){TE={}};function nX(i){return new Proxy(i,{get:function(t,n){if(n in t)return t[n];var s=nX(i._clone());if(n in QR)return s._applyModifier(QR[n],n);if(n in TE)return s._applyRule(TE[n],n);if(n in b3)return s._applyRule(b3[n],n)}})}function x3(i){var e=function(s,r){return Object.keys(s).forEach(function(a){r[a]=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];var c=x3(r._clone()),d=c._applyRule(s[a],a).apply(void 0,o);return d}}),r},t=e(b3,i),n=e(TE,t);return Object.keys(QR).forEach(function(s){Object.defineProperty(n,s,{get:function(){var r=x3(n._clone());return r._applyModifier(QR[s],s)}})}),n}var QR={not:{simple:function(i){return function(e){return!i(e)}},async:function(i){return function(e){return Promise.resolve(i(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(i){return function(e){return VA(e).some(function(t){try{return i(t)}catch{return!1}})}},async:function(i){return function(e){return Promise.all(VA(e).map(function(t){try{return i(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(i){return function(e){return e!==!1&&VA(e).every(i)}},async:function(i){return function(e){return Promise.all(VA(e).map(i)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(i,e){return function(t){return a5(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i(t):i(t)}},async:function(i,e){return function(t){return Promise.resolve(i(t)).then(function(n){return a5(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n:n}).catch(function(){return!1})}}}};function a5(i){return i&&i.name==="schema"&&i.args.length>0&&typeof i.args[0]=="object"}function VA(i){return typeof i=="string"?i.split(""):i}var b3={equal:function(i){return function(e){return e==i}},exact:function(i){return function(e){return e===i}},number:function(i){return i===void 0&&(i=!0),function(e){return typeof e=="number"&&(i||isFinite(e))}},integer:function(){return function(i){var e=Number.isInteger||dpe;return e(i)}},numeric:function(){return function(i){return!isNaN(parseFloat(i))&&isFinite(i)}},string:function(){return yx("string")},boolean:function(){return yx("boolean")},undefined:function(){return yx("undefined")},null:function(){return yx("null")},array:function(){return yx("array")},object:function(){return yx("object")},instanceOf:function(i){return function(e){return e instanceof i}},pattern:function(i){return function(e){return i.test(e)}},lowercase:function(){return function(i){return typeof i=="boolean"||i===i.toLowerCase()&&i.trim()!==""}},uppercase:function(){return function(i){return i===i.toUpperCase()&&i.trim()!==""}},vowel:function(){return function(i){return/^[aeiou]+$/i.test(i)}},consonant:function(){return function(i){return/^(?=[^aeiou])([a-z]+)$/i.test(i)}},first:function(i){return function(e){return e[0]==i}},last:function(i){return function(e){return e[e.length-1]==i}},empty:function(){return function(i){return i.length===0}},length:function(i,e){return function(t){return t.length>=i&&t.length<=(e||i)}},minLength:function(i){return function(e){return e.length>=i}},maxLength:function(i){return function(e){return e.length<=i}},negative:function(){return function(i){return i<0}},positive:function(){return function(i){return i>=0}},between:function(i,e){return function(t){return t>=i&&t<=e}},range:function(i,e){return function(t){return t>=i&&t<=e}},lessThan:function(i){return function(e){return e<i}},lessThanOrEqual:function(i){return function(e){return e<=i}},greaterThan:function(i){return function(e){return e>i}},greaterThanOrEqual:function(i){return function(e){return e>=i}},even:function(){return function(i){return i%2===0}},odd:function(){return function(i){return i%2!==0}},includes:function(i){return function(e){return~e.indexOf(i)}},schema:function(i){return fpe(i)},passesAnyOf:function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];return function(t){return i.some(function(n){return n.test(t)})}},optional:upe};function yx(i){return function(e){return Array.isArray(e)&&i==="array"||e===null&&i==="null"||typeof e===i}}function dpe(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}function fpe(i){return{simple:function(e){var t=[];if(Object.keys(i).forEach(function(n){var s=i[n];try{s.check((e||{})[n])}catch(r){r.target=n,t.push(r)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(i).map(function(s){var r=i[s];return r.testAsync((e||{})[s]).catch(function(a){a.target=s,t.push(a)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}var Js="colors",gc="sizes",hn="space",hpe={gap:hn,gridGap:hn,columnGap:hn,gridColumnGap:hn,rowGap:hn,gridRowGap:hn,inset:hn,insetBlock:hn,insetBlockEnd:hn,insetBlockStart:hn,insetInline:hn,insetInlineEnd:hn,insetInlineStart:hn,margin:hn,marginTop:hn,marginRight:hn,marginBottom:hn,marginLeft:hn,marginBlock:hn,marginBlockEnd:hn,marginBlockStart:hn,marginInline:hn,marginInlineEnd:hn,marginInlineStart:hn,padding:hn,paddingTop:hn,paddingRight:hn,paddingBottom:hn,paddingLeft:hn,paddingBlock:hn,paddingBlockEnd:hn,paddingBlockStart:hn,paddingInline:hn,paddingInlineEnd:hn,paddingInlineStart:hn,top:hn,right:hn,bottom:hn,left:hn,scrollMargin:hn,scrollMarginTop:hn,scrollMarginRight:hn,scrollMarginBottom:hn,scrollMarginLeft:hn,scrollMarginX:hn,scrollMarginY:hn,scrollMarginBlock:hn,scrollMarginBlockEnd:hn,scrollMarginBlockStart:hn,scrollMarginInline:hn,scrollMarginInlineEnd:hn,scrollMarginInlineStart:hn,scrollPadding:hn,scrollPaddingTop:hn,scrollPaddingRight:hn,scrollPaddingBottom:hn,scrollPaddingLeft:hn,scrollPaddingX:hn,scrollPaddingY:hn,scrollPaddingBlock:hn,scrollPaddingBlockEnd:hn,scrollPaddingBlockStart:hn,scrollPaddingInline:hn,scrollPaddingInlineEnd:hn,scrollPaddingInlineStart:hn,fontSize:"fontSizes",background:Js,backgroundColor:Js,backgroundImage:Js,borderImage:Js,border:Js,borderBlock:Js,borderBlockEnd:Js,borderBlockStart:Js,borderBottom:Js,borderBottomColor:Js,borderColor:Js,borderInline:Js,borderInlineEnd:Js,borderInlineStart:Js,borderLeft:Js,borderLeftColor:Js,borderRight:Js,borderRightColor:Js,borderTop:Js,borderTopColor:Js,caretColor:Js,color:Js,columnRuleColor:Js,fill:Js,outline:Js,outlineColor:Js,stroke:Js,textDecorationColor:Js,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:gc,minBlockSize:gc,maxBlockSize:gc,inlineSize:gc,minInlineSize:gc,maxInlineSize:gc,width:gc,minWidth:gc,maxWidth:gc,height:gc,minHeight:gc,maxHeight:gc,flexBasis:gc,gridTemplateColumns:gc,gridTemplateRows:gc,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},ppe=(i,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,gS=()=>{const i=Object.create(null);return(e,t,...n)=>{const s=(r=>JSON.stringify(r,ppe))(e);return s in i?i[s]:i[s]=t(e,...n)}},Ov=Symbol.for("sxs.internal"),WI=(i,e)=>Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),o5=i=>{for(const e in i)return!0;return!1},{hasOwnProperty:mpe}=Object.prototype,S3=i=>i.includes("-")?i:i.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),gpe=/\s+(?![^()]*\))/,vx=i=>e=>i(...typeof e=="string"?String(e).split(gpe):[e]),l5={appearance:i=>({WebkitAppearance:i,appearance:i}),backfaceVisibility:i=>({WebkitBackfaceVisibility:i,backfaceVisibility:i}),backdropFilter:i=>({WebkitBackdropFilter:i,backdropFilter:i}),backgroundClip:i=>({WebkitBackgroundClip:i,backgroundClip:i}),boxDecorationBreak:i=>({WebkitBoxDecorationBreak:i,boxDecorationBreak:i}),clipPath:i=>({WebkitClipPath:i,clipPath:i}),content:i=>({content:i.includes('"')||i.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(i)?i:`"${i}"`}),hyphens:i=>({WebkitHyphens:i,hyphens:i}),maskImage:i=>({WebkitMaskImage:i,maskImage:i}),maskSize:i=>({WebkitMaskSize:i,maskSize:i}),tabSize:i=>({MozTabSize:i,tabSize:i}),textSizeAdjust:i=>({WebkitTextSizeAdjust:i,textSizeAdjust:i}),userSelect:i=>({WebkitUserSelect:i,userSelect:i}),marginBlock:vx(((i,e)=>({marginBlockStart:i,marginBlockEnd:e||i}))),marginInline:vx(((i,e)=>({marginInlineStart:i,marginInlineEnd:e||i}))),maxSize:vx(((i,e)=>({maxBlockSize:i,maxInlineSize:e||i}))),minSize:vx(((i,e)=>({minBlockSize:i,minInlineSize:e||i}))),paddingBlock:vx(((i,e)=>({paddingBlockStart:i,paddingBlockEnd:e||i}))),paddingInline:vx(((i,e)=>({paddingInlineStart:i,paddingInlineEnd:e||i})))},nO=/([\d.]+)([^]*)/,ype=(i,e)=>i.length?i.reduce(((t,n)=>(t.push(...e.map((s=>s.includes("&")?s.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(s)?`:is(${n})`:n):n+" "+s))),t)),[]):e,vpe=(i,e)=>i in _pe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,n,s,r)=>n+(s==="stretch"?`-moz-available${r};${S3(i)}:${n}-webkit-fill-available`:`-moz-fit-content${r};${S3(i)}:${n}fit-content`)+r)):String(e),_pe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Cm=i=>i?i+"-":"",iX=(i,e,t)=>i.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((n,s,r,a,o)=>a=="$"==!!r?n:(s||a=="--"?"calc(":"")+"var(--"+(a==="$"?Cm(e)+(o.includes("$")?"":Cm(t))+o.replace(/\$/g,"-"):o)+")"+(s||a=="--"?"*"+(s||"")+(r||"1")+")":""))),xpe=/\s*,\s*(?![^()]*\))/,bpe=Object.prototype.toString,ob=(i,e,t,n,s)=>{let r,a,o;const l=(c,d,h)=>{let m,v;const _=x=>{for(m in x){const w=m.charCodeAt(0)===64,M=w&&Array.isArray(x[m])?x[m]:[x[m]];for(v of M){const R=/[A-Z]/.test(b=m)?b:b.replace(/-[^]/g,(D=>D[1].toUpperCase())),N=typeof v=="object"&&v&&v.toString===bpe&&(!n.utils[R]||!d.length);if(R in n.utils&&!N){const D=n.utils[R];if(D!==a){a=D,_(D(v)),a=null;continue}}else if(R in l5){const D=l5[R];if(D!==o){o=D,_(D(v)),o=null;continue}}if(w&&(T=m.slice(1)in n.media?"@media "+n.media[m.slice(1)]:m,m=T.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((D,L,F,I,z,H)=>{const Y=nO.test(L),Z=.0625*(Y?-1:1),[se,oe]=Y?[I,L]:[L,I];return"("+(F[0]==="="?"":F[0]===">"===Y?"max-":"min-")+se+":"+(F[0]!=="="&&F.length===1?oe.replace(nO,((G,K,$)=>Number(K)+Z*(F===">"?1:-1)+$)):oe)+(z?") and ("+(z[0]===">"?"min-":"max-")+se+":"+(z.length===1?H.replace(nO,((G,K,$)=>Number(K)+Z*(z===">"?-1:1)+$)):H):"")+")"}))),N){const D=w?h.concat(m):[...h],L=w?[...d]:ype(d,m.split(xpe));r!==void 0&&s(c5(...r)),r=void 0,l(v,L,D)}else r===void 0&&(r=[[],d,h]),m=w||m.charCodeAt(0)!==36?m:`--${Cm(n.prefix)}${m.slice(1).replace(/\$/g,"-")}`,v=N?v:typeof v=="number"?v&&R in Spe?String(v)+"px":String(v):iX(vpe(R,v??""),n.prefix,n.themeMap[R]),r[0].push(`${w?`${m} `:`${S3(m)}:`}${v}`)}}var T,b};_(c),r!==void 0&&s(c5(...r)),r=void 0};l(i,e,t)},c5=(i,e,t)=>`${t.map((n=>`${n}{`)).join("")}${e.length?`${e.join(",")}{`:""}${i.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,Spe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},u5=i=>String.fromCharCode(i+(i>25?39:97)),Lv=i=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=u5(t%52)+n;return u5(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(i))>>>0),N1=["themed","global","styled","onevar","resonevar","allvar","inline"],Tpe=i=>{if(i.href&&!i.href.startsWith(location.origin))return!1;try{return!!i.cssRules}catch{return!1}},Epe=i=>{let e;const t=()=>{const{cssRules:s}=e.sheet;return[].map.call(s,((r,a)=>{const{cssText:o}=r;let l="";if(o.startsWith("--sxs"))return"";if(s[a-1]&&(l=s[a-1].cssText).startsWith("--sxs")){if(!r.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===r)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${o}`;return r.cssRules.length?`${l}${o}`:""}return o})).join("")},n=()=>{if(e){const{rules:o,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in o)delete o[c]}const s=Object(i).styleSheets||[];for(const o of s)if(Tpe(o)){for(let l=0,c=o.cssRules;c[l];++l){const d=Object(c[l]);if(d.type!==1)continue;const h=Object(c[l+1]);if(h.type!==4)continue;++l;const{cssText:m}=d;if(!m.startsWith("--sxs"))continue;const v=m.slice(14,-3).trim().split(/\s+/),_=N1[v[0]];_&&(e||(e={sheet:o,reset:n,rules:{},toString:t}),e.rules[_]={group:h,index:l,cache:new Set(v)})}if(e)break}if(!e){const o=(l,c)=>({type:c,cssRules:[],insertRule(d,h){this.cssRules.splice(h,0,o(d,{import:3,undefined:1}[(d.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,(d=>d.cssText)).join("")}}`:l}});e={sheet:i?(i.head||i).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:n,toString:t}}const{sheet:r,rules:a}=e;for(let o=N1.length-1;o>=0;--o){const l=N1[o];if(!a[l]){const c=N1[o+1],d=a[c]?a[c].index:r.cssRules.length;r.insertRule("@media{}",d),r.insertRule(`--sxs{--sxs:${o}}`,d),a[l]={group:r.cssRules[d+1],index:d,cache:new Set([o])}}wpe(a[l])}};return n(),e},wpe=i=>{const e=i.group;let t=e.cssRules.length;i.apply=n=>{try{e.insertRule(n,t),++t}catch{}}},GT=Symbol(),Mpe=gS(),d5=(i,e)=>Mpe(i,(()=>(...t)=>{let n={type:null,composers:new Set};for(const s of t)if(s!=null)if(s[Ov]){n.type==null&&(n.type=s[Ov].type);for(const r of s[Ov].composers)n.composers.add(r)}else s.constructor!==Object||s.$$typeof?n.type==null&&(n.type=s):n.composers.add(Ape(s,i));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),Cpe(i,n,e)})),Ape=({variants:i,compoundVariants:e,defaultVariants:t,...n},s)=>{const r=`${Cm(s.prefix)}c-${Lv(n)}`,a=[],o=[],l=Object.create(null),c=[];for(const m in t)l[m]=String(t[m]);if(typeof i=="object"&&i)for(const m in i){d=l,h=m,mpe.call(d,h)||(l[m]="undefined");const v=i[m];for(const _ in v){const x={[m]:String(_)};String(_)==="undefined"&&c.push(m);const T=v[_],b=[x,T,!o5(T)];a.push(b)}}var d,h;if(typeof e=="object"&&e)for(const m of e){let{css:v,..._}=m;v=typeof v=="object"&&v||{};for(const T in _)_[T]=String(_[T]);const x=[_,v,!o5(v)];o.push(x)}return[r,n,a,o,l,c]},Cpe=(i,e,t)=>{const[n,s,r,a]=Rpe(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(h=>{function m(){for(let v=0;v<m[GT].length;v++){const[_,x]=m[GT][v];h.rules[_].apply(x)}return m[GT]=[],null}return m[GT]=[],m.rules={},N1.forEach((v=>m.rules[v]={apply:_=>m[GT].push([v,_])})),m})(t):null,l=(o||t).rules,c=`.${n}${s.length>1?`:where(.${s.slice(1).join(".")})`:""}`,d=h=>{h=typeof h=="object"&&h||Npe;const{css:m,...v}=h,_={};for(const b in r)if(delete v[b],b in h){let w=h[b];typeof w=="object"&&w?_[b]={"@initial":r[b],...w}:(w=String(w),_[b]=w!=="undefined"||a.has(b)?w:r[b])}else _[b]=r[b];const x=new Set([...s]);for(const[b,w,M,R]of e.composers){t.rules.styled.cache.has(b)||(t.rules.styled.cache.add(b),ob(w,[`.${b}`],[],i,(L=>{l.styled.apply(L)})));const N=f5(M,_,i.media),D=f5(R,_,i.media,!0);for(const L of N)if(L!==void 0)for(const[F,I,z]of L){const H=`${b}-${Lv(I)}-${F}`;x.add(H);const Y=(z?t.rules.resonevar:t.rules.onevar).cache,Z=z?l.resonevar:l.onevar;Y.has(H)||(Y.add(H),ob(I,[`.${H}`],[],i,(se=>{Z.apply(se)})))}for(const L of D)if(L!==void 0)for(const[F,I]of L){const z=`${b}-${Lv(I)}-${F}`;x.add(z),t.rules.allvar.cache.has(z)||(t.rules.allvar.cache.add(z),ob(I,[`.${z}`],[],i,(H=>{l.allvar.apply(H)})))}}if(typeof m=="object"&&m){const b=`${n}-i${Lv(m)}-css`;x.add(b),t.rules.inline.cache.has(b)||(t.rules.inline.cache.add(b),ob(m,[`.${b}`],[],i,(w=>{l.inline.apply(w)})))}for(const b of String(h.className||"").trim().split(/\s+/))b&&x.add(b);const T=v.className=[...x].join(" ");return{type:e.type,className:T,selector:c,props:v,toString:()=>T,deferredInjector:o}};return WI(d,{className:n,selector:c,[Ov]:e,toString:()=>(t.rules.styled.cache.has(n)||d(),n)})},Rpe=i=>{let e="";const t=[],n={},s=[];for(const[r,,,,a,o]of i){e===""&&(e=r),t.push(r),s.push(...o);for(const l in a){const c=a[l];(n[l]===void 0||c!=="undefined"||o.includes(c))&&(n[l]=c)}}return[e,t,n,new Set(s)]},f5=(i,e,t,n)=>{const s=[];e:for(let[r,a,o]of i){if(o)continue;let l,c=0,d=!1;for(l in r){const h=r[l];let m=e[l];if(m!==h){if(typeof m!="object"||!m)continue e;{let v,_,x=0;for(const T in m){if(h===String(m[T])){if(T!=="@initial"){const b=T.slice(1);(_=_||[]).push(b in t?t[b]:T.replace(/^@media ?/,"")),d=!0}c+=x,v=!0}++x}if(_&&_.length&&(a={["@media "+_.join(", ")]:a}),!v)continue e}}}(s[c]=s[c]||[]).push([n?"cv":`${l}-${r[l]}`,a,d])}return s},Npe={},Dpe=gS(),Ppe=(i,e)=>Dpe(i,(()=>(...t)=>{const n=()=>{for(let s of t){s=typeof s=="object"&&s||{};let r=Lv(s);if(!e.rules.global.cache.has(r)){if(e.rules.global.cache.add(r),"@import"in s){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(s["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,a++);delete s["@import"]}ob(s,[],[],i,(a=>{e.rules.global.apply(a)}))}}return""};return WI(n,{toString:n})})),Ope=gS(),Lpe=(i,e)=>Ope(i,(()=>t=>{const n=`${Cm(i.prefix)}k-${Lv(t)}`,s=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);const r=[];ob(t,[],[],i,(o=>r.push(o)));const a=`@keyframes ${n}{${r.join("")}}`;e.rules.global.apply(a)}return n};return WI(s,{get name(){return s()},toString:s})})),Upe=class{constructor(i,e,t,n){this.token=i==null?"":String(i),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Cm(this.prefix)+Cm(this.scale)+this.token}toString(){return this.computedValue}},Bpe=gS(),Ipe=(i,e)=>Bpe(i,(()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);const s=`.${t=(t=typeof t=="string"?t:"")||`${Cm(i.prefix)}t-${Lv(n)}`}`,r={},a=[];for(const l in n){r[l]={};for(const c in n[l]){const d=`--${Cm(i.prefix)}${l}-${c}`,h=iX(String(n[l][c]),i.prefix,l);r[l][c]=new Upe(c,h,l,i.prefix),a.push(`${d}:${h}`)}}const o=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${n===i.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(l)}return t};return{...r,get className(){return o()},selector:s,toString:o}})),Fpe=gS(),zpe=gS(),Vpe=i=>{const e=(t=>{let n=!1;const s=Fpe(t,(r=>{n=!0;const a="prefix"in(r=typeof r=="object"&&r||{})?String(r.prefix):"",o=typeof r.media=="object"&&r.media||{},l=typeof r.root=="object"?r.root||null:globalThis.document||null,c=typeof r.theme=="object"&&r.theme||{},d={prefix:a,media:o,theme:c,themeMap:typeof r.themeMap=="object"&&r.themeMap||{...hpe},utils:typeof r.utils=="object"&&r.utils||{}},h=Epe(l),m={css:d5(d,h),globalCss:Ppe(d,h),keyframes:Lpe(d,h),createTheme:Ipe(d,h),reset(){h.reset(),m.theme.toString()},theme:{},sheet:h,config:d,prefix:a,getCssText:h.toString,toString:h.toString};return String(m.theme=m.createTheme(c)),m}));return n||s.reset(),s})(i);return e.styled=(({config:t,sheet:n})=>zpe(t,(()=>{const s=d5(t,n);return(...r)=>{const a=s(...r),o=a[Ov].type,l=fe.forwardRef(((c,d)=>{const h=c&&c.as||o,{props:m,deferredInjector:v}=a(c);return delete m.as,m.ref=d,v?fe.createElement(fe.Fragment,null,fe.createElement(h,m),fe.createElement(v,null)):fe.createElement(h,m)}));return l.className=a.className,l.displayName=`Styled.${o.displayName||o.name||o}`,l.selector=a.selector,l.toString=()=>a.selector,l[Ov]=a[Ov],l}})))(e),e};function kpe(i,e,t){return Math.max(e,Math.min(i,t))}const jl={toVector(i,e){return i===void 0&&(i=e),Array.isArray(i)?i:[i,i]},add(i,e){return[i[0]+e[0],i[1]+e[1]]},sub(i,e){return[i[0]-e[0],i[1]-e[1]]},addTo(i,e){i[0]+=e[0],i[1]+=e[1]},subTo(i,e){i[0]-=e[0],i[1]-=e[1]}};function h5(i,e,t){return e===0||Math.abs(e)===1/0?Math.pow(i,t*5):i*e*t/(e+t*i)}function p5(i,e,t,n=.15){return n===0?kpe(i,e,t):i<e?-h5(e-i,t-e,n)+e:i>t?+h5(i-t,t-e,n)+t:i}function Gpe(i,[e,t],[n,s]){const[[r,a],[o,l]]=i;return[p5(e,r,a,n),p5(t,o,l,s)]}function Hpe(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function jpe(i){var e=Hpe(i,"string");return typeof e=="symbol"?e:String(e)}function su(i,e,t){return e=jpe(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function m5(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function ha(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m5(Object(t),!0).forEach(function(n){su(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):m5(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const sX={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function g5(i){return i?i[0].toUpperCase()+i.slice(1):""}const $pe=["enter","leave"];function Wpe(i=!1,e){return i&&!$pe.includes(e)}function qpe(i,e="",t=!1){const n=sX[i],s=n&&n[e]||e;return"on"+g5(i)+g5(s)+(Wpe(t,s)?"Capture":"")}const Xpe=["gotpointercapture","lostpointercapture"];function Ype(i){let e=i.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=Xpe.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(n);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:t}}function Kpe(i,e=""){const t=sX[i],n=t&&t[e]||e;return i+n}function r2(i){return"touches"in i}function rX(i){return r2(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function Zpe(i){return Array.from(i.touches).filter(e=>{var t,n;return e.target===i.currentTarget||((t=i.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function Qpe(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function aX(i){return r2(i)?Qpe(i)[0]:i}function Jpe(i){return Zpe(i).map(e=>e.identifier)}function iO(i){const e=aX(i);return r2(i)?e.identifier:e.pointerId}function y5(i){const e=aX(i);return[e.clientX,e.clientY]}function eme(i){const e={};if("buttons"in i&&(e.buttons=i.buttons),"shiftKey"in i){const{shiftKey:t,altKey:n,metaKey:s,ctrlKey:r}=i;Object.assign(e,{shiftKey:t,altKey:n,metaKey:s,ctrlKey:r})}return e}function JR(i,...e){return typeof i=="function"?i(...e):i}function tme(){}function nme(...i){return i.length===0?tme:i.length===1?i[0]:function(){let e;for(const t of i)e=t.apply(this,arguments)||e;return e}}function v5(i,e){return Object.assign({},e,i||{})}const ime=32;class sme{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:s}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?JR(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:s}=this;t.args=this.args;let r=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,eme(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const D=t._delta.map(Math.abs);jl.addTo(t._distance,D)}this.axisIntent&&this.axisIntent(e);const[a,o]=t._movement,[l,c]=n.threshold,{_step:d,values:h}=t;if(n.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(a)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(o)>=c&&h[1])):(d[0]===!1&&(d[0]=Math.abs(a)>=l&&Math.sign(a)*l),d[1]===!1&&(d[1]=Math.abs(o)>=c&&Math.sign(o)*c)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const m=[0,0];if(n.hasCustomTransform){const[D,L]=h;m[0]=d[0]!==!1?D-d[0]:0,m[1]=d[1]!==!1?L-d[1]:0}else m[0]=d[0]!==!1?a-d[0]:0,m[1]=d[1]!==!1?o-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(m);const v=t.offset,_=t._active&&!t._blocked||t.active;_&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=s[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=JR(n.bounds,t)),this.setup&&this.setup()),t.movement=m,this.computeOffset()));const[x,T]=t.offset,[[b,w],[M,R]]=t._bounds;t.overflow=[x<b?-1:x>w?1:0,T<M?-1:T>R?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const N=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=Gpe(t._bounds,t.offset,N),t.delta=jl.sub(t.offset,v),this.computeMovement(),_&&(!t.last||r>ime)){t.delta=jl.sub(t.offset,v);const D=t.delta.map(Math.abs);jl.addTo(t.distance,D),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[D[0]/r,D[1]/r],t.timeDelta=r)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const s=this.handler(ha(ha(ha({},t),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function rme([i,e],t){const n=Math.abs(i),s=Math.abs(e);if(n>s&&n>t)return"x";if(s>n&&s>t)return"y"}class ame extends sme{constructor(...e){super(...e),su(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=jl.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=jl.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const s=typeof n.axisThreshold=="object"?n.axisThreshold[rX(e)]:n.axisThreshold;t.axis=rme(t._movement,s)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const ome=i=>i,_5=.15,oX={enabled(i=!0){return i},eventOptions(i,e,t){return ha(ha({},t.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[_5,_5];case!1:return[0,0];default:return jl.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return jl.toVector(i)},transform(i,e,t){const n=i||t.shared.transform;return this.hasCustomTransform=!!n,n||ome},threshold(i){return jl.toVector(i,0)}},lme=0,ow=ha(ha({},oX),{},{axis(i,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(i=lme){return i},bounds(i={}){if(typeof i=="function")return r=>ow.bounds(i(r));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:s=1/0}=i;return[[e,t],[n,s]]}}),x5={ArrowRight:(i,e=1)=>[i*e,0],ArrowLeft:(i,e=1)=>[-1*i*e,0],ArrowUp:(i,e=1)=>[0,-1*i*e],ArrowDown:(i,e=1)=>[0,i*e]};class cme extends ame{constructor(...e){super(...e),su(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),s={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=ow.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=iO(e),n._pointerActive=!0,this.computeValues(y5(e)),this.computeInitial(),t.preventScrollAxis&&rX(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const s=iO(e);if(t._pointerId!==void 0&&s!==t._pointerId)return;const r=y5(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=jl.sub(r,t._values),this.computeValues(r)),jl.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const s=iO(e);if(t._pointerId!==void 0&&s!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[r,a]=t._distance;if(t.tap=r<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[o,l]=t._delta,[c,d]=t._movement,[h,m]=n.swipe.velocity,[v,_]=n.swipe.distance,x=n.swipe.duration;if(t.elapsedTime<x){const T=Math.abs(o/t.timeDelta),b=Math.abs(l/t.timeDelta);T>h&&Math.abs(c)>v&&(t.swipe[0]=Math.sign(o)),b>m&&Math.abs(d)>_&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,ume(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=x5[e.key];if(t){const n=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,s),n._keyboardActive=!0,jl.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in x5&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function ume(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const lw=typeof window<"u"&&window.document&&window.document.createElement;function lX(){return lw&&"ontouchstart"in window}function dme(){return lX()||lw&&window.navigator.maxTouchPoints>1}function fme(){return lw&&"onpointerdown"in window}function hme(){return lw&&"exitPointerLock"in window.document}function pme(){try{return"constructor"in GestureEvent}catch{return!1}}const Fd={isBrowser:lw,gesture:pme(),touch:lX(),touchscreen:dme(),pointer:fme(),pointerLock:hme()},mme=250,gme=180,yme=.5,vme=50,_me=250,xme=10,b5={mouse:0,touch:0,pen:8},bme=ha(ha({},ow),{},{device(i,e,{pointer:{touch:t=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&Fd.pointerLock,Fd.touch&&t?"touch":this.pointerLock?"mouse":Fd.pointer&&!s?"pointer":Fd.touch?"touch":"mouse"},preventScrollAxis(i,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&i?mme:void 0,!(!Fd.touchscreen||t===!1))return i||(t!==void 0?"y":void 0)},pointerCapture(i,e,{pointer:{capture:t=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&this.device==="pointer"&&t},threshold(i,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:s=void 0}){const r=jl.toVector(i,t?n:s?1:0);return this.filterTaps=t,this.tapsThreshold=n,r},swipe({velocity:i=yme,distance:e=vme,duration:t=_me}={}){return{velocity:this.transform(jl.toVector(i)),distance:this.transform(jl.toVector(e)),duration:t}},delay(i=0){switch(i){case!0:return gme;case!1:return 0;default:return i}},axisThreshold(i){return i?ha(ha({},b5),i):b5},keyboardDisplacement(i=xme){return i}});ha(ha({},oX),{},{device(i,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!Fd.touch&&Fd.gesture)return"gesture";if(Fd.touch&&n)return"touch";if(Fd.touchscreen){if(Fd.pointer)return"pointer";if(Fd.touch)return"touch"}},bounds(i,e,{scaleBounds:t={},angleBounds:n={}}){const s=a=>{const o=v5(JR(t,a),{min:-1/0,max:1/0});return[o.min,o.max]},r=a=>{const o=v5(JR(n,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof n!="function"?[s(),r()]:a=>[s(a),r(a)]},threshold(i,e,t){return this.lockDirection=t.axis==="lock",jl.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});ha(ha({},ow),{},{mouseOnly:(i=!0)=>i});ha(ha({},ow),{},{mouseOnly:(i=!0)=>i});const cX=new Map,T3=new Map;function Sme(i){cX.set(i.key,i.engine),T3.set(i.key,i.resolver)}const Tme={key:"drag",engine:cme,resolver:bme};function Eme(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function wme(i,e){if(i==null)return{};var t=Eme(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}const Mme={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=Fd.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:e=!1}={}){return{passive:i,capture:e}},transform(i){return i}},Ame=["target","eventOptions","window","enabled","transform"];function ER(i={},e){const t={};for(const[n,s]of Object.entries(e))switch(typeof s){case"function":t[n]=s.call(t,i[n],n,i);break;case"object":t[n]=ER(i[n],s);break;case"boolean":s&&(t[n]=i[n]);break}return t}function Cme(i,e,t={}){const n=i,{target:s,eventOptions:r,window:a,enabled:o,transform:l}=n,c=wme(n,Ame);if(t.shared=ER({target:s,eventOptions:r,window:a,enabled:o,transform:l},Mme),e){const d=T3.get(e);t[e]=ER(ha({shared:t.shared},c),d)}else for(const d in c){const h=T3.get(d);h&&(t[d]=ER(ha({shared:t.shared},c[d]),h))}return t}class uX{constructor(e,t){su(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,s,r){const a=this._listeners,o=Kpe(t,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=ha(ha({},l),r);e.addEventListener(o,s,c);const d=()=>{e.removeEventListener(o,s,c),a.delete(d)};return a.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Rme{constructor(){su(this,"_timeouts",new Map)}add(e,t,n=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...s))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Nme{constructor(e){su(this,"gestures",new Set),su(this,"_targetEventStore",new uX(this)),su(this,"gestureEventStores",{}),su(this,"gestureTimeoutStores",{}),su(this,"handlers",{}),su(this,"config",{}),su(this,"pointerIds",new Set),su(this,"touchIds",new Set),su(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Dme(this,e)}setEventIds(e){if(r2(e))return this.touchIds=new Set(Jpe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Cme(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let s;if(!(t.target&&(s=t.target(),!s))){if(t.enabled){for(const a of this.gestures){const o=this.config[a],l=S5(n,o.eventOptions,!!s);if(o.enabled){const c=cX.get(a);new c(this,e,a).bind(l)}}const r=S5(n,t.eventOptions,!!s);for(const a in this.nativeHandlers)r(a,"",o=>this.nativeHandlers[a](ha(ha({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const r in n)n[r]=nme(...n[r]);if(!s)return n;for(const r in n){const{device:a,capture:o,passive:l}=Ype(r);this._targetEventStore.add(s,a,"",n[r],{capture:o,passive:l})}}}}function _x(i,e){i.gestures.add(e),i.gestureEventStores[e]=new uX(i,e),i.gestureTimeoutStores[e]=new Rme}function Dme(i,e){e.drag&&_x(i,"drag"),e.wheel&&_x(i,"wheel"),e.scroll&&_x(i,"scroll"),e.move&&_x(i,"move"),e.pinch&&_x(i,"pinch"),e.hover&&_x(i,"hover")}const S5=(i,e,t)=>(n,s,r,a={},o=!1)=>{var l,c;const d=(l=a.capture)!==null&&l!==void 0?l:e.capture,h=(c=a.passive)!==null&&c!==void 0?c:e.passive;let m=o?n:qpe(n,s,d);t&&h&&(m+="Passive"),i[m]=i[m]||[],i[m].push(r)};function Pme(i,e={},t,n){const s=fe.useMemo(()=>new Nme(i),[]);if(s.applyHandlers(i,n),s.applyConfig(e,t),fe.useEffect(s.effect.bind(s)),fe.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function Ome(i,e){return Sme(Tme),Pme({drag:i},e||{},"drag")}function sm(i,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(i?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function Lme(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function dX(...i){return e=>i.forEach(t=>Lme(t,e))}function yS(...i){return P.useCallback(dX(...i),i)}function fX(i,e=[]){let t=[];function n(r,a){const o=P.createContext(a),l=t.length;t=[...t,a];function c(h){const{scope:m,children:v,..._}=h,x=m?.[i][l]||o,T=P.useMemo(()=>_,Object.values(_));return P.createElement(x.Provider,{value:T},v)}function d(h,m){const v=m?.[i][l]||o,_=P.useContext(v);if(_)return _;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${r}\``)}return c.displayName=r+"Provider",[c,d]}const s=()=>{const r=t.map(a=>P.createContext(a));return function(o){const l=o?.[i]||r;return P.useMemo(()=>({[`__scope${i}`]:{...o,[i]:l}}),[o,l])}};return s.scopeName=i,[n,Ume(s,...e)]}function Ume(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const h=l(r)[`__scope${c}`];return{...o,...h}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}const hX=P.forwardRef((i,e)=>{const{children:t,...n}=i,s=P.Children.toArray(t),r=s.find(Bme);if(r){const a=r.props.children,o=s.map(l=>l===r?P.Children.count(a)>1?P.Children.only(null):P.isValidElement(a)?a.props.children:null:l);return P.createElement(E3,pa({},n,{ref:e}),P.isValidElement(a)?P.cloneElement(a,void 0,o):null)}return P.createElement(E3,pa({},n,{ref:e}),t)});hX.displayName="Slot";const E3=P.forwardRef((i,e)=>{const{children:t,...n}=i;return P.isValidElement(t)?P.cloneElement(t,{...Ime(n,t.props),ref:dX(e,t.ref)}):P.Children.count(t)>1?P.Children.only(null):null});E3.displayName="SlotClone";const pX=({children:i})=>P.createElement(P.Fragment,null,i);function Bme(i){return P.isValidElement(i)&&i.type===pX}function Ime(i,e){const t={...e};for(const n in e){const s=i[n],r=e[n];/^on[A-Z]/.test(n)?s&&r?t[n]=(...o)=>{r(...o),s(...o)}:s&&(t[n]=s):n==="style"?t[n]={...s,...r}:n==="className"&&(t[n]=[s,r].filter(Boolean).join(" "))}return{...i,...t}}const Fme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$v=Fme.reduce((i,e)=>{const t=P.forwardRef((n,s)=>{const{asChild:r,...a}=n,o=r?hX:e;return P.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),P.createElement(o,pa({},a,{ref:s}))});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{});function zme(i,e){i&&h_.flushSync(()=>i.dispatchEvent(e))}function vS(i){const e=P.useRef(i);return P.useEffect(()=>{e.current=i}),P.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function Vme(i,e=globalThis?.document){const t=vS(i);P.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,e])}const w3="dismissableLayer.update",kme="dismissableLayer.pointerDownOutside",Gme="dismissableLayer.focusOutside";let T5;const Hme=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jme=P.forwardRef((i,e)=>{var t;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=i,d=P.useContext(Hme),[h,m]=P.useState(null),v=(t=h?.ownerDocument)!==null&&t!==void 0?t:globalThis?.document,[,_]=P.useState({}),x=yS(e,F=>m(F)),T=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=T.indexOf(b),M=h?T.indexOf(h):-1,R=d.layersWithOutsidePointerEventsDisabled.size>0,N=M>=w,D=$me(F=>{const I=F.target,z=[...d.branches].some(H=>H.contains(I));!N||z||(r?.(F),o?.(F),F.defaultPrevented||l?.())},v),L=Wme(F=>{const I=F.target;[...d.branches].some(H=>H.contains(I))||(a?.(F),o?.(F),F.defaultPrevented||l?.())},v);return Vme(F=>{M===d.layers.size-1&&(s?.(F),!F.defaultPrevented&&l&&(F.preventDefault(),l()))},v),P.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(T5=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),E5(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=T5)}},[h,v,n,d]),P.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),E5())},[h,d]),P.useEffect(()=>{const F=()=>_({});return document.addEventListener(w3,F),()=>document.removeEventListener(w3,F)},[]),P.createElement($v.div,pa({},c,{ref:x,style:{pointerEvents:R?N?"auto":"none":void 0,...i.style},onFocusCapture:sm(i.onFocusCapture,L.onFocusCapture),onBlurCapture:sm(i.onBlurCapture,L.onBlurCapture),onPointerDownCapture:sm(i.onPointerDownCapture,D.onPointerDownCapture)}))});function $me(i,e=globalThis?.document){const t=vS(i),n=P.useRef(!1),s=P.useRef(()=>{});return P.useEffect(()=>{const r=o=>{if(o.target&&!n.current){let c=function(){mX(kme,t,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function Wme(i,e=globalThis?.document){const t=vS(i),n=P.useRef(!1);return P.useEffect(()=>{const s=r=>{r.target&&!n.current&&mX(Gme,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function E5(){const i=new CustomEvent(w3);document.dispatchEvent(i)}function mX(i,e,t,{discrete:n}){const s=t.originalEvent.target,r=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(i,e,{once:!0}),n?zme(s,r):s.dispatchEvent(r)}const Yg=globalThis?.document?P.useLayoutEffect:()=>{},qme=$N.useId||(()=>{});let Xme=0;function Yme(i){const[e,t]=P.useState(qme());return Yg(()=>{t(n=>n??String(Xme++))},[i]),e?`radix-${e}`:""}function __(i){return i.split("-")[0]}function cw(i){return i.split("-")[1]}function _S(i){return["top","bottom"].includes(__(i))?"x":"y"}function qI(i){return i==="y"?"height":"width"}function w5(i,e,t){let{reference:n,floating:s}=i;const r=n.x+n.width/2-s.width/2,a=n.y+n.height/2-s.height/2,o=_S(e),l=qI(o),c=n[l]/2-s[l]/2,d=o==="x";let h;switch(__(e)){case"top":h={x:r,y:n.y-s.height};break;case"bottom":h={x:r,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:a};break;case"left":h={x:n.x-s.width,y:a};break;default:h={x:n.x,y:n.y}}switch(cw(e)){case"start":h[o]-=c*(t&&d?-1:1);break;case"end":h[o]+=c*(t&&d?-1:1)}return h}const Kme=async(i,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:a}=t,o=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:i,floating:e,strategy:s}),{x:c,y:d}=w5(l,n,o),h=n,m={},v=0;for(let _=0;_<r.length;_++){const{name:x,fn:T}=r[_],{x:b,y:w,data:M,reset:R}=await T({x:c,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:m,rects:l,platform:a,elements:{reference:i,floating:e}});c=b??c,d=w??d,m={...m,[x]:{...m[x],...M}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(h=R.placement),R.rects&&(l=R.rects===!0?await a.getElementRects({reference:i,floating:e,strategy:s}):R.rects),{x:c,y:d}=w5(l,h,o)),_=-1)}return{x:c,y:d,placement:h,strategy:s,middlewareData:m}};function gX(i){return typeof i!="number"?(function(e){return{top:0,right:0,bottom:0,left:0,...e}})(i):{top:i,right:i,bottom:i,left:i}}function eN(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}async function EE(i,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:r,rects:a,elements:o,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:v=0}=e,_=gX(v),x=o[m?h==="floating"?"reference":"floating":h],T=eN(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(x)))==null||t?x:x.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),b=eN(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:h==="floating"?{...a.floating,x:n,y:s}:a.reference,offsetParent:await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),strategy:l}):a[h]);return{top:T.top-b.top+_.top,bottom:b.bottom-T.bottom+_.bottom,left:T.left-b.left+_.left,right:b.right-T.right+_.right}}const Zme=Math.min,hv=Math.max;function M3(i,e,t){return hv(i,Zme(e,t))}const M5=i=>({name:"arrow",options:i,async fn(e){const{element:t,padding:n=0}=i??{},{x:s,y:r,placement:a,rects:o,platform:l}=e;if(t==null)return{};const c=gX(n),d={x:s,y:r},h=_S(a),m=cw(a),v=qI(h),_=await l.getDimensions(t),x=h==="y"?"top":"left",T=h==="y"?"bottom":"right",b=o.reference[v]+o.reference[h]-d[h]-o.floating[v],w=d[h]-o.reference[h],M=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let R=M?h==="y"?M.clientHeight||0:M.clientWidth||0:0;R===0&&(R=o.floating[v]);const N=b/2-w/2,D=c[x],L=R-_[v]-c[T],F=R/2-_[v]/2+N,I=M3(D,F,L),z=(m==="start"?c[x]:c[T])>0&&F!==I&&o.reference[v]<=o.floating[v];return{[h]:d[h]-(z?F<D?D-F:L-F:0),data:{[h]:I,centerOffset:F-I}}}}),Qme={left:"right",right:"left",bottom:"top",top:"bottom"};function tN(i){return i.replace(/left|right|bottom|top/g,(e=>Qme[e]))}function Jme(i,e,t){t===void 0&&(t=!1);const n=cw(i),s=_S(i),r=qI(s);let a=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=tN(a)),{main:a,cross:tN(a)}}const ege={start:"end",end:"start"};function A5(i){return i.replace(/start|end/g,(e=>ege[e]))}const yX=["top","right","bottom","left"];yX.reduce(((i,e)=>i.concat(e,e+"-start",e+"-end")),[]);const tge=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t;const{placement:n,middlewareData:s,rects:r,initialPlacement:a,platform:o,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",flipAlignment:v=!0,..._}=i,x=__(n),T=h||(x===a||!v?[tN(a)]:(function(F){const I=tN(F);return[A5(F),I,A5(I)]})(a)),b=[a,...T],w=await EE(e,_),M=[];let R=((t=s.flip)==null?void 0:t.overflows)||[];if(c&&M.push(w[x]),d){const{main:F,cross:I}=Jme(n,r,await(o.isRTL==null?void 0:o.isRTL(l.floating)));M.push(w[F],w[I])}if(R=[...R,{placement:n,overflows:M}],!M.every((F=>F<=0))){var N,D;const F=((N=(D=s.flip)==null?void 0:D.index)!=null?N:0)+1,I=b[F];if(I)return{data:{index:F,overflows:R},reset:{placement:I}};let z="bottom";switch(m){case"bestFit":{var L;const H=(L=R.map((Y=>[Y,Y.overflows.filter((Z=>Z>0)).reduce(((Z,se)=>Z+se),0)])).sort(((Y,Z)=>Y[1]-Z[1]))[0])==null?void 0:L[0].placement;H&&(z=H);break}case"initialPlacement":z=a}if(n!==z)return{reset:{placement:z}}}return{}}}};function C5(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function R5(i){return yX.some((e=>i[e]>=0))}const nge=function(i){let{strategy:e="referenceHidden",...t}=i===void 0?{}:i;return{name:"hide",async fn(n){const{rects:s}=n;switch(e){case"referenceHidden":{const r=C5(await EE(n,{...t,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:R5(r)}}}case"escaped":{const r=C5(await EE(n,{...t,altBoundary:!0}),s.floating);return{data:{escapedOffsets:r,escaped:R5(r)}}}default:return{}}}}},ige=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){const{x:t,y:n}=e,s=await(async function(r,a){const{placement:o,platform:l,elements:c}=r,d=await(l.isRTL==null?void 0:l.isRTL(c.floating)),h=__(o),m=cw(o),v=_S(o)==="x",_=["left","top"].includes(h)?-1:1,x=d&&v?-1:1,T=typeof a=="function"?a(r):a;let{mainAxis:b,crossAxis:w,alignmentAxis:M}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...T};return m&&typeof M=="number"&&(w=m==="end"?-1*M:M),v?{x:w*x,y:b*_}:{x:b*_,y:w*x}})(e,i);return{x:t+s.x,y:n+s.y,data:s}}}};function vX(i){return i==="x"?"y":"x"}const sge=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:o={fn:T=>{let{x:b,y:w}=T;return{x:b,y:w}}},...l}=i,c={x:t,y:n},d=await EE(e,l),h=_S(__(s)),m=vX(h);let v=c[h],_=c[m];if(r){const T=h==="y"?"bottom":"right";v=M3(v+d[h==="y"?"top":"left"],v,v-d[T])}if(a){const T=m==="y"?"bottom":"right";_=M3(_+d[m==="y"?"top":"left"],_,_-d[T])}const x=o.fn({...e,[h]:v,[m]:_});return{...x,data:{x:x.x-t,y:x.y-n}}}}},rge=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:s,rects:r,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=i,d={x:t,y:n},h=_S(s),m=vX(h);let v=d[h],_=d[m];const x=typeof o=="function"?o({...r,placement:s}):o,T=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const N=h==="y"?"height":"width",D=r.reference[h]-r.floating[N]+T.mainAxis,L=r.reference[h]+r.reference[N]-T.mainAxis;v<D?v=D:v>L&&(v=L)}if(c){var b,w,M,R;const N=h==="y"?"width":"height",D=["top","left"].includes(__(s)),L=r.reference[m]-r.floating[N]+(D&&(b=(w=a.offset)==null?void 0:w[m])!=null?b:0)+(D?0:T.crossAxis),F=r.reference[m]+r.reference[N]+(D?0:(M=(R=a.offset)==null?void 0:R[m])!=null?M:0)-(D?T.crossAxis:0);_<L?_=L:_>F&&(_=F)}return{[h]:v,[m]:_}}}},age=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){const{placement:t,rects:n,platform:s,elements:r}=e,{apply:a,...o}=i,l=await EE(e,o),c=__(t),d=cw(t);let h,m;c==="top"||c==="bottom"?(h=c,m=d===(await(s.isRTL==null?void 0:s.isRTL(r.floating))?"start":"end")?"left":"right"):(m=c,h=d==="end"?"top":"bottom");const v=hv(l.left,0),_=hv(l.right,0),x=hv(l.top,0),T=hv(l.bottom,0),b={availableHeight:n.floating.height-(["left","right"].includes(t)?2*(x!==0||T!==0?x+T:hv(l.top,l.bottom)):l[h]),availableWidth:n.floating.width-(["top","bottom"].includes(t)?2*(v!==0||_!==0?v+_:hv(l.left,l.right)):l[m])},w=await s.getDimensions(r.floating);a?.({...e,...b});const M=await s.getDimensions(r.floating);return w.width!==M.width||w.height!==M.height?{reset:{rects:!0}}:{}}}};function _X(i){return i&&i.document&&i.location&&i.alert&&i.setInterval}function zm(i){if(i==null)return window;if(!_X(i)){const e=i.ownerDocument;return e&&e.defaultView||window}return i}function uw(i){return zm(i).getComputedStyle(i)}function gm(i){return _X(i)?"":i?(i.nodeName||"").toLowerCase():""}function xX(){const i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map((e=>e.brand+"/"+e.version)).join(" "):navigator.userAgent}function ap(i){return i instanceof zm(i).HTMLElement}function hy(i){return i instanceof zm(i).Element}function XI(i){return typeof ShadowRoot>"u"?!1:i instanceof zm(i).ShadowRoot||i instanceof ShadowRoot}function a2(i){const{overflow:e,overflowX:t,overflowY:n}=uw(i);return/auto|scroll|overlay|hidden/.test(e+n+t)}function oge(i){return["table","td","th"].includes(gm(i))}function N5(i){const e=/firefox/i.test(xX()),t=uw(i);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function bX(){return!/^((?!chrome|android).)*safari/i.test(xX())}const D5=Math.min,k1=Math.max,nN=Math.round;function ym(i,e,t){var n,s,r,a;e===void 0&&(e=!1),t===void 0&&(t=!1);const o=i.getBoundingClientRect();let l=1,c=1;e&&ap(i)&&(l=i.offsetWidth>0&&nN(o.width)/i.offsetWidth||1,c=i.offsetHeight>0&&nN(o.height)/i.offsetHeight||1);const d=hy(i)?zm(i):window,h=!bX()&&t,m=(o.left+(h&&(n=(s=d.visualViewport)==null?void 0:s.offsetLeft)!=null?n:0))/l,v=(o.top+(h&&(r=(a=d.visualViewport)==null?void 0:a.offsetTop)!=null?r:0))/c,_=o.width/l,x=o.height/c;return{width:_,height:x,top:v,right:m+_,bottom:v+x,left:m,x:m,y:v}}function sy(i){return(e=i,(e instanceof zm(e).Node?i.ownerDocument:i.document)||window.document).documentElement;var e}function o2(i){return hy(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function SX(i){return ym(sy(i)).left+o2(i).scrollLeft}function lge(i,e,t){const n=ap(e),s=sy(e),r=ym(i,n&&(function(l){const c=ym(l);return nN(c.width)!==l.offsetWidth||nN(c.height)!==l.offsetHeight})(e),t==="fixed");let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(n||!n&&t!=="fixed")if((gm(e)!=="body"||a2(s))&&(a=o2(e)),ap(e)){const l=ym(e,!0);o.x=l.x+e.clientLeft,o.y=l.y+e.clientTop}else s&&(o.x=SX(s));return{x:r.left+a.scrollLeft-o.x,y:r.top+a.scrollTop-o.y,width:r.width,height:r.height}}function TX(i){return gm(i)==="html"?i:i.assignedSlot||i.parentNode||(XI(i)?i.host:null)||sy(i)}function P5(i){return ap(i)&&getComputedStyle(i).position!=="fixed"?i.offsetParent:null}function A3(i){const e=zm(i);let t=P5(i);for(;t&&oge(t)&&getComputedStyle(t).position==="static";)t=P5(t);return t&&(gm(t)==="html"||gm(t)==="body"&&getComputedStyle(t).position==="static"&&!N5(t))?e:t||(function(n){let s=TX(n);for(XI(s)&&(s=s.host);ap(s)&&!["html","body"].includes(gm(s));){if(N5(s))return s;s=s.parentNode}return null})(i)||e}function O5(i){if(ap(i))return{width:i.offsetWidth,height:i.offsetHeight};const e=ym(i);return{width:e.width,height:e.height}}function EX(i){const e=TX(i);return["html","body","#document"].includes(gm(e))?i.ownerDocument.body:ap(e)&&a2(e)?e:EX(e)}function iN(i,e){var t;e===void 0&&(e=[]);const n=EX(i),s=n===((t=i.ownerDocument)==null?void 0:t.body),r=zm(n),a=s?[r].concat(r.visualViewport||[],a2(n)?n:[]):n,o=e.concat(a);return s?o:o.concat(iN(a))}function L5(i,e,t){return e==="viewport"?eN((function(n,s){const r=zm(n),a=sy(n),o=r.visualViewport;let l=a.clientWidth,c=a.clientHeight,d=0,h=0;if(o){l=o.width,c=o.height;const m=bX();(m||!m&&s==="fixed")&&(d=o.offsetLeft,h=o.offsetTop)}return{width:l,height:c,x:d,y:h}})(i,t)):hy(e)?(function(n,s){const r=ym(n,!1,s==="fixed"),a=r.top+n.clientTop,o=r.left+n.clientLeft;return{top:a,left:o,x:o,y:a,right:o+n.clientWidth,bottom:a+n.clientHeight,width:n.clientWidth,height:n.clientHeight}})(e,t):eN((function(n){var s;const r=sy(n),a=o2(n),o=(s=n.ownerDocument)==null?void 0:s.body,l=k1(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=k1(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let d=-a.scrollLeft+SX(n);const h=-a.scrollTop;return uw(o||r).direction==="rtl"&&(d+=k1(r.clientWidth,o?o.clientWidth:0)-l),{width:l,height:c,x:d,y:h}})(sy(i)))}function cge(i){const e=iN(i),t=["absolute","fixed"].includes(uw(i).position)&&ap(i)?A3(i):i;return hy(t)?e.filter((n=>hy(n)&&(function(s,r){const a=r.getRootNode==null?void 0:r.getRootNode();if(s.contains(r))return!0;if(a&&XI(a)){let o=r;do{if(o&&s===o)return!0;o=o.parentNode||o.host}while(o)}return!1})(n,t)&&gm(n)!=="body")):[]}const uge={getClippingRect:function(i){let{element:e,boundary:t,rootBoundary:n,strategy:s}=i;const r=[...t==="clippingAncestors"?cge(e):[].concat(t),n],a=r[0],o=r.reduce(((l,c)=>{const d=L5(e,c,s);return l.top=k1(d.top,l.top),l.right=D5(d.right,l.right),l.bottom=D5(d.bottom,l.bottom),l.left=k1(d.left,l.left),l}),L5(e,a,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(i){let{rect:e,offsetParent:t,strategy:n}=i;const s=ap(t),r=sy(t);if(t===r)return e;let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if((s||!s&&n!=="fixed")&&((gm(t)!=="body"||a2(r))&&(a=o2(t)),ap(t))){const l=ym(t,!0);o.x=l.x+t.clientLeft,o.y=l.y+t.clientTop}return{...e,x:e.x-a.scrollLeft+o.x,y:e.y-a.scrollTop+o.y}},isElement:hy,getDimensions:O5,getOffsetParent:A3,getDocumentElement:sy,getElementRects:i=>{let{reference:e,floating:t,strategy:n}=i;return{reference:lge(e,A3(t),n),floating:{...O5(t),x:0,y:0}}},getClientRects:i=>Array.from(i.getClientRects()),isRTL:i=>uw(i).direction==="rtl"};function dge(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:a=!0,animationFrame:o=!1}=n,l=s&&!o,c=r&&!o,d=l||c?[...hy(i)?iN(i):[],...iN(e)]:[];d.forEach((_=>{l&&_.addEventListener("scroll",t,{passive:!0}),c&&_.addEventListener("resize",t)}));let h,m=null;if(a){let _=!0;m=new ResizeObserver((()=>{_||t(),_=!1})),hy(i)&&!o&&m.observe(i),m.observe(e)}let v=o?ym(i):null;return o&&(function _(){const x=ym(i);!v||x.x===v.x&&x.y===v.y&&x.width===v.width&&x.height===v.height||t(),v=x,h=requestAnimationFrame(_)})(),t(),()=>{var _;d.forEach((x=>{l&&x.removeEventListener("scroll",t),c&&x.removeEventListener("resize",t)})),(_=m)==null||_.disconnect(),m=null,o&&cancelAnimationFrame(h)}}const fge=(i,e,t)=>Kme(i,e,{platform:uge,...t});var C3=typeof document<"u"?P.useLayoutEffect:P.useEffect;function R3(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,s;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!R3(i[n],e[n]))return!1;return!0}if(s=Object.keys(i),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const r=s[n];if(!(r==="_owner"&&i.$$typeof)&&!R3(i[r],e[r]))return!1}return!0}return i!==i&&e!==e}function hge(i){const e=P.useRef(i);return C3(()=>{e.current=i}),e}function pge(i){let{middleware:e,placement:t="bottom",strategy:n="absolute",whileElementsMounted:s}=i===void 0?{}:i;const r=P.useRef(null),a=P.useRef(null),o=hge(s),l=P.useRef(null),[c,d]=P.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{}}),[h,m]=P.useState(e);R3(h?.map(M=>{let{options:R}=M;return R}),e?.map(M=>{let{options:R}=M;return R}))||m(e);const v=P.useCallback(()=>{!r.current||!a.current||fge(r.current,a.current,{middleware:h,placement:t,strategy:n}).then(M=>{_.current&&h_.flushSync(()=>{d(M)})})},[h,t,n]);C3(()=>{_.current&&v()},[v]);const _=P.useRef(!1);C3(()=>(_.current=!0,()=>{_.current=!1}),[]);const x=P.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),r.current&&a.current)if(o.current){const M=o.current(r.current,a.current,v);l.current=M}else v()},[v,o]),T=P.useCallback(M=>{r.current=M,x()},[x]),b=P.useCallback(M=>{a.current=M,x()},[x]),w=P.useMemo(()=>({reference:r,floating:a}),[]);return P.useMemo(()=>({...c,update:v,refs:w,reference:T,floating:b}),[c,v,w,T,b])}const mge=i=>{const{element:e,padding:t}=i;function n(s){return Object.prototype.hasOwnProperty.call(s,"current")}return{name:"arrow",options:i,fn(s){return n(e)?e.current!=null?M5({element:e.current,padding:t}).fn(s):{}:e?M5({element:e,padding:t}).fn(s):{}}}},gge=P.forwardRef((i,e)=>{const{children:t,width:n=10,height:s=5,...r}=i;return P.createElement($v.svg,pa({},r,{ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),i.asChild?t:P.createElement("polygon",{points:"0,0 30,0 15,10"}))}),yge=gge;function vge(i){const[e,t]=P.useState(void 0);return Yg(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let a,o;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=i.offsetWidth,o=i.offsetHeight;t({width:a,height:o})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}const wX="Popper",[YI,MX]=fX(wX),[_ge,AX]=YI(wX),xge=i=>{const{__scopePopper:e,children:t}=i,[n,s]=P.useState(null);return P.createElement(_ge,{scope:e,anchor:n,onAnchorChange:s},t)},bge="PopperAnchor",Sge=P.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...s}=i,r=AX(bge,t),a=P.useRef(null),o=yS(e,a);return P.useEffect(()=>{r.onAnchorChange(n?.current||a.current)}),n?null:P.createElement($v.div,pa({},s,{ref:o}))}),sN="PopperContent",[Tge,Ege]=YI(sN),[wge,Mge]=YI(sN,{hasParent:!1,positionUpdateFns:new Set}),Age=P.forwardRef((i,e)=>{var t,n,s,r,a,o,l,c;const{__scopePopper:d,side:h="bottom",sideOffset:m=0,align:v="center",alignOffset:_=0,arrowPadding:x=0,collisionBoundary:T=[],collisionPadding:b=0,sticky:w="partial",hideWhenDetached:M=!1,avoidCollisions:R=!0,onPlaced:N,...D}=i,L=AX(sN,d),[F,I]=P.useState(null),z=yS(e,kt=>I(kt)),[H,Y]=P.useState(null),Z=vge(H),se=(t=Z?.width)!==null&&t!==void 0?t:0,oe=(n=Z?.height)!==null&&n!==void 0?n:0,G=h+(v!=="center"?"-"+v:""),K=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},$=Array.isArray(T)?T:[T],ce=$.length>0,q={padding:K,boundary:$.filter(Pge),altBoundary:ce},{reference:ue,floating:Ae,strategy:Ne,x:we,y:pt,placement:Ee,middlewareData:Ue,update:Ve}=pge({strategy:"fixed",placement:G,whileElementsMounted:dge,middleware:[Oge(),ige({mainAxis:m+oe,alignmentAxis:_}),R?sge({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?rge():void 0,...q}):void 0,H?mge({element:H,padding:x}):void 0,R?tge({...q}):void 0,age({...q,apply:({elements:kt,availableWidth:X,availableHeight:W})=>{kt.floating.style.setProperty("--radix-popper-available-width",`${X}px`),kt.floating.style.setProperty("--radix-popper-available-height",`${W}px`)}}),Lge({arrowWidth:se,arrowHeight:oe}),M?nge({strategy:"referenceHidden"}):void 0].filter(Dge)});Yg(()=>{ue(L.anchor)},[ue,L.anchor]);const Be=we!==null&&pt!==null,[Mt,ct]=CX(Ee),Et=vS(N);Yg(()=>{Be&&Et?.()},[Be,Et]);const le=(s=Ue.arrow)===null||s===void 0?void 0:s.x,$e=(r=Ue.arrow)===null||r===void 0?void 0:r.y,Ze=((a=Ue.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[Xe,We]=P.useState();Yg(()=>{F&&We(window.getComputedStyle(F).zIndex)},[F]);const{hasParent:_t,positionUpdateFns:ut}=Mge(sN,d),ht=!_t;P.useLayoutEffect(()=>{if(!ht)return ut.add(Ve),()=>{ut.delete(Ve)}},[ht,ut,Ve]),Yg(()=>{ht&&Be&&Array.from(ut).reverse().forEach(kt=>requestAnimationFrame(kt))},[ht,Be,ut]);const Bt={"data-side":Mt,"data-align":ct,...D,ref:z,style:{...D.style,animation:Be?void 0:"none",opacity:(o=Ue.hide)!==null&&o!==void 0&&o.referenceHidden?0:void 0}};return P.createElement("div",{ref:Ae,"data-radix-popper-content-wrapper":"",style:{position:Ne,left:0,top:0,transform:Be?`translate3d(${Math.round(we)}px, ${Math.round(pt)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Xe,"--radix-popper-transform-origin":[(l=Ue.transformOrigin)===null||l===void 0?void 0:l.x,(c=Ue.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:i.dir},P.createElement(Tge,{scope:d,placedSide:Mt,onArrowChange:Y,arrowX:le,arrowY:$e,shouldHideArrow:Ze},ht?P.createElement(wge,{scope:d,hasParent:!0,positionUpdateFns:ut},P.createElement($v.div,Bt)):P.createElement($v.div,Bt)))}),Cge="PopperArrow",Rge={top:"bottom",right:"left",bottom:"top",left:"right"},Nge=P.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,r=Ege(Cge,n),a=Rge[r.placedSide];return P.createElement("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0}},P.createElement(yge,pa({},s,{ref:t,style:{...s.style,display:"block"}})))});function Dge(i){return i!==void 0}function Pge(i){return i!==null}const Oge=()=>({name:"anchorCssProperties",fn(i){const{rects:e,elements:t}=i,{width:n,height:s}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${n}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${s}px`),{}}}),Lge=i=>({name:"transformOrigin",options:i,fn(e){var t,n,s,r,a;const{placement:o,rects:l,middlewareData:c}=e,h=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,m=h?0:i.arrowWidth,v=h?0:i.arrowHeight,[_,x]=CX(o),T={start:"0%",center:"50%",end:"100%"}[x],b=((n=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+m/2,w=((r=(a=c.arrow)===null||a===void 0?void 0:a.y)!==null&&r!==void 0?r:0)+v/2;let M="",R="";return _==="bottom"?(M=h?T:`${b}px`,R=`${-v}px`):_==="top"?(M=h?T:`${b}px`,R=`${l.floating.height+v}px`):_==="right"?(M=`${-v}px`,R=h?T:`${w}px`):_==="left"&&(M=`${l.floating.width+v}px`,R=h?T:`${w}px`),{data:{x:M,y:R}}}});function CX(i){const[e,t="center"]=i.split("-");return[e,t]}const Uge=xge,Bge=Sge,Ige=Age,Fge=Nge;function zge(i,e){return P.useReducer((t,n)=>{const s=e[t][n];return s??t},i)}const RX=i=>{const{present:e,children:t}=i,n=Vge(e),s=typeof t=="function"?t({present:n.isPresent}):P.Children.only(t),r=yS(n.ref,s.ref);return typeof t=="function"||n.isPresent?P.cloneElement(s,{ref:r}):null};RX.displayName="Presence";function Vge(i){const[e,t]=P.useState(),n=P.useRef({}),s=P.useRef(i),r=P.useRef("none"),a=i?"mounted":"unmounted",[o,l]=zge(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const c=kA(n.current);r.current=o==="mounted"?c:"none"},[o]),Yg(()=>{const c=n.current,d=s.current;if(d!==i){const m=r.current,v=kA(c);i?l("MOUNT"):v==="none"||c?.display==="none"?l("UNMOUNT"):l(d&&m!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=i}},[i,l]),Yg(()=>{if(e){const c=h=>{const v=kA(n.current).includes(h.animationName);h.target===e&&v&&h_.flushSync(()=>l("ANIMATION_END"))},d=h=>{h.target===e&&(r.current=kA(n.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:P.useCallback(c=>{c&&(n.current=getComputedStyle(c)),t(c)},[])}}function kA(i){return i?.animationName||"none"}function kge({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,s]=Gge({defaultProp:e,onChange:t}),r=i!==void 0,a=r?i:n,o=vS(t),l=P.useCallback(c=>{if(r){const h=typeof c=="function"?c(i):c;h!==i&&o(h)}else s(c)},[r,i,s,o]);return[a,l]}function Gge({defaultProp:i,onChange:e}){const t=P.useState(i),[n]=t,s=P.useRef(n),r=vS(e);return P.useEffect(()=>{s.current!==n&&(r(n),s.current=n)},[n,s,r]),t}const Hge=P.forwardRef((i,e)=>P.createElement($v.span,pa({},i,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...i.style}}))),jge=Hge,[l2]=fX("Tooltip",[MX]),c2=MX(),$ge="TooltipProvider",N3="tooltip.open",[Uke,KI]=l2($ge),ZI="Tooltip",[Wge,u2]=l2(ZI),qge=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:s=!1,onOpenChange:r,disableHoverableContent:a,delayDuration:o}=i,l=KI(ZI,i.__scopeTooltip),c=c2(e),[d,h]=P.useState(null),m=Yme(),v=P.useRef(0),_=a??l.disableHoverableContent,x=o??l.delayDuration,T=P.useRef(!1),[b=!1,w]=kge({prop:n,defaultProp:s,onChange:L=>{L?(l.onOpen(),document.dispatchEvent(new CustomEvent(N3))):l.onClose(),r?.(L)}}),M=P.useMemo(()=>b?T.current?"delayed-open":"instant-open":"closed",[b]),R=P.useCallback(()=>{window.clearTimeout(v.current),T.current=!1,w(!0)},[w]),N=P.useCallback(()=>{window.clearTimeout(v.current),w(!1)},[w]),D=P.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{T.current=!0,w(!0)},x)},[x,w]);return P.useEffect(()=>()=>window.clearTimeout(v.current),[]),P.createElement(Uge,c,P.createElement(Wge,{scope:e,contentId:m,open:b,stateAttribute:M,trigger:d,onTriggerChange:h,onTriggerEnter:P.useCallback(()=>{l.isOpenDelayed?D():R()},[l.isOpenDelayed,D,R]),onTriggerLeave:P.useCallback(()=>{_?N():window.clearTimeout(v.current)},[N,_]),onOpen:R,onClose:N,disableHoverableContent:_},t))},U5="TooltipTrigger",Xge=P.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,s=u2(U5,t),r=KI(U5,t),a=c2(t),o=P.useRef(null),l=yS(e,o,s.onTriggerChange),c=P.useRef(!1),d=P.useRef(!1),h=P.useCallback(()=>c.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),P.createElement(Bge,pa({asChild:!0},a),P.createElement($v.button,pa({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},n,{ref:l,onPointerMove:sm(i.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:sm(i.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:sm(i.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:sm(i.onFocus,()=>{c.current||s.onOpen()}),onBlur:sm(i.onBlur,s.onClose),onClick:sm(i.onClick,s.onClose)})))}),Yge="TooltipPortal",[Bke,Kge]=l2(Yge,{forceMount:void 0}),wE="TooltipContent",Zge=P.forwardRef((i,e)=>{const t=Kge(wE,i.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...r}=i,a=u2(wE,i.__scopeTooltip);return P.createElement(RX,{present:n||a.open},a.disableHoverableContent?P.createElement(NX,pa({side:s},r,{ref:e})):P.createElement(Qge,pa({side:s},r,{ref:e})))}),Qge=P.forwardRef((i,e)=>{const t=u2(wE,i.__scopeTooltip),n=KI(wE,i.__scopeTooltip),s=P.useRef(null),r=yS(e,s),[a,o]=P.useState(null),{trigger:l,onClose:c}=t,d=s.current,{onPointerInTransitChange:h}=n,m=P.useCallback(()=>{o(null),h(!1)},[h]),v=P.useCallback((_,x)=>{const T=_.currentTarget,b={x:_.clientX,y:_.clientY},w=iye(b,T.getBoundingClientRect()),M=w==="right"||w==="bottom"?-5:5,N=w==="right"||w==="left"?{x:_.clientX+M,y:_.clientY}:{x:_.clientX,y:_.clientY+M},D=sye(x.getBoundingClientRect()),L=aye([N,...D]);o(L),h(!0)},[h]);return P.useEffect(()=>()=>m(),[m]),P.useEffect(()=>{if(l&&d){const _=T=>v(T,d),x=T=>v(T,l);return l.addEventListener("pointerleave",_),d.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",_),d.removeEventListener("pointerleave",x)}}},[l,d,v,m]),P.useEffect(()=>{if(a){const _=x=>{const T=x.target,b={x:x.clientX,y:x.clientY},w=l?.contains(T)||d?.contains(T),M=!rye(b,a);w?m():M&&(m(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,d,a,c,m]),P.createElement(NX,pa({},i,{ref:r}))}),[Jge,eye]=l2(ZI,{isInside:!1}),NX=P.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:a,...o}=i,l=u2(wE,t),c=c2(t),{onClose:d}=l;return P.useEffect(()=>(document.addEventListener(N3,d),()=>document.removeEventListener(N3,d)),[d]),P.useEffect(()=>{if(l.trigger){const h=m=>{const v=m.target;v!=null&&v.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),P.createElement(jme,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d},P.createElement(Ige,pa({"data-state":l.stateAttribute},c,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),P.createElement(pX,null,n),P.createElement(Jge,{scope:t,isInside:!0},P.createElement(jge,{id:l.contentId,role:"tooltip"},s||n))))}),tye="TooltipArrow",nye=P.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,s=c2(t);return eye(tye,t).isInside?null:P.createElement(Fge,pa({},s,n,{ref:e}))});function iye(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),s=Math.abs(e.right-i.x),r=Math.abs(e.left-i.x);switch(Math.min(t,n,s,r)){case r:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:return null}}function sye(i){const{top:e,right:t,bottom:n,left:s}=i;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function rye(i,e){const{x:t,y:n}=i;let s=!1;for(let r=0,a=e.length-1;r<e.length;a=r++){const o=e[r].x,l=e[r].y,c=e[a].x,d=e[a].y;l>n!=d>n&&t<(c-o)*(n-l)/(d-l)+o&&(s=!s)}return s}function aye(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),oye(e)}function oye(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const s=i[n];for(;e.length>=2;){const r=e[e.length-1],a=e[e.length-2];if((r.x-a.x)*(s.y-a.y)>=(r.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const s=i[n];for(;t.length>=2;){const r=t[t.length-1],a=t[t.length-2];if((r.x-a.x)*(s.y-a.y)>=(r.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const lye=qge,cye=Xge,uye=Zge,dye=nye;function fye(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function ir(i,e){if(i==null)return{};var t=fye(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}let aa;(function(i){i[i.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",i[i.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",i[i.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",i[i.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",i[i.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",i[i.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",i[i.THEME_ERROR=6]="THEME_ERROR",i[i.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",i[i.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",i[i.EMPTY_KEY=9]="EMPTY_KEY"})(aa||(aa={}));const hye={[aa.UNSUPPORTED_INPUT]:(i,e)=>[`An input with type \`${i}\` input was found at path \`${e}\` but it's not supported yet.`],[aa.NO_COMPONENT_FOR_TYPE]:(i,e)=>[`Type \`${i}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[aa.UNKNOWN_INPUT]:(i,e)=>[`input at path \`${i}\` is not recognized.`,e],[aa.DUPLICATE_KEYS]:(i,e,t)=>[`Key \`${i}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[aa.ALREADY_REGISTERED_TYPE]:i=>[`Type ${i} has already been registered. You can't register a component with the same type.`],[aa.CLIPBOARD_ERROR]:i=>["Error copying the value",i],[aa.THEME_ERROR]:(i,e)=>[`Error accessing the theme \`${i}.${e}\` value.`],[aa.PATH_DOESNT_EXIST]:i=>[`Error getting the value at path \`${i}\`. There is probably an error in your \`render\` function.`],[aa.PATH_DOESNT_EXIST]:i=>[`Error accessing the value at path \`${i}\``],[aa.INPUT_TYPE_OVERRIDE]:(i,e,t)=>[`Input at path \`${i}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[aa.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function DX(i,e,...t){const[n,...s]=hye[e](...t);console[i]("LEVA: "+n,...s)}const lm=DX.bind(null,"warn"),pye=DX.bind(null,"log"),mye=["value"],gye=["schema"],yye=["value"],PX=[],Wv={};function B5(i){let{value:e}=i,t=ir(i,mye);for(let n of PX){const s=n(e,t);if(s)return s}}function Vm(i,e){let{schema:t}=e,n=ir(e,gye);if(i in Wv){lm(aa.ALREADY_REGISTERED_TYPE,i);return}PX.push((s,r)=>t(s,r)&&i),Wv[i]=n}function sO(i,e,t,n){const{normalize:s}=Wv[i];if(s)return s(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:r}=e,a=ir(e,yye);return{value:r,settings:a}}function vye(i,e,t,n,s,r){const{sanitize:a}=Wv[i];return a?a(e,t,n,s,r):e}function I5(i,e,t){const{format:n}=Wv[i];return n?n(e,t):e}function _ye(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function F5(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Zn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(t),!0).forEach(function(n){_ye(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):F5(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const py=(i,e,t)=>i>t?t:i<e?e:i,xye=i=>{if(i===""||typeof i=="number")return i;try{const e=zg(i);if(!isNaN(e))return e}catch{}return parseFloat(i)},bye=Math.log(10);function z5(i){let e=Math.abs(+String(i).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/bye)+1,n=Math.floor(Math.log10(Math.abs(i))),s=Math.pow(10,n-t);return Math.max(s,.001)}const rN=(i,e,t)=>t===e?0:(py(i,e,t)-e)/(t-e),aN=(i,e,t)=>i*(t-e)+e,Sye=()=>"_"+Math.random().toString(36).substr(2,9),V5=/\(([0-9+\-*/^ .]+)\)/,k5=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,G5=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,H5=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,j5=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,$5=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function zg(i){if(isNaN(Number(i)))if(V5.test(i)){const e=i.replace(V5,(t,n)=>String(zg(n)));return zg(e)}else if(k5.test(i)){const e=i.replace(k5,(t,n,s)=>String(Math.pow(Number(n),Number(s))));return zg(e)}else if(G5.test(i)){const e=i.replace(G5,(t,n,s)=>String(Number(n)*Number(s)));return zg(e)}else if(H5.test(i)){const e=i.replace(H5,(t,n,s)=>{if(s!=0)return String(Number(n)/Number(s));throw new Error("Division by zero")});return zg(e)}else if(j5.test(i)){const e=i.replace(j5,(t,n,s)=>String(Number(n)+Number(s)));return zg(e)}else if($5.test(i)){const e=i.replace($5,(t,n,s)=>String(Number(n)-Number(s)));return zg(e)}else return Number(i);return Number(i)}function Tye(i,e){return e.reduce((t,n)=>(i&&i.hasOwnProperty(n)&&(t[n]=i[n]),t),{})}function Eye(i,e){const t=Zn({},i);return e.forEach(n=>n in i&&delete t[n]),t}function wye(i,e){return i.reduce((t,n,s)=>Object.assign(t,{[e[s]]:n}),{})}function OX(i){return Object.prototype.toString.call(i)==="[object Object]"}const Mye=i=>OX(i)&&Object.keys(i).length===0;let Bf;(function(i){i.BUTTON="BUTTON",i.BUTTON_GROUP="BUTTON_GROUP",i.MONITOR="MONITOR",i.FOLDER="FOLDER"})(Bf||(Bf={}));let kf;(function(i){i.SELECT="SELECT",i.IMAGE="IMAGE",i.NUMBER="NUMBER",i.COLOR="COLOR",i.STRING="STRING",i.BOOLEAN="BOOLEAN",i.INTERVAL="INTERVAL",i.VECTOR3D="VECTOR3D",i.VECTOR2D="VECTOR2D"})(kf||(kf={}));const Aye=["type","__customInput"],Cye=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],Rye=["type"];function LX(i,e,t={},n){var s,r;if(typeof i!="object"||Array.isArray(i))return{type:n,input:i,options:Zn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in i){const{type:N,__customInput:D}=i,L=ir(i,Aye);return LX(D,e,L,N)}const{render:a,label:o,optional:l,order:c=0,disabled:d,hint:h,onChange:m,onEditStart:v,onEditEnd:_,transient:x}=i,T=ir(i,Cye),b=Zn({render:a,key:e,label:o??e,hint:h,transient:x??!!m,onEditStart:v,onEditEnd:_,disabled:d,optional:l,order:c},t);let{type:w}=T,M=ir(T,Rye);if(w=n??w,w in Bf)return{type:w,input:M,options:b};let R;return n&&OX(M)&&"value"in M?R=M.value:R=Mye(M)?void 0:M,{type:w,input:R,options:Zn(Zn({},b),{},{onChange:m,optional:(s=b.optional)!==null&&s!==void 0?s:!1,disabled:(r=b.disabled)!==null&&r!==void 0?r:!1})}}function Nye(i,e,t,n){const s=LX(i,e),{type:r,input:a,options:o}=s;if(r)return r in Bf?s:{type:r,input:sO(r,a,t,n),options:o};let l=B5(a);return l?{type:l,input:sO(l,a,t,n),options:o}:(l=B5({value:a}),l?{type:l,input:sO(l,{value:a},t,n),options:o}:!1)}function W5(i,e,t,n,s){const{value:r,type:a,settings:o}=i;i.value=UX({type:a,value:r,settings:o},e,t,n),i.fromPanel=s}const Dye=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function UX({type:i,value:e,settings:t},n,s,r){const a=i!=="SELECT"&&typeof n=="function"?n(e):n;let o;try{o=vye(i,a,t,e,s,r)}catch(l){throw new Dye(`The value \`${n}\` did not result in a correct value.`,e,l)}return SE(o,e)?e:o}const BX=(i,e,t=!1)=>{let n=0;return function(){const s=arguments,r=t&&!n,a=()=>i.apply(this,s);window.clearTimeout(n),n=window.setTimeout(a,e),r&&a()}},IX=i=>i.shiftKey?5:i.altKey?1/5:1,Pye=["value"],Oye=["min","max"],Lye=i=>{if(typeof i=="number")return!0;if(typeof i=="string"){const e=parseFloat(i);return isNaN(e)?!1:i.substring((""+e).length).trim().length<4}return!1},FX=(i,{min:e=-1/0,max:t=1/0,suffix:n})=>{const s=parseFloat(i);if(i===""||isNaN(s))throw Error("Invalid number");const r=py(s,e,t);return n?r+n:r},Uye=(i,{pad:e=0,suffix:t})=>{const n=parseFloat(i).toFixed(e);return t?n+t:n},zX=i=>{let{value:e}=i,t=ir(i,Pye);const{min:n=-1/0,max:s=1/0}=t,r=ir(t,Oye);let a=parseFloat(e);const o=typeof e=="string"?e.substring((""+a).length):void 0;a=py(a,n,s);let l=t.step;l||(Number.isFinite(n)?Number.isFinite(s)?l=+(Math.abs(s-n)/100).toPrecision(1):l=+(Math.abs(a-n)/100).toPrecision(1):Number.isFinite(s)&&(l=+(Math.abs(s-a)/100).toPrecision(1)));const c=l?z5(l)*10:z5(a);l=l||c/10;const d=Math.round(py(Math.log10(1/c),0,2));return{value:o?a+o:a,settings:Zn({initialValue:a,step:l,pad:d,min:n,max:s,suffix:o},r)}},VX=(i,{step:e,initialValue:t})=>{const n=Math.round((i-t)/e);return t+n*e};var kX=Object.freeze({__proto__:null,schema:Lye,sanitize:FX,format:Uye,normalize:zX,sanitizeStep:VX});function Ra(){return Ra=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ra.apply(this,arguments)}const GX=P.createContext({});function Ql(){return P.useContext(GX)}const QI=P.createContext(null),HX=P.createContext(null),jX=P.createContext(null);function dw(){return P.useContext(HX)}function Bye(){return P.useContext(jX)}const $X=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function GA(i,e){const[t,n]=i.split(" "),s={};return t!=="none"&&(s.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(s.backgroundColor=n),s}const HT={$inputStyle:()=>i=>GA(i,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>i=>GA(i,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>i=>GA(i,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>i=>GA(i,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:zn,css:Ike,createTheme:Iye,globalCss:Fye,keyframes:Fke}=Vpe({prefix:"leva",theme:$X(),utils:Zn(Zn({},HT),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:i=>({"&:focus":HT.$focusStyle()(i)}),$focusWithin:i=>({"&:focus-within":HT.$focusStyle()(i)}),$hover:i=>({"&:hover":HT.$hoverStyle()(i)}),$active:i=>({"&:active":HT.$activeStyle()(i)})})}),zye=Fye({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Vye(i){const e=$X();if(!i)return{theme:e,className:""};Object.keys(i).forEach(n=>{Object.assign(e[n],i[n])});const t=Iye(e);return{theme:e,className:t.className}}function vm(i,e){const{theme:t}=P.useContext(QI);if(!(i in t)||!(e in t[i]))return lm(aa.THEME_ERROR,i,e),"";let n=e;for(;;){let s=t[i][n];if(typeof s=="string"&&s.charAt(0)==="$")n=s.substr(1);else return s}}const WX=zn("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),qX=zn("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${WX}`]:{paddingLeft:0}}),kye=zn(qX,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Gye=zn("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Hye=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],jye=["onUpdate"];function JI(i){let{innerLabel:e,value:t,onUpdate:n,onChange:s,onKeyDown:r,type:a,id:o,inputType:l="text",rows:c=0}=i,d=ir(i,Hye);const{id:h,emitOnEditStart:m,emitOnEditEnd:v,disabled:_}=Ql(),x=o||h,T=P.useRef(null),b=c>0,w=b?"textarea":"input",M=P.useCallback(D=>L=>{const F=L.currentTarget.value;D(F)},[]);fe.useEffect(()=>{const D=T.current,L=M(F=>{n(F),v()});return D?.addEventListener("blur",L),()=>D?.removeEventListener("blur",L)},[M,n,v]);const R=P.useCallback(D=>{D.key==="Enter"&&M(n)(D)},[M,n]),N=Object.assign({as:w},b?{rows:c}:{},d);return fe.createElement(Gye,{textArea:b},e&&typeof e=="string"?fe.createElement(qX,null,e):e,fe.createElement(WX,Ra({levaType:a,ref:T,id:x,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:M(s),onFocus:()=>m(),onKeyPress:R,onKeyDown:r,disabled:_},N)))}function $ye(i){let{onUpdate:e}=i,t=ir(i,jye);const n=P.useCallback(r=>e(xye(r)),[e]),s=P.useCallback(r=>{const a=r.key==="ArrowUp"?1:r.key==="ArrowDown"?-1:0;if(a){r.preventDefault();const o=r.altKey?.1:r.shiftKey?10:1;e(l=>parseFloat(l)+a*o)}},[e]);return fe.createElement(JI,Ra({},t,{onUpdate:n,onKeyDown:s,type:"number"}))}const oN=zn("div",{}),D3=zn("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Wye=zn("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${D3}::after`]:{opacity:.6},[`${oN}:hover > & + ${D3}::after`]:{opacity:.6},[`${oN}:hover > & > svg`]:{opacity:1}}),XX=zn("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${oN}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),YX=zn("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${XX} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),KX=zn(YX,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),qye=zn("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Xye=zn("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),P3=zn("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Yye=zn("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${P3}`]:{pointerEvents:"auto"}}}}}),ZX=zn("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Kye=zn("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Zye=zn(dye,{fill:"$toolTipBackground"});function eF({children:i}){const{className:e}=P.useContext(QI);return fe.createElement(lpe,{className:e},i)}const Qye=["align"];function Jye(){const{id:i,disable:e,disabled:t}=Ql();return fe.createElement(fe.Fragment,null,fe.createElement(Xye,{id:i+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),fe.createElement("label",{htmlFor:i+"__disable"}))}function e0e(i){const{id:e,optional:t,hint:n}=Ql(),s=i.htmlFor||(e?{htmlFor:e}:null),r=!n&&typeof i.children=="string"?{title:i.children}:null;return fe.createElement(fe.Fragment,null,t&&fe.createElement(Jye,null),n!==void 0?fe.createElement(lye,null,fe.createElement(cye,{asChild:!0},fe.createElement(P3,Ra({},s,i))),fe.createElement(uye,{side:"top",sideOffset:2},fe.createElement(Kye,null,n,fe.createElement(Zye,null)))):fe.createElement(P3,Ra({},s,r,i)))}function Yf(i){let{align:e}=i,t=ir(i,Qye);const{value:n,label:s,key:r,disabled:a}=Ql(),{hideCopyButton:o}=Bye(),l=!o&&r!==void 0,[c,d]=P.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[r]:n??""})),d(!0)}catch{lm(aa.CLIPBOARD_ERROR,{[r]:n})}};return fe.createElement(qye,{align:e,onPointerLeave:()=>d(!1)},fe.createElement(e0e,t),l&&!a&&fe.createElement("div",{title:`Click to copy ${typeof s=="string"?s:r} value`},c?fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fe.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),fe.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):fe.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fe.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),fe.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const t0e=["toggled"],n0e=zn("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function tF(i){let{toggled:e}=i,t=ir(i,t0e);return fe.createElement(n0e,Ra({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),fe.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const i0e=["input"];function sf(i){let{input:e}=i,t=ir(i,i0e);return e?fe.createElement(KX,t):fe.createElement(YX,t)}function QX({value:i,type:e,settings:t,setValue:n}){const[s,r]=P.useState(I5(e,i,t)),a=P.useRef(i),o=P.useRef(t);o.current=t;const l=P.useCallback(d=>r(I5(e,d,o.current)),[e]),c=P.useCallback(d=>{try{n(d)}catch(h){const{type:m,previousValue:v}=h;if(m!=="LEVA_ERROR")throw h;l(v)}},[l,n]);return P.useEffect(()=>{SE(i,a.current)||l(i),a.current=i},[i,l]),{displayValue:s,onChange:r,onUpdate:c}}function fw(i,e){const{emitOnEditStart:t,emitOnEditEnd:n}=Ql();return Ome(s=>{s.first&&(document.body.classList.add("leva__panel__dragged"),t?.());const r=i(s);return s.last&&(document.body.classList.remove("leva__panel__dragged"),n?.()),r},e)}function s0e(i){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(!1);return P.useEffect(()=>{const s=BX(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,i(e.current,t.current)},250);return window.addEventListener("resize",s),n.current||(s(),n.current=!0),()=>window.removeEventListener("resize",s)},[i]),P.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function JX(){const i=P.useRef(null),e=P.useRef({x:0,y:0}),t=P.useCallback(n=>{Object.assign(e.current,n),i.current&&(i.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[i,t]}const r0e=["__refCount"],rO=(i,e)=>{if(!i[e])return null;const t=i[e];return ir(t,r0e)};function a0e(i){const e=dw(),[t,n]=P.useState(rO(e.getData(),i)),s=P.useCallback(c=>e.setValueAtPath(i,c,!0),[i,e]),r=P.useCallback(c=>e.setSettingsAtPath(i,c),[i,e]),a=P.useCallback(c=>e.disableInputAtPath(i,c),[i,e]),o=P.useCallback(()=>e.emitOnEditStart(i),[i,e]),l=P.useCallback(()=>e.emitOnEditEnd(i),[i,e]);return P.useEffect(()=>{n(rO(e.getData(),i));const c=e.useStore.subscribe(d=>rO(d.data,i),n,{equalityFn:i2});return()=>c()},[e,i]),[t,{set:s,setSettings:r,disable:a,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:l}]}const o0e=zn("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),eY=zn("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),O3=zn("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),tY=zn("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),nY=zn("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function l0e({value:i,min:e,max:t,onDrag:n,step:s,initialValue:r}){const a=P.useRef(null),o=P.useRef(null),l=P.useRef(0),c=vm("sizes","scrubberWidth"),d=fw(({event:m,first:v,xy:[_],movement:[x],memo:T})=>{if(v){const{width:w,left:M}=a.current.getBoundingClientRect();l.current=w-parseFloat(c),T=m?.target===o.current?i:aN((_-M)/w,e,t)}const b=T+aN(x/l.current,0,t-e);return n(VX(b,{step:s,initialValue:r})),T}),h=rN(i,e,t);return fe.createElement(tY,Ra({ref:a},d()),fe.createElement(eY,null,fe.createElement(nY,{style:{left:0,right:`${(1-h)*100}%`}})),fe.createElement(O3,{ref:o,style:{left:`calc(${h} * (100% - ${c}))`}}))}const c0e=fe.memo(({label:i,onUpdate:e,step:t,innerLabelTrim:n})=>{const[s,r]=P.useState(!1),a=fw(({active:o,delta:[l],event:c,memo:d=0,first:h,last:m,target:v})=>(h&&v.requestPointerLock(),m&&document.exitPointerLock(),r(o),d+=l/2,Math.abs(d)>=1&&(e(_=>parseFloat(_)+Math.floor(d)*t*IX(c)),d=0),d));return fe.createElement(kye,Ra({dragging:s,title:i.length>1?i:""},a()),i.slice(0,n))});function iY({label:i,id:e,displayValue:t,onUpdate:n,onChange:s,settings:r,innerLabelTrim:a=1}){const o=a>0&&fe.createElement(c0e,{label:i,step:r.step,onUpdate:n,innerLabelTrim:a});return fe.createElement($ye,{id:e,value:String(t),onUpdate:n,onChange:s,innerLabel:o})}function u0e(){const i=Ql(),{label:e,value:t,onUpdate:n,settings:s,id:r}=i,{min:a,max:o}=s,l=o!==1/0&&a!==-1/0;return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,e),fe.createElement(o0e,{hasRange:l},l&&fe.createElement(l0e,Ra({value:parseFloat(t),onDrag:n},s)),fe.createElement(iY,Ra({},i,{id:r,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:d0e}=kX,f0e=ir(kX,["sanitizeStep"]);var h0e=Zn({component:u0e},f0e);const p0e=(i,e)=>ou().schema({options:ou().passesAnyOf(ou().object(),ou().array())}).test(e),m0e=(i,{values:e})=>{if(e.indexOf(i)<0)throw Error("Selected value doesn't match Select options");return i},g0e=(i,{values:e})=>e.indexOf(i),y0e=i=>{let{value:e,options:t}=i,n,s;return Array.isArray(t)?(s=t,n=t.map(r=>String(r))):(s=Object.values(t),n=Object.keys(t)),"value"in i?s.includes(e)||(n.unshift(String(e)),s.unshift(e)):e=s[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:s}}};var v0e=Object.freeze({__proto__:null,schema:p0e,sanitize:m0e,format:g0e,normalize:y0e});const _0e=zn("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),L3=zn("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),x0e=zn("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${L3}:focus + &`]:{$focusStyle:""},[`${L3}:hover + &`]:{$hoverStyle:""}});function b0e({displayValue:i,value:e,onUpdate:t,id:n,settings:s,disabled:r}){const{keys:a,values:o}=s,l=P.useRef();return e===o[i]&&(l.current=a[i]),fe.createElement(_0e,null,fe.createElement(L3,{id:n,value:i,onChange:c=>t(o[Number(c.currentTarget.value)]),disabled:r},a.map((c,d)=>fe.createElement("option",{key:c,value:d},c))),fe.createElement(x0e,null,l.current),fe.createElement(tF,{toggled:!0}))}function S0e(){const{label:i,value:e,displayValue:t,onUpdate:n,id:s,disabled:r,settings:a}=Ql();return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(b0e,{id:s,value:e,displayValue:t,onUpdate:n,settings:a,disabled:r}))}var T0e=Zn({component:S0e},v0e);const E0e=i=>ou().string().test(i),w0e=i=>{if(typeof i!="string")throw Error("Invalid string");return i},M0e=({value:i,editable:e=!0,rows:t=!1})=>({value:i,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var A0e=Object.freeze({__proto__:null,schema:E0e,sanitize:w0e,normalize:M0e});const C0e=["displayValue","onUpdate","onChange","editable"],R0e=zn("div",{whiteSpace:"pre-wrap"});function N0e(i){let{displayValue:e,onUpdate:t,onChange:n,editable:s=!0}=i,r=ir(i,C0e);return s?fe.createElement(JI,Ra({value:e,onUpdate:t,onChange:n},r)):fe.createElement(R0e,null,e)}function D0e(){const{label:i,settings:e,displayValue:t,onUpdate:n,onChange:s}=Ql();return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(N0e,Ra({displayValue:t,onUpdate:n,onChange:s},e)))}var P0e=Zn({component:D0e},A0e);const O0e=i=>ou().boolean().test(i),L0e=i=>{if(typeof i!="boolean")throw Error("Invalid boolean");return i};var U0e=Object.freeze({__proto__:null,schema:O0e,sanitize:L0e});const B0e=zn("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function I0e({value:i,onUpdate:e,id:t,disabled:n}){return fe.createElement(B0e,null,fe.createElement("input",{id:t,type:"checkbox",checked:i,onChange:s=>e(s.currentTarget.checked),disabled:n}),fe.createElement("label",{htmlFor:t},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function F0e(){const{label:i,value:e,onUpdate:t,disabled:n,id:s}=Ql();return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(I0e,{value:e,onUpdate:t,id:s,disabled:n}))}var z0e=Zn({component:F0e},U0e);const V0e=["locked"];function k0e({value:i,id:e,valueKey:t,settings:n,onUpdate:s,innerLabelTrim:r}){const a=P.useRef(i[t]);a.current=i[t];const o=P.useCallback(c=>s({[t]:UX({type:"NUMBER",value:a.current,settings:n},c)}),[s,n,t]),l=QX({type:"NUMBER",value:i[t],settings:n,setValue:o});return fe.createElement(iY,{id:e,label:t,value:i[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:n,innerLabelTrim:r})}const G0e=zn("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function H0e(i){let{locked:e}=i,t=ir(i,V0e);return fe.createElement("svg",Ra({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?fe.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):fe.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function nF({value:i,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:s,setSettings:r}=Ql(),{lock:a,locked:o}=t;return fe.createElement(G0e,{withLock:a},a&&fe.createElement(H0e,{locked:o,onClick:()=>r({locked:!o})}),Object.keys(i).map((l,c)=>fe.createElement(k0e,{id:c===0?s:`${s}.${l}`,key:l,valueKey:l,value:i,settings:t[l],onUpdate:e,innerLabelTrim:n})))}const sY=(i,e)=>{const t={};let n=0,s=1/0;Object.entries(i).forEach(([r,a])=>{t[r]=zX(Zn({value:a},e[r])).settings,n=Math.max(n,t[r].step),s=Math.min(s,t[r].pad)});for(let r in t){const{step:a,min:o,max:l}=e[r]||{};!isFinite(a)&&(!isFinite(o)||!isFinite(l))&&(t[r].step=n,t[r].pad=s)}return t},j0e=["lock"],$0e=["value"];function W0e(i){const e=ou().array().length(i).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const s=Object.values(n);return s.length===i&&s.every(r=>isFinite(r))};return n=>e.test(n)||t(n)}function q0e(i){return Array.isArray(i)?"array":"object"}function G1(i,e,t){return q0e(i)===e?i:e==="array"?Object.values(i):wye(i,t)}const X0e=(i,e,t)=>{const n=G1(i,"object",e.keys);for(let a in n)n[a]=FX(n[a],e[a]);const s=Object.keys(n);let r={};if(s.length===e.keys.length)r=n;else{const a=G1(t,"object",e.keys);if(s.length===1&&e.locked){const o=s[0],l=n[o],c=a[o],d=c!==0?l/c:1;for(let h in a)h===o?r[o]=l:r[h]=a[h]*d}else r=Zn(Zn({},a),n)}return G1(r,e.format,e.keys)},Y0e=(i,e)=>G1(i,"object",e.keys),K0e=i=>!!i&&("step"in i||"min"in i||"max"in i);function Z0e(i,e,t=[]){const{lock:n=!1}=e,s=ir(e,j0e),r=Array.isArray(i)?"array":"object",a=r==="object"?Object.keys(i):t,o=G1(i,"object",a),l=K0e(s)?a.reduce((d,h)=>Object.assign(d,{[h]:s}),{}):s,c=sY(o,l);return{value:r==="array"?i:o,settings:Zn(Zn({},c),{},{format:r,keys:a,lock:n,locked:!1})}}function rY(i){return{schema:W0e(i.length),normalize:e=>{let{value:t}=e,n=ir(e,$0e);return Z0e(t,n,i)},format:(e,t)=>Y0e(e,t),sanitize:(e,t,n)=>X0e(e,t,n)}}var Q0e={grad:.9,turn:360,rad:360/(2*Math.PI)},Wp=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Vo=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},Hd=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},aY=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},q5=function(i){return{r:Hd(i.r,0,255),g:Hd(i.g,0,255),b:Hd(i.b,0,255),a:Hd(i.a)}},aO=function(i){return{r:Vo(i.r),g:Vo(i.g),b:Vo(i.b),a:Vo(i.a,3)}},J0e=/^#([0-9a-f]{3,8})$/i,HA=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},oY=function(i){var e=i.r,t=i.g,n=i.b,s=i.a,r=Math.max(e,t,n),a=r-Math.min(e,t,n),o=a?r===e?(t-n)/a:r===t?2+(n-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:r?a/r*100:0,v:r/255*100,a:s}},lY=function(i){var e=i.h,t=i.s,n=i.v,s=i.a;e=e/360*6,t/=100,n/=100;var r=Math.floor(e),a=n*(1-t),o=n*(1-(e-r)*t),l=n*(1-(1-e+r)*t),c=r%6;return{r:255*[n,o,a,a,l,n][c],g:255*[l,n,n,o,a,a][c],b:255*[a,a,l,n,n,o][c],a:s}},X5=function(i){return{h:aY(i.h),s:Hd(i.s,0,100),l:Hd(i.l,0,100),a:Hd(i.a)}},Y5=function(i){return{h:Vo(i.h),s:Vo(i.s),l:Vo(i.l),a:Vo(i.a,3)}},K5=function(i){return lY((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},H1=function(i){return{h:(e=oY(i)).h,s:(s=(200-(t=e.s))*(n=e.v)/100)>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,n,s},eve=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tve=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nve=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ive=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,U3={string:[[function(i){var e=J0e.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Vo(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Vo(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=nve.exec(i)||ive.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:q5({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=eve.exec(i)||tve.exec(i);if(!e)return null;var t,n,s=X5({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(Q0e[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return K5(s)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,s=i.a,r=s===void 0?1:s;return Wp(e)&&Wp(t)&&Wp(n)?q5({r:Number(e),g:Number(t),b:Number(n),a:Number(r)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,s=i.a,r=s===void 0?1:s;if(!Wp(e)||!Wp(t)||!Wp(n))return null;var a=X5({h:Number(e),s:Number(t),l:Number(n),a:Number(r)});return K5(a)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,s=i.a,r=s===void 0?1:s;if(!Wp(e)||!Wp(t)||!Wp(n))return null;var a=(function(o){return{h:aY(o.h),s:Hd(o.s,0,100),v:Hd(o.v,0,100),a:Hd(o.a)}})({h:Number(e),s:Number(t),v:Number(n),a:Number(r)});return lY(a)},"hsv"]]},Z5=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},cY=function(i){return typeof i=="string"?Z5(i.trim(),U3.string):typeof i=="object"&&i!==null?Z5(i,U3.object):[null,void 0]},sve=function(i){return cY(i)[1]},oO=function(i,e){var t=H1(i);return{h:t.h,s:Hd(t.s+100*e,0,100),l:t.l,a:t.a}},lO=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Q5=function(i,e){var t=H1(i);return{h:t.h,s:t.s,l:Hd(t.l+100*e,0,100),a:t.a}},B3=(function(){function i(e){this.parsed=cY(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Vo(lO(this.rgba),2)},i.prototype.isDark=function(){return lO(this.rgba)<.5},i.prototype.isLight=function(){return lO(this.rgba)>=.5},i.prototype.toHex=function(){return e=aO(this.rgba),t=e.r,n=e.g,s=e.b,a=(r=e.a)<1?HA(Vo(255*r)):"","#"+HA(t)+HA(n)+HA(s)+a;var e,t,n,s,r,a},i.prototype.toRgb=function(){return aO(this.rgba)},i.prototype.toRgbString=function(){return e=aO(this.rgba),t=e.r,n=e.g,s=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+s+", "+r+")":"rgb("+t+", "+n+", "+s+")";var e,t,n,s,r},i.prototype.toHsl=function(){return Y5(H1(this.rgba))},i.prototype.toHslString=function(){return e=Y5(H1(this.rgba)),t=e.h,n=e.s,s=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+s+"%, "+r+")":"hsl("+t+", "+n+"%, "+s+"%)";var e,t,n,s,r},i.prototype.toHsv=function(){return e=oY(this.rgba),{h:Vo(e.h),s:Vo(e.s),v:Vo(e.v),a:Vo(e.a,3)};var e},i.prototype.invert=function(){return xc({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),xc(oO(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),xc(oO(this.rgba,-e))},i.prototype.grayscale=function(){return xc(oO(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),xc(Q5(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),xc(Q5(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?xc({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Vo(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=H1(this.rgba);return typeof e=="number"?xc({h:e,s:t.s,l:t.l,a:t.a}):Vo(t.h)},i.prototype.isEqual=function(e){return this.toHex()===xc(e).toHex()},i})(),xc=function(i){return i instanceof B3?i:new B3(i)},J5=[],rve=function(i){i.forEach(function(e){J5.indexOf(e)<0&&(e(B3,U3),J5.push(e))})};function ave(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in t)n[t[s]]=s;var r={};i.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,c=n[this.toHex()];if(c)return c;if(a?.closest){var d=this.toRgb(),h=1/0,m="black";if(!r.length)for(var v in t)r[v]=new i(t[v]).toRgb();for(var _ in t){var x=(o=d,l=r[_],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));x<h&&(h=x,m=_)}return m}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":t[o];return l?new i(l).toRgb():null},"name"])}function xS(){return(xS=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}).apply(this,arguments)}function iF(i,e){if(i==null)return{};var t,n,s={},r=Object.keys(i);for(n=0;n<r.length;n++)e.indexOf(t=r[n])>=0||(s[t]=i[t]);return s}function I3(i){var e=P.useRef(i),t=P.useRef(function(n){e.current&&e.current(n)});return e.current=i,t.current}var Hb=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i<e?e:i},j1=function(i){return"touches"in i},F3=function(i){return i&&i.ownerDocument.defaultView||self},eH=function(i,e,t){var n=i.getBoundingClientRect(),s=j1(e)?(function(r,a){for(var o=0;o<r.length;o++)if(r[o].identifier===a)return r[o];return r[0]})(e.touches,t):e;return{left:Hb((s.pageX-(n.left+F3(i).pageXOffset))/n.width),top:Hb((s.pageY-(n.top+F3(i).pageYOffset))/n.height)}},tH=function(i){!j1(i)&&i.preventDefault()},sF=fe.memo(function(i){var e=i.onMove,t=i.onKey,n=iF(i,["onMove","onKey"]),s=P.useRef(null),r=I3(e),a=I3(t),o=P.useRef(null),l=P.useRef(!1),c=P.useMemo(function(){var v=function(T){tH(T),(j1(T)?T.touches.length>0:T.buttons>0)&&s.current?r(eH(s.current,T,o.current)):x(!1)},_=function(){return x(!1)};function x(T){var b=l.current,w=F3(s.current),M=T?w.addEventListener:w.removeEventListener;M(b?"touchmove":"mousemove",v),M(b?"touchend":"mouseup",_)}return[function(T){var b=T.nativeEvent,w=s.current;if(w&&(tH(b),!(function(R,N){return N&&!j1(R)})(b,l.current)&&w)){if(j1(b)){l.current=!0;var M=b.changedTouches||[];M.length&&(o.current=M[0].identifier)}w.focus(),r(eH(w,b,o.current)),x(!0)}},function(T){var b=T.which||T.keyCode;b<37||b>40||(T.preventDefault(),a({left:b===39?.05:b===37?-.05:0,top:b===40?.05:b===38?-.05:0}))},x]},[a,r]),d=c[0],h=c[1],m=c[2];return P.useEffect(function(){return m},[m]),fe.createElement("div",xS({},n,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:s,onKeyDown:h,tabIndex:0,role:"slider"}))}),hw=function(i){return i.filter(Boolean).join(" ")},rF=function(i){var e=i.color,t=i.left,n=i.top,s=n===void 0?.5:n,r=hw(["react-colorful__pointer",i.className]);return fe.createElement("div",{className:r,style:{top:100*s+"%",left:100*t+"%"}},fe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Mc=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t},uY=function(i){var e=i.s,t=i.v,n=i.a,s=(200-e)*t/100;return{h:Mc(i.h),s:Mc(s>0&&s<200?e*t/100/(s<=100?s:200-s)*100:0),l:Mc(s/2),a:Mc(n,2)}},z3=function(i){var e=uY(i);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},cO=function(i){var e=uY(i);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},dY=function(i){var e=i.h,t=i.s,n=i.v,s=i.a;e=e/360*6,t/=100,n/=100;var r=Math.floor(e),a=n*(1-t),o=n*(1-(e-r)*t),l=n*(1-(1-e+r)*t),c=r%6;return{r:Mc(255*[n,o,a,a,l,n][c]),g:Mc(255*[l,n,n,o,a,a][c]),b:Mc(255*[a,a,l,n,n,o][c]),a:Mc(s,2)}},fY=function(i){var e=i.r,t=i.g,n=i.b,s=i.a,r=Math.max(e,t,n),a=r-Math.min(e,t,n),o=a?r===e?(t-n)/a:r===t?2+(n-e)/a:4+(e-t)/a:0;return{h:Mc(60*(o<0?o+6:o)),s:Mc(r?a/r*100:0),v:Mc(r/255*100),a:s}},hY=fe.memo(function(i){var e=i.hue,t=i.onChange,n=hw(["react-colorful__hue",i.className]);return fe.createElement("div",{className:n},fe.createElement(sF,{onMove:function(s){t({h:360*s.left})},onKey:function(s){t({h:Hb(e+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":Mc(e),"aria-valuemax":"360","aria-valuemin":"0"},fe.createElement(rF,{className:"react-colorful__hue-pointer",left:e/360,color:z3({h:e,s:100,v:100,a:1})})))}),pY=fe.memo(function(i){var e=i.hsva,t=i.onChange,n={backgroundColor:z3({h:e.h,s:100,v:100,a:1})};return fe.createElement("div",{className:"react-colorful__saturation",style:n},fe.createElement(sF,{onMove:function(s){t({s:100*s.left,v:100-100*s.top})},onKey:function(s){t({s:Hb(e.s+100*s.left,0,100),v:Hb(e.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Mc(e.s)+"%, Brightness "+Mc(e.v)+"%"},fe.createElement(rF,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:z3(e)})))}),aF=function(i,e){if(i===e)return!0;for(var t in i)if(i[t]!==e[t])return!1;return!0};function mY(i,e,t){var n=I3(t),s=P.useState(function(){return i.toHsva(e)}),r=s[0],a=s[1],o=P.useRef({color:e,hsva:r});P.useEffect(function(){if(!i.equal(e,o.current.color)){var c=i.toHsva(e);o.current={hsva:c,color:e},a(c)}},[e,i]),P.useEffect(function(){var c;aF(r,o.current.hsva)||i.equal(c=i.fromHsva(r),o.current.color)||(o.current={hsva:r,color:c},n(c))},[r,i,n]);var l=P.useCallback(function(c){a(function(d){return Object.assign({},d,c)})},[]);return[r,l]}var ove=typeof window<"u"?P.useLayoutEffect:P.useEffect,lve=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},nH=new Map,gY=function(i){ove(function(){var e=i.current?i.current.ownerDocument:document;if(e!==void 0&&!nH.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,nH.set(e,t);var n=lve();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},cve=function(i){var e=i.className,t=i.colorModel,n=i.color,s=n===void 0?t.defaultColor:n,r=i.onChange,a=iF(i,["className","colorModel","color","onChange"]),o=P.useRef(null);gY(o);var l=mY(t,s,r),c=l[0],d=l[1],h=hw(["react-colorful",e]);return fe.createElement("div",xS({},a,{ref:o,className:h}),fe.createElement(pY,{hsva:c,onChange:d}),fe.createElement(hY,{hue:c.h,onChange:d,className:"react-colorful__last-control"}))},uve=function(i){var e=i.className,t=i.hsva,n=i.onChange,s={backgroundImage:"linear-gradient(90deg, "+cO(Object.assign({},t,{a:0}))+", "+cO(Object.assign({},t,{a:1}))+")"},r=hw(["react-colorful__alpha",e]),a=Mc(100*t.a);return fe.createElement("div",{className:r},fe.createElement("div",{className:"react-colorful__alpha-gradient",style:s}),fe.createElement(sF,{onMove:function(o){n({a:o.left})},onKey:function(o){n({a:Hb(t.a+o.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},fe.createElement(rF,{className:"react-colorful__alpha-pointer",left:t.a,color:cO(t)})))},dve=function(i){var e=i.className,t=i.colorModel,n=i.color,s=n===void 0?t.defaultColor:n,r=i.onChange,a=iF(i,["className","colorModel","color","onChange"]),o=P.useRef(null);gY(o);var l=mY(t,s,r),c=l[0],d=l[1],h=hw(["react-colorful",e]);return fe.createElement("div",xS({},a,{ref:o,className:h}),fe.createElement(pY,{hsva:c,onChange:d}),fe.createElement(hY,{hue:c.h,onChange:d}),fe.createElement(uve,{hsva:c,onChange:d,className:"react-colorful__last-control"}))},fve={defaultColor:{r:0,g:0,b:0,a:1},toHsva:fY,fromHsva:dY,equal:aF},hve=function(i){return fe.createElement(dve,xS({},i,{colorModel:fve}))},pve={defaultColor:{r:0,g:0,b:0},toHsva:function(i){return fY({r:i.r,g:i.g,b:i.b,a:1})},fromHsva:function(i){return{r:(e=dY(i)).r,g:e.g,b:e.b};var e},equal:aF},mve=function(i){return fe.createElement(cve,xS({},i,{colorModel:pve}))},uO={exports:{}},dO,iH;function gve(){if(iH)return dO;iH=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return dO=i,dO}var fO,sH;function yve(){if(sH)return fO;sH=1;var i=gve();function e(){}function t(){}return t.resetWarningCache=e,fO=function(){function n(a,o,l,c,d,h){if(h!==i){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},fO}var rH;function vve(){return rH||(rH=1,uO.exports=yve()()),uO.exports}var _ve=vve();const _r=dp(_ve);var xve=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function pw(i,e){var t=bve(i);if(typeof t.path!="string"){var n=i.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:i.name,writable:!1,configurable:!1,enumerable:!0})}return t}function bve(i){var e=i.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!i.type){var n=e.split(".").pop().toLowerCase(),s=xve.get(n);s&&Object.defineProperty(i,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return i}var Sve=[".DS_Store","Thumbs.db"];function Tve(i){return pS(this,void 0,void 0,function(){return mS(this,function(e){return lN(i)&&Eve(i)?[2,Cve(i.dataTransfer,i.type)]:wve(i)?[2,Mve(i)]:Array.isArray(i)&&i.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Ave(i)]:[2,[]]})})}function Eve(i){return lN(i.dataTransfer)}function wve(i){return lN(i)&&lN(i.target)}function lN(i){return typeof i=="object"&&i!==null}function Mve(i){return V3(i.target.files).map(function(e){return pw(e)})}function Ave(i){return pS(this,void 0,void 0,function(){var e;return mS(this,function(t){switch(t.label){case 0:return[4,Promise.all(i.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return pw(n)})]}})})}function Cve(i,e){return pS(this,void 0,void 0,function(){var t,n;return mS(this,function(s){switch(s.label){case 0:return i===null?[2,[]]:i.items?(t=V3(i.items).filter(function(r){return r.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(Rve))]):[3,2];case 1:return n=s.sent(),[2,aH(yY(n))];case 2:return[2,aH(V3(i.files).map(function(r){return pw(r)}))]}})})}function aH(i){return i.filter(function(e){return Sve.indexOf(e.name)===-1})}function V3(i){if(i===null)return[];for(var e=[],t=0;t<i.length;t++){var n=i[t];e.push(n)}return e}function Rve(i){if(typeof i.webkitGetAsEntry!="function")return oH(i);var e=i.webkitGetAsEntry();return e&&e.isDirectory?vY(e):oH(i)}function yY(i){return i.reduce(function(e,t){return Oue(e,Array.isArray(t)?yY(t):[t])},[])}function oH(i){var e=i.getAsFile();if(!e)return Promise.reject(i+" is not a File");var t=pw(e);return Promise.resolve(t)}function Nve(i){return pS(this,void 0,void 0,function(){return mS(this,function(e){return[2,i.isDirectory?vY(i):Dve(i)]})})}function vY(i){var e=i.createReader();return new Promise(function(t,n){var s=[];function r(){var a=this;e.readEntries(function(o){return pS(a,void 0,void 0,function(){var l,c,d;return mS(this,function(h){switch(h.label){case 0:if(o.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return l=h.sent(),t(l),[3,4];case 3:return c=h.sent(),n(c),[3,4];case 4:return[3,6];case 5:d=Promise.all(o.map(Nve)),s.push(d),r(),h.label=6;case 6:return[2]}})})},function(o){n(o)})}r()})}function Dve(i){return pS(this,void 0,void 0,function(){return mS(this,function(e){return[2,new Promise(function(t,n){i.file(function(s){var r=pw(s,i.fullPath);t(r)},function(s){n(s)})})]})})}var jA={},lH;function Pve(){return lH||(lH=1,jA.__esModule=!0,jA.default=function(i,e){if(i&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var n=i.name||"",s=(i.type||"").toLowerCase(),r=s.replace(/\/.*$/,"");return t.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?r===o.replace(/\/.*$/,""):s===o})}return!0}),jA}var Ove=Pve();const Lve=dp(Ove);function cH(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function uH(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cH(Object(t),!0).forEach(function(n){_Y(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):cH(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function _Y(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function dH(i,e){return Fve(i)||Ive(i,e)||Bve(i,e)||Uve()}function Uve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(i,e){if(i){if(typeof i=="string")return fH(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fH(i,e)}}function fH(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Ive(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,a,o;try{for(t=t.call(i);!(s=(a=t.next()).done)&&(n.push(a.value),!(e&&n.length===e));s=!0);}catch(l){r=!0,o=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw o}}return n}}function Fve(i){if(Array.isArray(i))return i}var zve="file-invalid-type",Vve="file-too-large",kve="file-too-small",Gve="too-many-files",Hve=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:zve,message:"File type must be ".concat(t)}},hH=function(e){return{code:Vve,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},pH=function(e){return{code:kve,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},jve={code:Gve,message:"Too many files"};function xY(i,e){var t=i.type==="application/x-moz-file"||Lve(i,e);return[t,t?null:Hve(e)]}function bY(i,e,t){if(jT(i.size))if(jT(e)&&jT(t)){if(i.size>t)return[!1,hH(t)];if(i.size<e)return[!1,pH(e)]}else{if(jT(e)&&i.size<e)return[!1,pH(e)];if(jT(t)&&i.size>t)return[!1,hH(t)]}return[!0,null]}function jT(i){return i!=null}function $ve(i){var e=i.files,t=i.accept,n=i.minSize,s=i.maxSize,r=i.multiple,a=i.maxFiles;return!r&&e.length>1||r&&a>=1&&e.length>a?!1:e.every(function(o){var l=xY(o,t),c=dH(l,1),d=c[0],h=bY(o,n,s),m=dH(h,1),v=m[0];return d&&v})}function cN(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function $A(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function mH(i){i.preventDefault()}function Wve(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function qve(i){return i.indexOf("Edge/")!==-1}function Xve(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Wve(i)||qve(i)}function Ah(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return e.some(function(o){return!cN(n)&&o&&o.apply(void 0,[n].concat(r)),cN(n)})}}function Yve(){return"showOpenFilePicker"in window}function Kve(i){return i=typeof i=="string"?i.split(","):i,[{description:"everything",accept:Array.isArray(i)?i.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return uH(uH({},e),{},_Y({},t,[]))},{}):{}}]}function Zve(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function Qve(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}var Jve=["children"],e_e=["open"],t_e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],n_e=["refKey","onChange","onClick"];function i_e(i){return a_e(i)||r_e(i)||SY(i)||s_e()}function s_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function a_e(i){if(Array.isArray(i))return k3(i)}function hO(i,e){return c_e(i)||l_e(i,e)||SY(i,e)||o_e()}function o_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SY(i,e){if(i){if(typeof i=="string")return k3(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k3(i,e)}}function k3(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function l_e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,a,o;try{for(t=t.call(i);!(s=(a=t.next()).done)&&(n.push(a.value),!(e&&n.length===e));s=!0);}catch(l){r=!0,o=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw o}}return n}}function c_e(i){if(Array.isArray(i))return i}function gH(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function ra(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(t),!0).forEach(function(n){G3(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):gH(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function G3(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function uN(i,e){if(i==null)return{};var t=u_e(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function u_e(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}var oF=P.forwardRef(function(i,e){var t=i.children,n=uN(i,Jve),s=EY(n),r=s.open,a=uN(s,e_e);return P.useImperativeHandle(e,function(){return{open:r}},[r]),fe.createElement(P.Fragment,null,t(ra(ra({},a),{},{open:r})))});oF.displayName="Dropzone";var TY={disabled:!1,getFilesFromEvent:Tve,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};oF.defaultProps=TY;oF.propTypes={children:_r.func,accept:_r.oneOfType([_r.string,_r.arrayOf(_r.string)]),multiple:_r.bool,preventDropOnDocument:_r.bool,noClick:_r.bool,noKeyboard:_r.bool,noDrag:_r.bool,noDragEventsBubbling:_r.bool,minSize:_r.number,maxSize:_r.number,maxFiles:_r.number,disabled:_r.bool,getFilesFromEvent:_r.func,onFileDialogCancel:_r.func,onFileDialogOpen:_r.func,useFsAccessApi:_r.bool,onDragEnter:_r.func,onDragLeave:_r.func,onDragOver:_r.func,onDrop:_r.func,onDropAccepted:_r.func,onDropRejected:_r.func,validator:_r.func};var H3={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function EY(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ra(ra({},TY),i),t=e.accept,n=e.disabled,s=e.getFilesFromEvent,r=e.maxSize,a=e.minSize,o=e.multiple,l=e.maxFiles,c=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,m=e.onDrop,v=e.onDropAccepted,_=e.onDropRejected,x=e.onFileDialogCancel,T=e.onFileDialogOpen,b=e.useFsAccessApi,w=e.preventDropOnDocument,M=e.noClick,R=e.noKeyboard,N=e.noDrag,D=e.noDragEventsBubbling,L=e.validator,F=P.useMemo(function(){return typeof T=="function"?T:yH},[T]),I=P.useMemo(function(){return typeof x=="function"?x:yH},[x]),z=P.useRef(null),H=P.useRef(null),Y=P.useReducer(d_e,H3),Z=hO(Y,2),se=Z[0],oe=Z[1],G=se.isFocused,K=se.isFileDialogActive,$=se.draggedFiles,ce=P.useRef(typeof window<"u"&&window.isSecureContext&&b&&Yve()),q=function(){!ce.current&&K&&setTimeout(function(){if(H.current){var W=H.current.files;W.length||(oe({type:"closeDialog"}),I())}},300)};P.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[H,K,I,ce]);var ue=P.useRef([]),Ae=function(W){z.current&&z.current.contains(W.target)||(W.preventDefault(),ue.current=[])};P.useEffect(function(){return w&&(document.addEventListener("dragover",mH,!1),document.addEventListener("drop",Ae,!1)),function(){w&&(document.removeEventListener("dragover",mH),document.removeEventListener("drop",Ae))}},[z,w]);var Ne=P.useCallback(function(X){X.preventDefault(),X.persist(),Xe(X),ue.current=[].concat(i_e(ue.current),[X.target]),$A(X)&&Promise.resolve(s(X)).then(function(W){cN(X)&&!D||(oe({draggedFiles:W,isDragActive:!0,type:"setDraggedFiles"}),c&&c(X))})},[s,c,D]),we=P.useCallback(function(X){X.preventDefault(),X.persist(),Xe(X);var W=$A(X);if(W&&X.dataTransfer)try{X.dataTransfer.dropEffect="copy"}catch{}return W&&h&&h(X),!1},[h,D]),pt=P.useCallback(function(X){X.preventDefault(),X.persist(),Xe(X);var W=ue.current.filter(function(Fe){return z.current&&z.current.contains(Fe)}),Se=W.indexOf(X.target);Se!==-1&&W.splice(Se,1),ue.current=W,!(W.length>0)&&(oe({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),$A(X)&&d&&d(X))},[z,d,D]),Ee=P.useCallback(function(X,W){var Se=[],Fe=[];X.forEach(function(tt){var et=xY(tt,t),Lt=hO(et,2),wt=Lt[0],It=Lt[1],Zt=bY(tt,a,r),yt=hO(Zt,2),Rt=yt[0],Xt=yt[1],Qt=L?L(tt):null;if(wt&&Rt&&!Qt)Se.push(tt);else{var Ct=[It,Xt];Qt&&(Ct=Ct.concat(Qt)),Fe.push({file:tt,errors:Ct.filter(function(An){return An})})}}),(!o&&Se.length>1||o&&l>=1&&Se.length>l)&&(Se.forEach(function(tt){Fe.push({file:tt,errors:[jve]})}),Se.splice(0)),oe({acceptedFiles:Se,fileRejections:Fe,type:"setFiles"}),m&&m(Se,Fe,W),Fe.length>0&&_&&_(Fe,W),Se.length>0&&v&&v(Se,W)},[oe,o,t,a,r,l,m,v,_,L]),Ue=P.useCallback(function(X){X.preventDefault(),X.persist(),Xe(X),ue.current=[],$A(X)&&Promise.resolve(s(X)).then(function(W){cN(X)&&!D||Ee(W,X)}),oe({type:"reset"})},[s,Ee,D]),Ve=P.useCallback(function(){if(ce.current){oe({type:"openDialog"}),F();var X={multiple:o,types:Kve(t)};window.showOpenFilePicker(X).then(function(W){return s(W)}).then(function(W){Ee(W,null),oe({type:"closeDialog"})}).catch(function(W){Zve(W)?(I(W),oe({type:"closeDialog"})):Qve(W)&&(ce.current=!1,H.current&&(H.current.value=null,H.current.click()))});return}H.current&&(oe({type:"openDialog"}),F(),H.current.value=null,H.current.click())},[oe,F,I,b,Ee,t,o]),Be=P.useCallback(function(X){!z.current||!z.current.isEqualNode(X.target)||(X.key===" "||X.key==="Enter"||X.keyCode===32||X.keyCode===13)&&(X.preventDefault(),Ve())},[z,Ve]),Mt=P.useCallback(function(){oe({type:"focus"})},[]),ct=P.useCallback(function(){oe({type:"blur"})},[]),Et=P.useCallback(function(){M||(Xve()?setTimeout(Ve,0):Ve())},[M,Ve]),le=function(W){return n?null:W},$e=function(W){return R?null:le(W)},Ze=function(W){return N?null:le(W)},Xe=function(W){D&&W.stopPropagation()},We=P.useMemo(function(){return function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=X.refKey,Se=W===void 0?"ref":W,Fe=X.role,tt=X.onKeyDown,et=X.onFocus,Lt=X.onBlur,wt=X.onClick,It=X.onDragEnter,Zt=X.onDragOver,yt=X.onDragLeave,Rt=X.onDrop,Xt=uN(X,t_e);return ra(ra(G3({onKeyDown:$e(Ah(tt,Be)),onFocus:$e(Ah(et,Mt)),onBlur:$e(Ah(Lt,ct)),onClick:le(Ah(wt,Et)),onDragEnter:Ze(Ah(It,Ne)),onDragOver:Ze(Ah(Zt,we)),onDragLeave:Ze(Ah(yt,pt)),onDrop:Ze(Ah(Rt,Ue)),role:typeof Fe=="string"&&Fe!==""?Fe:"button"},Se,z),!n&&!R?{tabIndex:0}:{}),Xt)}},[z,Be,Mt,ct,Et,Ne,we,pt,Ue,R,N,n]),_t=P.useCallback(function(X){X.stopPropagation()},[]),ut=P.useMemo(function(){return function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=X.refKey,Se=W===void 0?"ref":W,Fe=X.onChange,tt=X.onClick,et=uN(X,n_e),Lt=G3({accept:t,multiple:o,type:"file",style:{display:"none"},onChange:le(Ah(Fe,Ue)),onClick:le(Ah(tt,_t)),tabIndex:-1},Se,H);return ra(ra({},Lt),et)}},[H,t,o,Ue,n]),ht=$.length,Bt=ht>0&&$ve({files:$,accept:t,minSize:a,maxSize:r,multiple:o,maxFiles:l}),kt=ht>0&&!Bt;return ra(ra({},se),{},{isDragAccept:Bt,isDragReject:kt,isFocused:G&&!n,getRootProps:We,getInputProps:ut,rootRef:z,inputRef:H,open:le(Ve)})}function d_e(i,e){switch(e.type){case"focus":return ra(ra({},i),{},{isFocused:!0});case"blur":return ra(ra({},i),{},{isFocused:!1});case"openDialog":return ra(ra({},H3),{},{isFileDialogActive:!0});case"closeDialog":return ra(ra({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return ra(ra({},i),{},{draggedFiles:n,isDragActive:t});case"setFiles":return ra(ra({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return ra({},H3);default:return i}}function yH(){}function f_e(i){let e;const t=new Set,n=(c,d)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const m=e;e=d?h:Object.assign({},e,h),t.forEach(v=>v(e,m))}},s=()=>e,r=(c,d=s,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=d(e);function v(){const _=d(e);if(!h(m,_)){const x=m;c(m=_,x)}}return t.add(v),()=>t.delete(v)},l={setState:n,getState:s,subscribe:(c,d,h)=>d||h?r(c,d,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=i(n,s,l),l}const h_e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),vH=h_e?P.useEffect:P.useLayoutEffect;function p_e(i){const e=typeof i=="function"?f_e(i):i,t=(n=e.getState,s=Object.is)=>{const[,r]=P.useReducer(T=>T+1,0),a=e.getState(),o=P.useRef(a),l=P.useRef(n),c=P.useRef(s),d=P.useRef(!1),h=P.useRef();h.current===void 0&&(h.current=n(a));let m,v=!1;(o.current!==a||l.current!==n||c.current!==s||d.current)&&(m=n(a),v=!s(h.current,m)),vH(()=>{v&&(h.current=m),o.current=a,l.current=n,c.current=s,d.current=!1});const _=P.useRef(a);vH(()=>{const T=()=>{try{const w=e.getState(),M=l.current(w);c.current(h.current,M)||(o.current=w,h.current=M,r())}catch{d.current=!0,r()}},b=e.subscribe(T);return e.getState()!==_.current&&T(),b},[]);const x=v?m:h.current;return P.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const s=n.length<=0;return{value:n.shift(),done:s}}}},t}const m_e=i=>(e,t,n)=>{const s=n.subscribe;return n.subscribe=(a,o,l)=>{let c=a;if(o){const d=l?.equalityFn||Object.is;let h=a(n.getState());c=m=>{const v=a(m);if(!d(h,v)){const _=h;o(h=v,_)}},l?.fireImmediately&&o(h,h)}return s(c)},i(e,t,n)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var pO,_H;function g_e(){return _H||(_H=1,pO=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),pO}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var mO,xH;function wY(){if(xH)return mO;xH=1;var i=g_e();function e(t){return i(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return mO=function(n){var s,r;return!(e(n)===!1||(s=n.constructor,typeof s!="function")||(r=s.prototype,e(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)},mO}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var gO,bH;function lF(){if(bH)return gO;bH=1;var i=wY();return gO=function(t){return i(t)||typeof t=="function"||Array.isArray(t)},gO}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var yO,SH;function y_e(){return SH||(SH=1,yO=function(e,t,n){for(var s in e)if(t.call(n,e[s],s,e)===!1)break}),yO}var vO,TH;function v_e(){if(TH)return vO;TH=1;var i=lF(),e=y_e();function t(a,o){for(var l=arguments.length,c=0;++c<l;){var d=arguments[c];s(d)&&e(d,n,a)}return a}function n(a,o){if(r(o)){var l=this[o];s(a)&&s(l)?t(l,a):this[o]=a}}function s(a){return i(a)&&!Array.isArray(a)}function r(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return vO=t,vO}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var _O,EH;function __e(){if(EH)return _O;EH=1,_O=function(t,n,s,r,a){if(!i(t)||!n)return t;if(n=e(n),s&&(n+="."+e(s)),r&&(n+="."+e(r)),a&&(n+="."+e(a)),n in t)return t[n];for(var o=n.split("."),l=o.length,c=-1;t&&++c<l;){for(var d=o[c];d[d.length-1]==="\\";)d=d.slice(0,-1)+"."+o[++c];t=t[d]}return t};function i(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return _O}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var xO,wH;function x_e(){return wH||(wH=1,xO=function(i,e){if(i===null||typeof i>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return i;for(var t=Object.prototype.propertyIsEnumerable,n=Object(i),s=arguments.length,r=0;++r<s;)for(var a=Object(arguments[r]),o=Object.getOwnPropertySymbols(a),l=0;l<o.length;l++){var c=o[l];t.call(a,c)&&(n[c]=a[c])}return n}),xO}var bO,MH;function b_e(){if(MH)return bO;MH=1;var i=lF(),e=x_e();bO=Object.assign||function(o){if(o===null||typeof o>"u")throw new TypeError("Cannot convert undefined or null to object");r(o)||(o={});for(var l=1;l<arguments.length;l++){var c=arguments[l];n(c)&&(c=s(c)),r(c)&&(t(o,c),e(o,c))}return o};function t(o,l){for(var c in l)a(l,c)&&(o[c]=l[c])}function n(o){return o&&typeof o=="string"}function s(o){var l={};for(var c in o)l[c]=o[c];return l}function r(o){return o&&typeof o=="object"||i(o)}function a(o,l){return Object.prototype.hasOwnProperty.call(o,l)}return bO}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var SO,AH;function S_e(){if(AH)return SO;AH=1;var i=b_e();SO=function(s,r,a){if(typeof s!="string")throw new TypeError("expected a string");typeof r=="function"&&(a=r,r=null),typeof r=="string"&&(r={sep:r});var o=i({sep:"."},r),l=o.quotes||['"',"'","`"],c;o.brackets===!0?c={"<":">","(":")","[":"]","{":"}"}:o.brackets&&(c=o.brackets);var d=[],h=[],m=[""],v=o.sep,_=s.length,x=-1,T;function b(){if(c&&h.length)return c[h[h.length-1]]}for(;++x<_;){var w=s[x],M=s[x+1],R={val:w,idx:x,arr:m,str:s};if(d.push(R),w==="\\"){R.val=n(o,s,x)===!0?w+M:M,R.escaped=!0,typeof a=="function"&&a(R),m[m.length-1]+=R.val,x++;continue}if(c&&c[w]){h.push(w);var N=b(),D=x+1;if(s.indexOf(N,D+1)!==-1)for(;h.length&&D<_;){var L=s[++D];if(L==="\\"){L++;continue}if(l.indexOf(L)!==-1){D=e(s,L,D+1);continue}if(N=b(),h.length&&s.indexOf(N,D+1)===-1)break;if(c[L]){h.push(L);continue}N===L&&h.pop()}if(T=D,T===-1){m[m.length-1]+=w;continue}w=s.slice(x,T+1),R.val=w,R.idx=x=T}if(l.indexOf(w)!==-1){if(T=e(s,w,x+1),T===-1){m[m.length-1]+=w;continue}t(w,o)===!0?w=s.slice(x,T+1):w=s.slice(x+1,T),R.val=w,R.idx=x=T}if(typeof a=="function"&&(a(R,d),w=R.val,x=R.idx),R.val===v&&R.split!==!1){m.push("");continue}m[m.length-1]+=R.val}return m};function e(s,r,a,o){var l=s.indexOf(r,a);return s.charAt(l-1)==="\\"?e(s,r,l+1):l}function t(s,r){return r.keepDoubleQuotes===!0&&s==='"'||r.keepSingleQuotes===!0&&s==="'"?!0:r.keepQuotes}function n(s,r,a){return typeof s.keepEscaping=="function"?s.keepEscaping(r,a):s.keepEscaping===!0||r[a+1]==="\\"}return SO}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var TO,CH;function T_e(){return CH||(CH=1,TO=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),TO}var EO,RH;function E_e(){if(RH)return EO;RH=1;var i=T_e();EO=function(s){i(s)||(s={});for(var r=arguments.length,a=1;a<r;a++){var o=arguments[a];i(o)&&e(s,o)}return s};function e(n,s){for(var r in s)t(s,r)&&(n[r]=s[r])}function t(n,s){return Object.prototype.hasOwnProperty.call(n,s)}return EO}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var wO,NH;function w_e(){return NH||(NH=1,wO=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),wO}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var MO,DH;function M_e(){if(DH)return MO;DH=1;var i=S_e(),e=E_e(),t=wY(),n=w_e();MO=function(r,a,o){if(!n(r)||(Array.isArray(a)&&(a=[].concat.apply([],a).join(".")),typeof a!="string"))return r;for(var l=i(a,{sep:".",brackets:!0}).filter(s),c=l.length,d=-1,h=r;++d<c;){var m=l[d];if(d!==c-1){n(h[m])||(h[m]={}),h=h[m];continue}t(h[m])&&t(o)?h[m]=e({},h[m],o):h[m]=o}return r};function s(r){return r!=="__proto__"&&r!=="constructor"&&r!=="prototype"}return MO}var AO,PH;function A_e(){if(PH)return AO;PH=1;var i=lF(),e=v_e(),t=__e(),n=M_e();return AO=function(r,a,o){if(!i(r))throw new TypeError("expected an object");if(typeof a!="string"||o==null)return e.apply(null,arguments);if(typeof o=="string")return n(r,a,o),r;var l=t(r,a);return i(o)&&i(l)&&(o=e({},l,o)),n(r,a,o),r},AO}var C_e=A_e();const R_e=dp(C_e),cF=(...i)=>i.filter(Boolean).join(".");function N_e(i){const e=i.split(".");return[e.pop(),e.join(".")||void 0]}function D_e(i,e){return Object.entries(Tye(i,e)).reduce((t,[,{value:n,disabled:s,key:r}])=>(t[r]=s?void 0:n,t),{})}function P_e(i,e){const t=P.useRef();return SE(i,t.current)||(t.current=i),t.current}function MY(i,e){return P.useMemo(i,P_e(e))}function O_e(i){const e=P.useRef(null),t=P.useRef(null),n=P.useRef(!0);return P.useLayoutEffect(()=>{i||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),P.useEffect(()=>{if(n.current){n.current=!1;return}let s;const r=e.current,a=()=>{i&&(r.style.removeProperty("height"),r.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};r.addEventListener("transitionend",a,{once:!0});const{height:o}=t.current.getBoundingClientRect();return r.style.height=o+"px",i||(r.style.overflow="hidden",s=window.setTimeout(()=>r.style.height="0px",50)),()=>{r.removeEventListener("transitionend",a),clearTimeout(s)}},[i]),{wrapperRef:e,contentRef:t}}const L_e=i=>{const[e,t]=P.useState(i.getVisiblePaths());return P.useEffect(()=>{t(i.getVisiblePaths());const n=i.useStore.subscribe(i.getVisiblePaths,t,{equalityFn:i2});return()=>n()},[i]),e};function U_e(i,e,t){return i.useStore(s=>{const r=Zn(Zn({},t),s.data);return D_e(r,e)},i2)}function AY(i=3){const e=P.useRef(null),t=P.useRef(null),[n,s]=P.useState(!1),r=P.useCallback(()=>s(!0),[]),a=P.useCallback(()=>s(!1),[]);return P.useLayoutEffect(()=>{if(n){const{bottom:o,top:l,left:c}=e.current.getBoundingClientRect(),{height:d}=t.current.getBoundingClientRect(),h=o+d>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",h==="down"?t.current.style.top=o+i+"px":t.current.style.bottom=window.innerHeight-l+i+"px"}},[i,n]),{popinRef:e,wrapperRef:t,shown:n,show:r,hide:a}}rve([ave]);const B_e={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};ou.extend({color:()=>i=>xc(i).isValid()});const I_e=i=>ou().color().test(i);function CY(i,{format:e,hasAlpha:t,isString:n}){const s=B_e[e]+(n&&e!=="hex"?"String":""),r=i[s]();return typeof r=="object"&&!t?Eye(r,["a"]):r}const RY=(i,e)=>{const t=xc(i);if(!t.isValid())throw Error("Invalid color");return CY(t,e)},F_e=(i,e)=>CY(xc(i),Zn(Zn({},e),{},{isString:!0,format:"hex"})),z_e=({value:i})=>{const e=sve(i),t=e==="name"?"hex":e,n=typeof i=="object"?"a"in i:e==="hex"&&i.length===8||/^(rgba)|(hsla)|(hsva)/.test(i),s={format:t,hasAlpha:n,isString:typeof i=="string"};return{value:RY(i,s),settings:s}};var V_e=Object.freeze({__proto__:null,schema:I_e,sanitize:RY,format:F_e,normalize:z_e});const k_e=zn("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),G_e=zn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),H_e=zn("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function OH(i,e){return e!=="rgb"?xc(i).toRgb():i}function j_e({value:i,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:s,emitOnEditEnd:r}=Ql(),{format:a,hasAlpha:o}=t,{popinRef:l,wrapperRef:c,shown:d,show:h,hide:m}=AY(),v=P.useRef(0),[_,x]=P.useState(()=>OH(i,a)),T=o?hve:mve,b=()=>{x(OH(i,a)),h(),s()},w=()=>{m(),r(),window.clearTimeout(v.current)},M=()=>{v.current=window.setTimeout(w,500)};return P.useEffect(()=>()=>window.clearTimeout(v.current),[]),fe.createElement(fe.Fragment,null,fe.createElement(k_e,{ref:l,active:d,onClick:()=>b(),style:{color:e}}),d&&fe.createElement(eF,null,fe.createElement(ZX,{onPointerUp:w}),fe.createElement(H_e,{ref:c,onMouseEnter:()=>window.clearTimeout(v.current),onMouseLeave:R=>R.buttons===0&&M()},fe.createElement(T,{color:_,onChange:n}))))}function $_e(){const{value:i,displayValue:e,label:t,onChange:n,onUpdate:s,settings:r}=Ql();return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,t),fe.createElement(G_e,null,fe.createElement(j_e,{value:i,displayValue:e,onChange:n,onUpdate:s,settings:r}),fe.createElement(JI,{value:e,onChange:n,onUpdate:s})))}var W_e=Zn({component:$_e},V_e);function q_e(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Ql();return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(nF,{value:e,settings:n,onUpdate:t}))}var X_e=Zn({component:q_e},rY(["x","y","z"]));const Y_e=zn("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),K_e=zn("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Z_e({value:i,settings:e,onUpdate:t}){const n=P.useRef(),s=P.useRef(0),r=P.useRef(0),a=P.useRef(1),[o,l]=P.useState(!1),[c,d]=P.useState(!1),[h,m]=JX(),v=P.useRef(null),_=P.useRef(null);P.useLayoutEffect(()=>{if(o){const{top:Y,left:Z,width:se,height:oe}=v.current.getBoundingClientRect();_.current.style.left=Z+se/2+"px",_.current.style.top=Y+oe/2+"px"}},[o]);const{keys:[x,T],joystick:b}=e,w=b==="invertY"?1:-1,{[x]:{step:M},[T]:{step:R}}=e,N=vm("sizes","joystickWidth"),D=vm("sizes","joystickHeight"),L=parseFloat(N)*.8/2,F=parseFloat(D)*.8/2,I=P.useCallback(()=>{n.current||(d(!0),s.current&&m({x:s.current*L}),r.current&&m({y:r.current*-F}),n.current=window.setInterval(()=>{t(Y=>{const Z=M*s.current*a.current,se=w*R*r.current*a.current;return Array.isArray(Y)?{[x]:Y[0]+Z,[T]:Y[1]+se}:{[x]:Y[x]+Z,[T]:Y[T]+se}})},16))},[L,F,t,m,M,R,x,T,w]),z=P.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,d(!1)},[]);P.useEffect(()=>{function Y(Z){a.current=IX(Z)}return window.addEventListener("keydown",Y),window.addEventListener("keyup",Y),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",Y),window.removeEventListener("keyup",Y)}},[]);const H=fw(({first:Y,active:Z,delta:[se,oe],movement:[G,K]})=>{Y&&l(!0);const $=py(G,-L,L),ce=py(K,-F,F);s.current=Math.abs(G)>Math.abs($)?Math.sign(G-$):0,r.current=Math.abs(K)>Math.abs(ce)?Math.sign(ce-K):0;let q=i[x],ue=i[T];Z?(s.current||(q+=se*M*a.current,m({x:$})),r.current||(ue-=w*oe*R*a.current,m({y:ce})),s.current||r.current?I():z(),t({[x]:q,[T]:ue})):(l(!1),s.current=0,r.current=0,m({x:0,y:0}),z())});return fe.createElement(Y_e,Ra({ref:v},H()),o&&fe.createElement(eF,null,fe.createElement(K_e,{ref:_,isOutOfBounds:c},fe.createElement("div",null),fe.createElement("span",{ref:h}))))}const Q_e=zn("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function J_e(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Ql();return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(Q_e,{withJoystick:!!n.joystick},n.joystick&&fe.createElement(Z_e,{value:e,settings:n,onUpdate:t}),fe.createElement(nF,{value:e,settings:n,onUpdate:t})))}const exe=["joystick"],NY=rY(["x","y"]),txe=i=>{let{joystick:e=!0}=i,t=ir(i,exe);const{value:n,settings:s}=NY.normalize(t);return{value:n,settings:Zn(Zn({},s),{},{joystick:e})}};var nxe=Zn(Zn({component:J_e},NY),{},{normalize:txe});const ixe=i=>{if(i!==void 0){if(i instanceof File)try{return URL.createObjectURL(i)}catch{return}if(typeof i=="string"&&i.indexOf("blob:")===0)return i;throw Error("Invalid image format [undefined | blob |File].")}},sxe=(i,e)=>typeof e=="object"&&"image"in e,rxe=({image:i})=>({value:i});var axe=Object.freeze({__proto__:null,sanitize:ixe,schema:sxe,normalize:rxe});const oxe=zn("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),lxe=zn("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),cxe=zn("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),uxe=zn("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),dxe=zn("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),fxe=zn("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function hxe(){const{label:i,value:e,onUpdate:t,disabled:n}=Ql(),{popinRef:s,wrapperRef:r,shown:a,show:o,hide:l}=AY(),c=P.useCallback(_=>{_.length&&t(_[0])},[t]),d=P.useCallback(_=>{_.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:m,isDragAccept:v}=EY({maxFiles:1,accept:"image/*",onDrop:c,disabled:n});return fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(oxe,null,fe.createElement(cxe,{ref:s,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),a&&!!e&&fe.createElement(eF,null,fe.createElement(ZX,{onPointerUp:l,style:{cursor:"pointer"}}),fe.createElement(uxe,{ref:r,style:{backgroundImage:`url(${e})`}})),fe.createElement(lxe,h({isDragAccept:v}),fe.createElement("input",m()),fe.createElement(dxe,null,v?"drop image":"click or drop")),fe.createElement(fxe,{onClick:d,disabled:!e})))}var pxe=Zn({component:hxe},axe);const LH=ou().number(),mxe=(i,e)=>ou().array().length(2).every.number().test(i)&&ou().schema({min:LH,max:LH}).test(e),dN=i=>({min:i[0],max:i[1]}),DY=(i,{bounds:[e,t]},n)=>{const s=Array.isArray(i)?dN(i):i,r={min:n[0],max:n[1]},{min:a,max:o}=Zn(Zn({},r),s);return[py(Number(a),e,Math.max(e,o)),py(Number(o),Math.min(t,a),t)]},gxe=({value:i,min:e,max:t})=>{const n={min:e,max:t},s=sY(dN(i),{min:n,max:n}),r=[e,t],a=Zn(Zn({},s),{},{bounds:r});return{value:DY(dN(i),a,i),settings:a}};var yxe=Object.freeze({__proto__:null,schema:mxe,format:dN,sanitize:DY,normalize:gxe});const vxe=["value","bounds","onDrag"],_xe=["bounds"],xxe=zn("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function bxe(i){let{value:e,bounds:[t,n],onDrag:s}=i,r=ir(i,vxe);const a=P.useRef(null),o=P.useRef(null),l=P.useRef(null),c=P.useRef(0),d=vm("sizes","scrubberWidth"),h=fw(({event:_,first:x,xy:[T],movement:[b],memo:w={}})=>{if(x){const{width:R,left:N}=a.current.getBoundingClientRect();c.current=R-parseFloat(d);const D=_?.target===o.current||_?.target===l.current;w.pos=aN((T-N)/R,t,n);const L=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=L<0||L===0&&w.pos<=e.min?"min":"max",D&&(w.pos=e[w.key])}const M=w.pos+aN(b/c.current,0,n-t);return s({[w.key]:d0e(M,r[w.key])}),w}),m=`calc(${rN(e.min,t,n)} * (100% - ${d} - 8px) + 4px)`,v=`calc(${1-rN(e.max,t,n)} * (100% - ${d} - 8px) + 4px)`;return fe.createElement(tY,Ra({ref:a},h()),fe.createElement(eY,null,fe.createElement(nY,{style:{left:m,right:v}})),fe.createElement(O3,{position:"left",ref:o,style:{left:m}}),fe.createElement(O3,{position:"right",ref:l,style:{right:v}}))}function Sxe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Ql(),s=ir(n,_xe);return fe.createElement(fe.Fragment,null,fe.createElement(sf,{input:!0},fe.createElement(Yf,null,i),fe.createElement(xxe,null,fe.createElement(bxe,Ra({value:e},n,{onDrag:t})),fe.createElement(nF,{value:e,settings:s,onUpdate:t,innerLabelTrim:0}))))}var Txe=Zn({component:Sxe},yxe);const Exe=()=>{const i=new Map;return{on:(e,t)=>{let n=i.get(e);n===void 0&&(n=new Set,i.set(e,n)),n.add(t)},off:(e,t)=>{const n=i.get(e);n!==void 0&&(n.delete(t),n.size===0&&i.delete(e))},emit:(e,...t)=>{const n=i.get(e);if(n!==void 0)for(const s of n)s(...t)}}},wxe=["type","value"],Mxe=["onChange","transient","onEditStart","onEditEnd"],Axe=function(){const e=p_e(m_e(()=>({data:{}}))),t=Exe();this.storeId=Sye(),this.useStore=e;const n={},s=new Set;this.getVisiblePaths=()=>{const a=this.getData(),o=Object.keys(a),l=[];Object.entries(n).forEach(([d,h])=>{h.render&&o.some(m=>m.indexOf(d)===0)&&!h.render(this.get)&&l.push(d+".")});const c=[];return s.forEach(d=>{d in a&&a[d].__refCount>0&&l.every(h=>d.indexOf(h)===-1)&&(!a[d].render||a[d].render(this.get))&&c.push(d)}),c},this.setOrderedPaths=a=>{a.forEach(o=>s.add(o))},this.orderPaths=a=>(this.setOrderedPaths(a),a),this.disposePaths=a=>{e.setState(o=>{const l=o.data;return a.forEach(c=>{if(c in l){const d=l[c];d.__refCount--,d.__refCount===0&&d.type in Bf&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=a=>n[a]||{},this.getData=()=>e.getState().data,this.addData=(a,o)=>{e.setState(l=>{const c=l.data;return Object.entries(a).forEach(([d,h])=>{let m=c[d];if(m){const{type:v,value:_}=h,x=ir(h,wxe);v!==m.type?lm(aa.INPUT_TYPE_OVERRIDE,v):((m.__refCount===0||o)&&Object.assign(m,x),m.__refCount++)}else c[d]=Zn(Zn({},h),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(a,o,l)=>{e.setState(c=>{const d=c.data;return W5(d[a],o,a,this,l),{data:d}})},this.setSettingsAtPath=(a,o)=>{e.setState(l=>{const c=l.data;return c[a].settings=Zn(Zn({},c[a].settings),o),{data:c}})},this.disableInputAtPath=(a,o)=>{e.setState(l=>{const c=l.data;return c[a].disabled=o,{data:c}})},this.set=(a,o)=>{e.setState(l=>{const c=l.data;return Object.entries(a).forEach(([d,h])=>{try{W5(c[d],h,void 0,void 0,o)}catch{}}),{data:c}})},this.getInput=a=>{try{return this.getData()[a]}catch{lm(aa.PATH_DOESNT_EXIST,a)}},this.get=a=>{var o;return(o=this.getInput(a))===null||o===void 0?void 0:o.value},this.emitOnEditStart=a=>{t.emit(`onEditStart:${a}`,this.get(a),a,Zn(Zn({},this.getInput(a)),{},{get:this.get}))},this.emitOnEditEnd=a=>{t.emit(`onEditEnd:${a}`,this.get(a),a,Zn(Zn({},this.getInput(a)),{},{get:this.get}))},this.subscribeToEditStart=(a,o)=>{const l=`onEditStart:${a}`;return t.on(l,o),()=>t.off(l,o)},this.subscribeToEditEnd=(a,o)=>{const l=`onEditEnd:${a}`;return t.on(l,o),()=>t.off(l,o)};const r=(a,o,l)=>{const c={};return Object.entries(a).forEach(([d,h])=>{if(d==="")return lm(aa.EMPTY_KEY);let m=cF(o,d);if(h.type===Bf.FOLDER){const v=r(h.schema,m,l);Object.assign(c,v),m in n||(n[m]=h.settings)}else if(d in l)lm(aa.DUPLICATE_KEYS,d,m,l[d].path);else{const v=Nye(h,d,m,c);if(v){const{type:_,options:x,input:T}=v,{onChange:b,transient:w,onEditStart:M,onEditEnd:R}=x,N=ir(x,Mxe);c[m]=Zn(Zn(Zn({type:_},N),T),{},{fromPanel:!0}),l[d]={path:m,onChange:b,transient:w,onEditStart:M,onEditEnd:R}}else lm(aa.UNKNOWN_INPUT,m,h)}}),c};this.getDataFromSchema=a=>{const o={};return[r(a,"",o),o]}},PY=new Axe,Cxe={collapsed:!1};function Rxe(i,e){return{type:Bf.FOLDER,schema:i,settings:Zn(Zn({},Cxe),e)}}const UH=i=>"__levaInput"in i,Nxe=(i,e)=>{const t={},n=e?e.toLowerCase():null;return i.forEach(s=>{const[r,a]=N_e(s);(!n||r.toLowerCase().indexOf(n)>-1)&&R_e(t,a,{[r]:{__levaInput:!0,path:s}})}),t},Dxe=["type","label","path","valueKey","value","settings","setValue","disabled"];function Pxe(i){let{type:e,label:t,path:n,valueKey:s,value:r,settings:a,setValue:o,disabled:l}=i,c=ir(i,Dxe);const{displayValue:d,onChange:h,onUpdate:m}=QX({type:e,value:r,settings:a,setValue:o}),v=Wv[e].component;return v?fe.createElement(GX.Provider,{value:Zn({key:s,path:n,id:""+n,label:t,displayValue:d,value:r,onChange:h,onUpdate:m,settings:a,setValue:o,disabled:l},c)},fe.createElement(Yye,{disabled:l},fe.createElement(v,null))):(lm(aa.NO_COMPONENT_FOR_TYPE,e,n),null)}const Oxe=zn("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Lxe({onClick:i,settings:e,label:t}){const n=dw();return fe.createElement(sf,null,fe.createElement(Oxe,{disabled:e.disabled,onClick:()=>i(n.get)},t))}const Uxe=zn("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Bxe=zn("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Ixe=({label:i,opts:e})=>{let t=typeof i=="string"&&i.trim()===""?null:i,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function Fxe(i){const{label:e,opts:t}=Ixe(i),n=dw();return fe.createElement(sf,{input:!!e},e&&fe.createElement(Yf,null,e),fe.createElement(Uxe,null,Object.entries(t).map(([s,r])=>fe.createElement(Bxe,{key:s,onClick:()=>r(n.get)},s))))}const zxe=zn("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),OY=100;function Vxe(i,e){i.push(e),i.length>OY&&i.shift()}const kxe=P.forwardRef(function({initialValue:i},e){const t=vm("colors","highlight3"),n=vm("colors","elevation2"),s=vm("colors","highlight1"),[r,a]=P.useMemo(()=>[xc(s).alpha(.4).toRgbString(),xc(s).alpha(.1).toRgbString()],[s]),o=P.useRef([i]),l=P.useRef(i),c=P.useRef(i),d=P.useRef(),h=P.useCallback((_,x)=>{if(!_)return;const{width:T,height:b}=_,w=new Path2D,M=T/OY,R=b*.05;for(let L=0;L<o.current.length;L++){const F=rN(o.current[L],l.current,c.current),I=M*L,z=b-F*(b-R*2)-R;w.lineTo(I,z)}x.clearRect(0,0,T,b);const N=new Path2D(w);N.lineTo(M*(o.current.length+1),b),N.lineTo(0,b),N.lineTo(0,0);const D=x.createLinearGradient(0,0,0,b);D.addColorStop(0,r),D.addColorStop(1,a),x.fillStyle=D,x.fill(N),x.strokeStyle=n,x.lineJoin="round",x.lineWidth=14,x.stroke(w),x.strokeStyle=t,x.lineWidth=2,x.stroke(w)},[t,n,r,a]),[m,v]=s0e(h);return P.useImperativeHandle(e,()=>({frame:_=>{(l.current===void 0||_<l.current)&&(l.current=_),(c.current===void 0||_>c.current)&&(c.current=_),Vxe(o.current,_),d.current=requestAnimationFrame(()=>h(m.current,v.current))}}),[m,v,h]),P.useEffect(()=>()=>cancelAnimationFrame(d.current),[]),fe.createElement(zxe,{ref:m})}),BH=i=>Number.isFinite(i)?i.toPrecision(2):i.toString(),Gxe=P.forwardRef(function({initialValue:i},e){const[t,n]=P.useState(BH(i));return P.useImperativeHandle(e,()=>({frame:s=>n(BH(s))}),[]),fe.createElement("div",null,t)});function IH(i){return typeof i=="function"?i():i.current}function Hxe({label:i,objectOrFn:e,settings:t}){const n=P.useRef(),s=P.useRef(IH(e));return P.useEffect(()=>{const r=window.setInterval(()=>{var a;document.hidden||(a=n.current)===null||a===void 0||a.frame(IH(e))},t.interval);return()=>window.clearInterval(r)},[e,t.interval]),fe.createElement(sf,{input:!0},fe.createElement(Yf,{align:"top"},i),t.graph?fe.createElement(kxe,{ref:n,initialValue:s.current}):fe.createElement(Gxe,{ref:n,initialValue:s.current}))}const jxe=["type","label","key"],$xe={[Bf.BUTTON]:Lxe,[Bf.BUTTON_GROUP]:Fxe,[Bf.MONITOR]:Hxe},Wxe=fe.memo(({path:i})=>{const[e,{set:t,setSettings:n,disable:s,storeId:r,emitOnEditStart:a,emitOnEditEnd:o}]=a0e(i);if(!e)return null;const{type:l,label:c,key:d}=e,h=ir(e,jxe);if(l in Bf){const m=$xe[l];return fe.createElement(m,Ra({label:c,path:i},h))}return l in Wv?fe.createElement(Pxe,Ra({key:r+i,type:l,label:c,storeId:r,path:i,valueKey:d,setValue:t,setSettings:n,disable:s,emitOnEditStart:a,emitOnEditEnd:o},h)):(pye(aa.UNSUPPORTED_INPUT,l,i),null)});function qxe({toggle:i,toggled:e,name:t}){return fe.createElement(Wye,{onClick:()=>i()},fe.createElement(tF,{toggled:e}),fe.createElement("div",null,t))}const Xxe=({name:i,path:e,tree:t})=>{const n=dw(),s=cF(e,i),{collapsed:r,color:a}=n.getFolderSettings(s),[o,l]=P.useState(!r),c=P.useRef(null),d=vm("colors","folderWidgetColor"),h=vm("colors","folderTextColor");return P.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",a||d),c.current.style.setProperty("--leva-colors-folderTextColor",a||h)},[a,d,h]),fe.createElement(oN,{ref:c},fe.createElement(qxe,{name:i,toggled:o,toggle:()=>l(m=>!m)}),fe.createElement(LY,{parent:s,tree:t,toggled:o}))},LY=fe.memo(({isRoot:i=!1,fill:e=!1,flat:t=!1,parent:n,tree:s,toggled:r})=>{const{wrapperRef:a,contentRef:o}=O_e(r),l=dw(),c=([h,m])=>{var v;return(UH(m)?(v=l.getInput(m.path))===null||v===void 0?void 0:v.order:l.getFolderSettings(cF(n,h)).order)||0},d=Object.entries(s).sort((h,m)=>c(h)-c(m));return fe.createElement(D3,{ref:a,isRoot:i,fill:e,flat:t},fe.createElement(XX,{ref:o,isRoot:i,toggled:r},d.map(([h,m])=>UH(m)?fe.createElement(Wxe,{key:m.path,valueKey:m.valueKey,path:m.path}):fe.createElement(Xxe,{key:h,name:h,path:n,tree:m}))))}),Yxe=zn("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${KX}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),UY=40,fN=zn("i",{$flexCenter:"",width:UY,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Kxe=zn("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Zxe=zn("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${fN}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Qxe=zn("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Jxe=zn("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:UY}}}}),ebe=fe.forwardRef(({setFilter:i,toggle:e},t)=>{const[n,s]=P.useState(""),r=P.useMemo(()=>BX(i,250),[i]),a=()=>{i(""),s("")},o=l=>{const c=l.currentTarget.value;e(!0),s(c)};return P.useEffect(()=>{r(n)},[n,r]),fe.createElement(fe.Fragment,null,fe.createElement(Qxe,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:o}),fe.createElement(fN,{onClick:()=>a(),style:{visibility:n?"visible":"hidden"}},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function tbe({setFilter:i,onDrag:e,onDragStart:t,onDragEnd:n,toggle:s,toggled:r,title:a,drag:o,filterEnabled:l,from:c}){const[d,h]=P.useState(!1),m=P.useRef(null);P.useEffect(()=>{var _,x;d?(_=m.current)===null||_===void 0||_.focus():(x=m.current)===null||x===void 0||x.blur()},[d]);const v=fw(({offset:[_,x],first:T,last:b})=>{e({x:_,y:x}),T&&t({x:_,y:x}),b&&n({x:_,y:x})},{filterTaps:!0,from:({offset:[_,x]})=>[c?.x||_,c?.y||x]});return P.useEffect(()=>{const _=x=>{x.key==="L"&&x.shiftKey&&x.metaKey&&h(T=>!T)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[]),fe.createElement(fe.Fragment,null,fe.createElement(Kxe,{mode:o?"drag":void 0},fe.createElement(fN,{active:!r,onClick:()=>s()},fe.createElement(tF,{toggled:r,width:12,height:8})),fe.createElement(Jxe,Ra({},o?v():{},{drag:o,filterEnabled:l}),a===void 0&&o?fe.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},fe.createElement("circle",{cx:"2",cy:"2",r:"2"}),fe.createElement("circle",{cx:"14",cy:"2",r:"2"}),fe.createElement("circle",{cx:"26",cy:"2",r:"2"}),fe.createElement("circle",{cx:"2",cy:"12",r:"2"}),fe.createElement("circle",{cx:"14",cy:"12",r:"2"}),fe.createElement("circle",{cx:"26",cy:"12",r:"2"})):a),l&&fe.createElement(fN,{active:d,onClick:()=>h(_=>!_)},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},fe.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),fe.createElement(Zxe,{toggled:d},fe.createElement(ebe,{ref:m,setFilter:i,toggle:s})))}const nbe=["store","hidden","theme","collapsed"];function ibe(i){let{store:e,hidden:t=!1,theme:n,collapsed:s=!1}=i,r=ir(i,nbe);const a=MY(()=>Vye(n),[n]),[o,l]=P.useState(!s),c=typeof s=="object"?!s.collapsed:o,d=P.useMemo(()=>typeof s=="object"?h=>{typeof h=="function"?s.onChange(!h(!s.collapsed)):s.onChange(!h)}:l,[s]);return!e||t?null:fe.createElement(QI.Provider,{value:a},fe.createElement(sbe,Ra({store:e},r,{toggled:c,setToggle:d,rootClass:a.className})))}const sbe=fe.memo(({store:i,rootClass:e,fill:t=!1,flat:n=!1,neverHide:s=!1,oneLineLabels:r=!1,titleBar:a={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:l,setToggle:c})=>{var d,h;const m=L_e(i),[v,_]=P.useState(""),x=P.useMemo(()=>Nxe(m,v),[m,v]),[T,b]=JX(),w=s||m.length>0,M=typeof a=="object"&&a.title||void 0,R=typeof a=="object"&&(d=a.drag)!==null&&d!==void 0?d:!0,N=typeof a=="object"&&(h=a.filter)!==null&&h!==void 0?h:!0,D=typeof a=="object"&&a.position||void 0,L=typeof a=="object"&&a.onDrag||void 0,F=typeof a=="object"&&a.onDragStart||void 0,I=typeof a=="object"&&a.onDragEnd||void 0;return fe.useEffect(()=>{b({x:D?.x,y:D?.y})},[D,b]),zye(),fe.createElement(jX.Provider,{value:{hideCopyButton:o}},fe.createElement(Yxe,{ref:T,className:e,fill:t,flat:n,oneLineLabels:r,hideTitleBar:!a,style:{display:w?"block":"none"}},a&&fe.createElement(tbe,{onDrag:z=>{b(z),L?.(z)},onDragStart:z=>F?.(z),onDragEnd:z=>I?.(z),setFilter:_,toggle:z=>c(H=>z??!H),toggled:l,title:M,drag:R,filterEnabled:N,from:D}),w&&fe.createElement(HX.Provider,{value:i},fe.createElement(LY,{isRoot:!0,fill:t,flat:n,tree:x,toggled:l}))))}),rbe=["isRoot"];let hN=!1,bv=null;function BY(i){let{isRoot:e=!1}=i,t=ir(i,rbe);return P.useEffect(()=>(hN=!0,!e&&bv&&(bv.remove(),bv=null),()=>{e||(hN=!1)}),[e]),fe.createElement(ibe,Ra({store:PY},t))}function abe(i){P.useEffect(()=>{i&&!hN&&(bv||(bv=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(bv),VW.createRoot(bv).render(fe.createElement(BY,{isRoot:!0})))),hN=!0)},[i])}function obe(i,e,t,n,s){let r,a,o,l,c;return typeof i=="string"?(a=i,r=e,Array.isArray(t)&&(c=t)):(r=i,Array.isArray(e)?c=e:(l=e,c=t)),{schema:r,folderName:a,folderSettings:o,hookSettings:l,deps:c||[]}}function lbe(i,e,t,n,s){const{folderName:r,schema:a,folderSettings:o,hookSettings:l,deps:c}=obe(i,e,t),d=typeof a=="function",h=P.useRef(!1),m=P.useRef(!0),v=MY(()=>{h.current=!0;const H=typeof a=="function"?a():a;return r?{[r]:Rxe(H,o)}:H},c),_=!(l!=null&&l.store);abe(_);const[x]=P.useState(()=>l?.store||PY),[T,b]=P.useMemo(()=>x.getDataFromSchema(v),[x,v]),[w,M,R,N,D]=P.useMemo(()=>{const H=[],Y=[],Z={},se={},oe={};return Object.values(b).forEach(({path:G,onChange:K,onEditStart:$,onEditEnd:ce,transient:q})=>{H.push(G),K?(Z[G]=K,q||Y.push(G)):Y.push(G),$&&(se[G]=$),ce&&(oe[G]=ce)}),[H,Y,Z,se,oe]},[b]),L=P.useMemo(()=>x.orderPaths(w),[w,x]),F=U_e(x,M,T),I=P.useCallback(H=>{const Y=Object.entries(H).reduce((Z,[se,oe])=>Object.assign(Z,{[b[se].path]:oe}),{});x.set(Y,!1)},[x,b]),z=P.useCallback(H=>x.get(b[H].path),[x,b]);return P.useEffect(()=>{const H=!m.current&&h.current;return x.addData(T,H),m.current=!1,h.current=!1,()=>x.disposePaths(L)},[x,L,T]),P.useEffect(()=>{const H=[];return Object.entries(R).forEach(([Y,Z])=>{Z(x.get(Y),Y,Zn({initial:!0,get:x.get},x.getInput(Y)));const se=x.useStore.subscribe(oe=>{const G=oe.data[Y];return[G.disabled?void 0:G.value,G]},([oe,G])=>Z(oe,Y,Zn({initial:!1,get:x.get},G)),{equalityFn:i2});H.push(se)}),()=>H.forEach(Y=>Y())},[x,R]),P.useEffect(()=>{const H=[];return Object.entries(N).forEach(([Y,Z])=>H.push(x.subscribeToEditStart(Y,Z))),Object.entries(D).forEach(([Y,Z])=>H.push(x.subscribeToEditEnd(Y,Z))),()=>H.forEach(Y=>Y())},[N,D,x]),d?[F,I,z]:F}Vm(kf.SELECT,T0e);Vm(kf.IMAGE,pxe);Vm(kf.NUMBER,h0e);Vm(kf.COLOR,W_e);Vm(kf.STRING,P0e);Vm(kf.BOOLEAN,z0e);Vm(kf.INTERVAL,Txe);Vm(kf.VECTOR3D,X_e);Vm(kf.VECTOR2D,nxe);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const x_="180",IY={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},FY={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d2=0,ME=1,f2=2,zY=3,h2=0,bS=1,Mb=2,zl=3,Nc=0,Ts=1,Go=2,ql=0,Dc=1,my=2,gy=3,yy=4,ry=5,Ho=100,mw=101,gw=102,p2=103,m2=104,Nf=200,yw=201,vw=202,_w=203,qv=204,Xv=205,xw=206,bw=207,Sw=208,Tw=209,Ew=210,uF=211,dF=212,fF=213,hF=214,Yv=0,Kv=1,Zv=2,op=3,Qv=4,Jv=5,e_=6,t_=7,b_=0,g2=1,y2=2,bo=0,v2=1,_2=2,x2=3,ww=4,pF=5,b2=6,S2=7,pN="attached",mF="detached",SS=300,gu=301,nd=302,Rm=303,Nm=304,lp=306,cp=1e3,vl=1001,up=1002,Fs=1003,TS=1004,VY=1004,jd=1005,kY=1005,Zi=1006,_m=1007,GY=1007,jo=1008,gF=1008,Tr=1009,xm=1010,bm=1011,Xu=1012,oo=1013,Rs=1014,fr=1015,$a=1016,ES=1017,wS=1018,Pc=1020,MS=35902,AS=35899,Mw=1021,S_=1022,nr=1023,Oc=1026,Lc=1027,qy=1028,km=1029,Of=1030,Xy=1031,yF=1032,Yy=1033,Wh=33776,qh=33777,Xh=33778,Yh=33779,n_=35840,i_=35841,s_=35842,r_=35843,vy=36196,_y=37492,xy=37496,by=37808,Sy=37809,Ty=37810,Ey=37811,wy=37812,My=37813,Ay=37814,Cy=37815,Ry=37816,Ny=37817,Dy=37818,Py=37819,Oy=37820,Ly=37821,Uy=36492,AE=36494,CE=36495,By=36283,Iy=36284,Fy=36285,zy=36286,vF=2200,_F=2201,xF=2202,jb=2300,RE=2301,$1=2302,Kg=2400,Zg=2401,$b=2402,Aw=2500,T2=2501,HY=0,jY=1,$Y=2,bF=3200,SF=3201,WY=3202,qY=3203,Gf=0,E2=1,kl="",ao="srgb",Hf="srgb-linear",Vy="linear",Kt="srgb",TF=0,rm=7680,EF=7681,wF=7682,MF=7683,AF=34055,CF=34056,RF=5386,NF=512,DF=513,PF=514,OF=515,LF=516,UF=517,BF=518,NE=519,Cw=512,CS=513,Rw=514,RS=515,Nw=516,Dw=517,Pw=518,Ow=519,a_=35044,Qg=35048,XY=35040,YY=35045,KY=35049,ZY=35041,QY=35046,JY=35050,eK=35042,tK="100",mN="300 es",$o=2e3,id=2001,Jg={COMPUTE:"compute",RENDER:"render"},nK={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},iK={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let _u=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}};const Bl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let FH=1234567;const Uv=Math.PI/180,o_=180/Math.PI;function Zu(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Bl[i&255]+Bl[i>>8&255]+Bl[i>>16&255]+Bl[i>>24&255]+"-"+Bl[e&255]+Bl[e>>8&255]+"-"+Bl[e>>16&15|64]+Bl[e>>24&255]+"-"+Bl[t&63|128]+Bl[t>>8&255]+"-"+Bl[t>>16&255]+Bl[t>>24&255]+Bl[n&255]+Bl[n>>8&255]+Bl[n>>16&255]+Bl[n>>24&255]).toLowerCase()}function Qn(i,e,t){return Math.max(e,Math.min(t,i))}function IF(i,e){return(i%e+e)%e}function cbe(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function ube(i,e,t){return i!==e?(t-i)/(e-i):0}function W1(i,e,t){return(1-t)*i+t*e}function dbe(i,e,t,n){return W1(i,e,1-Math.exp(-t*n))}function fbe(i,e=1){return e-Math.abs(IF(i,e*2)-e)}function hbe(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function pbe(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function mbe(i,e){return i+Math.floor(Math.random()*(e-i+1))}function gbe(i,e){return i+Math.random()*(e-i)}function ybe(i){return i*(.5-Math.random())}function vbe(i){i!==void 0&&(FH=i);let e=FH+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function _be(i){return i*Uv}function xbe(i){return i*o_}function bbe(i){return(i&i-1)===0&&i!==0}function Sbe(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Tbe(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Ebe(i,e,t,n,s){const r=Math.cos,a=Math.sin,o=r(t/2),l=a(t/2),c=r((e+n)/2),d=a((e+n)/2),h=r((e-n)/2),m=a((e-n)/2),v=r((n-e)/2),_=a((n-e)/2);switch(s){case"XYX":i.set(o*d,l*h,l*m,o*c);break;case"YZY":i.set(l*m,o*d,l*h,o*c);break;case"ZXZ":i.set(l*h,l*m,o*d,o*c);break;case"XZX":i.set(o*d,l*_,l*v,o*c);break;case"YXY":i.set(l*v,o*d,l*_,o*c);break;case"ZYZ":i.set(l*_,l*v,o*d,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ec(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function bi(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Lf={DEG2RAD:Uv,RAD2DEG:o_,generateUUID:Zu,clamp:Qn,euclideanModulo:IF,mapLinear:cbe,inverseLerp:ube,lerp:W1,damp:dbe,pingpong:fbe,smoothstep:hbe,smootherstep:pbe,randInt:mbe,randFloat:gbe,randFloatSpread:ybe,seededRandom:vbe,degToRad:_be,radToDeg:xbe,isPowerOfTwo:bbe,ceilPowerOfTwo:Sbe,floorPowerOfTwo:Tbe,setQuaternionFromProperEuler:Ebe,normalize:bi,denormalize:Ec};class lt{constructor(e=0,t=0){lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Qn(this.x,e.x,t.x),this.y=Qn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Qn(this.x,e,t),this.y=Qn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Qn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*s+e.x,this.y=r*s+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xl{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,a,o){let l=n[s+0],c=n[s+1],d=n[s+2],h=n[s+3];const m=r[a+0],v=r[a+1],_=r[a+2],x=r[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h;return}if(o===1){e[t+0]=m,e[t+1]=v,e[t+2]=_,e[t+3]=x;return}if(h!==x||l!==m||c!==v||d!==_){let T=1-o;const b=l*m+c*v+d*_+h*x,w=b>=0?1:-1,M=1-b*b;if(M>Number.EPSILON){const N=Math.sqrt(M),D=Math.atan2(N,b*w);T=Math.sin(T*D)/N,o=Math.sin(o*D)/N}const R=o*w;if(l=l*T+m*R,c=c*T+v*R,d=d*T+_*R,h=h*T+x*R,T===1-o){const N=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=N,c*=N,d*=N,h*=N}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,s,r,a){const o=n[s],l=n[s+1],c=n[s+2],d=n[s+3],h=r[a],m=r[a+1],v=r[a+2],_=r[a+3];return e[t]=o*_+d*h+l*v-c*m,e[t+1]=l*_+d*m+c*h-o*v,e[t+2]=c*_+d*v+o*m-l*h,e[t+3]=d*_-o*h-l*m-c*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),d=o(s/2),h=o(r/2),m=l(n/2),v=l(s/2),_=l(r/2);switch(a){case"XYZ":this._x=m*d*h+c*v*_,this._y=c*v*h-m*d*_,this._z=c*d*_+m*v*h,this._w=c*d*h-m*v*_;break;case"YXZ":this._x=m*d*h+c*v*_,this._y=c*v*h-m*d*_,this._z=c*d*_-m*v*h,this._w=c*d*h+m*v*_;break;case"ZXY":this._x=m*d*h-c*v*_,this._y=c*v*h+m*d*_,this._z=c*d*_+m*v*h,this._w=c*d*h-m*v*_;break;case"ZYX":this._x=m*d*h-c*v*_,this._y=c*v*h+m*d*_,this._z=c*d*_-m*v*h,this._w=c*d*h+m*v*_;break;case"YZX":this._x=m*d*h+c*v*_,this._y=c*v*h+m*d*_,this._z=c*d*_-m*v*h,this._w=c*d*h-m*v*_;break;case"XZY":this._x=m*d*h-c*v*_,this._y=c*v*h-m*d*_,this._z=c*d*_+m*v*h,this._w=c*d*h+m*v*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],a=t[1],o=t[5],l=t[9],c=t[2],d=t[6],h=t[10],m=n+o+h;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(d-l)*v,this._y=(r-c)*v,this._z=(a-s)*v}else if(n>o&&n>h){const v=2*Math.sqrt(1+n-o-h);this._w=(d-l)/v,this._x=.25*v,this._y=(s+a)/v,this._z=(r+c)/v}else if(o>h){const v=2*Math.sqrt(1+o-n-h);this._w=(r-c)/v,this._x=(s+a)/v,this._y=.25*v,this._z=(l+d)/v}else{const v=2*Math.sqrt(1+h-n-o);this._w=(a-s)/v,this._x=(r+c)/v,this._y=(l+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,a=e._w,o=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+a*o+s*c-r*l,this._y=s*d+a*l+r*o-n*c,this._z=r*d+a*c+n*l-s*o,this._w=a*d-n*o-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const v=1-t;return this._w=v*a+t*this._w,this._x=v*n+t*this._x,this._y=v*s+t*this._y,this._z=v*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,o),h=Math.sin((1-t)*d)/c,m=Math.sin(t*d)/c;return this._w=a*h+this._w*m,this._x=n*h+this._x*m,this._y=s*h+this._y*m,this._z=r*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,t=0,n=0){ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(zH.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(zH.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*s-o*n),d=2*(o*t-r*s),h=2*(r*n-a*t);return this.x=t+l*c+a*h-o*d,this.y=n+l*d+o*c-r*h,this.z=s+l*h+r*d-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Qn(this.x,e.x,t.x),this.y=Qn(this.y,e.y,t.y),this.z=Qn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Qn(this.x,e,t),this.y=Qn(this.y,e,t),this.z=Qn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Qn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,a=t.x,o=t.y,l=t.z;return this.x=s*l-r*o,this.y=r*a-n*l,this.z=n*o-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return CO.copy(this).projectOnVector(e),this.sub(CO)}reflect(e){return this.sub(CO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Qn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const CO=new ae,zH=new xl;class Kn{constructor(e,t,n,s,r,a,o,l,c){Kn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,c)}set(e,t,n,s,r,a,o,l,c){const d=this.elements;return d[0]=e,d[1]=s,d[2]=o,d[3]=t,d[4]=r,d[5]=l,d[6]=n,d[7]=a,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],d=n[4],h=n[7],m=n[2],v=n[5],_=n[8],x=s[0],T=s[3],b=s[6],w=s[1],M=s[4],R=s[7],N=s[2],D=s[5],L=s[8];return r[0]=a*x+o*w+l*N,r[3]=a*T+o*M+l*D,r[6]=a*b+o*R+l*L,r[1]=c*x+d*w+h*N,r[4]=c*T+d*M+h*D,r[7]=c*b+d*R+h*L,r[2]=m*x+v*w+_*N,r[5]=m*T+v*M+_*D,r[8]=m*b+v*R+_*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8];return t*a*d-t*o*c-n*r*d+n*o*l+s*r*c-s*a*l}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=d*a-o*c,m=o*l-d*r,v=c*r-a*l,_=t*h+n*m+s*v;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/_;return e[0]=h*x,e[1]=(s*c-d*n)*x,e[2]=(o*n-s*a)*x,e[3]=m*x,e[4]=(d*t-s*l)*x,e[5]=(s*r-o*t)*x,e[6]=v*x,e[7]=(n*l-c*t)*x,e[8]=(a*t-n*r)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,a,o){const l=Math.cos(r),c=Math.sin(r);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-s*c,s*l,-s*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(RO.makeScale(e,t)),this}rotate(e){return this.premultiply(RO.makeRotation(-e)),this}translate(e,t){return this.premultiply(RO.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const RO=new Kn;function FF(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const wbe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lb(i,e){return new wbe[i](e)}function DE(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function w2(){const i=DE("canvas");return i.style.display="block",i}const VH={};function Xl(i){i in VH||(VH[i]=!0,console.warn(i))}function Mbe(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}const kH=new Kn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),GH=new Kn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Abe(){const i={enabled:!0,workingColorSpace:Hf,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===Kt&&(s.r=Sm(s.r),s.g=Sm(s.g),s.b=Sm(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Kt&&(s.r=Ab(s.r),s.g=Ab(s.g),s.b=Ab(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===kl?Vy:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return Xl("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return Xl("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,r)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Hf]:{primaries:e,whitePoint:n,transfer:Vy,toXYZ:kH,fromXYZ:GH,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ao},outputColorSpaceConfig:{drawingBufferColorSpace:ao}},[ao]:{primaries:e,whitePoint:n,transfer:Kt,toXYZ:kH,fromXYZ:GH,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ao}}}),i}const Sn=Abe();function Sm(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Ab(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let xx;class zF{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{xx===void 0&&(xx=DE("canvas")),xx.width=e.width,xx.height=e.height;const s=xx.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=xx}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=DE("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=Sm(r[a]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Sm(t[n]/255)*255):t[n]=Sm(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Cbe=0;class hm{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Cbe++}),this.uuid=Zu(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(NO(s[a].image)):r.push(NO(s[a]))}else r=NO(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function NO(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?zF.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Rbe=0;const DO=new ae;class Es extends _u{constructor(e=Es.DEFAULT_IMAGE,t=Es.DEFAULT_MAPPING,n=vl,s=vl,r=Zi,a=jo,o=nr,l=Tr,c=Es.DEFAULT_ANISOTROPY,d=kl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rbe++}),this.uuid=Zu(),this.name="",this.source=new hm(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(DO).x}get height(){return this.source.getSize(DO).y}get depth(){return this.source.getSize(DO).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==SS)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cp:e.x=e.x-Math.floor(e.x);break;case vl:e.x=e.x<0?0:1;break;case up:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case cp:e.y=e.y-Math.floor(e.y);break;case vl:e.y=e.y<0?0:1;break;case up:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Es.DEFAULT_IMAGE=null;Es.DEFAULT_MAPPING=SS;Es.DEFAULT_ANISOTROPY=1;class bn{constructor(e=0,t=0,n=0,s=1){bn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*s+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const l=e.elements,c=l[0],d=l[4],h=l[8],m=l[1],v=l[5],_=l[9],x=l[2],T=l[6],b=l[10];if(Math.abs(d-m)<.01&&Math.abs(h-x)<.01&&Math.abs(_-T)<.01){if(Math.abs(d+m)<.1&&Math.abs(h+x)<.1&&Math.abs(_+T)<.1&&Math.abs(c+v+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(c+1)/2,R=(v+1)/2,N=(b+1)/2,D=(d+m)/4,L=(h+x)/4,F=(_+T)/4;return M>R&&M>N?M<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(M),s=D/n,r=L/n):R>N?R<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(R),n=D/s,r=F/s):N<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(N),n=L/r,s=F/r),this.set(n,s,r,t),this}let w=Math.sqrt((T-_)*(T-_)+(h-x)*(h-x)+(m-d)*(m-d));return Math.abs(w)<.001&&(w=1),this.x=(T-_)/w,this.y=(h-x)/w,this.z=(m-d)/w,this.w=Math.acos((c+v+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Qn(this.x,e.x,t.x),this.y=Qn(this.y,e.y,t.y),this.z=Qn(this.z,e.z,t.z),this.w=Qn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Qn(this.x,e,t),this.y=Qn(this.y,e,t),this.z=Qn(this.z,e,t),this.w=Qn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Qn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rf extends _u{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new bn(0,0,e,t),this.scissorTest=!1,this.viewport=new bn(0,0,e,t);const s={width:e,height:t,depth:n.depth},r=new Es(s);this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Zi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new hm(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jf extends rf{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class NS extends Es{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Fs,this.minFilter=Fs,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class sK extends jf{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new NS(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Lw extends Es{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Fs,this.minFilter=Fs,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rK extends jf{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Lw(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Xo{constructor(e=new ae(1/0,1/0,1/0),t=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Tf.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Tf.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Tf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Tf):Tf.fromBufferAttribute(r,a),Tf.applyMatrix4(e.matrixWorld),this.expandByPoint(Tf);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),WA.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),WA.copy(n.boundingBox)),WA.applyMatrix4(e.matrixWorld),this.union(WA)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Tf),Tf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($T),qA.subVectors(this.max,$T),bx.subVectors(e.a,$T),Sx.subVectors(e.b,$T),Tx.subVectors(e.c,$T),Cg.subVectors(Sx,bx),Rg.subVectors(Tx,Sx),G0.subVectors(bx,Tx);let t=[0,-Cg.z,Cg.y,0,-Rg.z,Rg.y,0,-G0.z,G0.y,Cg.z,0,-Cg.x,Rg.z,0,-Rg.x,G0.z,0,-G0.x,-Cg.y,Cg.x,0,-Rg.y,Rg.x,0,-G0.y,G0.x,0];return!PO(t,bx,Sx,Tx,qA)||(t=[1,0,0,0,1,0,0,0,1],!PO(t,bx,Sx,Tx,qA))?!1:(XA.crossVectors(Cg,Rg),t=[XA.x,XA.y,XA.z],PO(t,bx,Sx,Tx,qA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Tf).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const qp=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],Tf=new ae,WA=new Xo,bx=new ae,Sx=new ae,Tx=new ae,Cg=new ae,Rg=new ae,G0=new ae,$T=new ae,qA=new ae,XA=new ae,H0=new ae;function PO(i,e,t,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){H0.fromArray(i,r);const o=s.x*Math.abs(H0.x)+s.y*Math.abs(H0.y)+s.z*Math.abs(H0.z),l=e.dot(H0),c=t.dot(H0),d=n.dot(H0);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>o)return!1}return!0}const Nbe=new Xo,WT=new ae,OO=new ae;class co{constructor(e=new ae,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Nbe.setFromPoints(e).getCenter(n);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;WT.subVectors(e,this.center);const t=WT.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(WT,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(OO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(WT.copy(e.center).add(OO)),this.expandByPoint(WT.copy(e.center).sub(OO))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Xp=new ae,LO=new ae,YA=new ae,Ng=new ae,UO=new ae,KA=new ae,BO=new ae;class T_{constructor(e=new ae,t=new ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xp)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Xp.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Xp.copy(this.origin).addScaledVector(this.direction,t),Xp.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){LO.copy(e).add(t).multiplyScalar(.5),YA.copy(t).sub(e).normalize(),Ng.copy(this.origin).sub(LO);const r=e.distanceTo(t)*.5,a=-this.direction.dot(YA),o=Ng.dot(this.direction),l=-Ng.dot(YA),c=Ng.lengthSq(),d=Math.abs(1-a*a);let h,m,v,_;if(d>0)if(h=a*l-o,m=a*o-l,_=r*d,h>=0)if(m>=-_)if(m<=_){const x=1/d;h*=x,m*=x,v=h*(h+a*m+2*o)+m*(a*h+m+2*l)+c}else m=r,h=Math.max(0,-(a*m+o)),v=-h*h+m*(m+2*l)+c;else m=-r,h=Math.max(0,-(a*m+o)),v=-h*h+m*(m+2*l)+c;else m<=-_?(h=Math.max(0,-(-a*r+o)),m=h>0?-r:Math.min(Math.max(-r,-l),r),v=-h*h+m*(m+2*l)+c):m<=_?(h=0,m=Math.min(Math.max(-r,-l),r),v=m*(m+2*l)+c):(h=Math.max(0,-(a*r+o)),m=h>0?r:Math.min(Math.max(-r,-l),r),v=-h*h+m*(m+2*l)+c);else m=a>0?-r:r,h=Math.max(0,-(a*m+o)),v=-h*h+m*(m+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),s&&s.copy(LO).addScaledVector(YA,m),v}intersectSphere(e,t){Xp.subVectors(e.center,this.origin);const n=Xp.dot(this.direction),s=Xp.dot(Xp)-n*n,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,a,o,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,m=this.origin;return c>=0?(n=(e.min.x-m.x)*c,s=(e.max.x-m.x)*c):(n=(e.max.x-m.x)*c,s=(e.min.x-m.x)*c),d>=0?(r=(e.min.y-m.y)*d,a=(e.max.y-m.y)*d):(r=(e.max.y-m.y)*d,a=(e.min.y-m.y)*d),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),h>=0?(o=(e.min.z-m.z)*h,l=(e.max.z-m.z)*h):(o=(e.max.z-m.z)*h,l=(e.min.z-m.z)*h),n>l||o>s)||((o>n||n!==n)&&(n=o),(l<s||s!==s)&&(s=l),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,Xp)!==null}intersectTriangle(e,t,n,s,r){UO.subVectors(t,e),KA.subVectors(n,e),BO.crossVectors(UO,KA);let a=this.direction.dot(BO),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Ng.subVectors(this.origin,e);const l=o*this.direction.dot(KA.crossVectors(Ng,KA));if(l<0)return null;const c=o*this.direction.dot(UO.cross(Ng));if(c<0||l+c>a)return null;const d=-o*Ng.dot(BO);return d<0?null:this.at(d/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class an{constructor(e,t,n,s,r,a,o,l,c,d,h,m,v,_,x,T){an.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,l,c,d,h,m,v,_,x,T)}set(e,t,n,s,r,a,o,l,c,d,h,m,v,_,x,T){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=s,b[1]=r,b[5]=a,b[9]=o,b[13]=l,b[2]=c,b[6]=d,b[10]=h,b[14]=m,b[3]=v,b[7]=_,b[11]=x,b[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new an().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/Ex.setFromMatrixColumn(e,0).length(),r=1/Ex.setFromMatrixColumn(e,1).length(),a=1/Ex.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(s),c=Math.sin(s),d=Math.cos(r),h=Math.sin(r);if(e.order==="XYZ"){const m=a*d,v=a*h,_=o*d,x=o*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=v+_*c,t[5]=m-x*c,t[9]=-o*l,t[2]=x-m*c,t[6]=_+v*c,t[10]=a*l}else if(e.order==="YXZ"){const m=l*d,v=l*h,_=c*d,x=c*h;t[0]=m+x*o,t[4]=_*o-v,t[8]=a*c,t[1]=a*h,t[5]=a*d,t[9]=-o,t[2]=v*o-_,t[6]=x+m*o,t[10]=a*l}else if(e.order==="ZXY"){const m=l*d,v=l*h,_=c*d,x=c*h;t[0]=m-x*o,t[4]=-a*h,t[8]=_+v*o,t[1]=v+_*o,t[5]=a*d,t[9]=x-m*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const m=a*d,v=a*h,_=o*d,x=o*h;t[0]=l*d,t[4]=_*c-v,t[8]=m*c+x,t[1]=l*h,t[5]=x*c+m,t[9]=v*c-_,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const m=a*l,v=a*c,_=o*l,x=o*c;t[0]=l*d,t[4]=x-m*h,t[8]=_*h+v,t[1]=h,t[5]=a*d,t[9]=-o*d,t[2]=-c*d,t[6]=v*h+_,t[10]=m-x*h}else if(e.order==="XZY"){const m=a*l,v=a*c,_=o*l,x=o*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=m*h+x,t[5]=a*d,t[9]=v*h-_,t[2]=_*h-v,t[6]=o*d,t[10]=x*h+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Dbe,e,Pbe)}lookAt(e,t,n){const s=this.elements;return Iu.subVectors(e,t),Iu.lengthSq()===0&&(Iu.z=1),Iu.normalize(),Dg.crossVectors(n,Iu),Dg.lengthSq()===0&&(Math.abs(n.z)===1?Iu.x+=1e-4:Iu.z+=1e-4,Iu.normalize(),Dg.crossVectors(n,Iu)),Dg.normalize(),ZA.crossVectors(Iu,Dg),s[0]=Dg.x,s[4]=ZA.x,s[8]=Iu.x,s[1]=Dg.y,s[5]=ZA.y,s[9]=Iu.y,s[2]=Dg.z,s[6]=ZA.z,s[10]=Iu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],d=n[1],h=n[5],m=n[9],v=n[13],_=n[2],x=n[6],T=n[10],b=n[14],w=n[3],M=n[7],R=n[11],N=n[15],D=s[0],L=s[4],F=s[8],I=s[12],z=s[1],H=s[5],Y=s[9],Z=s[13],se=s[2],oe=s[6],G=s[10],K=s[14],$=s[3],ce=s[7],q=s[11],ue=s[15];return r[0]=a*D+o*z+l*se+c*$,r[4]=a*L+o*H+l*oe+c*ce,r[8]=a*F+o*Y+l*G+c*q,r[12]=a*I+o*Z+l*K+c*ue,r[1]=d*D+h*z+m*se+v*$,r[5]=d*L+h*H+m*oe+v*ce,r[9]=d*F+h*Y+m*G+v*q,r[13]=d*I+h*Z+m*K+v*ue,r[2]=_*D+x*z+T*se+b*$,r[6]=_*L+x*H+T*oe+b*ce,r[10]=_*F+x*Y+T*G+b*q,r[14]=_*I+x*Z+T*K+b*ue,r[3]=w*D+M*z+R*se+N*$,r[7]=w*L+M*H+R*oe+N*ce,r[11]=w*F+M*Y+R*G+N*q,r[15]=w*I+M*Z+R*K+N*ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],c=e[13],d=e[2],h=e[6],m=e[10],v=e[14],_=e[3],x=e[7],T=e[11],b=e[15];return _*(+r*l*h-s*c*h-r*o*m+n*c*m+s*o*v-n*l*v)+x*(+t*l*v-t*c*m+r*a*m-s*a*v+s*c*d-r*l*d)+T*(+t*c*h-t*o*v-r*a*h+n*a*v+r*o*d-n*c*d)+b*(-s*o*d-t*l*h+t*o*m+s*a*h-n*a*m+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],h=e[9],m=e[10],v=e[11],_=e[12],x=e[13],T=e[14],b=e[15],w=h*T*c-x*m*c+x*l*v-o*T*v-h*l*b+o*m*b,M=_*m*c-d*T*c-_*l*v+a*T*v+d*l*b-a*m*b,R=d*x*c-_*h*c+_*o*v-a*x*v-d*o*b+a*h*b,N=_*h*l-d*x*l-_*o*m+a*x*m+d*o*T-a*h*T,D=t*w+n*M+s*R+r*N;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/D;return e[0]=w*L,e[1]=(x*m*r-h*T*r-x*s*v+n*T*v+h*s*b-n*m*b)*L,e[2]=(o*T*r-x*l*r+x*s*c-n*T*c-o*s*b+n*l*b)*L,e[3]=(h*l*r-o*m*r-h*s*c+n*m*c+o*s*v-n*l*v)*L,e[4]=M*L,e[5]=(d*T*r-_*m*r+_*s*v-t*T*v-d*s*b+t*m*b)*L,e[6]=(_*l*r-a*T*r-_*s*c+t*T*c+a*s*b-t*l*b)*L,e[7]=(a*m*r-d*l*r+d*s*c-t*m*c-a*s*v+t*l*v)*L,e[8]=R*L,e[9]=(_*h*r-d*x*r-_*n*v+t*x*v+d*n*b-t*h*b)*L,e[10]=(a*x*r-_*o*r+_*n*c-t*x*c-a*n*b+t*o*b)*L,e[11]=(d*o*r-a*h*r-d*n*c+t*h*c+a*n*v-t*o*v)*L,e[12]=N*L,e[13]=(d*x*s-_*h*s+_*n*m-t*x*m-d*n*T+t*h*T)*L,e[14]=(_*o*s-a*x*s-_*n*l+t*x*l+a*n*T-t*o*T)*L,e[15]=(a*h*s-d*o*s+d*n*l-t*h*l-a*n*m+t*o*m)*L,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,a=e.x,o=e.y,l=e.z,c=r*a,d=r*o;return this.set(c*a+n,c*o-s*l,c*l+s*o,0,c*o+s*l,d*o+n,d*l-s*a,0,c*l-s*o,d*l+s*a,r*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,a){return this.set(1,n,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,a=t._y,o=t._z,l=t._w,c=r+r,d=a+a,h=o+o,m=r*c,v=r*d,_=r*h,x=a*d,T=a*h,b=o*h,w=l*c,M=l*d,R=l*h,N=n.x,D=n.y,L=n.z;return s[0]=(1-(x+b))*N,s[1]=(v+R)*N,s[2]=(_-M)*N,s[3]=0,s[4]=(v-R)*D,s[5]=(1-(m+b))*D,s[6]=(T+w)*D,s[7]=0,s[8]=(_+M)*L,s[9]=(T-w)*L,s[10]=(1-(m+x))*L,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=Ex.set(s[0],s[1],s[2]).length();const a=Ex.set(s[4],s[5],s[6]).length(),o=Ex.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Ef.copy(this);const c=1/r,d=1/a,h=1/o;return Ef.elements[0]*=c,Ef.elements[1]*=c,Ef.elements[2]*=c,Ef.elements[4]*=d,Ef.elements[5]*=d,Ef.elements[6]*=d,Ef.elements[8]*=h,Ef.elements[9]*=h,Ef.elements[10]*=h,t.setFromRotationMatrix(Ef),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,s,r,a,o=$o,l=!1){const c=this.elements,d=2*r/(t-e),h=2*r/(n-s),m=(t+e)/(t-e),v=(n+s)/(n-s);let _,x;if(l)_=r/(a-r),x=a*r/(a-r);else if(o===$o)_=-(a+r)/(a-r),x=-2*a*r/(a-r);else if(o===id)_=-a/(a-r),x=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=d,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=h,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=_,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,s,r,a,o=$o,l=!1){const c=this.elements,d=2/(t-e),h=2/(n-s),m=-(t+e)/(t-e),v=-(n+s)/(n-s);let _,x;if(l)_=1/(a-r),x=a/(a-r);else if(o===$o)_=-2/(a-r),x=-(a+r)/(a-r);else if(o===id)_=-1/(a-r),x=-r/(a-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=d,c[4]=0,c[8]=0,c[12]=m,c[1]=0,c[5]=h,c[9]=0,c[13]=v,c[2]=0,c[6]=0,c[10]=_,c[14]=x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ex=new ae,Ef=new an,Dbe=new ae(0,0,0),Pbe=new ae(1,1,1),Dg=new ae,ZA=new ae,Iu=new ae,HH=new an,jH=new xl;class Kl{constructor(e=0,t=0,n=0,s=Kl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],a=s[4],o=s[8],l=s[1],c=s[5],d=s[9],h=s[2],m=s[6],v=s[10];switch(t){case"XYZ":this._y=Math.asin(Qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Qn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,v),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(Qn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-h,v),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-Qn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Qn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(o,v));break;case"XZY":this._z=Math.asin(-Qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return HH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(HH,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jH.setFromEuler(this),this.setFromQuaternion(jH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Kl.DEFAULT_ORDER="XYZ";class l_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Obe=0;const $H=new ae,wx=new xl,Yp=new an,QA=new ae,qT=new ae,Lbe=new ae,Ube=new xl,WH=new ae(1,0,0),qH=new ae(0,1,0),XH=new ae(0,0,1),YH={type:"added"},Bbe={type:"removed"},Mx={type:"childadded",child:null},IO={type:"childremoved",child:null};class Qi extends _u{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Obe++}),this.uuid=Zu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qi.DEFAULT_UP.clone();const e=new ae,t=new Kl,n=new xl,s=new ae(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new an},normalMatrix:{value:new Kn}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=Qi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new l_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return wx.setFromAxisAngle(e,t),this.quaternion.multiply(wx),this}rotateOnWorldAxis(e,t){return wx.setFromAxisAngle(e,t),this.quaternion.premultiply(wx),this}rotateX(e){return this.rotateOnAxis(WH,e)}rotateY(e){return this.rotateOnAxis(qH,e)}rotateZ(e){return this.rotateOnAxis(XH,e)}translateOnAxis(e,t){return $H.copy(e).applyQuaternion(this.quaternion),this.position.add($H.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(WH,e)}translateY(e){return this.translateOnAxis(qH,e)}translateZ(e){return this.translateOnAxis(XH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Yp.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?QA.copy(e):QA.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),qT.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yp.lookAt(qT,QA,this.up):Yp.lookAt(QA,qT,this.up),this.quaternion.setFromRotationMatrix(Yp),s&&(Yp.extractRotation(s.matrixWorld),wx.setFromRotationMatrix(Yp),this.quaternion.premultiply(wx.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(YH),Mx.child=e,this.dispatchEvent(Mx),Mx.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Bbe),IO.child=e,this.dispatchEvent(IO),IO.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Yp.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Yp.multiply(e.parent.matrixWorld)),e.applyMatrix4(Yp),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(YH),Mx.child=e,this.dispatchEvent(Mx),Mx.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qT,e,Lbe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qT,Ube,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(o=>({...o})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const h=l[c];r(e.shapes,h)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(r(e.materials,this.material[l]));s.material=o}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];s.animations.push(r(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),d=a(e.images),h=a(e.shapes),m=a(e.skeletons),v=a(e.animations),_=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),d.length>0&&(n.images=d),h.length>0&&(n.shapes=h),m.length>0&&(n.skeletons=m),v.length>0&&(n.animations=v),_.length>0&&(n.nodes=_)}return n.object=s,n;function a(o){const l=[];for(const c in o){const d=o[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Qi.DEFAULT_UP=new ae(0,1,0);Qi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const wf=new ae,Kp=new ae,FO=new ae,Zp=new ae,Ax=new ae,Cx=new ae,KH=new ae,zO=new ae,VO=new ae,kO=new ae,GO=new bn,HO=new bn,jO=new bn;class wc{constructor(e=new ae,t=new ae,n=new ae){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),wf.subVectors(e,t),s.cross(wf);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){wf.subVectors(s,t),Kp.subVectors(n,t),FO.subVectors(e,t);const a=wf.dot(wf),o=wf.dot(Kp),l=wf.dot(FO),c=Kp.dot(Kp),d=Kp.dot(FO),h=a*c-o*o;if(h===0)return r.set(0,0,0),null;const m=1/h,v=(c*l-o*d)*m,_=(a*d-o*l)*m;return r.set(1-v-_,_,v)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Zp)===null?!1:Zp.x>=0&&Zp.y>=0&&Zp.x+Zp.y<=1}static getInterpolation(e,t,n,s,r,a,o,l){return this.getBarycoord(e,t,n,s,Zp)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,Zp.x),l.addScaledVector(a,Zp.y),l.addScaledVector(o,Zp.z),l)}static getInterpolatedAttribute(e,t,n,s,r,a){return GO.setScalar(0),HO.setScalar(0),jO.setScalar(0),GO.fromBufferAttribute(e,t),HO.fromBufferAttribute(e,n),jO.fromBufferAttribute(e,s),a.setScalar(0),a.addScaledVector(GO,r.x),a.addScaledVector(HO,r.y),a.addScaledVector(jO,r.z),a}static isFrontFacing(e,t,n,s){return wf.subVectors(n,t),Kp.subVectors(e,t),wf.cross(Kp).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wf.subVectors(this.c,this.b),Kp.subVectors(this.a,this.b),wf.cross(Kp).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return wc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return wc.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return wc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let a,o;Ax.subVectors(s,n),Cx.subVectors(r,n),zO.subVectors(e,n);const l=Ax.dot(zO),c=Cx.dot(zO);if(l<=0&&c<=0)return t.copy(n);VO.subVectors(e,s);const d=Ax.dot(VO),h=Cx.dot(VO);if(d>=0&&h<=d)return t.copy(s);const m=l*h-d*c;if(m<=0&&l>=0&&d<=0)return a=l/(l-d),t.copy(n).addScaledVector(Ax,a);kO.subVectors(e,r);const v=Ax.dot(kO),_=Cx.dot(kO);if(_>=0&&v<=_)return t.copy(r);const x=v*c-l*_;if(x<=0&&c>=0&&_<=0)return o=c/(c-_),t.copy(n).addScaledVector(Cx,o);const T=d*_-v*h;if(T<=0&&h-d>=0&&v-_>=0)return KH.subVectors(r,s),o=(h-d)/(h-d+(v-_)),t.copy(s).addScaledVector(KH,o);const b=1/(T+x+m);return a=x*b,o=m*b,t.copy(n).addScaledVector(Ax,a).addScaledVector(Cx,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const aK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Pg={h:0,s:0,l:0},JA={h:0,s:0,l:0};function $O(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Vt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ao){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Sn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,s=Sn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Sn.colorSpaceToWorking(this,s),this}setHSL(e,t,n,s=Sn.workingColorSpace){if(e=IF(e,1),t=Qn(t,0,1),n=Qn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=$O(a,r,e+1/3),this.g=$O(a,r,e),this.b=$O(a,r,e-1/3)}return Sn.colorSpaceToWorking(this,s),this}setStyle(e,t=ao){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ao){const n=aK[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sm(e.r),this.g=Sm(e.g),this.b=Sm(e.b),this}copyLinearToSRGB(e){return this.r=Ab(e.r),this.g=Ab(e.g),this.b=Ab(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ao){return Sn.workingToColorSpace(Il.copy(this),e),Math.round(Qn(Il.r*255,0,255))*65536+Math.round(Qn(Il.g*255,0,255))*256+Math.round(Qn(Il.b*255,0,255))}getHexString(e=ao){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Sn.workingColorSpace){Sn.workingToColorSpace(Il.copy(this),t);const n=Il.r,s=Il.g,r=Il.b,a=Math.max(n,s,r),o=Math.min(n,s,r);let l,c;const d=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=d<=.5?h/(a+o):h/(2-a-o),a){case n:l=(s-r)/h+(s<r?6:0);break;case s:l=(r-n)/h+2;break;case r:l=(n-s)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=Sn.workingColorSpace){return Sn.workingToColorSpace(Il.copy(this),t),e.r=Il.r,e.g=Il.g,e.b=Il.b,e}getStyle(e=ao){Sn.workingToColorSpace(Il.copy(this),e);const t=Il.r,n=Il.g,s=Il.b;return e!==ao?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(Pg),this.setHSL(Pg.h+e,Pg.s+t,Pg.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Pg),e.getHSL(JA);const n=W1(Pg.h,JA.h,t),s=W1(Pg.s,JA.s,t),r=W1(Pg.l,JA.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Il=new Vt;Vt.NAMES=aK;let Ibe=0;class So extends _u{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ibe++}),this.uuid=Zu(),this.name="",this.type="Material",this.blending=Dc,this.side=Nc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qv,this.blendDst=Xv,this.blendEquation=Ho,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Vt(0,0,0),this.blendAlpha=0,this.depthFunc=op,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=NE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rm,this.stencilZFail=rm,this.stencilZPass=rm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Dc&&(n.blending=this.blending),this.side!==Nc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==qv&&(n.blendSrc=this.blendSrc),this.blendDst!==Xv&&(n.blendDst=this.blendDst),this.blendEquation!==Ho&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==op&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==NE&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rm&&(n.stencilFail=this.stencilFail),this.stencilZFail!==rm&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==rm&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const o in r){const l=r[o];delete l.metadata,a.push(l)}return a}if(t){const r=s(e.textures),a=s(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Gl extends So{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Kl,this.combine=b_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cm=Fbe();function Fbe(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,s[l]=24,s[l|256]=24):(n[l]=31744,n[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;(c&8388608)===0;)c<<=1,d-=8388608;c&=-8388609,d+=947912704,r[l]=c|d}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:o}}function iu(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Qn(i,-65504,65504),cm.floatView[0]=i;const e=cm.uint32View[0],t=e>>23&511;return cm.baseTable[t]+((e&8388607)>>cm.shiftTable[t])}function D1(i){const e=i>>10;return cm.uint32View[0]=cm.mantissaTable[cm.offsetTable[e]+(i&1023)]+cm.exponentTable[e],cm.floatView[0]}class oK{static toHalfFloat(e){return iu(e)}static fromHalfFloat(e){return D1(e)}}const to=new ae,eC=new lt;let zbe=0;class os{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:zbe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=a_,this.updateRanges=[],this.gpuType=fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)eC.fromBufferAttribute(this,t),eC.applyMatrix3(e),this.setXY(t,eC.x,eC.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)to.fromBufferAttribute(this,t),to.applyMatrix3(e),this.setXYZ(t,to.x,to.y,to.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)to.fromBufferAttribute(this,t),to.applyMatrix4(e),this.setXYZ(t,to.x,to.y,to.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)to.fromBufferAttribute(this,t),to.applyNormalMatrix(e),this.setXYZ(t,to.x,to.y,to.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)to.fromBufferAttribute(this,t),to.transformDirection(e),this.setXYZ(t,to.x,to.y,to.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ec(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=bi(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ec(t,this.array)),t}setX(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ec(t,this.array)),t}setY(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ec(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ec(t,this.array)),t}setW(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array),s=bi(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array),s=bi(s,this.array),r=bi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==a_&&(e.usage=this.usage),e}}class lK extends os{constructor(e,t,n){super(new Int8Array(e),t,n)}}class cK extends os{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class uK extends os{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class dK extends os{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Uw extends os{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class fK extends os{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Bw extends os{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class M2 extends os{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=D1(this.array[e*this.itemSize]);return this.normalized&&(t=Ec(t,this.array)),t}setX(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize]=iu(t),this}getY(e){let t=D1(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ec(t,this.array)),t}setY(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+1]=iu(t),this}getZ(e){let t=D1(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ec(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+2]=iu(t),this}getW(e){let t=D1(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ec(t,this.array)),t}setW(e,t){return this.normalized&&(t=bi(t,this.array)),this.array[e*this.itemSize+3]=iu(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array)),this.array[e+0]=iu(t),this.array[e+1]=iu(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array),s=bi(s,this.array)),this.array[e+0]=iu(t),this.array[e+1]=iu(n),this.array[e+2]=iu(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array),s=bi(s,this.array),r=bi(r,this.array)),this.array[e+0]=iu(t),this.array[e+1]=iu(n),this.array[e+2]=iu(s),this.array[e+3]=iu(r),this}}class on extends os{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Vbe=0;const Pd=new an,WO=new Qi,Rx=new ae,Fu=new Xo,XT=new Xo,zo=new ae;class di extends _u{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vbe++}),this.uuid=Zu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(FF(e)?Bw:Uw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Kn().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pd.makeRotationFromQuaternion(e),this.applyMatrix4(Pd),this}rotateX(e){return Pd.makeRotationX(e),this.applyMatrix4(Pd),this}rotateY(e){return Pd.makeRotationY(e),this.applyMatrix4(Pd),this}rotateZ(e){return Pd.makeRotationZ(e),this.applyMatrix4(Pd),this}translate(e,t,n){return Pd.makeTranslation(e,t,n),this.applyMatrix4(Pd),this}scale(e,t,n){return Pd.makeScale(e,t,n),this.applyMatrix4(Pd),this}lookAt(e){return WO.lookAt(e),WO.updateMatrix(),this.applyMatrix4(WO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rx).negate(),this.translate(Rx.x,Rx.y,Rx.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new on(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];Fu.setFromBufferAttribute(r),this.morphTargetsRelative?(zo.addVectors(this.boundingBox.min,Fu.min),this.boundingBox.expandByPoint(zo),zo.addVectors(this.boundingBox.max,Fu.max),this.boundingBox.expandByPoint(zo)):(this.boundingBox.expandByPoint(Fu.min),this.boundingBox.expandByPoint(Fu.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const n=this.boundingSphere.center;if(Fu.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const o=t[r];XT.setFromBufferAttribute(o),this.morphTargetsRelative?(zo.addVectors(Fu.min,XT.min),Fu.expandByPoint(zo),zo.addVectors(Fu.max,XT.max),Fu.expandByPoint(zo)):(Fu.expandByPoint(XT.min),Fu.expandByPoint(XT.max))}Fu.getCenter(n);let s=0;for(let r=0,a=e.count;r<a;r++)zo.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(zo));if(t)for(let r=0,a=t.length;r<a;r++){const o=t[r],l=this.morphTargetsRelative;for(let c=0,d=o.count;c<d;c++)zo.fromBufferAttribute(o,c),l&&(Rx.fromBufferAttribute(e,c),zo.add(Rx)),s=Math.max(s,n.distanceToSquared(zo))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new os(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let F=0;F<n.count;F++)o[F]=new ae,l[F]=new ae;const c=new ae,d=new ae,h=new ae,m=new lt,v=new lt,_=new lt,x=new ae,T=new ae;function b(F,I,z){c.fromBufferAttribute(n,F),d.fromBufferAttribute(n,I),h.fromBufferAttribute(n,z),m.fromBufferAttribute(r,F),v.fromBufferAttribute(r,I),_.fromBufferAttribute(r,z),d.sub(c),h.sub(c),v.sub(m),_.sub(m);const H=1/(v.x*_.y-_.x*v.y);isFinite(H)&&(x.copy(d).multiplyScalar(_.y).addScaledVector(h,-v.y).multiplyScalar(H),T.copy(h).multiplyScalar(v.x).addScaledVector(d,-_.x).multiplyScalar(H),o[F].add(x),o[I].add(x),o[z].add(x),l[F].add(T),l[I].add(T),l[z].add(T))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let F=0,I=w.length;F<I;++F){const z=w[F],H=z.start,Y=z.count;for(let Z=H,se=H+Y;Z<se;Z+=3)b(e.getX(Z+0),e.getX(Z+1),e.getX(Z+2))}const M=new ae,R=new ae,N=new ae,D=new ae;function L(F){N.fromBufferAttribute(s,F),D.copy(N);const I=o[F];M.copy(I),M.sub(N.multiplyScalar(N.dot(I))).normalize(),R.crossVectors(D,I);const H=R.dot(l[F])<0?-1:1;a.setXYZW(F,M.x,M.y,M.z,H)}for(let F=0,I=w.length;F<I;++F){const z=w[F],H=z.start,Y=z.count;for(let Z=H,se=H+Y;Z<se;Z+=3)L(e.getX(Z+0)),L(e.getX(Z+1)),L(e.getX(Z+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new os(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,v=n.count;m<v;m++)n.setXYZ(m,0,0,0);const s=new ae,r=new ae,a=new ae,o=new ae,l=new ae,c=new ae,d=new ae,h=new ae;if(e)for(let m=0,v=e.count;m<v;m+=3){const _=e.getX(m+0),x=e.getX(m+1),T=e.getX(m+2);s.fromBufferAttribute(t,_),r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,T),d.subVectors(a,r),h.subVectors(s,r),d.cross(h),o.fromBufferAttribute(n,_),l.fromBufferAttribute(n,x),c.fromBufferAttribute(n,T),o.add(d),l.add(d),c.add(d),n.setXYZ(_,o.x,o.y,o.z),n.setXYZ(x,l.x,l.y,l.z),n.setXYZ(T,c.x,c.y,c.z)}else for(let m=0,v=t.count;m<v;m+=3)s.fromBufferAttribute(t,m+0),r.fromBufferAttribute(t,m+1),a.fromBufferAttribute(t,m+2),d.subVectors(a,r),h.subVectors(s,r),d.cross(h),n.setXYZ(m+0,d.x,d.y,d.z),n.setXYZ(m+1,d.x,d.y,d.z),n.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)zo.fromBufferAttribute(e,t),zo.normalize(),e.setXYZ(t,zo.x,zo.y,zo.z)}toNonIndexed(){function e(o,l){const c=o.array,d=o.itemSize,h=o.normalized,m=new c.constructor(l.length*d);let v=0,_=0;for(let x=0,T=l.length;x<T;x++){o.isInterleavedBufferAttribute?v=l[x]*o.data.stride+o.offset:v=l[x]*d;for(let b=0;b<d;b++)m[_++]=c[v++]}return new os(m,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new di,n=this.index.array,s=this.attributes;for(const o in s){const l=s[o],c=e(l,n);t.setAttribute(o,c)}const r=this.morphAttributes;for(const o in r){const l=[],c=r[o];for(let d=0,h=c.length;d<h;d++){const m=c[d],v=e(m,n);l.push(v)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,m=c.length;h<m;h++){const v=c[h];d.push(v.toJSON(e.data))}d.length>0&&(s[l]=d,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const c in s){const d=s[c];this.setAttribute(c,d.clone(t))}const r=e.morphAttributes;for(const c in r){const d=[],h=r[c];for(let m=0,v=h.length;m<v;m++)d.push(h[m].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,d=a.length;c<d;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ZH=new an,j0=new T_,tC=new co,QH=new ae,nC=new ae,iC=new ae,sC=new ae,qO=new ae,rC=new ae,JH=new ae,aC=new ae;class zs extends Qi{constructor(e=new di,t=new Gl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const o=this.morphTargetInfluences;if(r&&o){rC.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const d=o[l],h=r[l];d!==0&&(qO.fromBufferAttribute(h,e),a?rC.addScaledVector(qO,d):rC.addScaledVector(qO.sub(t),d))}t.add(rC)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),tC.copy(n.boundingSphere),tC.applyMatrix4(r),j0.copy(e.ray).recast(e.near),!(tC.containsPoint(j0.origin)===!1&&(j0.intersectSphere(tC,QH)===null||j0.origin.distanceToSquared(QH)>(e.far-e.near)**2))&&(ZH.copy(r).invert(),j0.copy(e.ray).applyMatrix4(ZH),!(n.boundingBox!==null&&j0.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,j0)))}_computeIntersections(e,t,n){let s;const r=this.geometry,a=this.material,o=r.index,l=r.attributes.position,c=r.attributes.uv,d=r.attributes.uv1,h=r.attributes.normal,m=r.groups,v=r.drawRange;if(o!==null)if(Array.isArray(a))for(let _=0,x=m.length;_<x;_++){const T=m[_],b=a[T.materialIndex],w=Math.max(T.start,v.start),M=Math.min(o.count,Math.min(T.start+T.count,v.start+v.count));for(let R=w,N=M;R<N;R+=3){const D=o.getX(R),L=o.getX(R+1),F=o.getX(R+2);s=oC(this,b,e,n,c,d,h,D,L,F),s&&(s.faceIndex=Math.floor(R/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const _=Math.max(0,v.start),x=Math.min(o.count,v.start+v.count);for(let T=_,b=x;T<b;T+=3){const w=o.getX(T),M=o.getX(T+1),R=o.getX(T+2);s=oC(this,a,e,n,c,d,h,w,M,R),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(a))for(let _=0,x=m.length;_<x;_++){const T=m[_],b=a[T.materialIndex],w=Math.max(T.start,v.start),M=Math.min(l.count,Math.min(T.start+T.count,v.start+v.count));for(let R=w,N=M;R<N;R+=3){const D=R,L=R+1,F=R+2;s=oC(this,b,e,n,c,d,h,D,L,F),s&&(s.faceIndex=Math.floor(R/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const _=Math.max(0,v.start),x=Math.min(l.count,v.start+v.count);for(let T=_,b=x;T<b;T+=3){const w=T,M=T+1,R=T+2;s=oC(this,a,e,n,c,d,h,w,M,R),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}}}function kbe(i,e,t,n,s,r,a,o){let l;if(e.side===Ts?l=n.intersectTriangle(a,r,s,!0,o):l=n.intersectTriangle(s,r,a,e.side===Nc,o),l===null)return null;aC.copy(o),aC.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(aC);return c<t.near||c>t.far?null:{distance:c,point:aC.clone(),object:i}}function oC(i,e,t,n,s,r,a,o,l,c){i.getVertexPosition(o,nC),i.getVertexPosition(l,iC),i.getVertexPosition(c,sC);const d=kbe(i,e,t,n,nC,iC,sC,JH);if(d){const h=new ae;wc.getBarycoord(JH,nC,iC,sC,h),s&&(d.uv=wc.getInterpolatedAttribute(s,o,l,c,h,new lt)),r&&(d.uv1=wc.getInterpolatedAttribute(r,o,l,c,h,new lt)),a&&(d.normal=wc.getInterpolatedAttribute(a,o,l,c,h,new ae),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const m={a:o,b:l,c,normal:new ae,materialIndex:0};wc.getNormal(nC,iC,sC,m.normal),d.face=m,d.barycoord=h}return d}class hp extends di{constructor(e=1,t=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const l=[],c=[],d=[],h=[];let m=0,v=0;_("z","y","x",-1,-1,n,t,e,a,r,0),_("z","y","x",1,-1,n,t,-e,a,r,1),_("x","z","y",1,1,e,n,t,s,a,2),_("x","z","y",1,-1,e,n,-t,s,a,3),_("x","y","z",1,-1,e,t,n,s,r,4),_("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(l),this.setAttribute("position",new on(c,3)),this.setAttribute("normal",new on(d,3)),this.setAttribute("uv",new on(h,2));function _(x,T,b,w,M,R,N,D,L,F,I){const z=R/L,H=N/F,Y=R/2,Z=N/2,se=D/2,oe=L+1,G=F+1;let K=0,$=0;const ce=new ae;for(let q=0;q<G;q++){const ue=q*H-Z;for(let Ae=0;Ae<oe;Ae++){const Ne=Ae*z-Y;ce[x]=Ne*w,ce[T]=ue*M,ce[b]=se,c.push(ce.x,ce.y,ce.z),ce[x]=0,ce[T]=0,ce[b]=D>0?1:-1,d.push(ce.x,ce.y,ce.z),h.push(Ae/L),h.push(1-q/F),K+=1}}for(let q=0;q<F;q++)for(let ue=0;ue<L;ue++){const Ae=m+ue+oe*q,Ne=m+ue+oe*(q+1),we=m+(ue+1)+oe*(q+1),pt=m+(ue+1)+oe*q;l.push(Ae,Ne,pt),l.push(Ne,we,pt),$+=6}o.addGroup(v,$,I),v+=$,m+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wb(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function vc(i){const e={};for(let t=0;t<i.length;t++){const n=Wb(i[t]);for(const s in n)e[s]=n[s]}return e}function Gbe(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function hK(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Sn.workingColorSpace}const pK={clone:Wb,merge:vc};var Hbe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jbe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qd extends So{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Hbe,this.fragmentShader=jbe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wb(e.uniforms),this.uniformsGroups=Gbe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?t.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[s]={type:"m4",value:a.toArray()}:t.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class DS extends Qi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an,this.coordinateSystem=$o,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Og=new ae,e6=new lt,t6=new lt;class la extends DS{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=o_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Uv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return o_*2*Math.atan(Math.tan(Uv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Og.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Og.x,Og.y).multiplyScalar(-e/Og.z),Og.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Og.x,Og.y).multiplyScalar(-e/Og.z)}getViewSize(e,t){return this.getViewBounds(e,e6,t6),t.subVectors(t6,e6)}setViewOffset(e,t,n,s,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Uv*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;r+=a.offsetX*s/l,t-=a.offsetY*n/c,s*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Nx=-90,Dx=1;class A2 extends Qi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new la(Nx,Dx,e,t);s.layers=this.layers,this.add(s);const r=new la(Nx,Dx,e,t);r.layers=this.layers,this.add(r);const a=new la(Nx,Dx,e,t);a.layers=this.layers,this.add(a);const o=new la(Nx,Dx,e,t);o.layers=this.layers,this.add(o);const l=new la(Nx,Dx,e,t);l.layers=this.layers,this.add(l);const c=new la(Nx,Dx,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,a,o,l]=t;for(const c of t)this.remove(c);if(e===$o)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===id)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,l,c,d]=this.children,h=e.getRenderTarget(),m=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const x=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,a),e.setRenderTarget(n,2,s),e.render(t,o),e.setRenderTarget(n,3,s),e.render(t,l),e.setRenderTarget(n,4,s),e.render(t,c),n.texture.generateMipmaps=x,e.setRenderTarget(n,5,s),e.render(t,d),e.setRenderTarget(h,m,v),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class Gm extends Es{constructor(e=[],t=gu,n,s,r,a,o,l,c,d){super(e,t,n,s,r,a,o,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class C2 extends jf{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new Gm(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new hp(5,5,5),r=new Qd({name:"CubemapFromEquirect",uniforms:Wb(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ts,blending:ql});r.uniforms.tEquirect.value=t;const a=new zs(s,r),o=t.minFilter;return t.minFilter===jo&&(t.minFilter=Zi),new A2(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,s);e.setRenderTarget(r)}}class pm extends Qi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $be={type:"move"};class Cb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new pm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new pm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new pm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const x of e.hand.values()){const T=t.getJointPose(x,n),b=this._getHandJoint(c,x);T!==null&&(b.matrix.fromArray(T.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=T.radius),b.visible=T!==null}const d=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],m=d.position.distanceTo(h.position),v=.02,_=.005;c.inputState.pinching&&m>v+_?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=v-_&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent($be)))}return o!==null&&(o.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new pm;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Iw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Vt(e),this.density=t}clone(){return new Iw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fw{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Vt(e),this.near=t,this.far=n}clone(){return new Fw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let E_=class extends Qi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Kl,this.environmentIntensity=1,this.environmentRotation=new Kl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class PS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=a_,this.updateRanges=[],this.version=0,this.uuid=Zu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const yc=new ae;class Dm{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.applyMatrix4(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.applyNormalMatrix(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yc.fromBufferAttribute(this,t),yc.transformDirection(e),this.setXYZ(t,yc.x,yc.y,yc.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ec(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=bi(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=bi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ec(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ec(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ec(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ec(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array),s=bi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bi(t,this.array),n=bi(n,this.array),s=bi(s,this.array),r=bi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new os(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Dm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zw extends So{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Px;const YT=new ae,Ox=new ae,Lx=new ae,Ux=new lt,KT=new lt,mK=new an,lC=new ae,ZT=new ae,cC=new ae,n6=new lt,XO=new lt,i6=new lt;class VF extends Qi{constructor(e=new zw){if(super(),this.isSprite=!0,this.type="Sprite",Px===void 0){Px=new di;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new PS(t,5);Px.setIndex([0,1,2,0,2,3]),Px.setAttribute("position",new Dm(n,3,0,!1)),Px.setAttribute("uv",new Dm(n,2,3,!1))}this.geometry=Px,this.material=e,this.center=new lt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ox.setFromMatrixScale(this.matrixWorld),mK.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Lx.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ox.multiplyScalar(-Lx.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;uC(lC.set(-.5,-.5,0),Lx,a,Ox,s,r),uC(ZT.set(.5,-.5,0),Lx,a,Ox,s,r),uC(cC.set(.5,.5,0),Lx,a,Ox,s,r),n6.set(0,0),XO.set(1,0),i6.set(1,1);let o=e.ray.intersectTriangle(lC,ZT,cC,!1,YT);if(o===null&&(uC(ZT.set(-.5,.5,0),Lx,a,Ox,s,r),XO.set(0,1),o=e.ray.intersectTriangle(lC,cC,ZT,!1,YT),o===null))return;const l=e.ray.origin.distanceTo(YT);l<e.near||l>e.far||t.push({distance:l,point:YT.clone(),uv:wc.getInterpolation(YT,lC,ZT,cC,n6,XO,i6,new lt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function uC(i,e,t,n,s,r){Ux.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(KT.x=r*Ux.x-s*Ux.y,KT.y=s*Ux.x+r*Ux.y):KT.copy(Ux),i.copy(e),i.x+=KT.x,i.y+=KT.y,i.applyMatrix4(mK)}const dC=new ae,s6=new ae;class kF extends Qi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){dC.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(dC);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dC.setFromMatrixPosition(e.matrixWorld),s6.setFromMatrixPosition(this.matrixWorld);const n=dC.distanceTo(s6)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let a=t[s].distance;if(t[s].object.visible&&(a-=a*t[s].hysteresis),n>=a)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const r6=new ae,a6=new bn,o6=new bn,Wbe=new ae,l6=new an,fC=new ae,YO=new co,c6=new an,KO=new T_;class GF extends zs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=pN,this.bindMatrix=new an,this.bindMatrixInverse=new an,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Xo),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,fC),this.boundingBox.expandByPoint(fC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new co),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,fC),this.boundingSphere.expandByPoint(fC)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),YO.copy(this.boundingSphere),YO.applyMatrix4(s),e.ray.intersectsSphere(YO)!==!1&&(c6.copy(s).invert(),KO.copy(e.ray).applyMatrix4(c6),!(this.boundingBox!==null&&KO.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,KO)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new bn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===pN?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===mF?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;a6.fromBufferAttribute(s.attributes.skinIndex,e),o6.fromBufferAttribute(s.attributes.skinWeight,e),r6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=o6.getComponent(r);if(a!==0){const o=a6.getComponent(r);l6.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Wbe.copy(r6).applyMatrix4(l6),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class R2 extends Qi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yd extends Es{constructor(e=null,t=1,n=1,s,r,a,o,l,c=Fs,d=Fs,h,m){super(null,a,o,l,c,d,s,r,h,m),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const u6=new an,qbe=new an;class Vw{constructor(e=[],t=[]){this.uuid=Zu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new an)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new an;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const o=e[r]?e[r].matrixWorld:qbe;u6.multiplyMatrices(o,t[r]),u6.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Vw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Yd(t,e,e,nr,fr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new R2),this.bones.push(a),this.boneInverses.push(new an().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const a=t[s];e.bones.push(a.uuid);const o=n[s];e.boneInverses.push(o.toArray())}return e}}class Qu extends os{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bx=new an,d6=new an,hC=[],f6=new Xo,Xbe=new an,QT=new zs,JT=new co;class HF extends zs{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qu(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,Xbe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Xo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Bx),f6.copy(e.boundingBox).applyMatrix4(Bx),this.boundingBox.union(f6)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new co),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Bx),JT.copy(e.boundingSphere).applyMatrix4(Bx),this.boundingSphere.union(JT)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=e*r+1;for(let o=0;o<n.length;o++)n[o]=s[a+o]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(QT.geometry=this.geometry,QT.material=this.material,QT.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),JT.copy(this.boundingSphere),JT.applyMatrix4(n),e.ray.intersectsSphere(JT)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Bx),d6.multiplyMatrices(n,Bx),QT.matrixWorld=d6,QT.raycast(e,hC);for(let a=0,o=hC.length;a<o;a++){const l=hC[a];l.instanceId=r,l.object=this,t.push(l)}hC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Yd(new Float32Array(s*this.count),s,this.count,qy,fr));const r=this.morphTexture.source.data.data;let a=0;for(let c=0;c<n.length;c++)a+=n[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=s*e;r[l]=o,r.set(n,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ZO=new ae,Ybe=new ae,Kbe=new Kn;let Df=class{constructor(e=new ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=ZO.subVectors(n,t).cross(Ybe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ZO),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Kbe.getNormalMatrix(e),s=this.coplanarPoint(ZO).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const $0=new co,Zbe=new lt(.5,.5),pC=new ae;class Ky{constructor(e=new Df,t=new Df,n=new Df,s=new Df,r=new Df,a=new Df){this.planes=[e,t,n,s,r,a]}set(e,t,n,s,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=$o,n=!1){const s=this.planes,r=e.elements,a=r[0],o=r[1],l=r[2],c=r[3],d=r[4],h=r[5],m=r[6],v=r[7],_=r[8],x=r[9],T=r[10],b=r[11],w=r[12],M=r[13],R=r[14],N=r[15];if(s[0].setComponents(c-a,v-d,b-_,N-w).normalize(),s[1].setComponents(c+a,v+d,b+_,N+w).normalize(),s[2].setComponents(c+o,v+h,b+x,N+M).normalize(),s[3].setComponents(c-o,v-h,b-x,N-M).normalize(),n)s[4].setComponents(l,m,T,R).normalize(),s[5].setComponents(c-l,v-m,b-T,N-R).normalize();else if(s[4].setComponents(c-l,v-m,b-T,N-R).normalize(),t===$o)s[5].setComponents(c+l,v+m,b+T,N+R).normalize();else if(t===id)s[5].setComponents(l,m,T,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),$0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),$0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($0)}intersectsSprite(e){$0.center.set(0,0,0);const t=Zbe.distanceTo(e.center);return $0.radius=.7071067811865476+t,$0.applyMatrix4(e.matrixWorld),this.intersectsSphere($0)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(pC.x=s.normal.x>0?e.max.x:e.min.x,pC.y=s.normal.y>0?e.max.y:e.min.y,pC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(pC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Ch=new an,Rh=new Ky;class OS{constructor(){this.coordinateSystem=$o}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Ch.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Rh.setFromProjectionMatrix(Ch,s.coordinateSystem,s.reversedDepth),Rh.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Ch.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Rh.setFromProjectionMatrix(Ch,s.coordinateSystem,s.reversedDepth),Rh.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Ch.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Rh.setFromProjectionMatrix(Ch,s.coordinateSystem,s.reversedDepth),Rh.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Ch.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Rh.setFromProjectionMatrix(Ch,s.coordinateSystem,s.reversedDepth),Rh.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Ch.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Rh.setFromProjectionMatrix(Ch,s.coordinateSystem,s.reversedDepth),Rh.containsPoint(e))return!0}return!1}clone(){return new OS}}function QO(i,e){return i-e}function Qbe(i,e){return i.z-e.z}function Jbe(i,e){return e.z-i.z}class eSe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=s}reset(){this.list.length=0,this.index=0}}const tu=new an,tSe=new Vt(1,1,1),h6=new Ky,nSe=new OS,mC=new Xo,W0=new co,e1=new ae,p6=new ae,iSe=new ae,JO=new eSe,Fl=new zs,gC=[];function sSe(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)e.setComponent(r+t,a,i.getComponent(r,a))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function q0(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class jF extends zs{constructor(e,t,n=t*2,s){super(new di,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Yd(t,e,e,nr,fr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Yd(t,e,e,km,Rs);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Yd(t,e,e,nr,fr);n.colorSpace=Sn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const a=e.getAttribute(r),{array:o,itemSize:l,normalized:c}=a,d=new o.constructor(n*l),h=new os(d,l,c);t.setAttribute(r,h)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new os(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),r=t.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xo);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,tu),this.getBoundingBoxAt(r,mC).applyMatrix4(tu),e.union(mC)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new co);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,tu),this.getBoundingSphereAt(r,W0).applyMatrix4(tu),e.union(W0)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(QO),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;tu.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(tSe.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(QO),l=this._availableGeometryIds.shift(),r[l]=s):(l=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(l,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(s&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const d in n.attributes){const h=t.getAttribute(d),m=n.getAttribute(d);sSe(h,m,l);const v=h.itemSize;for(let _=h.count,x=c;_<x;_++){const T=l+_;for(let b=0;b<v;b++)m.setComponent(T,b,0)}m.needsUpdate=!0,m.addUpdateRange(l*v,c*v)}if(s){const d=o.indexStart,h=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let m=0;m<a.count;m++)r.setX(d+m,l+a.getX(m));for(let m=a.count,v=h;m<v;m++)r.setX(d+m,l);r.needsUpdate=!0,r.addUpdateRange(d,o.reservedIndexCount)}return o.start=s?o.indexStart:o.vertexStart,o.count=s?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((a,o)=>o).sort((a,o)=>n[a].vertexStart-n[o].vertexStart),r=this.geometry;for(let a=0,o=n.length;a<o;a++){const l=s[a],c=n[l];if(c.active!==!1){if(r.index!==null){if(c.indexStart!==t){const{indexStart:d,vertexStart:h,reservedIndexCount:m}=c,v=r.index,_=v.array,x=e-h;for(let T=d;T<d+m;T++)_[T]=_[T]+x;v.array.copyWithin(t,d,d+m),v.addUpdateRange(t,m),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:d,reservedVertexCount:h}=c,m=r.attributes;for(const v in m){const _=m[v],{array:x,itemSize:T}=_;x.copyWithin(e*T,d*T,(d+h)*T),_.addUpdateRange(e*T,h*T)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=r.index?c.indexStart:c.vertexStart,this._nextIndexStart=r.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new Xo,a=n.index,o=n.attributes.position;for(let l=s.start,c=s.start+s.count;l<c;l++){let d=l;a&&(d=a.getX(d)),r.expandByPoint(e1.fromBufferAttribute(o,d))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new co;this.getBoundingBoxAt(e,mC),mC.getCenter(r.center);const a=n.index,o=n.attributes.position;let l=0;for(let c=s.start,d=s.start+s.count;c<d;c++){let h=c;a&&(h=a.getX(h)),e1.fromBufferAttribute(o,h),l=Math.max(l,r.center.distanceToSquared(e1))}r.radius=Math.sqrt(l),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(QO);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);q0(this._multiDrawCounts,s),q0(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),q0(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),q0(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),q0(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new di,this._initializeGeometry(r));const a=this.geometry;r.index&&q0(r.index.array,a.index.array);for(const o in r.attributes)q0(r.attributes[o].array,a.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;Fl.material=this.material,Fl.geometry.index=a.index,Fl.geometry.attributes=a.attributes,Fl.geometry.boundingBox===null&&(Fl.geometry.boundingBox=new Xo),Fl.geometry.boundingSphere===null&&(Fl.geometry.boundingSphere=new co);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const c=n[o].geometryIndex,d=s[c];Fl.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,Fl.matrixWorld).premultiply(r),this.getBoundingBoxAt(c,Fl.geometry.boundingBox),this.getBoundingSphereAt(c,Fl.geometry.boundingSphere),Fl.raycast(e,gC);for(let h=0,m=gC.length;h<m;h++){const v=gC[h];v.object=this,v.batchId=o,t.push(v)}gC.length=0}Fl.material=null,Fl.geometry.index=null,Fl.geometry.attributes={},Fl.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,d=this._multiDrawCounts,h=this._geometryInfo,m=this.perObjectFrustumCulled,v=this._indirectTexture,_=v.image.data,x=n.isArrayCamera?nSe:h6;m&&!n.isArrayCamera&&(tu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),h6.setFromProjectionMatrix(tu,n.coordinateSystem,n.reversedDepth));let T=0;if(this.sortObjects){tu.copy(this.matrixWorld).invert(),e1.setFromMatrixPosition(n.matrixWorld).applyMatrix4(tu),p6.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(tu);for(let M=0,R=l.length;M<R;M++)if(l[M].visible&&l[M].active){const N=l[M].geometryIndex;this.getMatrixAt(M,tu),this.getBoundingSphereAt(N,W0).applyMatrix4(tu);let D=!1;if(m&&(D=!x.intersectsSphere(W0,n)),!D){const L=h[N],F=iSe.subVectors(W0.center,e1).dot(p6);JO.push(L.start,L.count,F,M)}}const b=JO.list,w=this.customSort;w===null?b.sort(r.transparent?Jbe:Qbe):w.call(this,b,n);for(let M=0,R=b.length;M<R;M++){const N=b[M];c[T]=N.start*o,d[T]=N.count,_[T]=N.index,T++}JO.reset()}else for(let b=0,w=l.length;b<w;b++)if(l[b].visible&&l[b].active){const M=l[b].geometryIndex;let R=!1;if(m&&(this.getMatrixAt(b,tu),this.getBoundingSphereAt(M,W0).applyMatrix4(tu),R=!x.intersectsSphere(W0,n)),!R){const N=h[M];c[T]=N.start*o,d[T]=N.count,_[T]=b,T++}}v.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,r,a){this.onBeforeRender(e,null,s,r,a)}}class Sl extends So{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const gN=new ae,yN=new ae,m6=new an,t1=new T_,yC=new co,eL=new ae,g6=new ae;class Pm extends Qi{constructor(e=new di,t=new Sl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)gN.fromBufferAttribute(t,s-1),yN.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=gN.distanceTo(yN);e.setAttribute("lineDistance",new on(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),yC.copy(n.boundingSphere),yC.applyMatrix4(s),yC.radius+=r,e.ray.intersectsSphere(yC)===!1)return;m6.copy(s).invert(),t1.copy(e.ray).applyMatrix4(m6);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,d=n.index,m=n.attributes.position;if(d!==null){const v=Math.max(0,a.start),_=Math.min(d.count,a.start+a.count);for(let x=v,T=_-1;x<T;x+=c){const b=d.getX(x),w=d.getX(x+1),M=vC(this,e,t1,l,b,w,x);M&&t.push(M)}if(this.isLineLoop){const x=d.getX(_-1),T=d.getX(v),b=vC(this,e,t1,l,x,T,_-1);b&&t.push(b)}}else{const v=Math.max(0,a.start),_=Math.min(m.count,a.start+a.count);for(let x=v,T=_-1;x<T;x+=c){const b=vC(this,e,t1,l,x,x+1,x);b&&t.push(b)}if(this.isLineLoop){const x=vC(this,e,t1,l,_-1,v,_-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function vC(i,e,t,n,s,r,a){const o=i.geometry.attributes.position;if(gN.fromBufferAttribute(o,s),yN.fromBufferAttribute(o,r),t.distanceSqToSegment(gN,yN,eL,g6)>n)return;eL.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(eL);if(!(c<e.near||c>e.far))return{distance:c,point:g6.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const y6=new ae,v6=new ae;class Kf extends Pm{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)y6.fromBufferAttribute(t,s),v6.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+y6.distanceTo(v6);e.setAttribute("lineDistance",new on(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $F extends Pm{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class kw extends So{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _6=new an,j3=new T_,_C=new co,xC=new ae;class WF extends Qi{constructor(e=new di,t=new kw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),_C.copy(n.boundingSphere),_C.applyMatrix4(s),_C.radius+=r,e.ray.intersectsSphere(_C)===!1)return;_6.copy(s).invert(),j3.copy(e.ray).applyMatrix4(_6);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,h=n.attributes.position;if(c!==null){const m=Math.max(0,a.start),v=Math.min(c.count,a.start+a.count);for(let _=m,x=v;_<x;_++){const T=c.getX(_);xC.fromBufferAttribute(h,T),x6(xC,T,l,s,e,t,this)}}else{const m=Math.max(0,a.start),v=Math.min(h.count,a.start+a.count);for(let _=m,x=v;_<x;_++)xC.fromBufferAttribute(h,_),x6(xC,_,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function x6(i,e,t,n,s,r,a){const o=j3.distanceSqToPoint(i);if(o<t){const l=new ae;j3.closestPointToPoint(i,l),l.applyMatrix4(n);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class qF extends Es{constructor(e,t,n,s,r=Zi,a=Zi,o,l,c){super(e,t,n,s,r,a,o,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const d=this;function h(){d.needsUpdate=!0,d._requestVideoFrameCallbackId=e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(h))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class gK extends qF{constructor(e,t,n,s,r,a,o,l){super({},e,t,n,s,r,a,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class N2 extends Es{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Fs,this.minFilter=Fs,this.generateMipmaps=!1,this.needsUpdate=!0}}class Gw extends Es{constructor(e,t,n,s,r,a,o,l,c,d,h,m){super(null,a,o,l,c,d,s,r,h,m),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yK extends Gw{constructor(e,t,n,s,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=vl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vK extends Gw{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,gu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class _K extends Es{constructor(e,t,n,s,r,a,o,l,c){super(e,t,n,s,r,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Uc extends Es{constructor(e,t,n=Rs,s,r,a,o=Fs,l=Fs,c,d=Oc,h=1){if(d!==Oc&&d!==Lc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:h};super(m,s,r,a,o,l,d,n,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new hm(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class D2 extends Es{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Hw extends di{constructor(e=1,t=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const a=[],o=[],l=[],c=[],d=t/2,h=Math.PI/2*e,m=t,v=2*h+m,_=n*2+r,x=s+1,T=new ae,b=new ae;for(let w=0;w<=_;w++){let M=0,R=0,N=0,D=0;if(w<=n){const I=w/n,z=I*Math.PI/2;R=-d-e*Math.cos(z),N=e*Math.sin(z),D=-e*Math.cos(z),M=I*h}else if(w<=n+r){const I=(w-n)/r;R=-d+I*t,N=e,D=0,M=h+I*m}else{const I=(w-n-r)/n,z=I*Math.PI/2;R=d+e*Math.sin(z),N=e*Math.cos(z),D=e*Math.sin(z),M=h+m+I*h}const L=Math.max(0,Math.min(1,M/v));let F=0;w===0?F=.5/s:w===_&&(F=-.5/s);for(let I=0;I<=s;I++){const z=I/s,H=z*Math.PI*2,Y=Math.sin(H),Z=Math.cos(H);b.x=-N*Z,b.y=R,b.z=N*Y,o.push(b.x,b.y,b.z),T.set(-N*Z,D,N*Y),T.normalize(),l.push(T.x,T.y,T.z),c.push(z+F,L)}if(w>0){const I=(w-1)*x;for(let z=0;z<s;z++){const H=I+z,Y=I+z+1,Z=w*x+z,se=w*x+z+1;a.push(H,Y,Z),a.push(Y,se,Z)}}}this.setIndex(a),this.setAttribute("position",new on(o,3)),this.setAttribute("normal",new on(l,3)),this.setAttribute("uv",new on(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hw(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class jw extends di{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],a=[],o=[],l=[],c=new ae,d=new lt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,m=3;h<=t;h++,m+=3){const v=n+h/t*s;c.x=e*Math.cos(v),c.y=e*Math.sin(v),a.push(c.x,c.y,c.z),o.push(0,0,1),d.x=(a[m]/e+1)/2,d.y=(a[m+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)r.push(h,h+1,0);this.setIndex(r),this.setAttribute("position",new on(a,3)),this.setAttribute("normal",new on(o,3)),this.setAttribute("uv",new on(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class w_ extends di{constructor(e=1,t=1,n=1,s=32,r=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:l};const c=this;s=Math.floor(s),r=Math.floor(r);const d=[],h=[],m=[],v=[];let _=0;const x=[],T=n/2;let b=0;w(),a===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(d),this.setAttribute("position",new on(h,3)),this.setAttribute("normal",new on(m,3)),this.setAttribute("uv",new on(v,2));function w(){const R=new ae,N=new ae;let D=0;const L=(t-e)/n;for(let F=0;F<=r;F++){const I=[],z=F/r,H=z*(t-e)+e;for(let Y=0;Y<=s;Y++){const Z=Y/s,se=Z*l+o,oe=Math.sin(se),G=Math.cos(se);N.x=H*oe,N.y=-z*n+T,N.z=H*G,h.push(N.x,N.y,N.z),R.set(oe,L,G).normalize(),m.push(R.x,R.y,R.z),v.push(Z,1-z),I.push(_++)}x.push(I)}for(let F=0;F<s;F++)for(let I=0;I<r;I++){const z=x[I][F],H=x[I+1][F],Y=x[I+1][F+1],Z=x[I][F+1];(e>0||I!==0)&&(d.push(z,H,Z),D+=3),(t>0||I!==r-1)&&(d.push(H,Y,Z),D+=3)}c.addGroup(b,D,0),b+=D}function M(R){const N=_,D=new lt,L=new ae;let F=0;const I=R===!0?e:t,z=R===!0?1:-1;for(let Y=1;Y<=s;Y++)h.push(0,T*z,0),m.push(0,z,0),v.push(.5,.5),_++;const H=_;for(let Y=0;Y<=s;Y++){const se=Y/s*l+o,oe=Math.cos(se),G=Math.sin(se);L.x=I*G,L.y=T*z,L.z=I*oe,h.push(L.x,L.y,L.z),m.push(0,z,0),D.x=oe*.5+.5,D.y=G*.5*z+.5,v.push(D.x,D.y),_++}for(let Y=0;Y<s;Y++){const Z=N+Y,se=H+Y;R===!0?d.push(se,se+1,Z):d.push(se+1,se,Z),F+=3}c.addGroup(b,F,R===!0?1:2),b+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class LS extends w_{constructor(e=1,t=1,n=32,s=1,r=!1,a=0,o=Math.PI*2){super(0,e,t,n,s,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:o}}static fromJSON(e){return new LS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hm extends di{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],a=[];o(s),c(n),d(),this.setAttribute("position",new on(r,3)),this.setAttribute("normal",new on(r.slice(),3)),this.setAttribute("uv",new on(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function o(w){const M=new ae,R=new ae,N=new ae;for(let D=0;D<t.length;D+=3)v(t[D+0],M),v(t[D+1],R),v(t[D+2],N),l(M,R,N,w)}function l(w,M,R,N){const D=N+1,L=[];for(let F=0;F<=D;F++){L[F]=[];const I=w.clone().lerp(R,F/D),z=M.clone().lerp(R,F/D),H=D-F;for(let Y=0;Y<=H;Y++)Y===0&&F===D?L[F][Y]=I:L[F][Y]=I.clone().lerp(z,Y/H)}for(let F=0;F<D;F++)for(let I=0;I<2*(D-F)-1;I++){const z=Math.floor(I/2);I%2===0?(m(L[F][z+1]),m(L[F+1][z]),m(L[F][z])):(m(L[F][z+1]),m(L[F+1][z+1]),m(L[F+1][z]))}}function c(w){const M=new ae;for(let R=0;R<r.length;R+=3)M.x=r[R+0],M.y=r[R+1],M.z=r[R+2],M.normalize().multiplyScalar(w),r[R+0]=M.x,r[R+1]=M.y,r[R+2]=M.z}function d(){const w=new ae;for(let M=0;M<r.length;M+=3){w.x=r[M+0],w.y=r[M+1],w.z=r[M+2];const R=T(w)/2/Math.PI+.5,N=b(w)/Math.PI+.5;a.push(R,1-N)}_(),h()}function h(){for(let w=0;w<a.length;w+=6){const M=a[w+0],R=a[w+2],N=a[w+4],D=Math.max(M,R,N),L=Math.min(M,R,N);D>.9&&L<.1&&(M<.2&&(a[w+0]+=1),R<.2&&(a[w+2]+=1),N<.2&&(a[w+4]+=1))}}function m(w){r.push(w.x,w.y,w.z)}function v(w,M){const R=w*3;M.x=e[R+0],M.y=e[R+1],M.z=e[R+2]}function _(){const w=new ae,M=new ae,R=new ae,N=new ae,D=new lt,L=new lt,F=new lt;for(let I=0,z=0;I<r.length;I+=9,z+=6){w.set(r[I+0],r[I+1],r[I+2]),M.set(r[I+3],r[I+4],r[I+5]),R.set(r[I+6],r[I+7],r[I+8]),D.set(a[z+0],a[z+1]),L.set(a[z+2],a[z+3]),F.set(a[z+4],a[z+5]),N.copy(w).add(M).add(R).divideScalar(3);const H=T(N);x(D,z+0,w,H),x(L,z+2,M,H),x(F,z+4,R,H)}}function x(w,M,R,N){N<0&&w.x===1&&(a[M]=w.x-1),R.x===0&&R.z===0&&(a[M]=N/2/Math.PI+.5)}function T(w){return Math.atan2(w.z,-w.x)}function b(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hm(e.vertices,e.indices,e.radius,e.details)}}class $w extends Hm{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $w(e.radius,e.detail)}}const bC=new ae,SC=new ae,tL=new ae,TC=new wc;class XF extends di{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Uv*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],d=["a","b","c"],h=new Array(3),m={},v=[];for(let _=0;_<l;_+=3){a?(c[0]=a.getX(_),c[1]=a.getX(_+1),c[2]=a.getX(_+2)):(c[0]=_,c[1]=_+1,c[2]=_+2);const{a:x,b:T,c:b}=TC;if(x.fromBufferAttribute(o,c[0]),T.fromBufferAttribute(o,c[1]),b.fromBufferAttribute(o,c[2]),TC.getNormal(tL),h[0]=`${Math.round(x.x*s)},${Math.round(x.y*s)},${Math.round(x.z*s)}`,h[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,h[2]=`${Math.round(b.x*s)},${Math.round(b.y*s)},${Math.round(b.z*s)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let w=0;w<3;w++){const M=(w+1)%3,R=h[w],N=h[M],D=TC[d[w]],L=TC[d[M]],F=`${R}_${N}`,I=`${N}_${R}`;I in m&&m[I]?(tL.dot(m[I].normal)<=r&&(v.push(D.x,D.y,D.z),v.push(L.x,L.y,L.z)),m[I]=null):F in m||(m[F]={index0:c[w],index1:c[M],normal:tL.clone()})}}for(const _ in m)if(m[_]){const{index0:x,index1:T}=m[_];bC.fromBufferAttribute(o,x),SC.fromBufferAttribute(o,T),v.push(bC.x,bC.y,bC.z),v.push(SC.x,SC.y,SC.z)}this.setAttribute("position",new on(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class af{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let o=0,l=r-1,c;for(;o<=l;)if(s=Math.floor(o+(l-o)/2),c=n[s]-a,c<0)o=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,n[s]===a)return s/(r-1);const d=n[s],m=n[s+1]-d,v=(a-d)/m;return(s+v)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),l=t||(a.isVector2?new lt:new ae);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new ae,s=[],r=[],a=[],o=new ae,l=new an;for(let v=0;v<=e;v++){const _=v/e;s[v]=this.getTangentAt(_,new ae)}r[0]=new ae,a[0]=new ae;let c=Number.MAX_VALUE;const d=Math.abs(s[0].x),h=Math.abs(s[0].y),m=Math.abs(s[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),m<=c&&n.set(0,0,1),o.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let v=1;v<=e;v++){if(r[v]=r[v-1].clone(),a[v]=a[v-1].clone(),o.crossVectors(s[v-1],s[v]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(Qn(s[v-1].dot(s[v]),-1,1));r[v].applyMatrix4(l.makeRotationAxis(o,_))}a[v].crossVectors(s[v],r[v])}if(t===!0){let v=Math.acos(Qn(r[0].dot(r[e]),-1,1));v/=e,s[0].dot(o.crossVectors(r[0],r[e]))>0&&(v=-v);for(let _=1;_<=e;_++)r[_].applyMatrix4(l.makeRotationAxis(s[_],v*_)),a[_].crossVectors(s[_],r[_])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ww extends af{constructor(e=0,t=0,n=1,s=1,r=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new lt){const n=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const o=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),m=l-this.aX,v=c-this.aY;l=m*d-v*h+this.aX,c=m*h+v*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class YF extends Ww{constructor(e,t,n,s,r,a){super(e,t,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function KF(){let i=0,e=0,t=0,n=0;function s(r,a,o,l){i=r,e=o,t=-3*r+3*a-2*o-l,n=2*r-2*a+o+l}return{initCatmullRom:function(r,a,o,l,c){s(a,o,c*(o-r),c*(l-a))},initNonuniformCatmullRom:function(r,a,o,l,c,d,h){let m=(a-r)/c-(o-r)/(c+d)+(o-a)/d,v=(o-a)/d-(l-a)/(d+h)+(l-o)/h;m*=d,v*=d,s(a,o,m,v)},calc:function(r){const a=r*r,o=a*r;return i+e*r+t*a+n*o}}}const EC=new ae,nL=new KF,iL=new KF,sL=new KF;class ZF extends af{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new ae){const n=t,s=this.points,r=s.length,a=(r-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:l===0&&o===r-1&&(o=r-2,l=1);let c,d;this.closed||o>0?c=s[(o-1)%r]:(EC.subVectors(s[0],s[1]).add(s[0]),c=EC);const h=s[o%r],m=s[(o+1)%r];if(this.closed||o+2<r?d=s[(o+2)%r]:(EC.subVectors(s[r-1],s[r-2]).add(s[r-1]),d=EC),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let _=Math.pow(c.distanceToSquared(h),v),x=Math.pow(h.distanceToSquared(m),v),T=Math.pow(m.distanceToSquared(d),v);x<1e-4&&(x=1),_<1e-4&&(_=x),T<1e-4&&(T=x),nL.initNonuniformCatmullRom(c.x,h.x,m.x,d.x,_,x,T),iL.initNonuniformCatmullRom(c.y,h.y,m.y,d.y,_,x,T),sL.initNonuniformCatmullRom(c.z,h.z,m.z,d.z,_,x,T)}else this.curveType==="catmullrom"&&(nL.initCatmullRom(c.x,h.x,m.x,d.x,this.tension),iL.initCatmullRom(c.y,h.y,m.y,d.y,this.tension),sL.initCatmullRom(c.z,h.z,m.z,d.z,this.tension));return n.set(nL.calc(l),iL.calc(l),sL.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new ae().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function b6(i,e,t,n,s){const r=(n-e)*.5,a=(s-t)*.5,o=i*i,l=i*o;return(2*t-2*n+r+a)*l+(-3*t+3*n-2*r-a)*o+r*i+t}function rSe(i,e){const t=1-i;return t*t*e}function aSe(i,e){return 2*(1-i)*i*e}function oSe(i,e){return i*i*e}function q1(i,e,t,n){return rSe(i,e)+aSe(i,t)+oSe(i,n)}function lSe(i,e){const t=1-i;return t*t*t*e}function cSe(i,e){const t=1-i;return 3*t*t*i*e}function uSe(i,e){return 3*(1-i)*i*i*e}function dSe(i,e){return i*i*i*e}function X1(i,e,t,n,s){return lSe(i,e)+cSe(i,t)+uSe(i,n)+dSe(i,s)}class P2 extends af{constructor(e=new lt,t=new lt,n=new lt,s=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new lt){const n=t,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(X1(e,s.x,r.x,a.x,o.x),X1(e,s.y,r.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QF extends af{constructor(e=new ae,t=new ae,n=new ae,s=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new ae){const n=t,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(X1(e,s.x,r.x,a.x,o.x),X1(e,s.y,r.y,a.y,o.y),X1(e,s.z,r.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class O2 extends af{constructor(e=new lt,t=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new lt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new lt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JF extends af{constructor(e=new ae,t=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ae){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ae){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L2 extends af{constructor(e=new lt,t=new lt,n=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new lt){const n=t,s=this.v0,r=this.v1,a=this.v2;return n.set(q1(e,s.x,r.x,a.x),q1(e,s.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class U2 extends af{constructor(e=new ae,t=new ae,n=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ae){const n=t,s=this.v0,r=this.v1,a=this.v2;return n.set(q1(e,s.x,r.x,a.x),q1(e,s.y,r.y,a.y),q1(e,s.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class B2 extends af{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new lt){const n=t,s=this.points,r=(s.length-1)*e,a=Math.floor(r),o=r-a,l=s[a===0?a:a-1],c=s[a],d=s[a>s.length-2?s.length-1:a+1],h=s[a>s.length-3?s.length-1:a+2];return n.set(b6(o,l.x,c.x,d.x,h.x),b6(o,l.y,c.y,d.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new lt().fromArray(s))}return this}}var vN=Object.freeze({__proto__:null,ArcCurve:YF,CatmullRomCurve3:ZF,CubicBezierCurve:P2,CubicBezierCurve3:QF,EllipseCurve:Ww,LineCurve:O2,LineCurve3:JF,QuadraticBezierCurve:L2,QuadraticBezierCurve3:U2,SplineCurve:B2});class ez extends af{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new vN[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,o=this.curves[r],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new vN[s.type]().fromJSON(s))}return this}}class PE extends ez{constructor(e){super(),this.type="Path",this.currentPoint=new lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new O2(this.currentPoint.clone(),new lt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new L2(this.currentPoint.clone(),new lt(e,t),new lt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,a){const o=new P2(this.currentPoint.clone(),new lt(e,t),new lt(n,s),new lt(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new B2(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,s,r,a),this}absarc(e,t,n,s,r,a){return this.absellipse(e,t,n,n,s,r,a),this}ellipse(e,t,n,s,r,a,o,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,n,s,r,a,o,l),this}absellipse(e,t,n,s,r,a,o,l){const c=new Ww(e,t,n,s,r,a,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ay extends PE{constructor(e){super(e),this.uuid=Zu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new PE().fromJSON(s))}return this}}function fSe(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=xK(i,0,s,t,!0);const a=[];if(!r||r.next===r.prev)return a;let o,l,c;if(n&&(r=ySe(i,e,r,t)),i.length>80*t){o=1/0,l=1/0;let d=-1/0,h=-1/0;for(let m=t;m<s;m+=t){const v=i[m],_=i[m+1];v<o&&(o=v),_<l&&(l=_),v>d&&(d=v),_>h&&(h=_)}c=Math.max(d-o,h-l),c=c!==0?32767/c:0}return OE(r,a,t,o,l,c,0),a}function xK(i,e,t,n,s){let r;if(s===CSe(i,e,t,n)>0)for(let a=e;a<t;a+=n)r=S6(a/n|0,i[a],i[a+1],r);else for(let a=t-n;a>=e;a-=n)r=S6(a/n|0,i[a],i[a+1],r);return r&&qb(r,r.next)&&(UE(r),r=r.next),r}function c_(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(qb(t,t.next)||da(t.prev,t,t.next)===0)){if(UE(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function OE(i,e,t,n,s,r,a){if(!i)return;!a&&r&&SSe(i,n,s,r);let o=i;for(;i.prev!==i.next;){const l=i.prev,c=i.next;if(r?pSe(i,n,s,r):hSe(i)){e.push(l.i,i.i,c.i),UE(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=mSe(c_(i),e),OE(i,e,t,n,s,r,2)):a===2&&gSe(i,e,t,n,s,r):OE(c_(i),e,t,n,s,r,1);break}}}function hSe(i){const e=i.prev,t=i,n=i.next;if(da(e,t,n)>=0)return!1;const s=e.x,r=t.x,a=n.x,o=e.y,l=t.y,c=n.y,d=Math.min(s,r,a),h=Math.min(o,l,c),m=Math.max(s,r,a),v=Math.max(o,l,c);let _=n.next;for(;_!==e;){if(_.x>=d&&_.x<=m&&_.y>=h&&_.y<=v&&P1(s,o,r,l,a,c,_.x,_.y)&&da(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function pSe(i,e,t,n){const s=i.prev,r=i,a=i.next;if(da(s,r,a)>=0)return!1;const o=s.x,l=r.x,c=a.x,d=s.y,h=r.y,m=a.y,v=Math.min(o,l,c),_=Math.min(d,h,m),x=Math.max(o,l,c),T=Math.max(d,h,m),b=$3(v,_,e,t,n),w=$3(x,T,e,t,n);let M=i.prevZ,R=i.nextZ;for(;M&&M.z>=b&&R&&R.z<=w;){if(M.x>=v&&M.x<=x&&M.y>=_&&M.y<=T&&M!==s&&M!==a&&P1(o,d,l,h,c,m,M.x,M.y)&&da(M.prev,M,M.next)>=0||(M=M.prevZ,R.x>=v&&R.x<=x&&R.y>=_&&R.y<=T&&R!==s&&R!==a&&P1(o,d,l,h,c,m,R.x,R.y)&&da(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;M&&M.z>=b;){if(M.x>=v&&M.x<=x&&M.y>=_&&M.y<=T&&M!==s&&M!==a&&P1(o,d,l,h,c,m,M.x,M.y)&&da(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;R&&R.z<=w;){if(R.x>=v&&R.x<=x&&R.y>=_&&R.y<=T&&R!==s&&R!==a&&P1(o,d,l,h,c,m,R.x,R.y)&&da(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function mSe(i,e){let t=i;do{const n=t.prev,s=t.next.next;!qb(n,s)&&SK(n,t,t.next,s)&&LE(n,s)&&LE(s,n)&&(e.push(n.i,t.i,s.i),UE(t),UE(t.next),t=i=s),t=t.next}while(t!==i);return c_(t)}function gSe(i,e,t,n,s,r){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&wSe(a,o)){let l=TK(a,o);a=c_(a,a.next),l=c_(l,l.next),OE(a,e,t,n,s,r,0),OE(l,e,t,n,s,r,0);return}o=o.next}a=a.next}while(a!==i)}function ySe(i,e,t,n){const s=[];for(let r=0,a=e.length;r<a;r++){const o=e[r]*n,l=r<a-1?e[r+1]*n:i.length,c=xK(i,o,l,n,!1);c===c.next&&(c.steiner=!0),s.push(ESe(c))}s.sort(vSe);for(let r=0;r<s.length;r++)t=_Se(s[r],t);return t}function vSe(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function _Se(i,e){const t=xSe(i,e);if(!t)return e;const n=TK(t,i);return c_(n,n.next),c_(t,t.next)}function xSe(i,e){let t=e;const n=i.x,s=i.y;let r=-1/0,a;if(qb(i,t))return t;do{if(qb(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const h=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>r&&(r=h,a=t.x<t.next.x?t:t.next,h===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let d=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&bK(s<c?n:r,s,l,c,s<c?r:n,s,t.x,t.y)){const h=Math.abs(s-t.y)/(n-t.x);LE(t,i)&&(h<d||h===d&&(t.x>a.x||t.x===a.x&&bSe(a,t)))&&(a=t,d=h)}t=t.next}while(t!==o);return a}function bSe(i,e){return da(i.prev,i,e.prev)<0&&da(e.next,i,i.next)<0}function SSe(i,e,t,n){let s=i;do s.z===0&&(s.z=$3(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,TSe(s)}function TSe(i){let e,t=1;do{let n=i,s;i=null;let r=null;for(e=0;n;){e++;let a=n,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,o--):(s=a,a=a.nextZ,l--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,t*=2}while(e>1);return i}function $3(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function ESe(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function bK(i,e,t,n,s,r,a,o){return(s-a)*(e-o)>=(i-a)*(r-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(r-o)>=(s-a)*(n-o)}function P1(i,e,t,n,s,r,a,o){return!(i===a&&e===o)&&bK(i,e,t,n,s,r,a,o)}function wSe(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!MSe(i,e)&&(LE(i,e)&&LE(e,i)&&ASe(i,e)&&(da(i.prev,i,e.prev)||da(i,e.prev,e))||qb(i,e)&&da(i.prev,i,i.next)>0&&da(e.prev,e,e.next)>0)}function da(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function qb(i,e){return i.x===e.x&&i.y===e.y}function SK(i,e,t,n){const s=MC(da(i,e,t)),r=MC(da(i,e,n)),a=MC(da(t,n,i)),o=MC(da(t,n,e));return!!(s!==r&&a!==o||s===0&&wC(i,t,e)||r===0&&wC(i,n,e)||a===0&&wC(t,i,n)||o===0&&wC(t,e,n))}function wC(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function MC(i){return i>0?1:i<0?-1:0}function MSe(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&SK(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function LE(i,e){return da(i.prev,i,i.next)<0?da(i,e,i.next)>=0&&da(i,i.prev,e)>=0:da(i,e,i.prev)<0||da(i,i.next,e)<0}function ASe(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function TK(i,e){const t=W3(i.i,i.x,i.y),n=W3(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function S6(i,e,t,n){const s=W3(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function UE(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function W3(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function CSe(i,e,t,n){let s=0;for(let r=e,a=t-n;r<t;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class RSe{static triangulate(e,t,n=2){return fSe(e,t,n)}}class $d{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return $d.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];T6(e),E6(n,e);let a=e.length;t.forEach(T6);for(let l=0;l<t.length;l++)s.push(a),a+=t[l].length,E6(n,t[l]);const o=RSe.triangulate(n,s);for(let l=0;l<o.length;l+=3)r.push(o.slice(l,l+3));return r}}function T6(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function E6(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class qw extends di{constructor(e=new ay([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new on(s,3)),this.setAttribute("uv",new on(r,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:v-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:NSe;let M,R=!1,N,D,L,F;b&&(M=b.getSpacedPoints(d),R=!0,m=!1,N=b.computeFrenetFrames(d,!1),D=new ae,L=new ae,F=new ae),m||(T=0,v=0,_=0,x=0);const I=o.extractPoints(c);let z=I.shape;const H=I.holes;if(!$d.isClockWise(z)){z=z.reverse();for(let $e=0,Ze=H.length;$e<Ze;$e++){const Xe=H[$e];$d.isClockWise(Xe)&&(H[$e]=Xe.reverse())}}function Z($e){const Xe=10000000000000001e-36;let We=$e[0];for(let _t=1;_t<=$e.length;_t++){const ut=_t%$e.length,ht=$e[ut],Bt=ht.x-We.x,kt=ht.y-We.y,X=Bt*Bt+kt*kt,W=Math.max(Math.abs(ht.x),Math.abs(ht.y),Math.abs(We.x),Math.abs(We.y)),Se=Xe*W*W;if(X<=Se){$e.splice(ut,1),_t--;continue}We=ht}}Z(z),H.forEach(Z);const se=H.length,oe=z;for(let $e=0;$e<se;$e++){const Ze=H[$e];z=z.concat(Ze)}function G($e,Ze,Xe){return Ze||console.error("THREE.ExtrudeGeometry: vec does not exist"),$e.clone().addScaledVector(Ze,Xe)}const K=z.length;function $($e,Ze,Xe){let We,_t,ut;const ht=$e.x-Ze.x,Bt=$e.y-Ze.y,kt=Xe.x-$e.x,X=Xe.y-$e.y,W=ht*ht+Bt*Bt,Se=ht*X-Bt*kt;if(Math.abs(Se)>Number.EPSILON){const Fe=Math.sqrt(W),tt=Math.sqrt(kt*kt+X*X),et=Ze.x-Bt/Fe,Lt=Ze.y+ht/Fe,wt=Xe.x-X/tt,It=Xe.y+kt/tt,Zt=((wt-et)*X-(It-Lt)*kt)/(ht*X-Bt*kt);We=et+ht*Zt-$e.x,_t=Lt+Bt*Zt-$e.y;const yt=We*We+_t*_t;if(yt<=2)return new lt(We,_t);ut=Math.sqrt(yt/2)}else{let Fe=!1;ht>Number.EPSILON?kt>Number.EPSILON&&(Fe=!0):ht<-Number.EPSILON?kt<-Number.EPSILON&&(Fe=!0):Math.sign(Bt)===Math.sign(X)&&(Fe=!0),Fe?(We=-Bt,_t=ht,ut=Math.sqrt(W)):(We=ht,_t=Bt,ut=Math.sqrt(W/2))}return new lt(We/ut,_t/ut)}const ce=[];for(let $e=0,Ze=oe.length,Xe=Ze-1,We=$e+1;$e<Ze;$e++,Xe++,We++)Xe===Ze&&(Xe=0),We===Ze&&(We=0),ce[$e]=$(oe[$e],oe[Xe],oe[We]);const q=[];let ue,Ae=ce.concat();for(let $e=0,Ze=se;$e<Ze;$e++){const Xe=H[$e];ue=[];for(let We=0,_t=Xe.length,ut=_t-1,ht=We+1;We<_t;We++,ut++,ht++)ut===_t&&(ut=0),ht===_t&&(ht=0),ue[We]=$(Xe[We],Xe[ut],Xe[ht]);q.push(ue),Ae=Ae.concat(ue)}let Ne;if(T===0)Ne=$d.triangulateShape(oe,H);else{const $e=[],Ze=[];for(let Xe=0;Xe<T;Xe++){const We=Xe/T,_t=v*Math.cos(We*Math.PI/2),ut=_*Math.sin(We*Math.PI/2)+x;for(let ht=0,Bt=oe.length;ht<Bt;ht++){const kt=G(oe[ht],ce[ht],ut);Be(kt.x,kt.y,-_t),We===0&&$e.push(kt)}for(let ht=0,Bt=se;ht<Bt;ht++){const kt=H[ht];ue=q[ht];const X=[];for(let W=0,Se=kt.length;W<Se;W++){const Fe=G(kt[W],ue[W],ut);Be(Fe.x,Fe.y,-_t),We===0&&X.push(Fe)}We===0&&Ze.push(X)}}Ne=$d.triangulateShape($e,Ze)}const we=Ne.length,pt=_+x;for(let $e=0;$e<K;$e++){const Ze=m?G(z[$e],Ae[$e],pt):z[$e];R?(L.copy(N.normals[0]).multiplyScalar(Ze.x),D.copy(N.binormals[0]).multiplyScalar(Ze.y),F.copy(M[0]).add(L).add(D),Be(F.x,F.y,F.z)):Be(Ze.x,Ze.y,0)}for(let $e=1;$e<=d;$e++)for(let Ze=0;Ze<K;Ze++){const Xe=m?G(z[Ze],Ae[Ze],pt):z[Ze];R?(L.copy(N.normals[$e]).multiplyScalar(Xe.x),D.copy(N.binormals[$e]).multiplyScalar(Xe.y),F.copy(M[$e]).add(L).add(D),Be(F.x,F.y,F.z)):Be(Xe.x,Xe.y,h/d*$e)}for(let $e=T-1;$e>=0;$e--){const Ze=$e/T,Xe=v*Math.cos(Ze*Math.PI/2),We=_*Math.sin(Ze*Math.PI/2)+x;for(let _t=0,ut=oe.length;_t<ut;_t++){const ht=G(oe[_t],ce[_t],We);Be(ht.x,ht.y,h+Xe)}for(let _t=0,ut=H.length;_t<ut;_t++){const ht=H[_t];ue=q[_t];for(let Bt=0,kt=ht.length;Bt<kt;Bt++){const X=G(ht[Bt],ue[Bt],We);R?Be(X.x,X.y+M[d-1].y,M[d-1].x+Xe):Be(X.x,X.y,h+Xe)}}}Ee(),Ue();function Ee(){const $e=s.length/3;if(m){let Ze=0,Xe=K*Ze;for(let We=0;We<we;We++){const _t=Ne[We];Mt(_t[2]+Xe,_t[1]+Xe,_t[0]+Xe)}Ze=d+T*2,Xe=K*Ze;for(let We=0;We<we;We++){const _t=Ne[We];Mt(_t[0]+Xe,_t[1]+Xe,_t[2]+Xe)}}else{for(let Ze=0;Ze<we;Ze++){const Xe=Ne[Ze];Mt(Xe[2],Xe[1],Xe[0])}for(let Ze=0;Ze<we;Ze++){const Xe=Ne[Ze];Mt(Xe[0]+K*d,Xe[1]+K*d,Xe[2]+K*d)}}n.addGroup($e,s.length/3-$e,0)}function Ue(){const $e=s.length/3;let Ze=0;Ve(oe,Ze),Ze+=oe.length;for(let Xe=0,We=H.length;Xe<We;Xe++){const _t=H[Xe];Ve(_t,Ze),Ze+=_t.length}n.addGroup($e,s.length/3-$e,1)}function Ve($e,Ze){let Xe=$e.length;for(;--Xe>=0;){const We=Xe;let _t=Xe-1;_t<0&&(_t=$e.length-1);for(let ut=0,ht=d+T*2;ut<ht;ut++){const Bt=K*ut,kt=K*(ut+1),X=Ze+We+Bt,W=Ze+_t+Bt,Se=Ze+_t+kt,Fe=Ze+We+kt;ct(X,W,Se,Fe)}}}function Be($e,Ze,Xe){l.push($e),l.push(Ze),l.push(Xe)}function Mt($e,Ze,Xe){Et($e),Et(Ze),Et(Xe);const We=s.length/3,_t=w.generateTopUV(n,s,We-3,We-2,We-1);le(_t[0]),le(_t[1]),le(_t[2])}function ct($e,Ze,Xe,We){Et($e),Et(Ze),Et(We),Et(Ze),Et(Xe),Et(We);const _t=s.length/3,ut=w.generateSideWallUV(n,s,_t-6,_t-3,_t-2,_t-1);le(ut[0]),le(ut[1]),le(ut[3]),le(ut[1]),le(ut[2]),le(ut[3])}function Et($e){s.push(l[$e*3+0]),s.push(l[$e*3+1]),s.push(l[$e*3+2])}function le($e){r.push($e.x),r.push($e.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return DSe(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const o=t[e.shapes[r]];n.push(o)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new vN[s.type]().fromJSON(s)),new qw(n,e.options)}}const NSe={generateTopUV:function(i,e,t,n,s){const r=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[s*3],d=e[s*3+1];return[new lt(r,a),new lt(o,l),new lt(c,d)]},generateSideWallUV:function(i,e,t,n,s,r){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],d=e[n*3+1],h=e[n*3+2],m=e[s*3],v=e[s*3+1],_=e[s*3+2],x=e[r*3],T=e[r*3+1],b=e[r*3+2];return Math.abs(o-d)<Math.abs(a-c)?[new lt(a,1-l),new lt(c,1-h),new lt(m,1-_),new lt(x,1-b)]:[new lt(o,1-l),new lt(d,1-h),new lt(v,1-_),new lt(T,1-b)]}};function DSe(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Xw extends Hm{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xw(e.radius,e.detail)}}class Yw extends di{constructor(e=[new lt(0,-.5),new lt(.5,0),new lt(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=Qn(s,0,Math.PI*2);const r=[],a=[],o=[],l=[],c=[],d=1/t,h=new ae,m=new lt,v=new ae,_=new ae,x=new ae;let T=0,b=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:T=e[w+1].x-e[w].x,b=e[w+1].y-e[w].y,v.x=b*1,v.y=-T,v.z=b*0,x.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:T=e[w+1].x-e[w].x,b=e[w+1].y-e[w].y,v.x=b*1,v.y=-T,v.z=b*0,_.copy(v),v.x+=x.x,v.y+=x.y,v.z+=x.z,v.normalize(),l.push(v.x,v.y,v.z),x.copy(_)}for(let w=0;w<=t;w++){const M=n+w*d*s,R=Math.sin(M),N=Math.cos(M);for(let D=0;D<=e.length-1;D++){h.x=e[D].x*R,h.y=e[D].y,h.z=e[D].x*N,a.push(h.x,h.y,h.z),m.x=w/t,m.y=D/(e.length-1),o.push(m.x,m.y);const L=l[3*D+0]*R,F=l[3*D+1],I=l[3*D+0]*N;c.push(L,F,I)}}for(let w=0;w<t;w++)for(let M=0;M<e.length-1;M++){const R=M+w*e.length,N=R,D=R+e.length,L=R+e.length+1,F=R+1;r.push(N,D,F),r.push(L,F,D)}this.setIndex(r),this.setAttribute("position",new on(a,3)),this.setAttribute("uv",new on(o,2)),this.setAttribute("normal",new on(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yw(e.points,e.segments,e.phiStart,e.phiLength)}}class US extends Hm{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new US(e.radius,e.detail)}}class Zy extends di{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,a=t/2,o=Math.floor(n),l=Math.floor(s),c=o+1,d=l+1,h=e/o,m=t/l,v=[],_=[],x=[],T=[];for(let b=0;b<d;b++){const w=b*m-a;for(let M=0;M<c;M++){const R=M*h-r;_.push(R,-w,0),x.push(0,0,1),T.push(M/o),T.push(1-b/l)}}for(let b=0;b<l;b++)for(let w=0;w<o;w++){const M=w+c*b,R=w+c*(b+1),N=w+1+c*(b+1),D=w+1+c*b;v.push(M,R,D),v.push(R,N,D)}this.setIndex(v),this.setAttribute("position",new on(_,3)),this.setAttribute("normal",new on(x,3)),this.setAttribute("uv",new on(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zy(e.width,e.height,e.widthSegments,e.heightSegments)}}class Kw extends di{constructor(e=.5,t=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const o=[],l=[],c=[],d=[];let h=e;const m=(t-e)/s,v=new ae,_=new lt;for(let x=0;x<=s;x++){for(let T=0;T<=n;T++){const b=r+T/n*a;v.x=h*Math.cos(b),v.y=h*Math.sin(b),l.push(v.x,v.y,v.z),c.push(0,0,1),_.x=(v.x/t+1)/2,_.y=(v.y/t+1)/2,d.push(_.x,_.y)}h+=m}for(let x=0;x<s;x++){const T=x*(n+1);for(let b=0;b<n;b++){const w=b+T,M=w,R=w+n+1,N=w+n+2,D=w+1;o.push(M,R,D),o.push(R,N,D)}}this.setIndex(o),this.setAttribute("position",new on(l,3)),this.setAttribute("normal",new on(c,3)),this.setAttribute("uv",new on(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Zw extends di{constructor(e=new ay([new lt(0,.5),new lt(-.5,-.5),new lt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(o,l,d),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new on(s,3)),this.setAttribute("normal",new on(r,3)),this.setAttribute("uv",new on(a,2));function c(d){const h=s.length/3,m=d.extractPoints(t);let v=m.shape;const _=m.holes;$d.isClockWise(v)===!1&&(v=v.reverse());for(let T=0,b=_.length;T<b;T++){const w=_[T];$d.isClockWise(w)===!0&&(_[T]=w.reverse())}const x=$d.triangulateShape(v,_);for(let T=0,b=_.length;T<b;T++){const w=_[T];v=v.concat(w)}for(let T=0,b=v.length;T<b;T++){const w=v[T];s.push(w.x,w.y,0),r.push(0,0,1),a.push(w.x,w.y)}for(let T=0,b=x.length;T<b;T++){const w=x[T],M=w[0]+h,R=w[1]+h,N=w[2]+h;n.push(M,R,N),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return PSe(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const a=t[e.shapes[s]];n.push(a)}return new Zw(n,e.curveSegments)}}function PSe(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class M_ extends di{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const d=[],h=new ae,m=new ae,v=[],_=[],x=[],T=[];for(let b=0;b<=n;b++){const w=[],M=b/n;let R=0;b===0&&a===0?R=.5/t:b===n&&l===Math.PI&&(R=-.5/t);for(let N=0;N<=t;N++){const D=N/t;h.x=-e*Math.cos(s+D*r)*Math.sin(a+M*o),h.y=e*Math.cos(a+M*o),h.z=e*Math.sin(s+D*r)*Math.sin(a+M*o),_.push(h.x,h.y,h.z),m.copy(h).normalize(),x.push(m.x,m.y,m.z),T.push(D+R,1-M),w.push(c++)}d.push(w)}for(let b=0;b<n;b++)for(let w=0;w<t;w++){const M=d[b][w+1],R=d[b][w],N=d[b+1][w],D=d[b+1][w+1];(b!==0||a>0)&&v.push(M,R,D),(b!==n-1||l<Math.PI)&&v.push(R,N,D)}this.setIndex(v),this.setAttribute("position",new on(_,3)),this.setAttribute("normal",new on(x,3)),this.setAttribute("uv",new on(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qw extends Hm{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qw(e.radius,e.detail)}}class Jw extends di{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],o=[],l=[],c=[],d=new ae,h=new ae,m=new ae;for(let v=0;v<=n;v++)for(let _=0;_<=s;_++){const x=_/s*r,T=v/n*Math.PI*2;h.x=(e+t*Math.cos(T))*Math.cos(x),h.y=(e+t*Math.cos(T))*Math.sin(x),h.z=t*Math.sin(T),o.push(h.x,h.y,h.z),d.x=e*Math.cos(x),d.y=e*Math.sin(x),m.subVectors(h,d).normalize(),l.push(m.x,m.y,m.z),c.push(_/s),c.push(v/n)}for(let v=1;v<=n;v++)for(let _=1;_<=s;_++){const x=(s+1)*v+_-1,T=(s+1)*(v-1)+_-1,b=(s+1)*(v-1)+_,w=(s+1)*v+_;a.push(x,T,w),a.push(T,b,w)}this.setIndex(a),this.setAttribute("position",new on(o,3)),this.setAttribute("normal",new on(l,3)),this.setAttribute("uv",new on(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class eM extends di{constructor(e=1,t=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const o=[],l=[],c=[],d=[],h=new ae,m=new ae,v=new ae,_=new ae,x=new ae,T=new ae,b=new ae;for(let M=0;M<=n;++M){const R=M/n*r*Math.PI*2;w(R,r,a,e,v),w(R+.01,r,a,e,_),T.subVectors(_,v),b.addVectors(_,v),x.crossVectors(T,b),b.crossVectors(x,T),x.normalize(),b.normalize();for(let N=0;N<=s;++N){const D=N/s*Math.PI*2,L=-t*Math.cos(D),F=t*Math.sin(D);h.x=v.x+(L*b.x+F*x.x),h.y=v.y+(L*b.y+F*x.y),h.z=v.z+(L*b.z+F*x.z),l.push(h.x,h.y,h.z),m.subVectors(h,v).normalize(),c.push(m.x,m.y,m.z),d.push(M/n),d.push(N/s)}}for(let M=1;M<=n;M++)for(let R=1;R<=s;R++){const N=(s+1)*(M-1)+(R-1),D=(s+1)*M+(R-1),L=(s+1)*M+R,F=(s+1)*(M-1)+R;o.push(N,D,F),o.push(D,L,F)}this.setIndex(o),this.setAttribute("position",new on(l,3)),this.setAttribute("normal",new on(c,3)),this.setAttribute("uv",new on(d,2));function w(M,R,N,D,L){const F=Math.cos(M),I=Math.sin(M),z=N/R*M,H=Math.cos(z);L.x=D*(2+H)*.5*F,L.y=D*(2+H)*I*.5,L.z=D*Math.sin(z)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class tM extends di{constructor(e=new U2(new ae(-1,-1,0),new ae(-1,1,0),new ae(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ae,l=new ae,c=new lt;let d=new ae;const h=[],m=[],v=[],_=[];x(),this.setIndex(_),this.setAttribute("position",new on(h,3)),this.setAttribute("normal",new on(m,3)),this.setAttribute("uv",new on(v,2));function x(){for(let M=0;M<t;M++)T(M);T(r===!1?t:0),w(),b()}function T(M){d=e.getPointAt(M/t,d);const R=a.normals[M],N=a.binormals[M];for(let D=0;D<=s;D++){const L=D/s*Math.PI*2,F=Math.sin(L),I=-Math.cos(L);l.x=I*R.x+F*N.x,l.y=I*R.y+F*N.y,l.z=I*R.z+F*N.z,l.normalize(),m.push(l.x,l.y,l.z),o.x=d.x+n*l.x,o.y=d.y+n*l.y,o.z=d.z+n*l.z,h.push(o.x,o.y,o.z)}}function b(){for(let M=1;M<=t;M++)for(let R=1;R<=s;R++){const N=(s+1)*(M-1)+(R-1),D=(s+1)*M+(R-1),L=(s+1)*M+R,F=(s+1)*(M-1)+R;_.push(N,D,F),_.push(D,L,F)}}function w(){for(let M=0;M<=t;M++)for(let R=0;R<=s;R++)c.x=M/t,c.y=R/s,v.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new tM(new vN[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class tz extends di{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new ae,r=new ae;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const h=l[c],m=h.start,v=h.count;for(let _=m,x=m+v;_<x;_+=3)for(let T=0;T<3;T++){const b=o.getX(_+T),w=o.getX(_+(T+1)%3);s.fromBufferAttribute(a,b),r.fromBufferAttribute(a,w),w6(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const d=3*o+c,h=3*o+(c+1)%3;s.fromBufferAttribute(a,d),r.fromBufferAttribute(a,h),w6(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new on(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function w6(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var M6=Object.freeze({__proto__:null,BoxGeometry:hp,CapsuleGeometry:Hw,CircleGeometry:jw,ConeGeometry:LS,CylinderGeometry:w_,DodecahedronGeometry:$w,EdgesGeometry:XF,ExtrudeGeometry:qw,IcosahedronGeometry:Xw,LatheGeometry:Yw,OctahedronGeometry:US,PlaneGeometry:Zy,PolyhedronGeometry:Hm,RingGeometry:Kw,ShapeGeometry:Zw,SphereGeometry:M_,TetrahedronGeometry:Qw,TorusGeometry:Jw,TorusKnotGeometry:eM,TubeGeometry:tM,WireframeGeometry:tz});class I2 extends So{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nz extends Qd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class nM extends So{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Kl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class F2 extends nM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Vt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class z2 extends So{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Vt(16777215),this.specular=new Vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Kl,this.combine=b_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class V2 extends So{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class k2 extends So{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class G2 extends So{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Kl,this.combine=b_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H2 extends So{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class j2 extends So{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class $2 extends So{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iM extends Sl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Sv(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function EK(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function wK(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function q3(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const o=t[r]*e;for(let l=0;l!==e;++l)s[a++]=i[o+l]}return s}function iz(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(e.push(r.time),t.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(e.push(r.time),t.push(a)),r=i[s++];while(r!==void 0)}function OSe(i,e,t,n,s=30){const r=i.clone();r.name=e;const a=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],d=c.getValueSize(),h=[],m=[];for(let v=0;v<c.times.length;++v){const _=c.times[v]*s;if(!(_<t||_>=n)){h.push(c.times[v]);for(let x=0;x<d;++x)m.push(c.values[v*d+x])}}h.length!==0&&(c.times=Sv(h,c.times.constructor),c.values=Sv(m,c.values.constructor),a.push(c))}r.tracks=a;let o=1/0;for(let l=0;l<r.tracks.length;++l)o>r.tracks[l].times[0]&&(o=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*o);return r.resetDuration(),r}function LSe(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let a=0;a<s;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(b){return b.name===o.name&&b.ValueTypeName===l});if(c===void 0)continue;let d=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const _=o.times.length-1;let x;if(r<=o.times[0]){const b=d,w=h-d;x=o.values.slice(b,w)}else if(r>=o.times[_]){const b=_*h+d,w=b+h-d;x=o.values.slice(b,w)}else{const b=o.createInterpolant(),w=d,M=h-d;b.evaluate(r),x=b.resultBuffer.slice(w,M)}l==="quaternion"&&new xl().fromArray(x).normalize().conjugate().toArray(x);const T=c.times.length;for(let b=0;b<T;++b){const w=b*v+m;if(l==="quaternion")xl.multiplyQuaternionsFlat(c.values,w,x,0,c.values,w);else{const M=v-m*2;for(let R=0;R<M;++R)c.values[w+R]-=x[R]}}}return i.blendMode=T2,i}class MK{static convertArray(e,t){return Sv(e,t)}static isTypedArray(e){return EK(e)}static getKeyframeOrder(e){return wK(e)}static sortedArray(e,t,n){return q3(e,t,n)}static flattenJSON(e,t,n,s){iz(e,t,n,s)}static subclip(e,t,n,s,r=30){return OSe(e,t,n,s,r)}static makeClipAdditive(e,t=0,n=e,s=30){return LSe(e,t,n,s)}}class BS{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<s)){for(let o=n+2;;){if(s===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=s,s=t[++n],e<s)break t}a=t.length;break n}if(!(e>=r)){const o=t[1];e<o&&(n=2,r=o);for(let l=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(s=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let a=0;a!==s;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sz extends BS{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Kg,endingEnd:Kg}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,a=e+1,o=s[r],l=s[a];if(o===void 0)switch(this.getSettings_().endingStart){case Zg:r=e,o=2*t-n;break;case $b:r=s.length-2,o=t+s[r]-s[r+1];break;default:r=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Zg:a=e,l=2*n-t;break;case $b:a=1,l=n+s[1]-s[0];break;default:a=e-1,l=t}const c=(n-t)*.5,d=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=r*d,this._offsetNext=a*d}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,d=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,v=this._weightNext,_=(n-t)/(s-t),x=_*_,T=x*_,b=-m*T+2*m*x-m*_,w=(1+m)*T+(-1.5-2*m)*x+(-.5+m)*_+1,M=(-1-v)*T+(1.5+v)*x+.5*_,R=v*T-v*x;for(let N=0;N!==o;++N)r[N]=b*a[d+N]+w*a[c+N]+M*a[l+N]+R*a[h+N];return r}}class W2 extends BS{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,d=(n-t)/(s-t),h=1-d;for(let m=0;m!==o;++m)r[m]=a[c+m]*h+a[l+m]*d;return r}}class rz extends BS{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class ad{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Sv(t,this.TimeBufferType),this.values=Sv(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Sv(e.times,Array),values:Sv(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new rz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new W2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sz(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jb:t=this.InterpolantFactoryMethodDiscrete;break;case RE:t=this.InterpolantFactoryMethodLinear;break;case $1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jb;case this.InterpolantFactoryMethodLinear:return RE;case this.InterpolantFactoryMethodSmooth:return $1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<e;)++r;for(;a!==-1&&n[a]>t;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const o=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==r;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(s!==void 0&&EK(s))for(let o=0,l=s.length;o!==l;++o){const c=s[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===$1,r=e.length-1;let a=1;for(let o=1;o<r;++o){let l=!1;const c=e[o],d=e[o+1];if(c!==d&&(o!==1||c!==e[0]))if(s)l=!0;else{const h=o*n,m=h-n,v=h+n;for(let _=0;_!==n;++_){const x=t[h+_];if(x!==t[m+_]||x!==t[v+_]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*n,m=a*n;for(let v=0;v!==n;++v)t[m+v]=t[h+v]}++a}}if(r>0){e[a]=e[r];for(let o=r*n,l=a*n,c=0;c!==n;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}ad.prototype.ValueTypeName="";ad.prototype.TimeBufferType=Float32Array;ad.prototype.ValueBufferType=Float32Array;ad.prototype.DefaultInterpolation=RE;class Qy extends ad{constructor(e,t,n){super(e,t,n)}}Qy.prototype.ValueTypeName="bool";Qy.prototype.ValueBufferType=Array;Qy.prototype.DefaultInterpolation=jb;Qy.prototype.InterpolantFactoryMethodLinear=void 0;Qy.prototype.InterpolantFactoryMethodSmooth=void 0;class q2 extends ad{constructor(e,t,n,s){super(e,t,n,s)}}q2.prototype.ValueTypeName="color";class Xb extends ad{constructor(e,t,n,s){super(e,t,n,s)}}Xb.prototype.ValueTypeName="number";class az extends BS{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(s-t);let c=e*o;for(let d=c+o;c!==d;c+=4)xl.slerpFlat(r,0,a,c-o,a,c,l);return r}}class IS extends ad{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new az(this.times,this.values,this.getValueSize(),e)}}IS.prototype.ValueTypeName="quaternion";IS.prototype.InterpolantFactoryMethodSmooth=void 0;class Jy extends ad{constructor(e,t,n){super(e,t,n)}}Jy.prototype.ValueTypeName="string";Jy.prototype.ValueBufferType=Array;Jy.prototype.DefaultInterpolation=jb;Jy.prototype.InterpolantFactoryMethodLinear=void 0;Jy.prototype.InterpolantFactoryMethodSmooth=void 0;class Yb extends ad{constructor(e,t,n,s){super(e,t,n,s)}}Yb.prototype.ValueTypeName="vector";class Kb{constructor(e="",t=-1,n=[],s=Aw){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=Zu(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(BSe(n[a]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,a=n.length;r!==a;++r)t.push(ad.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,a=[];for(let o=0;o<r;o++){let l=[],c=[];l.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);const d=wK(l);l=q3(l,1,d),c=q3(c,1,d),!s&&l[0]===0&&(l.push(r),c.push(c[0])),a.push(new Xb(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],d=c.name.match(r);if(d&&d.length>1){const h=d[1];let m=s[h];m||(s[h]=m=[]),m.push(c)}}const a=[];for(const o in s)a.push(this.CreateFromMorphTargetSequence(o,s[o],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,m,v,_,x){if(v.length!==0){const T=[],b=[];iz(v,T,b,_),T.length!==0&&x.push(new h(m,T,b))}},s=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const m=c[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let _;for(_=0;_<m.length;_++)if(m[_].morphTargets)for(let x=0;x<m[_].morphTargets.length;x++)v[m[_].morphTargets[x]]=-1;for(const x in v){const T=[],b=[];for(let w=0;w!==m[_].morphTargets.length;++w){const M=m[_];T.push(M.time),b.push(M.morphTarget===x?1:0)}s.push(new Xb(".morphTargetInfluence["+x+"]",T,b))}l=v.length*a}else{const v=".bones["+t[h].name+"]";n(Yb,v+".position",m,"pos",s),n(IS,v+".quaternion",m,"rot",s),n(Yb,v+".scale",m,"scl",s)}}return s.length===0?null:new this(r,l,s,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function USe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xb;case"vector":case"vector2":case"vector3":case"vector4":return Yb;case"color":return q2;case"quaternion":return IS;case"bool":case"boolean":return Qy;case"string":return Jy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function BSe(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=USe(i.type);if(i.times===void 0){const t=[],n=[];iz(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Uf={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class X2{constructor(e,t,n){const s=this;let r=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(d){o++,r===!1&&s.onStart!==void 0&&s.onStart(d,a,o),r=!0},this.itemEnd=function(d){a++,s.onProgress!==void 0&&s.onProgress(d,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return h!==-1&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,m=c.length;h<m;h+=2){const v=c[h],_=c[h+1];if(v.global&&(v.lastIndex=0),v.test(d))return _}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const oz=new X2;class Jl{constructor(e){this.manager=e!==void 0?e:oz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Jl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qp={};class ISe extends Error{constructor(e,t){super(e),this.response=t}}class $f extends Jl{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Uf.get(`file:${e}`);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Qp[e]!==void 0){Qp[e].push({onLoad:t,onProgress:n,onError:s});return}Qp[e]=[],Qp[e].push({onLoad:t,onProgress:n,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Qp[e],h=c.body.getReader(),m=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),v=m?parseInt(m):0,_=v!==0;let x=0;const T=new ReadableStream({start(b){w();function w(){h.read().then(({done:M,value:R})=>{if(M)b.close();else{x+=R.byteLength;const N=new ProgressEvent("progress",{lengthComputable:_,loaded:x,total:v});for(let D=0,L=d.length;D<L;D++){const F=d[D];F.onProgress&&F.onProgress(N)}b.enqueue(R),w()}},M=>{b.error(M)})}}});return new Response(T)}else throw new ISe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return c.json();default:if(o==="")return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),m=h&&h[1]?h[1].toLowerCase():void 0,v=new TextDecoder(m);return c.arrayBuffer().then(_=>v.decode(_))}}}).then(c=>{Uf.add(`file:${e}`,c);const d=Qp[e];delete Qp[e];for(let h=0,m=d.length;h<m;h++){const v=d[h];v.onLoad&&v.onLoad(c)}}).catch(c=>{const d=Qp[e];if(d===void 0)throw this.manager.itemError(e),c;delete Qp[e];for(let h=0,m=d.length;h<m;h++){const v=d[h];v.onError&&v.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AK extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new $f(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=Kb.parse(e[n]);t.push(s)}return t}}class CK extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=this,a=[],o=new Gw,l=new $f(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);let c=0;function d(h){l.load(e[h],function(m){const v=r.parse(m,!0);a[h]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},c+=1,c===6&&(v.mipmapCount===1&&(o.minFilter=Zi),o.image=a,o.format=v.format,o.needsUpdate=!0,t&&t(o))},n,s)}if(Array.isArray(e))for(let h=0,m=e.length;h<m;++h)d(h);else l.load(e,function(h){const m=r.parse(h,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let _=0;_<v;_++){a[_]={mipmaps:[]};for(let x=0;x<m.mipmapCount;x++)a[_].mipmaps.push(m.mipmaps[_*m.mipmapCount+x]),a[_].format=m.format,a[_].width=m.width,a[_].height=m.height}o.image=a}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=Zi),o.format=m.format,o.needsUpdate=!0,t&&t(o)},n,s);return o}}const Ix=new WeakMap;class Zb extends Jl{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Uf.get(`image:${e}`);if(a!==void 0){if(a.complete===!0)r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0);else{let h=Ix.get(a);h===void 0&&(h=[],Ix.set(a,h)),h.push({onLoad:t,onError:s})}return a}const o=DE("img");function l(){d(),t&&t(this);const h=Ix.get(this)||[];for(let m=0;m<h.length;m++){const v=h[m];v.onLoad&&v.onLoad(this)}Ix.delete(this),r.manager.itemEnd(e)}function c(h){d(),s&&s(h),Uf.remove(`image:${e}`);const m=Ix.get(this)||[];for(let v=0;v<m.length;v++){const _=m[v];_.onError&&_.onError(h)}Ix.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function d(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Uf.add(`image:${e}`,o),r.manager.itemStart(e),o.src=e,o}}class RK extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=new Gm;r.colorSpace=ao;const a=new Zb(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(d){r.images[c]=d,o++,o===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let c=0;c<e.length;++c)l(c);return r}}class NK extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new Yd,o=new $f(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(l){let c;try{c=r.parse(l)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:vl,a.wrapT=c.wrapT!==void 0?c.wrapT:vl,a.magFilter=c.magFilter!==void 0?c.magFilter:Zi,a.minFilter=c.minFilter!==void 0?c.minFilter:Zi,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=jo),c.mipmapCount===1&&(a.minFilter=Zi),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},n,s),a}}class sM extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=new Es,a=new Zb(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){r.image=o,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class jm extends Qi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Y2 extends jm{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const rL=new an,A6=new ae,C6=new ae;class lz{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.mapType=Tr,this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ky,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;A6.setFromMatrixPosition(e.matrixWorld),t.position.copy(A6),C6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(C6),t.updateMatrixWorld(),rL.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rL,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(rL)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class FSe extends lz{constructor(){super(new la(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=o_*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class FS extends jm{constructor(e,t,n=0,s=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qi.DEFAULT_UP),this.updateMatrix(),this.target=new Qi,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new FSe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const R6=new an,n1=new ae,aL=new ae;class zSe extends lz{constructor(){super(new la(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new bn(2,1,1,1),new bn(0,1,1,1),new bn(3,1,1,1),new bn(1,1,1,1),new bn(3,0,1,1),new bn(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),n1.setFromMatrixPosition(e.matrixWorld),n.position.copy(n1),aL.copy(n.position),aL.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(aL),n.updateMatrixWorld(),s.makeTranslation(-n1.x,-n1.y,-n1.z),R6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(R6,n.coordinateSystem,n.reversedDepth)}}class K2 extends jm{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new zSe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class e0 extends DS{constructor(e=-1,t=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,a=r+c*this.view.width,o-=d*this.view.offsetY,l=o-d*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class VSe extends lz{constructor(){super(new e0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Z2 extends jm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qi.DEFAULT_UP),this.updateMatrix(),this.target=new Qi,this.shadow=new VSe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Q2 extends jm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class J2 extends jm{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class cz{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ae)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*s),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*s)),t.addScaledVector(a[5],1.092548*(s*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(n*r)),t.addScaledVector(a[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*s),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*s),t.addScaledVector(a[5],2*.429043*s*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*n*r),t.addScaledVector(a[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class eD extends jm{constructor(e=new cz,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zS extends Jl{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,a=new $f(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const a=e.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new Vt().setHex(a.value);break;case"v2":s.uniforms[r].value=new lt().fromArray(a.value);break;case"v3":s.uniforms[r].value=new ae().fromArray(a.value);break;case"v4":s.uniforms[r].value=new bn().fromArray(a.value);break;case"m3":s.uniforms[r].value=new Kn().fromArray(a.value);break;case"m4":s.uniforms[r].value=new an().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new lt().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return zS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:I2,SpriteMaterial:zw,RawShaderMaterial:nz,ShaderMaterial:Qd,PointsMaterial:kw,MeshPhysicalMaterial:F2,MeshStandardMaterial:nM,MeshPhongMaterial:z2,MeshToonMaterial:V2,MeshNormalMaterial:k2,MeshLambertMaterial:G2,MeshDepthMaterial:H2,MeshDistanceMaterial:j2,MeshBasicMaterial:Gl,MeshMatcapMaterial:$2,LineDashedMaterial:iM,LineBasicMaterial:Sl,Material:So};return new t[e]}}class _N{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class uz extends di{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class dz extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new $f(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(v,_){if(t[_]!==void 0)return t[_];const T=v.interleavedBuffers[_],b=r(v,T.buffer),w=lb(T.type,b),M=new PS(w,T.stride);return M.uuid=T.uuid,t[_]=M,M}function r(v,_){if(n[_]!==void 0)return n[_];const T=v.arrayBuffers[_],b=new Uint32Array(T).buffer;return n[_]=b,b}const a=e.isInstancedBufferGeometry?new uz:new di,o=e.data.index;if(o!==void 0){const v=lb(o.type,o.array);a.setIndex(new os(v,1))}const l=e.data.attributes;for(const v in l){const _=l[v];let x;if(_.isInterleavedBufferAttribute){const T=s(e.data,_.data);x=new Dm(T,_.itemSize,_.offset,_.normalized)}else{const T=lb(_.type,_.array),b=_.isInstancedBufferAttribute?Qu:os;x=new b(T,_.itemSize,_.normalized)}_.name!==void 0&&(x.name=_.name),_.usage!==void 0&&x.setUsage(_.usage),a.setAttribute(v,x)}const c=e.data.morphAttributes;if(c)for(const v in c){const _=c[v],x=[];for(let T=0,b=_.length;T<b;T++){const w=_[T];let M;if(w.isInterleavedBufferAttribute){const R=s(e.data,w.data);M=new Dm(R,w.itemSize,w.offset,w.normalized)}else{const R=lb(w.type,w.array);M=new os(R,w.itemSize,w.normalized)}w.name!==void 0&&(M.name=w.name),x.push(M)}a.morphAttributes[v]=x}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let v=0,_=h.length;v!==_;++v){const x=h[v];a.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(a.boundingSphere=new co().fromJSON(m)),e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class fz extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=this,a=this.path===""?_N.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new $f(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){s!==void 0&&s(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(c,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?_N.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new $f(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,n),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),this.bindLightTargets(c),t!==void 0){let h=!1;for(const m in a)if(a[m].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,s,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new ay().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,a=e.length;r<a;r++){const o=new Vw().fromJSON(e[r],s);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new dz;for(let r=0,a=e.length;r<a;r++){let o;const l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=s.parse(l);break;default:l.type in M6?o=M6[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new zS;r.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=r.parse(l)),s[l.uuid]=n[l.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=Kb.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function a(l){return n.manager.itemStart(l),r.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return a(d)}else return l.data?{data:lb(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new X2(t);r=new Zb(l),r.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const h=e[c],m=h.url;if(Array.isArray(m)){const v=[];for(let _=0,x=m.length;_<x;_++){const T=m[_],b=o(T);b!==null&&(b instanceof HTMLImageElement?v.push(b):v.push(new Yd(b.data,b.width,b.height)))}s[h.uuid]=new hm(v)}else{const v=o(h.url);s[h.uuid]=new hm(v)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await s.loadAsync(l)}else return a.data?{data:lb(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){s=new Zb(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const d=[];for(let h=0,m=c.length;h<m;h++){const v=c[h],_=await r(v);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new Yd(_.data,_.width,_.height)))}n[l.uuid]=new hm(d)}else{const d=await r(l.url);n[l.uuid]=new hm(d)}}}return n}parseTextures(e,t){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const o=e[r];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let d;Array.isArray(c)?(d=new Gm,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Yd:d=new Es,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=n(o.mapping,kSe)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=n(o.wrap[0],N6),d.wrapT=n(o.wrap[1],N6)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=n(o.minFilter,D6)),o.magFilter!==void 0&&(d.magFilter=n(o.magFilter,D6)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),s[o.uuid]=d}return s}parseObject(e,t,n,s,r){let a;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let _=0,x=m.length;_<x;_++){const T=m[_];n[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),v.push(n[T])}return v}return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),n[m]}}function c(m){return s[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),s[m]}let d,h;switch(e.type){case"Scene":a=new E_,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Vt(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Fw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Iw(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new la(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new e0(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Q2(e.color,e.intensity);break;case"DirectionalLight":a=new Z2(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new K2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new J2(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new FS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new Y2(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new eD().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),h=l(e.material),a=new GF(d,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),h=l(e.material),a=new zs(d,h);break;case"InstancedMesh":d=o(e.geometry),h=l(e.material);const m=e.count,v=e.instanceMatrix,_=e.instanceColor;a=new HF(d,h,m),a.instanceMatrix=new Qu(new Float32Array(v.array),16),_!==void 0&&(a.instanceColor=new Qu(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":d=o(e.geometry),h=l(e.material),a=new jF(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),a.geometry=d,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(x=>{let T=null,b=null;return x.boundingBox!==void 0&&(T=new Xo().fromJSON(x.boundingBox)),x.boundingSphere!==void 0&&(b=new co().fromJSON(x.boundingSphere)),{...x,boundingBox:T,boundingSphere:b}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=c(e.matricesTexture.uuid),a._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new co().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(a.boundingBox=new Xo().fromJSON(e.boundingBox));break;case"LOD":a=new kF;break;case"Line":a=new Pm(o(e.geometry),l(e.material));break;case"LineLoop":a=new $F(o(e.geometry),l(e.material));break;case"LineSegments":a=new Kf(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new WF(o(e.geometry),l(e.material));break;case"Sprite":a=new VF(l(e.material));break;case"Group":a=new pm;break;case"Bone":a=new R2;break;default:a=new Qi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)a.add(this.parseObject(m[v],t,n,s,r))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const _=m[v];a.animations.push(r[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const _=m[v],x=a.getObjectByProperty("uuid",_.object);x!==void 0&&a.addLevel(x,_.distance,_.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new Qi}})}}const kSe={UVMapping:SS,CubeReflectionMapping:gu,CubeRefractionMapping:nd,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:Nm,CubeUVReflectionMapping:lp},N6={RepeatWrapping:cp,ClampToEdgeWrapping:vl,MirroredRepeatWrapping:up},D6={NearestFilter:Fs,NearestMipmapNearestFilter:TS,NearestMipmapLinearFilter:jd,LinearFilter:Zi,LinearMipmapNearestFilter:_m,LinearMipmapLinearFilter:jo},oL=new WeakMap;class DK extends Jl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Uf.get(`image-bitmap:${e}`);if(a!==void 0){if(r.manager.itemStart(e),a.then){a.then(c=>{if(oL.has(a)===!0)s&&s(oL.get(a)),r.manager.itemError(e),r.manager.itemEnd(e);else return t&&t(c),r.manager.itemEnd(e),c});return}return setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){return Uf.add(`image-bitmap:${e}`,c),t&&t(c),r.manager.itemEnd(e),c}).catch(function(c){s&&s(c),oL.set(l,c),Uf.remove(`image-bitmap:${e}`),r.manager.itemError(e),r.manager.itemEnd(e)});Uf.add(`image-bitmap:${e}`,l),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let AC;class tD{static getContext(){return AC===void 0&&(AC=new(window.AudioContext||window.webkitAudioContext)),AC}static setContext(e){AC=e}}class PK extends Jl{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new $f(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);tD.getContext().decodeAudioData(c,function(h){t(h)}).catch(o)}catch(c){o(c)}},n,s);function o(l){s?s(l):console.error(l),r.manager.itemError(e)}}}const P6=new an,O6=new an,X0=new an;class OK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new la,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new la,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,X0.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,a=t.near*Math.tan(Uv*t.fov*.5)/t.zoom;let o,l;O6.elements[12]=-s,P6.elements[12]=s,o=-a*t.aspect+r,l=a*t.aspect+r,X0.elements[0]=2*t.near/(l-o),X0.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(X0),o=-a*t.aspect-r,l=a*t.aspect-r,X0.elements[0]=2*t.near/(l-o),X0.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(X0)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(O6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(P6)}}class nD extends la{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class iD{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Y0=new ae,lL=new xl,GSe=new ae,K0=new ae,Z0=new ae;class LK extends Qi{constructor(){super(),this.type="AudioListener",this.context=tD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new iD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Y0,lL,GSe),K0.set(0,0,-1).applyQuaternion(lL),Z0.set(0,1,0).applyQuaternion(lL),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Y0.x,n),t.positionY.linearRampToValueAtTime(Y0.y,n),t.positionZ.linearRampToValueAtTime(Y0.z,n),t.forwardX.linearRampToValueAtTime(K0.x,n),t.forwardY.linearRampToValueAtTime(K0.y,n),t.forwardZ.linearRampToValueAtTime(K0.z,n),t.upX.linearRampToValueAtTime(Z0.x,n),t.upY.linearRampToValueAtTime(Z0.y,n),t.upZ.linearRampToValueAtTime(Z0.z,n)}else t.setPosition(Y0.x,Y0.y,Y0.z),t.setOrientation(K0.x,K0.y,K0.z,Z0.x,Z0.y,Z0.z)}}class hz extends Qi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Q0=new ae,L6=new xl,HSe=new ae,J0=new ae;class UK extends hz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Q0,L6,HSe),J0.set(0,0,1).applyQuaternion(L6);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Q0.x,n),t.positionY.linearRampToValueAtTime(Q0.y,n),t.positionZ.linearRampToValueAtTime(Q0.z,n),t.orientationX.linearRampToValueAtTime(J0.x,n),t.orientationY.linearRampToValueAtTime(J0.y,n),t.orientationZ.linearRampToValueAtTime(J0.z,n)}else t.setPosition(Q0.x,Q0.y,Q0.z),t.setOrientation(J0.x,J0.y,J0.z)}}class BK{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class pz{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,a;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==s;++o)n[r+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,r,0,o,s)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(n,s,l,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,a=s;r!==a;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,s){xl.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const a=this._workIndex*r;xl.multiplyQuaternionsFlat(e,a,e,t,e,n),xl.slerpFlat(e,t,e,t,e,a,s)}_lerp(e,t,n,s,r){const a=1-s;for(let o=0;o!==r;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*s}}_lerpAdditive(e,t,n,s,r){for(let a=0;a!==r;++a){const o=t+a;e[o]=e[o]+e[n+a]*s}}}const mz="\\[\\]\\.:\\/",jSe=new RegExp("["+mz+"]","g"),gz="[^"+mz+"]",$Se="[^"+mz.replace("\\.","")+"]",WSe=/((?:WC+[\/:])*)/.source.replace("WC",gz),qSe=/(WCOD+)?/.source.replace("WCOD",$Se),XSe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gz),YSe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gz),KSe=new RegExp("^"+WSe+qSe+XSe+YSe+"$"),ZSe=["material","materials","bones","map"];class QSe{constructor(e,t,n){const s=n||ns.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class ns{constructor(e,t,n){this.path=t,this.parsedPath=n||ns.parseTrackName(t),this.node=ns.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new ns.Composite(e,t,n):new ns(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jSe,"")}static parseTrackName(e){const t=KSe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);ZSe.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let a=0;a<r.length;a++){const o=r[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=ns.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[s];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ns.Composite=QSe;ns.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ns.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ns.prototype.GetterByBindingType=[ns.prototype._getValue_direct,ns.prototype._getValue_array,ns.prototype._getValue_arrayElement,ns.prototype._getValue_toArray];ns.prototype.SetterByBindingTypeAndVersioning=[[ns.prototype._setValue_direct,ns.prototype._setValue_direct_setNeedsUpdate,ns.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ns.prototype._setValue_array,ns.prototype._setValue_array_setNeedsUpdate,ns.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ns.prototype._setValue_arrayElement,ns.prototype._setValue_arrayElement_setNeedsUpdate,ns.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ns.prototype._setValue_fromArray,ns.prototype._setValue_fromArray_setNeedsUpdate,ns.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class IK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Zu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let o,l=e.length,c=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const m=arguments[d],v=m.uuid;let _=t[v];if(_===void 0){_=l++,t[v]=_,e.push(m);for(let x=0,T=a;x!==T;++x)r[x].push(new ns(m,n[x],s[x]))}else if(_<c){o=e[_];const x=--c,T=e[x];t[T.uuid]=_,e[_]=T,t[v]=x,e[x]=m;for(let b=0,w=a;b!==w;++b){const M=r[b],R=M[x];let N=M[_];M[_]=R,N===void 0&&(N=new ns(m,n[b],s[b])),M[x]=N}}else e[_]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,d=t[c];if(d!==void 0&&d>=r){const h=r++,m=e[h];t[m.uuid]=d,e[d]=m,t[c]=h,e[h]=l;for(let v=0,_=s;v!==_;++v){const x=n[v],T=x[h],b=x[d];x[d]=T,x[h]=b}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],d=c.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<r){const m=--r,v=e[m],_=--a,x=e[_];t[v.uuid]=h,e[h]=v,t[x.uuid]=m,e[m]=x,e.pop();for(let T=0,b=s;T!==b;++T){const w=n[T],M=w[m],R=w[_];w[h]=M,w[m]=R,w.pop()}}else{const m=--a,v=e[m];m>0&&(t[v.uuid]=h),e[h]=v,e.pop();for(let _=0,x=s;_!==x;++_){const T=n[_];T[h]=T[m],T.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,h=new Array(c);s=r.length,n[e]=s,a.push(e),o.push(t),r.push(h);for(let m=d,v=l.length;m!==v;++m){const _=l[m];h[m]=new ns(_,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=n,a[n]=l,a.pop(),r[n]=r[o],r.pop(),s[n]=s[o],s.pop()}}}class yz{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,a=r.length,o=new Array(a),l={endingStart:Kg,endingEnd:Kg};for(let c=0;c!==a;++c){const d=r[c].createInterpolant(null);o[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_F,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,r=e._clip.duration,a=r/s,o=s/r;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=s._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=r,l[1]=r+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case T2:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(a),c[d].accumulateAdditive(o);break;case Aw:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(a),c[d].accumulate(s,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const a=n===xF;if(e===0)return r===-1?s:a&&(r&1)===1?t-s:s;if(n===vF){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=t||s<0){const o=Math.floor(s/t);s-=t*o,r+=Math.abs(o);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=s;if(a&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=Zg,s.endingEnd=Zg):(e?s.endingStart=this.zeroSlopeAtStart?Zg:Kg:s.endingStart=$b,t?s.endingEnd=this.zeroSlopeAtEnd?Zg:Kg:s.endingEnd=$b)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,l[0]=t,o[1]=r+e,l[1]=n,this}}const JSe=new Float32Array(1);class FK extends _u{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let h=0;h!==r;++h){const m=s[h],v=m.name;let _=d[v];if(_!==void 0)++_.referenceCount,a[h]=_;else{if(_=a[h],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,l,v));continue}const x=t&&t._propertyBindings[h].binding.parsedPath;_=new pz(ns.create(n,v,x),m.ValueTypeName,m.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,l,v),a[h]=_}o[h].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],l=o.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete h[m],l.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[t];a===void 0&&(a={},s[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[s],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[r],Object.keys(o).length===0&&delete a[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new W2(new Float32Array(2),new Float32Array(2),1,JSe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let a=typeof e=="string"?Kb.findByName(s,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(a!==null?n=a.blendMode:n=Aw),l!==void 0){const h=l.actionByRoot[r];if(h!==void 0&&h.blendMode===n)return h;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const d=new yz(this,a,t,n);return this._bindAction(d,c),this._addInactiveAction(d,o,r),d}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?Kb.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(s,e,r,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const d=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const a in r){const o=r[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class zK extends rf{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Lw(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}let VK=class kK{constructor(e){this.value=e}clone(){return new kK(this.value.clone===void 0?this.value:this.value.clone())}},eTe=0,GK=class extends _u{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:eTe++}),this.name="",this.usage=a_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}};class vz extends PS{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class HK{constructor(e,t,n,s,r,a=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.normalized=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const U6=new an;class sD{constructor(e,t,n=0,s=1/0){this.ray=new T_(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new l_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return U6.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(U6),this}intersectObject(e,t=!0,n=[]){return X3(e,this,n,t),n.sort(B6),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)X3(e[s],this,n,t);return n.sort(B6),n}}function B6(i,e){return i.distance-e.distance}function X3(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,o=r.length;a<o;a++)X3(r[a],e,t,!0)}}class jK{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=tTe.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function tTe(){this._document.hidden===!1&&this.reset()}class _z{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Qn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Qn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class $K{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class VS{constructor(e,t,n,s){VS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}}const I6=new lt;class WK{constructor(e=new lt(1/0,1/0),t=new lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=I6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,I6).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const F6=new ae,CC=new ae,Fx=new ae,zx=new ae,cL=new ae,nTe=new ae,iTe=new ae;class qK{constructor(e=new ae,t=new ae){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){F6.subVectors(e,this.start),CC.subVectors(this.end,this.start);const n=CC.dot(CC);let r=CC.dot(F6)/n;return t&&(r=Qn(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=nTe,n=iTe){const s=10000000000000001e-32;let r,a;const o=this.start,l=e.start,c=this.end,d=e.end;Fx.subVectors(c,o),zx.subVectors(d,l),cL.subVectors(o,l);const h=Fx.dot(Fx),m=zx.dot(zx),v=zx.dot(cL);if(h<=s&&m<=s)return t.copy(o),n.copy(l),t.sub(n),t.dot(t);if(h<=s)r=0,a=v/m,a=Qn(a,0,1);else{const _=Fx.dot(cL);if(m<=s)a=0,r=Qn(-_/h,0,1);else{const x=Fx.dot(zx),T=h*m-x*x;T!==0?r=Qn((x*v-_*m)/T,0,1):r=0,a=(x*r+v)/m,a<0?(a=0,r=Qn(-_/h,0,1)):a>1&&(a=1,r=Qn((x-_)/h,0,1))}}return t.copy(o).add(Fx.multiplyScalar(r)),n.copy(l).add(zx.multiplyScalar(a)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const z6=new ae;class XK extends Qi{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new di,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,d=o/l*Math.PI*2;s.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new on(s,3));const r=new Sl({fog:!1,toneMapped:!1});this.cone=new Kf(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),z6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(z6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lg=new ae,RC=new an,uL=new an;class YK extends Kf{constructor(e){const t=KK(e),n=new di,s=[],r=[];for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new on(s,3)),n.setAttribute("color",new on(r,3));const a=new Sl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,a),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Vt(255),l=new Vt(65280);this.setColors(o,l)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");uL.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const o=t[r];o.parent&&o.parent.isBone&&(RC.multiplyMatrices(uL,o.matrixWorld),Lg.setFromMatrixPosition(RC),s.setXYZ(a,Lg.x,Lg.y,Lg.z),RC.multiplyMatrices(uL,o.parent.matrixWorld),Lg.setFromMatrixPosition(RC),s.setXYZ(a+1,Lg.x,Lg.y,Lg.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let r=0;r<s.count;r+=2)s.setXYZ(r,e.r,e.g,e.b),s.setXYZ(r+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function KK(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...KK(i.children[t]));return e}class ZK extends zs{constructor(e,t,n){const s=new M_(t,4,2),r=new Gl({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sTe=new ae,V6=new Vt,k6=new Vt;class QK extends Qi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new US(t);s.rotateY(Math.PI*.5),this.material=new Gl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new os(a,3)),this.add(new zs(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");V6.copy(this.light.color),k6.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?V6:k6;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sTe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class JK extends Kf{constructor(e=10,t=10,n=4473924,s=8947848){n=new Vt(n),s=new Vt(s);const r=t/2,a=e/t,o=e/2,l=[],c=[];for(let m=0,v=0,_=-o;m<=t;m++,_+=a){l.push(-o,0,_,o,0,_),l.push(_,0,-o,_,0,o);const x=m===r?n:s;x.toArray(c,v),v+=3,x.toArray(c,v),v+=3,x.toArray(c,v),v+=3,x.toArray(c,v),v+=3}const d=new di;d.setAttribute("position",new on(l,3)),d.setAttribute("color",new on(c,3));const h=new Sl({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class eZ extends Kf{constructor(e=10,t=16,n=8,s=64,r=4473924,a=8947848){r=new Vt(r),a=new Vt(a);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const m=h/t*(Math.PI*2),v=Math.sin(m)*e,_=Math.cos(m)*e;o.push(0,0,0),o.push(v,0,_);const x=h&1?r:a;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let h=0;h<n;h++){const m=h&1?r:a,v=e-e/n*h;for(let _=0;_<s;_++){let x=_/s*(Math.PI*2),T=Math.sin(x)*v,b=Math.cos(x)*v;o.push(T,0,b),l.push(m.r,m.g,m.b),x=(_+1)/s*(Math.PI*2),T=Math.sin(x)*v,b=Math.cos(x)*v,o.push(T,0,b),l.push(m.r,m.g,m.b)}}const c=new di;c.setAttribute("position",new on(o,3)),c.setAttribute("color",new on(l,3));const d=new Sl({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const G6=new ae,NC=new ae,H6=new ae;class tZ extends Qi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new di;s.setAttribute("position",new on([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Sl({fog:!1,toneMapped:!1});this.lightPlane=new Pm(s,r),this.add(this.lightPlane),s=new di,s.setAttribute("position",new on([0,0,0,0,0,1],3)),this.targetLine=new Pm(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),G6.setFromMatrixPosition(this.light.matrixWorld),NC.setFromMatrixPosition(this.light.target.matrixWorld),H6.subVectors(NC,G6),this.lightPlane.lookAt(NC),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(NC),this.targetLine.scale.z=H6.length()}}const DC=new ae,Ta=new DS;class nZ extends Kf{constructor(e){const t=new di,n=new Sl({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,x){l(_),l(x)}function l(_){s.push(0,0,0),r.push(0,0,0),a[_]===void 0&&(a[_]=[]),a[_].push(s.length/3-1)}t.setAttribute("position",new on(s,3)),t.setAttribute("color",new on(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new Vt(16755200),d=new Vt(16711680),h=new Vt(43775),m=new Vt(16777215),v=new Vt(3355443);this.setColors(c,d,h,m,v)}setColors(e,t,n,s,r){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,s.r,s.g,s.b),o.setXYZ(39,s.r,s.g,s.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;let r,a;if(Ta.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,a=0;else if(this.camera.coordinateSystem===$o)r=-1,a=1;else if(this.camera.coordinateSystem===id)r=0,a=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Ga("c",t,e,Ta,0,0,r),Ga("t",t,e,Ta,0,0,a),Ga("n1",t,e,Ta,-n,-s,r),Ga("n2",t,e,Ta,n,-s,r),Ga("n3",t,e,Ta,-n,s,r),Ga("n4",t,e,Ta,n,s,r),Ga("f1",t,e,Ta,-n,-s,a),Ga("f2",t,e,Ta,n,-s,a),Ga("f3",t,e,Ta,-n,s,a),Ga("f4",t,e,Ta,n,s,a),Ga("u1",t,e,Ta,n*.7,s*1.1,r),Ga("u2",t,e,Ta,-n*.7,s*1.1,r),Ga("u3",t,e,Ta,0,s*2,r),Ga("cf1",t,e,Ta,-n,0,a),Ga("cf2",t,e,Ta,n,0,a),Ga("cf3",t,e,Ta,0,-s,a),Ga("cf4",t,e,Ta,0,s,a),Ga("cn1",t,e,Ta,-n,0,r),Ga("cn2",t,e,Ta,n,0,r),Ga("cn3",t,e,Ta,0,-s,r),Ga("cn4",t,e,Ta,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ga(i,e,t,n,s,r,a){DC.set(s,r,a).unproject(n);const o=e[i];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,d=o.length;c<d;c++)l.setXYZ(o[c],DC.x,DC.y,DC.z)}}const PC=new Xo;class iZ extends Kf{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),r=new di;r.setIndex(new os(n,1)),r.setAttribute("position",new os(s,3)),super(r,new Sl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&PC.setFromObject(this.object),PC.isEmpty())return;const e=PC.min,t=PC.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sZ extends Kf{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new di;r.setIndex(new os(n,1)),r.setAttribute("position",new on(s,3)),super(r,new Sl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class rZ extends Pm{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new di;a.setAttribute("position",new on(r,3)),a.computeBoundingSphere(),super(a,new Sl({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new di;l.setAttribute("position",new on(o,3)),l.computeBoundingSphere(),this.add(new zs(l,new Gl({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const j6=new ae;let OC,dL;class aZ extends Qi{constructor(e=new ae(0,0,1),t=new ae(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",OC===void 0&&(OC=new di,OC.setAttribute("position",new on([0,0,0,0,1,0],3)),dL=new LS(.5,1,5,1),dL.translate(0,-.5,0)),this.position.copy(t),this.line=new Pm(OC,new Sl({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new zs(dL,new Gl({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{j6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(j6,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class oZ extends Kf{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new di;s.setAttribute("position",new on(t,3)),s.setAttribute("color",new on(n,3));const r=new Sl({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new Vt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lZ{constructor(){this.type="ShapePath",this.color=new Vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new PE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,a){return this.currentPath.bezierCurveTo(e,t,n,s,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const w=[];for(let M=0,R=b.length;M<R;M++){const N=b[M],D=new ay;D.curves=N.curves,w.push(D)}return w}function n(b,w){const M=w.length;let R=!1;for(let N=M-1,D=0;D<M;N=D++){let L=w[N],F=w[D],I=F.x-L.x,z=F.y-L.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(L=w[D],I=-I,F=w[N],z=-z),b.y<L.y||b.y>F.y)continue;if(b.y===L.y){if(b.x===L.x)return!0}else{const H=z*(b.x-L.x)-I*(b.y-L.y);if(H===0)return!0;if(H<0)continue;R=!R}}else{if(b.y!==L.y)continue;if(F.x<=b.x&&b.x<=L.x||L.x<=b.x&&b.x<=F.x)return!0}}return R}const s=$d.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,o,l;const c=[];if(r.length===1)return o=r[0],l=new ay,l.curves=o.curves,c.push(l),c;let d=!s(r[0].getPoints());d=e?!d:d;const h=[],m=[];let v=[],_=0,x;m[_]=void 0,v[_]=[];for(let b=0,w=r.length;b<w;b++)o=r[b],x=o.getPoints(),a=s(x),a=e?!a:a,a?(!d&&m[_]&&_++,m[_]={s:new ay,p:x},m[_].s.curves=o.curves,d&&_++,v[_]=[]):v[_].push({h:o,p:x[0]});if(!m[0])return t(r);if(m.length>1){let b=!1,w=0;for(let M=0,R=m.length;M<R;M++)h[M]=[];for(let M=0,R=m.length;M<R;M++){const N=v[M];for(let D=0;D<N.length;D++){const L=N[D];let F=!0;for(let I=0;I<m.length;I++)n(L.p,m[I].p)&&(M!==I&&w++,F?(F=!1,h[I].push(L)):b=!0);F&&h[M].push(L)}}w>0&&b===!1&&(v=h)}let T;for(let b=0,w=m.length;b<w;b++){l=m[b].s,c.push(l),T=v[b];for(let M=0,R=T.length;M<R;M++)l.holes.push(T[M].h)}return c}}class cZ extends _u{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function rTe(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function aTe(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function oTe(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function xN(i,e,t,n){const s=lTe(n);switch(t){case Mw:return i*e;case qy:return i*e/s.components*s.byteLength;case km:return i*e/s.components*s.byteLength;case Of:return i*e*2/s.components*s.byteLength;case Xy:return i*e*2/s.components*s.byteLength;case S_:return i*e*3/s.components*s.byteLength;case nr:return i*e*4/s.components*s.byteLength;case Yy:return i*e*4/s.components*s.byteLength;case Wh:case qh:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Xh:case Yh:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case i_:case r_:return Math.max(i,16)*Math.max(e,8)/4;case n_:case s_:return Math.max(i,8)*Math.max(e,8)/2;case vy:case _y:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case xy:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case by:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Sy:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Ty:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Ey:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case wy:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case My:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Ay:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Cy:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Ry:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Ny:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Dy:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Py:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Oy:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Ly:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Uy:case AE:case CE:return Math.ceil(i/4)*Math.ceil(e/4)*16;case By:case Iy:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Fy:case zy:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function lTe(i){switch(i){case Tr:case xm:return{byteLength:1,components:1};case Xu:case bm:case $a:return{byteLength:2,components:1};case ES:case wS:return{byteLength:2,components:4};case Rs:case oo:case fr:return{byteLength:4,components:1};case MS:case AS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class uZ{static contain(e,t){return rTe(e,t)}static cover(e,t){return aTe(e,t)}static fill(e){return oTe(e)}static getByteLength(e,t,n,s){return xN(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:x_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=x_);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function dZ(){let i=null,e=!1,t=null,n=null;function s(r,a){t(r,a),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function cTe(i){const e=new WeakMap;function t(o,l){const c=o.array,d=o.usage,h=c.byteLength,m=i.createBuffer();i.bindBuffer(l,m),i.bufferData(l,c,d),o.onUploadCallback();let v;if(c instanceof Float32Array)v=i.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)v=i.HALF_FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?v=i.HALF_FLOAT:v=i.UNSIGNED_SHORT;else if(c instanceof Int16Array)v=i.SHORT;else if(c instanceof Uint32Array)v=i.UNSIGNED_INT;else if(c instanceof Int32Array)v=i.INT;else if(c instanceof Int8Array)v=i.BYTE;else if(c instanceof Uint8Array)v=i.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)v=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:v,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function n(o,l,c){const d=l.array,h=l.updateRanges;if(i.bindBuffer(c,o),h.length===0)i.bufferSubData(c,0,d);else{h.sort((v,_)=>v.start-_.start);let m=0;for(let v=1;v<h.length;v++){const _=h[m],x=h[v];x.start<=_.start+_.count+1?_.count=Math.max(_.count,x.start+x.count-_.start):(++m,h[m]=x)}h.length=m+1;for(let v=0,_=h.length;v<_;v++){const x=h[v];i.bufferSubData(c,x.start*d.BYTES_PER_ELEMENT,d,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,l),c.version=o.version}}return{get:s,remove:r,update:a}}var uTe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,dTe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fTe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hTe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pTe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,mTe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,gTe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,yTe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,vTe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,_Te=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,xTe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bTe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,STe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,TTe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ETe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,wTe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,MTe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ATe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,CTe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,RTe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,NTe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,DTe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,PTe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,OTe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,LTe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,UTe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,BTe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ITe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FTe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zTe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VTe="gl_FragColor = linearToOutputTexel( gl_FragColor );",kTe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,GTe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,HTe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jTe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$Te=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,WTe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qTe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,XTe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,YTe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KTe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ZTe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,QTe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,JTe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,e1e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,t1e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,n1e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,i1e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,s1e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,r1e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,a1e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,o1e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,l1e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,c1e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,u1e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,d1e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,f1e=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,h1e=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,p1e=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,m1e=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,g1e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,y1e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,v1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_1e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,x1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,b1e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,S1e=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,T1e=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,E1e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,w1e=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,M1e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,A1e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,C1e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,R1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,N1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,D1e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,P1e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,O1e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,L1e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,U1e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,B1e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,I1e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,F1e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,z1e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,V1e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,k1e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,G1e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,H1e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,j1e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,W1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,q1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,X1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Y1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,K1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Z1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Q1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,J1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,eEe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,sEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uEe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fEe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pEe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,gEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,yEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,vEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,_Ee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,xEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bEe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SEe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,EEe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wEe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MEe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AEe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,CEe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,REe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,NEe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,DEe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PEe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OEe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,LEe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UEe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BEe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IEe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,FEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zEe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VEe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,kEe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mi={alphahash_fragment:uTe,alphahash_pars_fragment:dTe,alphamap_fragment:fTe,alphamap_pars_fragment:hTe,alphatest_fragment:pTe,alphatest_pars_fragment:mTe,aomap_fragment:gTe,aomap_pars_fragment:yTe,batching_pars_vertex:vTe,batching_vertex:_Te,begin_vertex:xTe,beginnormal_vertex:bTe,bsdfs:STe,iridescence_fragment:TTe,bumpmap_pars_fragment:ETe,clipping_planes_fragment:wTe,clipping_planes_pars_fragment:MTe,clipping_planes_pars_vertex:ATe,clipping_planes_vertex:CTe,color_fragment:RTe,color_pars_fragment:NTe,color_pars_vertex:DTe,color_vertex:PTe,common:OTe,cube_uv_reflection_fragment:LTe,defaultnormal_vertex:UTe,displacementmap_pars_vertex:BTe,displacementmap_vertex:ITe,emissivemap_fragment:FTe,emissivemap_pars_fragment:zTe,colorspace_fragment:VTe,colorspace_pars_fragment:kTe,envmap_fragment:GTe,envmap_common_pars_fragment:HTe,envmap_pars_fragment:jTe,envmap_pars_vertex:$Te,envmap_physical_pars_fragment:n1e,envmap_vertex:WTe,fog_vertex:qTe,fog_pars_vertex:XTe,fog_fragment:YTe,fog_pars_fragment:KTe,gradientmap_pars_fragment:ZTe,lightmap_pars_fragment:QTe,lights_lambert_fragment:JTe,lights_lambert_pars_fragment:e1e,lights_pars_begin:t1e,lights_toon_fragment:i1e,lights_toon_pars_fragment:s1e,lights_phong_fragment:r1e,lights_phong_pars_fragment:a1e,lights_physical_fragment:o1e,lights_physical_pars_fragment:l1e,lights_fragment_begin:c1e,lights_fragment_maps:u1e,lights_fragment_end:d1e,logdepthbuf_fragment:f1e,logdepthbuf_pars_fragment:h1e,logdepthbuf_pars_vertex:p1e,logdepthbuf_vertex:m1e,map_fragment:g1e,map_pars_fragment:y1e,map_particle_fragment:v1e,map_particle_pars_fragment:_1e,metalnessmap_fragment:x1e,metalnessmap_pars_fragment:b1e,morphinstance_vertex:S1e,morphcolor_vertex:T1e,morphnormal_vertex:E1e,morphtarget_pars_vertex:w1e,morphtarget_vertex:M1e,normal_fragment_begin:A1e,normal_fragment_maps:C1e,normal_pars_fragment:R1e,normal_pars_vertex:N1e,normal_vertex:D1e,normalmap_pars_fragment:P1e,clearcoat_normal_fragment_begin:O1e,clearcoat_normal_fragment_maps:L1e,clearcoat_pars_fragment:U1e,iridescence_pars_fragment:B1e,opaque_fragment:I1e,packing:F1e,premultiplied_alpha_fragment:z1e,project_vertex:V1e,dithering_fragment:k1e,dithering_pars_fragment:G1e,roughnessmap_fragment:H1e,roughnessmap_pars_fragment:j1e,shadowmap_pars_fragment:$1e,shadowmap_pars_vertex:W1e,shadowmap_vertex:q1e,shadowmask_pars_fragment:X1e,skinbase_vertex:Y1e,skinning_pars_vertex:K1e,skinning_vertex:Z1e,skinnormal_vertex:Q1e,specularmap_fragment:J1e,specularmap_pars_fragment:eEe,tonemapping_fragment:tEe,tonemapping_pars_fragment:nEe,transmission_fragment:iEe,transmission_pars_fragment:sEe,uv_pars_fragment:rEe,uv_pars_vertex:aEe,uv_vertex:oEe,worldpos_vertex:lEe,background_vert:cEe,background_frag:uEe,backgroundCube_vert:dEe,backgroundCube_frag:fEe,cube_vert:hEe,cube_frag:pEe,depth_vert:mEe,depth_frag:gEe,distanceRGBA_vert:yEe,distanceRGBA_frag:vEe,equirect_vert:_Ee,equirect_frag:xEe,linedashed_vert:bEe,linedashed_frag:SEe,meshbasic_vert:TEe,meshbasic_frag:EEe,meshlambert_vert:wEe,meshlambert_frag:MEe,meshmatcap_vert:AEe,meshmatcap_frag:CEe,meshnormal_vert:REe,meshnormal_frag:NEe,meshphong_vert:DEe,meshphong_frag:PEe,meshphysical_vert:OEe,meshphysical_frag:LEe,meshtoon_vert:UEe,meshtoon_frag:BEe,points_vert:IEe,points_frag:FEe,shadow_vert:zEe,shadow_frag:VEe,sprite_vert:kEe,sprite_frag:GEe},qt={common:{diffuse:{value:new Vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kn},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kn}},envmap:{envMap:{value:null},envMapRotation:{value:new Kn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kn},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0},uvTransform:{value:new Kn}},sprite:{diffuse:{value:new Vt(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kn},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0}}},Pf={basic:{uniforms:vc([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.fog]),vertexShader:Mi.meshbasic_vert,fragmentShader:Mi.meshbasic_frag},lambert:{uniforms:vc([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,qt.lights,{emissive:{value:new Vt(0)}}]),vertexShader:Mi.meshlambert_vert,fragmentShader:Mi.meshlambert_frag},phong:{uniforms:vc([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,qt.lights,{emissive:{value:new Vt(0)},specular:{value:new Vt(1118481)},shininess:{value:30}}]),vertexShader:Mi.meshphong_vert,fragmentShader:Mi.meshphong_frag},standard:{uniforms:vc([qt.common,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.roughnessmap,qt.metalnessmap,qt.fog,qt.lights,{emissive:{value:new Vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mi.meshphysical_vert,fragmentShader:Mi.meshphysical_frag},toon:{uniforms:vc([qt.common,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.gradientmap,qt.fog,qt.lights,{emissive:{value:new Vt(0)}}]),vertexShader:Mi.meshtoon_vert,fragmentShader:Mi.meshtoon_frag},matcap:{uniforms:vc([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.fog,{matcap:{value:null}}]),vertexShader:Mi.meshmatcap_vert,fragmentShader:Mi.meshmatcap_frag},points:{uniforms:vc([qt.points,qt.fog]),vertexShader:Mi.points_vert,fragmentShader:Mi.points_frag},dashed:{uniforms:vc([qt.common,qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mi.linedashed_vert,fragmentShader:Mi.linedashed_frag},depth:{uniforms:vc([qt.common,qt.displacementmap]),vertexShader:Mi.depth_vert,fragmentShader:Mi.depth_frag},normal:{uniforms:vc([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,{opacity:{value:1}}]),vertexShader:Mi.meshnormal_vert,fragmentShader:Mi.meshnormal_frag},sprite:{uniforms:vc([qt.sprite,qt.fog]),vertexShader:Mi.sprite_vert,fragmentShader:Mi.sprite_frag},background:{uniforms:{uvTransform:{value:new Kn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mi.background_vert,fragmentShader:Mi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Kn}},vertexShader:Mi.backgroundCube_vert,fragmentShader:Mi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mi.cube_vert,fragmentShader:Mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mi.equirect_vert,fragmentShader:Mi.equirect_frag},distanceRGBA:{uniforms:vc([qt.common,qt.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mi.distanceRGBA_vert,fragmentShader:Mi.distanceRGBA_frag},shadow:{uniforms:vc([qt.lights,qt.fog,{color:{value:new Vt(0)},opacity:{value:1}}]),vertexShader:Mi.shadow_vert,fragmentShader:Mi.shadow_frag}};Pf.physical={uniforms:vc([Pf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kn},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kn},sheen:{value:0},sheenColor:{value:new Vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kn},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kn},attenuationDistance:{value:0},attenuationColor:{value:new Vt(0)},specularColor:{value:new Vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kn},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kn}}]),vertexShader:Mi.meshphysical_vert,fragmentShader:Mi.meshphysical_frag};const LC={r:0,b:0,g:0},ev=new Kl,HEe=new an;function jEe(i,e,t,n,s,r,a){const o=new Vt(0);let l=r===!0?0:1,c,d,h=null,m=0,v=null;function _(M){let R=M.isScene===!0?M.background:null;return R&&R.isTexture&&(R=(M.backgroundBlurriness>0?t:e).get(R)),R}function x(M){let R=!1;const N=_(M);N===null?b(o,l):N&&N.isColor&&(b(N,1),R=!0);const D=i.xr.getEnvironmentBlendMode();D==="additive"?n.buffers.color.setClear(0,0,0,1,a):D==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||R)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function T(M,R){const N=_(R);N&&(N.isCubeTexture||N.mapping===lp)?(d===void 0&&(d=new zs(new hp(1,1,1),new Qd({name:"BackgroundCubeMaterial",uniforms:Wb(Pf.backgroundCube.uniforms),vertexShader:Pf.backgroundCube.vertexShader,fragmentShader:Pf.backgroundCube.fragmentShader,side:Ts,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(D,L,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),ev.copy(R.backgroundRotation),ev.x*=-1,ev.y*=-1,ev.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(ev.y*=-1,ev.z*=-1),d.material.uniforms.envMap.value=N,d.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(HEe.makeRotationFromEuler(ev)),d.material.toneMapped=Sn.getTransfer(N.colorSpace)!==Kt,(h!==N||m!==N.version||v!==i.toneMapping)&&(d.material.needsUpdate=!0,h=N,m=N.version,v=i.toneMapping),d.layers.enableAll(),M.unshift(d,d.geometry,d.material,0,0,null)):N&&N.isTexture&&(c===void 0&&(c=new zs(new Zy(2,2),new Qd({name:"BackgroundMaterial",uniforms:Wb(Pf.background.uniforms),vertexShader:Pf.background.vertexShader,fragmentShader:Pf.background.fragmentShader,side:Nc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=N,c.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,c.material.toneMapped=Sn.getTransfer(N.colorSpace)!==Kt,N.matrixAutoUpdate===!0&&N.updateMatrix(),c.material.uniforms.uvTransform.value.copy(N.matrix),(h!==N||m!==N.version||v!==i.toneMapping)&&(c.material.needsUpdate=!0,h=N,m=N.version,v=i.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null))}function b(M,R){M.getRGB(LC,hK(i)),n.buffers.color.setClear(LC.r,LC.g,LC.b,R,a)}function w(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(M,R=1){o.set(M),l=R,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,b(o,l)},render:x,addToRenderList:T,dispose:w}}function $Ee(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=m(null);let r=s,a=!1;function o(z,H,Y,Z,se){let oe=!1;const G=h(Z,Y,H);r!==G&&(r=G,c(r.object)),oe=v(z,Z,Y,se),oe&&_(z,Z,Y,se),se!==null&&e.update(se,i.ELEMENT_ARRAY_BUFFER),(oe||a)&&(a=!1,R(z,H,Y,Z),se!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(se).buffer))}function l(){return i.createVertexArray()}function c(z){return i.bindVertexArray(z)}function d(z){return i.deleteVertexArray(z)}function h(z,H,Y){const Z=Y.wireframe===!0;let se=n[z.id];se===void 0&&(se={},n[z.id]=se);let oe=se[H.id];oe===void 0&&(oe={},se[H.id]=oe);let G=oe[Z];return G===void 0&&(G=m(l()),oe[Z]=G),G}function m(z){const H=[],Y=[],Z=[];for(let se=0;se<t;se++)H[se]=0,Y[se]=0,Z[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:Y,attributeDivisors:Z,object:z,attributes:{},index:null}}function v(z,H,Y,Z){const se=r.attributes,oe=H.attributes;let G=0;const K=Y.getAttributes();for(const $ in K)if(K[$].location>=0){const q=se[$];let ue=oe[$];if(ue===void 0&&($==="instanceMatrix"&&z.instanceMatrix&&(ue=z.instanceMatrix),$==="instanceColor"&&z.instanceColor&&(ue=z.instanceColor)),q===void 0||q.attribute!==ue||ue&&q.data!==ue.data)return!0;G++}return r.attributesNum!==G||r.index!==Z}function _(z,H,Y,Z){const se={},oe=H.attributes;let G=0;const K=Y.getAttributes();for(const $ in K)if(K[$].location>=0){let q=oe[$];q===void 0&&($==="instanceMatrix"&&z.instanceMatrix&&(q=z.instanceMatrix),$==="instanceColor"&&z.instanceColor&&(q=z.instanceColor));const ue={};ue.attribute=q,q&&q.data&&(ue.data=q.data),se[$]=ue,G++}r.attributes=se,r.attributesNum=G,r.index=Z}function x(){const z=r.newAttributes;for(let H=0,Y=z.length;H<Y;H++)z[H]=0}function T(z){b(z,0)}function b(z,H){const Y=r.newAttributes,Z=r.enabledAttributes,se=r.attributeDivisors;Y[z]=1,Z[z]===0&&(i.enableVertexAttribArray(z),Z[z]=1),se[z]!==H&&(i.vertexAttribDivisor(z,H),se[z]=H)}function w(){const z=r.newAttributes,H=r.enabledAttributes;for(let Y=0,Z=H.length;Y<Z;Y++)H[Y]!==z[Y]&&(i.disableVertexAttribArray(Y),H[Y]=0)}function M(z,H,Y,Z,se,oe,G){G===!0?i.vertexAttribIPointer(z,H,Y,se,oe):i.vertexAttribPointer(z,H,Y,Z,se,oe)}function R(z,H,Y,Z){x();const se=Z.attributes,oe=Y.getAttributes(),G=H.defaultAttributeValues;for(const K in oe){const $=oe[K];if($.location>=0){let ce=se[K];if(ce===void 0&&(K==="instanceMatrix"&&z.instanceMatrix&&(ce=z.instanceMatrix),K==="instanceColor"&&z.instanceColor&&(ce=z.instanceColor)),ce!==void 0){const q=ce.normalized,ue=ce.itemSize,Ae=e.get(ce);if(Ae===void 0)continue;const Ne=Ae.buffer,we=Ae.type,pt=Ae.bytesPerElement,Ee=we===i.INT||we===i.UNSIGNED_INT||ce.gpuType===oo;if(ce.isInterleavedBufferAttribute){const Ue=ce.data,Ve=Ue.stride,Be=ce.offset;if(Ue.isInstancedInterleavedBuffer){for(let Mt=0;Mt<$.locationSize;Mt++)b($.location+Mt,Ue.meshPerAttribute);z.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let Mt=0;Mt<$.locationSize;Mt++)T($.location+Mt);i.bindBuffer(i.ARRAY_BUFFER,Ne);for(let Mt=0;Mt<$.locationSize;Mt++)M($.location+Mt,ue/$.locationSize,we,q,Ve*pt,(Be+ue/$.locationSize*Mt)*pt,Ee)}else{if(ce.isInstancedBufferAttribute){for(let Ue=0;Ue<$.locationSize;Ue++)b($.location+Ue,ce.meshPerAttribute);z.isInstancedMesh!==!0&&Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Ue=0;Ue<$.locationSize;Ue++)T($.location+Ue);i.bindBuffer(i.ARRAY_BUFFER,Ne);for(let Ue=0;Ue<$.locationSize;Ue++)M($.location+Ue,ue/$.locationSize,we,q,ue*pt,ue/$.locationSize*Ue*pt,Ee)}}else if(G!==void 0){const q=G[K];if(q!==void 0)switch(q.length){case 2:i.vertexAttrib2fv($.location,q);break;case 3:i.vertexAttrib3fv($.location,q);break;case 4:i.vertexAttrib4fv($.location,q);break;default:i.vertexAttrib1fv($.location,q)}}}}w()}function N(){F();for(const z in n){const H=n[z];for(const Y in H){const Z=H[Y];for(const se in Z)d(Z[se].object),delete Z[se];delete H[Y]}delete n[z]}}function D(z){if(n[z.id]===void 0)return;const H=n[z.id];for(const Y in H){const Z=H[Y];for(const se in Z)d(Z[se].object),delete Z[se];delete H[Y]}delete n[z.id]}function L(z){for(const H in n){const Y=n[H];if(Y[z.id]===void 0)continue;const Z=Y[z.id];for(const se in Z)d(Z[se].object),delete Z[se];delete Y[z.id]}}function F(){I(),a=!0,r!==s&&(r=s,c(r.object))}function I(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:F,resetDefaultState:I,dispose:N,releaseStatesOfGeometry:D,releaseStatesOfProgram:L,initAttributes:x,enableAttribute:T,disableUnusedAttributes:w}}function WEe(i,e,t){let n;function s(c){n=c}function r(c,d){i.drawArrays(n,c,d),t.update(d,n,1)}function a(c,d,h){h!==0&&(i.drawArraysInstanced(n,c,d,h),t.update(d,n,h))}function o(c,d,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,d,0,h);let v=0;for(let _=0;_<h;_++)v+=d[_];t.update(v,n,1)}function l(c,d,h,m){if(h===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<c.length;_++)a(c[_],d[_],m[_]);else{v.multiDrawArraysInstancedWEBGL(n,c,0,d,0,m,0,h);let _=0;for(let x=0;x<h;x++)_+=d[x]*m[x];t.update(_,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function qEe(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(L){return!(L!==nr&&n.convert(L)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(L){const F=L===$a&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(L!==Tr&&n.convert(L)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==fr&&!F)}function l(L){if(L==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const h=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),v=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),w=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),M=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=_>0,D=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,reversedDepthBuffer:m,maxTextures:v,maxVertexTextures:_,maxTextureSize:x,maxCubemapSize:T,maxAttributes:b,maxVertexUniforms:w,maxVaryings:M,maxFragmentUniforms:R,vertexTextures:N,maxSamples:D}}function XEe(i){const e=this;let t=null,n=0,s=!1,r=!1;const a=new Df,o=new Kn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){const v=h.length!==0||m||n!==0||s;return s=m,n=h.length,v},this.beginShadows=function(){r=!0,d(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(h,m){t=d(h,m,0)},this.setState=function(h,m,v){const _=h.clippingPlanes,x=h.clipIntersection,T=h.clipShadows,b=i.get(h);if(!s||_===null||_.length===0||r&&!T)r?d(null):c();else{const w=r?0:n,M=w*4;let R=b.clippingState||null;l.value=R,R=d(_,m,M,v);for(let N=0;N!==M;++N)R[N]=t[N];b.clippingState=R,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(h,m,v,_){const x=h!==null?h.length:0;let T=null;if(x!==0){if(T=l.value,_!==!0||T===null){const b=v+x*4,w=m.matrixWorldInverse;o.getNormalMatrix(w),(T===null||T.length<b)&&(T=new Float32Array(b));for(let M=0,R=v;M!==x;++M,R+=4)a.copy(h[M]).applyMatrix4(w,o),a.normal.toArray(T,R),T[R+3]=a.constant}l.value=T,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,T}}function YEe(i){let e=new WeakMap;function t(a,o){return o===Rm?a.mapping=gu:o===Nm&&(a.mapping=nd),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Rm||o===Nm)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new C2(l.height);return c.fromEquirectangularTexture(i,a),e.set(a,c),a.addEventListener("dispose",s),t(c.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const cb=4,$6=[.125,.215,.35,.446,.526,.582],yv=20,fL=new e0,W6=new Vt;let hL=null,pL=0,mL=0,gL=!1;const pv=(1+Math.sqrt(5))/2,Vx=1/pv,q6=[new ae(-pv,Vx,0),new ae(pv,Vx,0),new ae(-Vx,0,pv),new ae(Vx,0,pv),new ae(0,pv,-Vx),new ae(0,pv,Vx),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)],KEe=new ae;let Y3=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,r={}){const{size:a=256,position:o=KEe}=r;hL=this._renderer.getRenderTarget(),pL=this._renderer.getActiveCubeFace(),mL=this._renderer.getActiveMipmapLevel(),gL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,s,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=K6(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Y6(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(hL,pL,mL),this._renderer.xr.enabled=gL,e.scissorTest=!1,UC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===gu||e.mapping===nd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hL=this._renderer.getRenderTarget(),pL=this._renderer.getActiveCubeFace(),mL=this._renderer.getActiveMipmapLevel(),gL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Zi,minFilter:Zi,generateMipmaps:!1,type:$a,format:nr,colorSpace:Hf,depthBuffer:!1},s=X6(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=X6(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ZEe(r)),this._blurMaterial=QEe(r,e,t)}return s}_compileMaterial(e){const t=new zs(this._lodPlanes[0],e);this._renderer.compile(t,fL)}_sceneToCubeUV(e,t,n,s,r){const l=new la(90,1,t,n),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,m=h.autoClear,v=h.toneMapping;h.getClearColor(W6),h.toneMapping=bo,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(s),h.clearDepth(),h.setRenderTarget(null));const x=new Gl({name:"PMREM.Background",side:Ts,depthWrite:!1,depthTest:!1}),T=new zs(new hp,x);let b=!1;const w=e.background;w?w.isColor&&(x.color.copy(w),e.background=null,b=!0):(x.color.copy(W6),b=!0);for(let M=0;M<6;M++){const R=M%3;R===0?(l.up.set(0,c[M],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x+d[M],r.y,r.z)):R===1?(l.up.set(0,0,c[M]),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y+d[M],r.z)):(l.up.set(0,c[M],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y,r.z+d[M]));const N=this._cubeSize;UC(s,R*N,M>2?N:0,N,N),h.setRenderTarget(s),b&&h.render(T,l),h.render(e,l)}T.geometry.dispose(),T.material.dispose(),h.toneMapping=v,h.autoClear=m,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===gu||e.mapping===nd;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=K6()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Y6());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new zs(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;UC(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,fL)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=q6[(s-r-1)%q6.length];this._blur(e,r-1,r,a,o)}t.autoClear=n}_blur(e,t,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,s,"latitudinal",r),this._halfBlur(a,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new zs(this._lodPlanes[s],c),m=c.uniforms,v=this._sizeLods[n]-1,_=isFinite(r)?Math.PI/(2*v):2*Math.PI/(2*yv-1),x=r/_,T=isFinite(r)?1+Math.floor(d*x):yv;T>yv&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${yv}`);const b=[];let w=0;for(let L=0;L<yv;++L){const F=L/x,I=Math.exp(-F*F/2);b.push(I),L===0?w+=I:L<T&&(w+=2*I)}for(let L=0;L<b.length;L++)b[L]=b[L]/w;m.envMap.value=e.texture,m.samples.value=T,m.weights.value=b,m.latitudinal.value=a==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:M}=this;m.dTheta.value=_,m.mipInt.value=M-n;const R=this._sizeLods[s],N=3*R*(s>M-cb?s-M+cb:0),D=4*(this._cubeSize-R);UC(t,N,D,3*R,2*R),l.setRenderTarget(t),l.render(h,fL)}};function ZEe(i){const e=[],t=[],n=[];let s=i;const r=i-cb+1+$6.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);t.push(o);let l=1/o;a>i-cb?l=$6[a-i+cb-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),d=-c,h=1+c,m=[d,d,h,d,h,h,d,d,h,h,d,h],v=6,_=6,x=3,T=2,b=1,w=new Float32Array(x*_*v),M=new Float32Array(T*_*v),R=new Float32Array(b*_*v);for(let D=0;D<v;D++){const L=D%3*2/3-1,F=D>2?0:-1,I=[L,F,0,L+2/3,F,0,L+2/3,F+1,0,L,F,0,L+2/3,F+1,0,L,F+1,0];w.set(I,x*_*D),M.set(m,T*_*D);const z=[D,D,D,D,D,D];R.set(z,b*_*D)}const N=new di;N.setAttribute("position",new os(w,x)),N.setAttribute("uv",new os(M,T)),N.setAttribute("faceIndex",new os(R,b)),e.push(N),s>cb&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function X6(i,e,t){const n=new jf(i,e,t);return n.texture.mapping=lp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function UC(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function QEe(i,e,t){const n=new Float32Array(yv),s=new ae(0,1,0);return new Qd({name:"SphericalGaussianBlur",defines:{n:yv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:xz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function Y6(){return new Qd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function K6(){return new Qd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ql,depthTest:!1,depthWrite:!1})}function xz(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function JEe(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===Rm||l===Nm,d=l===gu||l===nd;if(c||d){let h=e.get(o);const m=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return t===null&&(t=new Y3(i)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const v=o.image;return c&&v&&v.height>0||d&&v&&s(v)?(t===null&&(t=new Y3(i)),h=c?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",r),h.texture):null}}}return o}function s(o){let l=0;const c=6;for(let d=0;d<c;d++)o[d]!==void 0&&l++;return l===c}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function ewe(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&Xl("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function twe(i,e,t,n){const s={},r=new WeakMap;function a(h){const m=h.target;m.index!==null&&e.remove(m.index);for(const _ in m.attributes)e.remove(m.attributes[_]);m.removeEventListener("dispose",a),delete s[m.id];const v=r.get(m);v&&(e.remove(v),r.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(h,m){return s[m.id]===!0||(m.addEventListener("dispose",a),s[m.id]=!0,t.memory.geometries++),m}function l(h){const m=h.attributes;for(const v in m)e.update(m[v],i.ARRAY_BUFFER)}function c(h){const m=[],v=h.index,_=h.attributes.position;let x=0;if(v!==null){const w=v.array;x=v.version;for(let M=0,R=w.length;M<R;M+=3){const N=w[M+0],D=w[M+1],L=w[M+2];m.push(N,D,D,L,L,N)}}else if(_!==void 0){const w=_.array;x=_.version;for(let M=0,R=w.length/3-1;M<R;M+=3){const N=M+0,D=M+1,L=M+2;m.push(N,D,D,L,L,N)}}else return;const T=new(FF(m)?Bw:Uw)(m,1);T.version=x;const b=r.get(h);b&&e.remove(b),r.set(h,T)}function d(h){const m=r.get(h);if(m){const v=h.index;v!==null&&m.version<v.version&&c(h)}else c(h);return r.get(h)}return{get:o,update:l,getWireframeAttribute:d}}function nwe(i,e,t){let n;function s(m){n=m}let r,a;function o(m){r=m.type,a=m.bytesPerElement}function l(m,v){i.drawElements(n,v,r,m*a),t.update(v,n,1)}function c(m,v,_){_!==0&&(i.drawElementsInstanced(n,v,r,m*a,_),t.update(v,n,_))}function d(m,v,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,v,0,r,m,0,_);let T=0;for(let b=0;b<_;b++)T+=v[b];t.update(T,n,1)}function h(m,v,_,x){if(_===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let b=0;b<m.length;b++)c(m[b]/a,v[b],x[b]);else{T.multiDrawElementsInstancedWEBGL(n,v,0,r,m,0,x,0,_);let b=0;for(let w=0;w<_;w++)b+=v[w]*x[w];t.update(b,n,1)}}this.setMode=s,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=h}function iwe(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(r/3);break;case i.LINES:t.lines+=o*(r/2);break;case i.LINE_STRIP:t.lines+=o*(r-1);break;case i.LINE_LOOP:t.lines+=o*r;break;case i.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function swe(i,e,t){const n=new WeakMap,s=new bn;function r(a,o,l){const c=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=d!==void 0?d.length:0;let m=n.get(o);if(m===void 0||m.count!==h){let I=function(){L.dispose(),n.delete(o),o.removeEventListener("dispose",I)};m!==void 0&&m.texture.dispose();const v=o.morphAttributes.position!==void 0,_=o.morphAttributes.normal!==void 0,x=o.morphAttributes.color!==void 0,T=o.morphAttributes.position||[],b=o.morphAttributes.normal||[],w=o.morphAttributes.color||[];let M=0;v===!0&&(M=1),_===!0&&(M=2),x===!0&&(M=3);let R=o.attributes.position.count*M,N=1;R>e.maxTextureSize&&(N=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const D=new Float32Array(R*N*4*h),L=new NS(D,R,N,h);L.type=fr,L.needsUpdate=!0;const F=M*4;for(let z=0;z<h;z++){const H=T[z],Y=b[z],Z=w[z],se=R*N*4*z;for(let oe=0;oe<H.count;oe++){const G=oe*F;v===!0&&(s.fromBufferAttribute(H,oe),D[se+G+0]=s.x,D[se+G+1]=s.y,D[se+G+2]=s.z,D[se+G+3]=0),_===!0&&(s.fromBufferAttribute(Y,oe),D[se+G+4]=s.x,D[se+G+5]=s.y,D[se+G+6]=s.z,D[se+G+7]=0),x===!0&&(s.fromBufferAttribute(Z,oe),D[se+G+8]=s.x,D[se+G+9]=s.y,D[se+G+10]=s.z,D[se+G+11]=Z.itemSize===4?s.w:1)}}m={count:h,texture:L,size:new lt(R,N)},n.set(o,m),o.addEventListener("dispose",I)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let v=0;for(let x=0;x<c.length;x++)v+=c[x];const _=o.morphTargetsRelative?1:1-v;l.getUniforms().setValue(i,"morphTargetBaseInfluence",_),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",m.size)}return{update:r}}function rwe(i,e,t,n){let s=new WeakMap;function r(l){const c=n.render.frame,d=l.geometry,h=e.get(l,d);if(s.get(h)!==c&&(e.update(h),s.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),s.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const m=l.skeleton;s.get(m)!==c&&(m.update(),s.set(m,c))}return h}function a(){s=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:a}}const fZ=new Es,Z6=new Uc(1,1),hZ=new NS,pZ=new Lw,mZ=new Gm,Q6=[],J6=[],e8=new Float32Array(16),t8=new Float32Array(9),n8=new Float32Array(4);function kS(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=Q6[s];if(r===void 0&&(r=new Float32Array(s),Q6[s]=r),e!==0){n.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(r,o)}return r}function To(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Eo(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function rD(i,e){let t=J6[e];t===void 0&&(t=new Int32Array(e),J6[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function awe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function owe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(To(t,e))return;i.uniform2fv(this.addr,e),Eo(t,e)}}function lwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(To(t,e))return;i.uniform3fv(this.addr,e),Eo(t,e)}}function cwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(To(t,e))return;i.uniform4fv(this.addr,e),Eo(t,e)}}function uwe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(To(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Eo(t,e)}else{if(To(t,n))return;n8.set(n),i.uniformMatrix2fv(this.addr,!1,n8),Eo(t,n)}}function dwe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(To(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Eo(t,e)}else{if(To(t,n))return;t8.set(n),i.uniformMatrix3fv(this.addr,!1,t8),Eo(t,n)}}function fwe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(To(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Eo(t,e)}else{if(To(t,n))return;e8.set(n),i.uniformMatrix4fv(this.addr,!1,e8),Eo(t,n)}}function hwe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function pwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(To(t,e))return;i.uniform2iv(this.addr,e),Eo(t,e)}}function mwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(To(t,e))return;i.uniform3iv(this.addr,e),Eo(t,e)}}function gwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(To(t,e))return;i.uniform4iv(this.addr,e),Eo(t,e)}}function ywe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function vwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(To(t,e))return;i.uniform2uiv(this.addr,e),Eo(t,e)}}function _we(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(To(t,e))return;i.uniform3uiv(this.addr,e),Eo(t,e)}}function xwe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(To(t,e))return;i.uniform4uiv(this.addr,e),Eo(t,e)}}function bwe(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(Z6.compareFunction=RS,r=Z6):r=fZ,t.setTexture2D(e||r,s)}function Swe(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||pZ,s)}function Twe(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||mZ,s)}function Ewe(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||hZ,s)}function wwe(i){switch(i){case 5126:return awe;case 35664:return owe;case 35665:return lwe;case 35666:return cwe;case 35674:return uwe;case 35675:return dwe;case 35676:return fwe;case 5124:case 35670:return hwe;case 35667:case 35671:return pwe;case 35668:case 35672:return mwe;case 35669:case 35673:return gwe;case 5125:return ywe;case 36294:return vwe;case 36295:return _we;case 36296:return xwe;case 35678:case 36198:case 36298:case 36306:case 35682:return bwe;case 35679:case 36299:case 36307:return Swe;case 35680:case 36300:case 36308:case 36293:return Twe;case 36289:case 36303:case 36311:case 36292:return Ewe}}function Mwe(i,e){i.uniform1fv(this.addr,e)}function Awe(i,e){const t=kS(e,this.size,2);i.uniform2fv(this.addr,t)}function Cwe(i,e){const t=kS(e,this.size,3);i.uniform3fv(this.addr,t)}function Rwe(i,e){const t=kS(e,this.size,4);i.uniform4fv(this.addr,t)}function Nwe(i,e){const t=kS(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Dwe(i,e){const t=kS(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Pwe(i,e){const t=kS(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Owe(i,e){i.uniform1iv(this.addr,e)}function Lwe(i,e){i.uniform2iv(this.addr,e)}function Uwe(i,e){i.uniform3iv(this.addr,e)}function Bwe(i,e){i.uniform4iv(this.addr,e)}function Iwe(i,e){i.uniform1uiv(this.addr,e)}function Fwe(i,e){i.uniform2uiv(this.addr,e)}function zwe(i,e){i.uniform3uiv(this.addr,e)}function Vwe(i,e){i.uniform4uiv(this.addr,e)}function kwe(i,e,t){const n=this.cache,s=e.length,r=rD(t,s);To(n,r)||(i.uniform1iv(this.addr,r),Eo(n,r));for(let a=0;a!==s;++a)t.setTexture2D(e[a]||fZ,r[a])}function Gwe(i,e,t){const n=this.cache,s=e.length,r=rD(t,s);To(n,r)||(i.uniform1iv(this.addr,r),Eo(n,r));for(let a=0;a!==s;++a)t.setTexture3D(e[a]||pZ,r[a])}function Hwe(i,e,t){const n=this.cache,s=e.length,r=rD(t,s);To(n,r)||(i.uniform1iv(this.addr,r),Eo(n,r));for(let a=0;a!==s;++a)t.setTextureCube(e[a]||mZ,r[a])}function jwe(i,e,t){const n=this.cache,s=e.length,r=rD(t,s);To(n,r)||(i.uniform1iv(this.addr,r),Eo(n,r));for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||hZ,r[a])}function $we(i){switch(i){case 5126:return Mwe;case 35664:return Awe;case 35665:return Cwe;case 35666:return Rwe;case 35674:return Nwe;case 35675:return Dwe;case 35676:return Pwe;case 5124:case 35670:return Owe;case 35667:case 35671:return Lwe;case 35668:case 35672:return Uwe;case 35669:case 35673:return Bwe;case 5125:return Iwe;case 36294:return Fwe;case 36295:return zwe;case 36296:return Vwe;case 35678:case 36198:case 36298:case 36306:case 35682:return kwe;case 35679:case 36299:case 36307:return Gwe;case 35680:case 36300:case 36308:case 36293:return Hwe;case 36289:case 36303:case 36311:case 36292:return jwe}}class Wwe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=wwe(t.type)}}class qwe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=$we(t.type)}}class Xwe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(e,t[o.id],n)}}}const yL=/(\w+)(\])?(\[|\.)?/g;function i8(i,e){i.seq.push(e),i.map[e.id]=e}function Ywe(i,e,t){const n=i.name,s=n.length;for(yL.lastIndex=0;;){const r=yL.exec(n),a=yL.lastIndex;let o=r[1];const l=r[2]==="]",c=r[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===s){i8(t,c===void 0?new Wwe(o,i,e):new qwe(o,i,e));break}else{let h=t.map[o];h===void 0&&(h=new Xwe(o),i8(t,h)),t=h}}}class wR{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),a=e.getUniformLocation(t,r.name);Ywe(r,a,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,a=t.length;r!==a;++r){const o=t[r],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in t&&n.push(a)}return n}}function s8(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const Kwe=37297;let Zwe=0;function Qwe(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=s;a<r;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const r8=new Kn;function Jwe(i){Sn._getMatrix(r8,Sn.workingColorSpace,i);const e=`mat3( ${r8.elements.map(t=>t.toFixed(4))} )`;switch(Sn.getTransfer(i)){case Vy:return[e,"LinearTransferOETF"];case Kt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function a8(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=(i.getShaderInfoLog(e)||"").trim();if(n&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+r+`

`+Qwe(i.getShaderSource(e),o)}else return r}function eMe(i,e){const t=Jwe(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function tMe(i,e){let t;switch(e){case v2:t="Linear";break;case _2:t="Reinhard";break;case x2:t="Cineon";break;case ww:t="ACESFilmic";break;case b2:t="AgX";break;case S2:t="Neutral";break;case pF:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const BC=new ae;function nMe(){Sn.getLuminanceCoefficients(BC);const i=BC.x.toFixed(4),e=BC.y.toFixed(4),t=BC.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function iMe(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(O1).join(`
`)}function sMe(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function rMe(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),a=r.name;let o=1;r.type===i.FLOAT_MAT2&&(o=2),r.type===i.FLOAT_MAT3&&(o=3),r.type===i.FLOAT_MAT4&&(o=4),t[a]={type:r.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function O1(i){return i!==""}function o8(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function l8(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aMe=/^[ \t]*#include +<([\w\d./]+)>/gm;function K3(i){return i.replace(aMe,lMe)}const oMe=new Map;function lMe(i,e){let t=Mi[e];if(t===void 0){const n=oMe.get(e);if(n!==void 0)t=Mi[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return K3(t)}const cMe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function c8(i){return i.replace(cMe,uMe)}function uMe(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function u8(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dMe(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===bS?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Mb?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===zl&&(e="SHADOWMAP_TYPE_VSM"),e}function fMe(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case gu:case nd:e="ENVMAP_TYPE_CUBE";break;case lp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function hMe(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case nd:e="ENVMAP_MODE_REFRACTION";break}return e}function pMe(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case b_:e="ENVMAP_BLENDING_MULTIPLY";break;case g2:e="ENVMAP_BLENDING_MIX";break;case y2:e="ENVMAP_BLENDING_ADD";break}return e}function mMe(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function gMe(i,e,t,n){const s=i.getContext(),r=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=dMe(t),c=fMe(t),d=hMe(t),h=pMe(t),m=mMe(t),v=iMe(t),_=sMe(r),x=s.createProgram();let T,b,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(O1).join(`
`),T.length>0&&(T+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(O1).join(`
`),b.length>0&&(b+=`
`)):(T=[u8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(O1).join(`
`),b=[u8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==bo?"#define TONE_MAPPING":"",t.toneMapping!==bo?Mi.tonemapping_pars_fragment:"",t.toneMapping!==bo?tMe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mi.colorspace_pars_fragment,eMe("linearToOutputTexel",t.outputColorSpace),nMe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(O1).join(`
`)),a=K3(a),a=o8(a,t),a=l8(a,t),o=K3(o),o=o8(o,t),o=l8(o,t),a=c8(a),o=c8(o),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,T=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,b=["#define varying in",t.glslVersion===mN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===mN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const M=w+T+a,R=w+b+o,N=s8(s,s.VERTEX_SHADER,M),D=s8(s,s.FRAGMENT_SHADER,R);s.attachShader(x,N),s.attachShader(x,D),t.index0AttributeName!==void 0?s.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);function L(H){if(i.debug.checkShaderErrors){const Y=s.getProgramInfoLog(x)||"",Z=s.getShaderInfoLog(N)||"",se=s.getShaderInfoLog(D)||"",oe=Y.trim(),G=Z.trim(),K=se.trim();let $=!0,ce=!0;if(s.getProgramParameter(x,s.LINK_STATUS)===!1)if($=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,x,N,D);else{const q=a8(s,N,"vertex"),ue=a8(s,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,s.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+oe+`
`+q+`
`+ue)}else oe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",oe):(G===""||K==="")&&(ce=!1);ce&&(H.diagnostics={runnable:$,programLog:oe,vertexShader:{log:G,prefix:T},fragmentShader:{log:K,prefix:b}})}s.deleteShader(N),s.deleteShader(D),F=new wR(s,x),I=rMe(s,x)}let F;this.getUniforms=function(){return F===void 0&&L(this),F};let I;this.getAttributes=function(){return I===void 0&&L(this),I};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=s.getProgramParameter(x,Kwe)),z},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Zwe++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=N,this.fragmentShader=D,this}let yMe=0;class vMe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new _Me(e),t.set(e,n)),n}}class _Me{constructor(e){this.id=yMe++,this.code=e,this.usedTimes=0}}function xMe(i,e,t,n,s,r,a){const o=new l_,l=new vMe,c=new Set,d=[],h=s.logarithmicDepthBuffer,m=s.vertexTextures;let v=s.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(I){return c.add(I),I===0?"uv":`uv${I}`}function T(I,z,H,Y,Z){const se=Y.fog,oe=Z.geometry,G=I.isMeshStandardMaterial?Y.environment:null,K=(I.isMeshStandardMaterial?t:e).get(I.envMap||G),$=K&&K.mapping===lp?K.image.height:null,ce=_[I.type];I.precision!==null&&(v=s.getMaxPrecision(I.precision),v!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",v,"instead."));const q=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,ue=q!==void 0?q.length:0;let Ae=0;oe.morphAttributes.position!==void 0&&(Ae=1),oe.morphAttributes.normal!==void 0&&(Ae=2),oe.morphAttributes.color!==void 0&&(Ae=3);let Ne,we,pt,Ee;if(ce){const Si=Pf[ce];Ne=Si.vertexShader,we=Si.fragmentShader}else Ne=I.vertexShader,we=I.fragmentShader,l.update(I),pt=l.getVertexShaderID(I),Ee=l.getFragmentShaderID(I);const Ue=i.getRenderTarget(),Ve=i.state.buffers.depth.getReversed(),Be=Z.isInstancedMesh===!0,Mt=Z.isBatchedMesh===!0,ct=!!I.map,Et=!!I.matcap,le=!!K,$e=!!I.aoMap,Ze=!!I.lightMap,Xe=!!I.bumpMap,We=!!I.normalMap,_t=!!I.displacementMap,ut=!!I.emissiveMap,ht=!!I.metalnessMap,Bt=!!I.roughnessMap,kt=I.anisotropy>0,X=I.clearcoat>0,W=I.dispersion>0,Se=I.iridescence>0,Fe=I.sheen>0,tt=I.transmission>0,et=kt&&!!I.anisotropyMap,Lt=X&&!!I.clearcoatMap,wt=X&&!!I.clearcoatNormalMap,It=X&&!!I.clearcoatRoughnessMap,Zt=Se&&!!I.iridescenceMap,yt=Se&&!!I.iridescenceThicknessMap,Rt=Fe&&!!I.sheenColorMap,Xt=Fe&&!!I.sheenRoughnessMap,Qt=!!I.specularMap,Ct=!!I.specularColorMap,An=!!I.specularIntensityMap,xe=tt&&!!I.transmissionMap,bt=tt&&!!I.thicknessMap,Nt=!!I.gradientMap,$t=!!I.alphaMap,xt=I.alphaTest>0,at=!!I.alphaHash,nn=!!I.extensions;let dn=bo;I.toneMapped&&(Ue===null||Ue.isXRRenderTarget===!0)&&(dn=i.toneMapping);const _i={shaderID:ce,shaderType:I.type,shaderName:I.name,vertexShader:Ne,fragmentShader:we,defines:I.defines,customVertexShaderID:pt,customFragmentShaderID:Ee,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:v,batching:Mt,batchingColor:Mt&&Z._colorsTexture!==null,instancing:Be,instancingColor:Be&&Z.instanceColor!==null,instancingMorph:Be&&Z.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Ue===null?i.outputColorSpace:Ue.isXRRenderTarget===!0?Ue.texture.colorSpace:Hf,alphaToCoverage:!!I.alphaToCoverage,map:ct,matcap:Et,envMap:le,envMapMode:le&&K.mapping,envMapCubeUVHeight:$,aoMap:$e,lightMap:Ze,bumpMap:Xe,normalMap:We,displacementMap:m&&_t,emissiveMap:ut,normalMapObjectSpace:We&&I.normalMapType===E2,normalMapTangentSpace:We&&I.normalMapType===Gf,metalnessMap:ht,roughnessMap:Bt,anisotropy:kt,anisotropyMap:et,clearcoat:X,clearcoatMap:Lt,clearcoatNormalMap:wt,clearcoatRoughnessMap:It,dispersion:W,iridescence:Se,iridescenceMap:Zt,iridescenceThicknessMap:yt,sheen:Fe,sheenColorMap:Rt,sheenRoughnessMap:Xt,specularMap:Qt,specularColorMap:Ct,specularIntensityMap:An,transmission:tt,transmissionMap:xe,thicknessMap:bt,gradientMap:Nt,opaque:I.transparent===!1&&I.blending===Dc&&I.alphaToCoverage===!1,alphaMap:$t,alphaTest:xt,alphaHash:at,combine:I.combine,mapUv:ct&&x(I.map.channel),aoMapUv:$e&&x(I.aoMap.channel),lightMapUv:Ze&&x(I.lightMap.channel),bumpMapUv:Xe&&x(I.bumpMap.channel),normalMapUv:We&&x(I.normalMap.channel),displacementMapUv:_t&&x(I.displacementMap.channel),emissiveMapUv:ut&&x(I.emissiveMap.channel),metalnessMapUv:ht&&x(I.metalnessMap.channel),roughnessMapUv:Bt&&x(I.roughnessMap.channel),anisotropyMapUv:et&&x(I.anisotropyMap.channel),clearcoatMapUv:Lt&&x(I.clearcoatMap.channel),clearcoatNormalMapUv:wt&&x(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:It&&x(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Zt&&x(I.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&x(I.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&&x(I.sheenColorMap.channel),sheenRoughnessMapUv:Xt&&x(I.sheenRoughnessMap.channel),specularMapUv:Qt&&x(I.specularMap.channel),specularColorMapUv:Ct&&x(I.specularColorMap.channel),specularIntensityMapUv:An&&x(I.specularIntensityMap.channel),transmissionMapUv:xe&&x(I.transmissionMap.channel),thicknessMapUv:bt&&x(I.thicknessMap.channel),alphaMapUv:$t&&x(I.alphaMap.channel),vertexTangents:!!oe.attributes.tangent&&(We||kt),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pointsUvs:Z.isPoints===!0&&!!oe.attributes.uv&&(ct||$t),fog:!!se,useFog:I.fog===!0,fogExp2:!!se&&se.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:h,reversedDepthBuffer:Ve,skinning:Z.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:ue,morphTextureStride:Ae,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:i.shadowMap.enabled&&H.length>0,shadowMapType:i.shadowMap.type,toneMapping:dn,decodeVideoTexture:ct&&I.map.isVideoTexture===!0&&Sn.getTransfer(I.map.colorSpace)===Kt,decodeVideoTextureEmissive:ut&&I.emissiveMap.isVideoTexture===!0&&Sn.getTransfer(I.emissiveMap.colorSpace)===Kt,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Go,flipSided:I.side===Ts,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:nn&&I.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(nn&&I.extensions.multiDraw===!0||Mt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return _i.vertexUv1s=c.has(1),_i.vertexUv2s=c.has(2),_i.vertexUv3s=c.has(3),c.clear(),_i}function b(I){const z=[];if(I.shaderID?z.push(I.shaderID):(z.push(I.customVertexShaderID),z.push(I.customFragmentShaderID)),I.defines!==void 0)for(const H in I.defines)z.push(H),z.push(I.defines[H]);return I.isRawShaderMaterial===!1&&(w(z,I),M(z,I),z.push(i.outputColorSpace)),z.push(I.customProgramCacheKey),z.join()}function w(I,z){I.push(z.precision),I.push(z.outputColorSpace),I.push(z.envMapMode),I.push(z.envMapCubeUVHeight),I.push(z.mapUv),I.push(z.alphaMapUv),I.push(z.lightMapUv),I.push(z.aoMapUv),I.push(z.bumpMapUv),I.push(z.normalMapUv),I.push(z.displacementMapUv),I.push(z.emissiveMapUv),I.push(z.metalnessMapUv),I.push(z.roughnessMapUv),I.push(z.anisotropyMapUv),I.push(z.clearcoatMapUv),I.push(z.clearcoatNormalMapUv),I.push(z.clearcoatRoughnessMapUv),I.push(z.iridescenceMapUv),I.push(z.iridescenceThicknessMapUv),I.push(z.sheenColorMapUv),I.push(z.sheenRoughnessMapUv),I.push(z.specularMapUv),I.push(z.specularColorMapUv),I.push(z.specularIntensityMapUv),I.push(z.transmissionMapUv),I.push(z.thicknessMapUv),I.push(z.combine),I.push(z.fogExp2),I.push(z.sizeAttenuation),I.push(z.morphTargetsCount),I.push(z.morphAttributeCount),I.push(z.numDirLights),I.push(z.numPointLights),I.push(z.numSpotLights),I.push(z.numSpotLightMaps),I.push(z.numHemiLights),I.push(z.numRectAreaLights),I.push(z.numDirLightShadows),I.push(z.numPointLightShadows),I.push(z.numSpotLightShadows),I.push(z.numSpotLightShadowsWithMaps),I.push(z.numLightProbes),I.push(z.shadowMapType),I.push(z.toneMapping),I.push(z.numClippingPlanes),I.push(z.numClipIntersection),I.push(z.depthPacking)}function M(I,z){o.disableAll(),z.supportsVertexTextures&&o.enable(0),z.instancing&&o.enable(1),z.instancingColor&&o.enable(2),z.instancingMorph&&o.enable(3),z.matcap&&o.enable(4),z.envMap&&o.enable(5),z.normalMapObjectSpace&&o.enable(6),z.normalMapTangentSpace&&o.enable(7),z.clearcoat&&o.enable(8),z.iridescence&&o.enable(9),z.alphaTest&&o.enable(10),z.vertexColors&&o.enable(11),z.vertexAlphas&&o.enable(12),z.vertexUv1s&&o.enable(13),z.vertexUv2s&&o.enable(14),z.vertexUv3s&&o.enable(15),z.vertexTangents&&o.enable(16),z.anisotropy&&o.enable(17),z.alphaHash&&o.enable(18),z.batching&&o.enable(19),z.dispersion&&o.enable(20),z.batchingColor&&o.enable(21),z.gradientMap&&o.enable(22),I.push(o.mask),o.disableAll(),z.fog&&o.enable(0),z.useFog&&o.enable(1),z.flatShading&&o.enable(2),z.logarithmicDepthBuffer&&o.enable(3),z.reversedDepthBuffer&&o.enable(4),z.skinning&&o.enable(5),z.morphTargets&&o.enable(6),z.morphNormals&&o.enable(7),z.morphColors&&o.enable(8),z.premultipliedAlpha&&o.enable(9),z.shadowMapEnabled&&o.enable(10),z.doubleSided&&o.enable(11),z.flipSided&&o.enable(12),z.useDepthPacking&&o.enable(13),z.dithering&&o.enable(14),z.transmission&&o.enable(15),z.sheen&&o.enable(16),z.opaque&&o.enable(17),z.pointsUvs&&o.enable(18),z.decodeVideoTexture&&o.enable(19),z.decodeVideoTextureEmissive&&o.enable(20),z.alphaToCoverage&&o.enable(21),I.push(o.mask)}function R(I){const z=_[I.type];let H;if(z){const Y=Pf[z];H=pK.clone(Y.uniforms)}else H=I.uniforms;return H}function N(I,z){let H;for(let Y=0,Z=d.length;Y<Z;Y++){const se=d[Y];if(se.cacheKey===z){H=se,++H.usedTimes;break}}return H===void 0&&(H=new gMe(i,z,I,r),d.push(H)),H}function D(I){if(--I.usedTimes===0){const z=d.indexOf(I);d[z]=d[d.length-1],d.pop(),I.destroy()}}function L(I){l.remove(I)}function F(){l.dispose()}return{getParameters:T,getProgramCacheKey:b,getUniforms:R,acquireProgram:N,releaseProgram:D,releaseShaderCache:L,programs:d,dispose:F}}function bMe(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function s(a,o,l){i.get(a)[o]=l}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function SMe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function d8(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function f8(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function a(h,m,v,_,x,T){let b=i[e];return b===void 0?(b={id:h.id,object:h,geometry:m,material:v,groupOrder:_,renderOrder:h.renderOrder,z:x,group:T},i[e]=b):(b.id=h.id,b.object=h,b.geometry=m,b.material=v,b.groupOrder=_,b.renderOrder=h.renderOrder,b.z=x,b.group=T),e++,b}function o(h,m,v,_,x,T){const b=a(h,m,v,_,x,T);v.transmission>0?n.push(b):v.transparent===!0?s.push(b):t.push(b)}function l(h,m,v,_,x,T){const b=a(h,m,v,_,x,T);v.transmission>0?n.unshift(b):v.transparent===!0?s.unshift(b):t.unshift(b)}function c(h,m){t.length>1&&t.sort(h||SMe),n.length>1&&n.sort(m||d8),s.length>1&&s.sort(m||d8)}function d(){for(let h=e,m=i.length;h<m;h++){const v=i[h];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:o,unshift:l,finish:d,sort:c}}function TMe(){let i=new WeakMap;function e(n,s){const r=i.get(n);let a;return r===void 0?(a=new f8,i.set(n,[a])):s>=r.length?(a=new f8,r.push(a)):a=r[s],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function EMe(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ae,color:new Vt};break;case"SpotLight":t={position:new ae,direction:new ae,color:new Vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ae,color:new Vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ae,skyColor:new Vt,groundColor:new Vt};break;case"RectAreaLight":t={color:new Vt,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return i[e.id]=t,t}}}function wMe(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let MMe=0;function AMe(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function CMe(i){const e=new EMe,t=wMe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new ae);const s=new ae,r=new an,a=new an;function o(c){let d=0,h=0,m=0;for(let I=0;I<9;I++)n.probe[I].set(0,0,0);let v=0,_=0,x=0,T=0,b=0,w=0,M=0,R=0,N=0,D=0,L=0;c.sort(AMe);for(let I=0,z=c.length;I<z;I++){const H=c[I],Y=H.color,Z=H.intensity,se=H.distance,oe=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)d+=Y.r*Z,h+=Y.g*Z,m+=Y.b*Z;else if(H.isLightProbe){for(let G=0;G<9;G++)n.probe[G].addScaledVector(H.sh.coefficients[G],Z);L++}else if(H.isDirectionalLight){const G=e.get(H);if(G.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const K=H.shadow,$=t.get(H);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,n.directionalShadow[v]=$,n.directionalShadowMap[v]=oe,n.directionalShadowMatrix[v]=H.shadow.matrix,w++}n.directional[v]=G,v++}else if(H.isSpotLight){const G=e.get(H);G.position.setFromMatrixPosition(H.matrixWorld),G.color.copy(Y).multiplyScalar(Z),G.distance=se,G.coneCos=Math.cos(H.angle),G.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),G.decay=H.decay,n.spot[x]=G;const K=H.shadow;if(H.map&&(n.spotLightMap[N]=H.map,N++,K.updateMatrices(H),H.castShadow&&D++),n.spotLightMatrix[x]=K.matrix,H.castShadow){const $=t.get(H);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,n.spotShadow[x]=$,n.spotShadowMap[x]=oe,R++}x++}else if(H.isRectAreaLight){const G=e.get(H);G.color.copy(Y).multiplyScalar(Z),G.halfWidth.set(H.width*.5,0,0),G.halfHeight.set(0,H.height*.5,0),n.rectArea[T]=G,T++}else if(H.isPointLight){const G=e.get(H);if(G.color.copy(H.color).multiplyScalar(H.intensity),G.distance=H.distance,G.decay=H.decay,H.castShadow){const K=H.shadow,$=t.get(H);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,$.shadowCameraNear=K.camera.near,$.shadowCameraFar=K.camera.far,n.pointShadow[_]=$,n.pointShadowMap[_]=oe,n.pointShadowMatrix[_]=H.shadow.matrix,M++}n.point[_]=G,_++}else if(H.isHemisphereLight){const G=e.get(H);G.skyColor.copy(H.color).multiplyScalar(Z),G.groundColor.copy(H.groundColor).multiplyScalar(Z),n.hemi[b]=G,b++}}T>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=qt.LTC_FLOAT_1,n.rectAreaLTC2=qt.LTC_FLOAT_2):(n.rectAreaLTC1=qt.LTC_HALF_1,n.rectAreaLTC2=qt.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=h,n.ambient[2]=m;const F=n.hash;(F.directionalLength!==v||F.pointLength!==_||F.spotLength!==x||F.rectAreaLength!==T||F.hemiLength!==b||F.numDirectionalShadows!==w||F.numPointShadows!==M||F.numSpotShadows!==R||F.numSpotMaps!==N||F.numLightProbes!==L)&&(n.directional.length=v,n.spot.length=x,n.rectArea.length=T,n.point.length=_,n.hemi.length=b,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=M,n.pointShadowMap.length=M,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=M,n.spotLightMatrix.length=R+N-D,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=D,n.numLightProbes=L,F.directionalLength=v,F.pointLength=_,F.spotLength=x,F.rectAreaLength=T,F.hemiLength=b,F.numDirectionalShadows=w,F.numPointShadows=M,F.numSpotShadows=R,F.numSpotMaps=N,F.numLightProbes=L,n.version=MMe++)}function l(c,d){let h=0,m=0,v=0,_=0,x=0;const T=d.matrixWorldInverse;for(let b=0,w=c.length;b<w;b++){const M=c[b];if(M.isDirectionalLight){const R=n.directional[h];R.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(T),h++}else if(M.isSpotLight){const R=n.spot[v];R.position.setFromMatrixPosition(M.matrixWorld),R.position.applyMatrix4(T),R.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(T),v++}else if(M.isRectAreaLight){const R=n.rectArea[_];R.position.setFromMatrixPosition(M.matrixWorld),R.position.applyMatrix4(T),a.identity(),r.copy(M.matrixWorld),r.premultiply(T),a.extractRotation(r),R.halfWidth.set(M.width*.5,0,0),R.halfHeight.set(0,M.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),_++}else if(M.isPointLight){const R=n.point[m];R.position.setFromMatrixPosition(M.matrixWorld),R.position.applyMatrix4(T),m++}else if(M.isHemisphereLight){const R=n.hemi[x];R.direction.setFromMatrixPosition(M.matrixWorld),R.direction.transformDirection(T),x++}}}return{setup:o,setupView:l,state:n}}function h8(i){const e=new CMe(i),t=[],n=[];function s(d){c.camera=d,t.length=0,n.length=0}function r(d){t.push(d)}function a(d){n.push(d)}function o(){e.setup(t)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:o,setupLightsView:l,pushLight:r,pushShadow:a}}function RMe(i){let e=new WeakMap;function t(s,r=0){const a=e.get(s);let o;return a===void 0?(o=new h8(i),e.set(s,[o])):r>=a.length?(o=new h8(i),a.push(o)):o=a[r],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const NMe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,DMe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function PMe(i,e,t){let n=new Ky;const s=new lt,r=new lt,a=new bn,o=new H2({depthPacking:SF}),l=new j2,c={},d=t.maxTextureSize,h={[Nc]:Ts,[Ts]:Nc,[Go]:Go},m=new Qd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:NMe,fragmentShader:DMe}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const _=new di;_.setAttribute("position",new os(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new zs(_,m),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=bS;let b=this.type;this.render=function(D,L,F){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||D.length===0)return;const I=i.getRenderTarget(),z=i.getActiveCubeFace(),H=i.getActiveMipmapLevel(),Y=i.state;Y.setBlending(ql),Y.buffers.depth.getReversed()===!0?Y.buffers.color.setClear(0,0,0,0):Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const Z=b!==zl&&this.type===zl,se=b===zl&&this.type!==zl;for(let oe=0,G=D.length;oe<G;oe++){const K=D[oe],$=K.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;s.copy($.mapSize);const ce=$.getFrameExtents();if(s.multiply(ce),r.copy($.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(r.x=Math.floor(d/ce.x),s.x=r.x*ce.x,$.mapSize.x=r.x),s.y>d&&(r.y=Math.floor(d/ce.y),s.y=r.y*ce.y,$.mapSize.y=r.y)),$.map===null||Z===!0||se===!0){const ue=this.type!==zl?{minFilter:Fs,magFilter:Fs}:{};$.map!==null&&$.map.dispose(),$.map=new jf(s.x,s.y,ue),$.map.texture.name=K.name+".shadowMap",$.camera.updateProjectionMatrix()}i.setRenderTarget($.map),i.clear();const q=$.getViewportCount();for(let ue=0;ue<q;ue++){const Ae=$.getViewport(ue);a.set(r.x*Ae.x,r.y*Ae.y,r.x*Ae.z,r.y*Ae.w),Y.viewport(a),$.updateMatrices(K,ue),n=$.getFrustum(),R(L,F,$.camera,K,this.type)}$.isPointLightShadow!==!0&&this.type===zl&&w($,F),$.needsUpdate=!1}b=this.type,T.needsUpdate=!1,i.setRenderTarget(I,z,H)};function w(D,L){const F=e.update(x);m.defines.VSM_SAMPLES!==D.blurSamples&&(m.defines.VSM_SAMPLES=D.blurSamples,v.defines.VSM_SAMPLES=D.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new jf(s.x,s.y)),m.uniforms.shadow_pass.value=D.map.texture,m.uniforms.resolution.value=D.mapSize,m.uniforms.radius.value=D.radius,i.setRenderTarget(D.mapPass),i.clear(),i.renderBufferDirect(L,null,F,m,x,null),v.uniforms.shadow_pass.value=D.mapPass.texture,v.uniforms.resolution.value=D.mapSize,v.uniforms.radius.value=D.radius,i.setRenderTarget(D.map),i.clear(),i.renderBufferDirect(L,null,F,v,x,null)}function M(D,L,F,I){let z=null;const H=F.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(H!==void 0)z=H;else if(z=F.isPointLight===!0?l:o,i.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const Y=z.uuid,Z=L.uuid;let se=c[Y];se===void 0&&(se={},c[Y]=se);let oe=se[Z];oe===void 0&&(oe=z.clone(),se[Z]=oe,L.addEventListener("dispose",N)),z=oe}if(z.visible=L.visible,z.wireframe=L.wireframe,I===zl?z.side=L.shadowSide!==null?L.shadowSide:L.side:z.side=L.shadowSide!==null?L.shadowSide:h[L.side],z.alphaMap=L.alphaMap,z.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,z.map=L.map,z.clipShadows=L.clipShadows,z.clippingPlanes=L.clippingPlanes,z.clipIntersection=L.clipIntersection,z.displacementMap=L.displacementMap,z.displacementScale=L.displacementScale,z.displacementBias=L.displacementBias,z.wireframeLinewidth=L.wireframeLinewidth,z.linewidth=L.linewidth,F.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const Y=i.properties.get(z);Y.light=F}return z}function R(D,L,F,I,z){if(D.visible===!1)return;if(D.layers.test(L.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&z===zl)&&(!D.frustumCulled||n.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,D.matrixWorld);const Z=e.update(D),se=D.material;if(Array.isArray(se)){const oe=Z.groups;for(let G=0,K=oe.length;G<K;G++){const $=oe[G],ce=se[$.materialIndex];if(ce&&ce.visible){const q=M(D,ce,I,z);D.onBeforeShadow(i,D,L,F,Z,q,$),i.renderBufferDirect(F,null,Z,q,D,$),D.onAfterShadow(i,D,L,F,Z,q,$)}}}else if(se.visible){const oe=M(D,se,I,z);D.onBeforeShadow(i,D,L,F,Z,oe,null),i.renderBufferDirect(F,null,Z,oe,D,null),D.onAfterShadow(i,D,L,F,Z,oe,null)}}const Y=D.children;for(let Z=0,se=Y.length;Z<se;Z++)R(Y[Z],L,F,I,z)}function N(D){D.target.removeEventListener("dispose",N);for(const F in c){const I=c[F],z=D.target.uuid;z in I&&(I[z].dispose(),delete I[z])}}}const OMe={[Yv]:Kv,[Zv]:e_,[Qv]:t_,[op]:Jv,[Kv]:Yv,[e_]:Zv,[t_]:Qv,[Jv]:op};function LMe(i,e){function t(){let xe=!1;const bt=new bn;let Nt=null;const $t=new bn(0,0,0,0);return{setMask:function(xt){Nt!==xt&&!xe&&(i.colorMask(xt,xt,xt,xt),Nt=xt)},setLocked:function(xt){xe=xt},setClear:function(xt,at,nn,dn,_i){_i===!0&&(xt*=dn,at*=dn,nn*=dn),bt.set(xt,at,nn,dn),$t.equals(bt)===!1&&(i.clearColor(xt,at,nn,dn),$t.copy(bt))},reset:function(){xe=!1,Nt=null,$t.set(-1,0,0,0)}}}function n(){let xe=!1,bt=!1,Nt=null,$t=null,xt=null;return{setReversed:function(at){if(bt!==at){const nn=e.get("EXT_clip_control");at?nn.clipControlEXT(nn.LOWER_LEFT_EXT,nn.ZERO_TO_ONE_EXT):nn.clipControlEXT(nn.LOWER_LEFT_EXT,nn.NEGATIVE_ONE_TO_ONE_EXT),bt=at;const dn=xt;xt=null,this.setClear(dn)}},getReversed:function(){return bt},setTest:function(at){at?Ue(i.DEPTH_TEST):Ve(i.DEPTH_TEST)},setMask:function(at){Nt!==at&&!xe&&(i.depthMask(at),Nt=at)},setFunc:function(at){if(bt&&(at=OMe[at]),$t!==at){switch(at){case Yv:i.depthFunc(i.NEVER);break;case Kv:i.depthFunc(i.ALWAYS);break;case Zv:i.depthFunc(i.LESS);break;case op:i.depthFunc(i.LEQUAL);break;case Qv:i.depthFunc(i.EQUAL);break;case Jv:i.depthFunc(i.GEQUAL);break;case e_:i.depthFunc(i.GREATER);break;case t_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}$t=at}},setLocked:function(at){xe=at},setClear:function(at){xt!==at&&(bt&&(at=1-at),i.clearDepth(at),xt=at)},reset:function(){xe=!1,Nt=null,$t=null,xt=null,bt=!1}}}function s(){let xe=!1,bt=null,Nt=null,$t=null,xt=null,at=null,nn=null,dn=null,_i=null;return{setTest:function(Si){xe||(Si?Ue(i.STENCIL_TEST):Ve(i.STENCIL_TEST))},setMask:function(Si){bt!==Si&&!xe&&(i.stencilMask(Si),bt=Si)},setFunc:function(Si,Ko,Ur){(Nt!==Si||$t!==Ko||xt!==Ur)&&(i.stencilFunc(Si,Ko,Ur),Nt=Si,$t=Ko,xt=Ur)},setOp:function(Si,Ko,Ur){(at!==Si||nn!==Ko||dn!==Ur)&&(i.stencilOp(Si,Ko,Ur),at=Si,nn=Ko,dn=Ur)},setLocked:function(Si){xe=Si},setClear:function(Si){_i!==Si&&(i.clearStencil(Si),_i=Si)},reset:function(){xe=!1,bt=null,Nt=null,$t=null,xt=null,at=null,nn=null,dn=null,_i=null}}}const r=new t,a=new n,o=new s,l=new WeakMap,c=new WeakMap;let d={},h={},m=new WeakMap,v=[],_=null,x=!1,T=null,b=null,w=null,M=null,R=null,N=null,D=null,L=new Vt(0,0,0),F=0,I=!1,z=null,H=null,Y=null,Z=null,se=null;const oe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,K=0;const $=i.getParameter(i.VERSION);$.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec($)[1]),G=K>=1):$.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),G=K>=2);let ce=null,q={};const ue=i.getParameter(i.SCISSOR_BOX),Ae=i.getParameter(i.VIEWPORT),Ne=new bn().fromArray(ue),we=new bn().fromArray(Ae);function pt(xe,bt,Nt,$t){const xt=new Uint8Array(4),at=i.createTexture();i.bindTexture(xe,at),i.texParameteri(xe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(xe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let nn=0;nn<Nt;nn++)xe===i.TEXTURE_3D||xe===i.TEXTURE_2D_ARRAY?i.texImage3D(bt,0,i.RGBA,1,1,$t,0,i.RGBA,i.UNSIGNED_BYTE,xt):i.texImage2D(bt+nn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,xt);return at}const Ee={};Ee[i.TEXTURE_2D]=pt(i.TEXTURE_2D,i.TEXTURE_2D,1),Ee[i.TEXTURE_CUBE_MAP]=pt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ee[i.TEXTURE_2D_ARRAY]=pt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ee[i.TEXTURE_3D]=pt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),Ue(i.DEPTH_TEST),a.setFunc(op),Xe(!1),We(ME),Ue(i.CULL_FACE),$e(ql);function Ue(xe){d[xe]!==!0&&(i.enable(xe),d[xe]=!0)}function Ve(xe){d[xe]!==!1&&(i.disable(xe),d[xe]=!1)}function Be(xe,bt){return h[xe]!==bt?(i.bindFramebuffer(xe,bt),h[xe]=bt,xe===i.DRAW_FRAMEBUFFER&&(h[i.FRAMEBUFFER]=bt),xe===i.FRAMEBUFFER&&(h[i.DRAW_FRAMEBUFFER]=bt),!0):!1}function Mt(xe,bt){let Nt=v,$t=!1;if(xe){Nt=m.get(bt),Nt===void 0&&(Nt=[],m.set(bt,Nt));const xt=xe.textures;if(Nt.length!==xt.length||Nt[0]!==i.COLOR_ATTACHMENT0){for(let at=0,nn=xt.length;at<nn;at++)Nt[at]=i.COLOR_ATTACHMENT0+at;Nt.length=xt.length,$t=!0}}else Nt[0]!==i.BACK&&(Nt[0]=i.BACK,$t=!0);$t&&i.drawBuffers(Nt)}function ct(xe){return _!==xe?(i.useProgram(xe),_=xe,!0):!1}const Et={[Ho]:i.FUNC_ADD,[mw]:i.FUNC_SUBTRACT,[gw]:i.FUNC_REVERSE_SUBTRACT};Et[p2]=i.MIN,Et[m2]=i.MAX;const le={[Nf]:i.ZERO,[yw]:i.ONE,[vw]:i.SRC_COLOR,[qv]:i.SRC_ALPHA,[Ew]:i.SRC_ALPHA_SATURATE,[Sw]:i.DST_COLOR,[xw]:i.DST_ALPHA,[_w]:i.ONE_MINUS_SRC_COLOR,[Xv]:i.ONE_MINUS_SRC_ALPHA,[Tw]:i.ONE_MINUS_DST_COLOR,[bw]:i.ONE_MINUS_DST_ALPHA,[uF]:i.CONSTANT_COLOR,[dF]:i.ONE_MINUS_CONSTANT_COLOR,[fF]:i.CONSTANT_ALPHA,[hF]:i.ONE_MINUS_CONSTANT_ALPHA};function $e(xe,bt,Nt,$t,xt,at,nn,dn,_i,Si){if(xe===ql){x===!0&&(Ve(i.BLEND),x=!1);return}if(x===!1&&(Ue(i.BLEND),x=!0),xe!==ry){if(xe!==T||Si!==I){if((b!==Ho||R!==Ho)&&(i.blendEquation(i.FUNC_ADD),b=Ho,R=Ho),Si)switch(xe){case Dc:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case my:i.blendFunc(i.ONE,i.ONE);break;case gy:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case yy:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}else switch(xe){case Dc:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case my:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case gy:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case yy:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}w=null,M=null,N=null,D=null,L.set(0,0,0),F=0,T=xe,I=Si}return}xt=xt||bt,at=at||Nt,nn=nn||$t,(bt!==b||xt!==R)&&(i.blendEquationSeparate(Et[bt],Et[xt]),b=bt,R=xt),(Nt!==w||$t!==M||at!==N||nn!==D)&&(i.blendFuncSeparate(le[Nt],le[$t],le[at],le[nn]),w=Nt,M=$t,N=at,D=nn),(dn.equals(L)===!1||_i!==F)&&(i.blendColor(dn.r,dn.g,dn.b,_i),L.copy(dn),F=_i),T=xe,I=!1}function Ze(xe,bt){xe.side===Go?Ve(i.CULL_FACE):Ue(i.CULL_FACE);let Nt=xe.side===Ts;bt&&(Nt=!Nt),Xe(Nt),xe.blending===Dc&&xe.transparent===!1?$e(ql):$e(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.blendColor,xe.blendAlpha,xe.premultipliedAlpha),a.setFunc(xe.depthFunc),a.setTest(xe.depthTest),a.setMask(xe.depthWrite),r.setMask(xe.colorWrite);const $t=xe.stencilWrite;o.setTest($t),$t&&(o.setMask(xe.stencilWriteMask),o.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),o.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),ut(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?Ue(i.SAMPLE_ALPHA_TO_COVERAGE):Ve(i.SAMPLE_ALPHA_TO_COVERAGE)}function Xe(xe){z!==xe&&(xe?i.frontFace(i.CW):i.frontFace(i.CCW),z=xe)}function We(xe){xe!==d2?(Ue(i.CULL_FACE),xe!==H&&(xe===ME?i.cullFace(i.BACK):xe===f2?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ve(i.CULL_FACE),H=xe}function _t(xe){xe!==Y&&(G&&i.lineWidth(xe),Y=xe)}function ut(xe,bt,Nt){xe?(Ue(i.POLYGON_OFFSET_FILL),(Z!==bt||se!==Nt)&&(i.polygonOffset(bt,Nt),Z=bt,se=Nt)):Ve(i.POLYGON_OFFSET_FILL)}function ht(xe){xe?Ue(i.SCISSOR_TEST):Ve(i.SCISSOR_TEST)}function Bt(xe){xe===void 0&&(xe=i.TEXTURE0+oe-1),ce!==xe&&(i.activeTexture(xe),ce=xe)}function kt(xe,bt,Nt){Nt===void 0&&(ce===null?Nt=i.TEXTURE0+oe-1:Nt=ce);let $t=q[Nt];$t===void 0&&($t={type:void 0,texture:void 0},q[Nt]=$t),($t.type!==xe||$t.texture!==bt)&&(ce!==Nt&&(i.activeTexture(Nt),ce=Nt),i.bindTexture(xe,bt||Ee[xe]),$t.type=xe,$t.texture=bt)}function X(){const xe=q[ce];xe!==void 0&&xe.type!==void 0&&(i.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)}function W(){try{i.compressedTexImage2D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Se(){try{i.compressedTexImage3D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Fe(){try{i.texSubImage2D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function tt(){try{i.texSubImage3D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function et(){try{i.compressedTexSubImage2D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Lt(){try{i.compressedTexSubImage3D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function wt(){try{i.texStorage2D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function It(){try{i.texStorage3D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Zt(){try{i.texImage2D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function yt(){try{i.texImage3D(...arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Rt(xe){Ne.equals(xe)===!1&&(i.scissor(xe.x,xe.y,xe.z,xe.w),Ne.copy(xe))}function Xt(xe){we.equals(xe)===!1&&(i.viewport(xe.x,xe.y,xe.z,xe.w),we.copy(xe))}function Qt(xe,bt){let Nt=c.get(bt);Nt===void 0&&(Nt=new WeakMap,c.set(bt,Nt));let $t=Nt.get(xe);$t===void 0&&($t=i.getUniformBlockIndex(bt,xe.name),Nt.set(xe,$t))}function Ct(xe,bt){const $t=c.get(bt).get(xe);l.get(bt)!==$t&&(i.uniformBlockBinding(bt,$t,xe.__bindingPointIndex),l.set(bt,$t))}function An(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},ce=null,q={},h={},m=new WeakMap,v=[],_=null,x=!1,T=null,b=null,w=null,M=null,R=null,N=null,D=null,L=new Vt(0,0,0),F=0,I=!1,z=null,H=null,Y=null,Z=null,se=null,Ne.set(0,0,i.canvas.width,i.canvas.height),we.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),o.reset()}return{buffers:{color:r,depth:a,stencil:o},enable:Ue,disable:Ve,bindFramebuffer:Be,drawBuffers:Mt,useProgram:ct,setBlending:$e,setMaterial:Ze,setFlipSided:Xe,setCullFace:We,setLineWidth:_t,setPolygonOffset:ut,setScissorTest:ht,activeTexture:Bt,bindTexture:kt,unbindTexture:X,compressedTexImage2D:W,compressedTexImage3D:Se,texImage2D:Zt,texImage3D:yt,updateUBOMapping:Qt,uniformBlockBinding:Ct,texStorage2D:wt,texStorage3D:It,texSubImage2D:Fe,texSubImage3D:tt,compressedTexSubImage2D:et,compressedTexSubImage3D:Lt,scissor:Rt,viewport:Xt,reset:An}}function UMe(i,e,t,n,s,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new lt,d=new WeakMap;let h;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(X,W){return v?new OffscreenCanvas(X,W):DE("canvas")}function x(X,W,Se){let Fe=1;const tt=kt(X);if((tt.width>Se||tt.height>Se)&&(Fe=Se/Math.max(tt.width,tt.height)),Fe<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const et=Math.floor(Fe*tt.width),Lt=Math.floor(Fe*tt.height);h===void 0&&(h=_(et,Lt));const wt=W?_(et,Lt):h;return wt.width=et,wt.height=Lt,wt.getContext("2d").drawImage(X,0,0,et,Lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+tt.width+"x"+tt.height+") to ("+et+"x"+Lt+")."),wt}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+tt.width+"x"+tt.height+")."),X;return X}function T(X){return X.generateMipmaps}function b(X){i.generateMipmap(X)}function w(X){return X.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?i.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function M(X,W,Se,Fe,tt=!1){if(X!==null){if(i[X]!==void 0)return i[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let et=W;if(W===i.RED&&(Se===i.FLOAT&&(et=i.R32F),Se===i.HALF_FLOAT&&(et=i.R16F),Se===i.UNSIGNED_BYTE&&(et=i.R8)),W===i.RED_INTEGER&&(Se===i.UNSIGNED_BYTE&&(et=i.R8UI),Se===i.UNSIGNED_SHORT&&(et=i.R16UI),Se===i.UNSIGNED_INT&&(et=i.R32UI),Se===i.BYTE&&(et=i.R8I),Se===i.SHORT&&(et=i.R16I),Se===i.INT&&(et=i.R32I)),W===i.RG&&(Se===i.FLOAT&&(et=i.RG32F),Se===i.HALF_FLOAT&&(et=i.RG16F),Se===i.UNSIGNED_BYTE&&(et=i.RG8)),W===i.RG_INTEGER&&(Se===i.UNSIGNED_BYTE&&(et=i.RG8UI),Se===i.UNSIGNED_SHORT&&(et=i.RG16UI),Se===i.UNSIGNED_INT&&(et=i.RG32UI),Se===i.BYTE&&(et=i.RG8I),Se===i.SHORT&&(et=i.RG16I),Se===i.INT&&(et=i.RG32I)),W===i.RGB_INTEGER&&(Se===i.UNSIGNED_BYTE&&(et=i.RGB8UI),Se===i.UNSIGNED_SHORT&&(et=i.RGB16UI),Se===i.UNSIGNED_INT&&(et=i.RGB32UI),Se===i.BYTE&&(et=i.RGB8I),Se===i.SHORT&&(et=i.RGB16I),Se===i.INT&&(et=i.RGB32I)),W===i.RGBA_INTEGER&&(Se===i.UNSIGNED_BYTE&&(et=i.RGBA8UI),Se===i.UNSIGNED_SHORT&&(et=i.RGBA16UI),Se===i.UNSIGNED_INT&&(et=i.RGBA32UI),Se===i.BYTE&&(et=i.RGBA8I),Se===i.SHORT&&(et=i.RGBA16I),Se===i.INT&&(et=i.RGBA32I)),W===i.RGB&&(Se===i.UNSIGNED_INT_5_9_9_9_REV&&(et=i.RGB9_E5),Se===i.UNSIGNED_INT_10F_11F_11F_REV&&(et=i.R11F_G11F_B10F)),W===i.RGBA){const Lt=tt?Vy:Sn.getTransfer(Fe);Se===i.FLOAT&&(et=i.RGBA32F),Se===i.HALF_FLOAT&&(et=i.RGBA16F),Se===i.UNSIGNED_BYTE&&(et=Lt===Kt?i.SRGB8_ALPHA8:i.RGBA8),Se===i.UNSIGNED_SHORT_4_4_4_4&&(et=i.RGBA4),Se===i.UNSIGNED_SHORT_5_5_5_1&&(et=i.RGB5_A1)}return(et===i.R16F||et===i.R32F||et===i.RG16F||et===i.RG32F||et===i.RGBA16F||et===i.RGBA32F)&&e.get("EXT_color_buffer_float"),et}function R(X,W){let Se;return X?W===null||W===Rs||W===Pc?Se=i.DEPTH24_STENCIL8:W===fr?Se=i.DEPTH32F_STENCIL8:W===Xu&&(Se=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===Rs||W===Pc?Se=i.DEPTH_COMPONENT24:W===fr?Se=i.DEPTH_COMPONENT32F:W===Xu&&(Se=i.DEPTH_COMPONENT16),Se}function N(X,W){return T(X)===!0||X.isFramebufferTexture&&X.minFilter!==Fs&&X.minFilter!==Zi?Math.log2(Math.max(W.width,W.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?W.mipmaps.length:1}function D(X){const W=X.target;W.removeEventListener("dispose",D),F(W),W.isVideoTexture&&d.delete(W)}function L(X){const W=X.target;W.removeEventListener("dispose",L),z(W)}function F(X){const W=n.get(X);if(W.__webglInit===void 0)return;const Se=X.source,Fe=m.get(Se);if(Fe){const tt=Fe[W.__cacheKey];tt.usedTimes--,tt.usedTimes===0&&I(X),Object.keys(Fe).length===0&&m.delete(Se)}n.remove(X)}function I(X){const W=n.get(X);i.deleteTexture(W.__webglTexture);const Se=X.source,Fe=m.get(Se);delete Fe[W.__cacheKey],a.memory.textures--}function z(X){const W=n.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),n.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++){if(Array.isArray(W.__webglFramebuffer[Fe]))for(let tt=0;tt<W.__webglFramebuffer[Fe].length;tt++)i.deleteFramebuffer(W.__webglFramebuffer[Fe][tt]);else i.deleteFramebuffer(W.__webglFramebuffer[Fe]);W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer[Fe])}else{if(Array.isArray(W.__webglFramebuffer))for(let Fe=0;Fe<W.__webglFramebuffer.length;Fe++)i.deleteFramebuffer(W.__webglFramebuffer[Fe]);else i.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&i.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let Fe=0;Fe<W.__webglColorRenderbuffer.length;Fe++)W.__webglColorRenderbuffer[Fe]&&i.deleteRenderbuffer(W.__webglColorRenderbuffer[Fe]);W.__webglDepthRenderbuffer&&i.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const Se=X.textures;for(let Fe=0,tt=Se.length;Fe<tt;Fe++){const et=n.get(Se[Fe]);et.__webglTexture&&(i.deleteTexture(et.__webglTexture),a.memory.textures--),n.remove(Se[Fe])}n.remove(X)}let H=0;function Y(){H=0}function Z(){const X=H;return X>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+s.maxTextures),H+=1,X}function se(X){const W=[];return W.push(X.wrapS),W.push(X.wrapT),W.push(X.wrapR||0),W.push(X.magFilter),W.push(X.minFilter),W.push(X.anisotropy),W.push(X.internalFormat),W.push(X.format),W.push(X.type),W.push(X.generateMipmaps),W.push(X.premultiplyAlpha),W.push(X.flipY),W.push(X.unpackAlignment),W.push(X.colorSpace),W.join()}function oe(X,W){const Se=n.get(X);if(X.isVideoTexture&&ht(X),X.isRenderTargetTexture===!1&&X.isExternalTexture!==!0&&X.version>0&&Se.__version!==X.version){const Fe=X.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ee(Se,X,W);return}}else X.isExternalTexture&&(Se.__webglTexture=X.sourceTexture?X.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,Se.__webglTexture,i.TEXTURE0+W)}function G(X,W){const Se=n.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&Se.__version!==X.version){Ee(Se,X,W);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Se.__webglTexture,i.TEXTURE0+W)}function K(X,W){const Se=n.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&Se.__version!==X.version){Ee(Se,X,W);return}t.bindTexture(i.TEXTURE_3D,Se.__webglTexture,i.TEXTURE0+W)}function $(X,W){const Se=n.get(X);if(X.version>0&&Se.__version!==X.version){Ue(Se,X,W);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Se.__webglTexture,i.TEXTURE0+W)}const ce={[cp]:i.REPEAT,[vl]:i.CLAMP_TO_EDGE,[up]:i.MIRRORED_REPEAT},q={[Fs]:i.NEAREST,[TS]:i.NEAREST_MIPMAP_NEAREST,[jd]:i.NEAREST_MIPMAP_LINEAR,[Zi]:i.LINEAR,[_m]:i.LINEAR_MIPMAP_NEAREST,[jo]:i.LINEAR_MIPMAP_LINEAR},ue={[Cw]:i.NEVER,[Ow]:i.ALWAYS,[CS]:i.LESS,[RS]:i.LEQUAL,[Rw]:i.EQUAL,[Pw]:i.GEQUAL,[Nw]:i.GREATER,[Dw]:i.NOTEQUAL};function Ae(X,W){if(W.type===fr&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===Zi||W.magFilter===_m||W.magFilter===jd||W.magFilter===jo||W.minFilter===Zi||W.minFilter===_m||W.minFilter===jd||W.minFilter===jo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(X,i.TEXTURE_WRAP_S,ce[W.wrapS]),i.texParameteri(X,i.TEXTURE_WRAP_T,ce[W.wrapT]),(X===i.TEXTURE_3D||X===i.TEXTURE_2D_ARRAY)&&i.texParameteri(X,i.TEXTURE_WRAP_R,ce[W.wrapR]),i.texParameteri(X,i.TEXTURE_MAG_FILTER,q[W.magFilter]),i.texParameteri(X,i.TEXTURE_MIN_FILTER,q[W.minFilter]),W.compareFunction&&(i.texParameteri(X,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(X,i.TEXTURE_COMPARE_FUNC,ue[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===Fs||W.minFilter!==jd&&W.minFilter!==jo||W.type===fr&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||n.get(W).__currentAnisotropy){const Se=e.get("EXT_texture_filter_anisotropic");i.texParameterf(X,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,s.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy}}}function Ne(X,W){let Se=!1;X.__webglInit===void 0&&(X.__webglInit=!0,W.addEventListener("dispose",D));const Fe=W.source;let tt=m.get(Fe);tt===void 0&&(tt={},m.set(Fe,tt));const et=se(W);if(et!==X.__cacheKey){tt[et]===void 0&&(tt[et]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Se=!0),tt[et].usedTimes++;const Lt=tt[X.__cacheKey];Lt!==void 0&&(tt[X.__cacheKey].usedTimes--,Lt.usedTimes===0&&I(W)),X.__cacheKey=et,X.__webglTexture=tt[et].texture}return Se}function we(X,W,Se){return Math.floor(Math.floor(X/Se)/W)}function pt(X,W,Se,Fe){const et=X.updateRanges;if(et.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,W.width,W.height,Se,Fe,W.data);else{et.sort((yt,Rt)=>yt.start-Rt.start);let Lt=0;for(let yt=1;yt<et.length;yt++){const Rt=et[Lt],Xt=et[yt],Qt=Rt.start+Rt.count,Ct=we(Xt.start,W.width,4),An=we(Rt.start,W.width,4);Xt.start<=Qt+1&&Ct===An&&we(Xt.start+Xt.count-1,W.width,4)===Ct?Rt.count=Math.max(Rt.count,Xt.start+Xt.count-Rt.start):(++Lt,et[Lt]=Xt)}et.length=Lt+1;const wt=i.getParameter(i.UNPACK_ROW_LENGTH),It=i.getParameter(i.UNPACK_SKIP_PIXELS),Zt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,W.width);for(let yt=0,Rt=et.length;yt<Rt;yt++){const Xt=et[yt],Qt=Math.floor(Xt.start/4),Ct=Math.ceil(Xt.count/4),An=Qt%W.width,xe=Math.floor(Qt/W.width),bt=Ct,Nt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,An),i.pixelStorei(i.UNPACK_SKIP_ROWS,xe),t.texSubImage2D(i.TEXTURE_2D,0,An,xe,bt,Nt,Se,Fe,W.data)}X.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,wt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,It),i.pixelStorei(i.UNPACK_SKIP_ROWS,Zt)}}function Ee(X,W,Se){let Fe=i.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Fe=i.TEXTURE_2D_ARRAY),W.isData3DTexture&&(Fe=i.TEXTURE_3D);const tt=Ne(X,W),et=W.source;t.bindTexture(Fe,X.__webglTexture,i.TEXTURE0+Se);const Lt=n.get(et);if(et.version!==Lt.__version||tt===!0){t.activeTexture(i.TEXTURE0+Se);const wt=Sn.getPrimaries(Sn.workingColorSpace),It=W.colorSpace===kl?null:Sn.getPrimaries(W.colorSpace),Zt=W.colorSpace===kl||wt===It?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Zt);let yt=x(W.image,!1,s.maxTextureSize);yt=Bt(W,yt);const Rt=r.convert(W.format,W.colorSpace),Xt=r.convert(W.type);let Qt=M(W.internalFormat,Rt,Xt,W.colorSpace,W.isVideoTexture);Ae(Fe,W);let Ct;const An=W.mipmaps,xe=W.isVideoTexture!==!0,bt=Lt.__version===void 0||tt===!0,Nt=et.dataReady,$t=N(W,yt);if(W.isDepthTexture)Qt=R(W.format===Lc,W.type),bt&&(xe?t.texStorage2D(i.TEXTURE_2D,1,Qt,yt.width,yt.height):t.texImage2D(i.TEXTURE_2D,0,Qt,yt.width,yt.height,0,Rt,Xt,null));else if(W.isDataTexture)if(An.length>0){xe&&bt&&t.texStorage2D(i.TEXTURE_2D,$t,Qt,An[0].width,An[0].height);for(let xt=0,at=An.length;xt<at;xt++)Ct=An[xt],xe?Nt&&t.texSubImage2D(i.TEXTURE_2D,xt,0,0,Ct.width,Ct.height,Rt,Xt,Ct.data):t.texImage2D(i.TEXTURE_2D,xt,Qt,Ct.width,Ct.height,0,Rt,Xt,Ct.data);W.generateMipmaps=!1}else xe?(bt&&t.texStorage2D(i.TEXTURE_2D,$t,Qt,yt.width,yt.height),Nt&&pt(W,yt,Rt,Xt)):t.texImage2D(i.TEXTURE_2D,0,Qt,yt.width,yt.height,0,Rt,Xt,yt.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){xe&&bt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,$t,Qt,An[0].width,An[0].height,yt.depth);for(let xt=0,at=An.length;xt<at;xt++)if(Ct=An[xt],W.format!==nr)if(Rt!==null)if(xe){if(Nt)if(W.layerUpdates.size>0){const nn=xN(Ct.width,Ct.height,W.format,W.type);for(const dn of W.layerUpdates){const _i=Ct.data.subarray(dn*nn/Ct.data.BYTES_PER_ELEMENT,(dn+1)*nn/Ct.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,xt,0,0,dn,Ct.width,Ct.height,1,Rt,_i)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,xt,0,0,0,Ct.width,Ct.height,yt.depth,Rt,Ct.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,xt,Qt,Ct.width,Ct.height,yt.depth,0,Ct.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else xe?Nt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,xt,0,0,0,Ct.width,Ct.height,yt.depth,Rt,Xt,Ct.data):t.texImage3D(i.TEXTURE_2D_ARRAY,xt,Qt,Ct.width,Ct.height,yt.depth,0,Rt,Xt,Ct.data)}else{xe&&bt&&t.texStorage2D(i.TEXTURE_2D,$t,Qt,An[0].width,An[0].height);for(let xt=0,at=An.length;xt<at;xt++)Ct=An[xt],W.format!==nr?Rt!==null?xe?Nt&&t.compressedTexSubImage2D(i.TEXTURE_2D,xt,0,0,Ct.width,Ct.height,Rt,Ct.data):t.compressedTexImage2D(i.TEXTURE_2D,xt,Qt,Ct.width,Ct.height,0,Ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xe?Nt&&t.texSubImage2D(i.TEXTURE_2D,xt,0,0,Ct.width,Ct.height,Rt,Xt,Ct.data):t.texImage2D(i.TEXTURE_2D,xt,Qt,Ct.width,Ct.height,0,Rt,Xt,Ct.data)}else if(W.isDataArrayTexture)if(xe){if(bt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,$t,Qt,yt.width,yt.height,yt.depth),Nt)if(W.layerUpdates.size>0){const xt=xN(yt.width,yt.height,W.format,W.type);for(const at of W.layerUpdates){const nn=yt.data.subarray(at*xt/yt.data.BYTES_PER_ELEMENT,(at+1)*xt/yt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,at,yt.width,yt.height,1,Rt,Xt,nn)}W.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,yt.width,yt.height,yt.depth,Rt,Xt,yt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,Qt,yt.width,yt.height,yt.depth,0,Rt,Xt,yt.data);else if(W.isData3DTexture)xe?(bt&&t.texStorage3D(i.TEXTURE_3D,$t,Qt,yt.width,yt.height,yt.depth),Nt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,yt.width,yt.height,yt.depth,Rt,Xt,yt.data)):t.texImage3D(i.TEXTURE_3D,0,Qt,yt.width,yt.height,yt.depth,0,Rt,Xt,yt.data);else if(W.isFramebufferTexture){if(bt)if(xe)t.texStorage2D(i.TEXTURE_2D,$t,Qt,yt.width,yt.height);else{let xt=yt.width,at=yt.height;for(let nn=0;nn<$t;nn++)t.texImage2D(i.TEXTURE_2D,nn,Qt,xt,at,0,Rt,Xt,null),xt>>=1,at>>=1}}else if(An.length>0){if(xe&&bt){const xt=kt(An[0]);t.texStorage2D(i.TEXTURE_2D,$t,Qt,xt.width,xt.height)}for(let xt=0,at=An.length;xt<at;xt++)Ct=An[xt],xe?Nt&&t.texSubImage2D(i.TEXTURE_2D,xt,0,0,Rt,Xt,Ct):t.texImage2D(i.TEXTURE_2D,xt,Qt,Rt,Xt,Ct);W.generateMipmaps=!1}else if(xe){if(bt){const xt=kt(yt);t.texStorage2D(i.TEXTURE_2D,$t,Qt,xt.width,xt.height)}Nt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Rt,Xt,yt)}else t.texImage2D(i.TEXTURE_2D,0,Qt,Rt,Xt,yt);T(W)&&b(Fe),Lt.__version=et.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function Ue(X,W,Se){if(W.image.length!==6)return;const Fe=Ne(X,W),tt=W.source;t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+Se);const et=n.get(tt);if(tt.version!==et.__version||Fe===!0){t.activeTexture(i.TEXTURE0+Se);const Lt=Sn.getPrimaries(Sn.workingColorSpace),wt=W.colorSpace===kl?null:Sn.getPrimaries(W.colorSpace),It=W.colorSpace===kl||Lt===wt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);const Zt=W.isCompressedTexture||W.image[0].isCompressedTexture,yt=W.image[0]&&W.image[0].isDataTexture,Rt=[];for(let at=0;at<6;at++)!Zt&&!yt?Rt[at]=x(W.image[at],!0,s.maxCubemapSize):Rt[at]=yt?W.image[at].image:W.image[at],Rt[at]=Bt(W,Rt[at]);const Xt=Rt[0],Qt=r.convert(W.format,W.colorSpace),Ct=r.convert(W.type),An=M(W.internalFormat,Qt,Ct,W.colorSpace),xe=W.isVideoTexture!==!0,bt=et.__version===void 0||Fe===!0,Nt=tt.dataReady;let $t=N(W,Xt);Ae(i.TEXTURE_CUBE_MAP,W);let xt;if(Zt){xe&&bt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,$t,An,Xt.width,Xt.height);for(let at=0;at<6;at++){xt=Rt[at].mipmaps;for(let nn=0;nn<xt.length;nn++){const dn=xt[nn];W.format!==nr?Qt!==null?xe?Nt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn,0,0,dn.width,dn.height,Qt,dn.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn,An,dn.width,dn.height,0,dn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xe?Nt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn,0,0,dn.width,dn.height,Qt,Ct,dn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn,An,dn.width,dn.height,0,Qt,Ct,dn.data)}}}else{if(xt=W.mipmaps,xe&&bt){xt.length>0&&$t++;const at=kt(Rt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,$t,An,at.width,at.height)}for(let at=0;at<6;at++)if(yt){xe?Nt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,Rt[at].width,Rt[at].height,Qt,Ct,Rt[at].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,An,Rt[at].width,Rt[at].height,0,Qt,Ct,Rt[at].data);for(let nn=0;nn<xt.length;nn++){const _i=xt[nn].image[at].image;xe?Nt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn+1,0,0,_i.width,_i.height,Qt,Ct,_i.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn+1,An,_i.width,_i.height,0,Qt,Ct,_i.data)}}else{xe?Nt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,Qt,Ct,Rt[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,An,Qt,Ct,Rt[at]);for(let nn=0;nn<xt.length;nn++){const dn=xt[nn];xe?Nt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn+1,0,0,Qt,Ct,dn.image[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,nn+1,An,Qt,Ct,dn.image[at])}}}T(W)&&b(i.TEXTURE_CUBE_MAP),et.__version=tt.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function Ve(X,W,Se,Fe,tt,et){const Lt=r.convert(Se.format,Se.colorSpace),wt=r.convert(Se.type),It=M(Se.internalFormat,Lt,wt,Se.colorSpace),Zt=n.get(W),yt=n.get(Se);if(yt.__renderTarget=W,!Zt.__hasExternalTextures){const Rt=Math.max(1,W.width>>et),Xt=Math.max(1,W.height>>et);tt===i.TEXTURE_3D||tt===i.TEXTURE_2D_ARRAY?t.texImage3D(tt,et,It,Rt,Xt,W.depth,0,Lt,wt,null):t.texImage2D(tt,et,It,Rt,Xt,0,Lt,wt,null)}t.bindFramebuffer(i.FRAMEBUFFER,X),ut(W)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Fe,tt,yt.__webglTexture,0,_t(W)):(tt===i.TEXTURE_2D||tt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&tt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Fe,tt,yt.__webglTexture,et),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Be(X,W,Se){if(i.bindRenderbuffer(i.RENDERBUFFER,X),W.depthBuffer){const Fe=W.depthTexture,tt=Fe&&Fe.isDepthTexture?Fe.type:null,et=R(W.stencilBuffer,tt),Lt=W.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,wt=_t(W);ut(W)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,wt,et,W.width,W.height):Se?i.renderbufferStorageMultisample(i.RENDERBUFFER,wt,et,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,et,W.width,W.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Lt,i.RENDERBUFFER,X)}else{const Fe=W.textures;for(let tt=0;tt<Fe.length;tt++){const et=Fe[tt],Lt=r.convert(et.format,et.colorSpace),wt=r.convert(et.type),It=M(et.internalFormat,Lt,wt,et.colorSpace),Zt=_t(W);Se&&ut(W)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Zt,It,W.width,W.height):ut(W)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Zt,It,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,It,W.width,W.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Mt(X,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,X),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Fe=n.get(W.depthTexture);Fe.__renderTarget=W,(!Fe.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),oe(W.depthTexture,0);const tt=Fe.__webglTexture,et=_t(W);if(W.depthTexture.format===Oc)ut(W)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,tt,0,et):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,tt,0);else if(W.depthTexture.format===Lc)ut(W)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,tt,0,et):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,tt,0);else throw new Error("Unknown depthTexture format")}function ct(X){const W=n.get(X),Se=X.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==X.depthTexture){const Fe=X.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),Fe){const tt=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,Fe.removeEventListener("dispose",tt)};Fe.addEventListener("dispose",tt),W.__depthDisposeCallback=tt}W.__boundDepthTexture=Fe}if(X.depthTexture&&!W.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");const Fe=X.texture.mipmaps;Fe&&Fe.length>0?Mt(W.__webglFramebuffer[0],X):Mt(W.__webglFramebuffer,X)}else if(Se){W.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)if(t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer[Fe]),W.__webglDepthbuffer[Fe]===void 0)W.__webglDepthbuffer[Fe]=i.createRenderbuffer(),Be(W.__webglDepthbuffer[Fe],X,!1);else{const tt=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=W.__webglDepthbuffer[Fe];i.bindRenderbuffer(i.RENDERBUFFER,et),i.framebufferRenderbuffer(i.FRAMEBUFFER,tt,i.RENDERBUFFER,et)}}else{const Fe=X.texture.mipmaps;if(Fe&&Fe.length>0?t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=i.createRenderbuffer(),Be(W.__webglDepthbuffer,X,!1);else{const tt=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=W.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,et),i.framebufferRenderbuffer(i.FRAMEBUFFER,tt,i.RENDERBUFFER,et)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Et(X,W,Se){const Fe=n.get(X);W!==void 0&&Ve(Fe.__webglFramebuffer,X,X.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Se!==void 0&&ct(X)}function le(X){const W=X.texture,Se=n.get(X),Fe=n.get(W);X.addEventListener("dispose",L);const tt=X.textures,et=X.isWebGLCubeRenderTarget===!0,Lt=tt.length>1;if(Lt||(Fe.__webglTexture===void 0&&(Fe.__webglTexture=i.createTexture()),Fe.__version=W.version,a.memory.textures++),et){Se.__webglFramebuffer=[];for(let wt=0;wt<6;wt++)if(W.mipmaps&&W.mipmaps.length>0){Se.__webglFramebuffer[wt]=[];for(let It=0;It<W.mipmaps.length;It++)Se.__webglFramebuffer[wt][It]=i.createFramebuffer()}else Se.__webglFramebuffer[wt]=i.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){Se.__webglFramebuffer=[];for(let wt=0;wt<W.mipmaps.length;wt++)Se.__webglFramebuffer[wt]=i.createFramebuffer()}else Se.__webglFramebuffer=i.createFramebuffer();if(Lt)for(let wt=0,It=tt.length;wt<It;wt++){const Zt=n.get(tt[wt]);Zt.__webglTexture===void 0&&(Zt.__webglTexture=i.createTexture(),a.memory.textures++)}if(X.samples>0&&ut(X)===!1){Se.__webglMultisampledFramebuffer=i.createFramebuffer(),Se.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Se.__webglMultisampledFramebuffer);for(let wt=0;wt<tt.length;wt++){const It=tt[wt];Se.__webglColorRenderbuffer[wt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Se.__webglColorRenderbuffer[wt]);const Zt=r.convert(It.format,It.colorSpace),yt=r.convert(It.type),Rt=M(It.internalFormat,Zt,yt,It.colorSpace,X.isXRRenderTarget===!0),Xt=_t(X);i.renderbufferStorageMultisample(i.RENDERBUFFER,Xt,Rt,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+wt,i.RENDERBUFFER,Se.__webglColorRenderbuffer[wt])}i.bindRenderbuffer(i.RENDERBUFFER,null),X.depthBuffer&&(Se.__webglDepthRenderbuffer=i.createRenderbuffer(),Be(Se.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(et){t.bindTexture(i.TEXTURE_CUBE_MAP,Fe.__webglTexture),Ae(i.TEXTURE_CUBE_MAP,W);for(let wt=0;wt<6;wt++)if(W.mipmaps&&W.mipmaps.length>0)for(let It=0;It<W.mipmaps.length;It++)Ve(Se.__webglFramebuffer[wt][It],X,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+wt,It);else Ve(Se.__webglFramebuffer[wt],X,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0);T(W)&&b(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Lt){for(let wt=0,It=tt.length;wt<It;wt++){const Zt=tt[wt],yt=n.get(Zt);let Rt=i.TEXTURE_2D;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Rt=X.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Rt,yt.__webglTexture),Ae(Rt,Zt),Ve(Se.__webglFramebuffer,X,Zt,i.COLOR_ATTACHMENT0+wt,Rt,0),T(Zt)&&b(Rt)}t.unbindTexture()}else{let wt=i.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(wt=X.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(wt,Fe.__webglTexture),Ae(wt,W),W.mipmaps&&W.mipmaps.length>0)for(let It=0;It<W.mipmaps.length;It++)Ve(Se.__webglFramebuffer[It],X,W,i.COLOR_ATTACHMENT0,wt,It);else Ve(Se.__webglFramebuffer,X,W,i.COLOR_ATTACHMENT0,wt,0);T(W)&&b(wt),t.unbindTexture()}X.depthBuffer&&ct(X)}function $e(X){const W=X.textures;for(let Se=0,Fe=W.length;Se<Fe;Se++){const tt=W[Se];if(T(tt)){const et=w(X),Lt=n.get(tt).__webglTexture;t.bindTexture(et,Lt),b(et),t.unbindTexture()}}}const Ze=[],Xe=[];function We(X){if(X.samples>0){if(ut(X)===!1){const W=X.textures,Se=X.width,Fe=X.height;let tt=i.COLOR_BUFFER_BIT;const et=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Lt=n.get(X),wt=W.length>1;if(wt)for(let Zt=0;Zt<W.length;Zt++)t.bindFramebuffer(i.FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Zt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Lt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Zt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Lt.__webglMultisampledFramebuffer);const It=X.texture.mipmaps;It&&It.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Lt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Lt.__webglFramebuffer);for(let Zt=0;Zt<W.length;Zt++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(tt|=i.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(tt|=i.STENCIL_BUFFER_BIT)),wt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Lt.__webglColorRenderbuffer[Zt]);const yt=n.get(W[Zt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,yt,0)}i.blitFramebuffer(0,0,Se,Fe,0,0,Se,Fe,tt,i.NEAREST),l===!0&&(Ze.length=0,Xe.length=0,Ze.push(i.COLOR_ATTACHMENT0+Zt),X.depthBuffer&&X.resolveDepthBuffer===!1&&(Ze.push(et),Xe.push(et),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Xe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ze))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),wt)for(let Zt=0;Zt<W.length;Zt++){t.bindFramebuffer(i.FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Zt,i.RENDERBUFFER,Lt.__webglColorRenderbuffer[Zt]);const yt=n.get(W[Zt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Lt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Zt,i.TEXTURE_2D,yt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Lt.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&l){const W=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[W])}}}function _t(X){return Math.min(s.maxSamples,X.samples)}function ut(X){const W=n.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function ht(X){const W=a.render.frame;d.get(X)!==W&&(d.set(X,W),X.update())}function Bt(X,W){const Se=X.colorSpace,Fe=X.format,tt=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||Se!==Hf&&Se!==kl&&(Sn.getTransfer(Se)===Kt?(Fe!==nr||tt!==Tr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Se)),W}function kt(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(c.width=X.naturalWidth||X.width,c.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(c.width=X.displayWidth,c.height=X.displayHeight):(c.width=X.width,c.height=X.height),c}this.allocateTextureUnit=Z,this.resetTextureUnits=Y,this.setTexture2D=oe,this.setTexture2DArray=G,this.setTexture3D=K,this.setTextureCube=$,this.rebindTextures=Et,this.setupRenderTarget=le,this.updateRenderTargetMipmap=$e,this.updateMultisampleRenderTarget=We,this.setupDepthRenderbuffer=ct,this.setupFrameBufferTexture=Ve,this.useMultisampledRTT=ut}function gZ(i,e){function t(n,s=kl){let r;const a=Sn.getTransfer(s);if(n===Tr)return i.UNSIGNED_BYTE;if(n===ES)return i.UNSIGNED_SHORT_4_4_4_4;if(n===wS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===MS)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===AS)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===xm)return i.BYTE;if(n===bm)return i.SHORT;if(n===Xu)return i.UNSIGNED_SHORT;if(n===oo)return i.INT;if(n===Rs)return i.UNSIGNED_INT;if(n===fr)return i.FLOAT;if(n===$a)return i.HALF_FLOAT;if(n===Mw)return i.ALPHA;if(n===S_)return i.RGB;if(n===nr)return i.RGBA;if(n===Oc)return i.DEPTH_COMPONENT;if(n===Lc)return i.DEPTH_STENCIL;if(n===qy)return i.RED;if(n===km)return i.RED_INTEGER;if(n===Of)return i.RG;if(n===Xy)return i.RG_INTEGER;if(n===Yy)return i.RGBA_INTEGER;if(n===Wh||n===qh||n===Xh||n===Yh)if(a===Kt)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Wh)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===qh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Xh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Yh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Wh)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===qh)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Xh)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Yh)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===n_||n===i_||n===s_||n===r_)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===n_)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===i_)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===s_)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===r_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===vy||n===_y||n===xy)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===vy||n===_y)return a===Kt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===xy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===by||n===Sy||n===Ty||n===Ey||n===wy||n===My||n===Ay||n===Cy||n===Ry||n===Ny||n===Dy||n===Py||n===Oy||n===Ly)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===by)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Sy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ty)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ey)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===wy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===My)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ay)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Cy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ry)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ny)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Dy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Py)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Oy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ly)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Uy||n===AE||n===CE)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Uy)return a===Kt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===AE)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===CE)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===By||n===Iy||n===Fy||n===zy)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===By)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Iy)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Fy)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===zy)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Pc?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const BMe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,IMe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class FMe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new D2(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Qd({vertexShader:BMe,fragmentShader:IMe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new zs(new Zy(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class zMe extends _u{constructor(e,t){super();const n=this;let s=null,r=1,a=null,o="local-floor",l=1,c=null,d=null,h=null,m=null,v=null,_=null;const x=typeof XRWebGLBinding<"u",T=new FMe,b={},w=t.getContextAttributes();let M=null,R=null;const N=[],D=[],L=new lt;let F=null;const I=new la;I.viewport=new bn;const z=new la;z.viewport=new bn;const H=[I,z],Y=new nD;let Z=null,se=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ee){let Ue=N[Ee];return Ue===void 0&&(Ue=new Cb,N[Ee]=Ue),Ue.getTargetRaySpace()},this.getControllerGrip=function(Ee){let Ue=N[Ee];return Ue===void 0&&(Ue=new Cb,N[Ee]=Ue),Ue.getGripSpace()},this.getHand=function(Ee){let Ue=N[Ee];return Ue===void 0&&(Ue=new Cb,N[Ee]=Ue),Ue.getHandSpace()};function oe(Ee){const Ue=D.indexOf(Ee.inputSource);if(Ue===-1)return;const Ve=N[Ue];Ve!==void 0&&(Ve.update(Ee.inputSource,Ee.frame,c||a),Ve.dispatchEvent({type:Ee.type,data:Ee.inputSource}))}function G(){s.removeEventListener("select",oe),s.removeEventListener("selectstart",oe),s.removeEventListener("selectend",oe),s.removeEventListener("squeeze",oe),s.removeEventListener("squeezestart",oe),s.removeEventListener("squeezeend",oe),s.removeEventListener("end",G),s.removeEventListener("inputsourceschange",K);for(let Ee=0;Ee<N.length;Ee++){const Ue=D[Ee];Ue!==null&&(D[Ee]=null,N[Ee].disconnect(Ue))}Z=null,se=null,T.reset();for(const Ee in b)delete b[Ee];e.setRenderTarget(M),v=null,m=null,h=null,s=null,R=null,pt.stop(),n.isPresenting=!1,e.setPixelRatio(F),e.setSize(L.width,L.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ee){r=Ee,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ee){o=Ee,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(Ee){c=Ee},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return h===null&&x&&(h=new XRWebGLBinding(s,t)),h},this.getFrame=function(){return _},this.getSession=function(){return s},this.setSession=async function(Ee){if(s=Ee,s!==null){if(M=e.getRenderTarget(),s.addEventListener("select",oe),s.addEventListener("selectstart",oe),s.addEventListener("selectend",oe),s.addEventListener("squeeze",oe),s.addEventListener("squeezestart",oe),s.addEventListener("squeezeend",oe),s.addEventListener("end",G),s.addEventListener("inputsourceschange",K),w.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(L),x&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ve=null,Be=null,Mt=null;w.depth&&(Mt=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ve=w.stencil?Lc:Oc,Be=w.stencil?Pc:Rs);const ct={colorFormat:t.RGBA8,depthFormat:Mt,scaleFactor:r};h=this.getBinding(),m=h.createProjectionLayer(ct),s.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),R=new jf(m.textureWidth,m.textureHeight,{format:nr,type:Tr,depthTexture:new Uc(m.textureWidth,m.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,Ve),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const Ve={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:r};v=new XRWebGLLayer(s,t,Ve),s.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),R=new jf(v.framebufferWidth,v.framebufferHeight,{format:nr,type:Tr,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await s.requestReferenceSpace(o),pt.setContext(s),pt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function K(Ee){for(let Ue=0;Ue<Ee.removed.length;Ue++){const Ve=Ee.removed[Ue],Be=D.indexOf(Ve);Be>=0&&(D[Be]=null,N[Be].disconnect(Ve))}for(let Ue=0;Ue<Ee.added.length;Ue++){const Ve=Ee.added[Ue];let Be=D.indexOf(Ve);if(Be===-1){for(let ct=0;ct<N.length;ct++)if(ct>=D.length){D.push(Ve),Be=ct;break}else if(D[ct]===null){D[ct]=Ve,Be=ct;break}if(Be===-1)break}const Mt=N[Be];Mt&&Mt.connect(Ve)}}const $=new ae,ce=new ae;function q(Ee,Ue,Ve){$.setFromMatrixPosition(Ue.matrixWorld),ce.setFromMatrixPosition(Ve.matrixWorld);const Be=$.distanceTo(ce),Mt=Ue.projectionMatrix.elements,ct=Ve.projectionMatrix.elements,Et=Mt[14]/(Mt[10]-1),le=Mt[14]/(Mt[10]+1),$e=(Mt[9]+1)/Mt[5],Ze=(Mt[9]-1)/Mt[5],Xe=(Mt[8]-1)/Mt[0],We=(ct[8]+1)/ct[0],_t=Et*Xe,ut=Et*We,ht=Be/(-Xe+We),Bt=ht*-Xe;if(Ue.matrixWorld.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.translateX(Bt),Ee.translateZ(ht),Ee.matrixWorld.compose(Ee.position,Ee.quaternion,Ee.scale),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert(),Mt[10]===-1)Ee.projectionMatrix.copy(Ue.projectionMatrix),Ee.projectionMatrixInverse.copy(Ue.projectionMatrixInverse);else{const kt=Et+ht,X=le+ht,W=_t-Bt,Se=ut+(Be-Bt),Fe=$e*le/X*kt,tt=Ze*le/X*kt;Ee.projectionMatrix.makePerspective(W,Se,Fe,tt,kt,X),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert()}}function ue(Ee,Ue){Ue===null?Ee.matrixWorld.copy(Ee.matrix):Ee.matrixWorld.multiplyMatrices(Ue.matrixWorld,Ee.matrix),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert()}this.updateCamera=function(Ee){if(s===null)return;let Ue=Ee.near,Ve=Ee.far;T.texture!==null&&(T.depthNear>0&&(Ue=T.depthNear),T.depthFar>0&&(Ve=T.depthFar)),Y.near=z.near=I.near=Ue,Y.far=z.far=I.far=Ve,(Z!==Y.near||se!==Y.far)&&(s.updateRenderState({depthNear:Y.near,depthFar:Y.far}),Z=Y.near,se=Y.far),Y.layers.mask=Ee.layers.mask|6,I.layers.mask=Y.layers.mask&3,z.layers.mask=Y.layers.mask&5;const Be=Ee.parent,Mt=Y.cameras;ue(Y,Be);for(let ct=0;ct<Mt.length;ct++)ue(Mt[ct],Be);Mt.length===2?q(Y,I,z):Y.projectionMatrix.copy(I.projectionMatrix),Ae(Ee,Y,Be)};function Ae(Ee,Ue,Ve){Ve===null?Ee.matrix.copy(Ue.matrixWorld):(Ee.matrix.copy(Ve.matrixWorld),Ee.matrix.invert(),Ee.matrix.multiply(Ue.matrixWorld)),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.updateMatrixWorld(!0),Ee.projectionMatrix.copy(Ue.projectionMatrix),Ee.projectionMatrixInverse.copy(Ue.projectionMatrixInverse),Ee.isPerspectiveCamera&&(Ee.fov=o_*2*Math.atan(1/Ee.projectionMatrix.elements[5]),Ee.zoom=1)}this.getCamera=function(){return Y},this.getFoveation=function(){if(!(m===null&&v===null))return l},this.setFoveation=function(Ee){l=Ee,m!==null&&(m.fixedFoveation=Ee),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Ee)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(Y)},this.getCameraTexture=function(Ee){return b[Ee]};let Ne=null;function we(Ee,Ue){if(d=Ue.getViewerPose(c||a),_=Ue,d!==null){const Ve=d.views;v!==null&&(e.setRenderTargetFramebuffer(R,v.framebuffer),e.setRenderTarget(R));let Be=!1;Ve.length!==Y.cameras.length&&(Y.cameras.length=0,Be=!0);for(let le=0;le<Ve.length;le++){const $e=Ve[le];let Ze=null;if(v!==null)Ze=v.getViewport($e);else{const We=h.getViewSubImage(m,$e);Ze=We.viewport,le===0&&(e.setRenderTargetTextures(R,We.colorTexture,We.depthStencilTexture),e.setRenderTarget(R))}let Xe=H[le];Xe===void 0&&(Xe=new la,Xe.layers.enable(le),Xe.viewport=new bn,H[le]=Xe),Xe.matrix.fromArray($e.transform.matrix),Xe.matrix.decompose(Xe.position,Xe.quaternion,Xe.scale),Xe.projectionMatrix.fromArray($e.projectionMatrix),Xe.projectionMatrixInverse.copy(Xe.projectionMatrix).invert(),Xe.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),le===0&&(Y.matrix.copy(Xe.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale)),Be===!0&&Y.cameras.push(Xe)}const Mt=s.enabledFeatures;if(Mt&&Mt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&x){h=n.getBinding();const le=h.getDepthInformation(Ve[0]);le&&le.isValid&&le.texture&&T.init(le,s.renderState)}if(Mt&&Mt.includes("camera-access")&&x){e.state.unbindTexture(),h=n.getBinding();for(let le=0;le<Ve.length;le++){const $e=Ve[le].camera;if($e){let Ze=b[$e];Ze||(Ze=new D2,b[$e]=Ze);const Xe=h.getCameraImage($e);Ze.sourceTexture=Xe}}}}for(let Ve=0;Ve<N.length;Ve++){const Be=D[Ve],Mt=N[Ve];Be!==null&&Mt!==void 0&&Mt.update(Be,Ue,c||a)}Ne&&Ne(Ee,Ue),Ue.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ue}),_=null}const pt=new dZ;pt.setAnimationLoop(we),this.setAnimationLoop=function(Ee){Ne=Ee},this.dispose=function(){}}}const tv=new Kl,VMe=new an;function kMe(i,e){function t(T,b){T.matrixAutoUpdate===!0&&T.updateMatrix(),b.value.copy(T.matrix)}function n(T,b){b.color.getRGB(T.fogColor.value,hK(i)),b.isFog?(T.fogNear.value=b.near,T.fogFar.value=b.far):b.isFogExp2&&(T.fogDensity.value=b.density)}function s(T,b,w,M,R){b.isMeshBasicMaterial||b.isMeshLambertMaterial?r(T,b):b.isMeshToonMaterial?(r(T,b),h(T,b)):b.isMeshPhongMaterial?(r(T,b),d(T,b)):b.isMeshStandardMaterial?(r(T,b),m(T,b),b.isMeshPhysicalMaterial&&v(T,b,R)):b.isMeshMatcapMaterial?(r(T,b),_(T,b)):b.isMeshDepthMaterial?r(T,b):b.isMeshDistanceMaterial?(r(T,b),x(T,b)):b.isMeshNormalMaterial?r(T,b):b.isLineBasicMaterial?(a(T,b),b.isLineDashedMaterial&&o(T,b)):b.isPointsMaterial?l(T,b,w,M):b.isSpriteMaterial?c(T,b):b.isShadowMaterial?(T.color.value.copy(b.color),T.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function r(T,b){T.opacity.value=b.opacity,b.color&&T.diffuse.value.copy(b.color),b.emissive&&T.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(T.map.value=b.map,t(b.map,T.mapTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,t(b.alphaMap,T.alphaMapTransform)),b.bumpMap&&(T.bumpMap.value=b.bumpMap,t(b.bumpMap,T.bumpMapTransform),T.bumpScale.value=b.bumpScale,b.side===Ts&&(T.bumpScale.value*=-1)),b.normalMap&&(T.normalMap.value=b.normalMap,t(b.normalMap,T.normalMapTransform),T.normalScale.value.copy(b.normalScale),b.side===Ts&&T.normalScale.value.negate()),b.displacementMap&&(T.displacementMap.value=b.displacementMap,t(b.displacementMap,T.displacementMapTransform),T.displacementScale.value=b.displacementScale,T.displacementBias.value=b.displacementBias),b.emissiveMap&&(T.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,T.emissiveMapTransform)),b.specularMap&&(T.specularMap.value=b.specularMap,t(b.specularMap,T.specularMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest);const w=e.get(b),M=w.envMap,R=w.envMapRotation;M&&(T.envMap.value=M,tv.copy(R),tv.x*=-1,tv.y*=-1,tv.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(tv.y*=-1,tv.z*=-1),T.envMapRotation.value.setFromMatrix4(VMe.makeRotationFromEuler(tv)),T.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=b.reflectivity,T.ior.value=b.ior,T.refractionRatio.value=b.refractionRatio),b.lightMap&&(T.lightMap.value=b.lightMap,T.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,T.lightMapTransform)),b.aoMap&&(T.aoMap.value=b.aoMap,T.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,T.aoMapTransform))}function a(T,b){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,b.map&&(T.map.value=b.map,t(b.map,T.mapTransform))}function o(T,b){T.dashSize.value=b.dashSize,T.totalSize.value=b.dashSize+b.gapSize,T.scale.value=b.scale}function l(T,b,w,M){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,T.size.value=b.size*w,T.scale.value=M*.5,b.map&&(T.map.value=b.map,t(b.map,T.uvTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,t(b.alphaMap,T.alphaMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest)}function c(T,b){T.diffuse.value.copy(b.color),T.opacity.value=b.opacity,T.rotation.value=b.rotation,b.map&&(T.map.value=b.map,t(b.map,T.mapTransform)),b.alphaMap&&(T.alphaMap.value=b.alphaMap,t(b.alphaMap,T.alphaMapTransform)),b.alphaTest>0&&(T.alphaTest.value=b.alphaTest)}function d(T,b){T.specular.value.copy(b.specular),T.shininess.value=Math.max(b.shininess,1e-4)}function h(T,b){b.gradientMap&&(T.gradientMap.value=b.gradientMap)}function m(T,b){T.metalness.value=b.metalness,b.metalnessMap&&(T.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,T.metalnessMapTransform)),T.roughness.value=b.roughness,b.roughnessMap&&(T.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,T.roughnessMapTransform)),b.envMap&&(T.envMapIntensity.value=b.envMapIntensity)}function v(T,b,w){T.ior.value=b.ior,b.sheen>0&&(T.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),T.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(T.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,T.sheenColorMapTransform)),b.sheenRoughnessMap&&(T.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,T.sheenRoughnessMapTransform))),b.clearcoat>0&&(T.clearcoat.value=b.clearcoat,T.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(T.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,T.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(T.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===Ts&&T.clearcoatNormalScale.value.negate())),b.dispersion>0&&(T.dispersion.value=b.dispersion),b.iridescence>0&&(T.iridescence.value=b.iridescence,T.iridescenceIOR.value=b.iridescenceIOR,T.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(T.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,T.iridescenceMapTransform)),b.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),b.transmission>0&&(T.transmission.value=b.transmission,T.transmissionSamplerMap.value=w.texture,T.transmissionSamplerSize.value.set(w.width,w.height),b.transmissionMap&&(T.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,T.transmissionMapTransform)),T.thickness.value=b.thickness,b.thicknessMap&&(T.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=b.attenuationDistance,T.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(T.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(T.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=b.specularIntensity,T.specularColor.value.copy(b.specularColor),b.specularColorMap&&(T.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,T.specularColorMapTransform)),b.specularIntensityMap&&(T.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,T.specularIntensityMapTransform))}function _(T,b){b.matcap&&(T.matcap.value=b.matcap)}function x(T,b){const w=e.get(b).light;T.referencePosition.value.setFromMatrixPosition(w.matrixWorld),T.nearDistance.value=w.shadow.camera.near,T.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function GMe(i,e,t,n){let s={},r={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(w,M){const R=M.program;n.uniformBlockBinding(w,R)}function c(w,M){let R=s[w.id];R===void 0&&(_(w),R=d(w),s[w.id]=R,w.addEventListener("dispose",T));const N=M.program;n.updateUBOMapping(w,N);const D=e.render.frame;r[w.id]!==D&&(m(w),r[w.id]=D)}function d(w){const M=h();w.__bindingPointIndex=M;const R=i.createBuffer(),N=w.__size,D=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,N,D),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,M,R),R}function h(){for(let w=0;w<o;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(w){const M=s[w.id],R=w.uniforms,N=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,M);for(let D=0,L=R.length;D<L;D++){const F=Array.isArray(R[D])?R[D]:[R[D]];for(let I=0,z=F.length;I<z;I++){const H=F[I];if(v(H,D,I,N)===!0){const Y=H.__offset,Z=Array.isArray(H.value)?H.value:[H.value];let se=0;for(let oe=0;oe<Z.length;oe++){const G=Z[oe],K=x(G);typeof G=="number"||typeof G=="boolean"?(H.__data[0]=G,i.bufferSubData(i.UNIFORM_BUFFER,Y+se,H.__data)):G.isMatrix3?(H.__data[0]=G.elements[0],H.__data[1]=G.elements[1],H.__data[2]=G.elements[2],H.__data[3]=0,H.__data[4]=G.elements[3],H.__data[5]=G.elements[4],H.__data[6]=G.elements[5],H.__data[7]=0,H.__data[8]=G.elements[6],H.__data[9]=G.elements[7],H.__data[10]=G.elements[8],H.__data[11]=0):(G.toArray(H.__data,se),se+=K.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,Y,H.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function v(w,M,R,N){const D=w.value,L=M+"_"+R;if(N[L]===void 0)return typeof D=="number"||typeof D=="boolean"?N[L]=D:N[L]=D.clone(),!0;{const F=N[L];if(typeof D=="number"||typeof D=="boolean"){if(F!==D)return N[L]=D,!0}else if(F.equals(D)===!1)return F.copy(D),!0}return!1}function _(w){const M=w.uniforms;let R=0;const N=16;for(let L=0,F=M.length;L<F;L++){const I=Array.isArray(M[L])?M[L]:[M[L]];for(let z=0,H=I.length;z<H;z++){const Y=I[z],Z=Array.isArray(Y.value)?Y.value:[Y.value];for(let se=0,oe=Z.length;se<oe;se++){const G=Z[se],K=x(G),$=R%N,ce=$%K.boundary,q=$+ce;R+=ce,q!==0&&N-q<K.storage&&(R+=N-q),Y.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=R,R+=K.storage}}}const D=R%N;return D>0&&(R+=N-D),w.__size=R,w.__cache={},this}function x(w){const M={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(M.boundary=4,M.storage=4):w.isVector2?(M.boundary=8,M.storage=8):w.isVector3||w.isColor?(M.boundary=16,M.storage=12):w.isVector4?(M.boundary=16,M.storage=16):w.isMatrix3?(M.boundary=48,M.storage=48):w.isMatrix4?(M.boundary=64,M.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),M}function T(w){const M=w.target;M.removeEventListener("dispose",T);const R=a.indexOf(M.__bindingPointIndex);a.splice(R,1),i.deleteBuffer(s[M.id]),delete s[M.id],delete r[M.id]}function b(){for(const w in s)i.deleteBuffer(s[w]);a=[],s={},r={}}return{bind:l,update:c,dispose:b}}class yZ{constructor(e={}){const{canvas:t=w2(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let v;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=n.getContextAttributes().alpha}else v=a;const _=new Uint32Array(4),x=new Int32Array(4);let T=null,b=null;const w=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=bo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const R=this;let N=!1;this._outputColorSpace=ao;let D=0,L=0,F=null,I=-1,z=null;const H=new bn,Y=new bn;let Z=null;const se=new Vt(0);let oe=0,G=t.width,K=t.height,$=1,ce=null,q=null;const ue=new bn(0,0,G,K),Ae=new bn(0,0,G,K);let Ne=!1;const we=new Ky;let pt=!1,Ee=!1;const Ue=new an,Ve=new ae,Be=new bn,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ct=!1;function Et(){return F===null?$:1}let le=n;function $e(ee,be){return t.getContext(ee,be)}try{const ee={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${x_}`),t.addEventListener("webglcontextlost",Nt,!1),t.addEventListener("webglcontextrestored",$t,!1),t.addEventListener("webglcontextcreationerror",xt,!1),le===null){const be="webgl2";if(le=$e(be,ee),le===null)throw $e(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let Ze,Xe,We,_t,ut,ht,Bt,kt,X,W,Se,Fe,tt,et,Lt,wt,It,Zt,yt,Rt,Xt,Qt,Ct,An;function xe(){Ze=new ewe(le),Ze.init(),Qt=new gZ(le,Ze),Xe=new qEe(le,Ze,e,Qt),We=new LMe(le,Ze),Xe.reversedDepthBuffer&&m&&We.buffers.depth.setReversed(!0),_t=new iwe(le),ut=new bMe,ht=new UMe(le,Ze,We,ut,Xe,Qt,_t),Bt=new YEe(R),kt=new JEe(R),X=new cTe(le),Ct=new $Ee(le,X),W=new twe(le,X,_t,Ct),Se=new rwe(le,W,X,_t),yt=new swe(le,Xe,ht),wt=new XEe(ut),Fe=new xMe(R,Bt,kt,Ze,Xe,Ct,wt),tt=new kMe(R,ut),et=new TMe,Lt=new RMe(Ze),Zt=new jEe(R,Bt,kt,We,Se,v,l),It=new PMe(R,Se,Xe),An=new GMe(le,_t,Xe,We),Rt=new WEe(le,Ze,_t),Xt=new nwe(le,Ze,_t),_t.programs=Fe.programs,R.capabilities=Xe,R.extensions=Ze,R.properties=ut,R.renderLists=et,R.shadowMap=It,R.state=We,R.info=_t}xe();const bt=new zMe(R,le);this.xr=bt,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const ee=Ze.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=Ze.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(ee){ee!==void 0&&($=ee,this.setSize(G,K,!1))},this.getSize=function(ee){return ee.set(G,K)},this.setSize=function(ee,be,Ie=!0){if(bt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}G=ee,K=be,t.width=Math.floor(ee*$),t.height=Math.floor(be*$),Ie===!0&&(t.style.width=ee+"px",t.style.height=be+"px"),this.setViewport(0,0,ee,be)},this.getDrawingBufferSize=function(ee){return ee.set(G*$,K*$).floor()},this.setDrawingBufferSize=function(ee,be,Ie){G=ee,K=be,$=Ie,t.width=Math.floor(ee*Ie),t.height=Math.floor(be*Ie),this.setViewport(0,0,ee,be)},this.getCurrentViewport=function(ee){return ee.copy(H)},this.getViewport=function(ee){return ee.copy(ue)},this.setViewport=function(ee,be,Ie,je){ee.isVector4?ue.set(ee.x,ee.y,ee.z,ee.w):ue.set(ee,be,Ie,je),We.viewport(H.copy(ue).multiplyScalar($).round())},this.getScissor=function(ee){return ee.copy(Ae)},this.setScissor=function(ee,be,Ie,je){ee.isVector4?Ae.set(ee.x,ee.y,ee.z,ee.w):Ae.set(ee,be,Ie,je),We.scissor(Y.copy(Ae).multiplyScalar($).round())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(ee){We.setScissorTest(Ne=ee)},this.setOpaqueSort=function(ee){ce=ee},this.setTransparentSort=function(ee){q=ee},this.getClearColor=function(ee){return ee.copy(Zt.getClearColor())},this.setClearColor=function(){Zt.setClearColor(...arguments)},this.getClearAlpha=function(){return Zt.getClearAlpha()},this.setClearAlpha=function(){Zt.setClearAlpha(...arguments)},this.clear=function(ee=!0,be=!0,Ie=!0){let je=0;if(ee){let Ce=!1;if(F!==null){const St=F.texture.format;Ce=St===Yy||St===Xy||St===km}if(Ce){const St=F.texture.type,Dt=St===Tr||St===Rs||St===Xu||St===Pc||St===ES||St===wS,Yt=Zt.getClearColor(),Ut=Zt.getClearAlpha(),fn=Yt.r,Tn=Yt.g,sn=Yt.b;Dt?(_[0]=fn,_[1]=Tn,_[2]=sn,_[3]=Ut,le.clearBufferuiv(le.COLOR,0,_)):(x[0]=fn,x[1]=Tn,x[2]=sn,x[3]=Ut,le.clearBufferiv(le.COLOR,0,x))}else je|=le.COLOR_BUFFER_BIT}be&&(je|=le.DEPTH_BUFFER_BIT),Ie&&(je|=le.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),le.clear(je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Nt,!1),t.removeEventListener("webglcontextrestored",$t,!1),t.removeEventListener("webglcontextcreationerror",xt,!1),Zt.dispose(),et.dispose(),Lt.dispose(),ut.dispose(),Bt.dispose(),kt.dispose(),Se.dispose(),Ct.dispose(),An.dispose(),Fe.dispose(),bt.dispose(),bt.removeEventListener("sessionstart",Ur),bt.removeEventListener("sessionend",wr),Ds.stop()};function Nt(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function $t(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const ee=_t.autoReset,be=It.enabled,Ie=It.autoUpdate,je=It.needsUpdate,Ce=It.type;xe(),_t.autoReset=ee,It.enabled=be,It.autoUpdate=Ie,It.needsUpdate=je,It.type=Ce}function xt(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function at(ee){const be=ee.target;be.removeEventListener("dispose",at),nn(be)}function nn(ee){dn(ee),ut.remove(ee)}function dn(ee){const be=ut.get(ee).programs;be!==void 0&&(be.forEach(function(Ie){Fe.releaseProgram(Ie)}),ee.isShaderMaterial&&Fe.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,be,Ie,je,Ce,St){be===null&&(be=Mt);const Dt=Ce.isMesh&&Ce.matrixWorld.determinant()<0,Yt=Ic(ee,be,Ie,je,Ce);We.setMaterial(je,Dt);let Ut=Ie.index,fn=1;if(je.wireframe===!0){if(Ut=W.getWireframeAttribute(Ie),Ut===void 0)return;fn=2}const Tn=Ie.drawRange,sn=Ie.attributes.position;let qn=Tn.start*fn,Ti=(Tn.start+Tn.count)*fn;St!==null&&(qn=Math.max(qn,St.start*fn),Ti=Math.min(Ti,(St.start+St.count)*fn)),Ut!==null?(qn=Math.max(qn,0),Ti=Math.min(Ti,Ut.count)):sn!=null&&(qn=Math.max(qn,0),Ti=Math.min(Ti,sn.count));const Jn=Ti-qn;if(Jn<0||Jn===1/0)return;Ct.setup(Ce,je,Yt,Ie,Ut);let fi,Vn=Rt;if(Ut!==null&&(fi=X.get(Ut),Vn=Xt,Vn.setIndex(fi)),Ce.isMesh)je.wireframe===!0?(We.setLineWidth(je.wireframeLinewidth*Et()),Vn.setMode(le.LINES)):Vn.setMode(le.TRIANGLES);else if(Ce.isLine){let xn=je.linewidth;xn===void 0&&(xn=1),We.setLineWidth(xn*Et()),Ce.isLineSegments?Vn.setMode(le.LINES):Ce.isLineLoop?Vn.setMode(le.LINE_LOOP):Vn.setMode(le.LINE_STRIP)}else Ce.isPoints?Vn.setMode(le.POINTS):Ce.isSprite&&Vn.setMode(le.TRIANGLES);if(Ce.isBatchedMesh)if(Ce._multiDrawInstances!==null)Xl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Vn.renderMultiDrawInstances(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount,Ce._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))Vn.renderMultiDraw(Ce._multiDrawStarts,Ce._multiDrawCounts,Ce._multiDrawCount);else{const xn=Ce._multiDrawStarts,si=Ce._multiDrawCounts,On=Ce._multiDrawCount,Pa=Ut?X.get(Ut).bytesPerElement:1,Zo=ut.get(je).currentProgram.getUniforms();for(let Ps=0;Ps<On;Ps++)Zo.setValue(le,"_gl_DrawID",Ps),Vn.render(xn[Ps]/Pa,si[Ps])}else if(Ce.isInstancedMesh)Vn.renderInstances(qn,Jn,Ce.count);else if(Ie.isInstancedBufferGeometry){const xn=Ie._maxInstanceCount!==void 0?Ie._maxInstanceCount:1/0,si=Math.min(Ie.instanceCount,xn);Vn.renderInstances(qn,Jn,si)}else Vn.render(qn,Jn)};function _i(ee,be,Ie){ee.transparent===!0&&ee.side===Go&&ee.forceSinglePass===!1?(ee.side=Ts,ee.needsUpdate=!0,Ao(ee,be,Ie),ee.side=Nc,ee.needsUpdate=!0,Ao(ee,be,Ie),ee.side=Go):Ao(ee,be,Ie)}this.compile=function(ee,be,Ie=null){Ie===null&&(Ie=ee),b=Lt.get(Ie),b.init(be),M.push(b),Ie.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(be.layers)&&(b.pushLight(Ce),Ce.castShadow&&b.pushShadow(Ce))}),ee!==Ie&&ee.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(be.layers)&&(b.pushLight(Ce),Ce.castShadow&&b.pushShadow(Ce))}),b.setupLights();const je=new Set;return ee.traverse(function(Ce){if(!(Ce.isMesh||Ce.isPoints||Ce.isLine||Ce.isSprite))return;const St=Ce.material;if(St)if(Array.isArray(St))for(let Dt=0;Dt<St.length;Dt++){const Yt=St[Dt];_i(Yt,Ie,Ce),je.add(Yt)}else _i(St,Ie,Ce),je.add(St)}),b=M.pop(),je},this.compileAsync=function(ee,be,Ie=null){const je=this.compile(ee,be,Ie);return new Promise(Ce=>{function St(){if(je.forEach(function(Dt){ut.get(Dt).currentProgram.isReady()&&je.delete(Dt)}),je.size===0){Ce(ee);return}setTimeout(St,10)}Ze.get("KHR_parallel_shader_compile")!==null?St():setTimeout(St,10)})};let Si=null;function Ko(ee){Si&&Si(ee)}function Ur(){Ds.stop()}function wr(){Ds.start()}const Ds=new dZ;Ds.setAnimationLoop(Ko),typeof self<"u"&&Ds.setContext(self),this.setAnimationLoop=function(ee){Si=ee,bt.setAnimationLoop(ee),ee===null?Ds.stop():Ds.start()},bt.addEventListener("sessionstart",Ur),bt.addEventListener("sessionend",wr),this.render=function(ee,be){if(be!==void 0&&be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),be.parent===null&&be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),bt.enabled===!0&&bt.isPresenting===!0&&(bt.cameraAutoUpdate===!0&&bt.updateCamera(be),be=bt.getCamera()),ee.isScene===!0&&ee.onBeforeRender(R,ee,be,F),b=Lt.get(ee,M.length),b.init(be),M.push(b),Ue.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),we.setFromProjectionMatrix(Ue,$o,be.reversedDepth),Ee=this.localClippingEnabled,pt=wt.init(this.clippingPlanes,Ee),T=et.get(ee,w.length),T.init(),w.push(T),bt.enabled===!0&&bt.isPresenting===!0){const St=R.xr.getDepthSensingMesh();St!==null&&Mr(St,be,-1/0,R.sortObjects)}Mr(ee,be,0,R.sortObjects),T.finish(),R.sortObjects===!0&&T.sort(ce,q),ct=bt.enabled===!1||bt.isPresenting===!1||bt.hasDepthSensing()===!1,ct&&Zt.addToRenderList(T,ee),this.info.render.frame++,pt===!0&&wt.beginShadows();const Ie=b.state.shadowsArray;It.render(Ie,ee,be),pt===!0&&wt.endShadows(),this.info.autoReset===!0&&this.info.reset();const je=T.opaque,Ce=T.transmissive;if(b.setupLights(),be.isArrayCamera){const St=be.cameras;if(Ce.length>0)for(let Dt=0,Yt=St.length;Dt<Yt;Dt++){const Ut=St[Dt];Zf(je,Ce,ee,Ut)}ct&&Zt.render(ee);for(let Dt=0,Yt=St.length;Dt<Yt;Dt++){const Ut=St[Dt];Na(T,ee,Ut,Ut.viewport)}}else Ce.length>0&&Zf(je,Ce,ee,be),ct&&Zt.render(ee),Na(T,ee,be);F!==null&&L===0&&(ht.updateMultisampleRenderTarget(F),ht.updateRenderTargetMipmap(F)),ee.isScene===!0&&ee.onAfterRender(R,ee,be),Ct.resetDefaultState(),I=-1,z=null,M.pop(),M.length>0?(b=M[M.length-1],pt===!0&&wt.setGlobalState(R.clippingPlanes,b.state.camera)):b=null,w.pop(),w.length>0?T=w[w.length-1]:T=null};function Mr(ee,be,Ie,je){if(ee.visible===!1)return;if(ee.layers.test(be.layers)){if(ee.isGroup)Ie=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(be);else if(ee.isLight)b.pushLight(ee),ee.castShadow&&b.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||we.intersectsSprite(ee)){je&&Be.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(Ue);const Dt=Se.update(ee),Yt=ee.material;Yt.visible&&T.push(ee,Dt,Yt,Ie,Be.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(!ee.frustumCulled||we.intersectsObject(ee))){const Dt=Se.update(ee),Yt=ee.material;if(je&&(ee.boundingSphere!==void 0?(ee.boundingSphere===null&&ee.computeBoundingSphere(),Be.copy(ee.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),Be.copy(Dt.boundingSphere.center)),Be.applyMatrix4(ee.matrixWorld).applyMatrix4(Ue)),Array.isArray(Yt)){const Ut=Dt.groups;for(let fn=0,Tn=Ut.length;fn<Tn;fn++){const sn=Ut[fn],qn=Yt[sn.materialIndex];qn&&qn.visible&&T.push(ee,Dt,qn,Ie,Be.z,sn)}}else Yt.visible&&T.push(ee,Dt,Yt,Ie,Be.z,null)}}const St=ee.children;for(let Dt=0,Yt=St.length;Dt<Yt;Dt++)Mr(St[Dt],be,Ie,je)}function Na(ee,be,Ie,je){const Ce=ee.opaque,St=ee.transmissive,Dt=ee.transparent;b.setupLightsView(Ie),pt===!0&&wt.setGlobalState(R.clippingPlanes,Ie),je&&We.viewport(H.copy(je)),Ce.length>0&&Mo(Ce,be,Ie),St.length>0&&Mo(St,be,Ie),Dt.length>0&&Mo(Dt,be,Ie),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function Zf(ee,be,Ie,je){if((Ie.isScene===!0?Ie.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[je.id]===void 0&&(b.state.transmissionRenderTarget[je.id]=new jf(1,1,{generateMipmaps:!0,type:Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float")?$a:Tr,minFilter:jo,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Sn.workingColorSpace}));const St=b.state.transmissionRenderTarget[je.id],Dt=je.viewport||H;St.setSize(Dt.z*R.transmissionResolutionScale,Dt.w*R.transmissionResolutionScale);const Yt=R.getRenderTarget(),Ut=R.getActiveCubeFace(),fn=R.getActiveMipmapLevel();R.setRenderTarget(St),R.getClearColor(se),oe=R.getClearAlpha(),oe<1&&R.setClearColor(16777215,.5),R.clear(),ct&&Zt.render(Ie);const Tn=R.toneMapping;R.toneMapping=bo;const sn=je.viewport;if(je.viewport!==void 0&&(je.viewport=void 0),b.setupLightsView(je),pt===!0&&wt.setGlobalState(R.clippingPlanes,je),Mo(ee,Ie,je),ht.updateMultisampleRenderTarget(St),ht.updateRenderTargetMipmap(St),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let qn=!1;for(let Ti=0,Jn=be.length;Ti<Jn;Ti++){const fi=be[Ti],Vn=fi.object,xn=fi.geometry,si=fi.material,On=fi.group;if(si.side===Go&&Vn.layers.test(je.layers)){const Pa=si.side;si.side=Ts,si.needsUpdate=!0,Yr(Vn,Ie,je,xn,si,On),si.side=Pa,si.needsUpdate=!0,qn=!0}}qn===!0&&(ht.updateMultisampleRenderTarget(St),ht.updateRenderTargetMipmap(St))}R.setRenderTarget(Yt,Ut,fn),R.setClearColor(se,oe),sn!==void 0&&(je.viewport=sn),R.toneMapping=Tn}function Mo(ee,be,Ie){const je=be.isScene===!0?be.overrideMaterial:null;for(let Ce=0,St=ee.length;Ce<St;Ce++){const Dt=ee[Ce],Yt=Dt.object,Ut=Dt.geometry,fn=Dt.group;let Tn=Dt.material;Tn.allowOverride===!0&&je!==null&&(Tn=je),Yt.layers.test(Ie.layers)&&Yr(Yt,be,Ie,Ut,Tn,fn)}}function Yr(ee,be,Ie,je,Ce,St){ee.onBeforeRender(R,be,Ie,je,Ce,St),ee.modelViewMatrix.multiplyMatrices(Ie.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Ce.onBeforeRender(R,be,Ie,je,ee,St),Ce.transparent===!0&&Ce.side===Go&&Ce.forceSinglePass===!1?(Ce.side=Ts,Ce.needsUpdate=!0,R.renderBufferDirect(Ie,be,je,Ce,ee,St),Ce.side=Nc,Ce.needsUpdate=!0,R.renderBufferDirect(Ie,be,je,Ce,ee,St),Ce.side=Go):R.renderBufferDirect(Ie,be,je,Ce,ee,St),ee.onAfterRender(R,be,Ie,je,Ce,St)}function Ao(ee,be,Ie){be.isScene!==!0&&(be=Mt);const je=ut.get(ee),Ce=b.state.lights,St=b.state.shadowsArray,Dt=Ce.state.version,Yt=Fe.getParameters(ee,Ce.state,St,be,Ie),Ut=Fe.getProgramCacheKey(Yt);let fn=je.programs;je.environment=ee.isMeshStandardMaterial?be.environment:null,je.fog=be.fog,je.envMap=(ee.isMeshStandardMaterial?kt:Bt).get(ee.envMap||je.environment),je.envMapRotation=je.environment!==null&&ee.envMap===null?be.environmentRotation:ee.envMapRotation,fn===void 0&&(ee.addEventListener("dispose",at),fn=new Map,je.programs=fn);let Tn=fn.get(Ut);if(Tn!==void 0){if(je.currentProgram===Tn&&je.lightsStateVersion===Dt)return ec(ee,Yt),Tn}else Yt.uniforms=Fe.getUniforms(ee),ee.onBeforeCompile(Yt,R),Tn=Fe.acquireProgram(Yt,Ut),fn.set(Ut,Tn),je.uniforms=Yt.uniforms;const sn=je.uniforms;return(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(sn.clippingPlanes=wt.uniform),ec(ee,Yt),je.needsLights=El(ee),je.lightsStateVersion=Dt,je.needsLights&&(sn.ambientLightColor.value=Ce.state.ambient,sn.lightProbe.value=Ce.state.probe,sn.directionalLights.value=Ce.state.directional,sn.directionalLightShadows.value=Ce.state.directionalShadow,sn.spotLights.value=Ce.state.spot,sn.spotLightShadows.value=Ce.state.spotShadow,sn.rectAreaLights.value=Ce.state.rectArea,sn.ltc_1.value=Ce.state.rectAreaLTC1,sn.ltc_2.value=Ce.state.rectAreaLTC2,sn.pointLights.value=Ce.state.point,sn.pointLightShadows.value=Ce.state.pointShadow,sn.hemisphereLights.value=Ce.state.hemi,sn.directionalShadowMap.value=Ce.state.directionalShadowMap,sn.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,sn.spotShadowMap.value=Ce.state.spotShadowMap,sn.spotLightMatrix.value=Ce.state.spotLightMatrix,sn.spotLightMap.value=Ce.state.spotLightMap,sn.pointShadowMap.value=Ce.state.pointShadowMap,sn.pointShadowMatrix.value=Ce.state.pointShadowMatrix),je.currentProgram=Tn,je.uniformsList=null,Tn}function ms(ee){if(ee.uniformsList===null){const be=ee.currentProgram.getUniforms();ee.uniformsList=wR.seqWithValue(be.seq,ee.uniforms)}return ee.uniformsList}function ec(ee,be){const Ie=ut.get(ee);Ie.outputColorSpace=be.outputColorSpace,Ie.batching=be.batching,Ie.batchingColor=be.batchingColor,Ie.instancing=be.instancing,Ie.instancingColor=be.instancingColor,Ie.instancingMorph=be.instancingMorph,Ie.skinning=be.skinning,Ie.morphTargets=be.morphTargets,Ie.morphNormals=be.morphNormals,Ie.morphColors=be.morphColors,Ie.morphTargetsCount=be.morphTargetsCount,Ie.numClippingPlanes=be.numClippingPlanes,Ie.numIntersection=be.numClipIntersection,Ie.vertexAlphas=be.vertexAlphas,Ie.vertexTangents=be.vertexTangents,Ie.toneMapping=be.toneMapping}function Ic(ee,be,Ie,je,Ce){be.isScene!==!0&&(be=Mt),ht.resetTextureUnits();const St=be.fog,Dt=je.isMeshStandardMaterial?be.environment:null,Yt=F===null?R.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Hf,Ut=(je.isMeshStandardMaterial?kt:Bt).get(je.envMap||Dt),fn=je.vertexColors===!0&&!!Ie.attributes.color&&Ie.attributes.color.itemSize===4,Tn=!!Ie.attributes.tangent&&(!!je.normalMap||je.anisotropy>0),sn=!!Ie.morphAttributes.position,qn=!!Ie.morphAttributes.normal,Ti=!!Ie.morphAttributes.color;let Jn=bo;je.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Jn=R.toneMapping);const fi=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,Vn=fi!==void 0?fi.length:0,xn=ut.get(je),si=b.state.lights;if(pt===!0&&(Ee===!0||ee!==z)){const sr=ee===z&&je.id===I;wt.setState(je,ee,sr)}let On=!1;je.version===xn.__version?(xn.needsLights&&xn.lightsStateVersion!==si.state.version||xn.outputColorSpace!==Yt||Ce.isBatchedMesh&&xn.batching===!1||!Ce.isBatchedMesh&&xn.batching===!0||Ce.isBatchedMesh&&xn.batchingColor===!0&&Ce.colorTexture===null||Ce.isBatchedMesh&&xn.batchingColor===!1&&Ce.colorTexture!==null||Ce.isInstancedMesh&&xn.instancing===!1||!Ce.isInstancedMesh&&xn.instancing===!0||Ce.isSkinnedMesh&&xn.skinning===!1||!Ce.isSkinnedMesh&&xn.skinning===!0||Ce.isInstancedMesh&&xn.instancingColor===!0&&Ce.instanceColor===null||Ce.isInstancedMesh&&xn.instancingColor===!1&&Ce.instanceColor!==null||Ce.isInstancedMesh&&xn.instancingMorph===!0&&Ce.morphTexture===null||Ce.isInstancedMesh&&xn.instancingMorph===!1&&Ce.morphTexture!==null||xn.envMap!==Ut||je.fog===!0&&xn.fog!==St||xn.numClippingPlanes!==void 0&&(xn.numClippingPlanes!==wt.numPlanes||xn.numIntersection!==wt.numIntersection)||xn.vertexAlphas!==fn||xn.vertexTangents!==Tn||xn.morphTargets!==sn||xn.morphNormals!==qn||xn.morphColors!==Ti||xn.toneMapping!==Jn||xn.morphTargetsCount!==Vn)&&(On=!0):(On=!0,xn.__version=je.version);let Pa=xn.currentProgram;On===!0&&(Pa=Ao(je,be,Ce));let Zo=!1,Ps=!1,hr=!1;const is=Pa.getUniforms(),Xa=xn.uniforms;if(We.useProgram(Pa.program)&&(Zo=!0,Ps=!0,hr=!0),je.id!==I&&(I=je.id,Ps=!0),Zo||z!==ee){We.buffers.depth.getReversed()&&ee.reversedDepth!==!0&&(ee._reversedDepth=!0,ee.updateProjectionMatrix()),is.setValue(le,"projectionMatrix",ee.projectionMatrix),is.setValue(le,"viewMatrix",ee.matrixWorldInverse);const Br=is.map.cameraPosition;Br!==void 0&&Br.setValue(le,Ve.setFromMatrixPosition(ee.matrixWorld)),Xe.logarithmicDepthBuffer&&is.setValue(le,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),(je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshLambertMaterial||je.isMeshBasicMaterial||je.isMeshStandardMaterial||je.isShaderMaterial)&&is.setValue(le,"isOrthographic",ee.isOrthographicCamera===!0),z!==ee&&(z=ee,Ps=!0,hr=!0)}if(Ce.isSkinnedMesh){is.setOptional(le,Ce,"bindMatrix"),is.setOptional(le,Ce,"bindMatrixInverse");const sr=Ce.skeleton;sr&&(sr.boneTexture===null&&sr.computeBoneTexture(),is.setValue(le,"boneTexture",sr.boneTexture,ht))}Ce.isBatchedMesh&&(is.setOptional(le,Ce,"batchingTexture"),is.setValue(le,"batchingTexture",Ce._matricesTexture,ht),is.setOptional(le,Ce,"batchingIdTexture"),is.setValue(le,"batchingIdTexture",Ce._indirectTexture,ht),is.setOptional(le,Ce,"batchingColorTexture"),Ce._colorsTexture!==null&&is.setValue(le,"batchingColorTexture",Ce._colorsTexture,ht));const Kr=Ie.morphAttributes;if((Kr.position!==void 0||Kr.normal!==void 0||Kr.color!==void 0)&&yt.update(Ce,Ie,Pa),(Ps||xn.receiveShadow!==Ce.receiveShadow)&&(xn.receiveShadow=Ce.receiveShadow,is.setValue(le,"receiveShadow",Ce.receiveShadow)),je.isMeshGouraudMaterial&&je.envMap!==null&&(Xa.envMap.value=Ut,Xa.flipEnvMap.value=Ut.isCubeTexture&&Ut.isRenderTargetTexture===!1?-1:1),je.isMeshStandardMaterial&&je.envMap===null&&be.environment!==null&&(Xa.envMapIntensity.value=be.environmentIntensity),Ps&&(is.setValue(le,"toneMappingExposure",R.toneMappingExposure),xn.needsLights&&Da(Xa,hr),St&&je.fog===!0&&tt.refreshFogUniforms(Xa,St),tt.refreshMaterialUniforms(Xa,je,$,K,b.state.transmissionRenderTarget[ee.id]),wR.upload(le,ms(xn),Xa,ht)),je.isShaderMaterial&&je.uniformsNeedUpdate===!0&&(wR.upload(le,ms(xn),Xa,ht),je.uniformsNeedUpdate=!1),je.isSpriteMaterial&&is.setValue(le,"center",Ce.center),is.setValue(le,"modelViewMatrix",Ce.modelViewMatrix),is.setValue(le,"normalMatrix",Ce.normalMatrix),is.setValue(le,"modelMatrix",Ce.matrixWorld),je.isShaderMaterial||je.isRawShaderMaterial){const sr=je.uniformsGroups;for(let Br=0,Vs=sr.length;Br<Vs;Br++){const Ai=sr[Br];An.update(Ai,Pa),An.bind(Ai,Pa)}}return Pa}function Da(ee,be){ee.ambientLightColor.needsUpdate=be,ee.lightProbe.needsUpdate=be,ee.directionalLights.needsUpdate=be,ee.directionalLightShadows.needsUpdate=be,ee.pointLights.needsUpdate=be,ee.pointLightShadows.needsUpdate=be,ee.spotLights.needsUpdate=be,ee.spotLightShadows.needsUpdate=be,ee.rectAreaLights.needsUpdate=be,ee.hemisphereLights.needsUpdate=be}function El(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(ee,be,Ie){const je=ut.get(ee);je.__autoAllocateDepthBuffer=ee.resolveDepthBuffer===!1,je.__autoAllocateDepthBuffer===!1&&(je.__useRenderToTexture=!1),ut.get(ee.texture).__webglTexture=be,ut.get(ee.depthTexture).__webglTexture=je.__autoAllocateDepthBuffer?void 0:Ie,je.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ee,be){const Ie=ut.get(ee);Ie.__webglFramebuffer=be,Ie.__useDefaultFramebuffer=be===void 0};const Hi=le.createFramebuffer();this.setRenderTarget=function(ee,be=0,Ie=0){F=ee,D=be,L=Ie;let je=!0,Ce=null,St=!1,Dt=!1;if(ee){const Ut=ut.get(ee);if(Ut.__useDefaultFramebuffer!==void 0)We.bindFramebuffer(le.FRAMEBUFFER,null),je=!1;else if(Ut.__webglFramebuffer===void 0)ht.setupRenderTarget(ee);else if(Ut.__hasExternalTextures)ht.rebindTextures(ee,ut.get(ee.texture).__webglTexture,ut.get(ee.depthTexture).__webglTexture);else if(ee.depthBuffer){const sn=ee.depthTexture;if(Ut.__boundDepthTexture!==sn){if(sn!==null&&ut.has(sn)&&(ee.width!==sn.image.width||ee.height!==sn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ht.setupDepthRenderbuffer(ee)}}const fn=ee.texture;(fn.isData3DTexture||fn.isDataArrayTexture||fn.isCompressedArrayTexture)&&(Dt=!0);const Tn=ut.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Array.isArray(Tn[be])?Ce=Tn[be][Ie]:Ce=Tn[be],St=!0):ee.samples>0&&ht.useMultisampledRTT(ee)===!1?Ce=ut.get(ee).__webglMultisampledFramebuffer:Array.isArray(Tn)?Ce=Tn[Ie]:Ce=Tn,H.copy(ee.viewport),Y.copy(ee.scissor),Z=ee.scissorTest}else H.copy(ue).multiplyScalar($).floor(),Y.copy(Ae).multiplyScalar($).floor(),Z=Ne;if(Ie!==0&&(Ce=Hi),We.bindFramebuffer(le.FRAMEBUFFER,Ce)&&je&&We.drawBuffers(ee,Ce),We.viewport(H),We.scissor(Y),We.setScissorTest(Z),St){const Ut=ut.get(ee.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_CUBE_MAP_POSITIVE_X+be,Ut.__webglTexture,Ie)}else if(Dt){const Ut=be;for(let fn=0;fn<ee.textures.length;fn++){const Tn=ut.get(ee.textures[fn]);le.framebufferTextureLayer(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0+fn,Tn.__webglTexture,Ie,Ut)}}else if(ee!==null&&Ie!==0){const Ut=ut.get(ee.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Ut.__webglTexture,Ie)}I=-1},this.readRenderTargetPixels=function(ee,be,Ie,je,Ce,St,Dt,Yt=0){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ut=ut.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&Dt!==void 0&&(Ut=Ut[Dt]),Ut){We.bindFramebuffer(le.FRAMEBUFFER,Ut);try{const fn=ee.textures[Yt],Tn=fn.format,sn=fn.type;if(!Xe.textureFormatReadable(Tn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Xe.textureTypeReadable(sn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}be>=0&&be<=ee.width-je&&Ie>=0&&Ie<=ee.height-Ce&&(ee.textures.length>1&&le.readBuffer(le.COLOR_ATTACHMENT0+Yt),le.readPixels(be,Ie,je,Ce,Qt.convert(Tn),Qt.convert(sn),St))}finally{const fn=F!==null?ut.get(F).__webglFramebuffer:null;We.bindFramebuffer(le.FRAMEBUFFER,fn)}}},this.readRenderTargetPixelsAsync=async function(ee,be,Ie,je,Ce,St,Dt,Yt=0){if(!(ee&&ee.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ut=ut.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&Dt!==void 0&&(Ut=Ut[Dt]),Ut)if(be>=0&&be<=ee.width-je&&Ie>=0&&Ie<=ee.height-Ce){We.bindFramebuffer(le.FRAMEBUFFER,Ut);const fn=ee.textures[Yt],Tn=fn.format,sn=fn.type;if(!Xe.textureFormatReadable(Tn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xe.textureTypeReadable(sn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const qn=le.createBuffer();le.bindBuffer(le.PIXEL_PACK_BUFFER,qn),le.bufferData(le.PIXEL_PACK_BUFFER,St.byteLength,le.STREAM_READ),ee.textures.length>1&&le.readBuffer(le.COLOR_ATTACHMENT0+Yt),le.readPixels(be,Ie,je,Ce,Qt.convert(Tn),Qt.convert(sn),0);const Ti=F!==null?ut.get(F).__webglFramebuffer:null;We.bindFramebuffer(le.FRAMEBUFFER,Ti);const Jn=le.fenceSync(le.SYNC_GPU_COMMANDS_COMPLETE,0);return le.flush(),await Mbe(le,Jn,4),le.bindBuffer(le.PIXEL_PACK_BUFFER,qn),le.getBufferSubData(le.PIXEL_PACK_BUFFER,0,St),le.deleteBuffer(qn),le.deleteSync(Jn),St}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ee,be=null,Ie=0){const je=Math.pow(2,-Ie),Ce=Math.floor(ee.image.width*je),St=Math.floor(ee.image.height*je),Dt=be!==null?be.x:0,Yt=be!==null?be.y:0;ht.setTexture2D(ee,0),le.copyTexSubImage2D(le.TEXTURE_2D,Ie,0,0,Dt,Yt,Ce,St),We.unbindTexture()};const Ar=le.createFramebuffer(),Fc=le.createFramebuffer();this.copyTextureToTexture=function(ee,be,Ie=null,je=null,Ce=0,St=null){St===null&&(Ce!==0?(Xl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),St=Ce,Ce=0):St=0);let Dt,Yt,Ut,fn,Tn,sn,qn,Ti,Jn;const fi=ee.isCompressedTexture?ee.mipmaps[St]:ee.image;if(Ie!==null)Dt=Ie.max.x-Ie.min.x,Yt=Ie.max.y-Ie.min.y,Ut=Ie.isBox3?Ie.max.z-Ie.min.z:1,fn=Ie.min.x,Tn=Ie.min.y,sn=Ie.isBox3?Ie.min.z:0;else{const Kr=Math.pow(2,-Ce);Dt=Math.floor(fi.width*Kr),Yt=Math.floor(fi.height*Kr),ee.isDataArrayTexture?Ut=fi.depth:ee.isData3DTexture?Ut=Math.floor(fi.depth*Kr):Ut=1,fn=0,Tn=0,sn=0}je!==null?(qn=je.x,Ti=je.y,Jn=je.z):(qn=0,Ti=0,Jn=0);const Vn=Qt.convert(be.format),xn=Qt.convert(be.type);let si;be.isData3DTexture?(ht.setTexture3D(be,0),si=le.TEXTURE_3D):be.isDataArrayTexture||be.isCompressedArrayTexture?(ht.setTexture2DArray(be,0),si=le.TEXTURE_2D_ARRAY):(ht.setTexture2D(be,0),si=le.TEXTURE_2D),le.pixelStorei(le.UNPACK_FLIP_Y_WEBGL,be.flipY),le.pixelStorei(le.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),le.pixelStorei(le.UNPACK_ALIGNMENT,be.unpackAlignment);const On=le.getParameter(le.UNPACK_ROW_LENGTH),Pa=le.getParameter(le.UNPACK_IMAGE_HEIGHT),Zo=le.getParameter(le.UNPACK_SKIP_PIXELS),Ps=le.getParameter(le.UNPACK_SKIP_ROWS),hr=le.getParameter(le.UNPACK_SKIP_IMAGES);le.pixelStorei(le.UNPACK_ROW_LENGTH,fi.width),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,fi.height),le.pixelStorei(le.UNPACK_SKIP_PIXELS,fn),le.pixelStorei(le.UNPACK_SKIP_ROWS,Tn),le.pixelStorei(le.UNPACK_SKIP_IMAGES,sn);const is=ee.isDataArrayTexture||ee.isData3DTexture,Xa=be.isDataArrayTexture||be.isData3DTexture;if(ee.isDepthTexture){const Kr=ut.get(ee),sr=ut.get(be),Br=ut.get(Kr.__renderTarget),Vs=ut.get(sr.__renderTarget);We.bindFramebuffer(le.READ_FRAMEBUFFER,Br.__webglFramebuffer),We.bindFramebuffer(le.DRAW_FRAMEBUFFER,Vs.__webglFramebuffer);for(let Ai=0;Ai<Ut;Ai++)is&&(le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,ut.get(ee).__webglTexture,Ce,sn+Ai),le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,ut.get(be).__webglTexture,St,Jn+Ai)),le.blitFramebuffer(fn,Tn,Dt,Yt,qn,Ti,Dt,Yt,le.DEPTH_BUFFER_BIT,le.NEAREST);We.bindFramebuffer(le.READ_FRAMEBUFFER,null),We.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else if(Ce!==0||ee.isRenderTargetTexture||ut.has(ee)){const Kr=ut.get(ee),sr=ut.get(be);We.bindFramebuffer(le.READ_FRAMEBUFFER,Ar),We.bindFramebuffer(le.DRAW_FRAMEBUFFER,Fc);for(let Br=0;Br<Ut;Br++)is?le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Kr.__webglTexture,Ce,sn+Br):le.framebufferTexture2D(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Kr.__webglTexture,Ce),Xa?le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,sr.__webglTexture,St,Jn+Br):le.framebufferTexture2D(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,sr.__webglTexture,St),Ce!==0?le.blitFramebuffer(fn,Tn,Dt,Yt,qn,Ti,Dt,Yt,le.COLOR_BUFFER_BIT,le.NEAREST):Xa?le.copyTexSubImage3D(si,St,qn,Ti,Jn+Br,fn,Tn,Dt,Yt):le.copyTexSubImage2D(si,St,qn,Ti,fn,Tn,Dt,Yt);We.bindFramebuffer(le.READ_FRAMEBUFFER,null),We.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else Xa?ee.isDataTexture||ee.isData3DTexture?le.texSubImage3D(si,St,qn,Ti,Jn,Dt,Yt,Ut,Vn,xn,fi.data):be.isCompressedArrayTexture?le.compressedTexSubImage3D(si,St,qn,Ti,Jn,Dt,Yt,Ut,Vn,fi.data):le.texSubImage3D(si,St,qn,Ti,Jn,Dt,Yt,Ut,Vn,xn,fi):ee.isDataTexture?le.texSubImage2D(le.TEXTURE_2D,St,qn,Ti,Dt,Yt,Vn,xn,fi.data):ee.isCompressedTexture?le.compressedTexSubImage2D(le.TEXTURE_2D,St,qn,Ti,fi.width,fi.height,Vn,fi.data):le.texSubImage2D(le.TEXTURE_2D,St,qn,Ti,Dt,Yt,Vn,xn,fi);le.pixelStorei(le.UNPACK_ROW_LENGTH,On),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,Pa),le.pixelStorei(le.UNPACK_SKIP_PIXELS,Zo),le.pixelStorei(le.UNPACK_SKIP_ROWS,Ps),le.pixelStorei(le.UNPACK_SKIP_IMAGES,hr),St===0&&be.generateMipmaps&&le.generateMipmap(si),We.unbindTexture()},this.initRenderTarget=function(ee){ut.get(ee).__webglFramebuffer===void 0&&ht.setupRenderTarget(ee)},this.initTexture=function(ee){ee.isCubeTexture?ht.setTextureCube(ee,0):ee.isData3DTexture?ht.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?ht.setTexture2DArray(ee,0):ht.setTexture2D(ee,0),We.unbindTexture()},this.resetState=function(){D=0,L=0,F=null,We.reset(),Ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $o}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Sn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Sn._getUnpackColorSpace()}}const HMe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ww,AddEquation:Ho,AddOperation:y2,AdditiveAnimationBlendMode:T2,AdditiveBlending:my,AgXToneMapping:b2,AlphaFormat:Mw,AlwaysCompare:Ow,AlwaysDepth:Kv,AlwaysStencilFunc:NE,AmbientLight:Q2,AnimationAction:yz,AnimationClip:Kb,AnimationLoader:AK,AnimationMixer:FK,AnimationObjectGroup:IK,AnimationUtils:MK,ArcCurve:YF,ArrayCamera:nD,ArrowHelper:aZ,AttachedBindMode:pN,Audio:hz,AudioAnalyser:BK,AudioContext:tD,AudioListener:LK,AudioLoader:PK,AxesHelper:oZ,BackSide:Ts,BasicDepthPacking:bF,BasicShadowMap:h2,BatchedMesh:jF,Bone:R2,BooleanKeyframeTrack:Qy,Box2:WK,Box3:Xo,Box3Helper:sZ,BoxGeometry:hp,BoxHelper:iZ,BufferAttribute:os,BufferGeometry:di,BufferGeometryLoader:dz,ByteType:xm,Cache:Uf,Camera:DS,CameraHelper:nZ,CanvasTexture:_K,CapsuleGeometry:Hw,CatmullRomCurve3:ZF,CineonToneMapping:x2,CircleGeometry:jw,ClampToEdgeWrapping:vl,Clock:iD,Color:Vt,ColorKeyframeTrack:q2,ColorManagement:Sn,CompressedArrayTexture:yK,CompressedCubeTexture:vK,CompressedTexture:Gw,CompressedTextureLoader:CK,ConeGeometry:LS,ConstantAlphaFactor:fF,ConstantColorFactor:uF,Controls:cZ,CubeCamera:A2,CubeReflectionMapping:gu,CubeRefractionMapping:nd,CubeTexture:Gm,CubeTextureLoader:RK,CubeUVReflectionMapping:lp,CubicBezierCurve:P2,CubicBezierCurve3:QF,CubicInterpolant:sz,CullFaceBack:ME,CullFaceFront:f2,CullFaceFrontBack:zY,CullFaceNone:d2,Curve:af,CurvePath:ez,CustomBlending:ry,CustomToneMapping:pF,CylinderGeometry:w_,Cylindrical:$K,Data3DTexture:Lw,DataArrayTexture:NS,DataTexture:Yd,DataTextureLoader:NK,DataUtils:oK,DecrementStencilOp:MF,DecrementWrapStencilOp:CF,DefaultLoadingManager:oz,DepthFormat:Oc,DepthStencilFormat:Lc,DepthTexture:Uc,DetachedBindMode:mF,DirectionalLight:Z2,DirectionalLightHelper:tZ,DiscreteInterpolant:rz,DodecahedronGeometry:$w,DoubleSide:Go,DstAlphaFactor:xw,DstColorFactor:Sw,DynamicCopyUsage:JY,DynamicDrawUsage:Qg,DynamicReadUsage:KY,EdgesGeometry:XF,EllipseCurve:Ww,EqualCompare:Rw,EqualDepth:Qv,EqualStencilFunc:PF,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:Nm,Euler:Kl,EventDispatcher:_u,ExternalTexture:D2,ExtrudeGeometry:qw,FileLoader:$f,Float16BufferAttribute:M2,Float32BufferAttribute:on,FloatType:fr,Fog:Fw,FogExp2:Iw,FramebufferTexture:N2,FrontSide:Nc,Frustum:Ky,FrustumArray:OS,GLBufferAttribute:HK,GLSL1:tK,GLSL3:mN,GreaterCompare:Nw,GreaterDepth:e_,GreaterEqualCompare:Pw,GreaterEqualDepth:Jv,GreaterEqualStencilFunc:BF,GreaterStencilFunc:LF,GridHelper:JK,Group:pm,HalfFloatType:$a,HemisphereLight:Y2,HemisphereLightHelper:QK,IcosahedronGeometry:Xw,ImageBitmapLoader:DK,ImageLoader:Zb,ImageUtils:zF,IncrementStencilOp:wF,IncrementWrapStencilOp:AF,InstancedBufferAttribute:Qu,InstancedBufferGeometry:uz,InstancedInterleavedBuffer:vz,InstancedMesh:HF,Int16BufferAttribute:dK,Int32BufferAttribute:fK,Int8BufferAttribute:lK,IntType:oo,InterleavedBuffer:PS,InterleavedBufferAttribute:Dm,Interpolant:BS,InterpolateDiscrete:jb,InterpolateLinear:RE,InterpolateSmooth:$1,InterpolationSamplingMode:iK,InterpolationSamplingType:nK,InvertStencilOp:RF,KeepStencilOp:rm,KeyframeTrack:ad,LOD:kF,LatheGeometry:Yw,Layers:l_,LessCompare:CS,LessDepth:Zv,LessEqualCompare:RS,LessEqualDepth:op,LessEqualStencilFunc:OF,LessStencilFunc:DF,Light:jm,LightProbe:eD,Line:Pm,Line3:qK,LineBasicMaterial:Sl,LineCurve:O2,LineCurve3:JF,LineDashedMaterial:iM,LineLoop:$F,LineSegments:Kf,LinearFilter:Zi,LinearInterpolant:W2,LinearMipMapLinearFilter:gF,LinearMipMapNearestFilter:GY,LinearMipmapLinearFilter:jo,LinearMipmapNearestFilter:_m,LinearSRGBColorSpace:Hf,LinearToneMapping:v2,LinearTransfer:Vy,Loader:Jl,LoaderUtils:_N,LoadingManager:X2,LoopOnce:vF,LoopPingPong:xF,LoopRepeat:_F,MOUSE:IY,Material:So,MaterialLoader:zS,MathUtils:Lf,Matrix2:VS,Matrix3:Kn,Matrix4:an,MaxEquation:m2,Mesh:zs,MeshBasicMaterial:Gl,MeshDepthMaterial:H2,MeshDistanceMaterial:j2,MeshLambertMaterial:G2,MeshMatcapMaterial:$2,MeshNormalMaterial:k2,MeshPhongMaterial:z2,MeshPhysicalMaterial:F2,MeshStandardMaterial:nM,MeshToonMaterial:V2,MinEquation:p2,MirroredRepeatWrapping:up,MixOperation:g2,MultiplyBlending:yy,MultiplyOperation:b_,NearestFilter:Fs,NearestMipMapLinearFilter:kY,NearestMipMapNearestFilter:VY,NearestMipmapLinearFilter:jd,NearestMipmapNearestFilter:TS,NeutralToneMapping:S2,NeverCompare:Cw,NeverDepth:Yv,NeverStencilFunc:NF,NoBlending:ql,NoColorSpace:kl,NoToneMapping:bo,NormalAnimationBlendMode:Aw,NormalBlending:Dc,NotEqualCompare:Dw,NotEqualDepth:t_,NotEqualStencilFunc:UF,NumberKeyframeTrack:Xb,Object3D:Qi,ObjectLoader:fz,ObjectSpaceNormalMap:E2,OctahedronGeometry:US,OneFactor:yw,OneMinusConstantAlphaFactor:hF,OneMinusConstantColorFactor:dF,OneMinusDstAlphaFactor:bw,OneMinusDstColorFactor:Tw,OneMinusSrcAlphaFactor:Xv,OneMinusSrcColorFactor:_w,OrthographicCamera:e0,PCFShadowMap:bS,PCFSoftShadowMap:Mb,PMREMGenerator:Y3,Path:PE,PerspectiveCamera:la,Plane:Df,PlaneGeometry:Zy,PlaneHelper:rZ,PointLight:K2,PointLightHelper:ZK,Points:WF,PointsMaterial:kw,PolarGridHelper:eZ,PolyhedronGeometry:Hm,PositionalAudio:UK,PropertyBinding:ns,PropertyMixer:pz,QuadraticBezierCurve:L2,QuadraticBezierCurve3:U2,Quaternion:xl,QuaternionKeyframeTrack:IS,QuaternionLinearInterpolant:az,RED_GREEN_RGTC2_Format:Fy,RED_RGTC1_Format:By,REVISION:x_,RGBADepthPacking:SF,RGBAFormat:nr,RGBAIntegerFormat:Yy,RGBA_ASTC_10x10_Format:Py,RGBA_ASTC_10x5_Format:Ry,RGBA_ASTC_10x6_Format:Ny,RGBA_ASTC_10x8_Format:Dy,RGBA_ASTC_12x10_Format:Oy,RGBA_ASTC_12x12_Format:Ly,RGBA_ASTC_4x4_Format:by,RGBA_ASTC_5x4_Format:Sy,RGBA_ASTC_5x5_Format:Ty,RGBA_ASTC_6x5_Format:Ey,RGBA_ASTC_6x6_Format:wy,RGBA_ASTC_8x5_Format:My,RGBA_ASTC_8x6_Format:Ay,RGBA_ASTC_8x8_Format:Cy,RGBA_BPTC_Format:Uy,RGBA_ETC2_EAC_Format:xy,RGBA_PVRTC_2BPPV1_Format:r_,RGBA_PVRTC_4BPPV1_Format:s_,RGBA_S3TC_DXT1_Format:qh,RGBA_S3TC_DXT3_Format:Xh,RGBA_S3TC_DXT5_Format:Yh,RGBDepthPacking:WY,RGBFormat:S_,RGBIntegerFormat:yF,RGB_BPTC_SIGNED_Format:AE,RGB_BPTC_UNSIGNED_Format:CE,RGB_ETC1_Format:vy,RGB_ETC2_Format:_y,RGB_PVRTC_2BPPV1_Format:i_,RGB_PVRTC_4BPPV1_Format:n_,RGB_S3TC_DXT1_Format:Wh,RGDepthPacking:qY,RGFormat:Of,RGIntegerFormat:Xy,RawShaderMaterial:nz,Ray:T_,Raycaster:sD,RectAreaLight:J2,RedFormat:qy,RedIntegerFormat:km,ReinhardToneMapping:_2,RenderTarget:rf,RenderTarget3D:zK,RepeatWrapping:cp,ReplaceStencilOp:EF,ReverseSubtractEquation:gw,RingGeometry:Kw,SIGNED_RED_GREEN_RGTC2_Format:zy,SIGNED_RED_RGTC1_Format:Iy,SRGBColorSpace:ao,SRGBTransfer:Kt,Scene:E_,ShaderChunk:Mi,ShaderLib:Pf,ShaderMaterial:Qd,ShadowMaterial:I2,Shape:ay,ShapeGeometry:Zw,ShapePath:lZ,ShapeUtils:$d,ShortType:bm,Skeleton:Vw,SkeletonHelper:YK,SkinnedMesh:GF,Source:hm,Sphere:co,SphereGeometry:M_,Spherical:_z,SphericalHarmonics3:cz,SplineCurve:B2,SpotLight:FS,SpotLightHelper:XK,Sprite:VF,SpriteMaterial:zw,SrcAlphaFactor:qv,SrcAlphaSaturateFactor:Ew,SrcColorFactor:vw,StaticCopyUsage:QY,StaticDrawUsage:a_,StaticReadUsage:YY,StereoCamera:OK,StreamCopyUsage:eK,StreamDrawUsage:XY,StreamReadUsage:ZY,StringKeyframeTrack:Jy,SubtractEquation:mw,SubtractiveBlending:gy,TOUCH:FY,TangentSpaceNormalMap:Gf,TetrahedronGeometry:Qw,Texture:Es,TextureLoader:sM,TextureUtils:uZ,Timer:jK,TimestampQuery:Jg,TorusGeometry:Jw,TorusKnotGeometry:eM,Triangle:wc,TriangleFanDrawMode:$Y,TriangleStripDrawMode:jY,TrianglesDrawMode:HY,TubeGeometry:tM,UVMapping:SS,Uint16BufferAttribute:Uw,Uint32BufferAttribute:Bw,Uint8BufferAttribute:cK,Uint8ClampedBufferAttribute:uK,Uniform:VK,UniformsGroup:GK,UniformsLib:qt,UniformsUtils:pK,UnsignedByteType:Tr,UnsignedInt101111Type:AS,UnsignedInt248Type:Pc,UnsignedInt5999Type:MS,UnsignedIntType:Rs,UnsignedShort4444Type:ES,UnsignedShort5551Type:wS,UnsignedShortType:Xu,VSMShadowMap:zl,Vector2:lt,Vector3:ae,Vector4:bn,VectorKeyframeTrack:Yb,VideoFrameTexture:gK,VideoTexture:qF,WebGL3DRenderTarget:rK,WebGLArrayRenderTarget:sK,WebGLCoordinateSystem:$o,WebGLCubeRenderTarget:C2,WebGLRenderTarget:jf,WebGLRenderer:yZ,WebGLUtils:gZ,WebGPUCoordinateSystem:id,WebXRController:Cb,WireframeGeometry:tz,WrapAroundEnding:$b,ZeroCurvatureEnding:Kg,ZeroFactor:Nf,ZeroSlopeEnding:Zg,ZeroStencilOp:TF,createCanvasElement:w2},Symbol.toStringTag,{value:"Module"}));var vL={exports:{}},Jp={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8;function jMe(){return p8||(p8=1,Jp.ConcurrentRoot=1,Jp.ContinuousEventPriority=8,Jp.DefaultEventPriority=32,Jp.DiscreteEventPriority=2,Jp.IdleEventPriority=268435456,Jp.LegacyRoot=0,Jp.NoEventPriority=0),Jp}var m8;function $Me(){return m8||(m8=1,vL.exports=jMe()),vL.exports}var MR=$Me(),_L={exports:{}},xL={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8;function WMe(){if(g8)return xL;g8=1;var i=oS(),e=c7();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=i.useRef,a=i.useEffect,o=i.useMemo,l=i.useDebugValue;return xL.useSyncExternalStoreWithSelector=function(c,d,h,m,v){var _=r(null);if(_.current===null){var x={hasValue:!1,value:null};_.current=x}else x=_.current;_=o(function(){function b(D){if(!w){if(w=!0,M=D,D=m(D),v!==void 0&&x.hasValue){var L=x.value;if(v(L,D))return R=L}return R=D}if(L=R,n(M,D))return L;var F=m(D);return v!==void 0&&v(L,F)?(M=D,L):(M=D,R=F)}var w=!1,M,R,N=h===void 0?null:h;return[function(){return b(d())},N===null?void 0:function(){return b(N())}]},[d,h,m,v]);var T=s(c,_[0],_[1]);return a(function(){x.hasValue=!0,x.value=T},[T]),l(T),T},xL}var y8;function qMe(){return y8||(y8=1,_L.exports=WMe()),_L.exports}var XMe=qMe();const YMe=dp(XMe),v8=i=>{let e;const t=new Set,n=(c,d)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const m=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(v=>v(e,m))}},s=()=>e,o={setState:n,getState:s,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=i(n,s,o);return o},KMe=(i=>i?v8(i):v8),{useSyncExternalStoreWithSelector:ZMe}=YMe,QMe=i=>i;function JMe(i,e=QMe,t){const n=ZMe(i.subscribe,i.getState,i.getInitialState,e,t);return fe.useDebugValue(n),n}const _8=(i,e)=>{const t=KMe(i),n=(s,r=e)=>JMe(t,s,r);return Object.assign(n,t),n},eAe=((i,e)=>i?_8(i,e):_8),tAe=i=>typeof i=="object"&&typeof i.then=="function",Tv=[];function vZ(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function _Z(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of Tv)if(vZ(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=Tv.indexOf(s);r!==-1&&Tv.splice(r,1)},promise:(tAe(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Tv.push(s),!t)throw s.promise}const nAe=(i,e,t)=>_Z(i,e,!1,t),iAe=(i,e,t)=>void _Z(i,e,!0,t),sAe=i=>{if(i===void 0||i.length===0)Tv.splice(0,Tv.length);else{const e=Tv.find(t=>vZ(i,t.keys,t.equal));e&&e.remove()}};var bL={exports:{}},SL={exports:{}},TL={exports:{}},EL={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x8;function rAe(){return x8||(x8=1,(function(i){function e(G,K){var $=G.length;G.push(K);e:for(;0<$;){var ce=$-1>>>1,q=G[ce];if(0<s(q,K))G[ce]=K,G[$]=q,$=ce;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var K=G[0],$=G.pop();if($!==K){G[0]=$;e:for(var ce=0,q=G.length,ue=q>>>1;ce<ue;){var Ae=2*(ce+1)-1,Ne=G[Ae],we=Ae+1,pt=G[we];if(0>s(Ne,$))we<q&&0>s(pt,Ne)?(G[ce]=pt,G[we]=$,ce=we):(G[ce]=Ne,G[Ae]=$,ce=Ae);else if(we<q&&0>s(pt,$))G[ce]=pt,G[we]=$,ce=we;else break e}}return K}function s(G,K){var $=G.sortIndex-K.sortIndex;return $!==0?$:G.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,m=3,v=!1,_=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var K=t(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=G)n(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function R(G){if(x=!1,M(G),!_)if(t(l)!==null)_=!0,se();else{var K=t(c);K!==null&&oe(R,K.startTime-G)}}var N=!1,D=-1,L=5,F=-1;function I(){return!(i.unstable_now()-F<L)}function z(){if(N){var G=i.unstable_now();F=G;var K=!0;try{e:{_=!1,x&&(x=!1,b(D),D=-1),v=!0;var $=m;try{t:{for(M(G),h=t(l);h!==null&&!(h.expirationTime>G&&I());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,m=h.priorityLevel;var q=ce(h.expirationTime<=G);if(G=i.unstable_now(),typeof q=="function"){h.callback=q,M(G),K=!0;break t}h===t(l)&&n(l),M(G)}else n(l);h=t(l)}if(h!==null)K=!0;else{var ue=t(c);ue!==null&&oe(R,ue.startTime-G),K=!1}}break e}finally{h=null,m=$,v=!1}K=void 0}}finally{K?H():N=!1}}}var H;if(typeof w=="function")H=function(){w(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=z,H=function(){Z.postMessage(null)}}else H=function(){T(z,0)};function se(){N||(N=!0,H())}function oe(G,K){D=T(function(){G(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){_||v||(_=!0,se())},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(G){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var $=m;m=K;try{return G()}finally{m=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var $=m;m=G;try{return K()}finally{m=$}},i.unstable_scheduleCallback=function(G,K,$){var ce=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ce+$:ce):$=ce,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=$+q,G={id:d++,callback:K,priorityLevel:G,startTime:$,expirationTime:q,sortIndex:-1},$>ce?(G.sortIndex=$,e(c,G),t(l)===null&&G===t(c)&&(x?(b(D),D=-1):x=!0,oe(R,$-ce))):(G.sortIndex=q,e(l,G),_||v||(_=!0,se())),G},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(G){var K=m;return function(){var $=m;m=K;try{return G.apply(this,arguments)}finally{m=$}}}})(EL)),EL}var b8;function aAe(){return b8||(b8=1,TL.exports=rAe()),TL.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S8;function oAe(){return S8||(S8=1,(function(i){i.exports=function(e){function t(p,g,E,C){return new oh(p,g,E,C)}function n(){}function s(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(p){return p===null||typeof p!="object"?null:(p=df&&p[df]||p["@@iterator"],typeof p=="function"?p:null)}function a(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===iT?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case lh:return"Fragment";case $c:return"Portal";case L_:return"Profiler";case x0:return"StrictMode";case U_:return"Suspense";case tg:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Au:return(p.displayName||"Context")+".Provider";case tT:return(p._context.displayName||"Context")+".Consumer";case S0:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case B_:return g=p.displayName||null,g!==null?g:a(p.type)||"Memo";case Wc:g=p._payload,p=p._init;try{return a(p(g))}catch{}}return null}function o(p){if(vd===void 0)try{throw Error()}catch(E){var g=E.stack.trim().match(/\n( *(at )?)/);vd=g&&g[1]||"",ff=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vd+p+ff}function l(p,g){if(!p||Mp)return"";Mp=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(g){var Wt=function(){throw Error()};if(Object.defineProperty(Wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Wt,[])}catch(ui){var tn=ui}Reflect.construct(p,[],Wt)}else{try{Wt.call()}catch(ui){tn=ui}p.call(Wt.prototype)}}else{try{throw Error()}catch(ui){tn=ui}(Wt=p())&&typeof Wt.catch=="function"&&Wt.catch(function(){})}}catch(ui){if(ui&&tn&&typeof ui.stack=="string")return[ui.stack,tn.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=C.DetermineComponentFrameRoot(),ne=k[0],me=k[1];if(ne&&me){var Pe=ne.split(`
`),dt=me.split(`
`);for(U=C=0;C<Pe.length&&!Pe[C].includes("DetermineComponentFrameRoot");)C++;for(;U<dt.length&&!dt[U].includes("DetermineComponentFrameRoot");)U++;if(C===Pe.length||U===dt.length)for(C=Pe.length-1,U=dt.length-1;1<=C&&0<=U&&Pe[C]!==dt[U];)U--;for(;1<=C&&0<=U;C--,U--)if(Pe[C]!==dt[U]){if(C!==1||U!==1)do if(C--,U--,0>U||Pe[C]!==dt[U]){var Pt=`
`+Pe[C].replace(" at new "," at ");return p.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",p.displayName)),Pt}while(1<=C&&0<=U);break}}}finally{Mp=!1,Error.prepareStackTrace=E}return(E=p?p.displayName||p.name:"")?o(E):""}function c(p){switch(p.tag){case 26:case 27:case 5:return o(p.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return p=l(p.type,!1),p;case 11:return p=l(p.type.render,!1),p;case 1:return p=l(p.type,!0),p;default:return""}}function d(p){try{var g="";do g+=c(p),p=p.return;while(p);return g}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function h(p){var g=p,E=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(E=g.return),p=g.return;while(p)}return g.tag===3?E:null}function m(p){if(h(p)!==p)throw Error(s(188))}function v(p){var g=p.alternate;if(!g){if(g=h(p),g===null)throw Error(s(188));return g!==p?null:p}for(var E=p,C=g;;){var U=E.return;if(U===null)break;var k=U.alternate;if(k===null){if(C=U.return,C!==null){E=C;continue}break}if(U.child===k.child){for(k=U.child;k;){if(k===E)return m(U),p;if(k===C)return m(U),g;k=k.sibling}throw Error(s(188))}if(E.return!==C.return)E=U,C=k;else{for(var ne=!1,me=U.child;me;){if(me===E){ne=!0,E=U,C=k;break}if(me===C){ne=!0,C=U,E=k;break}me=me.sibling}if(!ne){for(me=k.child;me;){if(me===E){ne=!0,E=k,C=U;break}if(me===C){ne=!0,C=k,E=U;break}me=me.sibling}if(!ne)throw Error(s(189))}}if(E.alternate!==C)throw Error(s(190))}if(E.tag!==3)throw Error(s(188));return E.stateNode.current===E?p:g}function _(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=_(p),g!==null)return g;p=p.sibling}return null}function x(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=x(p),g!==null))return g;p=p.sibling}return null}function T(p){return{current:p}}function b(p){0>gf||(p.current=ta[gf],ta[gf]=null,gf--)}function w(p,g){gf++,ta[gf]=p.current,p.current=g}function M(p){return p>>>=0,p===0?32:31-(oA(p)/lA|0)|0}function R(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function N(p,g){var E=p.pendingLanes;if(E===0)return 0;var C=0,U=p.suspendedLanes,k=p.pingedLanes,ne=p.warmLanes;p=p.finishedLanes!==0;var me=E&134217727;return me!==0?(E=me&~U,E!==0?C=R(E):(k&=me,k!==0?C=R(k):p||(ne=me&~ne,ne!==0&&(C=R(ne))))):(me=E&~U,me!==0?C=R(me):k!==0?C=R(k):p||(ne=E&~ne,ne!==0&&(C=R(ne)))),C===0?0:g!==0&&g!==C&&(g&U)===0&&(U=C&-C,ne=g&-g,U>=ne||U===32&&(ne&4194176)!==0)?g:C}function D(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function L(p,g){switch(p){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var p=xd;return xd<<=1,(xd&4194176)===0&&(xd=128),p}function I(){var p=Rp;return Rp<<=1,(Rp&62914560)===0&&(Rp=4194304),p}function z(p){for(var g=[],E=0;31>E;E++)g.push(p);return g}function H(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function Y(p,g,E,C,U,k){var ne=p.pendingLanes;p.pendingLanes=E,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=E,p.entangledLanes&=E,p.errorRecoveryDisabledLanes&=E,p.shellSuspendCounter=0;var me=p.entanglements,Pe=p.expirationTimes,dt=p.hiddenUpdates;for(E=ne&~E;0<E;){var Pt=31-ll(E),Wt=1<<Pt;me[Pt]=0,Pe[Pt]=-1;var tn=dt[Pt];if(tn!==null)for(dt[Pt]=null,Pt=0;Pt<tn.length;Pt++){var ui=tn[Pt];ui!==null&&(ui.lane&=-536870913)}E&=~Wt}C!==0&&Z(p,C,0),k!==0&&U===0&&p.tag!==0&&(p.suspendedLanes|=k&~(ne&~g))}function Z(p,g,E){p.pendingLanes|=g,p.suspendedLanes&=~g;var C=31-ll(g);p.entangledLanes|=g,p.entanglements[C]=p.entanglements[C]|1073741824|E&4194218}function se(p,g){var E=p.entangledLanes|=g;for(p=p.entanglements;E;){var C=31-ll(E),U=1<<C;U&g|p[C]&g&&(p[C]|=g),E&=~U}}function oe(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function G(p){if(Ol&&typeof Ol.onCommitFiberRoot=="function")try{Ol.onCommitFiberRoot(na,p,void 0,(p.current.flags&128)===128)}catch{}}function K(p){if(typeof dA=="function"&&Qa(p),Ol&&typeof Ol.setStrictMode=="function")try{Ol.setStrictMode(na,p)}catch{}}function $(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function ce(p,g){if(typeof p=="object"&&p!==null){var E=ST.get(p);return E!==void 0?E:(g={value:p,source:g,stack:d(g)},ST.set(p,g),g)}return{value:p,source:g,stack:d(g)}}function q(p,g){Np[Dp++]=ug,Np[Dp++]=Pp,Pp=p,ug=g}function ue(p,g,E){rc[ac++]=Nu,rc[ac++]=Du,rc[ac++]=mh,mh=p;var C=Nu;p=Du;var U=32-ll(C)-1;C&=~(1<<U),E+=1;var k=32-ll(g)+U;if(30<k){var ne=U-U%5;k=(C&(1<<ne)-1).toString(32),C>>=ne,U-=ne,Nu=1<<32-ll(g)+U|E<<U|C,Du=k+p}else Nu=1<<k|E<<U|C,Du=p}function Ae(p){p.return!==null&&(q(p,1),ue(p,1,0))}function Ne(p){for(;p===Pp;)Pp=Np[--Dp],Np[Dp]=null,ug=Np[--Dp],Np[Dp]=null;for(;p===mh;)mh=rc[--ac],rc[ac]=null,Du=rc[--ac],rc[ac]=null,Nu=rc[--ac],rc[ac]=null}function we(p,g){w(bd,g),w(dg,p),w(za,null),p=MM(g),b(za),w(za,p)}function pt(){b(za),b(dg),b(bd)}function Ee(p){p.memoizedState!==null&&w(Op,p);var g=za.current,E=rg(g,p.type);g!==E&&(w(dg,p),w(za,E))}function Ue(p){dg.current===p&&(b(za),b(dg)),Op.current===p&&(b(Op),al?Cu._currentValue=uh:Cu._currentValue2=uh)}function Ve(p){var g=Error(s(418,""));throw le(ce(g,p)),D0}function Be(p,g){if(!go)throw Error(s(175));ZM(p.stateNode,p.type,p.memoizedProps,g,p)||Ve(p)}function Mt(p){for(yo=p.return;yo;)switch(yo.tag){case 3:case 27:Ja=!0;return;case 5:case 13:Ja=!1;return;default:yo=yo.return}}function ct(p){if(!go||p!==yo)return!1;if(!$i)return Mt(p),$i=!0,!1;var g=!1;if(Ls?p.tag!==3&&p.tag!==27&&(p.tag!==5||$_(p.type)&&!gi(p.type,p.memoizedProps))&&(g=!0):p.tag!==3&&(p.tag!==5||$_(p.type)&&!gi(p.type,p.memoizedProps))&&(g=!0),g&&vo&&Ve(p),Mt(p),p.tag===13){if(!go)throw Error(s(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));vo=JM(p)}else vo=yo?vT(p.stateNode):null;return!0}function Et(){go&&(vo=yo=null,$i=!1)}function le(p){Yc===null?Yc=[p]:Yc.push(p)}function $e(){for(var p=Lp,g=Pu=Lp=0;g<p;){var E=Kc[g];Kc[g++]=null;var C=Kc[g];Kc[g++]=null;var U=Kc[g];Kc[g++]=null;var k=Kc[g];if(Kc[g++]=null,C!==null&&U!==null){var ne=C.pending;ne===null?U.next=U:(U.next=ne.next,ne.next=U),C.pending=U}k!==0&&_t(E,U,k)}}function Ze(p,g,E,C){Kc[Lp++]=p,Kc[Lp++]=g,Kc[Lp++]=E,Kc[Lp++]=C,Pu|=C,p.lanes|=C,p=p.alternate,p!==null&&(p.lanes|=C)}function Xe(p,g,E,C){return Ze(p,g,E,C),ut(p)}function We(p,g){return Ze(p,null,null,g),ut(p)}function _t(p,g,E){p.lanes|=E;var C=p.alternate;C!==null&&(C.lanes|=E);for(var U=!1,k=p.return;k!==null;)k.childLanes|=E,C=k.alternate,C!==null&&(C.childLanes|=E),k.tag===22&&(p=k.stateNode,p===null||p._visibility&1||(U=!0)),p=k,k=k.return;U&&g!==null&&p.tag===3&&(k=p.stateNode,U=31-ll(E),k=k.hiddenUpdates,p=k[U],p===null?k[U]=[g]:p.push(g),g.lane=E|536870912)}function ut(p){if(50<xg)throw xg=0,ax=null,Error(s(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function ht(p){p!==yf&&p.next===null&&(yf===null?P0=yf=p:yf=yf.next=p),Xs=!0,Up||(Up=!0,Fe(kt))}function Bt(p,g){if(!TT&&Xs){TT=!0;do for(var E=!1,C=P0;C!==null;){if(p!==0){var U=C.pendingLanes;if(U===0)var k=0;else{var ne=C.suspendedLanes,me=C.pingedLanes;k=(1<<31-ll(42|p)+1)-1,k&=U&~(ne&~me),k=k&201326677?k&201326677|1:k?k|2:0}k!==0&&(E=!0,Se(C,k))}else k=Ii,k=N(C,C===ds?k:0),(k&3)===0||D(C,k)||(E=!0,Se(C,k));C=C.next}while(E);TT=!1}}function kt(){Xs=Up=!1;var p=0;fg!==0&&(NM()&&(p=fg),fg=0);for(var g=Xc(),E=null,C=P0;C!==null;){var U=C.next,k=X(C,g);k===0?(C.next=null,E===null?P0=U:E.next=U,U===null&&(yf=E)):(E=C,(p!==0||(k&3)!==0)&&(Xs=!0)),C=U}Bt(p)}function X(p,g){for(var E=p.suspendedLanes,C=p.pingedLanes,U=p.expirationTimes,k=p.pendingLanes&-62914561;0<k;){var ne=31-ll(k),me=1<<ne,Pe=U[ne];Pe===-1?((me&E)===0||(me&C)!==0)&&(U[ne]=L(me,g)):Pe<=g&&(p.expiredLanes|=me),k&=~me}if(g=ds,E=Ii,E=N(p,p===g?E:0),C=p.callbackNode,E===0||p===g&&Ms===2||p.cancelPendingCommit!==null)return C!==null&&C!==null&&Y_(C),p.callbackNode=null,p.callbackPriority=0;if((E&3)===0||D(p,E)){if(g=E&-E,g===p.callbackPriority)return g;switch(C!==null&&Y_(C),oe(E)){case 2:case 8:E=uA;break;case 32:E=Q_;break;case 268435456:E=eP;break;default:E=Q_}return C=W.bind(null,p),E=N0(E,C),p.callbackPriority=g,p.callbackNode=E,g}return C!==null&&C!==null&&Y_(C),p.callbackPriority=2,p.callbackNode=null,2}function W(p,g){var E=p.callbackNode;if(Oo()&&p.callbackNode!==E)return null;var C=Ii;return C=N(p,p===ds?C:0),C===0?null:(nl(p,C,g),X(p,Xc()),p.callbackNode!=null&&p.callbackNode===E?W.bind(null,p):null)}function Se(p,g){if(Oo())return null;nl(p,g,!0)}function Fe(p){lT?mf(function(){(Yi&6)!==0?N0(Z_,p):p()}):N0(Z_,p)}function tt(){return fg===0&&(fg=F()),fg}function et(p,g){if(hg===null){var E=hg=[];Bp=0,oc=tt(),Ip={status:"pending",value:void 0,then:function(C){E.push(C)}}}return Bp++,g.then(Lt,Lt),g}function Lt(){if(--Bp===0&&hg!==null){Ip!==null&&(Ip.status="fulfilled");var p=hg;hg=null,oc=0,Ip=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function wt(p,g){var E=[],C={status:"pending",value:null,reason:null,then:function(U){E.push(U)}};return p.then(function(){C.status="fulfilled",C.value=g;for(var U=0;U<E.length;U++)(0,E[U])(g)},function(U){for(C.status="rejected",C.reason=U,U=0;U<E.length;U++)(0,E[U])(void 0)}),C}function It(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zt(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function yt(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Rt(p,g,E){var C=p.updateQueue;if(C===null)return null;if(C=C.shared,(Yi&2)!==0){var U=C.pending;return U===null?g.next=g:(g.next=U.next,U.next=g),C.pending=g,g=ut(p),_t(p,null,E),g}return Ze(p,C,g,E),ut(p)}function Xt(p,g,E){if(g=g.updateQueue,g!==null&&(g=g.shared,(E&4194176)!==0)){var C=g.lanes;C&=p.pendingLanes,E|=C,g.lanes=E,se(p,E)}}function Qt(p,g){var E=p.updateQueue,C=p.alternate;if(C!==null&&(C=C.updateQueue,E===C)){var U=null,k=null;if(E=E.firstBaseUpdate,E!==null){do{var ne={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};k===null?U=k=ne:k=k.next=ne,E=E.next}while(E!==null);k===null?U=k=g:k=k.next=g}else U=k=g;E={baseState:C.baseState,firstBaseUpdate:U,lastBaseUpdate:k,shared:C.shared,callbacks:C.callbacks},p.updateQueue=E;return}p=E.lastBaseUpdate,p===null?E.firstBaseUpdate=g:p.next=g,E.lastBaseUpdate=g}function Ct(){if(Fp){var p=Ip;if(p!==null)throw p}}function An(p,g,E,C){Fp=!1;var U=p.updateQueue;vf=!1;var k=U.firstBaseUpdate,ne=U.lastBaseUpdate,me=U.shared.pending;if(me!==null){U.shared.pending=null;var Pe=me,dt=Pe.next;Pe.next=null,ne===null?k=dt:ne.next=dt,ne=Pe;var Pt=p.alternate;Pt!==null&&(Pt=Pt.updateQueue,me=Pt.lastBaseUpdate,me!==ne&&(me===null?Pt.firstBaseUpdate=dt:me.next=dt,Pt.lastBaseUpdate=Pe))}if(k!==null){var Wt=U.baseState;ne=0,Pt=dt=Pe=null,me=k;do{var tn=me.lane&-536870913,ui=tn!==me.lane;if(ui?(Ii&tn)===tn:(C&tn)===tn){tn!==0&&tn===oc&&(Fp=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var mc=p,Eh=me;tn=g;var wh=E;switch(Eh.tag){case 1:if(mc=Eh.payload,typeof mc=="function"){Wt=mc.call(wh,Wt,tn);break e}Wt=mc;break e;case 3:mc.flags=mc.flags&-65537|128;case 0:if(mc=Eh.payload,tn=typeof mc=="function"?mc.call(wh,Wt,tn):mc,tn==null)break e;Wt=O_({},Wt,tn);break e;case 2:vf=!0}}tn=me.callback,tn!==null&&(p.flags|=64,ui&&(p.flags|=8192),ui=U.callbacks,ui===null?U.callbacks=[tn]:ui.push(tn))}else ui={lane:tn,tag:me.tag,payload:me.payload,callback:me.callback,next:null},Pt===null?(dt=Pt=ui,Pe=Wt):Pt=Pt.next=ui,ne|=tn;if(me=me.next,me===null){if(me=U.shared.pending,me===null)break;ui=me,me=ui.next,ui.next=null,U.lastBaseUpdate=ui,U.shared.pending=null}}while(!0);Pt===null&&(Pe=Wt),U.baseState=Pe,U.firstBaseUpdate=dt,U.lastBaseUpdate=Pt,k===null&&(U.shared.lanes=0),hc|=ne,p.lanes=ne,p.memoizedState=Wt}}function xe(p,g){if(typeof p!="function")throw Error(s(191,p));p.call(g)}function bt(p,g){var E=p.callbacks;if(E!==null)for(p.callbacks=null,p=0;p<E.length;p++)xe(E[p],g)}function Nt(p,g){if(Ll(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var E=Object.keys(p),C=Object.keys(g);if(E.length!==C.length)return!1;for(C=0;C<E.length;C++){var U=E[C];if(!Sd.call(g,U)||!Ll(p[U],g[U]))return!1}return!0}function $t(p){return p=p.status,p==="fulfilled"||p==="rejected"}function xt(){}function at(p,g,E){switch(E=p[E],E===void 0?p.push(g):E!==g&&(g.then(xt,xt),g=E),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===pg?Error(s(483)):p;default:if(typeof g.status=="string")g.then(xt,xt);else{if(p=ds,p!==null&&100<p.shellSuspendCounter)throw Error(s(482));p=g,p.status="pending",p.then(function(C){if(g.status==="pending"){var U=g;U.status="fulfilled",U.value=C}},function(C){if(g.status==="pending"){var U=g;U.status="rejected",U.reason=C}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===pg?Error(s(483)):p}throw gh=g,pg}}function nn(){if(gh===null)throw Error(s(459));var p=gh;return gh=null,p}function dn(p){var g=vh;return vh+=1,yh===null&&(yh=[]),at(yh,p,g)}function _i(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function Si(p,g){throw g.$$typeof===qD?Error(s(525)):(p=Object.prototype.toString.call(g),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function Ko(p){var g=p._init;return g(p._payload)}function Ur(p){function g(He,_e){if(p){var Je=He.deletions;Je===null?(He.deletions=[_e],He.flags|=16):Je.push(_e)}}function E(He,_e){if(!p)return null;for(;_e!==null;)g(He,_e),_e=_e.sibling;return null}function C(He){for(var _e=new Map;He!==null;)He.key!==null?_e.set(He.key,He):_e.set(He.index,He),He=He.sibling;return _e}function U(He,_e){return He=jc(He,_e),He.index=0,He.sibling=null,He}function k(He,_e,Je){return He.index=Je,p?(Je=He.alternate,Je!==null?(Je=Je.index,Je<_e?(He.flags|=33554434,_e):Je):(He.flags|=33554434,_e)):(He.flags|=1048576,_e)}function ne(He){return p&&He.alternate===null&&(He.flags|=33554434),He}function me(He,_e,Je,At){return _e===null||_e.tag!==6?(_e=D_(Je,He.mode,At),_e.return=He,_e):(_e=U(_e,Je),_e.return=He,_e)}function Pe(He,_e,Je,At){var Rn=Je.type;return Rn===lh?Pt(He,_e,Je.props.children,At,Je.key):_e!==null&&(_e.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===Wc&&Ko(Rn)===_e.type)?(_e=U(_e,Je.props),_i(_e,Je),_e.return=He,_e):(_e=yd(Je.type,Je.key,Je.props,null,He.mode,At),_i(_e,Je),_e.return=He,_e)}function dt(He,_e,Je,At){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Je.containerInfo||_e.stateNode.implementation!==Je.implementation?(_e=eT(Je,He.mode,At),_e.return=He,_e):(_e=U(_e,Je.children||[]),_e.return=He,_e)}function Pt(He,_e,Je,At,Rn){return _e===null||_e.tag!==7?(_e=kr(Je,He.mode,At,Rn),_e.return=He,_e):(_e=U(_e,Je),_e.return=He,_e)}function Wt(He,_e,Je){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=D_(""+_e,He.mode,Je),_e.return=He,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case _0:return Je=yd(_e.type,_e.key,_e.props,null,He.mode,Je),_i(Je,_e),Je.return=He,Je;case $c:return _e=eT(_e,He.mode,Je),_e.return=He,_e;case Wc:var At=_e._init;return _e=At(_e._payload),Wt(He,_e,Je)}if(ng(_e)||r(_e))return _e=kr(_e,He.mode,Je,null),_e.return=He,_e;if(typeof _e.then=="function")return Wt(He,dn(_e),Je);if(_e.$$typeof===Au)return Wt(He,oi(He,_e),Je);Si(He,_e)}return null}function tn(He,_e,Je,At){var Rn=_e!==null?_e.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Rn!==null?null:me(He,_e,""+Je,At);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case _0:return Je.key===Rn?Pe(He,_e,Je,At):null;case $c:return Je.key===Rn?dt(He,_e,Je,At):null;case Wc:return Rn=Je._init,Je=Rn(Je._payload),tn(He,_e,Je,At)}if(ng(Je)||r(Je))return Rn!==null?null:Pt(He,_e,Je,At,null);if(typeof Je.then=="function")return tn(He,_e,dn(Je),At);if(Je.$$typeof===Au)return tn(He,_e,oi(He,Je),At);Si(He,Je)}return null}function ui(He,_e,Je,At,Rn){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return He=He.get(Je)||null,me(_e,He,""+At,Rn);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case _0:return He=He.get(At.key===null?Je:At.key)||null,Pe(_e,He,At,Rn);case $c:return He=He.get(At.key===null?Je:At.key)||null,dt(_e,He,At,Rn);case Wc:var lr=At._init;return At=lr(At._payload),ui(He,_e,Je,At,Rn)}if(ng(At)||r(At))return He=He.get(Je)||null,Pt(_e,He,At,Rn,null);if(typeof At.then=="function")return ui(He,_e,Je,dn(At),Rn);if(At.$$typeof===Au)return ui(He,_e,Je,oi(_e,At),Rn);Si(_e,At)}return null}function mc(He,_e,Je,At){for(var Rn=null,lr=null,Yn=_e,ts=_e=0,ia=null;Yn!==null&&ts<Je.length;ts++){Yn.index>ts?(ia=Yn,Yn=null):ia=Yn.sibling;var Pi=tn(He,Yn,Je[ts],At);if(Pi===null){Yn===null&&(Yn=ia);break}p&&Yn&&Pi.alternate===null&&g(He,Yn),_e=k(Pi,_e,ts),lr===null?Rn=Pi:lr.sibling=Pi,lr=Pi,Yn=ia}if(ts===Je.length)return E(He,Yn),$i&&q(He,ts),Rn;if(Yn===null){for(;ts<Je.length;ts++)Yn=Wt(He,Je[ts],At),Yn!==null&&(_e=k(Yn,_e,ts),lr===null?Rn=Yn:lr.sibling=Yn,lr=Yn);return $i&&q(He,ts),Rn}for(Yn=C(Yn);ts<Je.length;ts++)ia=ui(Yn,He,ts,Je[ts],At),ia!==null&&(p&&ia.alternate!==null&&Yn.delete(ia.key===null?ts:ia.key),_e=k(ia,_e,ts),lr===null?Rn=ia:lr.sibling=ia,lr=ia);return p&&Yn.forEach(function(Nd){return g(He,Nd)}),$i&&q(He,ts),Rn}function Eh(He,_e,Je,At){if(Je==null)throw Error(s(151));for(var Rn=null,lr=null,Yn=_e,ts=_e=0,ia=null,Pi=Je.next();Yn!==null&&!Pi.done;ts++,Pi=Je.next()){Yn.index>ts?(ia=Yn,Yn=null):ia=Yn.sibling;var Nd=tn(He,Yn,Pi.value,At);if(Nd===null){Yn===null&&(Yn=ia);break}p&&Yn&&Nd.alternate===null&&g(He,Yn),_e=k(Nd,_e,ts),lr===null?Rn=Nd:lr.sibling=Nd,lr=Nd,Yn=ia}if(Pi.done)return E(He,Yn),$i&&q(He,ts),Rn;if(Yn===null){for(;!Pi.done;ts++,Pi=Je.next())Pi=Wt(He,Pi.value,At),Pi!==null&&(_e=k(Pi,_e,ts),lr===null?Rn=Pi:lr.sibling=Pi,lr=Pi);return $i&&q(He,ts),Rn}for(Yn=C(Yn);!Pi.done;ts++,Pi=Je.next())Pi=ui(Yn,He,ts,Pi.value,At),Pi!==null&&(p&&Pi.alternate!==null&&Yn.delete(Pi.key===null?ts:Pi.key),_e=k(Pi,_e,ts),lr===null?Rn=Pi:lr.sibling=Pi,lr=Pi);return p&&Yn.forEach(function(ox){return g(He,ox)}),$i&&q(He,ts),Rn}function wh(He,_e,Je,At){if(typeof Je=="object"&&Je!==null&&Je.type===lh&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case _0:e:{for(var Rn=Je.key;_e!==null;){if(_e.key===Rn){if(Rn=Je.type,Rn===lh){if(_e.tag===7){E(He,_e.sibling),At=U(_e,Je.props.children),At.return=He,He=At;break e}}else if(_e.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===Wc&&Ko(Rn)===_e.type){E(He,_e.sibling),At=U(_e,Je.props),_i(At,Je),At.return=He,He=At;break e}E(He,_e);break}else g(He,_e);_e=_e.sibling}Je.type===lh?(At=kr(Je.props.children,He.mode,At,Je.key),At.return=He,He=At):(At=yd(Je.type,Je.key,Je.props,null,He.mode,At),_i(At,Je),At.return=He,He=At)}return ne(He);case $c:e:{for(Rn=Je.key;_e!==null;){if(_e.key===Rn)if(_e.tag===4&&_e.stateNode.containerInfo===Je.containerInfo&&_e.stateNode.implementation===Je.implementation){E(He,_e.sibling),At=U(_e,Je.children||[]),At.return=He,He=At;break e}else{E(He,_e);break}else g(He,_e);_e=_e.sibling}At=eT(Je,He.mode,At),At.return=He,He=At}return ne(He);case Wc:return Rn=Je._init,Je=Rn(Je._payload),wh(He,_e,Je,At)}if(ng(Je))return mc(He,_e,Je,At);if(r(Je)){if(Rn=r(Je),typeof Rn!="function")throw Error(s(150));return Je=Rn.call(Je),Eh(He,_e,Je,At)}if(typeof Je.then=="function")return wh(He,_e,dn(Je),At);if(Je.$$typeof===Au)return wh(He,_e,oi(He,Je),At);Si(He,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,_e!==null&&_e.tag===6?(E(He,_e.sibling),At=U(_e,Je),At.return=He,He=At):(E(He,_e),At=D_(Je,He.mode,At),At.return=He,He=At),ne(He)):E(He,_e)}return function(He,_e,Je,At){try{vh=0;var Rn=wh(He,_e,Je,At);return yh=null,Rn}catch(Yn){if(Yn===pg)throw Yn;var lr=t(29,Yn,null,He.mode);return lr.lanes=At,lr.return=He,lr}finally{}}}function wr(p,g){p=Bo,w(mg,p),w(Ys,g),Bo=p|g.baseLanes}function Ds(){w(mg,Bo),w(Ys,Ys.current)}function Mr(){Bo=mg.current,b(Ys),b(mg)}function Na(p){var g=p.alternate;w(Va,Va.current&1),w(lc,p),Us===null&&(g===null||Ys.current!==null||g.memoizedState!==null)&&(Us=p)}function Zf(p){if(p.tag===22){if(w(Va,Va.current),w(lc,p),Us===null){var g=p.alternate;g!==null&&g.memoizedState!==null&&(Us=p)}}else Mo()}function Mo(){w(Va,Va.current),w(lc,lc.current)}function Yr(p){b(lc),Us===p&&(Us=null),b(Va)}function Ao(p){for(var g=p;g!==null;){if(g.tag===13){var E=g.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||G_(E)||H_(E)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function ms(){throw Error(s(321))}function ec(p,g){if(g===null)return!1;for(var E=0;E<g.length&&E<p.length;E++)if(!Ll(p[E],g[E]))return!1;return!0}function Ic(p,g,E,C,U,k){return _f=k,xi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Xn.H=p===null||p.memoizedState===null?bh:cl,xh=!1,k=E(C,U),xh=!1,zp&&(k=El(g,E,C,U)),Da(p),k}function Da(p){Xn.H=Gr;var g=Ln!==null&&Ln.next!==null;if(_f=0,Xi=Ln=xi=null,Zc=!1,Vp=0,eo=null,g)throw Error(s(300));p===null||Bs||(p=p.dependencies,p!==null&&Gt(p)&&(Bs=!0))}function El(p,g,E,C){xi=p;var U=0;do{if(zp&&(eo=null),Vp=0,zp=!1,25<=U)throw Error(s(301));if(U+=1,Xi=Ln=null,p.updateQueue!=null){var k=p.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}Xn.H=cc,k=g(E,C)}while(zp);return k}function Hi(){var p=Xn.H,g=p.useState()[0];return g=typeof g.then=="function"?je(g):g,p=p.useState()[0],(Ln!==null?Ln.memoizedState:null)!==p&&(xi.flags|=1024),g}function Ar(){var p=J_!==0;return J_=0,p}function Fc(p,g,E){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~E}function ee(p){if(Zc){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Zc=!1}_f=0,Xi=Ln=xi=null,zp=!1,Vp=J_=0,eo=null}function be(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?xi.memoizedState=Xi=p:Xi=Xi.next=p,Xi}function Ie(){if(Ln===null){var p=xi.alternate;p=p!==null?p.memoizedState:null}else p=Ln.next;var g=Xi===null?xi.memoizedState:Xi.next;if(g!==null)Xi=g,Ln=p;else{if(p===null)throw xi.alternate===null?Error(s(467)):Error(s(310));Ln=p,p={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Xi===null?xi.memoizedState=Xi=p:Xi=Xi.next=p}return Xi}function je(p){var g=Vp;return Vp+=1,eo===null&&(eo=[]),p=at(eo,p,g),g=xi,(Xi===null?g.memoizedState:Xi.next)===null&&(g=g.alternate,Xn.H=g===null||g.memoizedState===null?bh:cl),p}function Ce(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return je(p);if(p.$$typeof===Au)return kn(p)}throw Error(s(438,String(p)))}function St(p){var g=null,E=xi.updateQueue;if(E!==null&&(g=E.memoCache),g==null){var C=xi.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(g={data:C.data.map(function(U){return U.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),E===null&&(E=ex(),xi.updateQueue=E),E.memoCache=g,E=g.data[g.index],E===void 0)for(E=g.data[g.index]=Array(p),C=0;C<p;C++)E[C]=wM;return g.index++,E}function Dt(p,g){return typeof g=="function"?g(p):g}function Yt(p){var g=Ie();return Ut(g,Ln,p)}function Ut(p,g,E){var C=p.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=E;var U=p.baseQueue,k=C.pending;if(k!==null){if(U!==null){var ne=U.next;U.next=k.next,k.next=ne}g.baseQueue=U=k,C.pending=null}if(k=p.baseState,U===null)p.memoizedState=k;else{g=U.next;var me=ne=null,Pe=null,dt=g,Pt=!1;do{var Wt=dt.lane&-536870913;if(Wt!==dt.lane?(Ii&Wt)===Wt:(_f&Wt)===Wt){var tn=dt.revertLane;if(tn===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Wt===oc&&(Pt=!0);else if((_f&tn)===tn){dt=dt.next,tn===oc&&(Pt=!0);continue}else Wt={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Pe===null?(me=Pe=Wt,ne=k):Pe=Pe.next=Wt,xi.lanes|=tn,hc|=tn;Wt=dt.action,xh&&E(k,Wt),k=dt.hasEagerState?dt.eagerState:E(k,Wt)}else tn={lane:Wt,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Pe===null?(me=Pe=tn,ne=k):Pe=Pe.next=tn,xi.lanes|=Wt,hc|=Wt;dt=dt.next}while(dt!==null&&dt!==g);if(Pe===null?ne=k:Pe.next=me,!Ll(k,p.memoizedState)&&(Bs=!0,Pt&&(E=Ip,E!==null)))throw E;p.memoizedState=k,p.baseState=ne,p.baseQueue=Pe,C.lastRenderedState=k}return U===null&&(C.lanes=0),[p.memoizedState,C.dispatch]}function fn(p){var g=Ie(),E=g.queue;if(E===null)throw Error(s(311));E.lastRenderedReducer=p;var C=E.dispatch,U=E.pending,k=g.memoizedState;if(U!==null){E.pending=null;var ne=U=U.next;do k=p(k,ne.action),ne=ne.next;while(ne!==U);Ll(k,g.memoizedState)||(Bs=!0),g.memoizedState=k,g.baseQueue===null&&(g.baseState=k),E.lastRenderedState=k}return[k,C]}function Tn(p,g,E){var C=xi,U=Ie(),k=$i;if(k){if(E===void 0)throw Error(s(407));E=E()}else E=g();var ne=!Ll((Ln||U).memoizedState,E);if(ne&&(U.memoizedState=E,Bs=!0),U=U.queue,Jf(Ti.bind(null,C,U,p),[p]),U.getSnapshot!==g||ne||Xi!==null&&Xi.memoizedState.tag&1){if(C.flags|=2048,Ai(9,qn.bind(null,C,U,E,g),{destroy:void 0},null),ds===null)throw Error(s(349));k||(_f&60)!==0||sn(C,g,E)}return E}function sn(p,g,E){p.flags|=16384,p={getSnapshot:g,value:E},g=xi.updateQueue,g===null?(g=ex(),xi.updateQueue=g,g.stores=[p]):(E=g.stores,E===null?g.stores=[p]:E.push(p))}function qn(p,g,E,C){g.value=E,g.getSnapshot=C,Jn(g)&&fi(p)}function Ti(p,g,E){return E(function(){Jn(g)&&fi(p)})}function Jn(p){var g=p.getSnapshot;p=p.value;try{var E=g();return!Ll(p,E)}catch{return!0}}function fi(p){var g=We(p,2);g!==null&&js(g,p,2)}function Vn(p){var g=be();if(typeof p=="function"){var E=p;if(p=E(),xh){K(!0);try{E()}finally{K(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dt,lastRenderedState:p},g}function xn(p,g,E,C){return p.baseState=E,Ut(p,Ln,typeof C=="function"?C:Dt)}function si(p,g,E,C,U){if(ih(p))throw Error(s(485));if(p=g.action,p!==null){var k={payload:U,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){k.listeners.push(ne)}};Xn.T!==null?E(!0):k.isTransition=!1,C(k),E=g.pending,E===null?(k.next=g.pending=k,On(g,k)):(k.next=E.next,g.pending=E.next=k)}}function On(p,g){var E=g.action,C=g.payload,U=p.state;if(g.isTransition){var k=Xn.T,ne={};Xn.T=ne;try{var me=E(U,C),Pe=Xn.S;Pe!==null&&Pe(ne,me),Pa(p,g,me)}catch(dt){Ps(p,g,dt)}finally{Xn.T=k}}else try{k=E(U,C),Pa(p,g,k)}catch(dt){Ps(p,g,dt)}}function Pa(p,g,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(C){Zo(p,g,C)},function(C){return Ps(p,g,C)}):Zo(p,g,E)}function Zo(p,g,E){g.status="fulfilled",g.value=E,hr(g),p.state=E,g=p.pending,g!==null&&(E=g.next,E===g?p.pending=null:(E=E.next,g.next=E,On(p,E)))}function Ps(p,g,E){var C=p.pending;if(p.pending=null,C!==null){C=C.next;do g.status="rejected",g.reason=E,hr(g),g=g.next;while(g!==C)}p.action=null}function hr(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function is(p,g){return g}function Xa(p,g){if($i){var E=ds.formState;if(E!==null){e:{var C=xi;if($i){if(vo){var U=yT(vo,Ja);if(U){vo=vT(U),C=qM(U);break e}}Ve(C)}C=!1}C&&(g=E[0])}}E=be(),E.memoizedState=E.baseState=g,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:g},E.queue=C,E=Xm.bind(null,xi,C),C.dispatch=E,C=Vn(!1);var k=Cl.bind(null,xi,!1,C.queue);return C=be(),U={state:g,dispatch:null,action:p,pending:null},C.queue=U,E=si.bind(null,xi,U,k,E),U.dispatch=E,C.memoizedState=p,[g,E,!1]}function Kr(p){var g=Ie();return sr(g,Ln,p)}function sr(p,g,E){g=Ut(p,g,is)[0],p=Yt(Dt)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?je(g):g;var C=Ie(),U=C.queue,k=U.dispatch;return E!==C.memoizedState&&(xi.flags|=2048,Ai(9,Br.bind(null,U,E),{destroy:void 0},null)),[g,k,p]}function Br(p,g){p.action=g}function Vs(p){var g=Ie(),E=Ln;if(E!==null)return sr(g,E,p);Ie(),g=g.memoizedState,E=Ie();var C=E.queue.dispatch;return E.memoizedState=p,[g,C,!1]}function Ai(p,g,E,C){return p={tag:p,create:g,inst:E,deps:C,next:null},g=xi.updateQueue,g===null&&(g=ex(),xi.updateQueue=g),E=g.lastEffect,E===null?g.lastEffect=p.next=p:(C=E.next,E.next=p,p.next=C,g.lastEffect=p),p}function yp(){return Ie().memoizedState}function Qf(p,g,E,C){var U=be();xi.flags|=p,U.memoizedState=Ai(1|g,E,{destroy:void 0},C===void 0?null:C)}function cd(p,g,E,C){var U=Ie();C=C===void 0?null:C;var k=U.memoizedState.inst;Ln!==null&&C!==null&&ec(C,Ln.memoizedState.deps)?U.memoizedState=Ai(g,E,k,C):(xi.flags|=p,U.memoizedState=Ai(1|g,E,k,C))}function of(p,g){Qf(8390656,8,p,g)}function Jf(p,g){cd(2048,8,p,g)}function vp(p,g){return cd(4,2,p,g)}function ud(p,g){return cd(4,4,p,g)}function ai(p,g){if(typeof g=="function"){p=p();var E=g(p);return function(){typeof E=="function"?E():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function eh(p,g,E){E=E!=null?E.concat([p]):null,cd(4,4,ai.bind(null,g,p),E)}function wl(){}function dd(p,g){var E=Ie();g=g===void 0?null:g;var C=E.memoizedState;return g!==null&&ec(g,C[1])?C[0]:(E.memoizedState=[p,g],p)}function fd(p,g){var E=Ie();g=g===void 0?null:g;var C=E.memoizedState;if(g!==null&&ec(g,C[1]))return C[0];if(C=p(),xh){K(!0);try{p()}finally{K(!1)}}return E.memoizedState=[C,g],C}function lf(p,g,E){return E===void 0||(_f&1073741824)!==0?p.memoizedState=g:(p.memoizedState=E,p=tl(),xi.lanes|=p,hc|=p,E)}function cf(p,g,E,C){return Ll(E,g)?E:Ys.current!==null?(p=lf(p,E,C),Ll(p,g)||(Bs=!0),p):(_f&42)===0?(Bs=!0,p.memoizedState=E):(p=tl(),xi.lanes|=p,hc|=p,g)}function Ml(p,g,E,C,U){var k=pf();Lo(k!==0&&8>k?k:8);var ne=Xn.T,me={};Xn.T=me,Cl(p,!1,g,E);try{var Pe=U(),dt=Xn.S;if(dt!==null&&dt(me,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var Pt=wt(Pe,C);pr(p,g,Pt,qi(p))}else pr(p,g,C,qi(p))}catch(Wt){pr(p,g,{then:function(){},status:"rejected",reason:Wt},qi())}finally{Lo(k),Xn.T=ne}}function zc(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:uh,baseState:uh,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dt,lastRenderedState:uh},next:null};var E={};return g.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dt,lastRenderedState:E},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function th(){return kn(Cu)}function Al(){return Ie().memoizedState}function Cr(){return Ie().memoizedState}function qm(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var E=qi();p=yt(E);var C=Rt(g,p,E);C!==null&&(js(C,g,E),Xt(C,g,E)),g={cache:gt()},p.payload=g;return}g=g.return}}function nh(p,g,E){var C=qi();E={lane:C,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},ih(p)?fo(g,E):(E=Xe(p,g,E,C),E!==null&&(js(E,p,C),xu(E,g,C)))}function Xm(p,g,E){var C=qi();pr(p,g,E,C)}function pr(p,g,E,C){var U={lane:C,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(ih(p))fo(g,U);else{var k=p.alternate;if(p.lanes===0&&(k===null||k.lanes===0)&&(k=g.lastRenderedReducer,k!==null))try{var ne=g.lastRenderedState,me=k(ne,E);if(U.hasEagerState=!0,U.eagerState=me,Ll(me,ne))return Ze(p,g,U,0),ds===null&&$e(),!1}catch{}finally{}if(E=Xe(p,g,U,C),E!==null)return js(E,p,C),xu(E,g,C),!0}return!1}function Cl(p,g,E,C){if(C={lane:2,revertLane:tt(),action:C,hasEagerState:!1,eagerState:null,next:null},ih(p)){if(g)throw Error(s(479))}else g=Xe(p,E,C,2),g!==null&&js(g,p,2)}function ih(p){var g=p.alternate;return p===xi||g!==null&&g===xi}function fo(p,g){zp=Zc=!0;var E=p.pending;E===null?g.next=g:(g.next=E.next,E.next=g),p.pending=g}function xu(p,g,E){if((E&4194176)!==0){var C=g.lanes;C&=p.pendingLanes,E|=C,g.lanes=E,se(p,E)}}function uf(p,g,E,C){g=p.memoizedState,E=E(C,g),E=E==null?g:O_({},g,E),p.memoizedState=E,p.lanes===0&&(p.updateQueue.baseState=E)}function Rl(p,g,E,C,U,k,ne){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(C,k,ne):g.prototype&&g.prototype.isPureReactComponent?!Nt(E,C)||!Nt(U,k):!0}function Ym(p,g,E,C){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(E,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(E,C),g.state!==p&&Ed.enqueueReplaceState(g,g.state,null)}function Nl(p,g){var E=g;if("ref"in g){E={};for(var C in g)C!=="ref"&&(E[C]=g[C])}if(p=p.defaultProps){E===g&&(E=O_({},E));for(var U in p)E[U]===void 0&&(E[U]=p[U])}return E}function Vc(p,g){try{var E=p.onUncaughtError;E(g.value,{componentStack:g.stack})}catch(C){setTimeout(function(){throw C})}}function Co(p,g,E){try{var C=p.onCaughtError;C(E.value,{componentStack:E.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function hd(p,g,E){return E=yt(E),E.tag=3,E.payload={element:null},E.callback=function(){Vc(p,g)},E}function sh(p){return p=yt(p),p.tag=3,p}function C_(p,g,E,C){var U=E.type.getDerivedStateFromError;if(typeof U=="function"){var k=C.value;p.payload=function(){return U(k)},p.callback=function(){Co(g,E,C)}}var ne=E.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(p.callback=function(){Co(g,E,C),typeof U!="function"&&(Sh===null?Sh=new Set([this]):Sh.add(this));var me=C.stack;this.componentDidCatch(C.value,{componentStack:me!==null?me:""})})}function u0(p,g,E,C,U){if(E.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(g=E.alternate,g!==null&&Ge(g,E,U,!0),E=lc.current,E!==null){switch(E.tag){case 13:return Us===null?rs():E.alternate===null&&Is===0&&(Is=3),E.flags&=-257,E.flags|=65536,E.lanes=U,C===L0?E.flags|=16384:(g=E.updateQueue,g===null?E.updateQueue=new Set([C]):g.add(C),Za(p,C,U)),!1;case 22:return E.flags|=65536,C===L0?E.flags|=16384:(g=E.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([C])},E.updateQueue=g):(E=g.retryQueue,E===null?g.retryQueue=new Set([C]):E.add(C)),Za(p,C,U)),!1}throw Error(s(435,E.tag))}return Za(p,C,U),rs(),!1}if($i)return g=lc.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=U,C!==D0&&(p=Error(s(422),{cause:C}),le(ce(p,E)))):(C!==D0&&(g=Error(s(423),{cause:C}),le(ce(g,E))),p=p.current.alternate,p.flags|=65536,U&=-U,p.lanes|=U,C=ce(C,E),U=hd(p.stateNode,C,U),Qt(p,U),Is!==4&&(Is=2)),!1;var k=Error(s(520),{cause:C});if(k=ce(k,E),Gp===null?Gp=[k]:Gp.push(k),Is!==4&&(Is=2),g===null)return!0;C=ce(C,E),E=g;do{switch(E.tag){case 3:return E.flags|=65536,p=U&-U,E.lanes|=p,p=hd(E.stateNode,C,p),Qt(E,p),!1;case 1:if(g=E.type,k=E.stateNode,(E.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Sh===null||!Sh.has(k))))return E.flags|=65536,U&=-U,E.lanes|=U,U=sh(U),C_(U,p,E,C),Qt(E,U),!1}E=E.return}while(E!==null);return!1}function Oa(p,g,E,C){g.child=p===null?Td(g,null,E,C):_h(g,p.child,E,C)}function bu(p,g,E,C,U){E=E.render;var k=g.ref;if("ref"in C){var ne={};for(var me in C)me!=="ref"&&(ne[me]=C[me])}else ne=C;return En(g),C=Ic(p,g,E,ne,k,U),me=Ar(),p!==null&&!Bs?(Fc(p,g,U),Su(p,g,U)):($i&&me&&Ae(g),g.flags|=1,Oa(p,g,C,U),g.child)}function _p(p,g,E,C,U){if(p===null){var k=E.type;return typeof k=="function"&&!Pl(k)&&k.defaultProps===void 0&&E.compare===null?(g.tag=15,g.type=k,R_(p,g,k,C,U)):(p=yd(E.type,null,C,g,g.mode,U),p.ref=g.ref,p.return=g,g.child=p)}if(k=p.child,!De(p,U)){var ne=k.memoizedProps;if(E=E.compare,E=E!==null?E:Nt,E(ne,C)&&p.ref===g.ref)return Su(p,g,U)}return g.flags|=1,p=jc(k,C),p.ref=g.ref,p.return=g,g.child=p}function R_(p,g,E,C,U){if(p!==null){var k=p.memoizedProps;if(Nt(k,C)&&p.ref===g.ref)if(Bs=!1,g.pendingProps=C=k,De(p,U))(p.flags&131072)!==0&&(Bs=!0);else return g.lanes=p.lanes,Su(p,g,U)}return Sp(p,g,E,C,U)}function xp(p,g,E){var C=g.pendingProps,U=C.children,k=(g.stateNode._pendingVisibility&2)!==0,ne=p!==null?p.memoizedState:null;if(bp(p,g),C.mode==="hidden"||k){if((g.flags&128)!==0){if(C=ne!==null?ne.baseLanes|E:E,p!==null){for(U=g.child=p.child,k=0;U!==null;)k=k|U.lanes|U.childLanes,U=U.sibling;g.childLanes=k&~C}else g.childLanes=0,g.child=null;return d0(p,g,C,E)}if((E&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&ss(g,ne!==null?ne.cachePool:null),ne!==null?wr(g,ne):Ds(),Zf(g);else return g.lanes=g.childLanes=536870912,d0(p,g,ne!==null?ne.baseLanes|E:E,E)}else ne!==null?(ss(g,ne.cachePool),wr(g,ne),Mo(),g.memoizedState=null):(p!==null&&ss(g,null),Ds(),Mo());return Oa(p,g,U,E),g.child}function d0(p,g,E,C){var U=ks();return U=U===null?null:{parent:al?Ks._currentValue:Ks._currentValue2,pool:U},g.memoizedState={baseLanes:E,cachePool:U},p!==null&&ss(g,null),Ds(),Zf(g),p!==null&&Ge(p,g,C,!0),null}function bp(p,g){var E=g.ref;if(E===null)p!==null&&p.ref!==null&&(g.flags|=2097664);else{if(typeof E!="function"&&typeof E!="object")throw Error(s(284));(p===null||p.ref!==E)&&(g.flags|=2097664)}}function Sp(p,g,E,C,U){return En(g),E=Ic(p,g,E,C,void 0,U),C=Ar(),p!==null&&!Bs?(Fc(p,g,U),Su(p,g,U)):($i&&C&&Ae(g),g.flags|=1,Oa(p,g,E,U),g.child)}function f0(p,g,E,C,U,k){return En(g),g.updateQueue=null,E=El(g,C,E,U),Da(p),C=Ar(),p!==null&&!Bs?(Fc(p,g,k),Su(p,g,k)):($i&&C&&Ae(g),g.flags|=1,Oa(p,g,E,k),g.child)}function Tp(p,g,E,C,U){if(En(g),g.stateNode===null){var k=ph,ne=E.contextType;typeof ne=="object"&&ne!==null&&(k=kn(ne)),k=new E(C,k),g.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Ed,g.stateNode=k,k._reactInternals=g,k=g.stateNode,k.props=C,k.state=g.memoizedState,k.refs={},It(g),ne=E.contextType,k.context=typeof ne=="object"&&ne!==null?kn(ne):ph,k.state=g.memoizedState,ne=E.getDerivedStateFromProps,typeof ne=="function"&&(uf(g,E,ne,C),k.state=g.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(ne=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),ne!==k.state&&Ed.enqueueReplaceState(k,k.state,null),An(g,C,k,U),Ct(),k.state=g.memoizedState),typeof k.componentDidMount=="function"&&(g.flags|=4194308),C=!0}else if(p===null){k=g.stateNode;var me=g.memoizedProps,Pe=Nl(E,me);k.props=Pe;var dt=k.context,Pt=E.contextType;ne=ph,typeof Pt=="object"&&Pt!==null&&(ne=kn(Pt));var Wt=E.getDerivedStateFromProps;Pt=typeof Wt=="function"||typeof k.getSnapshotBeforeUpdate=="function",me=g.pendingProps!==me,Pt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(me||dt!==ne)&&Ym(g,k,C,ne),vf=!1;var tn=g.memoizedState;k.state=tn,An(g,C,k,U),Ct(),dt=g.memoizedState,me||tn!==dt||vf?(typeof Wt=="function"&&(uf(g,E,Wt,C),dt=g.memoizedState),(Pe=vf||Rl(g,E,Pe,C,tn,dt,ne))?(Pt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(g.flags|=4194308)):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=dt),k.props=C,k.state=dt,k.context=ne,C=Pe):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{k=g.stateNode,Zt(p,g),ne=g.memoizedProps,Pt=Nl(E,ne),k.props=Pt,Wt=g.pendingProps,tn=k.context,dt=E.contextType,Pe=ph,typeof dt=="object"&&dt!==null&&(Pe=kn(dt)),me=E.getDerivedStateFromProps,(dt=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(ne!==Wt||tn!==Pe)&&Ym(g,k,C,Pe),vf=!1,tn=g.memoizedState,k.state=tn,An(g,C,k,U),Ct();var ui=g.memoizedState;ne!==Wt||tn!==ui||vf||p!==null&&p.dependencies!==null&&Gt(p.dependencies)?(typeof me=="function"&&(uf(g,E,me,C),ui=g.memoizedState),(Pt=vf||Rl(g,E,Pt,C,tn,ui,Pe)||p!==null&&p.dependencies!==null&&Gt(p.dependencies))?(dt||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(C,ui,Pe),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(C,ui,Pe)),typeof k.componentDidUpdate=="function"&&(g.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof k.componentDidUpdate!="function"||ne===p.memoizedProps&&tn===p.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||ne===p.memoizedProps&&tn===p.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=ui),k.props=C,k.state=ui,k.context=Pe,C=Pt):(typeof k.componentDidUpdate!="function"||ne===p.memoizedProps&&tn===p.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||ne===p.memoizedProps&&tn===p.memoizedState||(g.flags|=1024),C=!1)}return k=C,bp(p,g),C=(g.flags&128)!==0,k||C?(k=g.stateNode,E=C&&typeof E.getDerivedStateFromError!="function"?null:k.render(),g.flags|=1,p!==null&&C?(g.child=_h(g,p.child,null,U),g.child=_h(g,null,E,U)):Oa(p,g,E,U),g.memoizedState=k.state,p=g.child):p=Su(p,g,U),p}function h0(p,g,E,C){return Et(),g.flags|=256,Oa(p,g,E,C),g.child}function hi(p){return{baseLanes:p,cachePool:Rr()}}function rh(p,g,E){return p=p!==null?p.childLanes&~E:0,g&&(p|=pc),p}function Km(p,g,E){var C=g.pendingProps,U=!1,k=(g.flags&128)!==0,ne;if((ne=k)||(ne=p!==null&&p.memoizedState===null?!1:(Va.current&2)!==0),ne&&(U=!0,g.flags&=-129),ne=(g.flags&32)!==0,g.flags&=-33,p===null){if($i){if(U?Na(g):Mo(),$i){var me=vo,Pe;(Pe=me)&&(me=KM(me,Ja),me!==null?(g.memoizedState={dehydrated:me,treeContext:mh!==null?{id:Nu,overflow:Du}:null,retryLane:536870912},Pe=t(18,null,null,0),Pe.stateNode=me,Pe.return=g,g.child=Pe,yo=g,vo=null,Pe=!0):Pe=!1),Pe||Ve(g)}if(me=g.memoizedState,me!==null&&(me=me.dehydrated,me!==null))return H_(me)?g.lanes=16:g.lanes=536870912,null;Yr(g)}return me=C.children,C=C.fallback,U?(Mo(),U=g.mode,me=p0({mode:"hidden",children:me},U),C=kr(C,U,E,null),me.return=g,C.return=g,me.sibling=C,g.child=me,U=g.child,U.memoizedState=hi(E),U.childLanes=rh(p,ne,E),g.memoizedState=ix,C):(Na(g),ah(g,me))}if(Pe=p.memoizedState,Pe!==null&&(me=Pe.dehydrated,me!==null)){if(k)g.flags&256?(Na(g),g.flags&=-257,g=Ep(p,g,E)):g.memoizedState!==null?(Mo(),g.child=p.child,g.flags|=128,g=null):(Mo(),U=C.fallback,me=g.mode,C=p0({mode:"visible",children:C.children},me),U=kr(U,me,E,null),U.flags|=2,C.return=g,U.return=g,C.sibling=U,g.child=C,_h(g,p.child,null,E),C=g.child,C.memoizedState=hi(E),C.childLanes=rh(p,ne,E),g.memoizedState=ix,g=U);else if(Na(g),H_(me))ne=$M(me).digest,C=Error(s(419)),C.stack="",C.digest=ne,le({value:C,source:null,stack:null}),g=Ep(p,g,E);else if(Bs||Ge(p,g,E,!1),ne=(E&p.childLanes)!==0,Bs||ne){if(ne=ds,ne!==null){if(C=E&-E,(C&42)!==0)C=1;else switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=64;break;case 268435456:C=134217728;break;default:C=0}if(C=(C&(ne.suspendedLanes|E))!==0?0:C,C!==0&&C!==Pe.retryLane)throw Pe.retryLane=C,We(p,C),js(ne,p,C),nx}G_(me)||rs(),g=Ep(p,g,E)}else G_(me)?(g.flags|=128,g.child=p.child,g=sl.bind(null,p),WM(me,g),g=null):(p=Pe.treeContext,go&&(vo=YM(me),yo=g,$i=!0,Yc=null,Ja=!1,p!==null&&(rc[ac++]=Nu,rc[ac++]=Du,rc[ac++]=mh,Nu=p.id,Du=p.overflow,mh=g)),g=ah(g,C.children),g.flags|=4096);return g}return U?(Mo(),U=C.fallback,me=g.mode,Pe=p.child,k=Pe.sibling,C=jc(Pe,{mode:"hidden",children:C.children}),C.subtreeFlags=Pe.subtreeFlags&31457280,k!==null?U=jc(k,U):(U=kr(U,me,E,null),U.flags|=2),U.return=g,C.return=g,C.sibling=U,g.child=C,C=U,U=g.child,me=p.child.memoizedState,me===null?me=hi(E):(Pe=me.cachePool,Pe!==null?(k=al?Ks._currentValue:Ks._currentValue2,Pe=Pe.parent!==k?{parent:k,pool:k}:Pe):Pe=Rr(),me={baseLanes:me.baseLanes|E,cachePool:Pe}),U.memoizedState=me,U.childLanes=rh(p,ne,E),g.memoizedState=ix,C):(Na(g),E=p.child,p=E.sibling,E=jc(E,{mode:"visible",children:C.children}),E.return=g,E.sibling=null,p!==null&&(ne=g.deletions,ne===null?(g.deletions=[p],g.flags|=16):ne.push(p)),g.child=E,g.memoizedState=null,E)}function ah(p,g){return g=p0({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function p0(p,g){return y0(p,g,0,null)}function Ep(p,g,E){return _h(g,p.child,null,E),p=ah(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function N_(p,g,E){p.lanes|=g;var C=p.alternate;C!==null&&(C.lanes|=g),Me(p.return,g,E)}function Zm(p,g,E,C,U){var k=p.memoizedState;k===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:E,tailMode:U}:(k.isBackwards=g,k.rendering=null,k.renderingStartTime=0,k.last=C,k.tail=E,k.tailMode=U)}function m0(p,g,E){var C=g.pendingProps,U=C.revealOrder,k=C.tail;if(Oa(p,g,C.children,E),C=Va.current,(C&2)!==0)C=C&1|2,g.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&N_(p,E,g);else if(p.tag===19)N_(p,E,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}C&=1}switch(w(Va,C),U){case"forwards":for(E=g.child,U=null;E!==null;)p=E.alternate,p!==null&&Ao(p)===null&&(U=E),E=E.sibling;E=U,E===null?(U=g.child,g.child=null):(U=E.sibling,E.sibling=null),Zm(g,!1,U,E,k);break;case"backwards":for(E=null,U=g.child,g.child=null;U!==null;){if(p=U.alternate,p!==null&&Ao(p)===null){g.child=U;break}p=U.sibling,U.sibling=E,E=U,U=p}Zm(g,!0,E,null,k);break;case"together":Zm(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Su(p,g,E){if(p!==null&&(g.dependencies=p.dependencies),hc|=g.lanes,(E&g.childLanes)===0)if(p!==null){if(Ge(p,g,E,!1),(E&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(s(153));if(g.child!==null){for(p=g.child,E=jc(p,p.pendingProps),g.child=E,E.return=g;p.sibling!==null;)p=p.sibling,E=E.sibling=jc(p,p.pendingProps),E.return=g;E.sibling=null}return g.child}function De(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&Gt(p)))}function Q(p,g,E){switch(g.tag){case 3:we(g,g.stateNode.containerInfo),ie(g,Ks,p.memoizedState.cache),Et();break;case 27:case 5:Ee(g);break;case 4:we(g,g.stateNode.containerInfo);break;case 10:ie(g,g.type,g.memoizedProps.value);break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(Na(g),g.flags|=128,null):(E&g.child.childLanes)!==0?Km(p,g,E):(Na(g),p=Su(p,g,E),p!==null?p.sibling:null);Na(g);break;case 19:var U=(p.flags&128)!==0;if(C=(E&g.childLanes)!==0,C||(Ge(p,g,E,!1),C=(E&g.childLanes)!==0),U){if(C)return m0(p,g,E);g.flags|=128}if(U=g.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),w(Va,Va.current),C)break;return null;case 22:case 23:return g.lanes=0,xp(p,g,E);case 24:ie(g,Ks,p.memoizedState.cache)}return Su(p,g,E)}function he(p,g,E){if(p!==null)if(p.memoizedProps!==g.pendingProps)Bs=!0;else{if(!De(p,E)&&(g.flags&128)===0)return Bs=!1,Q(p,g,E);Bs=(p.flags&131072)!==0}else Bs=!1,$i&&(g.flags&1048576)!==0&&ue(g,ug,g.index);switch(g.lanes=0,g.tag){case 16:e:{p=g.pendingProps;var C=g.elementType,U=C._init;if(C=U(C._payload),g.type=C,typeof C=="function")Pl(C)?(p=Nl(C,p),g.tag=1,g=Tp(null,g,C,p,E)):(g.tag=0,g=Sp(null,g,C,p,E));else{if(C!=null){if(U=C.$$typeof,U===S0){g.tag=11,g=bu(null,g,C,p,E);break e}else if(U===B_){g.tag=14,g=_p(null,g,C,p,E);break e}}throw g=a(C)||C,Error(s(306,g,""))}}return g;case 0:return Sp(p,g,g.type,g.pendingProps,E);case 1:return C=g.type,U=Nl(C,g.pendingProps),Tp(p,g,C,U,E);case 3:e:{if(we(g,g.stateNode.containerInfo),p===null)throw Error(s(387));var k=g.pendingProps;U=g.memoizedState,C=U.element,Zt(p,g),An(g,k,null,E);var ne=g.memoizedState;if(k=ne.cache,ie(g,Ks,k),k!==U.cache&&nt(g,[Ks],E,!0),Ct(),k=ne.element,go&&U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:ne.cache},g.updateQueue.baseState=U,g.memoizedState=U,g.flags&256){g=h0(p,g,k,E);break e}else if(k!==C){C=ce(Error(s(424)),g),le(C),g=h0(p,g,k,E);break e}else for(go&&(vo=XM(g.stateNode.containerInfo),yo=g,$i=!0,Yc=null,Ja=!0),E=Td(g,null,k,E),g.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Et(),k===C){g=Su(p,g,E);break e}Oa(p,g,k,E)}g=g.child}return g;case 26:if(sc)return bp(p,g),p===null?(E=bT(g.type,null,g.pendingProps,null))?g.memoizedState=E:$i||(g.stateNode=X_(g.type,g.pendingProps,bd.current,g)):g.memoizedState=bT(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(Ls)return Ee(g),p===null&&Ls&&$i&&(C=g.stateNode=Ru(g.type,g.pendingProps,bd.current,za.current,!1),yo=g,Ja=!0,vo=j_(C)),C=g.pendingProps.children,p!==null||$i?Oa(p,g,C,E):g.child=_h(g,null,C,E),bp(p,g),g.child;case 5:return p===null&&$i&&(W_(g.type,g.pendingProps,za.current),(U=C=vo)&&(C=ZD(C,g.type,g.pendingProps,Ja),C!==null?(g.stateNode=C,yo=g,vo=j_(C),Ja=!1,U=!0):U=!1),U||Ve(g)),Ee(g),U=g.type,k=g.pendingProps,ne=p!==null?p.memoizedProps:null,C=k.children,gi(U,k)?C=null:ne!==null&&gi(U,ne)&&(g.flags|=32),g.memoizedState!==null&&(U=Ic(p,g,Hi,null,null,E),al?Cu._currentValue=U:Cu._currentValue2=U),bp(p,g),Oa(p,g,C,E),g.child;case 6:return p===null&&$i&&(tA(g.pendingProps,za.current),(p=E=vo)&&(E=_T(E,g.pendingProps,Ja),E!==null?(g.stateNode=E,yo=g,vo=null,p=!0):p=!1),p||Ve(g)),null;case 13:return Km(p,g,E);case 4:return we(g,g.stateNode.containerInfo),C=g.pendingProps,p===null?g.child=_h(g,null,C,E):Oa(p,g,C,E),g.child;case 11:return bu(p,g,g.type,g.pendingProps,E);case 7:return Oa(p,g,g.pendingProps,E),g.child;case 8:return Oa(p,g,g.pendingProps.children,E),g.child;case 12:return Oa(p,g,g.pendingProps.children,E),g.child;case 10:return C=g.pendingProps,ie(g,g.type,C.value),Oa(p,g,C.children,E),g.child;case 9:return U=g.type._context,C=g.pendingProps.children,En(g),U=kn(U),C=C(U),g.flags|=1,Oa(p,g,C,E),g.child;case 14:return _p(p,g,g.type,g.pendingProps,E);case 15:return R_(p,g,g.type,g.pendingProps,E);case 19:return m0(p,g,E);case 22:return xp(p,g,E);case 24:return En(g),C=kn(Ks),p===null?(U=ks(),U===null&&(U=ds,k=gt(),U.pooledCache=k,k.refCount++,k!==null&&(U.pooledCacheLanes|=E),U=k),g.memoizedState={parent:C,cache:U},It(g),ie(g,Ks,U)):((p.lanes&E)!==0&&(Zt(p,g),An(g,null,null,E),Ct()),U=p.memoizedState,k=g.memoizedState,U.parent!==C?(U={parent:C,cache:C},g.memoizedState=U,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=U),ie(g,Ks,C)):(C=k.cache,ie(g,Ks,C),C!==U.cache&&nt(g,[Ks],E,!0))),Oa(p,g,g.pendingProps.children,E),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function ie(p,g,E){al?(w(xf,g._currentValue),g._currentValue=E):(w(xf,g._currentValue2),g._currentValue2=E)}function re(p){var g=xf.current;al?p._currentValue=g:p._currentValue2=g,b(xf)}function Me(p,g,E){for(;p!==null;){var C=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),p===E)break;p=p.return}}function nt(p,g,E,C){var U=p.child;for(U!==null&&(U.return=p);U!==null;){var k=U.dependencies;if(k!==null){var ne=U.child;k=k.firstContext;e:for(;k!==null;){var me=k;k=U;for(var Pe=0;Pe<g.length;Pe++)if(me.context===g[Pe]){k.lanes|=E,me=k.alternate,me!==null&&(me.lanes|=E),Me(k.return,E,p),C||(ne=null);break e}k=me.next}}else if(U.tag===18){if(ne=U.return,ne===null)throw Error(s(341));ne.lanes|=E,k=ne.alternate,k!==null&&(k.lanes|=E),Me(ne,E,p),ne=null}else ne=U.child;if(ne!==null)ne.return=U;else for(ne=U;ne!==null;){if(ne===p){ne=null;break}if(U=ne.sibling,U!==null){U.return=ne.return,ne=U;break}ne=ne.return}U=ne}}function Ge(p,g,E,C){p=null;for(var U=g,k=!1;U!==null;){if(!k){if((U.flags&524288)!==0)k=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ne=U.alternate;if(ne===null)throw Error(s(387));if(ne=ne.memoizedProps,ne!==null){var me=U.type;Ll(U.pendingProps.value,ne.value)||(p!==null?p.push(me):p=[me])}}else if(U===Op.current){if(ne=U.alternate,ne===null)throw Error(s(387));ne.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(p!==null?p.push(Cu):p=[Cu])}U=U.return}p!==null&&nt(g,p,E,C),g.flags|=262144}function Gt(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!Ll(al?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function En(p){Lu=p,uc=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function kn(p){return wn(Lu,p)}function oi(p,g){return Lu===null&&En(p),wn(p,g)}function wn(p,g){var E=al?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:E,next:null},uc===null){if(p===null)throw Error(s(308));uc=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else uc=uc.next=g;return E}function gt(){return{controller:new gg,data:new Map,refCount:0}}function Mn(p){p.refCount--,p.refCount===0&&fA(hA,function(){p.controller.abort()})}function ks(){var p=wd.current;return p!==null?p:ds.pooledCache}function ss(p,g){g===null?w(wd,wd.current):w(wd,g.pool)}function Rr(){var p=ks();return p===null?null:{parent:al?Ks._currentValue:Ks._currentValue2,pool:p}}function Ci(p){p.flags|=4}function mr(p,g){if(p!==null&&p.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(p=g.child;p!==null;){if((p.flags&13878)!==0||(p.subtreeFlags&13878)!==0)return!0;p=p.sibling}return!1}function Gn(p,g,E,C){if(Fa)for(E=g.child;E!==null;){if(E.tag===5||E.tag===6)E0(p,E.stateNode);else if(!(E.tag===4||Ls&&E.tag===27)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===g)break;for(;E.sibling===null;){if(E.return===null||E.return===g)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else if(qc)for(var U=g.child;U!==null;){if(U.tag===5){var k=U.stateNode;E&&C&&(k=mT(k,U.type,U.memoizedProps)),E0(p,k)}else if(U.tag===6)k=U.stateNode,E&&C&&(k=gT(k,U.memoizedProps)),E0(p,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),Gn(p,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===g)break;for(;U.sibling===null;){if(U.return===null||U.return===g)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function Qo(p,g,E,C){if(qc)for(var U=g.child;U!==null;){if(U.tag===5){var k=U.stateNode;E&&C&&(k=mT(k,U.type,U.memoizedProps)),pT(p,k)}else if(U.tag===6)k=U.stateNode,E&&C&&(k=gT(k,U.memoizedProps)),pT(p,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),Qo(p,U,!(U.memoizedProps!==null&&U.memoizedProps.mode==="manual"),!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===g)break;for(;U.sibling===null;){if(U.return===null||U.return===g)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function ls(p,g){if(qc&&mr(p,g)){p=g.stateNode;var E=p.containerInfo,C=w0();Qo(C,g,!1,!1),p.pendingChildren=C,Ci(g),k_(E,C)}}function Bn(p,g,E,C){if(Fa)p.memoizedProps!==C&&Ci(g);else if(qc){var U=p.stateNode,k=p.memoizedProps;if((p=mr(p,g))||k!==C){var ne=za.current;k=og(U,E,k,C,!p,null),k===U?g.stateNode=U:(hf(k,E,C,ne)&&Ci(g),g.stateNode=k,p?Gn(k,g,!1,!1):Ci(g))}else g.stateNode=U}}function ya(p,g,E){if(aT(g,E)){if(p.flags|=16777216,!z_(g,E))if(Pn())p.flags|=8192;else throw gh=L0,O0}else p.flags&=-16777217}function La(p,g){if(sA(g)){if(p.flags|=16777216,!Cp(g))if(Pn())p.flags|=8192;else throw gh=L0,O0}else p.flags&=-16777217}function vn(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?I():536870912,p.lanes|=g,Cd|=g)}function rr(p,g){if(!$i)switch(p.tailMode){case"hidden":g=p.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?p.tail=null:E.sibling=null;break;case"collapsed":E=p.tail;for(var C=null;E!==null;)E.alternate!==null&&(C=E),E=E.sibling;C===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:C.sibling=null}}function en(p){var g=p.alternate!==null&&p.alternate.child===p.child,E=0,C=0;if(g)for(var U=p.child;U!==null;)E|=U.lanes|U.childLanes,C|=U.subtreeFlags&31457280,C|=U.flags&31457280,U.return=p,U=U.sibling;else for(U=p.child;U!==null;)E|=U.lanes|U.childLanes,C|=U.subtreeFlags,C|=U.flags,U.return=p,U=U.sibling;return p.subtreeFlags|=C,p.childLanes=E,g}function kc(p,g,E){var C=g.pendingProps;switch(Ne(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(g),null;case 1:return en(g),null;case 3:return E=g.stateNode,C=null,p!==null&&(C=p.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),re(Ks),pt(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(p===null||p.child===null)&&(ct(g)?Ci(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Yc!==null&&(il(Yc),Yc=null))),ls(p,g),en(g),null;case 26:if(sc){E=g.type;var U=g.memoizedState;return p===null?(Ci(g),U!==null?(en(g),La(g,U)):(en(g),ya(g,E,C))):U?U!==p.memoizedState?(Ci(g),en(g),La(g,U)):(en(g),g.flags&=-16777217):(Fa?p.memoizedProps!==C&&Ci(g):Bn(p,g,E,C),en(g),ya(g,E,C)),null}case 27:if(Ls){if(Ue(g),E=bd.current,U=g.type,p!==null&&g.stateNode!=null)Fa?p.memoizedProps!==C&&Ci(g):Bn(p,g,U,C);else{if(!C){if(g.stateNode===null)throw Error(s(166));return en(g),null}p=za.current,ct(g)?Be(g,p):(p=Ru(U,C,E,p,!0),g.stateNode=p,Ci(g))}return en(g),null}case 5:if(Ue(g),E=g.type,p!==null&&g.stateNode!=null)Bn(p,g,E,C);else{if(!C){if(g.stateNode===null)throw Error(s(166));return en(g),null}p=za.current,ct(g)?Be(g,p):(U=rT(E,C,bd.current,p,g),Gn(U,g,!1,!1),g.stateNode=U,hf(U,E,C,p)&&Ci(g))}return en(g),ya(g,g.type,g.pendingProps),null;case 6:if(p&&g.stateNode!=null)E=p.memoizedProps,Fa?E!==C&&Ci(g):qc&&(E!==C?(g.stateNode=_s(C,bd.current,za.current,g),Ci(g)):g.stateNode=p.stateNode);else{if(typeof C!="string"&&g.stateNode===null)throw Error(s(166));if(p=bd.current,E=za.current,ct(g)){if(!go)throw Error(s(176));if(p=g.stateNode,E=g.memoizedProps,C=null,U=yo,U!==null)switch(U.tag){case 27:case 5:C=U.memoizedProps}xT(p,E,g,C)||Ve(g)}else g.stateNode=_s(C,p,E,g)}return en(g),null;case 13:if(C=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(U=ct(g),C!==null&&C.dehydrated!==null){if(p===null){if(!U)throw Error(s(318));if(!go)throw Error(s(344));if(U=g.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(s(317));QM(U,g)}else Et(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;en(g),U=!1}else Yc!==null&&(il(Yc),Yc=null),U=!0;if(!U)return g.flags&256?(Yr(g),g):(Yr(g),null)}if(Yr(g),(g.flags&128)!==0)return g.lanes=E,g;if(E=C!==null,p=p!==null&&p.memoizedState!==null,E){C=g.child,U=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(U=C.alternate.memoizedState.cachePool.pool);var k=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(k=C.memoizedState.cachePool.pool),k!==U&&(C.flags|=2048)}return E!==p&&E&&(g.child.flags|=8192),vn(g,g.updateQueue),en(g),null;case 4:return pt(),ls(p,g),p===null&&ea(g.stateNode.containerInfo),en(g),null;case 10:return re(g.type),en(g),null;case 19:if(b(Va),U=g.memoizedState,U===null)return en(g),null;if(C=(g.flags&128)!==0,k=U.rendering,k===null)if(C)rr(U,!1);else{if(Is!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if(k=Ao(p),k!==null){for(g.flags|=128,rr(U,!1),p=k.updateQueue,g.updateQueue=p,vn(g,p),g.subtreeFlags=0,p=E,E=g.child;E!==null;)g0(E,p),E=E.sibling;return w(Va,Va.current&1|2),g.child}p=p.sibling}U.tail!==null&&Xc()>_g&&(g.flags|=128,C=!0,rr(U,!1),g.lanes=4194304)}else{if(!C)if(p=Ao(k),p!==null){if(g.flags|=128,C=!0,p=p.updateQueue,g.updateQueue=p,vn(g,p),rr(U,!0),U.tail===null&&U.tailMode==="hidden"&&!k.alternate&&!$i)return en(g),null}else 2*Xc()-U.renderingStartTime>_g&&E!==536870912&&(g.flags|=128,C=!0,rr(U,!1),g.lanes=4194304);U.isBackwards?(k.sibling=g.child,g.child=k):(p=U.last,p!==null?p.sibling=k:g.child=k,U.last=k)}return U.tail!==null?(g=U.tail,U.rendering=g,U.tail=g.sibling,U.renderingStartTime=Xc(),g.sibling=null,p=Va.current,w(Va,C?p&1|2:p&1),g):(en(g),null);case 22:case 23:return Yr(g),Mr(),C=g.memoizedState!==null,p!==null?p.memoizedState!==null!==C&&(g.flags|=8192):C&&(g.flags|=8192),C?(E&536870912)!==0&&(g.flags&128)===0&&(en(g),g.subtreeFlags&6&&(g.flags|=8192)):en(g),E=g.updateQueue,E!==null&&vn(g,E.retryQueue),E=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==E&&(g.flags|=2048),p!==null&&b(wd),null;case 24:return E=null,p!==null&&(E=p.memoizedState.cache),g.memoizedState.cache!==E&&(g.flags|=2048),re(Ks),en(g),null;case 25:return null}throw Error(s(156,g.tag))}function Zr(p,g){switch(Ne(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return re(Ks),pt(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return Ue(g),null;case 13:if(Yr(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Et()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return b(Va),null;case 4:return pt(),null;case 10:return re(g.type),null;case 22:case 23:return Yr(g),Mr(),p!==null&&b(wd),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return re(Ks),null;case 25:return null;default:return null}}function Ya(p,g){switch(Ne(g),g.tag){case 3:re(Ks),pt();break;case 26:case 27:case 5:Ue(g);break;case 4:pt();break;case 13:Yr(g);break;case 19:b(Va);break;case 10:re(g.type);break;case 22:case 23:Yr(g),Mr(),p!==null&&b(wd);break;case 24:re(Ks)}}function Qr(p,g){try{var E=g.updateQueue,C=E!==null?E.lastEffect:null;if(C!==null){var U=C.next;E=U;do{if((E.tag&p)===p){C=void 0;var k=E.create,ne=E.inst;C=k(),ne.destroy=C}E=E.next}while(E!==U)}}catch(me){In(g,g.return,me)}}function Bi(p,g,E){try{var C=g.updateQueue,U=C!==null?C.lastEffect:null;if(U!==null){var k=U.next;C=k;do{if((C.tag&p)===p){var ne=C.inst,me=ne.destroy;if(me!==void 0){ne.destroy=void 0,U=g;var Pe=E;try{me()}catch(dt){In(U,Pe,dt)}}}C=C.next}while(C!==k)}}catch(dt){In(g,g.return,dt)}}function Nr(p){var g=p.updateQueue;if(g!==null){var E=p.stateNode;try{bt(g,E)}catch(C){In(p,p.return,C)}}}function zi(p,g,E){E.props=Nl(p.type,p.memoizedProps),E.state=p.memoizedState;try{E.componentWillUnmount()}catch(C){In(p,g,C)}}function Le(p,g){try{var E=p.ref;if(E!==null){var C=p.stateNode;switch(p.tag){case 26:case 27:case 5:var U=sg(C);break;default:U=C}typeof E=="function"?p.refCleanup=E(U):E.current=U}}catch(k){In(p,g,k)}}function ji(p,g){var E=p.ref,C=p.refCleanup;if(E!==null)if(typeof C=="function")try{C()}catch(U){In(p,g,U)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(U){In(p,g,U)}else E.current=null}function Tu(p){var g=p.type,E=p.memoizedProps,C=p.stateNode;try{YD(C,g,E,p)}catch(U){In(p,p.return,U)}}function Gc(p,g,E){try{IM(p.stateNode,p.type,E,g,p)}catch(C){In(p,p.return,C)}}function Ro(p){return p.tag===5||p.tag===3||(sc?p.tag===26:!1)||(Ls?p.tag===27:!1)||p.tag===4}function Jo(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Ro(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!Ls||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function va(p,g,E){var C=p.tag;if(C===5||C===6)p=p.stateNode,g?zM(E,p,g):dT(E,p);else if(!(C===4||Ls&&C===27)&&(p=p.child,p!==null))for(va(p,g,E),p=p.sibling;p!==null;)va(p,g,E),p=p.sibling}function cs(p,g,E){var C=p.tag;if(C===5||C===6)p=p.stateNode,g?FM(E,p,g):UM(E,p);else if(!(C===4||Ls&&C===27)&&(p=p.child,p!==null))for(cs(p,g,E),p=p.sibling;p!==null;)cs(p,g,E),p=p.sibling}function _a(p,g,E){p=p.containerInfo;try{lg(p,E)}catch(C){In(g,g.return,C)}}function Ir(p,g){for(I_(p.containerInfo),ci=g;ci!==null;)if(p=ci,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,ci=g;else for(;ci!==null;){p=ci;var E=p.alternate;switch(g=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&E!==null){g=void 0;var C=p,U=E.memoizedProps;E=E.memoizedState;var k=C.stateNode;try{var ne=Nl(C.type,U,C.elementType===C.type);g=k.getSnapshotBeforeUpdate(ne,E),k.__reactInternalSnapshotBeforeUpdate=g}catch(me){In(C,C.return,me)}}break;case 3:(g&1024)!==0&&Fa&&jM(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(s(163))}if(g=p.sibling,g!==null){g.return=p.return,ci=g;break}ci=p.return}return ne=Ri,Ri=!1,ne}function tc(p,g,E){var C=E.flags;switch(E.tag){case 0:case 11:case 15:es(p,E),C&4&&Qr(5,E);break;case 1:if(es(p,E),C&4)if(p=E.stateNode,g===null)try{p.componentDidMount()}catch(me){In(E,E.return,me)}else{var U=Nl(E.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(U,g,p.__reactInternalSnapshotBeforeUpdate)}catch(me){In(E,E.return,me)}}C&64&&Nr(E),C&512&&Le(E,E.return);break;case 3:if(es(p,E),C&64&&(C=E.updateQueue,C!==null)){if(p=null,E.child!==null)switch(E.child.tag){case 27:case 5:p=sg(E.child.stateNode);break;case 1:p=E.child.stateNode}try{bt(C,p)}catch(me){In(E,E.return,me)}}break;case 26:if(sc){es(p,E),C&512&&Le(E,E.return);break}case 27:case 5:es(p,E),g===null&&C&4&&Tu(E),C&512&&Le(E,E.return);break;case 12:es(p,E);break;case 13:es(p,E),C&4&&Gs(p,E);break;case 22:if(U=E.memoizedState!==null||Md,!U){g=g!==null&&g.memoizedState!==null||Hr;var k=Md,ne=Hr;Md=U,(Hr=g)&&!ne?Ka(p,E,(E.subtreeFlags&8772)!==0):es(p,E),Md=k,Hr=ne}C&512&&(E.memoizedProps.mode==="manual"?Le(E,E.return):ji(E,E.return));break;default:es(p,E)}}function Ua(p){var g=p.alternate;g!==null&&(p.alternate=null,Ua(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&XD(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Ji(p,g,E){for(E=E.child;E!==null;)pi(p,g,E),E=E.sibling}function pi(p,g,E){if(Ol&&typeof Ol.onCommitFiberUnmount=="function")try{Ol.onCommitFiberUnmount(na,E)}catch{}switch(E.tag){case 26:if(sc){Hr||ji(E,g),Ji(p,g,E),E.memoizedState?Ap(E.memoizedState):E.stateNode&&cg(E.stateNode);break}case 27:if(Ls){Hr||ji(E,g);var C=Dn,U=vi;Dn=E.stateNode,Ji(p,g,E),hh(E.stateNode),Dn=C,vi=U;break}case 5:Hr||ji(E,g);case 6:if(Fa){if(C=Dn,U=vi,Dn=null,Ji(p,g,E),Dn=C,vi=U,Dn!==null)if(vi)try{VM(Dn,E.stateNode)}catch(k){In(E,g,k)}else try{fT(Dn,E.stateNode)}catch(k){In(E,g,k)}}else Ji(p,g,E);break;case 18:Fa&&Dn!==null&&(vi?M0(Dn,E.stateNode):eA(Dn,E.stateNode));break;case 4:Fa?(C=Dn,U=vi,Dn=E.stateNode.containerInfo,vi=!0,Ji(p,g,E),Dn=C,vi=U):(qc&&_a(E.stateNode,E,w0()),Ji(p,g,E));break;case 0:case 11:case 14:case 15:Hr||Bi(2,E,g),Hr||Bi(4,E,g),Ji(p,g,E);break;case 1:Hr||(ji(E,g),C=E.stateNode,typeof C.componentWillUnmount=="function"&&zi(E,g,C)),Ji(p,g,E);break;case 21:Ji(p,g,E);break;case 22:Hr||ji(E,g),Hr=(C=Hr)||E.memoizedState!==null,Ji(p,g,E),Hr=C;break;default:Ji(p,g,E)}}function Gs(p,g){if(go&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{JD(p)}catch(E){In(g,g.return,E)}}function ho(p){switch(p.tag){case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new us),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new us),g;default:throw Error(s(435,p.tag))}}function Dr(p,g){var E=ho(p);g.forEach(function(C){var U=Ia.bind(null,p,C);E.has(C)||(E.add(C),C.then(U,U))})}function Ke(p,g){var E=g.deletions;if(E!==null)for(var C=0;C<E.length;C++){var U=E[C],k=p,ne=g;if(Fa){var me=ne;e:for(;me!==null;){switch(me.tag){case 27:case 5:Dn=me.stateNode,vi=!1;break e;case 3:Dn=me.stateNode.containerInfo,vi=!0;break e;case 4:Dn=me.stateNode.containerInfo,vi=!0;break e}me=me.return}if(Dn===null)throw Error(s(160));pi(k,ne,U),Dn=null,vi=!1}else pi(k,ne,U);k=U.alternate,k!==null&&(k.return=null),U.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)po(g,p),g=g.sibling}function po(p,g){var E=p.alternate,C=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Ke(g,p),gr(p),C&4&&(Bi(3,p,p.return),Qr(3,p),Bi(5,p,p.return));break;case 1:Ke(g,p),gr(p),C&512&&(Hr||E===null||ji(E,E.return)),C&64&&Md&&(p=p.updateQueue,p!==null&&(C=p.callbacks,C!==null&&(E=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=E===null?C:E.concat(C))));break;case 26:if(sc){var U=Or;Ke(g,p),gr(p),C&512&&(Hr||E===null||ji(E,E.return)),C&4&&(C=E!==null?E.memoizedState:null,g=p.memoizedState,E===null?g===null?p.stateNode===null?p.stateNode=C0(U,p.type,p.memoizedProps,p):R0(U,p.type,p.stateNode):p.stateNode=nA(U,g,p.memoizedProps):C!==g?(C===null?E.stateNode!==null&&cg(E.stateNode):Ap(C),g===null?R0(U,p.type,p.stateNode):nA(U,g,p.memoizedProps)):g===null&&p.stateNode!==null&&Gc(p,p.memoizedProps,E.memoizedProps));break}case 27:if(Ls&&C&4&&p.alternate===null){U=p.stateNode;var k=p.memoizedProps;try{fh(U),aA(p.type,k,U,p)}catch(Pt){In(p,p.return,Pt)}}case 5:if(Ke(g,p),gr(p),C&512&&(Hr||E===null||ji(E,E.return)),Fa){if(p.flags&32){g=p.stateNode;try{hT(g)}catch(Pt){In(p,p.return,Pt)}}C&4&&p.stateNode!=null&&(g=p.memoizedProps,Gc(p,g,E!==null?E.memoizedProps:g)),C&1024&&(wT=!0)}break;case 6:if(Ke(g,p),gr(p),C&4&&Fa){if(p.stateNode===null)throw Error(s(162));C=p.memoizedProps,E=E!==null?E.memoizedProps:C,g=p.stateNode;try{BM(g,E,C)}catch(Pt){In(p,p.return,Pt)}}break;case 3:if(sc?(iA(),U=Or,Or=q_(g.containerInfo),Ke(g,p),Or=U):Ke(g,p),gr(p),C&4){if(Fa&&go&&E!==null&&E.memoizedState.isDehydrated)try{QD(g.containerInfo)}catch(Pt){In(p,p.return,Pt)}if(qc){C=g.containerInfo,E=g.pendingChildren;try{lg(C,E)}catch(Pt){In(p,p.return,Pt)}}}wT&&(wT=!1,Eu(p));break;case 4:sc?(E=Or,Or=q_(p.stateNode.containerInfo),Ke(g,p),gr(p),Or=E):(Ke(g,p),gr(p)),C&4&&qc&&_a(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Ke(g,p),gr(p);break;case 13:Ke(g,p),gr(p),p.child.flags&8192&&p.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(ul=Xc()),C&4&&(C=p.updateQueue,C!==null&&(p.updateQueue=null,Dr(p,C)));break;case 22:C&512&&(Hr||E===null||ji(E,E.return)),U=p.memoizedState!==null;var ne=E!==null&&E.memoizedState!==null,me=Md,Pe=Hr;if(Md=me||U,Hr=Pe||ne,Ke(g,p),Hr=Pe,Md=me,gr(p),g=p.stateNode,g._current=p,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,C&8192&&(g._visibility=U?g._visibility&-2:g._visibility|1,U&&(g=Md||Hr,E===null||ne||g||No(p)),Fa&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(E=null,Fa)for(g=p;;){if(g.tag===5||sc&&g.tag===26||Ls&&g.tag===27){if(E===null){ne=E=g;try{k=ne.stateNode,U?kM(k):HM(ne.stateNode,ne.memoizedProps)}catch(Pt){In(ne,ne.return,Pt)}}}else if(g.tag===6){if(E===null){ne=g;try{var dt=ne.stateNode;U?GM(dt):KD(dt,ne.memoizedProps)}catch(Pt){In(ne,ne.return,Pt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;E===g&&(E=null),g=g.return}E===g&&(E=null),g.sibling.return=g.return,g=g.sibling}}C&4&&(C=p.updateQueue,C!==null&&(E=C.retryQueue,E!==null&&(C.retryQueue=null,Dr(p,E))));break;case 19:Ke(g,p),gr(p),C&4&&(C=p.updateQueue,C!==null&&(p.updateQueue=null,Dr(p,C)));break;case 21:break;default:Ke(g,p),gr(p)}}function gr(p){var g=p.flags;if(g&2){try{if(Fa&&(!Ls||p.tag!==27)){e:{for(var E=p.return;E!==null;){if(Ro(E)){var C=E;break e}E=E.return}throw Error(s(160))}switch(C.tag){case 27:if(Ls){var U=C.stateNode,k=Jo(p);cs(p,k,U);break}case 5:var ne=C.stateNode;C.flags&32&&(hT(ne),C.flags&=-33);var me=Jo(p);cs(p,me,ne);break;case 3:case 4:var Pe=C.stateNode.containerInfo,dt=Jo(p);va(p,dt,Pe);break;default:throw Error(s(161))}}}catch(Pt){In(p,p.return,Pt)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function Eu(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;Eu(g),g.tag===5&&g.flags&1024&&V_(g.stateNode),p=p.sibling}}function es(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)tc(p,g.alternate,g),g=g.sibling}function No(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:Bi(4,g,g.return),No(g);break;case 1:ji(g,g.return);var E=g.stateNode;typeof E.componentWillUnmount=="function"&&zi(g,g.return,E),No(g);break;case 26:case 27:case 5:ji(g,g.return),No(g);break;case 22:ji(g,g.return),g.memoizedState===null&&No(g);break;default:No(g)}p=p.sibling}}function Ka(p,g,E){for(E=E&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var C=g.alternate,U=p,k=g,ne=k.flags;switch(k.tag){case 0:case 11:case 15:Ka(U,k,E),Qr(4,k);break;case 1:if(Ka(U,k,E),C=k,U=C.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(dt){In(C,C.return,dt)}if(C=k,U=C.updateQueue,U!==null){var me=C.stateNode;try{var Pe=U.shared.hiddenCallbacks;if(Pe!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Pe.length;U++)xe(Pe[U],me)}catch(dt){In(C,C.return,dt)}}E&&ne&64&&Nr(k),Le(k,k.return);break;case 26:case 27:case 5:Ka(U,k,E),E&&C===null&&ne&4&&Tu(k),Le(k,k.return);break;case 12:Ka(U,k,E);break;case 13:Ka(U,k,E),E&&ne&4&&Gs(U,k);break;case 22:k.memoizedState===null&&Ka(U,k,E),Le(k,k.return);break;default:Ka(U,k,E)}g=g.sibling}}function Hc(p,g){var E=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==E&&(p!=null&&p.refCount++,E!=null&&Mn(E))}function yr(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Mn(p))}function Os(p,g,E,C){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)ar(p,g,E,C),g=g.sibling}function ar(p,g,E,C){var U=g.flags;switch(g.tag){case 0:case 11:case 15:Os(p,g,E,C),U&2048&&Qr(9,g);break;case 3:Os(p,g,E,C),U&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Mn(p)));break;case 12:if(U&2048){Os(p,g,E,C),p=g.stateNode;try{var k=g.memoizedProps,ne=k.id,me=k.onPostCommit;typeof me=="function"&&me(ne,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Pe){In(g,g.return,Pe)}}else Os(p,g,E,C);break;case 23:break;case 22:k=g.stateNode,g.memoizedState!==null?k._visibility&4?Os(p,g,E,C):ys(p,g):k._visibility&4?Os(p,g,E,C):(k._visibility|=4,gs(p,g,E,C,(g.subtreeFlags&10256)!==0)),U&2048&&Hc(g.alternate,g);break;case 24:Os(p,g,E,C),U&2048&&yr(g.alternate,g);break;default:Os(p,g,E,C)}}function gs(p,g,E,C,U){for(U=U&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var k=p,ne=g,me=E,Pe=C,dt=ne.flags;switch(ne.tag){case 0:case 11:case 15:gs(k,ne,me,Pe,U),Qr(8,ne);break;case 23:break;case 22:var Pt=ne.stateNode;ne.memoizedState!==null?Pt._visibility&4?gs(k,ne,me,Pe,U):ys(k,ne):(Pt._visibility|=4,gs(k,ne,me,Pe,U)),U&&dt&2048&&Hc(ne.alternate,ne);break;case 24:gs(k,ne,me,Pe,U),U&&dt&2048&&yr(ne.alternate,ne);break;default:gs(k,ne,me,Pe,U)}g=g.sibling}}function ys(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var E=p,C=g,U=C.flags;switch(C.tag){case 22:ys(E,C),U&2048&&Hc(C.alternate,C);break;case 24:ys(E,C),U&2048&&yr(C.alternate,C);break;default:ys(E,C)}g=g.sibling}}function Fr(p){if(p.subtreeFlags&dc)for(p=p.child;p!==null;)pd(p),p=p.sibling}function pd(p){switch(p.tag){case 26:Fr(p),p.flags&dc&&(p.memoizedState!==null?rA(Or,p.memoizedState,p.memoizedProps):ol(p.type,p.memoizedProps));break;case 5:Fr(p),p.flags&dc&&ol(p.type,p.memoizedProps);break;case 3:case 4:if(sc){var g=Or;Or=q_(p.stateNode.containerInfo),Fr(p),Or=g}else Fr(p);break;case 22:p.memoizedState===null&&(g=p.alternate,g!==null&&g.memoizedState!==null?(g=dc,dc=16777216,Fr(p),dc=g):Fr(p));break;default:Fr(p)}}function Hs(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function nc(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var E=0;E<g.length;E++){var C=g[E];ci=C,md(C,p)}Hs(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Dl(p),p=p.sibling}function Dl(p){switch(p.tag){case 0:case 11:case 15:nc(p),p.flags&2048&&Bi(9,p,p.return);break;case 3:nc(p);break;case 12:nc(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&4&&(p.return===null||p.return.tag!==13)?(g._visibility&=-5,Do(p)):nc(p);break;default:nc(p)}}function Do(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var E=0;E<g.length;E++){var C=g[E];ci=C,md(C,p)}Hs(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:Bi(8,g,g.return),Do(g);break;case 22:E=g.stateNode,E._visibility&4&&(E._visibility&=-5,Do(g));break;default:Do(g)}p=p.sibling}}function md(p,g){for(;ci!==null;){var E=ci;switch(E.tag){case 0:case 11:case 15:Bi(8,E,g);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var C=E.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Mn(E.memoizedState.cache)}if(C=E.child,C!==null)C.return=E,ci=C;else e:for(E=p;ci!==null;){C=ci;var U=C.sibling,k=C.return;if(Ua(C),C===E){ci=null;break e}if(U!==null){U.return=k,ci=U;break e}ci=k}}}function el(p){var g=CM(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(s(364));return g}if(p=cT(p),p===null)throw Error(s(362));return p.stateNode.current}function Po(p,g){var E=p.tag;switch(g.$$typeof){case vg:if(p.type===g.value)return!0;break;case Qc:e:{for(g=g.value,p=[p,0],E=0;E<p.length;){var C=p[E++],U=C.tag,k=p[E++],ne=g[k];if(U!==5&&U!==26&&U!==27||!ag(C)){for(;ne!=null&&Po(C,ne);)k++,ne=g[k];if(k===g.length){g=!0;break e}else for(C=C.child;C!==null;)p.push(C,k),C=C.sibling}}g=!1}return g;case or:if((E===5||E===26||E===27)&&PM(p.stateNode,g.value))return!0;break;case Ad:if((E===5||E===6||E===26||E===27)&&(p=DM(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case Uu:if((E===5||E===26||E===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function yi(p){switch(p.$$typeof){case vg:return"<"+(a(p.value)||"Unknown")+">";case Qc:return":has("+(yi(p)||"")+")";case or:return'[role="'+p.value+'"]';case Ad:return'"'+p.value+'"';case Uu:return'[data-testname="'+p.value+'"]';default:throw Error(s(365))}}function zr(p,g){var E=[];p=[p,0];for(var C=0;C<p.length;){var U=p[C++],k=U.tag,ne=p[C++],me=g[ne];if(k!==5&&k!==26&&k!==27||!ag(U)){for(;me!=null&&Po(U,me);)ne++,me=g[ne];if(ne===g.length)E.push(U);else for(U=U.child;U!==null;)p.push(U,ne),U=U.sibling}}return E}function mo(p,g){if(!dh)throw Error(s(363));p=el(p),p=zr(p,g),g=[],p=Array.from(p);for(var E=0;E<p.length;){var C=p[E++],U=C.tag;if(U===5||U===26||U===27)ag(C)||g.push(C.stateNode);else for(C=C.child;C!==null;)p.push(C),C=C.sibling}return g}function qi(){if((Yi&2)!==0&&Ii!==0)return Ii&-Ii;if(Xn.T!==null){var p=oc;return p!==0?p:tt()}return RM()}function tl(){pc===0&&(pc=(Ii&536870912)===0||$i?F():536870912);var p=lc.current;return p!==null&&(p.flags|=32),pc}function js(p,g,E){(p===ds&&Ms===2||p.cancelPendingCommit!==null)&&(_n(p,0),ln(p,Ii,pc,!1)),H(p,E),((Yi&2)===0||p!==ds)&&(p===ds&&((Yi&2)===0&&(bf|=E),Is===4&&ln(p,Ii,pc,!1)),ht(p))}function nl(p,g,E){if((Yi&6)!==0)throw Error(s(327));var C=!E&&(g&60)===0&&(g&p.expiredLanes)===0||D(p,g),U=C?ws(p,g):Jr(p,g,!0),k=C;do{if(U===0){fc&&!C&&ln(p,g,0,!1);break}else if(U===6)ln(p,g,0,!eu);else{if(E=p.current.alternate,k&&!Hn(E)){U=Jr(p,g,!1),k=!1;continue}if(U===2){if(k=g,p.errorRecoveryDisabledLanes&k)var ne=0;else ne=p.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){g=ne;e:{var me=p;U=Gp;var Pe=go&&me.current.memoizedState.isDehydrated;if(Pe&&(_n(me,ne).flags|=256),ne=Jr(me,ne,!1),ne!==2){if(ka&&!Pe){me.errorRecoveryDisabledLanes|=k,bf|=k,U=4;break e}k=jr,jr=U,k!==null&&il(k)}U=ne}if(k=!1,U!==2)continue}}if(U===1){_n(p,0),ln(p,g,0,!0);break}e:{switch(C=p,U){case 0:case 1:throw Error(s(345));case 4:if((g&4194176)===g){ln(C,g,pc,!eu);break e}break;case 2:jr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(C.finishedWork=E,C.finishedLanes=g,(g&62914560)===g&&(k=ul+300-Xc(),10<k)){if(ln(C,g,pc,!eu),N(C,0)!==0)break e;C.timeoutHandle=ba(gd.bind(null,C,E,jr,B0,sx,g,pc,bf,Cd,eu,2,-0,0),k);break e}gd(C,E,jr,B0,sx,g,pc,bf,Cd,eu,0,-0,0)}}break}while(!0);ht(p)}function il(p){jr===null?jr=p:jr.push.apply(jr,p)}function gd(p,g,E,C,U,k,ne,me,Pe,dt,Pt,Wt,tn){var ui=g.subtreeFlags;if((ui&8192||(ui&16785408)===16785408)&&(oT(),pd(g),g=Sa(),g!==null)){p.cancelPendingCommit=g(qs.bind(null,p,E,C,U,ne,me,Pe,1,Wt,tn)),ln(p,k,ne,!dt);return}qs(p,E,C,U,ne,me,Pe,Pt,Wt,tn)}function Hn(p){for(var g=p;;){var E=g.tag;if((E===0||E===11||E===15)&&g.flags&16384&&(E=g.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var C=0;C<E.length;C++){var U=E[C],k=U.getSnapshot;U=U.value;try{if(!Ll(k(),U))return!1}catch{return!1}}if(E=g.child,g.subtreeFlags&16384&&E!==null)E.return=g,g=E;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function ln(p,g,E,C){g&=~U0,g&=~bf,p.suspendedLanes|=g,p.pingedLanes&=~g,C&&(p.warmLanes|=g),C=p.expirationTimes;for(var U=g;0<U;){var k=31-ll(U),ne=1<<k;C[k]=-1,U&=~ne}E!==0&&Z(p,E,g)}function Di(){return(Yi&6)===0?(Bt(0),!1):!0}function zt(){if(Fn!==null){if(Ms===0)var p=Fn.return;else p=Fn,uc=Lu=null,ee(p),yh=null,vh=0,p=Fn;for(;p!==null;)Ya(p.alternate,p),p=p.return;Fn=null}}function _n(p,g){p.finishedWork=null,p.finishedLanes=0;var E=p.timeoutHandle;E!==ch&&(p.timeoutHandle=ch,F_(E)),E=p.cancelPendingCommit,E!==null&&(p.cancelPendingCommit=null,E()),zt(),ds=p,Fn=E=jc(p.current,null),Ii=g,Ms=0,Uo=null,eu=!1,fc=D(p,g),ka=!1,Cd=pc=U0=bf=hc=Is=0,jr=Gp=null,sx=!1,(g&8)!==0&&(g|=g&32);var C=p.entangledLanes;if(C!==0)for(p=p.entanglements,C&=g;0<C;){var U=31-ll(C),k=1<<U;g|=p[U],C&=~k}return Bo=g,$e(),E}function rn(p,g){xi=null,Xn.H=Gr,g===pg?(g=nn(),Ms=3):g===O0?(g=nn(),Ms=4):Ms=g===nx?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Uo=g,Fn===null&&(Is=1,Vc(p,ce(g,p.current)))}function Pn(){var p=lc.current;return p===null?!0:(Ii&4194176)===Ii?Us===null:(Ii&62914560)===Ii||(Ii&536870912)!==0?p===Us:!1}function vs(){var p=Xn.H;return Xn.H=Gr,p===null?Gr:p}function ei(){var p=Xn.A;return Xn.A=yg,p}function rs(){Is=4,eu||(Ii&4194176)!==Ii&&lc.current!==null||(fc=!0),(hc&134217727)===0&&(bf&134217727)===0||ds===null||ln(ds,Ii,pc,!1)}function Jr(p,g,E){var C=Yi;Yi|=2;var U=vs(),k=ei();(ds!==p||Ii!==g)&&(B0=null,_n(p,g)),g=!1;var ne=Is;e:do try{if(Ms!==0&&Fn!==null){var me=Fn,Pe=Uo;switch(Ms){case 8:zt(),ne=6;break e;case 3:case 2:case 6:lc.current===null&&(g=!0);var dt=Ms;if(Ms=0,Uo=null,Ws(p,me,Pe,dt),E&&fc){ne=0;break e}break;default:dt=Ms,Ms=0,Uo=null,Ws(p,me,Pe,dt)}}$s(),ne=Is;break}catch(Pt){rn(p,Pt)}while(!0);return g&&p.shellSuspendCounter++,uc=Lu=null,Yi=C,Xn.H=U,Xn.A=k,Fn===null&&(ds=null,Ii=0,$e()),ne}function $s(){for(;Fn!==null;)Vi(Fn)}function ws(p,g){var E=Yi;Yi|=2;var C=vs(),U=ei();ds!==p||Ii!==g?(B0=null,_g=Xc()+500,_n(p,g)):fc=D(p,g);e:do try{if(Ms!==0&&Fn!==null){g=Fn;var k=Uo;t:switch(Ms){case 1:Ms=0,Uo=null,Ws(p,g,k,1);break;case 2:if($t(k)){Ms=0,Uo=null,Cn(g);break}g=function(){Ms===2&&ds===p&&(Ms=7),ht(p)},k.then(g,g);break e;case 3:Ms=7;break e;case 4:Ms=5;break e;case 7:$t(k)?(Ms=0,Uo=null,Cn(g)):(Ms=0,Uo=null,Ws(p,g,k,7));break;case 5:var ne=null;switch(Fn.tag){case 26:ne=Fn.memoizedState;case 5:case 27:var me=Fn,Pe=me.type,dt=me.pendingProps;if(ne?Cp(ne):z_(Pe,dt)){Ms=0,Uo=null;var Pt=me.sibling;if(Pt!==null)Fn=Pt;else{var Wt=me.return;Wt!==null?(Fn=Wt,vr(Wt)):Fn=null}break t}}Ms=0,Uo=null,Ws(p,g,k,5);break;case 6:Ms=0,Uo=null,Ws(p,g,k,6);break;case 8:zt(),Is=6;break e;default:throw Error(s(462))}}li();break}catch(tn){rn(p,tn)}while(!0);return uc=Lu=null,Xn.H=C,Xn.A=U,Yi=E,Fn!==null?0:(ds=null,Ii=0,$e(),Is)}function li(){for(;Fn!==null&&!cA();)Vi(Fn)}function Vi(p){var g=he(p.alternate,p,Bo);p.memoizedProps=p.pendingProps,g===null?vr(p):Fn=g}function Cn(p){var g=p,E=g.alternate;switch(g.tag){case 15:case 0:g=f0(E,g,g.pendingProps,g.type,void 0,Ii);break;case 11:g=f0(E,g,g.pendingProps,g.type.render,g.ref,Ii);break;case 5:ee(g);default:Ya(E,g),g=Fn=g0(g,Bo),g=he(E,g,Bo)}p.memoizedProps=p.pendingProps,g===null?vr(p):Fn=g}function Ws(p,g,E,C){uc=Lu=null,ee(g),yh=null,vh=0;var U=g.return;try{if(u0(p,U,g,E,Ii)){Is=1,Vc(p,ce(E,p.current)),Fn=null;return}}catch(k){if(U!==null)throw Fn=U,k;Is=1,Vc(p,ce(E,p.current)),Fn=null;return}g.flags&32768?($i||C===1?p=!0:fc||(Ii&536870912)!==0?p=!1:(eu=p=!0,(C===2||C===3||C===6)&&(C=lc.current,C!==null&&C.tag===13&&(C.flags|=16384))),Vr(g,p)):vr(g)}function vr(p){var g=p;do{if((g.flags&32768)!==0){Vr(g,eu);return}p=g.return;var E=kc(g.alternate,g,Bo);if(E!==null){Fn=E;return}if(g=g.sibling,g!==null){Fn=g;return}Fn=g=p}while(g!==null);Is===0&&(Is=5)}function Vr(p,g){do{var E=Zr(p.alternate,p);if(E!==null){E.flags&=32767,Fn=E;return}if(E=p.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!g&&(p=p.sibling,p!==null)){Fn=p;return}Fn=p=E}while(p!==null);Is=6,Fn=null}function qs(p,g,E,C,U,k,ne,me,Pe,dt){var Pt=Xn.T,Wt=pf();try{Lo(2),Xn.T=null,Ba(p,g,E,C,Wt,U,k,ne,me,Pe,dt)}finally{Xn.T=Pt,Lo(Wt)}}function Ba(p,g,E,C,U,k,ne,me){do Oo();while(Rd!==null);if((Yi&6)!==0)throw Error(s(327));var Pe=p.finishedWork;if(C=p.finishedLanes,Pe===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Pe===p.current)throw Error(s(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var dt=Pe.lanes|Pe.childLanes;if(dt|=Pu,Y(p,C,dt,k,ne,me),p===ds&&(Fn=ds=null,Ii=0),(Pe.subtreeFlags&10256)===0&&(Pe.flags&10256)===0||Bu||(Bu=!0,Th=dt,rx=E,rl(Q_,function(){return Oo(),null})),E=(Pe.flags&15990)!==0,(Pe.subtreeFlags&15990)!==0||E?(E=Xn.T,Xn.T=null,k=pf(),Lo(2),ne=Yi,Yi|=4,Ir(p,Pe),po(Pe,p),AM(p.containerInfo),p.current=Pe,tc(p,Pe.alternate,Pe),K_(),Yi=ne,Lo(k),Xn.T=E):p.current=Pe,Bu?(Bu=!1,Rd=p,Hp=C):wu(p,dt),dt=p.pendingLanes,dt===0&&(Sh=null),G(Pe.stateNode),ht(p),g!==null)for(U=p.onRecoverableError,Pe=0;Pe<g.length;Pe++)dt=g[Pe],U(dt.value,{componentStack:dt.stack});return(Hp&3)!==0&&Oo(),dt=p.pendingLanes,(C&4194218)!==0&&(dt&42)!==0?p===ax?xg++:(xg=0,ax=p):xg=0,Bt(0),null}function wu(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,Mn(g)))}function Oo(){if(Rd!==null){var p=Rd,g=Th;Th=0;var E=oe(Hp),C=32>E?32:E;E=Xn.T;var U=pf();try{if(Lo(C),Xn.T=null,Rd===null)var k=!1;else{C=rx,rx=null;var ne=Rd,me=Hp;if(Rd=null,Hp=0,(Yi&6)!==0)throw Error(s(331));var Pe=Yi;if(Yi|=4,Dl(ne.current),ar(ne,ne.current,me,C),Yi=Pe,Bt(0,!1),Ol&&typeof Ol.onPostCommitFiberRoot=="function")try{Ol.onPostCommitFiberRoot(na,ne)}catch{}k=!0}return k}finally{Lo(U),Xn.T=E,wu(p,g)}}return!1}function Pr(p,g,E){g=ce(E,g),g=hd(p.stateNode,g,2),p=Rt(p,g,2),p!==null&&(H(p,2),ht(p))}function In(p,g,E){if(p.tag===3)Pr(p,p,E);else for(;g!==null;){if(g.tag===3){Pr(g,p,E);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Sh===null||!Sh.has(C))){p=ce(E,p),E=sh(2),C=Rt(g,E,2),C!==null&&(C_(E,C,g,p),H(C,2),ht(C));break}}g=g.return}}function Za(p,g,E){var C=p.pingCache;if(C===null){C=p.pingCache=new Jc;var U=new Set;C.set(g,U)}else U=C.get(g),U===void 0&&(U=new Set,C.set(g,U));U.has(E)||(ka=!0,U.add(E),p=wp.bind(null,p,g,E),g.then(p,p))}function wp(p,g,E){var C=p.pingCache;C!==null&&C.delete(g),p.pingedLanes|=p.suspendedLanes&E,p.warmLanes&=~E,ds===p&&(Ii&E)===E&&(Is===4||Is===3&&(Ii&62914560)===Ii&&300>Xc()-ul?(Yi&2)===0&&_n(p,0):U0|=E,Cd===Ii&&(Cd=0)),ht(p)}function Mu(p,g){g===0&&(g=I()),p=We(p,g),p!==null&&(H(p,g),ht(p))}function sl(p){var g=p.memoizedState,E=0;g!==null&&(E=g.retryLane),Mu(p,E)}function Ia(p,g){var E=0;switch(p.tag){case 13:var C=p.stateNode,U=p.memoizedState;U!==null&&(E=U.retryLane);break;case 19:C=p.stateNode;break;case 22:C=p.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(g),Mu(p,E)}function rl(p,g){return N0(p,g)}function oh(p,g,E,C){this.tag=p,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(p){return p=p.prototype,!(!p||!p.isReactComponent)}function jc(p,g){var E=p.alternate;return E===null?(E=t(p.tag,g,p.key,p.mode),E.elementType=p.elementType,E.type=p.type,E.stateNode=p.stateNode,E.alternate=p,p.alternate=E):(E.pendingProps=g,E.type=p.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=p.flags&31457280,E.childLanes=p.childLanes,E.lanes=p.lanes,E.child=p.child,E.memoizedProps=p.memoizedProps,E.memoizedState=p.memoizedState,E.updateQueue=p.updateQueue,g=p.dependencies,E.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},E.sibling=p.sibling,E.index=p.index,E.ref=p.ref,E.refCleanup=p.refCleanup,E}function g0(p,g){p.flags&=31457282;var E=p.alternate;return E===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=E.childLanes,p.lanes=E.lanes,p.child=E.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=E.memoizedProps,p.memoizedState=E.memoizedState,p.updateQueue=E.updateQueue,p.type=E.type,g=E.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function yd(p,g,E,C,U,k){var ne=0;if(C=p,typeof p=="function")Pl(p)&&(ne=1);else if(typeof p=="string")ne=sc&&Ls?A0(p,E,za.current)?26:_d(p)?27:5:sc?A0(p,E,za.current)?26:5:Ls&&_d(p)?27:5;else e:switch(p){case lh:return kr(E.children,U,k,g);case x0:ne=8,U|=24;break;case L_:return p=t(12,E,g,U|2),p.elementType=L_,p.lanes=k,p;case U_:return p=t(13,E,g,U),p.elementType=U_,p.lanes=k,p;case tg:return p=t(19,E,g,U),p.elementType=tg,p.lanes=k,p;case nT:return y0(E,U,k,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case b0:case Au:ne=10;break e;case tT:ne=9;break e;case S0:ne=11;break e;case B_:ne=14;break e;case Wc:ne=16,C=null;break e}ne=29,E=Error(s(130,p===null?"null":typeof p,"")),C=null}return g=t(ne,E,g,U),g.elementType=p,g.type=C,g.lanes=k,g}function kr(p,g,E,C){return p=t(7,p,C,g),p.lanes=E,p}function y0(p,g,E,C){p=t(22,p,C,g),p.elementType=nT,p.lanes=E;var U={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var k=U._current;if(k===null)throw Error(s(456));if((U._pendingVisibility&2)===0){var ne=We(k,2);ne!==null&&(U._pendingVisibility|=2,js(ne,k,2))}},attach:function(){var k=U._current;if(k===null)throw Error(s(456));if((U._pendingVisibility&2)!==0){var ne=We(k,2);ne!==null&&(U._pendingVisibility&=-3,js(ne,k,2))}}};return p.stateNode=U,p}function D_(p,g,E){return p=t(6,p,null,g),p.lanes=E,p}function eT(p,g,E){return g=t(4,p.children!==null?p.children:[],p.key,g),g.lanes=E,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function WD(p,g,E,C,U,k,ne,me){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ch,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=C,this.onUncaughtError=U,this.onCaughtError=k,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function EM(p,g,E,C,U,k,ne,me,Pe,dt,Pt,Wt){return p=new WD(p,g,E,ne,me,Pe,dt,Wt),g=1,k===!0&&(g|=24),k=t(3,null,null,g),p.current=k,k.stateNode=p,g=gt(),g.refCount++,p.pooledCache=g,g.refCount++,k.memoizedState={element:C,isDehydrated:E,cache:g},It(k),p}function xa(p){return p?(p=ph,p):ph}function P_(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return p=v(g),p=p!==null?_(p):null,p===null?null:sg(p.stateNode)}function Qm(p,g,E,C,U,k){U=xa(U),C.context===null?C.context=U:C.pendingContext=U,C=yt(g),C.payload={element:E},k=k===void 0?null:k,k!==null&&(C.callback=k),E=Rt(p,C,g),E!==null&&(js(E,p,g),Xt(E,p,g))}function Jm(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var E=p.retryLane;p.retryLane=E!==0&&E<g?E:g}}function v0(p,g){Jm(p,g),(p=p.alternate)&&Jm(p,g)}var mi={},eg=oS(),ic=aAe(),O_=Object.assign,qD=Symbol.for("react.element"),_0=Symbol.for("react.transitional.element"),$c=Symbol.for("react.portal"),lh=Symbol.for("react.fragment"),x0=Symbol.for("react.strict_mode"),L_=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),tT=Symbol.for("react.consumer"),Au=Symbol.for("react.context"),S0=Symbol.for("react.forward_ref"),U_=Symbol.for("react.suspense"),tg=Symbol.for("react.suspense_list"),B_=Symbol.for("react.memo"),Wc=Symbol.for("react.lazy"),nT=Symbol.for("react.offscreen"),wM=Symbol.for("react.memo_cache_sentinel"),df=Symbol.iterator,iT=Symbol.for("react.client.reference"),Xn=eg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vd,ff,Mp=!1,ng=Array.isArray,sT=e.rendererVersion,T0=e.rendererPackageName,ig=e.extraDevToolsConfig,sg=e.getPublicInstance,MM=e.getRootHostContext,rg=e.getChildHostContext,I_=e.prepareForCommit,AM=e.resetAfterCommit,rT=e.createInstance,E0=e.appendInitialChild,hf=e.finalizeInitialChildren,gi=e.shouldSetTextContent,_s=e.createTextInstance,ba=e.scheduleTimeout,F_=e.cancelTimeout,ch=e.noTimeout,al=e.isPrimaryRenderer;e.warnsIfNotActing;var Fa=e.supportsMutation,qc=e.supportsPersistence,go=e.supportsHydration,CM=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var ea=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Lo=e.setCurrentUpdatePriority,pf=e.getCurrentUpdatePriority,RM=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var NM=e.shouldAttemptEagerTransition,XD=e.detachDeletedInstance;e.requestPostPaintCallback;var aT=e.maySuspendCommit,z_=e.preloadInstance,oT=e.startSuspendingCommit,ol=e.suspendInstance,Sa=e.waitForCommitToBeReady,uh=e.NotPendingTransition,Cu=e.HostTransitionContext,V_=e.resetFormInstance;e.bindToConsole;var lT=e.supportsMicrotasks,mf=e.scheduleMicrotask,dh=e.supportsTestSelectors,cT=e.findFiberRoot,uT=e.getBoundingRect,DM=e.getTextContent,ag=e.isHiddenSubtree,PM=e.matchAccessibilityRole,OM=e.setFocusIfFocusable,LM=e.setupIntersectionObserver,UM=e.appendChild,dT=e.appendChildToContainer,BM=e.commitTextUpdate,YD=e.commitMount,IM=e.commitUpdate,FM=e.insertBefore,zM=e.insertInContainerBefore,fT=e.removeChild,VM=e.removeChildFromContainer,hT=e.resetTextContent,kM=e.hideInstance,GM=e.hideTextInstance,HM=e.unhideInstance,KD=e.unhideTextInstance,jM=e.clearContainer,og=e.cloneInstance,w0=e.createContainerChildSet,pT=e.appendChildToContainerChildSet,k_=e.finalizeContainerChildren,lg=e.replaceContainerChildren,mT=e.cloneHiddenInstance,gT=e.cloneHiddenTextInstance,G_=e.isSuspenseInstancePending,H_=e.isSuspenseInstanceFallback,$M=e.getSuspenseInstanceFallbackErrorDetails,WM=e.registerSuspenseInstanceRetry,yT=e.canHydrateFormStateMarker,qM=e.isFormStateMarkerMatching,vT=e.getNextHydratableSibling,j_=e.getFirstHydratableChild,XM=e.getFirstHydratableChildWithinContainer,YM=e.getFirstHydratableChildWithinSuspenseInstance,ZD=e.canHydrateInstance,_T=e.canHydrateTextInstance,KM=e.canHydrateSuspenseInstance,ZM=e.hydrateInstance,xT=e.hydrateTextInstance,QM=e.hydrateSuspenseInstance,JM=e.getNextHydratableInstanceAfterSuspenseInstance,QD=e.commitHydratedContainer,JD=e.commitHydratedSuspenseInstance,eA=e.clearSuspenseBoundary,M0=e.clearSuspenseBoundaryFromContainer,$_=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var W_=e.validateHydratableInstance,tA=e.validateHydratableTextInstance,sc=e.supportsResources,A0=e.isHostHoistableType,q_=e.getHoistableRoot,bT=e.getResource,nA=e.acquireResource,Ap=e.releaseResource,C0=e.hydrateHoistable,R0=e.mountHoistable,cg=e.unmountHoistable,X_=e.createHoistableInstance,iA=e.prepareToCommitHoistables,sA=e.mayResourceSuspendCommit,Cp=e.preloadResource,rA=e.suspendResource,Ls=e.supportsSingletons,Ru=e.resolveSingletonInstance,fh=e.clearSingleton,aA=e.acquireSingletonInstance,hh=e.releaseSingletonInstance,_d=e.isHostSingletonType,ta=[],gf=-1,ph={},ll=Math.clz32?Math.clz32:M,oA=Math.log,lA=Math.LN2,xd=128,Rp=4194304,N0=ic.unstable_scheduleCallback,Y_=ic.unstable_cancelCallback,cA=ic.unstable_shouldYield,K_=ic.unstable_requestPaint,Xc=ic.unstable_now,Z_=ic.unstable_ImmediatePriority,uA=ic.unstable_UserBlockingPriority,Q_=ic.unstable_NormalPriority,eP=ic.unstable_IdlePriority,dA=ic.log,Qa=ic.unstable_setDisableYieldValue,na=null,Ol=null,Ll=typeof Object.is=="function"?Object.is:$,ST=new WeakMap,Np=[],Dp=0,Pp=null,ug=0,rc=[],ac=0,mh=null,Nu=1,Du="",za=T(null),dg=T(null),bd=T(null),Op=T(null),yo=null,vo=null,$i=!1,Yc=null,Ja=!1,D0=Error(s(519)),Kc=[],Lp=0,Pu=0,P0=null,yf=null,Up=!1,Xs=!1,TT=!1,fg=0,hg=null,Bp=0,oc=0,Ip=null,vf=!1,Fp=!1,Sd=Object.prototype.hasOwnProperty,pg=Error(s(460)),O0=Error(s(474)),L0={then:function(){}},gh=null,yh=null,vh=0,_h=Ur(!0),Td=Ur(!1),Ys=T(null),mg=T(0),lc=T(null),Us=null,Va=T(0),_f=0,xi=null,Ln=null,Xi=null,Zc=!1,zp=!1,xh=!1,J_=0,Vp=0,eo=null,Ou=0,ex=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Gr={readContext:kn,use:Ce,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useLayoutEffect:ms,useInsertionEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useSyncExternalStore:ms,useId:ms};Gr.useCacheRefresh=ms,Gr.useMemoCache=ms,Gr.useHostTransitionStatus=ms,Gr.useFormState=ms,Gr.useActionState=ms,Gr.useOptimistic=ms;var bh={readContext:kn,use:Ce,useCallback:function(p,g){return be().memoizedState=[p,g===void 0?null:g],p},useContext:kn,useEffect:of,useImperativeHandle:function(p,g,E){E=E!=null?E.concat([p]):null,Qf(4194308,4,ai.bind(null,g,p),E)},useLayoutEffect:function(p,g){return Qf(4194308,4,p,g)},useInsertionEffect:function(p,g){Qf(4,2,p,g)},useMemo:function(p,g){var E=be();g=g===void 0?null:g;var C=p();if(xh){K(!0);try{p()}finally{K(!1)}}return E.memoizedState=[C,g],C},useReducer:function(p,g,E){var C=be();if(E!==void 0){var U=E(g);if(xh){K(!0);try{E(g)}finally{K(!1)}}}else U=g;return C.memoizedState=C.baseState=U,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:U},C.queue=p,p=p.dispatch=nh.bind(null,xi,p),[C.memoizedState,p]},useRef:function(p){var g=be();return p={current:p},g.memoizedState=p},useState:function(p){p=Vn(p);var g=p.queue,E=Xm.bind(null,xi,g);return g.dispatch=E,[p.memoizedState,E]},useDebugValue:wl,useDeferredValue:function(p,g){var E=be();return lf(E,p,g)},useTransition:function(){var p=Vn(!1);return p=Ml.bind(null,xi,p.queue,!0,!1),be().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,E){var C=xi,U=be();if($i){if(E===void 0)throw Error(s(407));E=E()}else{if(E=g(),ds===null)throw Error(s(349));(Ii&60)!==0||sn(C,g,E)}U.memoizedState=E;var k={value:E,getSnapshot:g};return U.queue=k,of(Ti.bind(null,C,k,p),[p]),C.flags|=2048,Ai(9,qn.bind(null,C,k,E,g),{destroy:void 0},null),E},useId:function(){var p=be(),g=ds.identifierPrefix;if($i){var E=Du,C=Nu;E=(C&~(1<<32-ll(C)-1)).toString(32)+E,g=":"+g+"R"+E,E=J_++,0<E&&(g+="H"+E.toString(32)),g+=":"}else E=Ou++,g=":"+g+"r"+E.toString(32)+":";return p.memoizedState=g},useCacheRefresh:function(){return be().memoizedState=qm.bind(null,xi)}};bh.useMemoCache=St,bh.useHostTransitionStatus=th,bh.useFormState=Xa,bh.useActionState=Xa,bh.useOptimistic=function(p){var g=be();g.memoizedState=g.baseState=p;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=E,g=Cl.bind(null,xi,!0,E),E.dispatch=g,[p,g]};var cl={readContext:kn,use:Ce,useCallback:dd,useContext:kn,useEffect:Jf,useImperativeHandle:eh,useInsertionEffect:vp,useLayoutEffect:ud,useMemo:fd,useReducer:Yt,useRef:yp,useState:function(){return Yt(Dt)},useDebugValue:wl,useDeferredValue:function(p,g){var E=Ie();return cf(E,Ln.memoizedState,p,g)},useTransition:function(){var p=Yt(Dt)[0],g=Ie().memoizedState;return[typeof p=="boolean"?p:je(p),g]},useSyncExternalStore:Tn,useId:Al};cl.useCacheRefresh=Cr,cl.useMemoCache=St,cl.useHostTransitionStatus=th,cl.useFormState=Kr,cl.useActionState=Kr,cl.useOptimistic=function(p,g){var E=Ie();return xn(E,Ln,p,g)};var cc={readContext:kn,use:Ce,useCallback:dd,useContext:kn,useEffect:Jf,useImperativeHandle:eh,useInsertionEffect:vp,useLayoutEffect:ud,useMemo:fd,useReducer:fn,useRef:yp,useState:function(){return fn(Dt)},useDebugValue:wl,useDeferredValue:function(p,g){var E=Ie();return Ln===null?lf(E,p,g):cf(E,Ln.memoizedState,p,g)},useTransition:function(){var p=fn(Dt)[0],g=Ie().memoizedState;return[typeof p=="boolean"?p:je(p),g]},useSyncExternalStore:Tn,useId:Al};cc.useCacheRefresh=Cr,cc.useMemoCache=St,cc.useHostTransitionStatus=th,cc.useFormState=Vs,cc.useActionState=Vs,cc.useOptimistic=function(p,g){var E=Ie();return Ln!==null?xn(E,Ln,p,g):(E.baseState=p,[p,E.queue.dispatch])};var Ed={isMounted:function(p){return(p=p._reactInternals)?h(p)===p:!1},enqueueSetState:function(p,g,E){p=p._reactInternals;var C=qi(),U=yt(C);U.payload=g,E!=null&&(U.callback=E),g=Rt(p,U,C),g!==null&&(js(g,p,C),Xt(g,p,C))},enqueueReplaceState:function(p,g,E){p=p._reactInternals;var C=qi(),U=yt(C);U.tag=1,U.payload=g,E!=null&&(U.callback=E),g=Rt(p,U,C),g!==null&&(js(g,p,C),Xt(g,p,C))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var E=qi(),C=yt(E);C.tag=2,g!=null&&(C.callback=g),g=Rt(p,C,E),g!==null&&(js(g,p,E),Xt(g,p,E))}},tx=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},nx=Error(s(461)),Bs=!1,ix={dehydrated:null,treeContext:null,retryLane:0},xf=T(null),Lu=null,uc=null,gg=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(E,C){p.push(C)}};this.abort=function(){g.aborted=!0,p.forEach(function(E){return E()})}},fA=ic.unstable_scheduleCallback,hA=ic.unstable_NormalPriority,Ks={$$typeof:Au,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ET=Xn.S;Xn.S=function(p,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&et(p,g),ET!==null&&ET(p,g)};var wd=T(null),Md=!1,Hr=!1,wT=!1,us=typeof WeakSet=="function"?WeakSet:Set,ci=null,Ri=!1,Dn=null,vi=!1,Or=null,dc=8192,yg={getCacheForType:function(p){var g=kn(Ks),E=g.data.get(p);return E===void 0&&(E=p(),g.data.set(p,E)),E}},vg=0,Qc=1,or=2,Uu=3,Ad=4;if(typeof Symbol=="function"&&Symbol.for){var kp=Symbol.for;vg=kp("selector.component"),Qc=kp("selector.has_pseudo_class"),or=kp("selector.role"),Uu=kp("selector.test_id"),Ad=kp("selector.text")}var Jc=typeof WeakMap=="function"?WeakMap:Map,Yi=0,ds=null,Fn=null,Ii=0,Ms=0,Uo=null,eu=!1,fc=!1,ka=!1,Bo=0,Is=0,hc=0,bf=0,U0=0,pc=0,Cd=0,Gp=null,jr=null,sx=!1,ul=0,_g=1/0,B0=null,Sh=null,Bu=!1,Rd=null,Hp=0,Th=0,rx=null,xg=0,ax=null;return mi.attemptContinuousHydration=function(p){if(p.tag===13){var g=We(p,67108864);g!==null&&js(g,p,67108864),v0(p,67108864)}},mi.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=qi(),E=We(p,g);E!==null&&js(E,p,g),v0(p,g)}},mi.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=R(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var E=1<<31-ll(g);p.entanglements[1]|=E,g&=~E}ht(p),(Yi&6)===0&&(_g=Xc()+500,Bt(0))}}break;case 13:g=We(p,2),g!==null&&js(g,p,2),Di(),v0(p,2)}},mi.batchedUpdates=function(p,g){return p(g)},mi.createComponentSelector=function(p){return{$$typeof:vg,value:p}},mi.createContainer=function(p,g,E,C,U,k,ne,me,Pe,dt){return EM(p,g,!1,null,E,C,k,ne,me,Pe,dt,null)},mi.createHasPseudoClassSelector=function(p){return{$$typeof:Qc,value:p}},mi.createHydrationContainer=function(p,g,E,C,U,k,ne,me,Pe,dt,Pt,Wt,tn){return p=EM(E,C,!0,p,U,k,me,Pe,dt,Pt,Wt,tn),p.context=xa(null),E=p.current,C=qi(),U=yt(C),U.callback=g??null,Rt(E,U,C),p.current.lanes=C,H(p,C),ht(p),p},mi.createPortal=function(p,g,E){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$c,key:C==null?null:""+C,children:p,containerInfo:g,implementation:E}},mi.createRoleSelector=function(p){return{$$typeof:or,value:p}},mi.createTestNameSelector=function(p){return{$$typeof:Uu,value:p}},mi.createTextSelector=function(p){return{$$typeof:Ad,value:p}},mi.defaultOnCaughtError=function(p){console.error(p)},mi.defaultOnRecoverableError=function(p){tx(p)},mi.defaultOnUncaughtError=function(p){tx(p)},mi.deferredUpdates=function(p){var g=Xn.T,E=pf();try{return Lo(32),Xn.T=null,p()}finally{Lo(E),Xn.T=g}},mi.discreteUpdates=function(p,g,E,C,U){var k=Xn.T,ne=pf();try{return Lo(2),Xn.T=null,p(g,E,C,U)}finally{Lo(ne),Xn.T=k,Yi===0&&(_g=Xc()+500)}},mi.findAllNodes=mo,mi.findBoundingRects=function(p,g){if(!dh)throw Error(s(363));g=mo(p,g),p=[];for(var E=0;E<g.length;E++)p.push(uT(g[E]));for(g=p.length-1;0<g;g--){E=p[g];for(var C=E.x,U=C+E.width,k=E.y,ne=k+E.height,me=g-1;0<=me;me--)if(g!==me){var Pe=p[me],dt=Pe.x,Pt=dt+Pe.width,Wt=Pe.y,tn=Wt+Pe.height;if(C>=dt&&k>=Wt&&U<=Pt&&ne<=tn){p.splice(g,1);break}else if(C!==dt||E.width!==Pe.width||tn<k||Wt>ne){if(!(k!==Wt||E.height!==Pe.height||Pt<C||dt>U)){dt>C&&(Pe.width+=dt-C,Pe.x=C),Pt<U&&(Pe.width=U-dt),p.splice(g,1);break}}else{Wt>k&&(Pe.height+=Wt-k,Pe.y=k),tn<ne&&(Pe.height=ne-Wt),p.splice(g,1);break}}}return p},mi.findHostInstance=P_,mi.findHostInstanceWithNoPortals=function(p){return p=v(p),p=p!==null?x(p):null,p===null?null:sg(p.stateNode)},mi.findHostInstanceWithWarning=function(p){return P_(p)},mi.flushPassiveEffects=Oo,mi.flushSyncFromReconciler=function(p){var g=Yi;Yi|=1;var E=Xn.T,C=pf();try{if(Lo(2),Xn.T=null,p)return p()}finally{Lo(C),Xn.T=E,Yi=g,(Yi&6)===0&&Bt(0)}},mi.flushSyncWork=Di,mi.focusWithin=function(p,g){if(!dh)throw Error(s(363));for(p=el(p),g=zr(p,g),g=Array.from(g),p=0;p<g.length;){var E=g[p++],C=E.tag;if(!ag(E)){if((C===5||C===26||C===27)&&OM(E.stateNode))return!0;for(E=E.child;E!==null;)g.push(E),E=E.sibling}}return!1},mi.getFindAllNodesFailureDescription=function(p,g){if(!dh)throw Error(s(363));var E=0,C=[];p=[el(p),0];for(var U=0;U<p.length;){var k=p[U++],ne=k.tag,me=p[U++],Pe=g[me];if((ne!==5&&ne!==26&&ne!==27||!ag(k))&&(Po(k,Pe)&&(C.push(yi(Pe)),me++,me>E&&(E=me)),me<g.length))for(k=k.child;k!==null;)p.push(k,me),k=k.sibling}if(E<g.length){for(p=[];E<g.length;E++)p.push(yi(g[E]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},mi.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return sg(p.child.stateNode);default:return p.child.stateNode}},mi.injectIntoDevTools=function(){var p={bundleType:0,version:sT,rendererPackageName:T0,currentDispatcherRef:Xn,findFiberByHostInstance:CM,reconcilerVersion:"19.0.0"};if(ig!==null&&(p.rendererConfig=ig),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{na=g.inject(p),Ol=g}catch{}p=!!g.checkDCE}}return p},mi.isAlreadyRendering=function(){return!1},mi.observeVisibleRects=function(p,g,E,C){if(!dh)throw Error(s(363));p=mo(p,g);var U=LM(p,E,C).disconnect;return{disconnect:function(){U()}}},mi.shouldError=function(){return null},mi.shouldSuspend=function(){return!1},mi.startHostTransition=function(p,g,E,C){if(p.tag!==5)throw Error(s(476));var U=zc(p).queue;Ml(p,U,g,uh,E===null?n:function(){var k=zc(p).next.queue;return pr(p,k,{},qi()),E(C)})},mi.updateContainer=function(p,g,E,C){var U=g.current,k=qi();return Qm(U,k,p,g,E,C),k},mi.updateContainerSync=function(p,g,E,C){return g.tag===0&&Oo(),Qm(g.current,2,p,g,E,C),2},mi},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(SL)),SL.exports}var T8;function lAe(){return T8||(T8=1,bL.exports=oAe()),bL.exports}var cAe=lAe();const uAe=dp(cAe);var wL={exports:{}},ML={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E8;function dAe(){return E8||(E8=1,(function(i){function e(G,K){var $=G.length;G.push(K);e:for(;0<$;){var ce=$-1>>>1,q=G[ce];if(0<s(q,K))G[ce]=K,G[$]=q,$=ce;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var K=G[0],$=G.pop();if($!==K){G[0]=$;e:for(var ce=0,q=G.length,ue=q>>>1;ce<ue;){var Ae=2*(ce+1)-1,Ne=G[Ae],we=Ae+1,pt=G[we];if(0>s(Ne,$))we<q&&0>s(pt,Ne)?(G[ce]=pt,G[we]=$,ce=we):(G[ce]=Ne,G[Ae]=$,ce=Ae);else if(we<q&&0>s(pt,$))G[ce]=pt,G[we]=$,ce=we;else break e}}return K}function s(G,K){var $=G.sortIndex-K.sortIndex;return $!==0?$:G.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,m=3,v=!1,_=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var K=t(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=G)n(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(c)}}function R(G){if(x=!1,M(G),!_)if(t(l)!==null)_=!0,se();else{var K=t(c);K!==null&&oe(R,K.startTime-G)}}var N=!1,D=-1,L=5,F=-1;function I(){return!(i.unstable_now()-F<L)}function z(){if(N){var G=i.unstable_now();F=G;var K=!0;try{e:{_=!1,x&&(x=!1,b(D),D=-1),v=!0;var $=m;try{t:{for(M(G),h=t(l);h!==null&&!(h.expirationTime>G&&I());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,m=h.priorityLevel;var q=ce(h.expirationTime<=G);if(G=i.unstable_now(),typeof q=="function"){h.callback=q,M(G),K=!0;break t}h===t(l)&&n(l),M(G)}else n(l);h=t(l)}if(h!==null)K=!0;else{var ue=t(c);ue!==null&&oe(R,ue.startTime-G),K=!1}}break e}finally{h=null,m=$,v=!1}K=void 0}}finally{K?H():N=!1}}}var H;if(typeof w=="function")H=function(){w(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=z,H=function(){Z.postMessage(null)}}else H=function(){T(z,0)};function se(){N||(N=!0,H())}function oe(G,K){D=T(function(){G(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){_||v||(_=!0,se())},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(G){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var $=m;m=K;try{return G()}finally{m=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var $=m;m=G;try{return K()}finally{m=$}},i.unstable_scheduleCallback=function(G,K,$){var ce=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ce+$:ce):$=ce,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=$+q,G={id:d++,callback:K,priorityLevel:G,startTime:$,expirationTime:q,sortIndex:-1},$>ce?(G.sortIndex=$,e(c,G),t(l)===null&&G===t(c)&&(x?(b(D),D=-1):x=!0,oe(R,$-ce))):(G.sortIndex=q,e(l,G),_||v||(_=!0,se())),G},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(G){var K=m;return function(){var $=m;m=K;try{return G.apply(this,arguments)}finally{m=$}}}})(ML)),ML}var w8;function fAe(){return w8||(w8=1,wL.exports=dAe()),wL.exports}var M8=fAe();function bz(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=bz(n,e,t);if(s)return s;n=e?null:n.sibling}}function xZ(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const Sz=xZ(P.createContext(null));class bZ extends P.Component{render(){return P.createElement(Sz.Provider,{value:this._reactInternals},this.props.children)}}function SZ(){const i=P.useContext(Sz);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=P.useId();return P.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=bz(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const hAe=Symbol.for("react.context"),pAe=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===hAe;function mAe(){const i=SZ(),[e]=P.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;pAe(n)&&n!==Sz&&!e.has(n)&&e.set(n,P.use(xZ(n))),t=t.return}return e}function gAe(){const i=mAe();return P.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>P.createElement(e,null,P.createElement(t.Provider,{...n,value:i.get(t)})),e=>P.createElement(bZ,{...e})),[i])}function TZ(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const EZ=i=>i&&i.isOrthographicCamera,yAe=i=>i&&i.hasOwnProperty("current"),vAe=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),rM=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?P.useLayoutEffect:P.useEffect;function wZ(i){const e=P.useRef(i);return rM(()=>void(e.current=i),[i]),e}function _Ae(){const i=SZ(),e=gAe();return P.useMemo(()=>({children:t})=>{const s=!!bz(i,!0,r=>r.type===P.StrictMode)?P.StrictMode:P.Fragment;return B.jsx(s,{children:B.jsx(e,{children:t})})},[i,e])}function xAe({set:i}){return rM(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const bAe=(i=>(i=class extends P.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function MZ(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function kx(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const $r={obj:i=>i===Object(i)&&!$r.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if($r.str(i)||$r.num(i)||$r.boo(i))return i===e;const r=$r.obj(i);if(r&&n==="reference")return i===e;const a=$r.arr(i);if(a&&t==="reference")return i===e;if((a||r)&&i===e)return!0;let o;for(o in i)if(!(o in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(o in s?e:i)if(!$r.equ(i[o],e[o],{strict:s,objects:"reference"}))return!1}else for(o in s?e:i)if(i[o]!==e[o])return!1;if($r.und(o)){if(a&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function SAe(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function TAe(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const AZ=["children","key","ref"];function EAe(i){const e={};for(const t in i)AZ.includes(t)||(e[t]=i[t]);return e}function bN(i,e,t,n){const s=i;let r=s?.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:EAe(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function BE(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const A8=/-\d+$/;function SN(i,e){if($r.str(e.props.attach)){if(A8.test(e.props.attach)){const s=e.props.attach.replace(A8,""),{root:r,key:a}=BE(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:t,key:n}=BE(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else $r.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function TN(i,e){if($r.str(e.props.attach)){const{root:t,key:n}=BE(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const Z3=[...AZ,"args","dispose","attach","object","onUpdate","dispose"],C8=new Map;function wAe(i){let e=C8.get(i.constructor);try{e||(e=new i.constructor,C8.set(i.constructor,e))}catch{}return e}function MAe(i,e){const t={};for(const n in e)if(!Z3.includes(n)&&!$r.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(Z3.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:r}=BE(i.object,n);if(s.constructor&&s.constructor.length===0){const a=wAe(s);$r.und(a)||(t[r]=a[r])}else t[r]=0}return t}const AAe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],CAe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Hg(i,e){var t;const n=i.__r3f,s=n&&TZ(n).getState(),r=n?.eventCount;for(const o in e){let l=e[o];if(Z3.includes(o))continue;if(n&&CAe.test(o)){typeof l=="function"?n.handlers[o]=l:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(l===void 0)continue;let{root:c,key:d,target:h}=BE(i,o);if(h instanceof l_&&l instanceof l_)h.mask=l.mask;else if(h instanceof Vt&&vAe(l))h.set(l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&typeof h.copy=="function"&&l!=null&&l.constructor&&h.constructor===l.constructor)h.copy(l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&Array.isArray(l))typeof h.fromArray=="function"?h.fromArray(l):h.set(...l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&typeof l=="number")typeof h.setScalar=="function"?h.setScalar(l):h.set(l);else{var a;c[d]=l,s&&!s.linear&&AAe.includes(d)&&(a=c[d])!=null&&a.isTexture&&c[d].format===nr&&c[d].type===Tr&&(c[d].colorSpace=ao)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const o=n.object,l=s.internal.interaction.indexOf(o);l>-1&&s.internal.interaction.splice(l,1),n.eventCount&&o.raycast!==null&&s.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&GS(n),i}function GS(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function RAe(i,e){i.manual||(EZ(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const bc=i=>i?.isObject3D;function IC(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function CZ(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function NAe(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{CZ(t.capturedMap,e,n,s)})}function DAe(i){function e(l){const{internal:c}=i.getState(),d=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function n(l,c){const d=i.getState(),h=new Set,m=[],v=c?c(d.internal.interaction):d.internal.interaction;for(let b=0;b<v.length;b++){const w=kx(v[b]);w&&(w.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function _(b){const w=kx(b);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var M;w.events.compute==null||w.events.compute(l,w,(M=w.previousRoot)==null?void 0:M.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(b,!0):[]}let x=v.flatMap(_).sort((b,w)=>{const M=kx(b.object),R=kx(w.object);return!M||!R?b.distance-w.distance:R.events.priority-M.events.priority||b.distance-w.distance}).filter(b=>{const w=IC(b);return h.has(w)?!1:(h.add(w),!0)});d.events.filter&&(x=d.events.filter(x,d));for(const b of x){let w=b.object;for(;w;){var T;(T=w.__r3f)!=null&&T.eventCount&&m.push({...b,eventObject:w}),w=w.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let b of d.internal.capturedMap.get(l.pointerId).values())h.has(IC(b.intersection))||m.push(b.intersection);return m}function s(l,c,d,h){if(l.length){const m={stopped:!1};for(const v of l){let _=kx(v.object);if(_||v.object.traverseAncestors(x=>{const T=kx(x);if(T)return _=T,!1}),_){const{raycaster:x,pointer:T,camera:b,internal:w}=_,M=new ae(T.x,T.y,0).unproject(b),R=I=>{var z,H;return(z=(H=w.capturedMap.get(I))==null?void 0:H.has(v.eventObject))!=null?z:!1},N=I=>{const z={intersection:v,target:c.target};w.capturedMap.has(I)?w.capturedMap.get(I).set(v.eventObject,z):w.capturedMap.set(I,new Map([[v.eventObject,z]])),c.target.setPointerCapture(I)},D=I=>{const z=w.capturedMap.get(I);z&&CZ(w.capturedMap,v.eventObject,z,I)};let L={};for(let I in c){let z=c[I];typeof z!="function"&&(L[I]=z)}let F={...v,...L,pointer:T,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:M,ray:x.ray,camera:b,stopPropagation(){const I="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!I||I.has(v.eventObject))&&(F.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(z=>z.eventObject===v.eventObject))){const z=l.slice(0,l.indexOf(v));r([...z,v])}},target:{hasPointerCapture:R,setPointerCapture:N,releasePointerCapture:D},currentTarget:{hasPointerCapture:R,setPointerCapture:N,releasePointerCapture:D},nativeEvent:c};if(h(F),m.stopped===!0)break}}}return l}function r(l){const{internal:c}=i.getState();for(const d of c.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const m=d.eventObject.__r3f;if(c.hovered.delete(IC(d)),m!=null&&m.eventCount){const v=m.handlers,_={...d,intersections:l};v.onPointerOut==null||v.onPointerOut(_),v.onPointerLeave==null||v.onPointerLeave(_)}}}function a(l,c){for(let d=0;d<c.length;d++){const h=c[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return c=>{const{internal:d}=i.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),r([]))})}}return function(d){const{onPointerMissed:h,internal:m}=i.getState();m.lastEvent.current=d;const v=l==="onPointerMove",_=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",T=n(d,v?t:void 0),b=_?e(d):0;l==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=T.map(M=>M.eventObject)),_&&!T.length&&b<=2&&(a(d,m.interaction),h&&h(d)),v&&r(T);function w(M){const R=M.eventObject,N=R.__r3f;if(!(N!=null&&N.eventCount))return;const D=N.handlers;if(v){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const L=IC(M),F=m.hovered.get(L);F?F.stopped&&M.stopPropagation():(m.hovered.set(L,M),D.onPointerOver==null||D.onPointerOver(M),D.onPointerEnter==null||D.onPointerEnter(M))}D.onPointerMove==null||D.onPointerMove(M)}else{const L=D[l];L?(!_||m.initialHits.includes(R))&&(a(d,m.interaction.filter(F=>!m.initialHits.includes(F))),L(M)):_&&m.initialHits.includes(R)&&a(d,m.interaction.filter(F=>!m.initialHits.includes(F)))}}s(T,d,b,w)}}return{handlePointer:o}}const R8=i=>!!(i!=null&&i.render),RZ=P.createContext(null),PAe=(i,e)=>{const t=eAe((o,l)=>{const c=new ae,d=new ae,h=new ae;function m(b=l().camera,w=d,M=l().size){const{width:R,height:N,top:D,left:L}=M,F=R/N;w.isVector3?h.copy(w):h.set(...w);const I=b.getWorldPosition(c).distanceTo(h);if(EZ(b))return{width:R/b.zoom,height:N/b.zoom,top:D,left:L,factor:1,distance:I,aspect:F};{const z=b.fov*Math.PI/180,H=2*Math.tan(z/2)*I,Y=H*(R/N);return{width:Y,height:H,top:D,left:L,factor:R/Y,distance:I,aspect:F}}}let v;const _=b=>o(w=>({performance:{...w.performance,current:b}})),x=new lt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(b=1)=>i(l(),b),advance:(b,w)=>e(b,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new iD,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=l();v&&clearTimeout(v),b.performance.current!==b.performance.min&&_(b.performance.min),v=setTimeout(()=>_(l().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:b=>o(w=>({...w,events:{...w.events,...b}})),setSize:(b,w,M=0,R=0)=>{const N=l().camera,D={width:b,height:w,top:M,left:R};o(L=>({size:D,viewport:{...L.viewport,...m(N,d,D)}}))},setDpr:b=>o(w=>{const M=MZ(b);return{viewport:{...w.viewport,dpr:M,initialDpr:w.viewport.initialDpr||M}}}),setFrameloop:(b="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,b!=="never"&&(w.start(),w.elapsedTime=0),o(()=>({frameloop:b}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:P.createRef(),active:!1,frames:0,priority:0,subscribe:(b,w,M)=>{const R=l().internal;return R.priority=R.priority+(w>0?1:0),R.subscribers.push({ref:b,priority:w,store:M}),R.subscribers=R.subscribers.sort((N,D)=>N.priority-D.priority),()=>{const N=l().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(w>0?1:0),N.subscribers=N.subscribers.filter(D=>D.ref!==b))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:d,set:h}=t.getState();if(l.width!==s.width||l.height!==s.height||c.dpr!==r){s=l,r=c.dpr,RAe(o,l),c.dpr>0&&d.setPixelRatio(c.dpr);const m=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}o!==a&&(a=o,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>i(o)),t};function NZ(){const i=P.useContext(RZ);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Ih(i=t=>t,e){return NZ()(i,e)}function DZ(i,e=0){const t=NZ(),n=t.getState().internal.subscribe,s=wZ(i);return rM(()=>n(s,e,t),[e,n,t]),null}const N8=new WeakMap,OAe=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function PZ(i,e){return function(t,...n){let s;return OAe(t)?(s=N8.get(t),s||(s=new t,N8.set(t,s))):s=t,i&&i(s),Promise.all(n.map(r=>new Promise((a,o)=>s.load(r,l=>{bc(l?.scene)&&Object.assign(l,SAe(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${r}: ${l?.message}`))))))}}function aM(i,e,t,n){const s=Array.isArray(e)?e:[e],r=nAe(PZ(t,n),[i,...s],{equal:$r.equ});return Array.isArray(e)?r:r[0]}aM.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return iAe(PZ(t),[i,...n])};aM.clear=function(i,e){const t=Array.isArray(e)?e:[e];return sAe([i,...t])};function LAe(i){const e=uAe(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version}),e}const OZ=0,Qb={},UAe=/^three(?=[A-Z])/,aD=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let BAe=0;const IAe=i=>typeof i=="function";function Tz(i){if(IAe(i)){const e=`${BAe++}`;return Qb[e]=i,e}else Object.assign(Qb,i)}function LZ(i,e){const t=aD(i),n=Qb[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function FAe(i,e,t){var n;return i=aD(i)in Qb?i:i.replace(UAe,""),LZ(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,bN(e.object,t,i,e)}function zAe(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?TN(i.parent,i):bc(i.object)&&(i.object.visible=!1),i.isHidden=!0,GS(i)}}function UZ(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?SN(i.parent,i):bc(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,GS(i)}}function Ez(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,r;const a=Qb[aD(e.type)];e.object=(s=e.props.object)!=null?s:new a(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(Hg(e.object,e.props),e.props.attach)SN(i,e);else if(bc(e.object)&&bc(i.object)){const a=i.object.children.indexOf(t?.object);if(t&&a!==-1){const o=i.object.children.indexOf(e.object);if(o!==-1){i.object.children.splice(o,1);const l=o<a?a-1:a;i.object.children.splice(l,0,e.object)}else e.object.parent=i.object,i.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const a of e.children)Ez(e,a);GS(e)}}function AL(i,e){e&&(e.parent=i,i.children.push(e),Ez(i,e))}function D8(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),Ez(i,e,t)}function BZ(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():M8.unstable_scheduleCallback(M8.unstable_IdlePriority,e)}}function Q3(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?TN(i,e):bc(e.object)&&bc(i.object)&&(i.object.remove(e.object),NAe(TZ(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const a=e.children[r];Q3(e,a,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&BZ(e.object),t===void 0&&GS(e)}function VAe(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const AR=[];function kAe(){for(const[t]of AR){const n=t.parent;if(n){t.props.attach?TN(n,t):bc(t.object)&&bc(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?TN(t,s):bc(s.object)&&bc(t.object)&&t.object.remove(s.object)}t.isHidden&&UZ(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&BZ(t.object)}for(const[t,n,s]of AR){t.props=n;const r=t.parent;if(r){var i,e;const a=Qb[aD(t.type)];t.object=(i=t.props.object)!=null?i:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,VAe(s,t.object),Hg(t.object,t.props),t.props.attach?SN(r,t):bc(t.object)&&bc(r.object)&&r.object.add(t.object);for(const o of t.children)o.props.attach?SN(t,o):bc(o.object)&&bc(t.object)&&t.object.add(o.object);GS(t)}}AR.length=0}const CL=()=>{},P8={};let FC=OZ;const GAe=0,HAe=4,J3=LAe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:FAe,removeChild:Q3,appendChild:AL,appendInitialChild:AL,insertBefore:D8,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||AL(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||Q3(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||D8(n,e,t)},getRootHostContext:()=>P8,getChildHostContext:()=>P8,commitUpdate(i,e,t,n,s){var r,a,o;LZ(e,n);let l=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=t.args)==null?void 0:a.length)||(o=n.args)!=null&&o.some((d,h)=>{var m;return d!==((m=t.args)==null?void 0:m[h])}))&&(l=!0),l)AR.push([i,{...n},s]);else{const d=MAe(i,n);Object.keys(d).length&&(Object.assign(i.props,d),Hg(i.object,d))}(s.sibling===null||(s.flags&HAe)===GAe)&&kAe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>bN(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:zAe,unhideInstance:UZ,createTextInstance:CL,hideTextInstance:CL,unhideTextInstance:CL,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:P.createContext(null),setCurrentUpdatePriority(i){FC=i},getCurrentUpdatePriority(){return FC},resolveUpdatePriority(){var i;if(FC!==OZ)return FC;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return MR.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return MR.ContinuousEventPriority;default:return MR.DefaultEventPriority}},resetFormInstance(){}}),u_=new Map,Gx={objects:"shallow",strict:!1};function jAe(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function $Ae(i){const e=u_.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||PAe(nB,L8),a=t||J3.createContainer(r,MR.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||u_.set(i,{fiber:a,store:r});let o,l,c=!1,d=null;return{async configure(h={}){let m;d=new Promise(ue=>m=ue);let{gl:v,size:_,scene:x,events:T,onCreated:b,shadows:w=!1,linear:M=!1,flat:R=!1,legacy:N=!1,orthographic:D=!1,frameloop:L="always",dpr:F=[1,2],performance:I,raycaster:z,camera:H,onPointerMissed:Y}=h,Z=r.getState(),se=Z.gl;if(!Z.gl){const ue={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},Ae=typeof v=="function"?await v(ue):v;R8(Ae)?se=Ae:se=new yZ({...ue,...v}),Z.set({gl:se})}let oe=Z.raycaster;oe||Z.set({raycaster:oe=new sD});const{params:G,...K}=z||{};if($r.equ(K,oe,Gx)||Hg(oe,{...K}),$r.equ(G,oe.params,Gx)||Hg(oe,{params:{...oe.params,...G}}),!Z.camera||Z.camera===l&&!$r.equ(l,H,Gx)){l=H;const ue=H?.isCamera,Ae=ue?H:D?new e0(0,0,0,0,.1,1e3):new la(75,0,.1,1e3);ue||(Ae.position.z=5,H&&(Hg(Ae,H),Ae.manual||("aspect"in H||"left"in H||"right"in H||"bottom"in H||"top"in H)&&(Ae.manual=!0,Ae.updateProjectionMatrix())),!Z.camera&&!(H!=null&&H.rotation)&&Ae.lookAt(0,0,0)),Z.set({camera:Ae}),oe.camera=Ae}if(!Z.scene){let ue;x!=null&&x.isScene?(ue=x,bN(ue,r,"",{})):(ue=new E_,bN(ue,r,"",{}),x&&Hg(ue,x)),Z.set({scene:ue})}T&&!Z.events.handlers&&Z.set({events:T(r)});const $=jAe(i,_);if($r.equ($,Z.size,Gx)||Z.setSize($.width,$.height,$.top,$.left),F&&Z.viewport.dpr!==MZ(F)&&Z.setDpr(F),Z.frameloop!==L&&Z.setFrameloop(L),Z.onPointerMissed||Z.set({onPointerMissed:Y}),I&&!$r.equ(I,Z.performance,Gx)&&Z.set(ue=>({performance:{...ue.performance,...I}})),!Z.xr){var ce;const ue=(we,pt)=>{const Ee=r.getState();Ee.frameloop!=="never"&&L8(we,!0,Ee,pt)},Ae=()=>{const we=r.getState();we.gl.xr.enabled=we.gl.xr.isPresenting,we.gl.xr.setAnimationLoop(we.gl.xr.isPresenting?ue:null),we.gl.xr.isPresenting||nB(we)},Ne={connect(){const we=r.getState().gl;we.xr.addEventListener("sessionstart",Ae),we.xr.addEventListener("sessionend",Ae)},disconnect(){const we=r.getState().gl;we.xr.removeEventListener("sessionstart",Ae),we.xr.removeEventListener("sessionend",Ae)}};typeof((ce=se.xr)==null?void 0:ce.addEventListener)=="function"&&Ne.connect(),Z.set({xr:Ne})}if(se.shadowMap){const ue=se.shadowMap.enabled,Ae=se.shadowMap.type;if(se.shadowMap.enabled=!!w,$r.boo(w))se.shadowMap.type=Mb;else if($r.str(w)){var q;const Ne={basic:h2,percentage:bS,soft:Mb,variance:zl};se.shadowMap.type=(q=Ne[w])!=null?q:Mb}else $r.obj(w)&&Object.assign(se.shadowMap,w);(ue!==se.shadowMap.enabled||Ae!==se.shadowMap.type)&&(se.shadowMap.needsUpdate=!0)}return Sn.enabled=!N,c||(se.outputColorSpace=M?Hf:ao,se.toneMapping=R?bo:ww),Z.legacy!==N&&Z.set(()=>({legacy:N})),Z.linear!==M&&Z.set(()=>({linear:M})),Z.flat!==R&&Z.set(()=>({flat:R})),v&&!$r.fun(v)&&!R8(v)&&!$r.equ(v,se,Gx)&&Hg(se,v),o=b,c=!0,m(),this},render(h){return!c&&!d&&this.configure(),d.then(()=>{J3.updateContainer(B.jsx(WAe,{store:r,children:h,onCreated:o,rootElement:i}),a,null,()=>{})}),r},unmount(){IZ(i)}}}function WAe({store:i,children:e,onCreated:t,rootElement:n}){return rM(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),B.jsx(RZ.Provider,{value:i,children:e})}function IZ(i,e){const t=u_.get(i),n=t?.fiber;if(n){const s=t?.store.getState();s&&(s.internal.active=!1),J3.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,o,l;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(o=s.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=s.gl)!=null&&l.xr&&s.xr.disconnect(),TAe(s.scene),u_.delete(i)}catch{}},500)})}}const qAe=new Set,XAe=new Set,YAe=new Set;function RL(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Y1(i,e){switch(i){case"before":return RL(qAe,e);case"after":return RL(XAe,e);case"tail":return RL(YAe,e)}}let NL,DL;function eB(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),NL=e.internal.subscribers;for(let s=0;s<NL.length;s++)DL=NL[s],DL.ref.current(DL.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let EN=!1,tB=!1,PL,O8,Hx;function FZ(i){O8=requestAnimationFrame(FZ),EN=!0,PL=0,Y1("before",i),tB=!0;for(const t of u_.values()){var e;Hx=t.store.getState(),Hx.internal.active&&(Hx.frameloop==="always"||Hx.internal.frames>0)&&!((e=Hx.gl.xr)!=null&&e.isPresenting)&&(PL+=eB(i,Hx))}if(tB=!1,Y1("after",i),PL===0)return Y1("tail",i),EN=!1,cancelAnimationFrame(O8)}function nB(i,e=1){var t;if(!i)return u_.forEach(n=>nB(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):tB?i.internal.frames=2:i.internal.frames=1,EN||(EN=!0,requestAnimationFrame(FZ)))}function L8(i,e=!0,t,n){if(e&&Y1("before",i),t)eB(i,t,n);else for(const s of u_.values())eB(i,s.store.getState());e&&Y1("after",i)}const OL={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function KAe(i){const{handlePointer:e}=DAe(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(OL).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[o,l]=OL[r];t.addEventListener(o,a,{passive:l})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=OL[s];n.connected.removeEventListener(a,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function U8(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function ZAe({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=P.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=P.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,c=i?typeof i=="number"?i:i.resize:null,d=P.useRef(!1);P.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[h,m,v]=P.useMemo(()=>{const b=()=>{if(!o.current.element)return;const{left:w,top:M,width:R,height:N,bottom:D,right:L,x:F,y:I}=o.current.element.getBoundingClientRect(),z={left:w,top:M,width:R,height:N,bottom:D,right:L,x:F,y:I};o.current.element instanceof HTMLElement&&n&&(z.height=o.current.element.offsetHeight,z.width=o.current.element.offsetWidth),Object.freeze(z),d.current&&!tCe(o.current.lastBounds,z)&&a(o.current.lastBounds=z)};return[b,c?U8(b,c):b,l?U8(b,l):b]},[a,n,l,c]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",v,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function x(){o.current.element&&(o.current.resizeObserver=new s(v),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(b=>b.addEventListener("scroll",v,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const T=b=>{!b||b===o.current.element||(_(),o.current.element=b,o.current.scrollContainers=zZ(b),x())};return JAe(v,!!e),QAe(m),P.useEffect(()=>{_(),x()},[e,v,m]),P.useEffect(()=>_,[]),[T,r,h]}function QAe(i){P.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function JAe(i,e){P.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function zZ(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...zZ(i.parentElement)]}const eCe=["x","y","top","bottom","left","right","width","height"],tCe=(i,e)=>eCe.every(t=>i[t]===e[t]);function nCe({ref:i,children:e,fallback:t,resize:n,style:s,gl:r,events:a=KAe,eventSource:o,eventPrefix:l,shadows:c,linear:d,flat:h,legacy:m,orthographic:v,frameloop:_,dpr:x,performance:T,raycaster:b,camera:w,scene:M,onPointerMissed:R,onCreated:N,...D}){P.useMemo(()=>Tz(HMe),[]);const L=_Ae(),[F,I]=ZAe({scroll:!0,debounce:{scroll:50,resize:0},...n}),z=P.useRef(null),H=P.useRef(null);P.useImperativeHandle(i,()=>z.current);const Y=wZ(R),[Z,se]=P.useState(!1),[oe,G]=P.useState(!1);if(Z)throw Z;if(oe)throw oe;const K=P.useRef(null);rM(()=>{const ce=z.current;if(I.width>0&&I.height>0&&ce){K.current||(K.current=$Ae(ce));async function q(){await K.current.configure({gl:r,scene:M,events:a,shadows:c,linear:d,flat:h,legacy:m,orthographic:v,frameloop:_,dpr:x,performance:T,raycaster:b,camera:w,size:I,onPointerMissed:(...ue)=>Y.current==null?void 0:Y.current(...ue),onCreated:ue=>{ue.events.connect==null||ue.events.connect(o?yAe(o)?o.current:o:H.current),l&&ue.setEvents({compute:(Ae,Ne)=>{const we=Ae[l+"X"],pt=Ae[l+"Y"];Ne.pointer.set(we/Ne.size.width*2-1,-(pt/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),N?.(ue)}}),K.current.render(B.jsx(L,{children:B.jsx(bAe,{set:G,children:B.jsx(P.Suspense,{fallback:B.jsx(xAe,{set:se}),children:e??null})})}))}q()}}),P.useEffect(()=>{const ce=z.current;if(ce)return()=>IZ(ce)},[]);const $=o?"none":"auto";return B.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...s},...D,children:B.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:B.jsx("canvas",{ref:z,style:{display:"block"},children:t})})})}function iCe(i){return B.jsx(bZ,{children:B.jsx(nCe,{...i})})}const LL=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function wz(i,e){const t=Ih(r=>r.gl),n=aM(sM,LL(i)?Object.values(i):i);return P.useLayoutEffect(()=>{e?.(n)},[e]),P.useEffect(()=>{if("initTexture"in t){let r=[];Array.isArray(n)?r=n:n instanceof Es?r=[n]:LL(n)&&(r=Object.values(n)),r.forEach(a=>{a instanceof Es&&t.initTexture(a)})}},[t,n]),P.useMemo(()=>{if(LL(i)){const r={};let a=0;for(const o in i)r[o]=n[a++];return r}else return n},[i,n])}wz.preload=i=>aM.preload(sM,i);wz.clear=i=>aM.clear(sM,i);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const sa={LEFT:1,RIGHT:2,MIDDLE:4},Ye=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),jx={NONE:0,IN:1,OUT:-1};function nv(i){return i.isPerspectiveCamera}function Vg(i){return i.isOrthographicCamera}const Ug=Math.PI*2,B8=Math.PI/2,VZ=1e-5,i1=Math.PI/180;function Af(i,e,t){return Math.max(e,Math.min(t,i))}function xr(i,e=VZ){return Math.abs(i)<e}function As(i,e,t=VZ){return xr(i-e,t)}function I8(i,e){return Math.round(i/e)*e}function s1(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function r1(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function zC(i,e,t,n,s=1/0,r){n=Math.max(1e-4,n);const a=2/n,o=a*r,l=1/(1+o+.48*o*o+.235*o*o*o);let c=i-e;const d=e,h=s*n;c=Af(c,-h,h),e=i-c;const m=(t.value+a*c)*r;t.value=(t.value-a*m)*l;let v=e+(c+m)*l;return d-i>0==v>d&&(v=d,t.value=(v-d)/r),v}function F8(i,e,t,n,s=1/0,r,a){n=Math.max(1e-4,n);const o=2/n,l=o*r,c=1/(1+l+.48*l*l+.235*l*l*l);let d=e.x,h=e.y,m=e.z,v=i.x-d,_=i.y-h,x=i.z-m;const T=d,b=h,w=m,M=s*n,R=M*M,N=v*v+_*_+x*x;if(N>R){const oe=Math.sqrt(N);v=v/oe*M,_=_/oe*M,x=x/oe*M}d=i.x-v,h=i.y-_,m=i.z-x;const D=(t.x+o*v)*r,L=(t.y+o*_)*r,F=(t.z+o*x)*r;t.x=(t.x-o*D)*c,t.y=(t.y-o*L)*c,t.z=(t.z-o*F)*c,a.x=d+(v+D)*c,a.y=h+(_+L)*c,a.z=m+(x+F)*c;const I=T-i.x,z=b-i.y,H=w-i.z,Y=a.x-T,Z=a.y-b,se=a.z-w;return I*Y+z*Z+H*se>0&&(a.x=T,a.y=b,a.z=w,t.x=(a.x-T)/r,t.y=(a.y-b)/r,t.z=(a.z-w)/r),a}function UL(i,e){e.set(0,0),i.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=i.length,e.y/=i.length}function BL(i,e){return Vg(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class sCe{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e)}}}var IL;const rCe="3.1.0",VC=1/8,aCe=/Mac/.test((IL=globalThis?.navigator)===null||IL===void 0?void 0:IL.platform);let ri,z8,kC,FL,nu,wi,hs,$x,a1,Nh,Dh,iv,V8,k8,zu,Wx,qx,G8,zL,H8,VL,kL,GC,oCe=class iB extends sCe{static install(e){ri=e.THREE,z8=Object.freeze(new ri.Vector3(0,0,0)),kC=Object.freeze(new ri.Vector3(0,1,0)),FL=Object.freeze(new ri.Vector3(0,0,1)),nu=new ri.Vector2,wi=new ri.Vector3,hs=new ri.Vector3,$x=new ri.Vector3,a1=new ri.Vector3,Nh=new ri.Vector3,Dh=new ri.Vector3,iv=new ri.Vector3,V8=new ri.Vector3,k8=new ri.Vector3,zu=new ri.Spherical,Wx=new ri.Spherical,qx=new ri.Box3,G8=new ri.Box3,zL=new ri.Sphere,H8=new ri.Quaternion,VL=new ri.Quaternion,kL=new ri.Matrix4,GC=new ri.Raycaster}static get ACTION(){return Ye}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ye.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=jx.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new ri.Vector3,this._focalOffsetVelocity=new ri.Vector3,this._zoomVelocity={value:0},this._truckInternal=(b,w,M,R)=>{let N,D;if(nv(this._camera)){const L=wi.copy(this._camera.position).sub(this._target),F=this._camera.getEffectiveFOV()*i1,I=L.length()*Math.tan(F*.5);N=this.truckSpeed*b*I/this._elementRect.height,D=this.truckSpeed*w*I/this._elementRect.height}else if(Vg(this._camera)){const L=this._camera;N=this.truckSpeed*b*(L.right-L.left)/L.zoom/this._elementRect.width,D=this.truckSpeed*w*(L.top-L.bottom)/L.zoom/this._elementRect.height}else return;R?(M?this.setFocalOffset(this._focalOffsetEnd.x+N,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(N,0,!0),this.forward(-D,!0)):M?this.setFocalOffset(this._focalOffsetEnd.x+N,this._focalOffsetEnd.y+D,this._focalOffsetEnd.z,!0):this.truck(N,D,!0)},this._rotateInternal=(b,w)=>{const M=Ug*this.azimuthRotateSpeed*b/this._elementRect.height,R=Ug*this.polarRotateSpeed*w/this._elementRect.height;this.rotate(M,R,!0)},this._dollyInternal=(b,w,M)=>{const R=Math.pow(.95,-b*this.dollySpeed),N=this._sphericalEnd.radius,D=this._sphericalEnd.radius*R,L=Af(D,this.minDistance,this.maxDistance),F=L-D;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(D,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(F,!0),this._dollyToNoClamp(L,!0)):this._dollyToNoClamp(L,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?D:L)-N,this._dollyControlCoord.set(w,M)),this._lastDollyDirection=Math.sign(-b)},this._zoomInternal=(b,w,M)=>{const R=Math.pow(.95,b*this.dollySpeed),N=this._zoom,D=this._zoom*R;this.zoomTo(D,!0),this.dollyToCursor&&(this._changedZoom+=D-N,this._dollyControlCoord.set(w,M))},typeof ri>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new ri.Quaternion().setFromUnitVectors(this._camera.up,kC),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Ye.NONE,this._target=new ri.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new ri.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new ri.Spherical().setFromVector3(wi.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new ri.Vector3,new ri.Vector3,new ri.Vector3,new ri.Vector3],this._updateNearPlaneCorners(),this._boundary=new ri.Box3(new ri.Vector3(-1/0,-1/0,-1/0),new ri.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new ri.Vector2,this.mouseButtons={left:Ye.ROTATE,middle:Ye.DOLLY,right:Ye.TRUCK,wheel:nv(this._camera)?Ye.DOLLY:Vg(this._camera)?Ye.ZOOM:Ye.NONE},this.touches={one:Ye.TOUCH_ROTATE,two:nv(this._camera)?Ye.TOUCH_DOLLY_TRUCK:Vg(this._camera)?Ye.TOUCH_ZOOM_TRUCK:Ye.NONE,three:Ye.TOUCH_TRUCK};const n=new ri.Vector2,s=new ri.Vector2,r=new ri.Vector2,a=b=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const R=this._domElement.getBoundingClientRect(),N=b.clientX/R.width,D=b.clientY/R.height;if(N<this._interactiveArea.left||N>this._interactiveArea.right||D<this._interactiveArea.top||D>this._interactiveArea.bottom)return}const w=b.pointerType!=="mouse"?null:(b.buttons&sa.LEFT)===sa.LEFT?sa.LEFT:(b.buttons&sa.MIDDLE)===sa.MIDDLE?sa.MIDDLE:(b.buttons&sa.RIGHT)===sa.RIGHT?sa.RIGHT:null;if(w!==null){const R=this._findPointerByMouseButton(w);R&&this._disposePointer(R)}if((b.buttons&sa.LEFT)===sa.LEFT&&this._lockedPointer)return;const M={pointerId:b.pointerId,clientX:b.clientX,clientY:b.clientY,deltaX:0,deltaY:0,mouseButton:w};this._activePointers.push(M),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,m(b)},o=b=>{b.cancelable&&b.preventDefault();const w=b.pointerId,M=this._lockedPointer||this._findPointerById(w);if(M){if(M.clientX=b.clientX,M.clientY=b.clientY,M.deltaX=b.movementX,M.deltaY=b.movementY,this._state=0,b.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(b.buttons&sa.LEFT)===sa.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(b.buttons&sa.MIDDLE)===sa.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(b.buttons&sa.RIGHT)===sa.RIGHT&&(this._state=this._state|this.mouseButtons.right);v()}},l=b=>{const w=this._findPointerById(b.pointerId);if(!(w&&w===this._lockedPointer)){if(w&&this._disposePointer(w),b.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Ye.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Ye.NONE;_()}};let c=-1;const d=b=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Ye.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const D=this._domElement.getBoundingClientRect(),L=b.clientX/D.width,F=b.clientY/D.height;if(L<this._interactiveArea.left||L>this._interactiveArea.right||F<this._interactiveArea.top||F>this._interactiveArea.bottom)return}if(b.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ye.ROTATE||this.mouseButtons.wheel===Ye.TRUCK){const D=performance.now();c-D<1e3&&this._getClientRect(this._elementRect),c=D}const w=aCe?-1:-3,M=b.deltaMode===1||b.ctrlKey?b.deltaY/w:b.deltaY/(w*10),R=this.dollyToCursor?(b.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(b.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ye.ROTATE:{this._rotateInternal(b.deltaX,b.deltaY),this._isUserControllingRotate=!0;break}case Ye.TRUCK:{this._truckInternal(b.deltaX,b.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Ye.SCREEN_PAN:{this._truckInternal(b.deltaX,b.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Ye.OFFSET:{this._truckInternal(b.deltaX,b.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Ye.DOLLY:{this._dollyInternal(-M,R,N),this._isUserControllingDolly=!0;break}case Ye.ZOOM:{this._zoomInternal(-M,R,N),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},h=b=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===iB.ACTION.NONE){const w=b instanceof PointerEvent?b.pointerId:0,M=this._findPointerById(w);M&&this._disposePointer(M),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}b.preventDefault()}},m=b=>{if(!this._enabled)return;if(UL(this._activePointers,nu),this._getClientRect(this._elementRect),n.copy(nu),s.copy(nu),this._activePointers.length>=2){const M=nu.x-this._activePointers[1].clientX,R=nu.y-this._activePointers[1].clientY,N=Math.sqrt(M*M+R*R);r.set(0,N);const D=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,L=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(D,L)}if(this._state=0,!b)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in b&&b.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(b.buttons&sa.LEFT)===sa.LEFT&&(this._state=this._state|this.mouseButtons.left),(b.buttons&sa.MIDDLE)===sa.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(b.buttons&sa.RIGHT)===sa.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Ye.ROTATE)===Ye.ROTATE||(this._state&Ye.TOUCH_ROTATE)===Ye.TOUCH_ROTATE||(this._state&Ye.TOUCH_DOLLY_ROTATE)===Ye.TOUCH_DOLLY_ROTATE||(this._state&Ye.TOUCH_ZOOM_ROTATE)===Ye.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Ye.TRUCK)===Ye.TRUCK||(this._state&Ye.SCREEN_PAN)===Ye.SCREEN_PAN||(this._state&Ye.TOUCH_TRUCK)===Ye.TOUCH_TRUCK||(this._state&Ye.TOUCH_SCREEN_PAN)===Ye.TOUCH_SCREEN_PAN||(this._state&Ye.TOUCH_DOLLY_TRUCK)===Ye.TOUCH_DOLLY_TRUCK||(this._state&Ye.TOUCH_DOLLY_SCREEN_PAN)===Ye.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ye.TOUCH_ZOOM_TRUCK)===Ye.TOUCH_ZOOM_TRUCK||(this._state&Ye.TOUCH_ZOOM_SCREEN_PAN)===Ye.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Ye.DOLLY)===Ye.DOLLY||(this._state&Ye.TOUCH_DOLLY)===Ye.TOUCH_DOLLY||(this._state&Ye.TOUCH_DOLLY_TRUCK)===Ye.TOUCH_DOLLY_TRUCK||(this._state&Ye.TOUCH_DOLLY_SCREEN_PAN)===Ye.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ye.TOUCH_DOLLY_OFFSET)===Ye.TOUCH_DOLLY_OFFSET||(this._state&Ye.TOUCH_DOLLY_ROTATE)===Ye.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Ye.ZOOM)===Ye.ZOOM||(this._state&Ye.TOUCH_ZOOM)===Ye.TOUCH_ZOOM||(this._state&Ye.TOUCH_ZOOM_TRUCK)===Ye.TOUCH_ZOOM_TRUCK||(this._state&Ye.TOUCH_ZOOM_SCREEN_PAN)===Ye.TOUCH_ZOOM_SCREEN_PAN||(this._state&Ye.TOUCH_ZOOM_OFFSET)===Ye.TOUCH_ZOOM_OFFSET||(this._state&Ye.TOUCH_ZOOM_ROTATE)===Ye.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Ye.OFFSET)===Ye.OFFSET||(this._state&Ye.TOUCH_OFFSET)===Ye.TOUCH_OFFSET||(this._state&Ye.TOUCH_DOLLY_OFFSET)===Ye.TOUCH_DOLLY_OFFSET||(this._state&Ye.TOUCH_ZOOM_OFFSET)===Ye.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,UL(this._activePointers,nu);const w=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,M=w?-w.deltaX:s.x-nu.x,R=w?-w.deltaY:s.y-nu.y;if(s.copy(nu),((this._state&Ye.ROTATE)===Ye.ROTATE||(this._state&Ye.TOUCH_ROTATE)===Ye.TOUCH_ROTATE||(this._state&Ye.TOUCH_DOLLY_ROTATE)===Ye.TOUCH_DOLLY_ROTATE||(this._state&Ye.TOUCH_ZOOM_ROTATE)===Ye.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(M,R),this._isUserControllingRotate=!0),(this._state&Ye.DOLLY)===Ye.DOLLY||(this._state&Ye.ZOOM)===Ye.ZOOM){const N=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,L=this.dollyDragInverted?-1:1;(this._state&Ye.DOLLY)===Ye.DOLLY?(this._dollyInternal(L*R*VC,N,D),this._isUserControllingDolly=!0):(this._zoomInternal(L*R*VC,N,D),this._isUserControllingZoom=!0)}if((this._state&Ye.TOUCH_DOLLY)===Ye.TOUCH_DOLLY||(this._state&Ye.TOUCH_ZOOM)===Ye.TOUCH_ZOOM||(this._state&Ye.TOUCH_DOLLY_TRUCK)===Ye.TOUCH_DOLLY_TRUCK||(this._state&Ye.TOUCH_ZOOM_TRUCK)===Ye.TOUCH_ZOOM_TRUCK||(this._state&Ye.TOUCH_DOLLY_SCREEN_PAN)===Ye.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ye.TOUCH_ZOOM_SCREEN_PAN)===Ye.TOUCH_ZOOM_SCREEN_PAN||(this._state&Ye.TOUCH_DOLLY_OFFSET)===Ye.TOUCH_DOLLY_OFFSET||(this._state&Ye.TOUCH_ZOOM_OFFSET)===Ye.TOUCH_ZOOM_OFFSET||(this._state&Ye.TOUCH_DOLLY_ROTATE)===Ye.TOUCH_DOLLY_ROTATE||(this._state&Ye.TOUCH_ZOOM_ROTATE)===Ye.TOUCH_ZOOM_ROTATE){const N=nu.x-this._activePointers[1].clientX,D=nu.y-this._activePointers[1].clientY,L=Math.sqrt(N*N+D*D),F=r.y-L;r.set(0,L);const I=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,z=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ye.TOUCH_DOLLY)===Ye.TOUCH_DOLLY||(this._state&Ye.TOUCH_DOLLY_ROTATE)===Ye.TOUCH_DOLLY_ROTATE||(this._state&Ye.TOUCH_DOLLY_TRUCK)===Ye.TOUCH_DOLLY_TRUCK||(this._state&Ye.TOUCH_DOLLY_SCREEN_PAN)===Ye.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ye.TOUCH_DOLLY_OFFSET)===Ye.TOUCH_DOLLY_OFFSET?(this._dollyInternal(F*VC,I,z),this._isUserControllingDolly=!0):(this._zoomInternal(F*VC,I,z),this._isUserControllingZoom=!0)}((this._state&Ye.TRUCK)===Ye.TRUCK||(this._state&Ye.TOUCH_TRUCK)===Ye.TOUCH_TRUCK||(this._state&Ye.TOUCH_DOLLY_TRUCK)===Ye.TOUCH_DOLLY_TRUCK||(this._state&Ye.TOUCH_ZOOM_TRUCK)===Ye.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(M,R,!1,!1),this._isUserControllingTruck=!0),((this._state&Ye.SCREEN_PAN)===Ye.SCREEN_PAN||(this._state&Ye.TOUCH_SCREEN_PAN)===Ye.TOUCH_SCREEN_PAN||(this._state&Ye.TOUCH_DOLLY_SCREEN_PAN)===Ye.TOUCH_DOLLY_SCREEN_PAN||(this._state&Ye.TOUCH_ZOOM_SCREEN_PAN)===Ye.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(M,R,!1,!0),this._isUserControllingTruck=!0),((this._state&Ye.OFFSET)===Ye.OFFSET||(this._state&Ye.TOUCH_OFFSET)===Ye.TOUCH_OFFSET||(this._state&Ye.TOUCH_DOLLY_OFFSET)===Ye.TOUCH_DOLLY_OFFSET||(this._state&Ye.TOUCH_ZOOM_OFFSET)===Ye.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(M,R,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{UL(this._activePointers,nu),s.copy(nu),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",x),this._domElement.ownerDocument.addEventListener("pointerlockerror",T),this._domElement.ownerDocument.addEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),m())},this.unlockPointer=()=>{var b,w,M;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(b=this._domElement)===null||b===void 0||b.ownerDocument.exitPointerLock(),(w=this._domElement)===null||w===void 0||w.ownerDocument.removeEventListener("pointerlockchange",x),(M=this._domElement)===null||M===void 0||M.ownerDocument.removeEventListener("pointerlockerror",T),this.cancel()};const x=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},T=()=>{this.unlockPointer()};this._addAllEventListeners=b=>{this._domElement=b,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",h)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",h),this._domElement.ownerDocument.removeEventListener("pointermove",o,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",x),this._domElement.ownerDocument.removeEventListener("pointerlockerror",T))},this.cancel=()=>{this._state!==Ye.NONE&&(this._state=Ye.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Af(e.width,0,1),this._interactiveArea.height=Af(e.height,0,1),this._interactiveArea.x=Af(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Af(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const s=Af(e,this.minAzimuthAngle,this.maxAzimuthAngle),r=Af(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!n||As(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&As(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=jx.NONE,this._changedDolly=0,this._dollyToNoClamp(Af(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),o=As(a,this._spherical.radius);if(!(n>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,a)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const r=!t||As(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(a1).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||As(this._target.x,this._targetEnd.x,this.restThreshold)&&As(this._target.y,this._targetEnd.y,this.restThreshold)&&As(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Af(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||As(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),Nh.setFromMatrixColumn(this._camera.matrix,0),Dh.setFromMatrixColumn(this._camera.matrix,1),Nh.multiplyScalar(e),Dh.multiplyScalar(-t);const s=wi.copy(Nh).add(Dh),r=hs.copy(this._targetEnd).add(s);return this.moveTo(r.x,r.y,r.z,n)}forward(e,t=!1){wi.setFromMatrixColumn(this._camera.matrix,0),wi.crossVectors(this._camera.up,wi),wi.multiplyScalar(e);const n=hs.copy(this._targetEnd).add(wi);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return wi.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+wi.x,this._targetEnd.y+wi.y,this._targetEnd.z+wi.z,t)}moveTo(e,t,n,s=!1){this._isUserControllingTruck=!1;const r=wi.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,s||this._target.copy(this._targetEnd);const a=!s||As(this._target.x,this._targetEnd.x,this.restThreshold)&&As(this._target.y,this._targetEnd.y,this.restThreshold)&&As(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(e,t,n,s=!1){const o=wi.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(o.x,o.y,o.z,s)}fitToBox(e,t,{cover:n=!1,paddingLeft:s=0,paddingRight:r=0,paddingBottom:a=0,paddingTop:o=0}={}){const l=[],c=e.isBox3?qx.copy(e):qx.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=I8(this._sphericalEnd.theta,B8),h=I8(this._sphericalEnd.phi,B8);l.push(this.rotateTo(d,h,t));const m=wi.setFromSpherical(this._sphericalEnd).normalize(),v=H8.setFromUnitVectors(m,FL),_=As(Math.abs(m.y),1);_&&v.multiply(VL.setFromAxisAngle(kC,d)),v.multiply(this._yAxisUpSpaceInverse);const x=G8.makeEmpty();hs.copy(c.min).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.min).setX(c.max.x).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.min).setY(c.max.y).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.max).setZ(c.min.z).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.min).setZ(c.max.z).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.max).setY(c.min.y).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.max).setX(c.min.x).applyQuaternion(v),x.expandByPoint(hs),hs.copy(c.max).applyQuaternion(v),x.expandByPoint(hs),x.min.x-=s,x.min.y-=a,x.max.x+=r,x.max.y+=o,v.setFromUnitVectors(FL,m),_&&v.premultiply(VL.invert()),v.premultiply(this._yAxisUpSpace);const T=x.getSize(wi),b=x.getCenter(hs).applyQuaternion(v);if(nv(this._camera)){const w=this.getDistanceToFitBox(T.x,T.y,T.z,n);l.push(this.moveTo(b.x,b.y,b.z,t)),l.push(this.dollyTo(w,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Vg(this._camera)){const w=this._camera,M=w.right-w.left,R=w.top-w.bottom,N=n?Math.max(M/T.x,R/T.y):Math.min(M/T.x,R/T.y);l.push(this.moveTo(b.x,b.y,b.z,t)),l.push(this.zoomTo(N,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const n=[],r="isObject3D"in e?iB.createBoundingSphere(e,zL):zL.copy(e);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),nv(this._camera)){const a=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(a,t))}else if(Vg(this._camera)){const a=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,l=2*r.radius,c=Math.min(a/l,o/l);n.push(this.zoomTo(c,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,s,r,a,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=jx.NONE,this._changedDolly=0;const l=hs.set(s,r,a),c=wi.set(e,t,n);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!o||As(this._target.x,this._targetEnd.x,this.restThreshold)&&As(this._target.y,this._targetEnd.y,this.restThreshold)&&As(this._target.z,this._targetEnd.z,this.restThreshold)&&As(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&As(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&As(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerp(e,t,n,s=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=jx.NONE,this._changedDolly=0;const r=wi.set(...e.target);if("spherical"in e)zu.set(...e.spherical);else{const h=hs.set(...e.position);zu.setFromVector3(h.sub(r).applyQuaternion(this._yAxisUpSpace))}const a=$x.set(...t.target);if("spherical"in t)Wx.set(...t.spherical);else{const h=hs.set(...t.position);Wx.setFromVector3(h.sub(a).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(r.lerp(a,n));const o=Wx.theta-zu.theta,l=Wx.phi-zu.phi,c=Wx.radius-zu.radius;this._sphericalEnd.set(zu.radius+c*n,zu.phi+l*n,zu.theta+o*n),this._needsUpdate=!0,s||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!s||As(this._target.x,this._targetEnd.x,this.restThreshold)&&As(this._target.y,this._targetEnd.y,this.restThreshold)&&As(this._target.z,this._targetEnd.z,this.restThreshold)&&As(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&As(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&As(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(e,t,n,s,r,a,o,l,c,d,h,m,v,_=!1){return this.lerp({position:[e,t,n],target:[s,r,a]},{position:[o,l,c],target:[d,h,m]},v,_)}setPosition(e,t,n,s=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(e,t,n,s=!1){const r=this.getPosition(wi),a=this.setLookAt(r.x,r.y,r.z,e,t,n,s);return this._sphericalEnd.phi=Af(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(e,t,n,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,s||this._focalOffset.copy(this._focalOffsetEnd);const r=!s||As(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&As(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&As(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),Nh.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Dh.setFromMatrixColumn(this._camera.matrixWorldInverse,1),iv.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const s=wi.set(e,t,n),r=s.distanceTo(this._camera.position),a=s.sub(this._camera.position);Nh.multiplyScalar(a.x),Dh.multiplyScalar(a.y),iv.multiplyScalar(a.z),wi.copy(Nh).add(Dh).add(iv),wi.z=wi.z+r,this.dollyTo(r,!1),this.setFocalOffset(-wi.x,wi.y,-wi.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,s){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new ri.Vector4,typeof e=="number"?this._viewport.set(e,t,n,s):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,s=!1){if(BL(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=e/t,a=this._camera.getEffectiveFOV()*i1,o=this._camera.aspect;return((s?r>o:r<o)?t:e/o)*.5/Math.tan(a*.5)+n*.5}getDistanceToFitSphere(e){if(BL(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*i1,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,s=1<this._camera.aspect?t:n;return e/Math.sin(s*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new ri.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new ri.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new ri.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new ri.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%Ug+Ug)%Ug,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=Ug),this._spherical.theta+=Ug*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Ug),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!As(this._camera.up.x,this._cameraUp0.x)||!As(this._camera.up.y,this._cameraUp0.y)||!As(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(wi);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,kC),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=wi.subVectors(this._target,this._camera.position).normalize(),t=hs.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(wi);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,r=V8.subVectors(this._targetEnd,this._target),a=k8.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(xr(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=zC(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(xr(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=zC(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(xr(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=zC(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(xr(r.x)&&xr(r.y)&&xr(r.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;F8(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(xr(a.x)&&xr(a.y)&&xr(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;F8(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(xr(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=zC(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(nv(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,m=this._camera,v=this._getCameraDirection(a1),_=wi.copy(v).cross(m.up).normalize();_.lengthSq()===0&&(_.x=1);const x=hs.crossVectors(_,v),T=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*i1*.5),w=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,M=$x.copy(this._targetEnd).add(_.multiplyScalar(this._dollyControlCoord.x*T*m.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*T)),R=wi.copy(this._targetEnd).lerp(M,w),N=this._lastDollyDirection===jx.IN&&this._spherical.radius<=this.minDistance,D=this._lastDollyDirection===jx.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(N||D)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const F=hs.copy(v).multiplyScalar(-h);R.add(F)}this._boundary.clampPoint(R,R);const L=hs.subVectors(R,this._targetEnd);this._targetEnd.copy(R),this._target.add(L),this._changedDolly-=h,xr(this._changedDolly)&&(this._changedDolly=0)}else if(Vg(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,m=this._camera,v=wi.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),_=hs.set(0,0,-1).applyQuaternion(m.quaternion),x=$x.copy(v).add(_.multiplyScalar(-v.dot(m.up))),b=-(this._zoom-h-this._zoom)/this._zoom,w=this._getCameraDirection(a1),M=this._targetEnd.dot(w),R=wi.copy(this._targetEnd).lerp(x,b),N=R.dot(w),D=w.multiplyScalar(N-M);R.sub(D),this._boundary.clampPoint(R,R);const L=hs.subVectors(R,this._targetEnd);this._targetEnd.copy(R),this._target.add(L),this._changedZoom-=h,xr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!xr(this._focalOffset.x)||!xr(this._focalOffset.y)||!xr(this._focalOffset.z))&&(Nh.setFromMatrixColumn(this._camera.matrix,0),Dh.setFromMatrixColumn(this._camera.matrix,1),iv.setFromMatrixColumn(this._camera.matrix,2),Nh.multiplyScalar(this._focalOffset.x),Dh.multiplyScalar(-this._focalOffset.y),iv.multiplyScalar(this._focalOffset.z),wi.copy(Nh).add(Dh).add(iv),this._camera.position.add(wi),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),wi.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),xr(t,this.restThreshold)&&xr(n,this.restThreshold)&&xr(s,this.restThreshold)&&xr(r.x,this.restThreshold)&&xr(r.y,this.restThreshold)&&xr(r.z,this.restThreshold)&&xr(a.x,this.restThreshold)&&xr(a.y,this.restThreshold)&&xr(a.z,this.restThreshold)&&xr(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:s1(this.maxDistance),minZoom:this.minZoom,maxZoom:s1(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:s1(this.maxPolarAngle),minAzimuthAngle:s1(this.minAzimuthAngle),maxAzimuthAngle:s1(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:wi.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=r1(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=r1(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=r1(n.maxPolarAngle),this.minAzimuthAngle=r1(n.minAzimuthAngle),this.maxAzimuthAngle=r1(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),zu.setFromVector3(wi.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(zu.theta,zu.phi,t),this.dollyTo(zu.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",rCe),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const s=t.lengthSq();if(s===0)return e;const r=hs.copy(t).add(e),o=this._boundary.clampPoint(r,$x).sub(r),l=o.lengthSq();if(l===0)return e.add(t);if(l===s)return e;if(n===0)return e.add(t).add(o);{const c=1+n*l/t.dot(o);return e.add(hs.copy(t).multiplyScalar(c)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(nv(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*i1,s=Math.tan(n*.5)*t,r=s*e.aspect;this._nearPlaneCorners[0].set(-r,-s,0),this._nearPlaneCorners[1].set(r,-s,0),this._nearPlaneCorners[2].set(r,s,0),this._nearPlaneCorners[3].set(-r,s,0)}else if(Vg(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,s=e.right*t,r=e.top*t,a=e.bottom*t;this._nearPlaneCorners[0].set(n,r,0),this._nearPlaneCorners[1].set(s,r,0),this._nearPlaneCorners[2].set(s,a,0),this._nearPlaneCorners[3].set(n,a,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||BL(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(a1);kL.lookAt(z8,n,this._camera.up);for(let s=0;s<4;s++){const r=hs.copy(this._nearPlaneCorners[s]);r.applyMatrix4(kL);const a=$x.addVectors(this._target,r);GC.set(a,n),GC.far=this._spherical.radius+1;const o=GC.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new ri.Sphere){const n=t,s=n.center;qx.makeEmpty(),e.traverseVisible(a=>{a.isMesh&&qx.expandByObject(a)}),qx.getCenter(s);let r=0;return e.traverseVisible(a=>{if(!a.isMesh)return;const o=a;if(!o.geometry)return;const l=o.geometry.clone();l.applyMatrix4(o.matrixWorld);const d=l.attributes.position;for(let h=0,m=d.count;h<m;h++)wi.fromBufferAttribute(d,h),r=Math.max(r,s.distanceToSquared(wi))}),n.radius=Math.sqrt(r),n}};const lCe=P.forwardRef((i,e)=>{const{impl:t,camera:n,domElement:s,makeDefault:r,onControlStart:a,onControl:o,onControlEnd:l,onTransitionStart:c,onUpdate:d,onWake:h,onRest:m,onSleep:v,onStart:_,onEnd:x,onChange:T,regress:b,...w}=i,M=t??oCe;P.useMemo(()=>{const oe={Box3:Xo,MathUtils:{clamp:Lf.clamp},Matrix4:an,Quaternion:xl,Raycaster:sD,Sphere:co,Spherical:_z,Vector2:lt,Vector3:ae,Vector4:bn};M.install({THREE:oe}),Tz({CameraControlsImpl:M})},[M]);const R=Ih(oe=>oe.camera),N=Ih(oe=>oe.gl),D=Ih(oe=>oe.invalidate),L=Ih(oe=>oe.events),F=Ih(oe=>oe.setEvents),I=Ih(oe=>oe.set),z=Ih(oe=>oe.get),H=Ih(oe=>oe.performance),Y=n||R,Z=s||L.connected||N.domElement,se=P.useMemo(()=>new M(Y),[M,Y]);return DZ((oe,G)=>{se.update(G)},-1),P.useEffect(()=>(se.connect(Z),()=>void se.disconnect()),[Z,se]),P.useEffect(()=>{function oe(){D(),b&&H.regress()}const G=we=>{oe(),a?.(we),_?.(we)},K=we=>{oe(),o?.(we),T?.(we)},$=we=>{l?.(we),x?.(we)},ce=we=>{oe(),c?.(we),T?.(we)},q=we=>{oe(),d?.(we),T?.(we)},ue=we=>{oe(),h?.(we),T?.(we)},Ae=we=>{m?.(we)},Ne=we=>{v?.(we)};return se.addEventListener("controlstart",G),se.addEventListener("control",K),se.addEventListener("controlend",$),se.addEventListener("transitionstart",ce),se.addEventListener("update",q),se.addEventListener("wake",ue),se.addEventListener("rest",Ae),se.addEventListener("sleep",Ne),()=>{se.removeEventListener("controlstart",G),se.removeEventListener("control",K),se.removeEventListener("controlend",$),se.removeEventListener("transitionstart",ce),se.removeEventListener("update",q),se.removeEventListener("wake",ue),se.removeEventListener("rest",Ae),se.removeEventListener("sleep",Ne)}},[se,D,F,b,H,a,o,l,c,d,h,m,v,T,_,x]),P.useEffect(()=>{if(r){const oe=z().controls;return I({controls:se}),()=>I({controls:oe})}},[r,se]),P.createElement("primitive",pa({ref:e,object:se},w))}),cCe="modulepreload",uCe=function(i){return"/"+i},j8={},dCe=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let a=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=a(t.map(c=>{if(c=uCe(c),c in j8)return;j8[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":cCe,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((v,_)=>{m.addEventListener("load",v),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};function fCe(i,e){const t=i+"Geometry";return P.forwardRef(({args:n,children:s,...r},a)=>{const o=P.useRef(null);return P.useImperativeHandle(a,()=>o.current),P.useLayoutEffect(()=>void e?.(o.current)),P.createElement("mesh",pa({ref:o},r),P.createElement(t,{attach:"geometry",args:n}),s)})}const hCe=fCe("plane");let sB=typeof navigator<"u"&&navigator.gpu!==void 0;typeof window<"u"&&sB&&(sB=!!await navigator.gpu.requestAdapter());class pCe{static isAvailable(){return!!sB}static getErrorMessage(){const e='Your browser does not support <a href="https://gpuweb.github.io/gpuweb/" style="color:blue">WebGPU</a> yet',t=document.createElement("div");return t.id="webgpumessage",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.maxWidth="400px",t.style.margin="5em auto 0",t.innerHTML=e,t}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const mCe=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],GL=new WeakMap;class kZ{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=mCe,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const t=e.getMRT();return t!==null&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:s,object:r}=e;if(t={material:this.getMaterialData(s),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:r.matrixWorld.clone()},r.center&&(t.center=r.center.clone()),r.morphTargetInfluences&&(t.morphTargetInfluences=r.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:a,height:o}=e.context;t.bufferWidth=a,t.bufferHeight=o}t.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const s=e[n];t[n]={version:s.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.overrideNodes.modelViewMatrix!==null||e.renderer.overrideNodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const s=e[n];s!=null&&(typeof s=="object"&&s.clone!==void 0?s.isTexture===!0?t[n]={id:s.id,version:s.version}:t[n]=s.clone():t[n]=s)}return t}equals(e,t){const{object:n,material:s,geometry:r}=e,a=this.getRenderObjectData(e);if(a.worldMatrix.equals(n.matrixWorld)!==!0)return a.worldMatrix.copy(n.matrixWorld),!1;const o=a.material;for(const T in o){const b=o[T],w=s[T];if(b.equals!==void 0){if(b.equals(w)===!1)return b.copy(w),!1}else if(w.isTexture===!0){if(b.id!==w.id||b.version!==w.version)return b.id=w.id,b.version=w.version,!1}else if(b!==w)return o[T]=w,!1}if(o.transmission>0){const{width:T,height:b}=e.context;if(a.bufferWidth!==T||a.bufferHeight!==b)return a.bufferWidth=T,a.bufferHeight=b,!1}const l=a.geometry,c=r.attributes,d=l.attributes,h=Object.keys(d),m=Object.keys(c);if(l.id!==r.id)return l.id=r.id,!1;if(h.length!==m.length)return a.geometry.attributes=this.getAttributesData(c),!1;for(const T of h){const b=d[T],w=c[T];if(w===void 0)return delete d[T],!1;if(b.version!==w.version)return b.version=w.version,!1}const v=r.index,_=l.indexVersion,x=v?v.version:null;if(_!==x)return l.indexVersion=x,!1;if(l.drawRange.start!==r.drawRange.start||l.drawRange.count!==r.drawRange.count)return l.drawRange.start=r.drawRange.start,l.drawRange.count=r.drawRange.count,!1;if(a.morphTargetInfluences){let T=!1;for(let b=0;b<a.morphTargetInfluences.length;b++)a.morphTargetInfluences[b]!==n.morphTargetInfluences[b]&&(T=!0);if(T)return!0}if(a.lights){for(let T=0;T<t.length;T++)if(a.lights[T].map!==t[T].map)return!1}return a.center&&a.center.equals(n.center)===!1?(a.center.copy(n.center),!0):(e.bundle!==null&&(a.version=e.bundle.version),!0)}getLightsData(e){const t=[];for(const n of e)n.isSpotLight===!0&&n.map!==null&&t.push({map:n.map.version});return t}getLights(e,t){if(GL.has(e)){const s=GL.get(e);if(s.renderId===t)return s.lightsData}const n=this.getLightsData(e.getLights());return GL.set(e,{renderId:t,lightsData:n}),n}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const s=e.object.static===!0,r=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;if(s||r)return!1;const a=this.getLights(e.lightsNode,n);return this.equals(e,a)!==!0}}function IE(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let s=0,r;s<i.length;s++)r=i[s],t=Math.imul(t^r,2654435761),n=Math.imul(n^r,1597334677);else for(let s=0,r;s<i.length;s++)r=i.charCodeAt(s),t=Math.imul(t^r,2654435761),n=Math.imul(n^r,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const Mz=i=>IE(i),oM=i=>IE(i),FE=(...i)=>IE(i);function Az(i,e=!1){const t=[];i.isNode===!0&&t.push(i.id);for(const{property:n,childNode:s}of zE(i))t.push(IE(n.slice(0,-4)),s.getCacheKey(e));return IE(t)}function*zE(i,e=!1){for(const t of Object.getOwnPropertyNames(i)){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let s=0;s<n.length;s++){const r=n[s];r&&(r.isNode===!0||e&&typeof r.toJSON=="function")&&(yield{property:t,index:s,childNode:r})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(n&&Object.getPrototypeOf(n)===Object.prototype)for(const s in n){if(s.startsWith("_")===!0)continue;const r=n[s];r&&(r.isNode===!0||e&&typeof r.toJSON=="function")&&(yield{property:t,index:s,childNode:r})}}}const gCe=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),$8=new WeakMap;function Cz(i){return gCe.get(i)}function VE(i){if(/[iu]?vec\d/.test(i))return i.startsWith("ivec")?Int32Array:i.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(i)||/float/.test(i))return Float32Array;if(/uint/.test(i))return Uint32Array;if(/int/.test(i))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${i}`)}function Rz(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 9;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function GZ(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 12;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function HZ(i){if(/float|int|uint/.test(i))return 4;if(/vec2/.test(i))return 8;if(/vec3/.test(i)||/vec4/.test(i))return 16;if(/mat2/.test(i))return 8;if(/mat3/.test(i))return 48;if(/mat4/.test(i))return 64;console.error("THREE.TSL: Unsupported type:",i)}function mm(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function oD(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new Vt(...e):t==="vec2"?new lt(...e):t==="vec3"?new ae(...e):t==="vec4"?new bn(...e):t==="mat2"?new VS(...e):t==="mat3"?new Kn(...e):t==="mat4"?new an(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?Pz(e[0]):null}function Nz(i){let e=$8.get(i);return e===void 0&&(e={},$8.set(i,e)),e}function Dz(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function Pz(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}var yCe=Object.freeze({__proto__:null,arrayBufferToBase64:Dz,base64ToArrayBuffer:Pz,getByteBoundaryFromType:HZ,getCacheKey:Az,getDataFromObject:Nz,getLengthFromType:Rz,getMemoryLengthFromType:GZ,getNodeChildren:zE,getTypeFromLength:Cz,getTypedArrayFromType:VE,getValueFromType:oD,getValueType:mm,hash:FE,hashArray:oM,hashString:Mz});const ub={VERTEX:"vertex",FRAGMENT:"fragment"},ii={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},jZ={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},Wo={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},Oz=["fragment","vertex"],wN=["setup","analyze","generate"],MN=[...Oz,"compute"],t0=["x","y","z","w"],vCe={analyze:"setup",generate:"analyze"};let _Ce=0,Jt=class extends _u{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=ii.NONE,this.updateBeforeType=ii.NONE,this.updateAfterType=ii.NONE,this.uuid=Lf.generateUUID(),this.version=0,this.global=!1,this.parents=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:_Ce++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this),this}onFrameUpdate(e){return this.onUpdate(e,ii.FRAME)}onRenderUpdate(e){return this.onUpdate(e,ii.RENDER)}onObjectUpdate(e){return this.onUpdate(e,ii.OBJECT)}onReference(e){return this.updateReference=e.bind(this),this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of zE(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=FE(Az(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}getArrayCount(){return null}setup(e){const t=e.getNodeProperties(this);let n=0;for(const s of this.getChildren())t["node"+n++]=s;return t.outputNode||null}analyze(e,t=null){const n=e.increaseUsage(this);if(this.parents===!0){const s=e.getDataFromNode(this,"any");s.stages=s.stages||{},s.stages[e.shaderStage]=s.stages[e.shaderStage]||[],s.stages[e.shaderStage].push(t)}if(n===1){const s=e.getNodeProperties(this);for(const r of Object.values(s))r&&r.isNode===!0&&r.build(e,this)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);const s=e.getDataFromNode(this);s.buildStages=s.buildStages||{},s.buildStages[e.buildStage]=!0;const r=vCe[e.buildStage];if(r&&s.buildStages[r]!==!0){const l=e.getBuildStage();e.setBuildStage(r),this.build(e),e.setBuildStage(l)}e.addNode(this),e.addChain(this);let a=null;const o=e.getBuildStage();if(o==="setup"){this.updateReference(e);const l=e.getNodeProperties(this);if(l.initialized!==!0){l.initialized=!0,l.outputNode=this.setup(e)||l.outputNode||null;for(const c of Object.values(l))if(c&&c.isNode===!0){if(c.parents===!0){const d=e.getNodeProperties(c);d.parents=d.parents||[],d.parents.push(this)}c.build(e)}}a=l.outputNode}else if(o==="analyze")this.analyze(e,t);else if(o==="generate"){if(this.generate.length===1){const c=this.getNodeType(e),d=e.getDataFromNode(this);a=d.snippet,a===void 0?d.generated===void 0?(d.generated=!0,a=this.generate(e)||"",d.snippet=a):(console.warn("THREE.Node: Recursion detected.",this),a="/* Recursion detected. */"):d.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,c,t)}else a=this.generate(e,t)||"";a===""&&t!==null&&t!=="void"&&t!=="OutputType"&&(console.error(`THREE.TSL: Invalid generated code, expected a "${t}".`),a=e.generateConst(t))}return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return zE(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:s,index:r,childNode:a}of t)r!==void 0?(n[s]===void 0&&(n[s]=Number.isInteger(r)?[]:{}),n[s][r]=a.toJSON(e.meta).uuid):n[s]=a.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const s=[];for(const r of e.inputNodes[n])s.push(t[r]);this[n]=s}else if(typeof e.inputNodes[n]=="object"){const s={};for(const r in e.inputNodes[n]){const a=e.inputNodes[n][r];s[r]=t[a]}this[n]=s}else{const s=e.inputNodes[n];this[n]=t[s]}}}toJSON(e){const{uuid:t,type:n}=this,s=e===void 0||typeof e=="string";s&&(e={textures:{},images:{},nodes:{}});let r=e.nodes[t];r===void 0&&(r={uuid:t,type:n,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},s!==!0&&(e.nodes[r.uuid]=r),this.serialize(r),delete r.meta);function a(o){const l=[];for(const c in o){const d=o[c];delete d.metadata,l.push(d)}return l}if(s){const o=a(e.textures),l=a(e.images),c=a(e.nodes);o.length>0&&(r.textures=o),l.length>0&&(r.images=l),c.length>0&&(r.nodes=c)}return r}};class n0 extends Jt{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),s=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${s} ]`}}class Lz extends Jt{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const s of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(s))&&(n=s);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,s=this.getNodeType(e),r=n.build(e,s);return e.format(r,s,t)}}class ga extends Jt{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const s=e.getVectorType(this.getNodeType(e,t)),r=e.getDataFromNode(this);if(r.propertyName!==void 0)return e.format(r.propertyName,s,t);if(s!=="void"&&t!=="void"&&this.hasDependencies(e)){const a=super.build(e,s),o=e.getVarFromNode(this,null,s),l=e.getPropertyName(o);return e.addLineFlowCode(`${l} = ${a}`,this),r.snippet=a,r.propertyName=l,e.format(r.propertyName,s,t)}}return super.build(e,t)}}class $Z extends ga{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),s=e.getTypeLength(n),r=this.nodes,a=e.getComponentType(n),o=[];let l=0;for(const d of r){if(l>=s){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let h=d.getNodeType(e),m=e.getTypeLength(h),v;if(l+m>s&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),m=s-l,h=e.getTypeFromLength(m)),l+=m,v=d.build(e,h),e.getComponentType(h)!==a){const x=e.getTypeFromLength(m,a);v=e.format(v,h,x)}o.push(v)}const c=`${e.getType(n)}( ${o.join(", ")} )`;return e.format(c,n,t)}}const xCe=t0.join("");class Uz extends Jt{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(t0.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}getScope(){return this.node.getScope()}generate(e,t){const n=this.node,s=e.getTypeLength(n.getNodeType(e));let r=null;if(s>1){let a=null;this.getVectorLength()>=s&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=n.build(e,a);this.components.length===s&&this.components===xCe.slice(0,this.components.length)?r=e.format(l,a,t):r=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else r=n.build(e,t);return r}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class WZ extends ga{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:s}=this,r=this.getNodeType(e),a=e.getComponentType(s.getNodeType(e)),o=e.getTypeFromLength(n.length,a),l=s.build(e,o),c=t.build(e,r),d=e.getTypeLength(r),h=[];for(let m=0;m<d;m++){const v=t0[m];v===n[0]?(h.push(l),m+=n.length-1):h.push(c+"."+v)}return`${e.getType(r)}( ${h.join(", ")} )`}}class bCe extends ga{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,s=this.getNodeType(e),r=n.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+r,this);const l=e.getTypeLength(s),c=[];let d=0;for(let h=0;h<l;h++){const m=t0[h];m===t[d]?(c.push("1.0 - "+(o+"."+m)),d++):c.push(o+"."+m)}return`${e.getType(s)}( ${c.join(", ")} )`}}class Bz extends Jt{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?mm(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=mm(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=Dz(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?oD(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const W8=/float|u?int/;class od extends Bz{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return W8.test(n)&&W8.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class qZ extends Jt{static get type(){return"MemberNode"}constructor(e,t){super(),this.structNode=e,this.property=t,this.isMemberNode=!0}hasMember(e){return this.structNode.isMemberNode&&this.structNode.hasMember(e)===!1?!1:this.structNode.getMemberType(e,this.property)!=="void"}getNodeType(e){return this.hasMember(e)===!1?"float":this.structNode.getMemberType(e,this.property)}getMemberType(e,t){if(this.hasMember(e)===!1)return"float";const n=this.getNodeType(e);return e.getStructTypeNode(n).getMemberType(e,t)}generate(e){if(this.hasMember(e)===!1){console.warn(`THREE.TSL: Member "${this.property}" does not exist in struct.`);const n=this.getNodeType(e);return e.generateConst(n)}return this.structNode.build(e)+"."+this.property}}let ky=null;const rB=new Map;function it(i,e){if(rB.has(i)){console.warn(`THREE.TSL: Redefinition of method chaining '${i}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${i} is not a function`);rB.set(i,e),i!=="assign"&&(Jt.prototype[i]=function(...t){return this.isStackNode?this.add(e(...t)):e(this,...t)},Jt.prototype[i+"Assign"]=function(...t){return this.isStackNode?this.assign(t[0],e(...t)):this.assign(e(this,...t))})}const SCe=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),q8=i=>SCe(i).split("").sort().join("");Jt.prototype.assign=function(...i){if(this.isStackNode!==!0)return ky!==null?ky.assign(this,...i):console.error("THREE.TSL: No stack defined for assign operation. Make sure the assign is inside a Fn()."),this;{const e=rB.get("assign");return this.add(e(...i))}};Jt.prototype.toVarIntent=function(){return this};Jt.prototype.get=function(i){return new qZ(this,i)};const K1={};function HC(i,e,t){K1[i]=K1[e]=K1[t]={get(){this._cache=this._cache||{};let a=this._cache[i];return a===void 0&&(a=new Uz(this,i),this._cache[i]=a),a},set(a){this[i].assign(st(a))}};const n=i.toUpperCase(),s=e.toUpperCase(),r=t.toUpperCase();Jt.prototype["set"+n]=Jt.prototype["set"+s]=Jt.prototype["set"+r]=function(a){const o=q8(i);return new WZ(this,o,st(a))},Jt.prototype["flip"+n]=Jt.prototype["flip"+s]=Jt.prototype["flip"+r]=function(){const a=q8(i);return new bCe(this,a)}}const Ph=["x","y","z","w"],Oh=["r","g","b","a"],Lh=["s","t","p","q"];for(let i=0;i<4;i++){let e=Ph[i],t=Oh[i],n=Lh[i];HC(e,t,n);for(let s=0;s<4;s++){e=Ph[i]+Ph[s],t=Oh[i]+Oh[s],n=Lh[i]+Lh[s],HC(e,t,n);for(let r=0;r<4;r++){e=Ph[i]+Ph[s]+Ph[r],t=Oh[i]+Oh[s]+Oh[r],n=Lh[i]+Lh[s]+Lh[r],HC(e,t,n);for(let a=0;a<4;a++)e=Ph[i]+Ph[s]+Ph[r]+Ph[a],t=Oh[i]+Oh[s]+Oh[r]+Oh[a],n=Lh[i]+Lh[s]+Lh[r]+Lh[a],HC(e,t,n)}}}for(let i=0;i<32;i++)K1[i]={get(){this._cache=this._cache||{};let e=this._cache[i];return e===void 0&&(e=new n0(this,new od(i,"uint")),this._cache[i]=e),e},set(e){this[i].assign(st(e))}};Object.defineProperties(Jt.prototype,K1);const X8=new WeakMap,TCe=function(i,e=null){const t=mm(i);return t==="node"?i:e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string"?st(aB(i,e)):t==="shader"?i.isFn?i:ve(i):i},ECe=function(i,e=null){for(const t in i)i[t]=st(i[t],e);return i},wCe=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=st(i[n],e);return i},XZ=function(i,e=null,t=null,n=null){function s(d){return n!==null?(d=st(Object.assign(d,n)),n.intent===!0&&(d=d.toVarIntent())):d=st(d),d}let r,a=e,o,l;function c(d){let h;return a?h=/[a-z]/i.test(a)?a+"()":a:h=i.type,o!==void 0&&d.length<o?(console.error(`THREE.TSL: "${h}" parameter length is less than minimum required.`),d.concat(new Array(o-d.length).fill(0))):l!==void 0&&d.length>l?(console.error(`THREE.TSL: "${h}" parameter length exceeds limit.`),d.slice(0,l)):d}return e===null?r=(...d)=>s(new i(...Bv(c(d)))):t!==null?(t=st(t),r=(...d)=>s(new i(e,...Bv(c(d)),t))):r=(...d)=>s(new i(e,...Bv(c(d)))),r.setParameterLength=(...d)=>(d.length===1?o=l=d[0]:d.length===2&&([o,l]=d),r),r.setName=d=>(a=d,r),r},MCe=function(i,...e){return st(new i(...Bv(e)))};class ACe extends Jt{constructor(e,t){super(),this.shaderNode=e,this.rawInputs=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,rawInputs:n}=this,s=e.getNodeProperties(t),r=e.getClosestSubBuild(t.subBuilds)||"",a=r||"default";if(s[a])return s[a];const o=e.subBuildFn;e.subBuildFn=r;let l=null;if(t.layout){let c=X8.get(e.constructor);c===void 0&&(c=new WeakMap,X8.set(e.constructor,c));let d=c.get(t);d===void 0&&(d=st(e.buildFunctionNode(t)),c.set(t,d)),e.addInclude(d);const h=n?CCe(n):null;l=st(d.call(h))}else{const c=new Proxy(e,{get:(_,x,T)=>{let b;return Symbol.iterator===x?b=function*(){yield void 0}:b=Reflect.get(_,x,T),b}}),d=n?RCe(n):null,h=Array.isArray(n)?n.length>0:n!==null,m=t.jsFunc,v=h||m.length>1?m(d,c):m(c);l=st(v)}return e.subBuildFn=o,t.once&&(s[a]=l),l}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const t=e.getNodeProperties(this),n=e.getSubBuildOutput(this);return t[n]=t[n]||this.setupOutput(e),t[n].subBuild=e.getClosestSubBuild(this),t[n]}build(e,t=null){let n=null;const s=e.getBuildStage(),r=e.getNodeProperties(this),a=e.getSubBuildOutput(this),o=this.getOutputNode(e);if(s==="setup"){const l=e.getSubBuildProperty("initialized",this);if(r[l]!==!0&&(r[l]=!0,r[a]=this.getOutputNode(e),r[a].build(e),this.shaderNode.subBuilds))for(const c of e.chaining){const d=e.getDataFromNode(c,"any");d.subBuilds=d.subBuilds||new Set;for(const h of this.shaderNode.subBuilds)d.subBuilds.add(h)}n=r[a]}else s==="analyze"?o.build(e,t):s==="generate"&&(n=o.build(e,t)||"");return n}}function CCe(i){let e;return uD(i),i[0]&&(i[0].isNode||Object.getPrototypeOf(i[0])!==Object.prototype)?e=[...i]:e=i[0],e}function RCe(i){let e=0;return uD(i),new Proxy(i,{get:(t,n,s)=>{let r;if(n==="length")return r=i.length,r;if(Symbol.iterator===n)r=function*(){for(const a of i)yield st(a)};else{if(i.length>0)if(Object.getPrototypeOf(i[0])===Object.prototype){const a=i[0];a[n]===void 0?r=a[e++]:r=Reflect.get(a,n,s)}else i[0]instanceof Jt&&(i[n]===void 0?r=i[e++]:r=Reflect.get(i,n,s));else r=Reflect.get(t,n,s);r=st(r)}return r}})}class NCe extends Jt{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return st(new ACe(this,e))}setup(){return this.call()}}const DCe=[!1,!0],PCe=[0,1,2,3],OCe=[-1,-2],YZ=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],Iz=new Map;for(const i of DCe)Iz.set(i,new od(i));const Fz=new Map;for(const i of PCe)Fz.set(i,new od(i,"uint"));const zz=new Map([...Fz].map(i=>new od(i.value,"int")));for(const i of OCe)zz.set(i,new od(i,"int"));const lD=new Map([...zz].map(i=>new od(i.value)));for(const i of YZ)lD.set(i,new od(i));for(const i of YZ)lD.set(-i,new od(-i));const cD={bool:Iz,uint:Fz,ints:zz,float:lD},Y8=new Map([...Iz,...lD]),aB=(i,e)=>Y8.has(i)?Y8.get(i):i.isNode===!0?i:new od(i,e),uo=function(i,e=null){return(...t)=>{for(const s of t)if(s===void 0)return console.error(`THREE.TSL: Invalid parameter for the type "${i}".`),st(new od(0,i));if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(s=>{const r=typeof s;return r!=="object"&&r!=="function"}))&&(t=[oD(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return L1(e.get(t[0]));if(t.length===1){const s=aB(t[0],i);return s.nodeType===i?L1(s):L1(new Lz(s,i))}const n=t.map(s=>aB(s));return L1(new $Z(n,i))}},kE=i=>typeof i=="object"&&i!==null?i.value:i,KZ=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function db(i,e){return new NCe(i,e)}const st=(i,e=null)=>TCe(i,e),L1=(i,e=null)=>st(i,e).toVarIntent(),uD=(i,e=null)=>new ECe(i,e),Bv=(i,e=null)=>new wCe(i,e),Un=(i,e=null,t=null,n=null)=>new XZ(i,e,t,n),Ot=(i,...e)=>new MCe(i,...e),Tt=(i,e=null,t=null,n={})=>new XZ(i,e,t,{intent:!0,...n});let LCe=0;class UCe extends Jt{constructor(e,t=null){super();let n=null;t!==null&&(typeof t=="object"?n=t.return:(typeof t=="string"?n=t:console.error("THREE.TSL: Invalid layout type."),t=null)),this.shaderNode=new db(e,n),t!==null&&this.setLayout(t),this.isFn=!0}setLayout(e){const t=this.shaderNode.nodeType;if(typeof e.inputs!="object"){const n={name:"fn"+LCe++,type:t,inputs:[]};for(const s in e)s!=="return"&&n.inputs.push({name:s,type:e[s]});e=n}return this.shaderNode.setLayout(e),this}getNodeType(e){return this.shaderNode.getNodeType(e)||"float"}call(...e){const t=this.shaderNode.call(e);return this.shaderNode.nodeType==="void"&&t.toStack(),t.toVarIntent()}once(e=null){return this.shaderNode.once=!0,this.shaderNode.subBuilds=e,this}generate(e){const t=this.getNodeType(e);return console.error('THREE.TSL: "Fn()" was declared but not invoked. Try calling it like "Fn()( ...params )".'),e.generateConst(t)}}function ve(i,e=null){const t=new UCe(i,e);return new Proxy(()=>{},{apply(n,s,r){return t.call(...r)},get(n,s,r){return Reflect.get(t,s,r)},set(n,s,r,a){return Reflect.set(t,s,r,a)}})}const GE=i=>{ky=i},dD=()=>ky,un=(...i)=>ky.If(...i),BCe=(...i)=>ky.Switch(...i);function fD(i){return ky&&ky.add(i),i}it("toStack",fD);const ZZ=new uo("color"),te=new uo("float",cD.float),de=new uo("int",cD.ints),Ht=new uo("uint",cD.uint),Jd=new uo("bool",cD.bool),ot=new uo("vec2"),xo=new uo("ivec2"),QZ=new uo("uvec2"),JZ=new uo("bvec2"),ye=new uo("vec3"),eQ=new uo("ivec3"),HS=new uo("uvec3"),Vz=new uo("bvec3"),jt=new uo("vec4"),tQ=new uo("ivec4"),nQ=new uo("uvec4"),iQ=new uo("bvec4"),hD=new uo("mat2"),Zl=new uo("mat3"),Iv=new uo("mat4"),ICe=(i="")=>st(new od(i,"string")),FCe=i=>st(new od(i,"ArrayBuffer"));it("toColor",ZZ);it("toFloat",te);it("toInt",de);it("toUint",Ht);it("toBool",Jd);it("toVec2",ot);it("toIVec2",xo);it("toUVec2",QZ);it("toBVec2",JZ);it("toVec3",ye);it("toIVec3",eQ);it("toUVec3",HS);it("toBVec3",Vz);it("toVec4",jt);it("toIVec4",tQ);it("toUVec4",nQ);it("toBVec4",iQ);it("toMat2",hD);it("toMat3",Zl);it("toMat4",Iv);const sQ=Un(n0).setParameterLength(2),rQ=(i,e)=>st(new Lz(st(i),e)),zCe=(i,e)=>st(new Uz(st(i),e));it("element",sQ);it("convert",rQ);const VCe=i=>(console.warn("THREE.TSL: append() has been renamed to Stack()."),fD(i));it("append",i=>(console.warn("THREE.TSL: .append() has been renamed to .toStack()."),fD(i)));class ps extends Jt{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0,this.global=!0}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const If=(i,e)=>st(new ps(i,e)),ku=(i,e)=>st(new ps(i,e,!0)),as=Ot(ps,"vec4","DiffuseColor"),oB=Ot(ps,"vec3","EmissiveColor"),kh=Ot(ps,"float","Roughness"),HE=Ot(ps,"float","Metalness"),AN=Ot(ps,"float","Clearcoat"),jE=Ot(ps,"float","ClearcoatRoughness"),Ev=Ot(ps,"vec3","Sheen"),pD=Ot(ps,"float","SheenRoughness"),mD=Ot(ps,"float","Iridescence"),kz=Ot(ps,"float","IridescenceIOR"),Gz=Ot(ps,"float","IridescenceThickness"),CN=Ot(ps,"float","AlphaT"),Gg=Ot(ps,"float","Anisotropy"),Z1=Ot(ps,"vec3","AnisotropyT"),Fv=Ot(ps,"vec3","AnisotropyB"),ru=Ot(ps,"color","SpecularColor"),$E=Ot(ps,"float","SpecularF90"),RN=Ot(ps,"float","Shininess"),Rb=Ot(ps,"vec4","Output"),zv=Ot(ps,"float","dashSize"),WE=Ot(ps,"float","gapSize"),kCe=Ot(ps,"float","pointWidth"),Q1=Ot(ps,"float","IOR"),NN=Ot(ps,"float","Transmission"),Hz=Ot(ps,"float","Thickness"),jz=Ot(ps,"float","AttenuationDistance"),$z=Ot(ps,"color","AttenuationColor"),Wz=Ot(ps,"float","Dispersion");class qz extends Jt{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const aQ=i=>new qz(i),gD=(i,e=0)=>new qz(i,!0,e),oQ=gD("frame"),cn=gD("render"),Xz=aQ("object");class jS extends Bz{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=Xz}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){return e=e.bind(this),super.onUpdate(n=>{const s=e(n,this);s!==void 0&&(this.value=s)},t)}getInputType(e){let t=super.getInputType(e);return t==="bool"&&(t="uint"),t}generate(e,t){const n=this.getNodeType(e),s=this.getUniformHash(e);let r=e.getNodeFromHash(s);r===void 0&&(e.setHashNode(this,s),r=this);const a=r.getInputType(e),o=e.getUniformFromNode(r,a,e.shaderStage,this.name||e.context.nodeName),l=e.getPropertyName(o);e.context.nodeName!==void 0&&delete e.context.nodeName;let c=l;if(n==="bool"){const d=e.getDataFromNode(this);let h=d.propertyName;if(h===void 0){const m=e.getVarFromNode(this,null,"bool");h=e.getPropertyName(m),d.propertyName=h,c=e.format(l,a,n),e.addLineFlowCode(`${h} = ${c}`,this)}c=h}return e.format(c,n,t)}}const pn=(i,e)=>{const t=KZ(e||i);return t===i&&(i=oD(t)),i=i&&i.isNode===!0?i.node&&i.node.value||i.value:i,st(new jS(i,t))};class lB extends ga{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const lQ=(...i)=>{let e;if(i.length===1){const t=i[0];e=new lB(null,t.length,t)}else{const t=i[0],n=i[1];e=new lB(t,n)}return st(e)};it("toArray",(i,e)=>lQ(Array(e).fill(i)));class cQ extends ga{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return t0.join("").slice(0,n)!==t.components}return!1}setup(e){const{targetNode:t,sourceNode:n}=this,s=t.getScope(),r=e.getNodeProperties(s);r.assign=!0;const a=e.getNodeProperties(this);a.sourceNode=n,a.targetNode=t.context({assign:!0})}generate(e,t){const{targetNode:n,sourceNode:s}=e.getNodeProperties(this),r=this.needsSplitAssign(e),a=n.build(e),o=n.getNodeType(e),l=s.build(e,o),c=s.getNodeType(e),d=e.getDataFromNode(this);let h;if(d.initialized===!0)t!=="void"&&(h=a);else if(r){const m=e.getVarFromNode(this,null,o),v=e.getPropertyName(m);e.addLineFlowCode(`${v} = ${l}`,this);const _=n.node,T=_.node.context({assign:!0}).build(e);for(let b=0;b<_.components.length;b++){const w=_.components[b];e.addLineFlowCode(`${T}.${w} = ${v}[ ${b} ]`,this)}t!=="void"&&(h=a)}else h=`${a} = ${l}`,(t==="void"||c==="void")&&(e.addLineFlowCode(h,this),t!=="void"&&(h=a));return d.initialized=!0,e.format(h,o,t)}}const uQ=Un(cQ).setParameterLength(2);it("assign",uQ);class dQ extends ga{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}getMemberType(e,t){return this.functionNode.getMemberType(e,t)}generate(e){const t=[],n=this.functionNode,s=n.getInputs(e),r=this.parameters,a=(l,c)=>{const d=c.type,h=d==="pointer";let m;return h?m="&"+l.build(e):m=l.build(e,d),m};if(Array.isArray(r)){if(r.length>s.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),r.length=s.length;else if(r.length<s.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");r.length<s.length;)r.push(te(0));for(let l=0;l<r.length;l++)t.push(a(r[l],s[l]))}else for(const l of s){const c=r[l.name];c!==void 0?t.push(a(c,l)):(console.error(`THREE.TSL: Input '${l.name}' not found in 'Fn()'.`),t.push(a(te(0),l)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const fQ=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Bv(e):uD(e[0]),st(new dQ(st(i),e)));it("call",fQ);const GCe={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class Xr extends ga{static get type(){return"OperatorNode"}constructor(e,t,n,...s){if(super(),s.length>0){let r=new Xr(e,t,n);for(let a=0;a<s.length-1;a++)r=new Xr(e,r,s[a]);t=r,n=s[s.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(GCe[this.op],t)}getNodeType(e,t=null){const n=this.op,s=this.aNode,r=this.bNode,a=s.getNodeType(e),o=r?r.getNodeType(e):null;if(a==="void"||o==="void")return t||"void";if(n==="%")return a;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(a);if(n==="!"||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">="){const l=Math.max(e.getTypeLength(a),e.getTypeLength(o));return l>1?`bvec${l}`:"bool"}else{if(e.isMatrix(a)){if(o==="float")return a;if(e.isVector(o))return e.getVectorFromMatrix(a);if(e.isMatrix(o))return a}else if(e.isMatrix(o)){if(a==="float")return o;if(e.isVector(a))return e.getVectorFromMatrix(o)}return e.getTypeLength(o)>e.getTypeLength(a)?o:a}}generate(e,t){const n=this.op,{aNode:s,bNode:r}=this,a=this.getNodeType(e,t);let o=null,l=null;a!=="void"?(o=s.getNodeType(e),l=r?r.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(o)?l=o:e.isVector(l)?o=l:o!==l&&(o=l="float"):n===">>"||n==="<<"?(o=a,l=e.changeComponentType(l,"uint")):n==="%"?(o=a,l=e.isInteger(o)&&e.isInteger(l)?l:o):e.isMatrix(o)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(o):e.isMatrix(l)||(o=l=a):e.isMatrix(l)?o==="float"?o="float":e.isVector(o)?o=e.getVectorFromMatrix(l):o=l=a:o=l=a):o=l=a;const c=s.build(e,o),d=r?r.build(e,l):null,h=e.getFunctionOperator(n);if(t!=="void"){const m=e.renderer.coordinateSystem===$o;if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">=")return m?e.isVector(o)?e.format(`${this.getOperatorMethod(e,t)}( ${c}, ${d} )`,a,t):e.format(`( ${c} ${n} ${d} )`,a,t):e.format(`( ${c} ${n} ${d} )`,a,t);if(n==="%")return e.isInteger(l)?e.format(`( ${c} % ${d} )`,a,t):e.format(`${this.getOperatorMethod(e,a)}( ${c}, ${d} )`,a,t);if(n==="!"||n==="~")return e.format(`(${n}${c})`,o,t);if(h)return e.format(`${h}( ${c}, ${d} )`,a,t);if(e.isMatrix(o)&&l==="float")return e.format(`( ${d} ${n} ${c} )`,a,t);if(o==="float"&&e.isMatrix(l))return e.format(`${c} ${n} ${d}`,a,t);{let v=`( ${c} ${n} ${d} )`;return!m&&a==="bool"&&e.isVector(o)&&e.isVector(l)&&(v=`all${v}`),e.format(v,a,t)}}else if(o!=="void")return h?e.format(`${h}( ${c}, ${d} )`,a,t):e.isMatrix(o)&&l==="float"?e.format(`${d} ${n} ${c}`,a,t):e.format(`${c} ${n} ${d}`,a,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const qa=Tt(Xr,"+").setParameterLength(2,1/0).setName("add"),Ui=Tt(Xr,"-").setParameterLength(2,1/0).setName("sub"),Wn=Tt(Xr,"*").setParameterLength(2,1/0).setName("mul"),sd=Tt(Xr,"/").setParameterLength(2,1/0).setName("div"),lM=Tt(Xr,"%").setParameterLength(2).setName("mod"),Yz=Tt(Xr,"==").setParameterLength(2).setName("equal"),hQ=Tt(Xr,"!=").setParameterLength(2).setName("notEqual"),pQ=Tt(Xr,"<").setParameterLength(2).setName("lessThan"),Kz=Tt(Xr,">").setParameterLength(2).setName("greaterThan"),mQ=Tt(Xr,"<=").setParameterLength(2).setName("lessThanEqual"),gQ=Tt(Xr,">=").setParameterLength(2).setName("greaterThanEqual"),yQ=Tt(Xr,"&&").setParameterLength(2,1/0).setName("and"),vQ=Tt(Xr,"||").setParameterLength(2,1/0).setName("or"),_Q=Tt(Xr,"!").setParameterLength(1).setName("not"),xQ=Tt(Xr,"^^").setParameterLength(2).setName("xor"),bQ=Tt(Xr,"&").setParameterLength(2).setName("bitAnd"),SQ=Tt(Xr,"~").setParameterLength(2).setName("bitNot"),TQ=Tt(Xr,"|").setParameterLength(2).setName("bitOr"),EQ=Tt(Xr,"^").setParameterLength(2).setName("bitXor"),wQ=Tt(Xr,"<<").setParameterLength(2).setName("shiftLeft"),MQ=Tt(Xr,">>").setParameterLength(2).setName("shiftRight"),AQ=ve(([i])=>(i.addAssign(1),i)),CQ=ve(([i])=>(i.subAssign(1),i)),RQ=ve(([i])=>{const e=de(i).toConst();return i.addAssign(1),e}),NQ=ve(([i])=>{const e=de(i).toConst();return i.subAssign(1),e});it("add",qa);it("sub",Ui);it("mul",Wn);it("div",sd);it("mod",lM);it("equal",Yz);it("notEqual",hQ);it("lessThan",pQ);it("greaterThan",Kz);it("lessThanEqual",mQ);it("greaterThanEqual",gQ);it("and",yQ);it("or",vQ);it("not",_Q);it("xor",xQ);it("bitAnd",bQ);it("bitNot",SQ);it("bitOr",TQ);it("bitXor",EQ);it("shiftLeft",wQ);it("shiftRight",MQ);it("incrementBefore",AQ);it("decrementBefore",CQ);it("increment",RQ);it("decrement",NQ);const DQ=(i,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),lM(de(i),de(e)));it("modInt",DQ);class Oe extends ga{static get type(){return"MathNode"}constructor(e,t,n=null,s=null){if(super(),(e===Oe.MAX||e===Oe.MIN)&&arguments.length>3){let r=new Oe(e,t,n);for(let a=2;a<arguments.length-1;a++)r=new Oe(e,r,arguments[a]);t=r,n=arguments[arguments.length-1],s=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=s,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,s=this.cNode?this.cNode.getNodeType(e):null,r=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(n)?0:e.getTypeLength(n),o=e.isMatrix(s)?0:e.getTypeLength(s);return r>a&&r>o?t:a>o?n:o>r?s:t}getNodeType(e){const t=this.method;return t===Oe.LENGTH||t===Oe.DISTANCE||t===Oe.DOT?"float":t===Oe.CROSS?"vec3":t===Oe.ALL||t===Oe.ANY?"bool":t===Oe.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:t,bNode:n,method:s}=this;let r=null;if(s===Oe.ONE_MINUS)r=Ui(1,t);else if(s===Oe.RECIPROCAL)r=sd(1,t);else if(s===Oe.DIFFERENCE)r=dr(Ui(t,n));else if(s===Oe.TRANSFORM_DIRECTION){let a=t,o=n;e.isMatrix(a.getNodeType(e))?o=jt(ye(o),0):a=jt(ye(a),0);const l=Wn(a,o).xyz;r=Om(l)}return r!==null?r:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let s=this.method;const r=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,l=this.bNode,c=this.cNode,d=e.renderer.coordinateSystem;if(s===Oe.NEGATE)return e.format("( - "+o.build(e,a)+" )",r,t);{const h=[];return s===Oe.CROSS?h.push(o.build(e,r),l.build(e,r)):d===$o&&s===Oe.STEP?h.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":a),l.build(e,a)):d===$o&&(s===Oe.MIN||s===Oe.MAX)?h.push(o.build(e,a),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":a)):s===Oe.REFRACT?h.push(o.build(e,a),l.build(e,a),c.build(e,"float")):s===Oe.MIX?h.push(o.build(e,a),l.build(e,a),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":a)):(d===id&&s===Oe.ATAN&&l!==null&&(s="atan2"),e.shaderStage!=="fragment"&&(s===Oe.DFDX||s===Oe.DFDY)&&(console.warn(`THREE.TSL: '${s}' is not supported in the ${e.shaderStage} stage.`),s="/*"+s+"*/"),h.push(o.build(e,a)),l!==null&&h.push(l.build(e,a)),c!==null&&h.push(c.build(e,a))),e.format(`${e.getMethod(s,r)}( ${h.join(", ")} )`,r,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Oe.ALL="all";Oe.ANY="any";Oe.RADIANS="radians";Oe.DEGREES="degrees";Oe.EXP="exp";Oe.EXP2="exp2";Oe.LOG="log";Oe.LOG2="log2";Oe.SQRT="sqrt";Oe.INVERSE_SQRT="inversesqrt";Oe.FLOOR="floor";Oe.CEIL="ceil";Oe.NORMALIZE="normalize";Oe.FRACT="fract";Oe.SIN="sin";Oe.COS="cos";Oe.TAN="tan";Oe.ASIN="asin";Oe.ACOS="acos";Oe.ATAN="atan";Oe.ABS="abs";Oe.SIGN="sign";Oe.LENGTH="length";Oe.NEGATE="negate";Oe.ONE_MINUS="oneMinus";Oe.DFDX="dFdx";Oe.DFDY="dFdy";Oe.ROUND="round";Oe.RECIPROCAL="reciprocal";Oe.TRUNC="trunc";Oe.FWIDTH="fwidth";Oe.TRANSPOSE="transpose";Oe.DETERMINANT="determinant";Oe.INVERSE="inverse";Oe.EQUALS="equals";Oe.MIN="min";Oe.MAX="max";Oe.STEP="step";Oe.REFLECT="reflect";Oe.DISTANCE="distance";Oe.DIFFERENCE="difference";Oe.DOT="dot";Oe.CROSS="cross";Oe.POW="pow";Oe.TRANSFORM_DIRECTION="transformDirection";Oe.MIX="mix";Oe.CLAMP="clamp";Oe.REFRACT="refract";Oe.SMOOTHSTEP="smoothstep";Oe.FACEFORWARD="faceforward";const PQ=te(1e-6),HCe=te(1e6),DN=te(Math.PI),jCe=te(Math.PI*2),OQ=Tt(Oe,Oe.ALL).setParameterLength(1),LQ=Tt(Oe,Oe.ANY).setParameterLength(1),UQ=Tt(Oe,Oe.RADIANS).setParameterLength(1),BQ=Tt(Oe,Oe.DEGREES).setParameterLength(1),Zz=Tt(Oe,Oe.EXP).setParameterLength(1),Jb=Tt(Oe,Oe.EXP2).setParameterLength(1),yD=Tt(Oe,Oe.LOG).setParameterLength(1),Kh=Tt(Oe,Oe.LOG2).setParameterLength(1),pp=Tt(Oe,Oe.SQRT).setParameterLength(1),Qz=Tt(Oe,Oe.INVERSE_SQRT).setParameterLength(1),Zh=Tt(Oe,Oe.FLOOR).setParameterLength(1),vD=Tt(Oe,Oe.CEIL).setParameterLength(1),Om=Tt(Oe,Oe.NORMALIZE).setParameterLength(1),$m=Tt(Oe,Oe.FRACT).setParameterLength(1),$u=Tt(Oe,Oe.SIN).setParameterLength(1),am=Tt(Oe,Oe.COS).setParameterLength(1),IQ=Tt(Oe,Oe.TAN).setParameterLength(1),FQ=Tt(Oe,Oe.ASIN).setParameterLength(1),Jz=Tt(Oe,Oe.ACOS).setParameterLength(1),_D=Tt(Oe,Oe.ATAN).setParameterLength(1,2),dr=Tt(Oe,Oe.ABS).setParameterLength(1),qE=Tt(Oe,Oe.SIGN).setParameterLength(1),Qh=Tt(Oe,Oe.LENGTH).setParameterLength(1),zQ=Tt(Oe,Oe.NEGATE).setParameterLength(1),VQ=Tt(Oe,Oe.ONE_MINUS).setParameterLength(1),eV=Tt(Oe,Oe.DFDX).setParameterLength(1),tV=Tt(Oe,Oe.DFDY).setParameterLength(1),kQ=Tt(Oe,Oe.ROUND).setParameterLength(1),GQ=Tt(Oe,Oe.RECIPROCAL).setParameterLength(1),nV=Tt(Oe,Oe.TRUNC).setParameterLength(1),HQ=Tt(Oe,Oe.FWIDTH).setParameterLength(1),jQ=Tt(Oe,Oe.TRANSPOSE).setParameterLength(1),$Q=Tt(Oe,Oe.DETERMINANT).setParameterLength(1),WQ=Tt(Oe,Oe.INVERSE).setParameterLength(1),qQ=(i,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),Yz(i,e)),yu=Tt(Oe,Oe.MIN).setParameterLength(2,1/0),ma=Tt(Oe,Oe.MAX).setParameterLength(2,1/0),xD=Tt(Oe,Oe.STEP).setParameterLength(2),XQ=Tt(Oe,Oe.REFLECT).setParameterLength(2),YQ=Tt(Oe,Oe.DISTANCE).setParameterLength(2),KQ=Tt(Oe,Oe.DIFFERENCE).setParameterLength(2),i0=Tt(Oe,Oe.DOT).setParameterLength(2),bD=Tt(Oe,Oe.CROSS).setParameterLength(2),Wd=Tt(Oe,Oe.POW).setParameterLength(2),iV=i=>Wn(i,i),ZQ=i=>Wn(i,i,i),QQ=i=>Wn(i,i,i,i),JQ=Tt(Oe,Oe.TRANSFORM_DIRECTION).setParameterLength(2),eJ=i=>Wn(qE(i),Wd(dr(i),1/3)),sV=i=>i0(i,i),Wi=Tt(Oe,Oe.MIX).setParameterLength(3),ef=(i,e=0,t=1)=>st(new Oe(Oe.CLAMP,st(i),st(e),st(t))),rV=i=>ef(i),aV=Tt(Oe,Oe.REFRACT).setParameterLength(3),tf=Tt(Oe,Oe.SMOOTHSTEP).setParameterLength(3),oV=Tt(Oe,Oe.FACEFORWARD).setParameterLength(3),tJ=ve(([i])=>{const n=43758.5453,s=i0(i.xy,ot(12.9898,78.233)),r=lM(s,DN);return $m($u(r).mul(n))}),nJ=(i,e,t)=>Wi(e,t,i),iJ=(i,e,t)=>tf(e,t,i),sJ=(i,e)=>xD(e,i),rJ=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),_D(i,e)),$Ce=oV,WCe=Qz;it("all",OQ);it("any",LQ);it("equals",qQ);it("radians",UQ);it("degrees",BQ);it("exp",Zz);it("exp2",Jb);it("log",yD);it("log2",Kh);it("sqrt",pp);it("inverseSqrt",Qz);it("floor",Zh);it("ceil",vD);it("normalize",Om);it("fract",$m);it("sin",$u);it("cos",am);it("tan",IQ);it("asin",FQ);it("acos",Jz);it("atan",_D);it("abs",dr);it("sign",qE);it("length",Qh);it("lengthSq",sV);it("negate",zQ);it("oneMinus",VQ);it("dFdx",eV);it("dFdy",tV);it("round",kQ);it("reciprocal",GQ);it("trunc",nV);it("fwidth",HQ);it("atan2",rJ);it("min",yu);it("max",ma);it("step",sJ);it("reflect",XQ);it("distance",YQ);it("dot",i0);it("cross",bD);it("pow",Wd);it("pow2",iV);it("pow3",ZQ);it("pow4",QQ);it("transformDirection",JQ);it("mix",nJ);it("clamp",ef);it("refract",aV);it("smoothstep",iJ);it("faceForward",oV);it("difference",KQ);it("saturate",rV);it("cbrt",eJ);it("transpose",jQ);it("determinant",$Q);it("inverse",WQ);it("rand",tJ);class qCe extends Jt{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return e.flowBuildStage(this,"setup"),this.getNodeType(e);const s=t.getNodeType(e);if(n!==null){const r=n.getNodeType(e);if(e.getTypeLength(r)>e.getTypeLength(s))return r}return s}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),s=this.elseNode?this.elseNode.cache():null,r=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=r,s!==null&&(e.getDataFromNode(s).parentNodeBlock=r);const a=e.context.uniformFlow,o=e.getNodeProperties(this);o.condNode=t,o.ifNode=a?n:n.context({nodeBlock:n}),o.elseNode=s?a?s:s.context({nodeBlock:s}):null}generate(e,t){const n=this.getNodeType(e),s=e.getDataFromNode(this);if(s.nodeProperty!==void 0)return s.nodeProperty;const{condNode:r,ifNode:a,elseNode:o}=e.getNodeProperties(this),l=e.currentFunctionNode,c=t!=="void",d=c?If(n).build(e):"";s.nodeProperty=d;const h=r.build(e,"bool");if(e.context.uniformFlow&&o!==null){const _=a.build(e,n),x=o.build(e,n),T=e.getTernary(h,_,x);return e.format(T,n,t)}e.addFlowCode(`
${e.tab}if ( ${h} ) {

`).addFlowTab();let v=a.build(e,n);if(v&&(c?v=d+" = "+v+";":(v="return "+v+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),v="// "+v))),e.removeFlowTab().addFlowCode(e.tab+"	"+v+`

`+e.tab+"}"),o!==null){e.addFlowCode(` else {

`).addFlowTab();let _=o.build(e,n);_&&(c?_=d+" = "+_+";":(_="return "+_+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),_="// "+_))),e.removeFlowTab().addFlowCode(e.tab+"	"+_+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(d,n,t)}}const qo=Un(qCe).setParameterLength(2,3);it("select",qo);class lV extends Jt{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}getMemberType(e,t){return this.node.getMemberType(e,t)}analyze(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const s=this.node.build(e,t);return e.setContext(n),s}}const cM=Un(lV).setParameterLength(1,2),aJ=i=>cM(i,{uniformFlow:!0}),cV=(i,e)=>cM(i,{nodeName:e});function oJ(i,e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),cV(i,e)}it("context",cM);it("label",oJ);it("uniformFlow",aJ);it("setName",cV);class J1 extends Jt{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}getIntent(){return this.intent}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}build(...e){return this.intent===!0&&e[0].getNodeProperties(this).assign!==!0?this.node.build(...e):super.build(...e)}generate(e){const{node:t,name:n,readOnly:s}=this,{renderer:r}=e,a=r.backend.isWebGPUBackend===!0;let o=!1,l=!1;s&&(o=e.isDeterministic(t),l=a?s:o);const c=e.getVectorType(this.getNodeType(e)),d=t.build(e,c),h=e.getVarFromNode(this,n,c,void 0,l),m=e.getPropertyName(h);let v=m;if(l)if(a)v=o?`const ${m}`:`let ${m}`;else{const _=t.getArrayCount(e);v=`const ${e.getVar(h.type,m,_)}`}return e.addLineFlowCode(`${v} = ${d}`,this),m}}const uV=Un(J1),lJ=(i,e=null)=>uV(i,e).toStack(),cJ=(i,e=null)=>uV(i,e,!0).toStack(),uJ=i=>dD()===null?i:uV(i).setIntent(!0).toStack();it("toVar",lJ);it("toConst",cJ);it("toVarIntent",uJ);class dJ extends Jt{static get type(){return"SubBuild"}constructor(e,t,n=null){super(n),this.node=e,this.name=t,this.isSubBuildNode=!0}getNodeType(e){if(this.nodeType!==null)return this.nodeType;e.addSubBuild(this.name);const t=this.node.getNodeType(e);return e.removeSubBuild(),t}build(e,...t){e.addSubBuild(this.name);const n=this.node.build(e,...t);return e.removeSubBuild(),n}}const Nb=(i,e,t=null)=>st(new dJ(st(i),e,t));class fJ extends Jt{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const s=this.name,r=this.getNodeType(e),a=this.interpolationType,o=this.interpolationSampling;t.varying=n=e.getVaryingFromNode(this,s,r,a,o),t.node=Nb(this.node,"VERTEX")}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(ub.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(ub.VERTEX,this.node)}generate(e){const t=e.getSubBuildProperty("property",e.currentStack),n=e.getNodeProperties(this),s=this.setupVarying(e);if(n[t]===void 0){const r=this.getNodeType(e),a=e.getPropertyName(s,ub.VERTEX);e.flowNodeFromShaderStage(ub.VERTEX,n.node,r,a),n[t]=a}return e.getPropertyName(s)}}const mp=Un(fJ).setParameterLength(1,2),hJ=i=>mp(i);it("toVarying",mp);it("toVertexStage",hJ);it("varying",(...i)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),mp(...i)));it("vertexStage",(...i)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),mp(...i)));const pJ=ve(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return Wi(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),mJ=ve(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return Wi(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),dV="WorkingColorSpace",XCe="OutputColorSpace";class SD extends ga{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===dV?Sn.workingColorSpace:t===XCe?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),s=this.resolveColorSpace(e,this.target);let r=t;return Sn.enabled===!1||n===s||!n||!s||(Sn.getTransfer(n)===Kt&&(r=jt(pJ(r.rgb),r.a)),Sn.getPrimaries(n)!==Sn.getPrimaries(s)&&(r=jt(Zl(Sn._getMatrix(new Kn,n,s)).mul(r.rgb),r.a)),Sn.getTransfer(s)===Kt&&(r=jt(mJ(r.rgb),r.a))),r}}const gJ=(i,e)=>st(new SD(st(i),dV,e)),TD=(i,e)=>st(new SD(st(i),e,dV)),YCe=(i,e,t)=>st(new SD(st(i),e,t));it("workingToColorSpace",gJ);it("colorSpaceToWorking",TD);let KCe=class extends n0{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(t,n,s)}};class yJ extends Jt{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,s=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=s,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=ii.OBJECT}setGroup(e){return this.group=e,this}element(e){return st(new KCe(this,st(e)))}setNodeType(e){const t=pn(null,e);this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let s=1;s<t.length;s++)n=n[t[s]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const ZCe=(i,e,t)=>st(new yJ(i,e,t));class vJ extends yJ{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(cn)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const _J=(i,e,t=null)=>st(new vJ(i,e,t));class xJ extends ga{static get type(){return"ToneMappingNode"}constructor(e,t=SJ,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return FE(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===bo)return t;let s=null;const r=e.renderer.library.getToneMappingFunction(n);return r!==null?s=jt(r(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),s=t),s}}const bJ=(i,e,t)=>st(new xJ(i,st(e),st(t))),SJ=_J("toneMappingExposure","float");it("toneMapping",(i,e,t)=>bJ(e,t,i));class TJ extends Bz{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,s=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=s,this.usage=a_,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,s=e.getTypeLength(t),r=this.bufferStride||s,a=this.bufferOffset,o=n.isInterleavedBuffer===!0?n:new PS(n,r),l=new Dm(o,s,a);o.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),s=e.getPropertyName(n);let r=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=s,r=s):r=mp(this).build(e,t),r}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const uM=(i,e=null,t=0,n=0)=>st(new TJ(i,e,t,n)),EJ=(i,e=null,t=0,n=0)=>uM(i,e,t,n).setUsage(Qg),PN=(i,e=null,t=0,n=0)=>uM(i,e,t,n).setInstanced(!0),cB=(i,e=null,t=0,n=0)=>EJ(i,e,t,n).setInstanced(!0);it("toAttribute",i=>uM(i.value));class wJ extends Jt{static get type(){return"ComputeNode"}constructor(e,t){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=t,this.count=null,this.version=1,this.name="",this.updateBeforeType=ii.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.build(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const s=this.computeNode.build(e,"void");s!==""&&e.addLineFlowCode(s,this)}else{const r=e.getNodeProperties(this).outputComputeNode;if(r)return r.build(e,t)}}}const fV=(i,e=[64])=>{(e.length===0||e.length>3)&&console.error("THREE.TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let t=0;t<e.length;t++){const n=e[t];(typeof n!="number"||n<=0||!Number.isInteger(n))&&console.error(`THREE.TSL: compute() workgroupSize element at index [ ${t} ] must be a positive integer`)}for(;e.length<3;)e.push(1);return st(new wJ(st(i),e))},MJ=(i,e,t)=>fV(i,t).setCount(e);it("compute",MJ);it("computeKernel",fV);class AJ extends Jt{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const s=this.node.getNodeType(e);return e.setCache(t),s}build(e,...t){const n=e.getCache(),s=e.getCacheFromNode(this,this.parent);e.setCache(s);const r=this.node.build(e,...t);return e.setCache(n),r}}const eE=(i,e)=>st(new AJ(st(i),e));it("cache",eE);class CJ extends Jt{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const RJ=Un(CJ).setParameterLength(2);it("bypass",RJ);class hV extends Jt{static get type(){return"RemapNode"}constructor(e,t,n,s=te(0),r=te(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=s,this.outHighNode=r,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:s,outHighNode:r,doClamp:a}=this;let o=e.sub(t).div(n.sub(t));return a===!0&&(o=o.clamp()),o.mul(r.sub(s)).add(s)}}const NJ=Un(hV,null,null,{doClamp:!1}).setParameterLength(3,5),DJ=Un(hV).setParameterLength(3,5);it("remap",NJ);it("remapClamp",DJ);class tE extends Jt{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),s=this.snippet;if(n==="void")e.addLineFlowCode(s,this);else return e.format(s,n,t)}}const Lm=Un(tE).setParameterLength(1,2),PJ=i=>(i?qo(i,Lm("discard")):Lm("discard")).toStack(),QCe=()=>Lm("return").toStack();it("discard",PJ);class OJ extends ga{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||bo,s=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||kl;return n!==bo&&(t=t.toneMapping(n)),s!==kl&&s!==Sn.workingColorSpace&&(t=t.workingToColorSpace(s)),t}}const pV=(i,e=null,t=null)=>st(new OJ(st(i),e,t));it("renderOutput",pV);class LJ extends ga{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e),s="--- TSL debug - "+e.shaderStage+" shader ---",r="-".repeat(s.length);let a="";return a+="// #"+s+`#
`,a+=e.flow.code.replace(/^\t/mg,"")+`
`,a+="/* ... */ "+n+` /* ... */
`,a+="// #"+r+`#
`,t!==null?t(e,a):console.log(a),n}}const UJ=(i,e=null)=>st(new LJ(st(i),e)).toStack();it("debug",UJ);function JCe(i){console.warn("THREE.TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",i)}class mV extends Jt{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const s=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(s)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const r=e.geometry.getAttribute(t),a=e.getTypeFromAttribute(r),o=e.getAttribute(t,a);return e.shaderStage==="vertex"?e.format(o.name,a,n):mp(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Sc=(i,e=null)=>st(new mV(i,e)),Ns=(i=0)=>Sc("uv"+(i>0?i:""),"vec2");class BJ extends Jt{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),s=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${s} )`,this.getNodeType(e),t)}}const oy=Un(BJ).setParameterLength(1,2);class IJ extends jS{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=ii.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:s,height:r}=n;this.value=Math.log2(Math.max(s,r))}}}const gV=Un(IJ).setParameterLength(1),yV=new Es;class Wf extends jS{static get type(){return"TextureNode"}constructor(e=yV,t=null,n=null,s=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=s,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.offsetNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=ii.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Rs?"uvec4":this.value.type===oo?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Ns(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=pn(this.value.matrix)),this._matrixUniform.mul(ye(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?ii.OBJECT:ii.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(de(oy(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let s=this.uvNode;(s===null||e.context.forceUVContext===!0)&&e.context.getUV&&(s=e.context.getUV(this,e)),s||(s=this.getDefaultUV()),this.updateMatrix===!0&&(s=this.getTransformedUV(s)),s=this.setupUV(e,s);let r=this.levelNode;r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),t.uvNode=s,t.levelNode=r,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode,t.offsetNode=this.offsetNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateOffset(e,t){return t.build(e,"ivec2")}generateSnippet(e,t,n,s,r,a,o,l,c){const d=this.value;let h;return s?h=e.generateTextureLevel(d,t,n,s,a,c):r?h=e.generateTextureBias(d,t,n,r,a,c):l?h=e.generateTextureGrad(d,t,n,l,a,c):o?h=e.generateTextureCompare(d,t,n,o,a,c):this.sampler===!1?h=e.generateTextureLoad(d,t,n,a,c):h=e.generateTexture(d,t,n,a,c),h}generate(e,t){const n=this.value,s=e.getNodeProperties(this),r=super.generate(e,"property");if(/^sampler/.test(t))return r+"_sampler";if(e.isReference(t))return r;{const a=e.getDataFromNode(this);let o=a.propertyName;if(o===void 0){const{uvNode:d,levelNode:h,biasNode:m,compareNode:v,depthNode:_,gradNode:x,offsetNode:T}=s,b=this.generateUV(e,d),w=h?h.build(e,"float"):null,M=m?m.build(e,"float"):null,R=_?_.build(e,"int"):null,N=v?v.build(e,"float"):null,D=x?[x[0].build(e,"vec2"),x[1].build(e,"vec2")]:null,L=T?this.generateOffset(e,T):null,F=e.getVarFromNode(this);o=e.getPropertyName(F);const I=this.generateSnippet(e,r,b,w,M,R,N,D,L);e.addLineFlowCode(`${o} = ${I}`,this),a.snippet=I,a.propertyName=o}let l=o;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(l=TD(Lm(l,c),n.colorSpace).setup(e).build(e,c)),e.format(l,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=st(e),t.referenceNode=this.getBase(),st(t)}load(e){return this.sample(e).setSampler(!1)}blur(e){const t=this.clone();t.biasNode=st(e).mul(gV(t)),t.referenceNode=this.getBase();const n=t.value;return t.generateMipmaps===!1&&(n&&n.generateMipmaps===!1||n.minFilter===Fs||n.magFilter===Fs)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),st(t)}level(e){const t=this.clone();return t.levelNode=st(e),t.referenceNode=this.getBase(),st(t)}size(e){return oy(this,e)}bias(e){const t=this.clone();return t.biasNode=st(e),t.referenceNode=this.getBase(),st(t)}getBase(){return this.referenceNode?this.referenceNode.getBase():this}compare(e){const t=this.clone();return t.compareNode=st(e),t.referenceNode=this.getBase(),st(t)}grad(e,t){const n=this.clone();return n.gradNode=[st(e),st(t)],n.referenceNode=this.getBase(),st(n)}depth(e){const t=this.clone();return t.depthNode=st(e),t.referenceNode=this.getBase(),st(t)}offset(e){const t=this.clone();return t.offsetNode=st(e),t.referenceNode=this.getBase(),st(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}const eRe=Un(Wf).setParameterLength(1,4).setName("texture"),Ni=(i=yV,e=null,t=null,n=null)=>{let s;return i&&i.isTextureNode===!0?(s=st(i.clone()),s.referenceNode=i.getBase(),e!==null&&(s.uvNode=st(e)),t!==null&&(s.levelNode=st(t)),n!==null&&(s.biasNode=st(n))):s=eRe(i,e,t,n),s},tRe=(i=yV)=>Ni(i),Ea=(...i)=>Ni(...i).setSampler(!1),nRe=i=>(i.isNode===!0?i:Ni(i)).convert("sampler"),iRe=i=>(i.isNode===!0?i:Ni(i)).convert("samplerComparison");class ED extends jS{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const dM=(i,e,t)=>st(new ED(i,e,t));class sRe extends n0{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),s=this.node.getPaddedType();return e.format(t,s,n)}}class FJ extends ED{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?mm(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=ii.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let s=0;s<e.length;s++){const r=s*4;t[r]=e[s]}else if(n==="color")for(let s=0;s<e.length;s++){const r=s*4,a=e[s];t[r]=a.r,t[r+1]=a.g,t[r+2]=a.b||0}else if(n==="mat2")for(let s=0;s<e.length;s++){const r=s*4,a=e[s];t[r]=a.elements[0],t[r+1]=a.elements[1],t[r+2]=a.elements[2],t[r+3]=a.elements[3]}else if(n==="mat3")for(let s=0;s<e.length;s++){const r=s*16,a=e[s];t[r]=a.elements[0],t[r+1]=a.elements[1],t[r+2]=a.elements[2],t[r+4]=a.elements[3],t[r+5]=a.elements[4],t[r+6]=a.elements[5],t[r+8]=a.elements[6],t[r+9]=a.elements[7],t[r+10]=a.elements[8],t[r+15]=1}else if(n==="mat4")for(let s=0;s<e.length;s++){const r=s*16,a=e[s];for(let o=0;o<a.elements.length;o++)t[r+o]=a.elements[o]}else for(let s=0;s<e.length;s++){const r=s*4,a=e[s];t[r]=a.x,t[r+1]=a.y,t[r+2]=a.z||0,t[r+3]=a.w||0}}setup(e){const t=this.array.length,n=this.elementType;let s=Float32Array;const r=this.paddedType,a=e.getTypeLength(r);return n.charAt(0)==="i"&&(s=Int32Array),n.charAt(0)==="u"&&(s=Uint32Array),this.value=new s(t*a),this.bufferCount=t,this.bufferType=r,super.setup(e)}element(e){return st(new sRe(this,st(e)))}}const Hl=(i,e)=>st(new FJ(i,e));class rRe extends Jt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const Wm=Un(rRe).setParameterLength(1);let o1,l1;class er extends Jt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this._output=null,this.isViewportNode=!0}getNodeType(){return this.scope===er.DPR?"float":this.scope===er.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=ii.NONE;return(this.scope===er.SIZE||this.scope===er.VIEWPORT||this.scope===er.DPR)&&(e=ii.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===er.VIEWPORT?t!==null?l1.copy(t.viewport):(e.getViewport(l1),l1.multiplyScalar(e.getPixelRatio())):this.scope===er.DPR?this._output.value=e.getPixelRatio():t!==null?(o1.width=t.width,o1.height=t.height):e.getDrawingBufferSize(o1)}setup(){const e=this.scope;let t=null;return e===er.SIZE?t=pn(o1||(o1=new lt)):e===er.VIEWPORT?t=pn(l1||(l1=new bn)):e===er.DPR?t=pn(1):t=ot(fM.div(d_)),this._output=t,t}generate(e){if(this.scope===er.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(d_).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}er.COORDINATE="coordinate";er.VIEWPORT="viewport";er.SIZE="size";er.UV="uv";er.DPR="dpr";const zJ=Ot(er,er.DPR),Tm=Ot(er,er.UV),d_=Ot(er,er.SIZE),fM=Ot(er,er.COORDINATE),Db=Ot(er,er.VIEWPORT),vV=Db.zw,VJ=fM.sub(Db.xy),aRe=VJ.div(vV),oRe=ve(()=>(console.warn('THREE.TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),d_),"vec2").once()(),s0=pn(0,"uint").setName("u_cameraIndex").setGroup(gD("cameraIndex")).toVarying("v_cameraIndex"),um=pn("float").setName("cameraNear").setGroup(cn).onRenderUpdate(({camera:i})=>i.near),dm=pn("float").setName("cameraFar").setGroup(cn).onRenderUpdate(({camera:i})=>i.far),zd=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.projectionMatrix);e=Hl(t).setGroup(cn).setName("cameraProjectionMatrices").element(i.isMultiViewCamera?Wm("gl_ViewID_OVR"):s0).toConst("cameraProjectionMatrix")}else e=pn("mat4").setName("cameraProjectionMatrix").setGroup(cn).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),lRe=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.projectionMatrixInverse);e=Hl(t).setGroup(cn).setName("cameraProjectionMatricesInverse").element(i.isMultiViewCamera?Wm("gl_ViewID_OVR"):s0).toConst("cameraProjectionMatrixInverse")}else e=pn("mat4").setName("cameraProjectionMatrixInverse").setGroup(cn).onRenderUpdate(({camera:t})=>t.projectionMatrixInverse);return e}).once()(),ld=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.matrixWorldInverse);e=Hl(t).setGroup(cn).setName("cameraViewMatrices").element(i.isMultiViewCamera?Wm("gl_ViewID_OVR"):s0).toConst("cameraViewMatrix")}else e=pn("mat4").setName("cameraViewMatrix").setGroup(cn).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),cRe=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.matrixWorld);e=Hl(t).setGroup(cn).setName("cameraWorldMatrices").element(i.isMultiViewCamera?Wm("gl_ViewID_OVR"):s0).toConst("cameraWorldMatrix")}else e=pn("mat4").setName("cameraWorldMatrix").setGroup(cn).onRenderUpdate(({camera:t})=>t.matrixWorld);return e}).once()(),uRe=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.normalMatrix);e=Hl(t).setGroup(cn).setName("cameraNormalMatrices").element(i.isMultiViewCamera?Wm("gl_ViewID_OVR"):s0).toConst("cameraNormalMatrix")}else e=pn("mat3").setName("cameraNormalMatrix").setGroup(cn).onRenderUpdate(({camera:t})=>t.normalMatrix);return e}).once()(),nE=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(let s=0,r=i.cameras.length;s<r;s++)t.push(new ae);e=Hl(t).setGroup(cn).setName("cameraPositions").onRenderUpdate(({camera:s},r)=>{const a=s.cameras,o=r.array;for(let l=0,c=a.length;l<c;l++)o[l].setFromMatrixPosition(a[l].matrixWorld)}).element(i.isMultiViewCamera?Wm("gl_ViewID_OVR"):s0).toConst("cameraPosition")}else e=pn(new ae).setName("cameraPosition").setGroup(cn).onRenderUpdate(({camera:t},n)=>n.value.setFromMatrixPosition(t.matrixWorld));return e}).once()(),dRe=ve(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.viewport);e=Hl(t,"vec4").setGroup(cn).setName("cameraViewports").element(s0).toConst("cameraViewport")}else e=jt(0,0,d_.x,d_.y).toConst("cameraViewport");return e}).once()(),K8=new co;class Li extends Jt{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=ii.OBJECT,this.uniformNode=new jS(null)}getNodeType(){const e=this.scope;if(e===Li.WORLD_MATRIX)return"mat4";if(e===Li.POSITION||e===Li.VIEW_POSITION||e===Li.DIRECTION||e===Li.SCALE)return"vec3";if(e===Li.RADIUS)return"float"}update(e){const t=this.object3d,n=this.uniformNode,s=this.scope;if(s===Li.WORLD_MATRIX)n.value=t.matrixWorld;else if(s===Li.POSITION)n.value=n.value||new ae,n.value.setFromMatrixPosition(t.matrixWorld);else if(s===Li.SCALE)n.value=n.value||new ae,n.value.setFromMatrixScale(t.matrixWorld);else if(s===Li.DIRECTION)n.value=n.value||new ae,t.getWorldDirection(n.value);else if(s===Li.VIEW_POSITION){const r=e.camera;n.value=n.value||new ae,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(r.matrixWorldInverse)}else if(s===Li.RADIUS){const r=e.object.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),K8.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),n.value=K8.radius}}generate(e){const t=this.scope;return t===Li.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===Li.POSITION||t===Li.VIEW_POSITION||t===Li.DIRECTION||t===Li.SCALE?this.uniformNode.nodeType="vec3":t===Li.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Li.WORLD_MATRIX="worldMatrix";Li.POSITION="position";Li.SCALE="scale";Li.VIEW_POSITION="viewPosition";Li.DIRECTION="direction";Li.RADIUS="radius";const fRe=Un(Li,Li.DIRECTION).setParameterLength(1),hRe=Un(Li,Li.WORLD_MATRIX).setParameterLength(1),kJ=Un(Li,Li.POSITION).setParameterLength(1),pRe=Un(Li,Li.SCALE).setParameterLength(1),mRe=Un(Li,Li.VIEW_POSITION).setParameterLength(1),gRe=Un(Li,Li.RADIUS).setParameterLength(1);class rd extends Li{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const yRe=Ot(rd,rd.DIRECTION),qd=Ot(rd,rd.WORLD_MATRIX),vRe=Ot(rd,rd.POSITION),_Re=Ot(rd,rd.SCALE),xRe=Ot(rd,rd.VIEW_POSITION),GJ=Ot(rd,rd.RADIUS),HJ=pn(new Kn).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),bRe=pn(new an).onObjectUpdate(({object:i},e)=>e.value.copy(i.matrixWorld).invert()),Um=ve(i=>i.renderer.overrideNodes.modelViewMatrix||jJ).once()().toVar("modelViewMatrix"),jJ=ld.mul(qd),uB=ve(i=>(i.context.isHighPrecisionModelViewMatrix=!0,pn("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),dB=ve(i=>{const e=i.context.isHighPrecisionModelViewMatrix;return pn("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),gl=Sc("position","vec3"),Ma=gl.toVarying("positionLocal"),ON=gl.toVarying("positionPrevious"),Ju=ve(i=>qd.mul(Ma).xyz.toVarying(i.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),_V=ve(()=>Ma.transformDirection(qd).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),Aa=ve(i=>i.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),br=Aa.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class $J extends Jt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if(e.shaderStage!=="fragment")return"true";const{material:t}=e;return t.side===Ts?"false":e.getFrontFacing()}}const WJ=Ot($J),xV=te(WJ).mul(2).sub(1),$S=ve(([i],{material:e})=>{const t=e.side;return t===Ts?i=i.mul(-1):t===Go&&(i=i.mul(xV)),i}),wD=Sc("normal","vec3"),vu=ve(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),ye(0,1,0)):wD,"vec3").once()().toVar("normalLocal"),qJ=Aa.dFdx().cross(Aa.dFdy()).normalize().toVar("normalFlat"),eS=ve(i=>{let e;return i.material.flatShading===!0?e=qJ:e=bV(vu).toVarying("v_normalViewGeometry").normalize(),e},"vec3").once()().toVar("normalViewGeometry"),XJ=ve(i=>{let e=eS.transformDirection(ld);return i.material.flatShading!==!0&&(e=e.toVarying("v_normalWorldGeometry")),e.normalize().toVar("normalWorldGeometry")},"vec3").once()(),bs=ve(({subBuildFn:i,material:e,context:t})=>{let n;return i==="NORMAL"||i==="VERTEX"?(n=eS,e.flatShading!==!0&&(n=$S(n))):n=t.setupNormal().context({getUV:null}),n},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),r0=bs.transformDirection(ld).toVar("normalWorld"),wv=ve(({subBuildFn:i,context:e})=>{let t;return i==="NORMAL"||i==="VERTEX"?t=bs:t=e.setupClearcoatNormal().context({getUV:null}),t},"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),YJ=ve(([i,e=qd])=>{const t=Zl(e),n=i.div(ye(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),bV=ve(([i],e)=>{const t=e.renderer.overrideNodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=HJ.mul(i);return ld.transformDirection(n)}),SRe=ve(()=>(console.warn('THREE.TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),bs)).once(["NORMAL","VERTEX"])(),TRe=ve(()=>(console.warn('THREE.TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),r0)).once(["NORMAL","VERTEX"])(),ERe=ve(()=>(console.warn('THREE.TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),wv)).once(["NORMAL","VERTEX"])(),Z8=new Kl,HL=new an,KJ=pn(0).onReference(({material:i})=>i).onObjectUpdate(({material:i})=>i.refractionRatio),CR=pn(1).onReference(({material:i})=>i).onObjectUpdate(function({material:i,scene:e}){return i.envMap?i.envMapIntensity:e.environmentIntensity}),SV=pn(new an).onReference(function(i){return i.material}).onObjectUpdate(function({material:i,scene:e}){const t=e.environment!==null&&i.envMap===null?e.environmentRotation:i.envMapRotation;return t?(Z8.copy(t),HL.makeRotationFromEuler(Z8)):HL.identity(),HL}),ZJ=br.negate().reflect(bs),QJ=br.negate().refract(bs,KJ),JJ=ZJ.transformDirection(ld).toVar("reflectVector"),eee=QJ.transformDirection(ld).toVar("reflectVector"),tee=new Gm;class nee extends Wf{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,s=null){super(e,t,n,s),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===gu?JJ:e.mapping===nd?eee:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),ye(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===id||!n.isRenderTargetTexture)&&(t=ye(t.x.negate(),t.yz)),SV.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const TV=Un(nee).setParameterLength(1,4).setName("cubeTexture"),tS=(i=tee,e=null,t=null,n=null)=>{let s;return i&&i.isCubeTextureNode===!0?(s=st(i.clone()),s.referenceNode=i,e!==null&&(s.uvNode=st(e)),t!==null&&(s.levelNode=st(t)),n!==null&&(s.biasNode=st(n))):s=TV(i,e,t,n),s},wRe=(i=tee)=>TV(i);class MRe extends n0{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(t,n,s)}}class hM extends Jt{static get type(){return"ReferenceNode"}constructor(e,t,n=null,s=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=s,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=ii.OBJECT}element(e){return st(new MRe(this,st(e)))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let t=null;this.count!==null?t=dM(null,e,this.count):Array.isArray(this.getValueFromReference())?t=Hl(null,e):e==="texture"?t=Ni(null):e==="cubeTexture"?t=tS(null):t=pn(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.setName(this.name),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let s=1;s<t.length;s++)n=n[t[s]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const tr=(i,e,t)=>st(new hM(i,e,t)),fB=(i,e,t,n)=>st(new hM(i,e,n,t));class iee extends hM{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const fm=(i,e,t=null)=>st(new iee(i,e,t)),see=Ns(),ARe=Aa.dFdx(),CRe=Aa.dFdy(),ree=see.dFdx(),aee=see.dFdy(),oee=bs,lee=CRe.cross(oee),cee=oee.cross(ARe),hB=lee.mul(ree.x).add(cee.mul(aee.x)),pB=lee.mul(ree.y).add(cee.mul(aee.y)),Q8=hB.dot(hB).max(pB.dot(pB)),uee=Q8.equal(0).select(0,Q8.inverseSqrt()),RRe=hB.mul(uee).toVar("tangentViewFrame"),NRe=pB.mul(uee).toVar("bitangentViewFrame"),MD=ve(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),Sc("tangent","vec4")))(),pM=MD.xyz.toVar("tangentLocal"),AD=ve(({subBuildFn:i,geometry:e,material:t})=>{let n;return i==="VERTEX"||e.hasAttribute("tangent")?n=Um.mul(jt(pM,0)).xyz.toVarying("v_tangentView").normalize():n=RRe,t.flatShading!==!0&&(n=$S(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),dee=AD.transformDirection(ld).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),CD=ve(([i,e],{subBuildFn:t,material:n})=>{let s=i.mul(MD.w).xyz;return t==="NORMAL"&&n.flatShading!==!0&&(s=s.toVarying(e)),s}).once(["NORMAL"]),DRe=CD(wD.cross(MD),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),PRe=CD(vu.cross(pM),"v_bitangentLocal").normalize().toVar("bitangentLocal"),fee=ve(({subBuildFn:i,geometry:e,material:t})=>{let n;return i==="VERTEX"||e.hasAttribute("tangent")?n=CD(bs.cross(AD),"v_bitangentView").normalize():n=NRe,t.flatShading!==!0&&(n=$S(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),ORe=CD(r0.cross(dee),"v_bitangentWorld").normalize().toVar("bitangentWorld"),Mv=Zl(AD,fee,bs).toVar("TBNViewMatrix"),hee=br.mul(Mv),LRe=(i,e)=>i.sub(hee.mul(e)),pee=ve(()=>{let i=Fv.cross(br);return i=i.cross(Fv).normalize(),i=Wi(i,bs,Gg.mul(kh.oneMinus()).oneMinus().pow2().pow2()).normalize(),i}).once()();class mee extends ga{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Gf}setup({material:e}){const{normalMapType:t,scaleNode:n}=this;let s=this.node.mul(2).sub(1);if(n!==null){let a=n;e.flatShading===!0&&(a=$S(a)),s=ye(s.xy.mul(a),s.z)}let r=null;return t===E2?r=bV(s):t===Gf?r=Mv.mul(s).normalize():(console.error(`THREE.NodeMaterial: Unsupported normal map type: ${t}`),r=bs),r}}const mB=Un(mee).setParameterLength(1,2),URe=ve(({textureNode:i,bumpScale:e})=>{const t=s=>i.cache().context({getUV:r=>s(r.uvNode||Ns()),forceUVContext:!0}),n=te(t(s=>s));return ot(te(t(s=>s.add(s.dFdx()))).sub(n),te(t(s=>s.add(s.dFdy()))).sub(n)).mul(e)}),BRe=ve(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,s=e.dFdx().normalize(),r=e.dFdy().normalize(),a=t,o=r.cross(a),l=a.cross(s),c=s.dot(o).mul(xV),d=c.sign().mul(n.x.mul(o).add(n.y.mul(l)));return c.abs().mul(t).sub(d).normalize()});class gee extends ga{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=URe({textureNode:this.textureNode,bumpScale:e});return BRe({surf_pos:Aa,surf_norm:bs,dHdxy:t})}}const EV=Un(gee).setParameterLength(1,2),J8=new Map;class rt extends Jt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=J8.get(e);return n===void 0&&(n=fm(e,t),J8.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let s=null;if(n===rt.COLOR){const r=t.color!==void 0?this.getColor(n):ye();t.map&&t.map.isTexture===!0?s=r.mul(this.getTexture("map")):s=r}else if(n===rt.OPACITY){const r=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?s=r.mul(this.getTexture("alpha")):s=r}else if(n===rt.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?s=this.getTexture("specular").r:s=te(1);else if(n===rt.SPECULAR_INTENSITY){const r=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?s=r.mul(this.getTexture(n).a):s=r}else if(n===rt.SPECULAR_COLOR){const r=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?s=r.mul(this.getTexture(n).rgb):s=r}else if(n===rt.ROUGHNESS){const r=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?s=r.mul(this.getTexture(n).g):s=r}else if(n===rt.METALNESS){const r=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?s=r.mul(this.getTexture(n).b):s=r}else if(n===rt.EMISSIVE){const r=this.getFloat("emissiveIntensity"),a=this.getColor(n).mul(r);t.emissiveMap&&t.emissiveMap.isTexture===!0?s=a.mul(this.getTexture(n)):s=a}else if(n===rt.NORMAL)t.normalMap?(s=mB(this.getTexture("normal"),this.getCache("normalScale","vec2")),s.normalMapType=t.normalMapType):t.bumpMap?s=EV(this.getTexture("bump").r,this.getFloat("bumpScale")):s=bs;else if(n===rt.CLEARCOAT){const r=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?s=r.mul(this.getTexture(n).r):s=r}else if(n===rt.CLEARCOAT_ROUGHNESS){const r=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?s=r.mul(this.getTexture(n).r):s=r}else if(n===rt.CLEARCOAT_NORMAL)t.clearcoatNormalMap?s=mB(this.getTexture(n),this.getCache(n+"Scale","vec2")):s=bs;else if(n===rt.SHEEN){const r=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?s=r.mul(this.getTexture("sheenColor").rgb):s=r}else if(n===rt.SHEEN_ROUGHNESS){const r=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?s=r.mul(this.getTexture(n).a):s=r,s=s.clamp(.07,1)}else if(n===rt.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const r=this.getTexture(n);s=hD(ib.x,ib.y,ib.y.negate(),ib.x).mul(r.rg.mul(2).sub(ot(1)).normalize().mul(r.b))}else s=ib;else if(n===rt.IRIDESCENCE_THICKNESS){const r=tr("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const a=tr("0","float",t.iridescenceThicknessRange);s=r.sub(a).mul(this.getTexture(n).g).add(a)}else s=r}else if(n===rt.TRANSMISSION){const r=this.getFloat(n);t.transmissionMap?s=r.mul(this.getTexture(n).r):s=r}else if(n===rt.THICKNESS){const r=this.getFloat(n);t.thicknessMap?s=r.mul(this.getTexture(n).g):s=r}else if(n===rt.IOR)s=this.getFloat(n);else if(n===rt.LIGHT_MAP)s=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===rt.AO)s=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(n===rt.LINE_DASH_OFFSET)s=t.dashOffset?this.getFloat(n):te(0);else{const r=this.getNodeType(e);s=this.getCache(n,r)}return s}}rt.ALPHA_TEST="alphaTest";rt.COLOR="color";rt.OPACITY="opacity";rt.SHININESS="shininess";rt.SPECULAR="specular";rt.SPECULAR_STRENGTH="specularStrength";rt.SPECULAR_INTENSITY="specularIntensity";rt.SPECULAR_COLOR="specularColor";rt.REFLECTIVITY="reflectivity";rt.ROUGHNESS="roughness";rt.METALNESS="metalness";rt.NORMAL="normal";rt.CLEARCOAT="clearcoat";rt.CLEARCOAT_ROUGHNESS="clearcoatRoughness";rt.CLEARCOAT_NORMAL="clearcoatNormal";rt.EMISSIVE="emissive";rt.ROTATION="rotation";rt.SHEEN="sheen";rt.SHEEN_ROUGHNESS="sheenRoughness";rt.ANISOTROPY="anisotropy";rt.IRIDESCENCE="iridescence";rt.IRIDESCENCE_IOR="iridescenceIOR";rt.IRIDESCENCE_THICKNESS="iridescenceThickness";rt.IOR="ior";rt.TRANSMISSION="transmission";rt.THICKNESS="thickness";rt.ATTENUATION_DISTANCE="attenuationDistance";rt.ATTENUATION_COLOR="attenuationColor";rt.LINE_SCALE="scale";rt.LINE_DASH_SIZE="dashSize";rt.LINE_GAP_SIZE="gapSize";rt.LINE_WIDTH="linewidth";rt.LINE_DASH_OFFSET="dashOffset";rt.POINT_SIZE="size";rt.DISPERSION="dispersion";rt.LIGHT_MAP="light";rt.AO="ao";const yee=Ot(rt,rt.ALPHA_TEST),LN=Ot(rt,rt.COLOR),vee=Ot(rt,rt.SHININESS),_ee=Ot(rt,rt.EMISSIVE),RD=Ot(rt,rt.OPACITY),xee=Ot(rt,rt.SPECULAR),gB=Ot(rt,rt.SPECULAR_INTENSITY),bee=Ot(rt,rt.SPECULAR_COLOR),iE=Ot(rt,rt.SPECULAR_STRENGTH),RR=Ot(rt,rt.REFLECTIVITY),See=Ot(rt,rt.ROUGHNESS),Tee=Ot(rt,rt.METALNESS),Eee=Ot(rt,rt.NORMAL),wee=Ot(rt,rt.CLEARCOAT),Mee=Ot(rt,rt.CLEARCOAT_ROUGHNESS),Aee=Ot(rt,rt.CLEARCOAT_NORMAL),Cee=Ot(rt,rt.ROTATION),Ree=Ot(rt,rt.SHEEN),Nee=Ot(rt,rt.SHEEN_ROUGHNESS),Dee=Ot(rt,rt.ANISOTROPY),Pee=Ot(rt,rt.IRIDESCENCE),Oee=Ot(rt,rt.IRIDESCENCE_IOR),Lee=Ot(rt,rt.IRIDESCENCE_THICKNESS),Uee=Ot(rt,rt.TRANSMISSION),Bee=Ot(rt,rt.THICKNESS),Iee=Ot(rt,rt.IOR),Fee=Ot(rt,rt.ATTENUATION_DISTANCE),zee=Ot(rt,rt.ATTENUATION_COLOR),wV=Ot(rt,rt.LINE_SCALE),MV=Ot(rt,rt.LINE_DASH_SIZE),AV=Ot(rt,rt.LINE_GAP_SIZE),NR=Ot(rt,rt.LINE_WIDTH),CV=Ot(rt,rt.LINE_DASH_OFFSET),Vee=Ot(rt,rt.POINT_SIZE),kee=Ot(rt,rt.DISPERSION),RV=Ot(rt,rt.LIGHT_MAP),Gee=Ot(rt,rt.AO),ib=pn(new lt).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),NV=ve(i=>i.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class Sr extends Jt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let s;if(n===Sr.VERTEX)s=e.getVertexIndex();else if(n===Sr.INSTANCE)s=e.getInstanceIndex();else if(n===Sr.DRAW)s=e.getDrawIndex();else if(n===Sr.INVOCATION_LOCAL)s=e.getInvocationLocalIndex();else if(n===Sr.INVOCATION_SUBGROUP)s=e.getInvocationSubgroupIndex();else if(n===Sr.SUBGROUP)s=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let r;return e.shaderStage==="vertex"||e.shaderStage==="compute"?r=s:r=mp(this).build(e,t),r}}Sr.VERTEX="vertex";Sr.INSTANCE="instance";Sr.SUBGROUP="subgroup";Sr.INVOCATION_LOCAL="invocationLocal";Sr.INVOCATION_SUBGROUP="invocationSubgroup";Sr.DRAW="draw";const Hee=Ot(Sr,Sr.VERTEX),ly=Ot(Sr,Sr.INSTANCE),IRe=Ot(Sr,Sr.SUBGROUP),FRe=Ot(Sr,Sr.INVOCATION_SUBGROUP),zRe=Ot(Sr,Sr.INVOCATION_LOCAL),jee=Ot(Sr,Sr.DRAW);class DV extends Jt{static get type(){return"InstanceNode"}constructor(e,t,n=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=ii.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{instanceMatrix:t,instanceColor:n}=this,{count:s}=t;let{instanceMatrixNode:r,instanceColorNode:a}=this;if(r===null){if(s<=1e3)r=dM(t.array,"mat4",Math.max(s,1)).element(ly);else{const l=new vz(t.array,16,1);this.buffer=l;const c=t.usage===Qg?cB:PN,d=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];r=Iv(...d)}this.instanceMatrixNode=r}if(n&&a===null){const l=new Qu(n.array,3),c=n.usage===Qg?cB:PN;this.bufferColor=l,a=ye(c(l,"vec3",3,0)),this.instanceColorNode=a}const o=r.mul(Ma).xyz;if(Ma.assign(o),e.hasGeometryAttribute("normal")){const l=YJ(vu,r);vu.assign(l)}this.instanceColorNode!==null&&ku("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==Qg&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==Qg&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const VRe=Un(DV).setParameterLength(2,3);class $ee extends DV{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:s}=e;super(t,n,s),this.instancedMesh=e}}const Wee=Un($ee).setParameterLength(1);class qee extends Jt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=ly:this.batchingIdNode=jee);const n=ve(([_])=>{const x=de(oy(Ea(this.batchMesh._indirectTexture),0).x),T=de(_).mod(x),b=de(_).div(x);return Ea(this.batchMesh._indirectTexture,xo(T,b)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(de(this.batchingIdNode)),s=this.batchMesh._matricesTexture,r=de(oy(Ea(s),0).x),a=te(n).mul(4).toInt().toVar(),o=a.mod(r),l=a.div(r),c=Iv(Ea(s,xo(o,l)),Ea(s,xo(o.add(1),l)),Ea(s,xo(o.add(2),l)),Ea(s,xo(o.add(3),l))),d=this.batchMesh._colorsTexture;if(d!==null){const x=ve(([T])=>{const b=de(oy(Ea(d),0).x),w=T,M=w.mod(b),R=w.div(b);return Ea(d,xo(M,R)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);ku("vec3","vBatchColor").assign(x)}const h=Zl(c);Ma.assign(c.mul(Ma));const m=vu.div(ye(h[0].dot(h[0]),h[1].dot(h[1]),h[2].dot(h[2]))),v=h.mul(m).xyz;vu.assign(v),e.hasGeometryAttribute("tangent")&&pM.mulAssign(h)}}const Xee=Un(qee).setParameterLength(1);class Yee extends n0{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const s=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&s!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),s!==!0){const r=this.getNodeType(e);n=e.format(n,r,t)}return n}}const kRe=Un(Yee).setParameterLength(2);class Kee extends ED{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let s,r=null;t&&t.isStruct?(s="struct",r=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(n=e.count)):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(s=Cz(e.itemSize),n=e.count):s=t,super(e,s,n),this.isStorageBufferNode=!0,this.structTypeNode=r,this.access=Wo.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return kRe(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(Wo.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=uM(this.value),this._varying=mp(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return this.structTypeNode!==null?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),s=n.build(e);return e.registerTransform(s,t),s}}const Vv=(i,e=null,t=0)=>st(new Kee(i,e,t)),GRe=(i,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),Vv(i,e,t).setPBO(!0)),ej=new WeakMap;class PV extends Jt{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=ii.OBJECT,this.skinIndexNode=Sc("skinIndex","uvec4"),this.skinWeightNode=Sc("skinWeight","vec4"),this.bindMatrixNode=tr("bindMatrix","mat4"),this.bindMatrixInverseNode=tr("bindMatrixInverse","mat4"),this.boneMatricesNode=fB("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Ma,this.toPositionNode=Ma,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:n,skinWeightNode:s,bindMatrixNode:r,bindMatrixInverseNode:a}=this,o=e.element(n.x),l=e.element(n.y),c=e.element(n.z),d=e.element(n.w),h=r.mul(t),m=qa(o.mul(s.x).mul(h),l.mul(s.y).mul(h),c.mul(s.z).mul(h),d.mul(s.w).mul(h));return a.mul(m).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=vu){const{skinIndexNode:n,skinWeightNode:s,bindMatrixNode:r,bindMatrixInverseNode:a}=this,o=e.element(n.x),l=e.element(n.y),c=e.element(n.z),d=e.element(n.w);let h=qa(s.x.mul(o),s.y.mul(l),s.z.mul(c),s.w.mul(d));return h=a.mul(h).mul(r),h.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=fB("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,ON)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||Nz(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&ON.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();vu.assign(n),e.hasGeometryAttribute("tangent")&&pM.assign(n)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;ej.get(t)!==e.frameId&&(ej.set(t,e.frameId),this.previousBoneMatricesNode!==null&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}const Zee=i=>st(new PV(i)),HRe=(i,e=null)=>{const t=new PV(i);return t.positionNode=Vv(new Qu(i.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(ly).toVar(),t.skinIndexNode=Vv(new Qu(new Uint32Array(i.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(ly).toVar(),t.skinWeightNode=Vv(new Qu(i.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(ly).toVar(),t.bindMatrixNode=pn(i.bindMatrix,"mat4"),t.bindMatrixInverseNode=pn(i.bindMatrixInverse,"mat4"),t.boneMatricesNode=dM(i.skeleton.boneMatrices,"mat4",i.skeleton.bones.length),t.toPositionNode=e,st(t)};class Qee extends Jt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let a=0,o=this.params.length-1;a<o;a++){const l=this.params[a],c=l.isNode!==!0&&l.name||this.getVarName(a),d=l.isNode!==!0&&l.type||"int";n[c]=Lm(c,d)}const s=e.addStack();t.returnsNode=this.params[this.params.length-1](n,e),t.stackNode=s;const r=this.params[0];return r.isNode!==!0&&typeof r.update=="function"&&(t.updateNode=ve(this.params[0].update)(n)),e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,s=t.stackNode;for(let o=0,l=n.length-1;o<l;o++){const c=n[o];let d=!1,h=null,m=null,v=null,_=null,x=null,T=null;c.isNode?c.getNodeType(e)==="bool"?(d=!0,_="bool",m=c.build(e,_)):(_="int",v=this.getVarName(o),h="0",m=c.build(e,_),x="<"):(_=c.type||"int",v=c.name||this.getVarName(o),h=c.start,m=c.end,x=c.condition,T=c.update,typeof h=="number"?h=e.generateConst(_,h):h&&h.isNode&&(h=h.build(e,_)),typeof m=="number"?m=e.generateConst(_,m):m&&m.isNode&&(m=m.build(e,_)),h!==void 0&&m===void 0?(h=h+" - 1",m="0",x=">="):m!==void 0&&h===void 0&&(h="0",x="<"),x===void 0&&(Number(h)>Number(m)?x=">=":x="<"));let b;if(d)b=`while ( ${m} )`;else{const w={start:h,end:m},M=w.start,R=w.end;let N;const D=()=>x.includes("<")?"+=":"-=";if(T!=null)switch(typeof T){case"function":N=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":N=v+" "+D()+" "+e.generateConst(_,T);break;case"string":N=v+" "+T;break;default:T.isNode?N=v+" "+D()+" "+T.build(e):(console.error("THREE.TSL: 'Loop( { update: ... } )' is not a function, string or number."),N="break /* invalid update */")}else _==="int"||_==="uint"?T=x.includes("<")?"++":"--":T=D()+" 1.",N=v+" "+T;const L=e.getVar(_,v)+" = "+M,F=v+" "+x+" "+R;b=`for ( ${L}; ${F}; ${N} )`}e.addFlowCode((o===0?`
`:"")+e.tab+b+` {

`).addFlowTab()}const r=s.build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+r);for(let o=0,l=this.params.length-1;o<l;o++)e.addFlowCode((o===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const Ss=(...i)=>st(new Qee(Bv(i,"int"))).toStack(),jRe=()=>Lm("continue").toStack(),Jee=()=>Lm("break").toStack(),jL=new WeakMap,Vu=new bn,tj=ve(({bufferMap:i,influence:e,stride:t,width:n,depth:s,offset:r})=>{const a=de(Hee).mul(t).add(r),o=a.div(n),l=a.sub(o.mul(n));return Ea(i,xo(l,o)).depth(s).xyz.mul(e)});function $Re(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,s=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,r=s!==void 0?s.length:0;let a=jL.get(i);if(a===void 0||a.count!==r){let b=function(){x.dispose(),jL.delete(i),i.removeEventListener("dispose",b)};a!==void 0&&a.texture.dispose();const o=i.morphAttributes.position||[],l=i.morphAttributes.normal||[],c=i.morphAttributes.color||[];let d=0;e===!0&&(d=1),t===!0&&(d=2),n===!0&&(d=3);let h=i.attributes.position.count*d,m=1;const v=4096;h>v&&(m=Math.ceil(h/v),h=v);const _=new Float32Array(h*m*4*r),x=new NS(_,h,m,r);x.type=fr,x.needsUpdate=!0;const T=d*4;for(let w=0;w<r;w++){const M=o[w],R=l[w],N=c[w],D=h*m*4*w;for(let L=0;L<M.count;L++){const F=L*T;e===!0&&(Vu.fromBufferAttribute(M,L),_[D+F+0]=Vu.x,_[D+F+1]=Vu.y,_[D+F+2]=Vu.z,_[D+F+3]=0),t===!0&&(Vu.fromBufferAttribute(R,L),_[D+F+4]=Vu.x,_[D+F+5]=Vu.y,_[D+F+6]=Vu.z,_[D+F+7]=0),n===!0&&(Vu.fromBufferAttribute(N,L),_[D+F+8]=Vu.x,_[D+F+9]=Vu.y,_[D+F+10]=Vu.z,_[D+F+11]=N.itemSize===4?Vu.w:1)}}a={count:r,texture:x,stride:d,size:new lt(h,m)},jL.set(i,a),i.addEventListener("dispose",b)}return a}class ete extends Jt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=pn(1),this.updateType=ii.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,s=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,r=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,a=r!==void 0?r.length:0,{texture:o,stride:l,size:c}=$Re(t);n===!0&&Ma.mulAssign(this.morphBaseInfluence),s===!0&&vu.mulAssign(this.morphBaseInfluence);const d=de(c.width);Ss(a,({i:h})=>{const m=te(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?m.assign(Ea(this.mesh.morphTexture,xo(de(h).add(1),de(ly))).r):m.assign(tr("morphTargetInfluences","float").element(h).toVar()),un(m.notEqual(0),()=>{n===!0&&Ma.addAssign(tj({bufferMap:o,influence:m,stride:l,width:d,depth:h,offset:de(0)})),s===!0&&vu.addAssign(tj({bufferMap:o,influence:m,stride:l,width:d,depth:h,offset:de(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const tte=Un(ete).setParameterLength(1);class A_ extends Jt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class nte extends A_{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class ite extends lV{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,s=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=s,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=ye().toVar("directDiffuse"),s=ye().toVar("directSpecular"),r=ye().toVar("indirectDiffuse"),a=ye().toVar("indirectSpecular"),o={directDiffuse:n,directSpecular:s,indirectDiffuse:r,indirectSpecular:a};return{radiance:ye().toVar("radiance"),irradiance:ye().toVar("irradiance"),iblIrradiance:ye().toVar("iblIrradiance"),ambientOcclusion:te(1).toVar("ambientOcclusion"),reflectedLight:o,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const ste=Un(ite);class rte extends A_{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}const Xx=new lt;class mM extends Wf{static get type(){return"ViewportTextureNode"}constructor(e=Tm,t=null,n=null){let s=null;n===null?(s=new N2,s.minFilter=jo,n=s):s=n,super(n,e,t),this.generateMipmaps=!1,this.defaultFramebuffer=s,this.isOutputTextureNode=!0,this.updateBeforeType=ii.FRAME,this._cacheTextures=new WeakMap}getTextureForReference(e=null){let t,n;if(this.referenceNode?(t=this.referenceNode.defaultFramebuffer,n=this.referenceNode._cacheTextures):(t=this.defaultFramebuffer,n=this._cacheTextures),e===null)return t;if(n.has(e)===!1){const s=t.clone();n.set(e,s)}return n.get(e)}updateReference(e){const t=e.renderer.getRenderTarget();return this.value=this.getTextureForReference(t),this.value}updateBefore(e){const t=e.renderer,n=t.getRenderTarget();n===null?t.getDrawingBufferSize(Xx):Xx.set(n.width,n.height);const s=this.getTextureForReference(n);(s.image.width!==Xx.width||s.image.height!==Xx.height)&&(s.image.width=Xx.width,s.image.height=Xx.height,s.needsUpdate=!0);const r=s.generateMipmaps;s.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(s),s.generateMipmaps=r}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const WRe=Un(mM).setParameterLength(0,3),OV=Un(mM,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let jC=null;class ate extends mM{static get type(){return"ViewportDepthTextureNode"}constructor(e=Tm,t=null){jC===null&&(jC=new Uc),super(e,t,jC)}getTextureForReference(){return jC}}const LV=Un(ate).setParameterLength(0,2);class Ac extends Jt{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===Ac.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let s=null;if(t===Ac.DEPTH_BASE)n!==null&&(s=ote().assign(n));else if(t===Ac.DEPTH)e.isPerspectiveCamera?s=UV(Aa.z,um,dm):s=Pb(Aa.z,um,dm);else if(t===Ac.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const r=BV(n,um,dm);s=Pb(r,um,dm)}else s=n;else s=Pb(Aa.z,um,dm);return s}}Ac.DEPTH_BASE="depthBase";Ac.DEPTH="depth";Ac.LINEAR_DEPTH="linearDepth";const Pb=(i,e,t)=>i.add(e).div(e.sub(t)),qRe=(i,e,t)=>e.sub(t).mul(i).sub(e),UV=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),BV=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),IV=(i,e,t)=>{e=e.max(1e-6).toVar();const n=Kh(i.negate().div(e)),s=Kh(t.div(e));return n.div(s)},XRe=(i,e,t)=>{const n=i.mul(yD(t.div(e)));return te(Math.E).pow(n).mul(e).negate()},ote=Un(Ac,Ac.DEPTH_BASE),FV=Ot(Ac,Ac.DEPTH),nS=Un(Ac,Ac.LINEAR_DEPTH).setParameterLength(0,1),YRe=nS(LV());FV.assign=i=>ote(i);class Kd extends Jt{static get type(){return"ClippingNode"}constructor(e=Kd.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:s}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Kd.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,s):this.scope===Kd.HARDWARE?this.setupHardwareClipping(s,e):this.setupDefault(n,s)}setupAlphaToCoverage(e,t){return ve(()=>{const n=te().toVar("distanceToPlane"),s=te().toVar("distanceToGradient"),r=te(1).toVar("clipOpacity"),a=t.length;if(this.hardwareClipping===!1&&a>0){const l=Hl(t).setGroup(cn);Ss(a,({i:c})=>{const d=l.element(c);n.assign(Aa.dot(d.xyz).negate().add(d.w)),s.assign(n.fwidth().div(2)),r.mulAssign(tf(s.negate(),s,n))})}const o=e.length;if(o>0){const l=Hl(e).setGroup(cn),c=te(1).toVar("intersectionClipOpacity");Ss(o,({i:d})=>{const h=l.element(d);n.assign(Aa.dot(h.xyz).negate().add(h.w)),s.assign(n.fwidth().div(2)),c.mulAssign(tf(s.negate(),s,n).oneMinus())}),r.mulAssign(c.oneMinus())}as.a.mulAssign(r),as.a.equal(0).discard()})()}setupDefault(e,t){return ve(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const r=Hl(t).setGroup(cn);Ss(n,({i:a})=>{const o=r.element(a);Aa.dot(o.xyz).greaterThan(o.w).discard()})}const s=e.length;if(s>0){const r=Hl(e).setGroup(cn),a=Jd(!0).toVar("clipped");Ss(s,({i:o})=>{const l=r.element(o);a.assign(Aa.dot(l.xyz).greaterThan(l.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),ve(()=>{const s=Hl(e).setGroup(cn),r=Wm(t.getClipDistance());Ss(n,({i:a})=>{const o=s.element(a),l=Aa.dot(o.xyz).sub(o.w).negate();r.element(a).assign(l)})})()}}Kd.ALPHA_TO_COVERAGE="alphaToCoverage";Kd.DEFAULT="default";Kd.HARDWARE="hardware";const KRe=()=>st(new Kd),ZRe=()=>st(new Kd(Kd.ALPHA_TO_COVERAGE)),QRe=()=>st(new Kd(Kd.HARDWARE)),JRe=.05,nj=ve(([i])=>$m(Wn(1e4,$u(Wn(17,i.x).add(Wn(.1,i.y)))).mul(qa(.1,dr($u(Wn(13,i.y).add(i.x))))))),ij=ve(([i])=>nj(ot(nj(i.xy),i.z))),eNe=ve(([i])=>{const e=ma(Qh(eV(i.xyz)),Qh(tV(i.xyz))),t=te(1).div(te(JRe).mul(e)).toVar("pixScale"),n=ot(Jb(Zh(Kh(t))),Jb(vD(Kh(t)))),s=ot(ij(Zh(n.x.mul(i.xyz))),ij(Zh(n.y.mul(i.xyz)))),r=$m(Kh(t)),a=qa(Wn(r.oneMinus(),s.x),Wn(r,s.y)),o=yu(r,r.oneMinus()),l=ye(a.mul(a).div(Wn(2,o).mul(Ui(1,o))),a.sub(Wn(.5,o)).div(Ui(1,o)),Ui(1,Ui(1,a).mul(Ui(1,a)).div(Wn(2,o).mul(Ui(1,o))))),c=a.lessThan(o.oneMinus()).select(a.lessThan(o).select(l.x,l.y),l.z);return ef(c,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class lte extends mV{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let s;return n===!0?s=super.generate(e):s=e.generateConst(this.nodeType,new bn(1,1,1,1)),s}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const cte=(i=0)=>st(new lte(i)),ute=ve(([i,e])=>yu(1,i.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),dte=ve(([i,e])=>yu(i.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),fte=ve(([i,e])=>i.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),hte=ve(([i,e])=>Wi(i.mul(2).mul(e),i.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),xD(.5,i))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),tNe=ve(([i,e])=>{const t=e.a.add(i.a.mul(e.a.oneMinus()));return jt(e.rgb.mul(e.a).add(i.rgb.mul(i.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),pte=ve(([i])=>jt(i.rgb.mul(i.a),i.a),{color:"vec4",return:"vec4"}),nNe=ve(([i])=>(un(i.a.equal(0),()=>jt(0)),jt(i.rgb.div(i.a),i.a)),{color:"vec4",return:"vec4"}),iNe=(...i)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),ute(i)),sNe=(...i)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),dte(i)),rNe=(...i)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),fte(i)),aNe=(...i)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),hte(i));class Er extends So{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{console.warn('THREE.NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}customProgramCacheKey(){return this.type+Az(this)}build(e){this.setup(e)}setupObserver(e){return new kZ(e)}setup(e){e.context.setupNormal=()=>Nb(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const s=Nb(this.setupVertex(e),"VERTEX"),r=this.vertexNode||s;e.stack.outputNode=r,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);o!==null&&e.stack.add(o);const c=jt(l,as.a).max(0);a=this.setupOutput(e,c),Rb.assign(a);const d=this.outputNode!==null;if(d&&(a=this.outputNode),n!==null){const h=t.getMRT(),m=this.mrtNode;h!==null?(d&&Rb.assign(a),a=h,m!==null&&(a=h.merge(m))):m!==null&&(a=m)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=jt(l)),a=this.setupOutput(e,l)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let s=null;if(t.length>0||n.length>0){const r=e.renderer.samples;this.alphaToCoverage&&r>1?s=ZRe():e.stack.add(KRe())}return s}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(QRe()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let s=this.depthNode;if(s===null){const r=t.getMRT();r&&r.has("depth")?s=r.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?s=IV(Aa.z,um,dm):s=Pb(Aa.z,um,dm))}s!==null&&FV.assign(s).toStack()}setupPositionView(){return Um.mul(Ma).xyz}setupModelViewProjection(){return zd.mul(Aa)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),NV}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&tte(t).toStack(),t.isSkinnedMesh===!0&&Zee(t).toStack(),this.displacementMap){const s=fm("displacementMap","texture"),r=fm("displacementScale","float"),a=fm("displacementBias","float");Ma.addAssign(vu.normalize().mul(s.x.mul(r).add(a)))}return t.isBatchedMesh&&Xee(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&Wee(t).toStack(),this.positionNode!==null&&Ma.assign(Nb(this.positionNode,"POSITION","vec3")),Ma}setupDiffuseColor({object:e,geometry:t}){this.maskNode!==null&&Jd(this.maskNode).not().discard();let n=this.colorNode?jt(this.colorNode):LN;this.vertexColors===!0&&t.hasAttribute("color")&&(n=n.mul(cte())),e.instanceColor&&(n=ku("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=ku("vec3","vBatchColor").mul(n)),as.assign(n);const s=this.opacityNode?te(this.opacityNode):RD;as.a.assign(as.a.mul(s));let r=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(r=this.alphaTestNode!==null?te(this.alphaTestNode):yee,as.a.lessThanEqual(r).discard()),this.alphaHash===!0&&as.a.lessThan(eNe(Ma)).discard(),this.transparent===!1&&this.blending===Dc&&this.alphaToCoverage===!1?as.a.assign(1):r===null&&as.a.lessThanEqual(0).discard()}setupVariants(){}setupOutgoingLight(){return this.lights===!0?ye(0):as.rgb}setupNormal(){return this.normalNode?ye(this.normalNode):Eee}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?fm("envMap","cubeTexture"):fm("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new rte(RV)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const s=this.setupLightMap(e);if(s&&s.isLightingNode&&t.push(s),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:Gee;t.push(new nte(a))}let r=this.lightsNode||e.lightsNode;return t.length>0&&(r=e.renderer.lighting.createNode([...r.getLights(),...t])),r}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:s,emissiveNode:r}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(o&&o.getScope().hasLights){const c=this.setupLightingModel(e)||null;l=ste(o,c,n,s)}else n!==null&&(l=ye(s!==null?Wi(l,n,s):n));return(r&&r.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(oB.assign(ye(r||_ee)),l=l.add(oB)),l}setupFog(e,t){const n=e.fogNode;return n&&(Rb.assign(t),t=jt(n.toVar())),t}setupPremultipliedAlpha(e,t){return pte(t)}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),this.premultipliedAlpha===!0&&(t=this.setupPremultipliedAlpha(e,t)),t}setDefaultValues(e){for(const n in e){const s=e[n];this[n]===void 0&&(this[n]=s,s&&s.clone&&(this[n]=s.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=So.prototype.toJSON.call(this,e),s=zE(this);n.inputNodes={};for(const{property:a,childNode:o}of s)n.inputNodes[a]=o.toJSON(e).uuid;function r(a){const o=[];for(const l in a){const c=a[l];delete c.metadata,o.push(c)}return o}if(t){const a=r(e.textures),o=r(e.images),l=r(e.nodes);a.length>0&&(n.textures=a),o.length>0&&(n.images=o),l.length>0&&(n.nodes=l)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const oNe=new Sl;class mte extends Er{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(oNe),this.setValues(e)}}const lNe=new iM;class gte extends Er{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(lNe),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?te(this.offsetNode):CV,t=this.dashScaleNode?te(this.dashScaleNode):wV,n=this.dashSizeNode?te(this.dashSizeNode):MV,s=this.gapSizeNode?te(this.gapSizeNode):AV;zv.assign(n),WE.assign(s);const r=mp(Sc("lineDistance").mul(t));(e?r.add(e):r).mod(zv.add(WE)).greaterThan(zv).discard()}}let $C=null;class yte extends mM{static get type(){return"ViewportSharedTextureNode"}constructor(e=Tm,t=null){$C===null&&($C=new N2),super(e,t,$C)}getTextureForReference(){return $C}updateReference(){return this}}const vte=Un(yte).setParameterLength(0,2),cNe=new iM;class uNe extends Er{static get type(){return"Line2NodeMaterial"}constructor(e={}){super(),this.isLine2NodeMaterial=!0,this.setDefaultValues(cNe),this.useColor=e.vertexColors,this.dashOffset=0,this.lineColorNode=null,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.blending=ql,this._useDash=e.dashed,this._useAlphaToCoverage=!0,this._useWorldUnits=!1,this.setValues(e)}setup(e){const{renderer:t}=e,n=this._useAlphaToCoverage,s=this.useColor,r=this._useDash,a=this._useWorldUnits,o=ve(({start:c,end:d})=>{const h=zd.element(2).element(2),_=zd.element(3).element(2).mul(-.5).div(h).sub(c.z).div(d.z.sub(c.z));return jt(Wi(c.xyz,d.xyz,_),d.w)}).setLayout({name:"trimSegment",type:"vec4",inputs:[{name:"start",type:"vec4"},{name:"end",type:"vec4"}]});this.vertexNode=ve(()=>{const c=Sc("instanceStart"),d=Sc("instanceEnd"),h=jt(Um.mul(jt(c,1))).toVar("start"),m=jt(Um.mul(jt(d,1))).toVar("end");if(r){const N=this.dashScaleNode?te(this.dashScaleNode):wV,D=this.offsetNode?te(this.offsetNode):CV,L=Sc("instanceDistanceStart"),F=Sc("instanceDistanceEnd");let I=gl.y.lessThan(.5).select(N.mul(L),N.mul(F));I=I.add(D),ku("float","lineDistance").assign(I)}a&&(ku("vec3","worldStart").assign(h.xyz),ku("vec3","worldEnd").assign(m.xyz));const v=Db.z.div(Db.w),_=zd.element(2).element(3).equal(-1);un(_,()=>{un(h.z.lessThan(0).and(m.z.greaterThan(0)),()=>{m.assign(o({start:h,end:m}))}).ElseIf(m.z.lessThan(0).and(h.z.greaterThanEqual(0)),()=>{h.assign(o({start:m,end:h}))})});const x=zd.mul(h),T=zd.mul(m),b=x.xyz.div(x.w),w=T.xyz.div(T.w),M=w.xy.sub(b.xy).toVar();M.x.assign(M.x.mul(v)),M.assign(M.normalize());const R=jt().toVar();if(a){const N=m.xyz.sub(h.xyz).normalize(),D=Wi(h.xyz,m.xyz,.5).normalize(),L=N.cross(D).normalize(),F=N.cross(L),I=ku("vec4","worldPos");I.assign(gl.y.lessThan(.5).select(h,m));const z=NR.mul(.5);I.addAssign(jt(gl.x.lessThan(0).select(L.mul(z),L.mul(z).negate()),0)),r||(I.addAssign(jt(gl.y.lessThan(.5).select(N.mul(z).negate(),N.mul(z)),0)),I.addAssign(jt(F.mul(z),0)),un(gl.y.greaterThan(1).or(gl.y.lessThan(0)),()=>{I.subAssign(jt(F.mul(2).mul(z),0))})),R.assign(zd.mul(I));const H=ye().toVar();H.assign(gl.y.lessThan(.5).select(b,w)),R.z.assign(H.z.mul(R.w))}else{const N=ot(M.y,M.x.negate()).toVar("offset");M.x.assign(M.x.div(v)),N.x.assign(N.x.div(v)),N.assign(gl.x.lessThan(0).select(N.negate(),N)),un(gl.y.lessThan(0),()=>{N.assign(N.sub(M))}).ElseIf(gl.y.greaterThan(1),()=>{N.assign(N.add(M))}),N.assign(N.mul(NR)),N.assign(N.div(Db.w)),R.assign(gl.y.lessThan(.5).select(x,T)),N.assign(N.mul(R.w)),R.assign(R.add(jt(N,0,0)))}return R})();const l=ve(({p1:c,p2:d,p3:h,p4:m})=>{const v=c.sub(h),_=m.sub(h),x=d.sub(c),T=v.dot(_),b=_.dot(x),w=v.dot(x),M=_.dot(_),N=x.dot(x).mul(M).sub(b.mul(b)),L=T.mul(b).sub(w.mul(M)).div(N).clamp(),F=T.add(b.mul(L)).div(M).clamp();return ot(L,F)});if(this.colorNode=ve(()=>{const c=Ns();if(r){const m=this.dashSizeNode?te(this.dashSizeNode):MV,v=this.gapSizeNode?te(this.gapSizeNode):AV;zv.assign(m),WE.assign(v);const _=ku("float","lineDistance");c.y.lessThan(-1).or(c.y.greaterThan(1)).discard(),_.mod(zv.add(WE)).greaterThan(zv).discard()}const d=te(1).toVar("alpha");if(a){const m=ku("vec3","worldStart"),v=ku("vec3","worldEnd"),_=ku("vec4","worldPos").xyz.normalize().mul(1e5),x=v.sub(m),T=l({p1:m,p2:v,p3:ye(0,0,0),p4:_}),b=m.add(x.mul(T.x)),w=_.mul(T.y),N=b.sub(w).length().div(NR);if(!r)if(n&&t.samples>1){const D=N.fwidth();d.assign(tf(D.negate().add(.5),D.add(.5),N).oneMinus())}else N.greaterThan(.5).discard()}else if(n&&t.samples>1){const m=c.x,v=c.y.greaterThan(0).select(c.y.sub(1),c.y.add(1)),_=m.mul(m).add(v.mul(v)),x=te(_.fwidth()).toVar("dlen");un(c.y.abs().greaterThan(1),()=>{d.assign(tf(x.oneMinus(),x.add(1),_).oneMinus())})}else un(c.y.abs().greaterThan(1),()=>{const m=c.x,v=c.y.greaterThan(0).select(c.y.sub(1),c.y.add(1));m.mul(m).add(v.mul(v)).greaterThan(1).discard()});let h;if(this.lineColorNode)h=this.lineColorNode;else if(s){const m=Sc("instanceColorStart"),v=Sc("instanceColorEnd");h=gl.y.lessThan(.5).select(m,v).mul(LN)}else h=LN;return jt(h,d)})(),this.transparent){const c=this.opacityNode?te(this.opacityNode):RD;this.outputNode=jt(this.colorNode.rgb.mul(c).add(vte().rgb.mul(c.oneMinus())),this.colorNode.a)}super.setup(e)}get worldUnits(){return this._useWorldUnits}set worldUnits(e){this._useWorldUnits!==e&&(this._useWorldUnits=e,this.needsUpdate=!0)}get dashed(){return this._useDash}set dashed(e){this._useDash!==e&&(this._useDash=e,this.needsUpdate=!0)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}const _te=i=>st(i).mul(.5).add(.5),dNe=i=>st(i).mul(2).sub(1),fNe=new k2;class xte extends Er{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(fNe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?te(this.opacityNode):RD;as.assign(TD(jt(_te(bs),e),ao))}}const zV=ve(([i=_V])=>{const e=i.z.atan(i.x).mul(1/(Math.PI*2)).add(.5),t=i.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return ot(e,t)});class bte extends C2{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,s=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r=new hp(5,5,5),a=zV(_V),o=new Er;o.colorNode=Ni(t,a,0),o.side=Ts,o.blending=ql;const l=new zs(r,o),c=new E_;c.add(l),t.minFilter===jo&&(t.minFilter=Zi);const d=new A2(1,10,this),h=e.getMRT();return e.setMRT(null),d.update(e,c),e.setMRT(h),t.minFilter=n,t.currentGenerateMipmaps=s,l.geometry.dispose(),l.material.dispose(),this}}const sE=new WeakMap;class hNe extends ga{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=tS(null);const t=new Gm;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=ii.RENDER}updateBefore(e){const{renderer:t,material:n}=e,s=this.envNode;if(s.isTextureNode||s.isMaterialReferenceNode){const r=s.isTextureNode?s.value:n[s.property];if(r&&r.isTexture){const a=r.mapping;if(a===Rm||a===Nm){if(sE.has(r)){const o=sE.get(r);sj(o,r.mapping),this._cubeTexture=o}else{const o=r.image;if(pNe(o)){const l=new bte(o.height);l.fromEquirectangularTexture(t,r),sj(l.texture,r.mapping),this._cubeTexture=l.texture,sE.set(r,l.texture),r.addEventListener("dispose",Ste)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function pNe(i){return i==null?!1:i.height>0}function Ste(i){const e=i.target;e.removeEventListener("dispose",Ste);const t=sE.get(e);t!==void 0&&(sE.delete(e),t.dispose())}function sj(i,e){e===Rm?i.mapping=gu:e===Nm&&(i.mapping=nd)}const Tte=Un(hNe).setParameterLength(1);class ND extends A_{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=Tte(this.envNode)}}class mNe extends A_{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=te(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class WS{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class Ete extends WS{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,n=e.reflectedLight,s=e.irradianceLightMap;n.indirectDiffuse.assign(jt(0)),s?n.indirectDiffuse.addAssign(s):n.indirectDiffuse.addAssign(jt(1,1,1,0)),n.indirectDiffuse.mulAssign(t),n.indirectDiffuse.mulAssign(as.rgb)}finish(e){const{material:t,context:n}=e,s=n.outgoingLight,r=e.context.environment;if(r)switch(t.combine){case b_:s.rgb.assign(Wi(s.rgb,s.rgb.mul(r.rgb),iE.mul(RR)));break;case g2:s.rgb.assign(Wi(s.rgb,r.rgb,iE.mul(RR)));break;case y2:s.rgb.addAssign(r.rgb.mul(iE.mul(RR)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const gNe=new Gl;class wte extends Er{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(gNe),this.setValues(e)}setupNormal(){return $S(eS)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new ND(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new mNe(RV)),t}setupOutgoingLight(){return as.rgb}setupLightingModel(){return new Ete}}const iS=ve(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),f_=ve(i=>i.diffuseColor.mul(1/Math.PI)),yNe=()=>te(.25),vNe=ve(({dotNH:i})=>RN.mul(te(.5)).add(1).mul(te(1/Math.PI)).mul(i.pow(RN))),_Ne=ve(({lightDirection:i})=>{const e=i.add(br).normalize(),t=bs.dot(e).clamp(),n=br.dot(e).clamp(),s=iS({f0:ru,f90:1,dotVH:n}),r=yNe(),a=vNe({dotNH:t});return s.mul(r).mul(a)});class VV extends Ete{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const r=bs.dot(e).clamp().mul(t);n.directDiffuse.addAssign(r.mul(f_({diffuseColor:as.rgb}))),this.specular===!0&&n.directSpecular.addAssign(r.mul(_Ne({lightDirection:e})).mul(iE))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:s}=e.context;s.indirectDiffuse.addAssign(n.mul(f_({diffuseColor:as}))),s.indirectDiffuse.mulAssign(t)}}const xNe=new G2;class Mte extends Er{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(xNe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new ND(t):null}setupLightingModel(){return new VV(!1)}}const bNe=new z2;class Ate extends Er{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(bNe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new ND(t):null}setupLightingModel(){return new VV}setupVariants(){const e=(this.shininessNode?te(this.shininessNode):vee).max(1e-4);RN.assign(e);const t=this.specularNode||xee;ru.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const Cte=ve(i=>{if(i.geometry.hasAttribute("normal")===!1)return te(0);const e=eS.dFdx().abs().max(eS.dFdy().abs());return e.x.max(e.y).max(e.z)}),kV=ve(i=>{const{roughness:e}=i,t=Cte();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),Rte=ve(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),s=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),r=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return sd(.5,s.add(r).max(PQ))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),SNe=ve(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:s,dotBL:r,dotNV:a,dotNL:o})=>{const l=o.mul(ye(i.mul(t),e.mul(n),a).length()),c=a.mul(ye(i.mul(s),e.mul(r),o).length());return sd(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),Nte=ve(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),TNe=te(1/Math.PI),ENe=ve(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:s})=>{const r=i.mul(e),a=ye(e.mul(n),i.mul(s),r.mul(t)),o=a.dot(a),l=r.div(o);return TNe.mul(r.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),yB=ve(({lightDirection:i,f0:e,f90:t,roughness:n,f:s,normalView:r=bs,USE_IRIDESCENCE:a,USE_ANISOTROPY:o})=>{const l=n.pow2(),c=i.add(br).normalize(),d=r.dot(i).clamp(),h=r.dot(br).clamp(),m=r.dot(c).clamp(),v=br.dot(c).clamp();let _=iS({f0:e,f90:t,dotVH:v}),x,T;if(kE(a)&&(_=mD.mix(_,s)),kE(o)){const b=Z1.dot(i),w=Z1.dot(br),M=Z1.dot(c),R=Fv.dot(i),N=Fv.dot(br),D=Fv.dot(c);x=SNe({alphaT:CN,alphaB:l,dotTV:w,dotBV:N,dotTL:b,dotBL:R,dotNV:h,dotNL:d}),T=ENe({alphaT:CN,alphaB:l,dotNH:m,dotTH:M,dotBH:D})}else x=Rte({alpha:l,dotNL:d,dotNV:h}),T=Nte({alpha:l,dotNH:m});return _.mul(x).mul(T)}),GV=ve(({roughness:i,dotNV:e})=>{const t=jt(-1,-.0275,-.572,.022),n=jt(1,.0425,1.04,-.04),s=i.mul(t).add(n),r=s.x.mul(s.x).min(e.mul(-9.28).exp2()).mul(s.x).add(s.y);return ot(-1.04,1.04).mul(r).add(s.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),Dte=ve(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:s}=i,r=GV({dotNV:e,roughness:s});return t.mul(r.x).add(n.mul(r.y))}),Pte=ve(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),s=n.mul(n),r=n.mul(s,s).clamp(0,.9999);return i.sub(ye(e).mul(r)).div(r.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),wNe=ve(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=te(1).div(t),r=e.pow2().oneMinus().max(.0078125);return te(2).add(n).mul(r.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),MNe=ve(({dotNV:i,dotNL:e})=>te(1).div(te(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),ANe=ve(({lightDirection:i})=>{const e=i.add(br).normalize(),t=bs.dot(i).clamp(),n=bs.dot(br).clamp(),s=bs.dot(e).clamp(),r=wNe({roughness:pD,dotNH:s}),a=MNe({dotNV:n,dotNL:t});return Ev.mul(r).mul(a)}),CNe=ve(({N:i,V:e,roughness:t})=>{const r=.0078125,a=i.dot(e).saturate(),o=ot(t,a.oneMinus().sqrt());return o.assign(o.mul(.984375).add(r)),o}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),Ote=ve(({f:i})=>{const e=i.length();return ma(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),ey=ve(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),s=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),r=n.add(4.1616724).mul(n).add(3.417594).toVar(),a=s.div(r),o=t.greaterThan(0).select(a,ma(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return i.cross(e).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),rj=ve(({N:i,V:e,P:t,mInv:n,p0:s,p1:r,p2:a,p3:o})=>{const l=r.sub(s).toVar(),c=o.sub(s).toVar(),d=l.cross(c),h=ye().toVar();return un(d.dot(t.sub(s)).greaterThanEqual(0),()=>{const m=e.sub(i.mul(e.dot(i))).normalize(),v=i.cross(m).negate(),_=n.mul(Zl(m,v,i).transpose()).toVar(),x=_.mul(s.sub(t)).normalize().toVar(),T=_.mul(r.sub(t)).normalize().toVar(),b=_.mul(a.sub(t)).normalize().toVar(),w=_.mul(o.sub(t)).normalize().toVar(),M=ye(0).toVar();M.addAssign(ey({v1:x,v2:T})),M.addAssign(ey({v1:T,v2:b})),M.addAssign(ey({v1:b,v2:w})),M.addAssign(ey({v1:w,v2:x})),h.assign(ye(Ote({f:M})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),RNe=ve(({P:i,p0:e,p1:t,p2:n,p3:s})=>{const r=t.sub(e).toVar(),a=s.sub(e).toVar(),o=r.cross(a),l=ye().toVar();return un(o.dot(i.sub(e)).greaterThanEqual(0),()=>{const c=e.sub(i).normalize().toVar(),d=t.sub(i).normalize().toVar(),h=n.sub(i).normalize().toVar(),m=s.sub(i).normalize().toVar(),v=ye(0).toVar();v.addAssign(ey({v1:c,v2:d})),v.addAssign(ey({v1:d,v2:h})),v.addAssign(ey({v1:h,v2:m})),v.addAssign(ey({v1:m,v2:c})),l.assign(ye(Ote({f:v.abs()})))}),l}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"P",type:"vec3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),DD=1/6,Lte=i=>Wn(DD,Wn(i,Wn(i,i.negate().add(3)).sub(3)).add(1)),vB=i=>Wn(DD,Wn(i,Wn(i,Wn(3,i).sub(6))).add(4)),Ute=i=>Wn(DD,Wn(i,Wn(i,Wn(-3,i).add(3)).add(3)).add(1)),_B=i=>Wn(DD,Wd(i,3)),aj=i=>Lte(i).add(vB(i)),oj=i=>Ute(i).add(_B(i)),lj=i=>qa(-1,vB(i).div(Lte(i).add(vB(i)))),cj=i=>qa(1,_B(i).div(Ute(i).add(_B(i)))),uj=(i,e,t)=>{const n=i.uvNode,s=Wn(n,e.zw).add(.5),r=Zh(s),a=$m(s),o=aj(a.x),l=oj(a.x),c=lj(a.x),d=cj(a.x),h=lj(a.y),m=cj(a.y),v=ot(r.x.add(c),r.y.add(h)).sub(.5).mul(e.xy),_=ot(r.x.add(d),r.y.add(h)).sub(.5).mul(e.xy),x=ot(r.x.add(c),r.y.add(m)).sub(.5).mul(e.xy),T=ot(r.x.add(d),r.y.add(m)).sub(.5).mul(e.xy),b=aj(a.y).mul(qa(o.mul(i.sample(v).level(t)),l.mul(i.sample(_).level(t)))),w=oj(a.y).mul(qa(o.mul(i.sample(x).level(t)),l.mul(i.sample(T).level(t))));return b.add(w)},HV=ve(([i,e])=>{const t=ot(i.size(de(e))),n=ot(i.size(de(e.add(1)))),s=sd(1,t),r=sd(1,n),a=uj(i,jt(s,t),Zh(e)),o=uj(i,jt(r,n),vD(e));return $m(e).mix(a,o)}),NNe=ve(([i,e])=>{const t=e.mul(gV(i));return HV(i,t)}),dj=ve(([i,e,t,n,s])=>{const r=ye(aV(e.negate(),Om(i),sd(1,n))),a=ye(Qh(s[0].xyz),Qh(s[1].xyz),Qh(s[2].xyz));return Om(r).mul(t.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),DNe=ve(([i,e])=>i.mul(ef(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),PNe=OV(),ONe=OV(),fj=ve(([i,e,t],{material:n})=>{const r=(n.side===Ts?PNe:ONe).sample(i),a=Kh(d_.x).mul(DNe(e,t));return HV(r,a)}),hj=ve(([i,e,t])=>(un(t.notEqual(0),()=>{const n=yD(e).negate().div(t);return Zz(n.negate().mul(i))}),ye(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),LNe=ve(([i,e,t,n,s,r,a,o,l,c,d,h,m,v,_])=>{let x,T;if(_){x=jt().toVar(),T=ye().toVar();const N=d.sub(1).mul(_.mul(.025)),D=ye(d.sub(N),d,d.add(N));Ss({start:0,end:3},({i:L})=>{const F=D.element(L),I=dj(i,e,h,F,o),z=a.add(I),H=c.mul(l.mul(jt(z,1))),Y=ot(H.xy.div(H.w)).toVar();Y.addAssign(1),Y.divAssign(2),Y.assign(ot(Y.x,Y.y.oneMinus()));const Z=fj(Y,t,F);x.element(L).assign(Z.element(L)),x.a.addAssign(Z.a),T.element(L).assign(n.element(L).mul(hj(Qh(I),m,v).element(L)))}),x.a.divAssign(3)}else{const N=dj(i,e,h,d,o),D=a.add(N),L=c.mul(l.mul(jt(D,1))),F=ot(L.xy.div(L.w)).toVar();F.addAssign(1),F.divAssign(2),F.assign(ot(F.x,F.y.oneMinus())),x=fj(F,t,d),T=n.mul(hj(Qh(N),m,v))}const b=T.rgb.mul(x.rgb),w=i.dot(e).clamp(),M=ye(Dte({dotNV:w,specularColor:s,specularF90:r,roughness:t})),R=T.r.add(T.g,T.b).div(3);return jt(M.oneMinus().mul(b),x.a.oneMinus().mul(R).oneMinus())}),UNe=Zl(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),BNe=i=>{const e=i.sqrt();return ye(1).add(e).div(ye(1).sub(e))},pj=(i,e)=>i.sub(e).div(i.add(e)).pow2(),INe=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=ye(54856e-17,44201e-17,52481e-17),s=ye(1681e3,1795300,2208400),r=ye(43278e5,93046e5,66121e5),a=te(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let o=n.mul(r.mul(2*Math.PI).sqrt()).mul(s.mul(t).add(e).cos()).mul(t.pow2().negate().mul(r).exp());return o=ye(o.x.add(a),o.y,o.z).div(10685e-11),UNe.mul(o)},FNe=ve(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:s})=>{const r=Wi(i,e,tf(0,.03,n)),o=i.div(r).pow2().mul(t.pow2().oneMinus()).oneMinus();un(o.lessThan(0),()=>ye(1));const l=o.sqrt(),c=pj(r,i),d=iS({f0:c,f90:1,dotVH:t}),h=d.oneMinus(),m=r.lessThan(i).select(Math.PI,0),v=te(Math.PI).sub(m),_=BNe(s.clamp(0,.9999)),x=pj(_,r.toVec3()),T=iS({f0:x,f90:1,dotVH:l}),b=ye(_.x.lessThan(r).select(Math.PI,0),_.y.lessThan(r).select(Math.PI,0),_.z.lessThan(r).select(Math.PI,0)),w=r.mul(n,l,2),M=ye(v).add(b),R=d.mul(T).clamp(1e-5,.9999),N=R.sqrt(),D=h.pow2().mul(T).div(ye(1).sub(R)),F=d.add(D).toVar(),I=D.sub(h).toVar();return Ss({start:1,end:2,condition:"<=",name:"m"},({m:z})=>{I.mulAssign(N);const H=INe(te(z).mul(w),te(z).mul(M)).mul(2);F.addAssign(I.mul(H))}),F.max(ye(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),zNe=ve(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),s=t.pow2(),r=qo(t.lessThan(.25),te(-339.2).mul(s).add(te(161.4).mul(t)).sub(25.9),te(-8.48).mul(s).add(te(14.3).mul(t)).sub(9.95)),a=qo(t.lessThan(.25),te(44).mul(s).sub(te(23.7).mul(t)).add(3.26),te(1.97).mul(s).sub(te(3.27).mul(t)).add(.72));return qo(t.lessThan(.25),0,te(.1).mul(t).sub(.025)).add(r.mul(n).add(a).exp()).mul(1/Math.PI).saturate()}),$L=ye(.04),WL=te(1);class PD extends WS{constructor(e=!1,t=!1,n=!1,s=!1,r=!1,a=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=s,this.transmission=r,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=ye().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=ye().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=ye().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=ye().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=ye().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=bs.dot(br).clamp();this.iridescenceFresnel=FNe({outsideIOR:te(1),eta2:kz,cosTheta1:t,thinFilmThickness:Gz,baseF0:ru}),this.iridescenceF0=Pte({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=Ju,n=nE.sub(Ju).normalize(),s=r0,r=e.context;r.backdrop=LNe(s,n,kh,as,ru,$E,t,qd,ld,zd,Q1,Hz,$z,jz,this.dispersion?Wz:null),r.backdropAlpha=NN,as.a.mulAssign(Wi(1,r.backdrop.a,NN))}super.start(e)}computeMultiscattering(e,t,n){const s=bs.dot(br).clamp(),r=GV({roughness:kh,dotNV:s}),o=(this.iridescenceF0?mD.mix(ru,this.iridescenceF0):ru).mul(r.x).add(n.mul(r.y)),c=r.x.add(r.y).oneMinus(),d=ru.add(ru.oneMinus().mul(.047619)),h=o.mul(d).div(c.mul(d).oneMinus());e.addAssign(o),t.addAssign(h.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const r=bs.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(r.mul(ANe({lightDirection:e}))),this.clearcoat===!0){const o=wv.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(o.mul(yB({lightDirection:e,f0:$L,f90:WL,roughness:jE,normalView:wv})))}n.directDiffuse.addAssign(r.mul(f_({diffuseColor:as.rgb}))),n.directSpecular.addAssign(r.mul(yB({lightDirection:e,f0:ru,f90:1,roughness:kh,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:s,reflectedLight:r,ltc_1:a,ltc_2:o}){const l=t.add(n).sub(s),c=t.sub(n).sub(s),d=t.sub(n).add(s),h=t.add(n).add(s),m=bs,v=br,_=Aa.toVar(),x=CNe({N:m,V:v,roughness:kh}),T=a.sample(x).toVar(),b=o.sample(x).toVar(),w=Zl(ye(T.x,0,T.y),ye(0,1,0),ye(T.z,0,T.w)).toVar(),M=ru.mul(b.x).add(ru.oneMinus().mul(b.y)).toVar();r.directSpecular.addAssign(e.mul(M).mul(rj({N:m,V:v,P:_,mInv:w,p0:l,p1:c,p2:d,p3:h}))),r.directDiffuse.addAssign(e.mul(as).mul(rj({N:m,V:v,P:_,mInv:Zl(1,0,0,0,1,0,0,0,1),p0:l,p1:c,p2:d,p3:h})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:n}=e.context;n.indirectDiffuse.addAssign(t.mul(f_({diffuseColor:as})))}indirectSpecular(e){const{radiance:t,iblIrradiance:n,reflectedLight:s}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(n.mul(Ev,zNe({normal:bs,viewDir:br,roughness:pD}))),this.clearcoat===!0){const d=wv.dot(br).clamp(),h=Dte({dotNV:d,specularColor:$L,specularF90:WL,roughness:jE});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(h))}const r=ye().toVar("singleScattering"),a=ye().toVar("multiScattering"),o=n.mul(1/Math.PI);this.computeMultiscattering(r,a,$E);const l=r.add(a),c=as.mul(l.r.max(l.g).max(l.b).oneMinus());s.indirectSpecular.addAssign(t.mul(r)),s.indirectSpecular.addAssign(a.mul(o)),s.indirectDiffuse.addAssign(c.mul(o))}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:n}=e.context,r=bs.dot(br).clamp().add(t),a=kh.mul(-16).oneMinus().negate().exp2(),o=t.sub(r.pow(a).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(o)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=wv.dot(br).clamp(),s=iS({dotVH:n,f0:$L,f90:WL}),r=t.mul(AN.mul(s).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(AN));t.assign(r)}if(this.sheen===!0){const n=Ev.r.max(Ev.g).max(Ev.b).mul(.157).oneMinus(),s=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(s)}}}const mj=te(1),xB=te(-2),WC=te(.8),qL=te(-1),qC=te(.4),XL=te(2),XC=te(.305),YL=te(3),gj=te(.21),VNe=te(4),yj=te(4),kNe=te(16),GNe=ve(([i])=>{const e=ye(dr(i)).toVar(),t=te(-1).toVar();return un(e.x.greaterThan(e.z),()=>{un(e.x.greaterThan(e.y),()=>{t.assign(qo(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign(qo(i.y.greaterThan(0),1,4))})}).Else(()=>{un(e.z.greaterThan(e.y),()=>{t.assign(qo(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign(qo(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),HNe=ve(([i,e])=>{const t=ot().toVar();return un(e.equal(0),()=>{t.assign(ot(i.z,i.y).div(dr(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(ot(i.x.negate(),i.z.negate()).div(dr(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(ot(i.x.negate(),i.y).div(dr(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(ot(i.z.negate(),i.y).div(dr(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(ot(i.x.negate(),i.z).div(dr(i.y)))}).Else(()=>{t.assign(ot(i.x,i.y).div(dr(i.z)))}),Wn(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),jNe=ve(([i])=>{const e=te(0).toVar();return un(i.greaterThanEqual(WC),()=>{e.assign(mj.sub(i).mul(qL.sub(xB)).div(mj.sub(WC)).add(xB))}).ElseIf(i.greaterThanEqual(qC),()=>{e.assign(WC.sub(i).mul(XL.sub(qL)).div(WC.sub(qC)).add(qL))}).ElseIf(i.greaterThanEqual(XC),()=>{e.assign(qC.sub(i).mul(YL.sub(XL)).div(qC.sub(XC)).add(XL))}).ElseIf(i.greaterThanEqual(gj),()=>{e.assign(XC.sub(i).mul(VNe.sub(YL)).div(XC.sub(gj)).add(YL))}).Else(()=>{e.assign(te(-2).mul(Kh(Wn(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),Bte=ve(([i,e])=>{const t=i.toVar();t.assign(Wn(2,t).sub(1));const n=ye(t,1).toVar();return un(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),Ite=ve(([i,e,t,n,s,r])=>{const a=te(t),o=ye(e),l=ef(jNe(a),xB,r),c=$m(l),d=Zh(l),h=ye(bB(i,o,d,n,s,r)).toVar();return un(c.notEqual(0),()=>{const m=ye(bB(i,o,d.add(1),n,s,r)).toVar();h.assign(Wi(h,m,c))}),h}),bB=ve(([i,e,t,n,s,r])=>{const a=te(t).toVar(),o=ye(e),l=te(GNe(o)).toVar(),c=te(ma(yj.sub(a),0)).toVar();a.assign(ma(a,yj));const d=te(Jb(a)).toVar(),h=ot(HNe(o,l).mul(d.sub(2)).add(1)).toVar();return un(l.greaterThan(2),()=>{h.y.addAssign(d),l.subAssign(3)}),h.x.addAssign(l.mul(d)),h.x.addAssign(c.mul(Wn(3,kNe))),h.y.addAssign(Wn(4,Jb(r).sub(d))),h.x.mulAssign(n),h.y.mulAssign(s),i.sample(h).grad(ot(),ot())}),KL=ve(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:s,CUBEUV_TEXEL_WIDTH:r,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=am(n),c=t.mul(l).add(s.cross(t).mul($u(n))).add(s.mul(s.dot(t).mul(l.oneMinus())));return bB(i,c,e,r,a,o)}),Fte=ve(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:s,samples:r,dTheta:a,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h})=>{const m=ye(qo(e,t,bD(t,n))).toVar();un(m.equal(ye(0)),()=>{m.assign(ye(n.z,0,n.x.negate()))}),m.assign(Om(m));const v=ye().toVar();return v.addAssign(s.element(0).mul(KL({theta:0,axis:m,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h}))),Ss({start:de(1),end:i},({i:_})=>{un(_.greaterThanEqual(r),()=>{Jee()});const x=te(a.mul(te(_))).toVar();v.addAssign(s.element(_).mul(KL({theta:x.mul(-1),axis:m,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h}))),v.addAssign(s.element(_).mul(KL({theta:x,axis:m,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:h})))}),jt(v,1)}),fb=4,vj=[.125,.215,.35,.446,.526,.582],vv=20,ZL=new e0(-1,1,1,-1,0,1),$Ne=new la(90,1),_j=new Vt;let QL=null,JL=0,eU=0;const mv=(1+Math.sqrt(5))/2,Yx=1/mv,xj=[new ae(-mv,Yx,0),new ae(mv,Yx,0),new ae(-Yx,0,mv),new ae(Yx,0,mv),new ae(0,mv,-Yx),new ae(0,mv,Yx),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)],WNe=new ae,zte=new WeakMap,qNe=[3,1,5,0,4,2],tU=Bte(Ns(),Sc("faceIndex")).normalize(),jV=ye(tU.x,tU.y,tU.z);class Vte{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,s=100,r={}){const{size:a=256,position:o=WNe,renderTarget:l=null}=r;if(this._setSize(a),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const d=l||this._allocateTarget();return r.renderTarget=d,this.fromSceneAsync(e,t,n,s,r),d}QL=this._renderer.getRenderTarget(),JL=this._renderer.getActiveCubeFace(),eU=this._renderer.getActiveMipmapLevel();const c=l||this._allocateTarget();return c.depthBuffer=!0,this._init(c),this._sceneToCubeUV(e,n,s,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}async fromSceneAsync(e,t=0,n=.1,s=100,r={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,s,r)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Sj(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Tj(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===gu||e.mapping===nd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QL,JL,eU),e.scissorTest=!1,YC(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),QL=this._renderer.getRenderTarget(),JL=this._renderer.getActiveCubeFace(),eU=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTarget();return this._init(n),this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize;return bj(e,t)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bj(e.width,e.height);const{_lodMax:t}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=XNe(t)),this._blurMaterial=YNe(t,e.width,e.height)}}async _compileMaterial(e){const t=new zs(this._lodPlanes[0],e);await this._renderer.compile(t,ZL)}_sceneToCubeUV(e,t,n,s,r){const a=$Ne;a.near=t,a.far=n;const o=[1,1,1,1,-1,1],l=[1,-1,1,-1,1,-1],c=this._renderer,d=c.autoClear;c.getClearColor(_j),c.autoClear=!1;let h=this._backgroundBox;if(h===null){const _=new Gl({name:"PMREM.Background",side:Ts,depthWrite:!1,depthTest:!1});h=new zs(new hp,_)}let m=!1;const v=e.background;v?v.isColor&&(h.material.color.copy(v),e.background=null,m=!0):(h.material.color.copy(_j),m=!0),c.setRenderTarget(s),c.clear(),m&&c.render(h,a);for(let _=0;_<6;_++){const x=_%3;x===0?(a.up.set(0,o[_],0),a.position.set(r.x,r.y,r.z),a.lookAt(r.x+l[_],r.y,r.z)):x===1?(a.up.set(0,0,o[_]),a.position.set(r.x,r.y,r.z),a.lookAt(r.x,r.y+l[_],r.z)):(a.up.set(0,o[_],0),a.position.set(r.x,r.y,r.z),a.lookAt(r.x,r.y,r.z+l[_]));const T=this._cubeSize;YC(s,x*T,_>2?T:0,T,T),c.render(e,a)}c.autoClear=d,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===gu||e.mapping===nd;s?this._cubemapMaterial===null&&(this._cubemapMaterial=Sj(e)):this._equirectMaterial===null&&(this._equirectMaterial=Tj(e));const r=s?this._cubemapMaterial:this._equirectMaterial;r.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=r;const o=this._cubeSize;YC(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,ZL)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=xj[(s-r-1)%xj.length];this._blur(e,r-1,r,a,o)}t.autoClear=n}_blur(e,t,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,s,"latitudinal",r),this._halfBlur(a,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=this._lodMeshes[s];h.material=c;const m=zte.get(c),v=this._sizeLods[n]-1,_=isFinite(r)?Math.PI/(2*v):2*Math.PI/(2*vv-1),x=r/_,T=isFinite(r)?1+Math.floor(d*x):vv;T>vv&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${vv}`);const b=[];let w=0;for(let L=0;L<vv;++L){const F=L/x,I=Math.exp(-F*F/2);b.push(I),L===0?w+=I:L<T&&(w+=2*I)}for(let L=0;L<b.length;L++)b[L]=b[L]/w;e.texture.frame=(e.texture.frame||0)+1,m.envMap.value=e.texture,m.samples.value=T,m.weights.array=b,m.latitudinal.value=a==="latitudinal"?1:0,o&&(m.poleAxis.value=o);const{_lodMax:M}=this;m.dTheta.value=_,m.mipInt.value=M-n;const R=this._sizeLods[s],N=3*R*(s>M-fb?s-M+fb:0),D=4*(this._cubeSize-R);YC(t,N,D,3*R,2*R),l.setRenderTarget(t),l.render(h,ZL)}}function XNe(i){const e=[],t=[],n=[],s=[];let r=i;const a=i-fb+1+vj.length;for(let o=0;o<a;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>i-fb?c=vj[o-i+fb-1]:o===0&&(c=0),n.push(c);const d=1/(l-2),h=-d,m=1+d,v=[h,h,m,h,m,m,h,h,m,m,h,m],_=6,x=6,T=3,b=2,w=1,M=new Float32Array(T*x*_),R=new Float32Array(b*x*_),N=new Float32Array(w*x*_);for(let L=0;L<_;L++){const F=L%3*2/3-1,I=L>2?0:-1,z=[F,I,0,F+2/3,I,0,F+2/3,I+1,0,F,I,0,F+2/3,I+1,0,F,I+1,0],H=qNe[L];M.set(z,T*x*H),R.set(v,b*x*H);const Y=[H,H,H,H,H,H];N.set(Y,w*x*H)}const D=new di;D.setAttribute("position",new os(M,T)),D.setAttribute("uv",new os(R,b)),D.setAttribute("faceIndex",new os(N,w)),e.push(D),s.push(new zs(D,null)),r>fb&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:s}}function bj(i,e){const t={magFilter:Zi,minFilter:Zi,generateMipmaps:!1,type:$a,format:nr,colorSpace:Hf},n=new rf(i,e,t);return n.texture.mapping=lp,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function YC(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function $V(i){const e=new Er;return e.depthTest=!1,e.depthWrite=!1,e.blending=ql,e.name=`PMREM_${i}`,e}function YNe(i,e,t){const n=Hl(new Array(vv).fill(0)),s=pn(new ae(0,1,0)),r=pn(0),a=te(vv),o=pn(0),l=pn(1),c=Ni(null),d=pn(0),h=te(1/e),m=te(1/t),v=te(i),_={n:a,latitudinal:o,weights:n,poleAxis:s,outputDirection:jV,dTheta:r,samples:l,envMap:c,mipInt:d,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:m,CUBEUV_MAX_MIP:v},x=$V("blur");return x.fragmentNode=Fte({..._,latitudinal:o.equal(1)}),zte.set(x,_),x}function Sj(i){const e=$V("cubemap");return e.fragmentNode=tS(i,jV),e}function Tj(i){const e=$V("equirect");return e.fragmentNode=Ni(i,zV(jV),0),e}const Ej=new WeakMap;function KNe(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:t,maxMip:e}}function ZNe(i,e,t){const n=QNe(e);let s=n.get(i);if((s!==void 0?s.pmremVersion:-1)!==i.pmremVersion){const a=i.image;if(i.isCubeTexture)if(JNe(a))s=t.fromCubemap(i,s);else return null;else if(e2e(a))s=t.fromEquirectangular(i,s);else return null;s.pmremVersion=i.pmremVersion,n.set(i,s)}return s.texture}function QNe(i){let e=Ej.get(i);return e===void 0&&(e=new WeakMap,Ej.set(i,e)),e}class kte extends ga{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const s=new Es;s.isRenderTargetTexture=!0,this._texture=Ni(s),this._width=pn(0),this._height=pn(0),this._maxMip=pn(0),this.updateBeforeType=ii.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=KNe(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const n=t?t.pmremVersion:-1,s=this._value;n!==s.pmremVersion&&(s.isPMREMTexture===!0?t=s:t=ZNe(s,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new Vte(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this)),t=SV.mul(ye(t.x,t.y.negate(),t.z));let n=this.levelNode;return n===null&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),Ite(this._texture,t,n,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function JNe(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function e2e(i){return i==null?!1:i.height>0}const WV=Un(kte).setParameterLength(1,3),wj=new WeakMap;class Gte extends A_{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const h=n.isTextureNode?n.value:t[n.property];let m=wj.get(h);m===void 0&&(m=WV(h),wj.set(h,m)),n=m}const r=t.useAnisotropy===!0||t.anisotropy>0?pee:bs,a=n.context(Mj(kh,r)).mul(CR),o=n.context(t2e(r0)).mul(Math.PI).mul(CR),l=eE(a),c=eE(o);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(c);const d=e.context.lightingModel.clearcoatRadiance;if(d){const h=n.context(Mj(jE,wv)).mul(CR),m=eE(h);d.addAssign(m)}}}const Mj=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=br.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection(ld)),t),getTextureLevel:()=>i}},t2e=i=>({getUV:()=>i,getTextureLevel:()=>te(1)}),n2e=new nM;class qV extends Er{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(n2e),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new Gte(t):null}setupLightingModel(){return new PD}setupSpecular(){const e=Wi(ye(.04),as.rgb,HE);ru.assign(e),$E.assign(1)}setupVariants(){const e=this.metalnessNode?te(this.metalnessNode):Tee;HE.assign(e);let t=this.roughnessNode?te(this.roughnessNode):See;t=kV({roughness:t}),kh.assign(t),this.setupSpecular(),as.assign(jt(as.rgb.mul(e.oneMinus()),as.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const i2e=new F2;class XV extends qV{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(i2e),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?te(this.iorNode):Iee;Q1.assign(e),ru.assign(Wi(yu(iV(Q1.sub(1).div(Q1.add(1))).mul(bee),ye(1)).mul(gB),as.rgb,HE)),$E.assign(Wi(gB,1,HE))}setupLightingModel(){return new PD(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?te(this.clearcoatNode):wee,n=this.clearcoatRoughnessNode?te(this.clearcoatRoughnessNode):Mee;AN.assign(t),jE.assign(kV({roughness:n}))}if(this.useSheen){const t=this.sheenNode?ye(this.sheenNode):Ree,n=this.sheenRoughnessNode?te(this.sheenRoughnessNode):Nee;Ev.assign(t),pD.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?te(this.iridescenceNode):Pee,n=this.iridescenceIORNode?te(this.iridescenceIORNode):Oee,s=this.iridescenceThicknessNode?te(this.iridescenceThicknessNode):Lee;mD.assign(t),kz.assign(n),Gz.assign(s)}if(this.useAnisotropy){const t=(this.anisotropyNode?ot(this.anisotropyNode):Dee).toVar();Gg.assign(t.length()),un(Gg.equal(0),()=>{t.assign(ot(1,0))}).Else(()=>{t.divAssign(ot(Gg)),Gg.assign(Gg.saturate())}),CN.assign(Gg.pow2().mix(kh.pow2(),1)),Z1.assign(Mv[0].mul(t.x).add(Mv[1].mul(t.y))),Fv.assign(Mv[1].mul(t.x).sub(Mv[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?te(this.transmissionNode):Uee,n=this.thicknessNode?te(this.thicknessNode):Bee,s=this.attenuationDistanceNode?te(this.attenuationDistanceNode):Fee,r=this.attenuationColorNode?ye(this.attenuationColorNode):zee;if(NN.assign(t),Hz.assign(n),jz.assign(s),$z.assign(r),this.useDispersion){const a=this.dispersionNode?te(this.dispersionNode):kee;Wz.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?ye(this.clearcoatNormalNode):Aee}setup(e){e.context.setupClearcoatNormal=()=>Nb(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}class s2e extends PD{constructor(e=!1,t=!1,n=!1,s=!1,r=!1,a=!1,o=!1){super(e,t,n,s,r,a),this.useSSS=o}direct({lightDirection:e,lightColor:t,reflectedLight:n},s){if(this.useSSS===!0){const r=s.material,{thicknessColorNode:a,thicknessDistortionNode:o,thicknessAmbientNode:l,thicknessAttenuationNode:c,thicknessPowerNode:d,thicknessScaleNode:h}=r,m=e.add(bs.mul(o)).normalize(),v=te(br.dot(m.negate()).saturate().pow(d).mul(h)),_=ye(v.add(l).mul(a));n.directDiffuse.addAssign(_.mul(c.mul(t)))}super.direct({lightDirection:e,lightColor:t,reflectedLight:n},s)}}class r2e extends XV{static get type(){return"MeshSSSNodeMaterial"}constructor(e){super(e),this.thicknessColorNode=null,this.thicknessDistortionNode=te(.1),this.thicknessAmbientNode=te(0),this.thicknessAttenuationNode=te(.1),this.thicknessPowerNode=te(2),this.thicknessScaleNode=te(10)}get useSSS(){return this.thicknessColorNode!==null}setupLightingModel(){return new s2e(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion,this.useSSS)}copy(e){return this.thicknessColorNode=e.thicknessColorNode,this.thicknessDistortionNode=e.thicknessDistortionNode,this.thicknessAmbientNode=e.thicknessAmbientNode,this.thicknessAttenuationNode=e.thicknessAttenuationNode,this.thicknessPowerNode=e.thicknessPowerNode,this.thicknessScaleNode=e.thicknessScaleNode,super.copy(e)}}const a2e=ve(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),s=ot(n.mul(.5).add(.5),0);if(t.material.gradientMap){const r=fm("gradientMap","texture").context({getUV:()=>s});return ye(r.r)}else{const r=s.fwidth().mul(.5);return Wi(ye(.7),ye(1),tf(te(.7).sub(r.x),te(.7).add(r.x),s.x))}});class o2e extends WS{direct({lightDirection:e,lightColor:t,reflectedLight:n},s){const r=a2e({normal:wD,lightDirection:e,builder:s}).mul(t);n.directDiffuse.addAssign(r.mul(f_({diffuseColor:as.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:s}=e.context;s.indirectDiffuse.addAssign(n.mul(f_({diffuseColor:as}))),s.indirectDiffuse.mulAssign(t)}}const l2e=new V2;class Hte extends Er{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(l2e),this.setValues(e)}setupLightingModel(){return new o2e}}const jte=ve(()=>{const i=ye(br.z,0,br.x.negate()).normalize(),e=br.cross(i);return ot(i.dot(bs),e.dot(bs)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),c2e=new $2;class $te extends Er{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(c2e),this.setValues(e)}setupVariants(e){const t=jte;let n;e.material.matcap?n=fm("matcap","texture").context({getUV:()=>t}):n=ye(Wi(.2,.8,t.y)),as.rgb.mulAssign(n.rgb)}}class Wte extends ga{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const r=t.cos(),a=t.sin();return hD(r,a,a.negate(),r).mul(n)}else{const r=t,a=Iv(jt(1,0,0,0),jt(0,am(r.x),$u(r.x).negate(),0),jt(0,$u(r.x),am(r.x),0),jt(0,0,0,1)),o=Iv(jt(am(r.y),0,$u(r.y),0),jt(0,1,0,0),jt($u(r.y).negate(),0,am(r.y),0),jt(0,0,0,1)),l=Iv(jt(am(r.z),$u(r.z).negate(),0,0),jt($u(r.z),am(r.z),0,0),jt(0,0,1,0),jt(0,0,0,1));return a.mul(o).mul(l).mul(jt(n,1)).xyz}}}const gM=Un(Wte).setParameterLength(2),u2e=new zw;class YV extends Er{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(u2e),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,{positionNode:s,rotationNode:r,scaleNode:a,sizeAttenuation:o}=this,l=Um.mul(ye(s||0));let c=ot(qd[0].xyz.length(),qd[1].xyz.length());a!==null&&(c=c.mul(ot(a))),n.isPerspectiveCamera&&o===!1&&(c=c.mul(l.z.negate()));let d=gl.xy;if(t.center&&t.center.isVector2===!0){const v=ZCe("center","vec2",t);d=d.sub(v.sub(.5))}d=d.mul(c);const h=te(r||Cee),m=gM(d,h);return jt(l.xy.add(m),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const d2e=new kw,f2e=new lt;class qte extends YV{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(d2e),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return Um.mul(ye(e||Ma)).xyz}setupVertexSprite(e){const{material:t,camera:n}=e,{rotationNode:s,scaleNode:r,sizeNode:a,sizeAttenuation:o}=this;let l=super.setupVertex(e);if(t.isNodeMaterial!==!0)return l;let c=a!==null?ot(a):Vee;c=c.mul(zJ),n.isPerspectiveCamera&&o===!0&&(c=c.mul(h2e.div(Aa.z.negate()))),r&&r.isNode&&(c=c.mul(ot(r)));let d=gl.xy;if(s&&s.isNode){const h=te(s);d=gM(d,h)}return d=d.mul(c),d=d.div(vV.div(2)),d=d.mul(l.w),l=l.add(jt(d,0,0)),l}setupVertex(e){return e.object.isPoints?super.setupVertex(e):this.setupVertexSprite(e)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}const h2e=pn(1).onFrameUpdate(function({renderer:i}){const e=i.getSize(f2e);this.value=.5*e.y});class p2e extends WS{constructor(){super(),this.shadowNode=te(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){as.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(as.rgb)}}const m2e=new I2;class Xte extends Er{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(m2e),this.setValues(e)}setupLightingModel(){return new p2e}}const c1=If("vec3"),Aj=If("vec3"),Cj=If("vec3");class g2e extends WS{constructor(){super()}start(e){const{material:t,context:n}=e,s=If("vec3"),r=If("vec3");un(nE.sub(Ju).length().greaterThan(GJ.mul(2)),()=>{s.assign(nE),r.assign(Ju)}).Else(()=>{s.assign(Ju),r.assign(nE)});const a=r.sub(s),o=pn("int").onRenderUpdate(({material:m})=>m.steps),l=a.length().div(o).toVar(),c=a.normalize().toVar(),d=te(0).toVar(),h=ye(1).toVar();t.offsetNode&&d.addAssign(t.offsetNode.mul(l)),Ss(o,()=>{const m=s.add(c.mul(d)),v=ld.mul(jt(m,1)).xyz;t.depthNode!==null&&(Aj.assign(nS(UV(v.z,um,dm))),n.sceneDepthNode=nS(t.depthNode).toVar()),n.positionWorld=m,n.shadowPositionWorld=m,n.positionView=v,c1.assign(0);let _;t.scatteringNode&&(_=t.scatteringNode({positionRay:m})),super.start(e),_&&c1.mulAssign(_);const x=c1.mul(.01).negate().mul(l).exp();h.mulAssign(x),d.addAssign(l)}),Cj.addAssign(h.saturate().oneMinus())}scatteringLight(e,t){const n=t.context.sceneDepthNode;n?un(n.greaterThanEqual(Aj),()=>{c1.addAssign(e)}):c1.addAssign(e)}direct({lightNode:e,lightColor:t},n){if(e.light.distance===void 0)return;const s=t.xyz.toVar();s.mulAssign(e.shadowNode),this.scatteringLight(s,n)}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:s},r){const a=t.add(n).sub(s),o=t.sub(n).sub(s),l=t.sub(n).add(s),c=t.add(n).add(s),d=r.context.positionView,h=e.xyz.mul(RNe({P:d,p0:a,p1:o,p2:l,p3:c})).pow(1.5);this.scatteringLight(h,r)}finish(e){e.context.outgoingLight.assign(Cj)}}class y2e extends Er{static get type(){return"VolumeNodeMaterial"}constructor(e){super(),this.isVolumeNodeMaterial=!0,this.steps=25,this.offsetNode=null,this.scatteringNode=null,this.lights=!0,this.transparent=!0,this.side=Ts,this.depthTest=!1,this.depthWrite=!1,this.setValues(e)}setupLightingModel(){return new g2e}}class v2e{constructor(e,t){this.nodes=e,this.info=t,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class qf{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let s=0;s<e.length-1;s++){const r=e[s];n.has(r)===!1&&n.set(r,new WeakMap),n=n.get(r)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let _2e=0;function x2e(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const s in n)if(n[s]!==void 0){const r=n[s];r&&typeof r.get=="function"&&e.push(s)}t=Object.getPrototypeOf(t)}return e}class b2e{constructor(e,t,n,s,r,a,o,l,c,d){this.id=_2e++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=s,this.material=r,this.scene=a,this.camera=o,this.lightsNode=l,this.context=c,this.geometry=s.geometry,this.version=r.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=d,this.clippingContextCacheKey=d!==null?d.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],s=new Set,r={};for(const a of e){let o;if(a.node&&a.node.attribute?o=a.node.attribute:(o=t.getAttribute(a.name),r[a.name]=o.version),o===void 0)continue;n.push(o);const l=o.isInterleavedBufferAttribute?o.data:o;s.add(l)}return this.attributes=n,this.attributesId=r,this.vertexBuffers=Array.from(s.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:s,drawRange:r}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),l=o!==null;let c=1;if(n.isInstancedBufferGeometry===!0?c=n.instanceCount:e.count!==void 0&&(c=Math.max(0,e.count)),c===0)return null;if(a.instanceCount=c,e.isBatchedMesh===!0)return a;let d=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(d=2);let h=r.start*d,m=(r.start+r.count)*d;s!==null&&(h=Math.max(h,s.start*d),m=Math.min(m,(s.start+s.count)*d));const v=n.attributes.position;let _=1/0;l?_=o.count:v!=null&&(_=v.count),h=Math.max(h,0),m=Math.min(m,_);const x=m-h;return x<0||x===1/0?null:(a.vertexCount=x,a.firstVertex=h,a)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const s=e.attributes[n];t+=n+",",s.data&&(t+=s.data.stride+","),s.offset&&(t+=s.offset+","),s.itemSize&&(t+=s.itemSize+","),s.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const s=e.morphAttributes[n];t+="morph-"+n+",";for(let r=0,a=s.length;r<a;r++){const o=s[r];t+=o.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t,renderer:n}=this;let s=t.customProgramCacheKey();for(const r of x2e(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(r))continue;const a=t[r];let o;if(a!==null){const l=typeof a;l==="number"?o=a!==0?"1":"0":l==="object"?(o="{",a.isTexture&&(o+=a.mapping,n.backend.isWebGPUBackend===!0&&(o+=a.magFilter,o+=a.minFilter,o+=a.wrapS,o+=a.wrapT,o+=a.wrapR)),o+="}"):o=String(a)}else o=String(a);s+=o+","}return s+=this.clippingContextCacheKey+",",e.geometry&&(s+=this.getGeometryCacheKey()),e.skeleton&&(s+=e.skeleton.bones.length+","),e.isBatchedMesh&&(s+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(s+=e._colorsTexture.uuid+",")),(e.isInstancedMesh||e.count>1)&&(s+=e.uuid+","),s+=e.receiveShadow+",",Mz(s)}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(this.attributes!==null){const e=this.attributesId;for(const t in e){const n=this.geometry.getAttribute(t);if(n===void 0||e[t]!==n.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=FE(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=FE(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}const sv=[];class S2e{constructor(e,t,n,s,r,a){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=s,this.bindings=r,this.info=a,this.chainMaps={}}get(e,t,n,s,r,a,o,l){const c=this.getChainMap(l);sv[0]=e,sv[1]=t,sv[2]=a,sv[3]=r;let d=c.get(sv);return d===void 0?(d=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,s,r,a,o,l),c.set(sv,d)):(d.updateClipping(o),d.needsGeometryUpdate&&d.setGeometry(e.geometry),(d.version!==t.version||d.needsUpdate)&&(d.initialCacheKey!==d.getCacheKey()?(d.dispose(),d=this.get(e,t,n,s,r,a,o,l)):d.version=t.version)),sv.length=0,d}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new qf)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,s,r,a,o,l,c,d,h){const m=this.getChainMap(h),v=new b2e(e,t,n,s,r,a,o,l,c,d);return v.onDispose=()=>{this.pipelines.delete(v),this.bindings.delete(v),this.nodes.delete(v),m.delete(v.getChainArray())},v}}class a0{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Xd={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},jg=16,T2e=211,E2e=212;class w2e extends a0{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===Xd.VERTEX?this.backend.createAttribute(e):t===Xd.INDEX?this.backend.createIndexAttribute(e):t===Xd.STORAGE?this.backend.createStorageAttribute(e):t===Xd.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const s=this._getBufferAttribute(e);(n.version<s.version||s.usage===Qg)&&(this.backend.updateAttribute(e),n.version=s.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function Yte(i){return i.index!==null?i.index.version:i.attributes.position.version}function Rj(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const r=t.array;for(let a=0,o=r.length;a<o;a+=3){const l=r[a+0],c=r[a+1],d=r[a+2];e.push(l,c,c,d,d,l)}}else{const r=n.array;for(let a=0,o=r.length/3-1;a<o;a+=3){const l=a+0,c=a+1,d=a+2;e.push(l,c,c,d,d,l)}}const s=new(FF(e)?Bw:Uw)(e,1);return s.version=Yte(i),s}class M2e extends a0{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const s=()=>{this.info.memory.geometries--;const r=t.index,a=e.getAttributes();r!==null&&this.attributes.delete(r);for(const l of a)this.attributes.delete(l);const o=this.wireframes.get(t);o!==void 0&&this.attributes.delete(o),t.removeEventListener("dispose",s)};t.addEventListener("dispose",s)}updateAttributes(e){const t=e.getAttributes();for(const r of t)r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute?this.updateAttribute(r,Xd.STORAGE):this.updateAttribute(r,Xd.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,Xd.INDEX);const s=e.geometry.indirect;s!==null&&this.updateAttribute(s,Xd.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let s=t.index;if(n.wireframe===!0){const r=this.wireframes;let a=r.get(t);a===void 0?(a=Rj(t),r.set(t,a)):a.version!==Yte(t)&&(this.attributes.delete(a),a=Rj(t),r.set(t,a)),s=a}return s}}class A2e{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Kte{constructor(e){this.cacheKey=e,this.usedTimes=0}}class C2e extends Kte{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class R2e extends Kte{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let N2e=0;class nU{constructor(e,t,n,s=null,r=null){this.id=N2e++,this.code=e,this.stage=t,this.name=n,this.transforms=s,this.attributes=r,this.usedTimes=0}}class D2e extends a0{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,s=this.get(e);if(this._needsComputeUpdate(e)){const r=s.pipeline;r&&(r.usedTimes--,r.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let o=this.programs.compute.get(a.computeShader);o===void 0&&(r&&r.computeProgram.usedTimes===0&&this._releaseProgram(r.computeProgram),o=new nU(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),n.createProgram(o));const l=this._getComputeCacheKey(e,o);let c=this.caches.get(l);c===void 0&&(r&&r.usedTimes===0&&this._releasePipeline(r),c=this._getComputePipeline(e,o,l,t)),c.usedTimes++,o.usedTimes++,s.version=e.version,s.pipeline=c}return s.pipeline}getForRender(e,t=null){const{backend:n}=this,s=this.get(e);if(this._needsRenderUpdate(e)){const r=s.pipeline;r&&(r.usedTimes--,r.vertexProgram.usedTimes--,r.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState(),o=e.material?e.material.name:"";let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(r&&r.vertexProgram.usedTimes===0&&this._releaseProgram(r.vertexProgram),l=new nU(a.vertexShader,"vertex",o),this.programs.vertex.set(a.vertexShader,l),n.createProgram(l));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(r&&r.fragmentProgram.usedTimes===0&&this._releaseProgram(r.fragmentProgram),c=new nU(a.fragmentShader,"fragment",o),this.programs.fragment.set(a.fragmentShader,c),n.createProgram(c));const d=this._getRenderCacheKey(e,l,c);let h=this.caches.get(d);h===void 0?(r&&r.usedTimes===0&&this._releasePipeline(r),h=this._getRenderPipeline(e,l,c,d,t)):e.pipeline=h,h.usedTimes++,l.usedTimes++,c.usedTimes++,s.pipeline=h}return s.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,s){n=n||this._getComputeCacheKey(e,t);let r=this.caches.get(n);return r===void 0&&(r=new R2e(n,t),this.caches.set(n,r),this.backend.createComputePipeline(r,s)),r}_getRenderPipeline(e,t,n,s,r){s=s||this._getRenderCacheKey(e,t,n);let a=this.caches.get(s);return a===void 0&&(a=new C2e(s,t,n),this.caches.set(s,a),e.pipeline=a,this.backend.createRenderPipeline(e,r)),a}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class P2e extends a0{constructor(e,t,n,s,r,a){super(),this.backend=e,this.textures=n,this.pipelines=r,this.attributes=s,this.nodes=t,this.info=a,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const s=this.get(n);s.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),s.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const s=this.get(n);s.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),s.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,s=n.isIndirectStorageBufferAttribute?Xd.INDIRECT:Xd.STORAGE;this.attributes.update(n,s)}}_update(e,t){const{backend:n}=this;let s=!1,r=!0,a=0,o=0;for(const l of e.bindings)if(!(l.isNodeUniformsGroup&&this.nodes.updateGroup(l)===!1)){if(l.isStorageBuffer){const c=l.attribute,d=c.isIndirectStorageBufferAttribute?Xd.INDIRECT:Xd.STORAGE;this.attributes.update(c,d)}if(l.isUniformBuffer)l.update()&&n.updateBinding(l);else if(l.isSampledTexture){const c=l.update(),d=l.texture,h=this.textures.get(d);if(c&&(this.textures.updateTexture(d),l.generation!==h.generation&&(l.generation=h.generation,s=!0,r=!1)),n.get(d).externalTexture!==void 0||h.isDefaultTexture?r=!1:(a=a*10+d.id,o+=d.version),d.isStorageTexture===!0){const v=this.get(d);l.store===!0?v.needsMipmap=!0:this.textures.needsMipmaps(d)&&v.needsMipmap===!0&&(this.backend.generateMipmaps(d),v.needsMipmap=!1)}}else l.isSampler&&l.update()}s===!0&&this.backend.updateBindings(e,t,r?a:0,o)}}function O2e(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?i.z-e.z:i.id-e.id}function Nj(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Dj(i){return(i.transmission>0||i.transmissionNode)&&i.side===Go&&i.forceSinglePass===!1}class L2e{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,s,r,a,o){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:t,material:n,groupOrder:s,renderOrder:e.renderOrder,z:r,group:a,clippingContext:o},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.groupOrder=s,l.renderOrder=e.renderOrder,l.z=r,l.group=a,l.clippingContext=o),this.renderItemsIndex++,l}push(e,t,n,s,r,a,o){const l=this.getNextRenderItem(e,t,n,s,r,a,o);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(Dj(n)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,t,n,s,r,a,o){const l=this.getNextRenderItem(e,t,n,s,r,a,o);n.transparent===!0||n.transmission>0?(Dj(n)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||O2e),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||Nj),this.transparent.length>1&&this.transparent.sort(t||Nj)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const u1=[];class U2e{constructor(e){this.lighting=e,this.lists=new qf}get(e,t){const n=this.lists;u1[0]=e,u1[1]=t;let s=n.get(u1);return s===void 0&&(s=new L2e(this.lighting,e,t),n.set(u1,s)),u1.length=0,s}dispose(){this.lists=new qf}}let B2e=0;class I2e{constructor(){this.id=B2e++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new bn,this.scissor=!1,this.scissorValue=new bn,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return Zte(this)}}function Zte(i){const{textures:e,activeCubeFace:t,activeMipmapLevel:n}=i,s=[t,n];for(const r of e)s.push(r.id);return oM(s)}const d1=[],F2e=new E_,z2e=new DS;class V2e{constructor(){this.chainMaps={}}get(e,t,n=null){d1[0]=e,d1[1]=t;let s;if(n===null)s="default";else{const o=n.texture.format;s=`${n.textures.length}:${o}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const r=this._getChainMap(s);let a=r.get(d1);return a===void 0&&(a=new I2e,r.set(d1,a)),d1.length=0,n!==null&&(a.sampleCount=n.samples===0?1:n.samples),a}getForClear(e=null){return this.get(F2e,z2e,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new qf)}dispose(){this.chainMaps={}}}const k2e=new ae;class G2e extends a0{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),s=e.samples===0?1:e.samples,r=n.depthTextureMips||(n.depthTextureMips={}),a=e.textures,o=this.getSize(a[0]),l=o.width>>t,c=o.height>>t;let d=e.depthTexture||r[t];const h=e.depthBuffer===!0||e.stencilBuffer===!0;let m=!1;d===void 0&&h&&(d=new Uc,d.format=e.stencilBuffer?Lc:Oc,d.type=e.stencilBuffer?Pc:Rs,d.image.width=l,d.image.height=c,d.image.depth=o.depth,d.isArrayTexture=e.multiview===!0&&o.depth>1,r[t]=d),(n.width!==o.width||o.height!==n.height)&&(m=!0,d&&(d.needsUpdate=!0,d.image.width=l,d.image.height=c,d.image.depth=d.isArrayTexture?d.image.depth:1)),n.width=o.width,n.height=o.height,n.textures=a,n.depthTexture=d||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==s&&(m=!0,d&&(d.needsUpdate=!0),n.sampleCount=s);const v={sampleCount:s};if(e.isXRRenderTarget!==!0){for(let _=0;_<a.length;_++){const x=a[_];m&&(x.needsUpdate=!0),this.updateTexture(x,v)}d&&this.updateTexture(d,v)}if(n.initialized!==!0){n.initialized=!0;const _=()=>{e.removeEventListener("dispose",_);for(let x=0;x<a.length;x++)this._destroyTexture(a[x]);d&&this._destroyTexture(d),this.delete(e),this.backend.delete(e)};e.addEventListener("dispose",_)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const s=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,r=this.backend;if(s&&n.initialized===!0&&(r.destroySampler(e),r.destroyTexture(e)),e.isFramebufferTexture){const c=this.renderer.getRenderTarget();c?e.type=c.texture.type:e.type=Tr}const{width:a,height:o,depth:l}=this.getSize(e);if(t.width=a,t.height=o,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,a,o):1,e.isCubeTexture&&e.mipmaps.length>0&&t.levels++,s||e.isStorageTexture===!0||e.isExternalTexture===!0)r.createSampler(e),r.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&r.createSampler(e),e.version>0){const d=e.image;if(d===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(d.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const h=[];for(const m of e.images)h.push(m);t.images=h}else t.image=d;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(r.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&r.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&r.generateMipmaps(e),e.onUpdate&&e.onUpdate(e)}}else r.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++,e.isVideoTexture&&Sn.getTransfer(e.colorSpace)!==Kt&&console.warn("WebGPURenderer: Video textures must use a color space with a sRGB transfer function, e.g. SRGBColorSpace.");const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e)};e.addEventListener("dispose",c)}n.version=e.version}getSize(e,t=k2e){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?(t.width=n.videoWidth||1,t.height=n.videoHeight||1,t.depth=1):n instanceof VideoFrame?(t.width=n.displayWidth||1,t.height=n.displayHeight||1,t.depth=1):(t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1)):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let s;return e.mipmaps.length>0?s=e.mipmaps.length:e.isCompressedTexture===!0?s=1:s=Math.floor(Math.log2(Math.max(t,n)))+1,s}needsMipmaps(e){return e.generateMipmaps===!0||e.mipmaps.length>0}_destroyTexture(e){this.has(e)===!0&&(this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e),this.info.memory.textures--)}}class KV extends Vt{constructor(e,t,n,s=1){super(e,t,n),this.a=s}set(e,t,n,s=1){return this.a=s,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class ZV extends ps{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const H2e=(i,e)=>st(new ZV(i,e));class Qte extends Jt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getNodeType(e){return this.hasOutput?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.hasOutput?this.outputNode.getMemberType(e,t):"void"}add(e){return e.isNode!==!0?(console.error("THREE.TSL: Invalid node added to stack."),this):(this.nodes.push(e),this)}If(e,t){const n=new db(t);return this._currentCond=qo(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new db(t),s=qo(e,n);return this._currentCond.elseNode=s,this._currentCond=s,this}Else(e){return this._currentCond.elseNode=new db(e),this}Switch(e){return this._expressionNode=st(e),this}Case(...e){const t=[];if(e.length>=2)for(let o=0;o<e.length-1;o++)t.push(this._expressionNode.equal(st(e[o])));else console.error("THREE.TSL: Invalid parameter length. Case() requires at least two parameters.");const n=e[e.length-1],s=new db(n);let r=t[0];for(let o=1;o<t.length;o++)r=r.or(t[o]);const a=qo(r,s);return this._currentCond===null?(this._currentCond=a,this.add(this._currentCond)):(this._currentCond.elseNode=a,this._currentCond=a,this)}Default(e){return this.Else(e),this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const s of this.getChildren())s.isVarNode&&s.intent===!0&&e.getNodeProperties(s).assign!==!0||(t["node"+n++]=s);return t.outputNode||null}get hasOutput(){return this.outputNode&&this.outputNode.isNode}build(e,...t){const n=e.currentStack,s=dD();GE(this),e.currentStack=this;const r=e.buildStage;for(const o of this.nodes)if(!(o.isVarNode&&o.intent===!0&&e.getNodeProperties(o).assign!==!0)){if(r==="setup")o.build(e);else if(r==="analyze")o.build(e,this);else if(r==="generate"){const l=e.getDataFromNode(o,"any").stages,c=l&&l[e.shaderStage];if(o.isVarNode&&c&&c.length===1&&c[0]&&c[0].isStackNode)continue;o.build(e,"void")}}let a;return this.hasOutput?a=this.outputNode.build(e,...t):a=super.build(e,...t),GE(s),e.currentStack=n,a}}const DR=Un(Qte).setParameterLength(0,1);function j2e(i){return Object.entries(i).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class Jte extends Jt{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=j2e(e),this.name=t,this.isStructLayoutNode=!0}getLength(){const t=Float32Array.BYTES_PER_ELEMENT;let n=0;for(const s of this.membersLayout){const r=s.type,a=GZ(r)*t,o=HZ(r),l=n%8,c=l%o,d=l+c;n+=c,d!==0&&8-d<a&&(n+=8-d),n+=a}return Math.ceil(n/8)*8/t}getMemberType(e,t){const n=this.membersLayout.find(s=>s.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.getStructTypeFromNode(this,this.membersLayout,this.name),e.addInclude(this)}generate(e){return this.getNodeType(e)}}class ene extends Jt{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structTypeNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structTypeNode.getNodeType(e)}getMemberType(e,t){return this.structTypeNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,s=e.getPropertyName(t);return e.addLineFlowCode(`${s} = ${e.generateStruct(n,this.structTypeNode.membersLayout,this.values)}`,this),t.name}}const $2e=(i,e=null)=>{const t=new Jte(i,e),n=(...s)=>{let r=null;if(s.length>0)if(s[0].isNode){r={};const a=Object.keys(i);for(let o=0;o<s.length;o++)r[a[o]]=s[o]}else r=s[0];return st(new ene(t,r))};return n.layout=t,n.isStruct=!0,n};class QV extends Jt{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,s=[];for(let r=0;r<n.length;r++){const a="m"+r,o=n[r].getNodeType(e);s.push({name:a,type:o,index:r})}t.membersLayout=s,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,s=t!==""?t+".":"";for(let r=0;r<n.length;r++){const a=n[r].build(e);e.addLineFlowCode(`${s}m${r} = ${a}`,this)}return t}}const W2e=Un(QV);function tne(i,e){for(let t=0;t<i.length;t++)if(i[t].name===e)return t;return-1}class nne extends QV{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return ine(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),s=[],r=n.textures;for(const a in t){const o=tne(r,a);s[o]=jt(t[a])}return this.members=s,super.setup(e)}}const ine=Un(nne);class qS extends ga{static get type(){return"BitcastNode"}constructor(e,t,n=null){super(),this.valueNode=e,this.conversionType=t,this.inputType=n,this.isBitcastNode=!0}getNodeType(e){if(this.inputType!==null){const t=this.valueNode.getNodeType(e),n=e.getTypeLength(t);return e.getTypeFromLength(n,this.conversionType)}return this.conversionType}generate(e){const t=this.getNodeType(e);let n="";if(this.inputType!==null){const s=this.valueNode.getNodeType(e);n=e.getTypeLength(s)===1?this.inputType:e.changeComponentType(s,this.inputType)}else n=this.valueNode.getNodeType(e);return`${e.getBitcastMethod(t,n)}( ${this.valueNode.build(e,n)} )`}}const q2e=Tt(qS).setParameterLength(2),X2e=i=>new qS(i,"int","float"),Y2e=i=>new qS(i,"uint","float"),K2e=i=>new qS(i,"float","int"),Z2e=i=>new qS(i,"float","uint"),Q2e=ve(([i])=>{const e=i.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),SB=(i,e)=>Wd(Wn(4,i.mul(Ui(1,i))),e),J2e=(i,e)=>i.lessThan(.5)?SB(i.mul(2),e).div(2):Ui(1,SB(Wn(Ui(1,i),2),e).div(2)),eDe=(i,e,t)=>Wd(sd(Wd(i,e),qa(Wd(i,e),Wd(Ui(1,i),t))),1/e),tDe=(i,e)=>$u(DN.mul(e.mul(i).sub(1))).div(DN.mul(e.mul(i).sub(1))),om=ve(([i])=>i.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),nDe=ve(([i])=>ye(om(i.z.add(om(i.y.mul(1)))),om(i.z.add(om(i.x.mul(1)))),om(i.y.add(om(i.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),iDe=ve(([i,e,t])=>{const n=ye(i).toVar(),s=te(1.4).toVar(),r=te(0).toVar(),a=ye(n).toVar();return Ss({start:te(0),end:te(3),type:"float",condition:"<="},()=>{const o=ye(nDe(a.mul(2))).toVar();n.addAssign(o.add(t.mul(te(.1).mul(e)))),a.mulAssign(1.8),s.mulAssign(1.5),n.mulAssign(1.2);const l=te(om(n.z.add(om(n.x.add(om(n.y)))))).toVar();r.addAssign(l.div(s)),a.addAssign(.14)}),r}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class sne extends Jt{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let s=null,r=-1;for(const a of this.functionNodes){const l=a.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const c=l.inputs;if(t.length===c.length){let d=0;for(let h=0;h<t.length;h++){const m=t[h],v=c[h];m.getNodeType(e)===v.type?d++:d=0}d>r&&(s=a,r=d)}}this._candidateFnCall=n=s(...t)}return n}}const sDe=Un(sne),Tl=i=>(...e)=>sDe(i,...e),XS=pn(0).setGroup(cn).onRenderUpdate(i=>i.time),rDe=pn(0).setGroup(cn).onRenderUpdate(i=>i.deltaTime),rne=pn(0,"uint").setGroup(cn).onRenderUpdate(i=>i.frameId),aDe=(i=XS)=>i.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),oDe=(i=XS)=>i.fract().round(),lDe=(i=XS)=>i.add(.5).fract().mul(2).sub(1).abs(),cDe=(i=XS)=>i.fract(),uDe=ve(([i,e,t=ot(.5)])=>gM(i.sub(t),e).add(t)),dDe=ve(([i,e,t=ot(.5)])=>{const n=i.sub(t),s=n.dot(n),a=s.mul(s).mul(e);return i.add(n.mul(a))}),fDe=ve(({position:i=null,horizontal:e=!0,vertical:t=!1})=>{let n;i!==null?(n=qd.toVar(),n[3][0]=i.x,n[3][1]=i.y,n[3][2]=i.z):n=qd;const s=ld.mul(n);return kE(e)&&(s[0][0]=qd[0].length(),s[0][1]=0,s[0][2]=0),kE(t)&&(s[1][0]=0,s[1][1]=qd[1].length(),s[1][2]=0),s[2][0]=0,s[2][1]=0,s[2][2]=1,zd.mul(s).mul(Ma)}),hDe=ve(([i=null])=>{const e=nS();return nS(LV(i)).sub(e).lessThan(0).select(Tm,i)});class ane extends Jt{static get type(){return"SpriteSheetUVNode"}constructor(e,t=Ns(),n=te(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:s,height:r}=n,a=e.mod(s.mul(r)).floor(),o=a.mod(s),l=r.sub(a.add(1).div(s).ceil()),c=n.reciprocal(),d=ot(o,l);return t.add(d).mul(c)}}const pDe=Un(ane).setParameterLength(3),one=ve(([i,e=null,t=null,n=te(1),s=Ma,r=vu])=>{let a=r.abs().normalize();a=a.div(a.dot(ye(1)));const o=s.yz.mul(n),l=s.zx.mul(n),c=s.xy.mul(n),d=i.value,h=e!==null?e.value:d,m=t!==null?t.value:d,v=Ni(d,o).mul(a.x),_=Ni(h,l).mul(a.y),x=Ni(m,c).mul(a.z);return qa(v,_,x)}),mDe=(...i)=>one(...i),Kx=new Df,rv=new ae,Zx=new ae,iU=new ae,f1=new an,KC=new ae(0,0,-1),Uh=new bn,h1=new ae,ZC=new ae,p1=new bn,QC=new lt,UN=new rf,gDe=Tm.flipX();UN.depthTexture=new Uc(1,1);let JC=!1;class OD extends Wf{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||UN.texture,gDe),this._reflectorBaseNode=e.reflector||new yDe(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=st(new OD({defaultTexture:UN.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e._reflectorBaseNode=this._reflectorBaseNode,e}dispose(){super.dispose(),this._reflectorBaseNode.dispose()}}class yDe extends Jt{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new Qi,resolutionScale:s=1,generateMipmaps:r=!1,bounces:a=!0,depth:o=!1,samples:l=0}=t;this.textureNode=e,this.target=n,this.resolutionScale=s,t.resolution!==void 0&&(Xl('THREE.ReflectorNode: The "resolution" parameter has been renamed to "resolutionScale".'),this.resolutionScale=t.resolution),this.generateMipmaps=r,this.bounces=a,this.depth=o,this.samples=l,this.updateBeforeType=a?ii.RENDER:ii.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new Map,this.forceUpdate=!1,this.hasOutput=!1}_updateResolution(e,t){const n=this.resolutionScale;t.getDrawingBufferSize(QC),e.setSize(Math.round(QC.width*n),Math.round(QC.height*n))}setup(e){return this._updateResolution(UN,e.renderer),super.setup(e)}dispose(){super.dispose();for(const e of this.renderTargets.values())e.dispose()}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new rf(0,0,{type:$a,samples:this.samples}),this.generateMipmaps===!0&&(t.texture.minFilter=gF,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new Uc),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&JC)return!1;JC=!0;const{scene:t,camera:n,renderer:s,material:r}=e,{target:a}=this,o=this.getVirtualCamera(n),l=this.getRenderTarget(o);s.getDrawingBufferSize(QC),this._updateResolution(l,s),Zx.setFromMatrixPosition(a.matrixWorld),iU.setFromMatrixPosition(n.matrixWorld),f1.extractRotation(a.matrixWorld),rv.set(0,0,1),rv.applyMatrix4(f1),h1.subVectors(Zx,iU);const c=h1.dot(rv)>0;let d=!1;if(c===!0&&this.forceUpdate===!1){if(this.hasOutput===!1){JC=!1;return}d=!0}h1.reflect(rv).negate(),h1.add(Zx),f1.extractRotation(n.matrixWorld),KC.set(0,0,-1),KC.applyMatrix4(f1),KC.add(iU),ZC.subVectors(Zx,KC),ZC.reflect(rv).negate(),ZC.add(Zx),o.coordinateSystem=n.coordinateSystem,o.position.copy(h1),o.up.set(0,1,0),o.up.applyMatrix4(f1),o.up.reflect(rv),o.lookAt(ZC),o.near=n.near,o.far=n.far,o.updateMatrixWorld(),o.projectionMatrix.copy(n.projectionMatrix),Kx.setFromNormalAndCoplanarPoint(rv,Zx),Kx.applyMatrix4(o.matrixWorldInverse),Uh.set(Kx.normal.x,Kx.normal.y,Kx.normal.z,Kx.constant);const h=o.projectionMatrix;p1.x=(Math.sign(Uh.x)+h.elements[8])/h.elements[0],p1.y=(Math.sign(Uh.y)+h.elements[9])/h.elements[5],p1.z=-1,p1.w=(1+h.elements[10])/h.elements[14],Uh.multiplyScalar(1/Uh.dot(p1));const m=0;h.elements[2]=Uh.x,h.elements[6]=Uh.y,h.elements[10]=s.coordinateSystem===id?Uh.z-m:Uh.z+1-m,h.elements[14]=Uh.w,this.textureNode.value=l.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=l.depthTexture),r.visible=!1;const v=s.getRenderTarget(),_=s.getMRT(),x=s.autoClear;s.setMRT(null),s.setRenderTarget(l),s.autoClear=!0,d?(s.clear(),this.hasOutput=!1):(s.render(t,o),this.hasOutput=!0),s.setMRT(_),s.setRenderTarget(v),s.autoClear=x,r.visible=!0,JC=!1,this.forceUpdate=!1}get resolution(){return Xl('THREE.ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale}set resolution(e){Xl('THREE.ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale=e}}const vDe=i=>st(new OD(i)),sU=new e0(-1,1,1,-1,0,1);class _De extends di{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new on([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new on(t,2))}}const xDe=new _De;class YS extends zs{constructor(e=null){super(xDe,e),this.camera=sU,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,sU)}render(e){e.render(this,sU)}}const bDe=new lt;class lne extends Wf{static get type(){return"RTTNode"}constructor(e,t=null,n=null,s={type:$a}){const r=new rf(t,n,s);super(r.texture,Ns()),this.isRTTNode=!0,this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=r,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new YS(new Er),this.updateBeforeType=ii.RENDER}get autoResize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,s=t*this.pixelRatio;this.renderTarget.setSize(n,s),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoResize===!0){const n=e.getPixelRatio(),s=e.getSize(bDe),r=s.width*n,a=s.height*n;(r!==this.renderTarget.width||a!==this.renderTarget.height)&&(this.renderTarget.setSize(r,a),this.textureNeedsUpdate=!0)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new Wf(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const cne=(i,...e)=>st(new lne(st(i),...e)),SDe=(i,...e)=>i.isSampleNode||i.isTextureNode?i:i.isPassNode?i.getTextureNode():cne(i,...e),sb=ve(([i,e,t],n)=>{let s;n.renderer.coordinateSystem===id?(i=ot(i.x,i.y.oneMinus()).mul(2).sub(1),s=jt(ye(i,e),1)):s=jt(ye(i.x,i.y.oneMinus(),e).mul(2).sub(1),1);const r=jt(t.mul(s));return r.xyz.div(r.w)}),TDe=ve(([i,e])=>{const t=e.mul(jt(i,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return ot(n.x,n.y.oneMinus())}),EDe=ve(([i,e,t])=>{const n=oy(Ea(e)),s=xo(i.mul(n)).toVar(),r=Ea(e,s).toVar(),a=Ea(e,s.sub(xo(2,0))).toVar(),o=Ea(e,s.sub(xo(1,0))).toVar(),l=Ea(e,s.add(xo(1,0))).toVar(),c=Ea(e,s.add(xo(2,0))).toVar(),d=Ea(e,s.add(xo(0,2))).toVar(),h=Ea(e,s.add(xo(0,1))).toVar(),m=Ea(e,s.sub(xo(0,1))).toVar(),v=Ea(e,s.sub(xo(0,2))).toVar(),_=dr(Ui(te(2).mul(o).sub(a),r)).toVar(),x=dr(Ui(te(2).mul(l).sub(c),r)).toVar(),T=dr(Ui(te(2).mul(h).sub(d),r)).toVar(),b=dr(Ui(te(2).mul(m).sub(v),r)).toVar(),w=sb(i,r,t).toVar(),M=_.lessThan(x).select(w.sub(sb(i.sub(ot(te(1).div(n.x),0)),o,t)),w.negate().add(sb(i.add(ot(te(1).div(n.x),0)),l,t))),R=T.lessThan(b).select(w.sub(sb(i.add(ot(0,te(1).div(n.y))),h,t)),w.negate().add(sb(i.sub(ot(0,te(1).div(n.y))),m,t)));return Om(bD(M,R))});class wDe extends Jt{static get type(){return"SampleNode"}constructor(e,t=null){super(),this.callback=e,this.uvNode=t,this.isSampleNode=!0}setup(){return this.sample(Ns())}sample(e){return this.callback(e)}}const MDe=(i,e=null)=>st(new wDe(i,st(e)));class Bm extends Jt{static get type(){return"EventNode"}constructor(e,t){super("void"),this.eventType=e,this.callback=t,e===Bm.OBJECT?this.updateType=ii.OBJECT:e===Bm.MATERIAL&&(this.updateType=ii.RENDER)}update(e){this.callback(e)}}Bm.OBJECT="object";Bm.MATERIAL="material";const une=(i,e)=>st(new Bm(i,e)).toStack(),ADe=i=>une(Bm.OBJECT,i),CDe=i=>une(Bm.MATERIAL,i);class dne extends Qu{constructor(e,t,n=Float32Array){const s=ArrayBuffer.isView(e)?e:new n(e*t);super(s,t),this.isStorageInstancedBufferAttribute=!0}}class JV extends os{constructor(e,t,n=Float32Array){const s=ArrayBuffer.isView(e)?e:new n(e*t);super(s,t),this.isStorageBufferAttribute=!0}}const RDe=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=VE("float")):(t=Rz(e),n=VE(e));const s=new JV(i,t,n);return Vv(s,e,i)},NDe=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=VE("float")):(t=Rz(e),n=VE(e));const s=new dne(i,t,n);return Vv(s,e,i)};class fne extends Jt{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const DDe=Ot(fne),m1=new Kl,rU=new an;class Cc extends Jt{static get type(){return"SceneNode"}constructor(e=Cc.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let s;return t===Cc.BACKGROUND_BLURRINESS?s=tr("backgroundBlurriness","float",n):t===Cc.BACKGROUND_INTENSITY?s=tr("backgroundIntensity","float",n):t===Cc.BACKGROUND_ROTATION?s=pn("mat4").setName("backgroundRotation").setGroup(cn).onRenderUpdate(()=>{const r=n.background;return r!==null&&r.isTexture&&r.mapping!==SS?(m1.copy(n.backgroundRotation),m1.x*=-1,m1.y*=-1,m1.z*=-1,rU.makeRotationFromEuler(m1)):rU.identity(),rU}):console.error("THREE.SceneNode: Unknown scope:",t),s}}Cc.BACKGROUND_BLURRINESS="backgroundBlurriness";Cc.BACKGROUND_INTENSITY="backgroundIntensity";Cc.BACKGROUND_ROTATION="backgroundRotation";const hne=Ot(Cc,Cc.BACKGROUND_BLURRINESS),TB=Ot(Cc,Cc.BACKGROUND_INTENSITY),pne=Ot(Cc,Cc.BACKGROUND_ROTATION);class mne extends Wf{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=Wo.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);return t.storeNode=this.storeNode,t}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(Wo.READ_WRITE)}toReadOnly(){return this.setAccess(Wo.READ_ONLY)}toWriteOnly(){return this.setAccess(Wo.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:s,depthNode:r}=t,a=super.generate(e,"property"),o=n.build(e,this.value.is3DTexture===!0?"uvec3":"uvec2"),l=s.build(e,"vec4"),c=r?r.build(e,"int"):null,d=e.generateTextureStore(e,a,o,c,l);e.addLineFlowCode(d,this)}clone(){const e=super.clone();return e.storeNode=this.storeNode,e}}const gne=Un(mne).setParameterLength(1,3),PDe=(i,e,t)=>{const n=gne(i,e,t);return t!==null&&n.toStack(),n},ODe=ve(({texture:i,uv:e})=>{const n=ye().toVar();return un(e.x.lessThan(1e-4),()=>{n.assign(ye(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(ye(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(ye(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(ye(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(ye(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(ye(0,0,-1))}).Else(()=>{const r=i.sample(e.add(ye(-.01,0,0))).r.sub(i.sample(e.add(ye(.01,0,0))).r),a=i.sample(e.add(ye(0,-.01,0))).r.sub(i.sample(e.add(ye(0,.01,0))).r),o=i.sample(e.add(ye(0,0,-.01))).r.sub(i.sample(e.add(ye(0,0,.01))).r);n.assign(ye(r,a,o))}),n.normalize()});class yne extends Wf{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return ye(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(de(oy(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}generateOffset(e,t){return t.build(e,"ivec3")}normal(e){return ODe({texture:this,uv:e})}}const vne=Un(yne).setParameterLength(1,3);class _ne extends hM{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const LDe=(i,e,t)=>st(new _ne(i,e,t)),Pj=new WeakMap;class UDe extends ga{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=ii.OBJECT,this.updateAfterType=ii.OBJECT,this.previousModelWorldMatrix=pn(new an),this.previousProjectionMatrix=pn(new an).setGroup(cn),this.previousCameraViewMatrix=pn(new an)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const s=Oj(n);this.previousModelWorldMatrix.value.copy(s);const r=xne(t);r.frameId!==e&&(r.frameId=e,r.previousProjectionMatrix===void 0?(r.previousProjectionMatrix=new an,r.previousCameraViewMatrix=new an,r.currentProjectionMatrix=new an,r.currentCameraViewMatrix=new an,r.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),r.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(r.previousProjectionMatrix.copy(r.currentProjectionMatrix),r.previousCameraViewMatrix.copy(r.currentCameraViewMatrix)),r.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),r.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(r.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(r.previousCameraViewMatrix))}updateAfter({object:e}){Oj(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?zd:pn(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(Um).mul(Ma),s=this.previousProjectionMatrix.mul(t).mul(ON),r=n.xy.div(n.w),a=s.xy.div(s.w);return Ui(r,a)}}function xne(i){let e=Pj.get(i);return e===void 0&&(e={},Pj.set(i,e)),e}function Oj(i,e=0){const t=xne(i);let n=t[e];return n===void 0&&(t[e]=n=new an,t[e].copy(i.matrixWorld)),n}const BDe=Ot(UDe),IDe=ve(([i])=>ek(i.rgb)),FDe=ve(([i,e=te(1)])=>e.mix(ek(i.rgb),i.rgb)),zDe=ve(([i,e=te(1)])=>{const t=qa(i.r,i.g,i.b).div(3),n=i.r.max(i.g.max(i.b)),s=n.sub(t).mul(e).mul(-3);return Wi(i.rgb,n,s)}),VDe=ve(([i,e=te(1)])=>{const t=ye(.57735,.57735,.57735),n=e.cos();return ye(i.rgb.mul(n).add(t.cross(i.rgb).mul(e.sin()).add(t.mul(i0(t,i.rgb).mul(n.oneMinus())))))}),ek=(i,e=ye(Sn.getLuminanceCoefficients(new ae)))=>i0(i,e),kDe=ve(([i,e=ye(1),t=ye(0),n=ye(1),s=te(1),r=ye(Sn.getLuminanceCoefficients(new ae,Hf))])=>{const a=i.rgb.dot(ye(r)),o=ma(i.rgb.mul(e).add(t),0).toVar(),l=o.pow(n).toVar();return un(o.r.greaterThan(0),()=>{o.r.assign(l.r)}),un(o.g.greaterThan(0),()=>{o.g.assign(l.g)}),un(o.b.greaterThan(0),()=>{o.b.assign(l.b)}),o.assign(a.add(o.sub(a).mul(s))),jt(o.rgb,i.a)});class bne extends ga{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const GDe=Un(bne).setParameterLength(2),eR=new lt;class Sne extends Wf{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class Lj extends Sne{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){const e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e}}class Xf extends ga{static get type(){return"PassNode"}constructor(e,t,n,s={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=s,this._pixelRatio=1,this._width=1,this._height=1;const r=new Uc;r.isRenderTargetTexture=!0,r.name="depth";const a=new rf(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:$a,...s});a.texture.name="output",a.depthTexture=r,this.renderTarget=a,this._textures={output:a.texture,depth:r},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=pn(0),this._cameraFar=pn(0),this._mrt=null,this._layers=null,this._resolution=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=ii.FRAME,this.global=!0}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],s=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[s]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=st(new Lj(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=st(new Lj(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,s=this._cameraFar;this._viewZNodes[e]=t=BV(this.getTextureNode(e),n,s)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,s=this._cameraFar,r=this.getViewZNode(e);this._linearDepthNodes[e]=t=Pb(r,n,s)}return t}async compileAsync(e){const t=e.getRenderTarget(),n=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(t),e.setMRT(n)}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,this.renderTarget.texture.type=e.getColorBufferType(),this.scope===Xf.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let s,r;const a=t.getOutputRenderTarget();a&&a.isXRRenderTarget===!0?(r=1,s=t.xr.getCamera(),t.xr.updateCamera(s),eR.set(a.width,a.height)):(s=this.camera,r=t.getPixelRatio(),t.getSize(eR)),this._pixelRatio=r,this.setSize(eR.width,eR.height);const o=t.getRenderTarget(),l=t.getMRT(),c=s.layers.mask;this._cameraNear.value=s.near,this._cameraFar.value=s.far,this._layers!==null&&(s.layers.mask=this._layers.mask);for(const d in this._previousTextures)this.toggleTexture(d);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,s),t.setRenderTarget(o),t.setMRT(l),s.layers.mask=c}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,s=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,s),this._scissor!==null&&this.renderTarget.scissor.copy(this._scissor),this._viewport!==null&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,t,n,s){e===null?this._scissor=null:(this._scissor===null&&(this._scissor=new bn),e.isVector4?this._scissor.copy(e):this._scissor.set(e,t,n,s),this._scissor.multiplyScalar(this._pixelRatio*this._resolution).floor())}setViewport(e,t,n,s){e===null?this._viewport=null:(this._viewport===null&&(this._viewport=new bn),e.isVector4?this._viewport.copy(e):this._viewport.set(e,t,n,s),this._viewport.multiplyScalar(this._pixelRatio*this._resolution).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}Xf.COLOR="color";Xf.DEPTH="depth";const HDe=(i,e,t)=>st(new Xf(Xf.COLOR,i,e,t)),jDe=(i,e)=>st(new Sne(i,e)),$De=(i,e,t)=>st(new Xf(Xf.DEPTH,i,e,t));class Tne extends Xf{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,s,r){super(Xf.COLOR,e,t),this.colorNode=n,this.thicknessNode=s,this.alphaNode=r,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((s,r,a,o,l,c,d,h)=>{if((l.isMeshToonMaterial||l.isMeshToonNodeMaterial)&&l.wireframe===!1){const m=this._getOutlineMaterial(l);t.renderObject(s,r,a,o,m,c,d,h)}t.renderObject(s,r,a,o,l,c,d,h)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new Er;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=Ts;const t=vu.negate(),n=zd.mul(Um),s=te(1),r=n.mul(jt(Ma,1)),a=n.mul(jt(Ma.add(t),1)),o=Om(r.sub(a));return e.vertexNode=r.add(o.mul(this.thicknessNode).mul(r.w).mul(s)),e.colorNode=jt(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const WDe=(i,e,t=new Vt(0,0,0),n=.003,s=1)=>st(new Tne(i,e,st(t),st(n),st(s))),Ene=ve(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),wne=ve(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Mne=ve(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),qDe=ve(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),Ane=ve(([i,e])=>{const t=Zl(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=Zl(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=qDe(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),XDe=Zl(ye(1.6605,-.1246,-.0182),ye(-.5876,1.1329,-.1006),ye(-.0728,-.0083,1.1187)),YDe=Zl(ye(.6274,.0691,.0164),ye(.3293,.9195,.088),ye(.0433,.0113,.8956)),KDe=ve(([i])=>{const e=ye(i).toVar(),t=ye(e.mul(e)).toVar(),n=ye(t.mul(t)).toVar();return te(15.5).mul(n.mul(t)).sub(Wn(40.14,n.mul(e))).add(Wn(31.96,n).sub(Wn(6.868,t.mul(e))).add(Wn(.4298,t).add(Wn(.1191,e).sub(.00232))))}),Cne=ve(([i,e])=>{const t=ye(i).toVar(),n=Zl(ye(.856627153315983,.137318972929847,.11189821299995),ye(.0951212405381588,.761241990602591,.0767994186031903),ye(.0482516061458583,.101439036467562,.811302368396859)),s=Zl(ye(1.1271005818144368,-.1413297634984383,-.14132976349843826),ye(-.11060664309660323,1.157823702216272,-.11060664309660294),ye(-.016493938717834573,-.016493938717834257,1.2519364065950405)),r=te(-12.47393),a=te(4.026069);return t.mulAssign(e),t.assign(YDe.mul(t)),t.assign(n.mul(t)),t.assign(ma(t,1e-10)),t.assign(Kh(t)),t.assign(t.sub(r).div(a.sub(r))),t.assign(ef(t,0,1)),t.assign(KDe(t)),t.assign(s.mul(t)),t.assign(Wd(ma(ye(0),t),ye(2.2))),t.assign(XDe.mul(t)),t.assign(ef(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Rne=ve(([i,e])=>{const t=te(.76),n=te(.15);i=i.mul(e);const s=yu(i.r,yu(i.g,i.b)),r=qo(s.lessThan(.08),s.sub(Wn(6.25,s.mul(s))),.04);i.subAssign(r);const a=ma(i.r,ma(i.g,i.b));un(a.lessThan(t),()=>i);const o=Ui(1,t),l=Ui(1,o.mul(o).div(a.add(o.sub(t))));i.mulAssign(l.div(a));const c=Ui(1,sd(1,n.mul(a.sub(l)).add(1)));return Wi(i,ye(l),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class pl extends Jt{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=n}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const s of t)s.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const LD=Un(pl).setParameterLength(1,3),ZDe=(i,e)=>LD(i,e,"js"),QDe=(i,e)=>LD(i,e,"wgsl"),JDe=(i,e)=>LD(i,e,"glsl");class tk extends pl{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getMemberType(e,t){const n=this.getNodeType(e);return e.getStructTypeNode(n).getMemberType(e,t)}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),s=n.name,r=n.type,a=e.getCodeFromNode(this,r);s!==""&&(a.name=s);const o=e.getPropertyName(a),l=this.getNodeFunction(e).getCode(o);return a.code=l+`
`,t==="property"?o:e.format(`${o}()`,r,t)}}const Nne=(i,e=[],t="")=>{for(let r=0;r<e.length;r++){const a=e[r];typeof a=="function"&&(e[r]=a.functionNode)}const n=st(new tk(i,e,t)),s=(...r)=>n.call(...r);return s.functionNode=n,s},ePe=(i,e)=>Nne(i,e,"glsl"),tPe=(i,e)=>Nne(i,e,"wgsl");class Dne extends Jt{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new _u,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:te()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=Dz(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=Pz(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const PR=Un(Dne).setParameterLength(1);class Pne extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const s=t(...n);return this.set(e,s),s}}}class nPe{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const OR=new Pne;class One extends Jt{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new Pne,this._output=PR(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=PR(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=PR(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const s=this.getObject()[e];if(typeof s=="function")return s(...t)}async callAsync(e,...t){const s=this.getObject()[e];if(typeof s=="function")return s.constructor.name==="AsyncFunction"?await s(...t):s(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,d)=>this.setOutput(c,d),n=new nPe(this),s=OR.get("THREE"),r=OR.get("TSL"),a=this.getMethod(),o=[n,this._local,OR,e,t,s,r];this._object=a(...o);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const c of l.elements){const d=c.id||c.name;c.inputType&&(this.getParameter(d)===void 0&&this.setParameter(d,null),this.getParameter(d).inputType=c.inputType),c.outputType&&(this.getOutput(d)===void 0&&this.setOutput(d,null),this.getOutput(d).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:te()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),s="var "+n+`; var output = {};
`,r=`
return { ...output, `+n+" };",a=s+this.codeNode.code+r;return this._method=new Function(...e,a),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[Mz(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return oM(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const iPe=Un(One).setParameterLength(1,2);function Lne(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||Aa.z).negate()}const nk=ve(([i,e],t)=>{const n=Lne(t);return tf(i,e,n)}),ik=ve(([i],e)=>{const t=Lne(e);return i.mul(i,t,t).negate().exp().oneMinus()}),XE=ve(([i,e])=>jt(e.toFloat().mix(Rb.rgb,i.toVec3()),Rb.a));function sPe(i,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),XE(i,nk(e,t))}function rPe(i,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),XE(i,ik(e))}let av=null,ov=null;class Une extends Jt{static get type(){return"RangeNode"}constructor(e=te(),t=te()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(mm(this.minNode.value)),n=e.getTypeLength(mm(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const s=this.minNode.value,r=this.maxNode.value,a=e.getTypeLength(mm(s)),o=e.getTypeLength(mm(r));av=av||new bn,ov=ov||new bn,av.setScalar(0),ov.setScalar(0),a===1?av.setScalar(s):s.isColor?av.set(s.r,s.g,s.b,1):av.set(s.x,s.y,s.z||0,s.w||0),o===1?ov.setScalar(r):r.isColor?ov.set(r.r,r.g,r.b,1):ov.set(r.x,r.y,r.z||0,r.w||0);const l=4,c=l*t.count,d=new Float32Array(c);for(let m=0;m<c;m++){const v=m%l,_=av.getComponent(v),x=ov.getComponent(v);d[m]=Lf.lerp(_,x,Math.random())}const h=this.getNodeType(e);if(t.count<=4096)n=dM(d,"vec4",t.count).element(ly).convert(h);else{const m=new Qu(d,4);e.geometry.setAttribute("__range"+this.id,m),n=PN(m).convert(h)}}else n=te(0);return n}}const aPe=Un(Une).setParameterLength(2);class oPe extends Jt{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),s=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,s,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(s))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const yM=(i,e)=>st(new oPe(i,e)),lPe=yM("numWorkgroups","uvec3"),cPe=yM("workgroupId","uvec3"),uPe=yM("globalId","uvec3"),dPe=yM("localId","uvec3"),fPe=yM("subgroupSize","uint");class hPe extends Jt{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const sk=Un(hPe),pPe=()=>sk("workgroup").toStack(),mPe=()=>sk("storage").toStack(),gPe=()=>sk("texture").toStack();class yPe extends n0{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const s=e.context.assign;if(n=super.generate(e),s!==!0){const r=this.getNodeType(e);n=e.format(n,r,t)}return n}}class vPe extends Jt{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e,this.name=""}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return st(new yPe(this,e))}generate(e){const t=this.name!==""?this.name:`${this.scope}Array_${this.id}`;return e.getScopedArray(t,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const _Pe=(i,e)=>st(new vPe("Workgroup",i,e));class wo extends Jt{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=e.getNodeProperties(this),n=t.parents,s=this.method,r=this.getNodeType(e),a=this.getInputType(e),o=this.pointerNode,l=this.valueNode,c=[];c.push(`&${o.build(e,a)}`),l!==null&&c.push(l.build(e,a));const d=`${e.getMethod(s,r)}( ${c.join(", ")} )`;if(n?n.length===1&&n[0].isStackNode===!0:!1)e.addLineFlowCode(d,this);else return t.constNode===void 0&&(t.constNode=Lm(d,r).toConst()),t.constNode.build(e)}}wo.ATOMIC_LOAD="atomicLoad";wo.ATOMIC_STORE="atomicStore";wo.ATOMIC_ADD="atomicAdd";wo.ATOMIC_SUB="atomicSub";wo.ATOMIC_MAX="atomicMax";wo.ATOMIC_MIN="atomicMin";wo.ATOMIC_AND="atomicAnd";wo.ATOMIC_OR="atomicOr";wo.ATOMIC_XOR="atomicXor";const xPe=Un(wo),gp=(i,e,t)=>xPe(i,e,t).toStack(),bPe=i=>gp(wo.ATOMIC_LOAD,i,null),SPe=(i,e)=>gp(wo.ATOMIC_STORE,i,e),TPe=(i,e)=>gp(wo.ATOMIC_ADD,i,e),EPe=(i,e)=>gp(wo.ATOMIC_SUB,i,e),wPe=(i,e)=>gp(wo.ATOMIC_MAX,i,e),MPe=(i,e)=>gp(wo.ATOMIC_MIN,i,e),APe=(i,e)=>gp(wo.ATOMIC_AND,i,e),CPe=(i,e)=>gp(wo.ATOMIC_OR,i,e),RPe=(i,e)=>gp(wo.ATOMIC_XOR,i,e);class Ft extends ga{static get type(){return"SubgroupFunctionNode"}constructor(e,t=null,n=null){super(),this.method=e,this.aNode=t,this.bNode=n}getInputType(e){const t=this.aNode?this.aNode.getNodeType(e):null,n=this.bNode?this.bNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),r=e.isMatrix(n)?0:e.getTypeLength(n);return s>r?t:n}getNodeType(e){const t=this.method;return t===Ft.SUBGROUP_ELECT?"bool":t===Ft.SUBGROUP_BALLOT?"uvec4":this.getInputType(e)}generate(e,t){const n=this.method,s=this.getNodeType(e),r=this.getInputType(e),a=this.aNode,o=this.bNode,l=[];if(n===Ft.SUBGROUP_BROADCAST||n===Ft.SUBGROUP_SHUFFLE||n===Ft.QUAD_BROADCAST){const d=o.getNodeType(e);l.push(a.build(e,s),o.build(e,d==="float"?"int":s))}else n===Ft.SUBGROUP_SHUFFLE_XOR||n===Ft.SUBGROUP_SHUFFLE_DOWN||n===Ft.SUBGROUP_SHUFFLE_UP?l.push(a.build(e,s),o.build(e,"uint")):(a!==null&&l.push(a.build(e,r)),o!==null&&l.push(o.build(e,r)));const c=l.length===0?"()":`( ${l.join(", ")} )`;return e.format(`${e.getMethod(n,s)}${c}`,s,t)}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Ft.SUBGROUP_ELECT="subgroupElect";Ft.SUBGROUP_BALLOT="subgroupBallot";Ft.SUBGROUP_ADD="subgroupAdd";Ft.SUBGROUP_INCLUSIVE_ADD="subgroupInclusiveAdd";Ft.SUBGROUP_EXCLUSIVE_AND="subgroupExclusiveAdd";Ft.SUBGROUP_MUL="subgroupMul";Ft.SUBGROUP_INCLUSIVE_MUL="subgroupInclusiveMul";Ft.SUBGROUP_EXCLUSIVE_MUL="subgroupExclusiveMul";Ft.SUBGROUP_AND="subgroupAnd";Ft.SUBGROUP_OR="subgroupOr";Ft.SUBGROUP_XOR="subgroupXor";Ft.SUBGROUP_MIN="subgroupMin";Ft.SUBGROUP_MAX="subgroupMax";Ft.SUBGROUP_ALL="subgroupAll";Ft.SUBGROUP_ANY="subgroupAny";Ft.SUBGROUP_BROADCAST_FIRST="subgroupBroadcastFirst";Ft.QUAD_SWAP_X="quadSwapX";Ft.QUAD_SWAP_Y="quadSwapY";Ft.QUAD_SWAP_DIAGONAL="quadSwapDiagonal";Ft.SUBGROUP_BROADCAST="subgroupBroadcast";Ft.SUBGROUP_SHUFFLE="subgroupShuffle";Ft.SUBGROUP_SHUFFLE_XOR="subgroupShuffleXor";Ft.SUBGROUP_SHUFFLE_UP="subgroupShuffleUp";Ft.SUBGROUP_SHUFFLE_DOWN="subgroupShuffleDown";Ft.QUAD_BROADCAST="quadBroadcast";const NPe=Tt(Ft,Ft.SUBGROUP_ELECT).setParameterLength(0),DPe=Tt(Ft,Ft.SUBGROUP_BALLOT).setParameterLength(1),PPe=Tt(Ft,Ft.SUBGROUP_ADD).setParameterLength(1),OPe=Tt(Ft,Ft.SUBGROUP_INCLUSIVE_ADD).setParameterLength(1),LPe=Tt(Ft,Ft.SUBGROUP_EXCLUSIVE_AND).setParameterLength(1),UPe=Tt(Ft,Ft.SUBGROUP_MUL).setParameterLength(1),BPe=Tt(Ft,Ft.SUBGROUP_INCLUSIVE_MUL).setParameterLength(1),IPe=Tt(Ft,Ft.SUBGROUP_EXCLUSIVE_MUL).setParameterLength(1),FPe=Tt(Ft,Ft.SUBGROUP_AND).setParameterLength(1),zPe=Tt(Ft,Ft.SUBGROUP_OR).setParameterLength(1),VPe=Tt(Ft,Ft.SUBGROUP_XOR).setParameterLength(1),kPe=Tt(Ft,Ft.SUBGROUP_MIN).setParameterLength(1),GPe=Tt(Ft,Ft.SUBGROUP_MAX).setParameterLength(1),HPe=Tt(Ft,Ft.SUBGROUP_ALL).setParameterLength(0),jPe=Tt(Ft,Ft.SUBGROUP_ANY).setParameterLength(0),$Pe=Tt(Ft,Ft.SUBGROUP_BROADCAST_FIRST).setParameterLength(2),WPe=Tt(Ft,Ft.QUAD_SWAP_X).setParameterLength(1),qPe=Tt(Ft,Ft.QUAD_SWAP_Y).setParameterLength(1),XPe=Tt(Ft,Ft.QUAD_SWAP_DIAGONAL).setParameterLength(1),YPe=Tt(Ft,Ft.SUBGROUP_BROADCAST).setParameterLength(2),KPe=Tt(Ft,Ft.SUBGROUP_SHUFFLE).setParameterLength(2),ZPe=Tt(Ft,Ft.SUBGROUP_SHUFFLE_XOR).setParameterLength(2),QPe=Tt(Ft,Ft.SUBGROUP_SHUFFLE_UP).setParameterLength(2),JPe=Tt(Ft,Ft.SUBGROUP_SHUFFLE_DOWN).setParameterLength(2),eOe=Tt(Ft,Ft.QUAD_BROADCAST).setParameterLength(1);let tR;function UD(i){tR=tR||new WeakMap;let e=tR.get(i);return e===void 0&&tR.set(i,e={}),e}function BD(i){const e=UD(i);return e.shadowMatrix||(e.shadowMatrix=pn("mat4").setGroup(cn).onRenderUpdate(t=>((i.castShadow!==!0||t.renderer.shadowMap.enabled===!1)&&i.shadow.updateMatrices(i),i.shadow.matrix)))}function Bne(i,e=Ju){const t=BD(i).mul(e);return t.xyz.div(t.w)}function rk(i){const e=UD(i);return e.position||(e.position=pn(new ae).setGroup(cn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function Ine(i){const e=UD(i);return e.targetPosition||(e.targetPosition=pn(new ae).setGroup(cn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function ak(i){const e=UD(i);return e.viewPosition||(e.viewPosition=pn(new ae).setGroup(cn).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new ae,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const ok=i=>ld.transformDirection(rk(i).sub(Ine(i))),tOe=i=>i.sort((e,t)=>e.id-t.id),nOe=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},aU=new WeakMap,g1=[];class ID extends Jt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=If("vec3","totalDiffuse"),this.totalSpecularNode=If("vec3","totalSpecular"),this.outgoingLightNode=If("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let n=0;n<e.length;n++){const s=e[n];if(g1.push(s.id),g1.push(s.castShadow?1:0),s.isSpotLight===!0){const r=s.map!==null?s.map.id:-1,a=s.colorNode?s.colorNode.getCacheKey():-1;g1.push(r,a)}}const t=oM(g1);return g1.length=0,t}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getNodeProperties(this);for(const n of t.nodes)n.build(e);t.outputNode.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,s=tOe(this._lights),r=e.renderer.library;for(const a of s)if(a.isNode)t.push(st(a));else{let o=null;if(n!==null&&(o=nOe(a.id,n)),o===null){const l=r.getLightNodeClass(a.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let c=null;aU.has(a)?c=aU.get(a):(c=st(new l(a)),aU.set(a,c)),t.push(c)}}this._lightNodes=t}setupDirectLight(e,t,n){const{lightingModel:s,reflectedLight:r}=e.context;s.direct({...n,lightNode:t,reflectedLight:r},e)}setupDirectRectAreaLight(e,t,n){const{lightingModel:s,reflectedLight:r}=e.context;s.directRectArea({...n,lightNode:t,reflectedLight:r},e)}setupLights(e,t){for(const n of t)n.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let n=this.outgoingLightNode;const s=e.context,r=s.lightingModel,a=e.getNodeProperties(this);if(r){const{totalDiffuseNode:o,totalSpecularNode:l}=this;s.outgoingLight=n;const c=e.addStack();a.nodes=c.nodes,r.start(e);const{backdrop:d,backdropAlpha:h}=s,{directDiffuse:m,directSpecular:v,indirectDiffuse:_,indirectSpecular:x}=s.reflectedLight;let T=m.add(_);d!==null&&(h!==null?T=ye(h.mix(T,d)):T=ye(d),s.material.transparent=!0),o.assign(T),l.assign(v.add(x)),n.assign(o.add(l)),r.finish(e),n=n.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=t,n}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const iOe=(i=[])=>st(new ID).setLights(i);class Fne extends Jt{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=ii.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){lk.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||Ju)}}const lk=If("vec3","shadowPositionWorld");function ck(i,e={}){return e.toneMapping=i.toneMapping,e.toneMappingExposure=i.toneMappingExposure,e.outputColorSpace=i.outputColorSpace,e.renderTarget=i.getRenderTarget(),e.activeCubeFace=i.getActiveCubeFace(),e.activeMipmapLevel=i.getActiveMipmapLevel(),e.renderObjectFunction=i.getRenderObjectFunction(),e.pixelRatio=i.getPixelRatio(),e.mrt=i.getMRT(),e.clearColor=i.getClearColor(e.clearColor||new Vt),e.clearAlpha=i.getClearAlpha(),e.autoClear=i.autoClear,e.scissorTest=i.getScissorTest(),e}function zne(i,e){return e=ck(i,e),i.setMRT(null),i.setRenderObjectFunction(null),i.setClearColor(0,1),i.autoClear=!0,e}function Vne(i,e){i.toneMapping=e.toneMapping,i.toneMappingExposure=e.toneMappingExposure,i.outputColorSpace=e.outputColorSpace,i.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),i.setRenderObjectFunction(e.renderObjectFunction),i.setPixelRatio(e.pixelRatio),i.setMRT(e.mrt),i.setClearColor(e.clearColor,e.clearAlpha),i.autoClear=e.autoClear,i.setScissorTest(e.scissorTest)}function uk(i,e={}){return e.background=i.background,e.backgroundNode=i.backgroundNode,e.overrideMaterial=i.overrideMaterial,e}function kne(i,e){return e=uk(i,e),i.background=null,i.backgroundNode=null,i.overrideMaterial=null,e}function Gne(i,e){i.background=e.background,i.backgroundNode=e.backgroundNode,i.overrideMaterial=e.overrideMaterial}function sOe(i,e,t={}){return t=ck(i,t),t=uk(e,t),t}function Hne(i,e,t){return t=zne(i,t),t=kne(e,t),t}function jne(i,e,t){Vne(i,t),Gne(e,t)}var rOe=Object.freeze({__proto__:null,resetRendererAndSceneState:Hne,resetRendererState:zne,resetSceneState:kne,restoreRendererAndSceneState:jne,restoreRendererState:Vne,restoreSceneState:Gne,saveRendererAndSceneState:sOe,saveRendererState:ck,saveSceneState:uk});const Uj=new WeakMap,$ne=ve(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{let n=Ni(i,e.xy).setName("t_basic");return i.isArrayTexture&&(n=n.depth(t)),n.compare(e.z)}),Wne=ve(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const s=(T,b)=>{let w=Ni(i,T);return i.isArrayTexture&&(w=w.depth(n)),w.compare(b)},r=tr("mapSize","vec2",t).setGroup(cn),a=tr("radius","float",t).setGroup(cn),o=ot(1).div(r),l=o.x.negate().mul(a),c=o.y.negate().mul(a),d=o.x.mul(a),h=o.y.mul(a),m=l.div(2),v=c.div(2),_=d.div(2),x=h.div(2);return qa(s(e.xy.add(ot(l,c)),e.z),s(e.xy.add(ot(0,c)),e.z),s(e.xy.add(ot(d,c)),e.z),s(e.xy.add(ot(m,v)),e.z),s(e.xy.add(ot(0,v)),e.z),s(e.xy.add(ot(_,v)),e.z),s(e.xy.add(ot(l,0)),e.z),s(e.xy.add(ot(m,0)),e.z),s(e.xy,e.z),s(e.xy.add(ot(_,0)),e.z),s(e.xy.add(ot(d,0)),e.z),s(e.xy.add(ot(m,x)),e.z),s(e.xy.add(ot(0,x)),e.z),s(e.xy.add(ot(_,x)),e.z),s(e.xy.add(ot(l,h)),e.z),s(e.xy.add(ot(0,h)),e.z),s(e.xy.add(ot(d,h)),e.z)).mul(1/17)}),qne=ve(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const s=(h,m)=>{let v=Ni(i,h);return i.isArrayTexture&&(v=v.depth(n)),v.compare(m)},r=tr("mapSize","vec2",t).setGroup(cn),a=ot(1).div(r),o=a.x,l=a.y,c=e.xy,d=$m(c.mul(r).add(.5));return c.subAssign(d.mul(a)),qa(s(c,e.z),s(c.add(ot(o,0)),e.z),s(c.add(ot(0,l)),e.z),s(c.add(a),e.z),Wi(s(c.add(ot(o.negate(),0)),e.z),s(c.add(ot(o.mul(2),0)),e.z),d.x),Wi(s(c.add(ot(o.negate(),l)),e.z),s(c.add(ot(o.mul(2),l)),e.z),d.x),Wi(s(c.add(ot(0,l.negate())),e.z),s(c.add(ot(0,l.mul(2))),e.z),d.y),Wi(s(c.add(ot(o,l.negate())),e.z),s(c.add(ot(o,l.mul(2))),e.z),d.y),Wi(Wi(s(c.add(ot(o.negate(),l.negate())),e.z),s(c.add(ot(o.mul(2),l.negate())),e.z),d.x),Wi(s(c.add(ot(o.negate(),l.mul(2))),e.z),s(c.add(ot(o.mul(2),l.mul(2))),e.z),d.x),d.y)).mul(1/9)}),Xne=ve(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{const n=te(1).toVar();let s=Ni(i).sample(e.xy);i.isArrayTexture&&(s=s.depth(t)),s=s.rg;const r=xD(e.z,s.x);return un(r.notEqual(te(1)),()=>{const a=e.z.sub(s.x),o=ma(0,s.y.mul(s.y));let l=o.div(o.add(a.mul(a)));l=ef(Ui(l,.3).div(.95-.3)),n.assign(ef(ma(r,l)))}),n}),aOe=ve(([i,e,t])=>{let n=Ju.sub(i).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),oOe=i=>{const e=i.shadow.camera,t=tr("near","float",e).setGroup(cn),n=tr("far","float",e).setGroup(cn),s=kJ(i);return aOe(s,t,n)},Yne=i=>{let e=Uj.get(i);if(e===void 0){const t=i.isPointLight?oOe(i):null;e=new Er,e.colorNode=jt(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,Uj.set(i,e)}return e},Bj=new qf,Qx=[],Kne=(i,e,t,n)=>{Qx[0]=i,Qx[1]=e;let s=Bj.get(Qx);return(s===void 0||s.shadowType!==t||s.useVelocity!==n)&&(s=(r,a,o,l,c,d,...h)=>{(r.castShadow===!0||r.receiveShadow&&t===zl)&&(n&&(Nz(r).useVelocity=!0),r.onBeforeShadow(i,r,o,e.camera,l,a.overrideMaterial,d),i.renderObject(r,a,o,l,c,d,...h),r.onAfterShadow(i,r,o,e.camera,l,a.overrideMaterial,d))},s.shadowType=t,s.useVelocity=n,Bj.set(Qx,s)),Qx[0]=null,Qx[1]=null,s},lOe=ve(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:s})=>{const r=te(0).toVar("meanVertical"),a=te(0).toVar("squareMeanVertical"),o=i.lessThanEqual(te(1)).select(te(0),te(2).div(i.sub(1))),l=i.lessThanEqual(te(1)).select(te(0),te(-1));Ss({start:de(0),end:de(i),type:"int",condition:"<"},({i:d})=>{const h=l.add(te(d).mul(o));let m=n.sample(qa(fM.xy,ot(0,h).mul(e)).div(t));n.value.isArrayTexture&&(m=m.depth(s)),m=m.x,r.addAssign(m),a.addAssign(m.mul(m))}),r.divAssign(i),a.divAssign(i);const c=pp(a.sub(r.mul(r)));return ot(r,c)}),cOe=ve(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:s})=>{const r=te(0).toVar("meanHorizontal"),a=te(0).toVar("squareMeanHorizontal"),o=i.lessThanEqual(te(1)).select(te(0),te(2).div(i.sub(1))),l=i.lessThanEqual(te(1)).select(te(0),te(-1));Ss({start:de(0),end:de(i),type:"int",condition:"<"},({i:d})=>{const h=l.add(te(d).mul(o));let m=n.sample(qa(fM.xy,ot(h,0).mul(e)).div(t));n.value.isArrayTexture&&(m=m.depth(s)),r.addAssign(m.x),a.addAssign(qa(m.y.mul(m.y),m.x.mul(m.x)))}),r.divAssign(i),a.divAssign(i);const c=pp(a.sub(r.mul(r)));return ot(r,c)}),uOe=[$ne,Wne,qne,Xne];let oU;const nR=new YS;class dk extends Fne{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:s,shadow:r,depthLayer:a}){const o=s.x.greaterThanEqual(0).and(s.x.lessThanEqual(1)).and(s.y.greaterThanEqual(0)).and(s.y.lessThanEqual(1)).and(s.z.lessThanEqual(1)),l=t({depthTexture:n,shadowCoord:s,shadow:r,depthLayer:a});return o.select(l,te(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:s}=e,r=tr("bias","float",n).setGroup(cn);let a=t,o;if(n.camera.isOrthographicCamera||s.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),o=a.z,s.coordinateSystem===id&&(o=o.mul(2).sub(1));else{const l=a.w;a=a.xy.div(l);const c=tr("near","float",n.camera).setGroup(cn),d=tr("far","float",n.camera).setGroup(cn);o=IV(l.negate(),c,d)}return a=ye(a.x,a.y.oneMinus(),o.add(r)),a}getShadowFilterFn(e){return uOe[e]}setupRenderTarget(e,t){const n=new Uc(e.mapSize.width,e.mapSize.height);n.name="ShadowDepthTexture",n.compareFunction=CS;const s=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return s.texture.name="ShadowMap",s.texture.type=e.mapType,s.depthTexture=n,{shadowMap:s,depthTexture:n}}setupShadow(e){const{renderer:t}=e,{light:n,shadow:s}=this,r=t.shadowMap.type,{depthTexture:a,shadowMap:o}=this.setupRenderTarget(s,e);if(s.camera.updateProjectionMatrix(),r===zl&&s.isPointLightShadow!==!0){a.compareFunction=null,o.depth>1?(o._vsmShadowMapVertical||(o._vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Of,type:$a,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=o._vsmShadowMapVertical,o._vsmShadowMapHorizontal||(o._vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Of,type:$a,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=o._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Of,type:$a,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(s.mapSize.width,s.mapSize.height,{format:Of,type:$a,depthBuffer:!1}));let b=Ni(a);a.isArrayTexture&&(b=b.depth(this.depthLayer));let w=Ni(this.vsmShadowMapVertical.texture);a.isArrayTexture&&(w=w.depth(this.depthLayer));const M=tr("blurSamples","float",s).setGroup(cn),R=tr("radius","float",s).setGroup(cn),N=tr("mapSize","vec2",s).setGroup(cn);let D=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Er);D.fragmentNode=lOe({samples:M,radius:R,size:N,shadowPass:b,depthLayer:this.depthLayer}).context(e.getSharedContext()),D.name="VSMVertical",D=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Er),D.fragmentNode=cOe({samples:M,radius:R,size:N,shadowPass:w,depthLayer:this.depthLayer}).context(e.getSharedContext()),D.name="VSMHorizontal"}const l=tr("intensity","float",s).setGroup(cn),c=tr("normalBias","float",s).setGroup(cn),d=BD(n).mul(lk.add(r0.mul(c))),h=this.setupShadowCoord(e,d),m=s.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(m===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const v=r===zl&&s.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:a,_=this.setupShadowFilter(e,{filterFn:m,shadowTexture:o.texture,depthTexture:v,shadowCoord:h,shadow:s,depthLayer:this.depthLayer});let x=Ni(o.texture,h);a.isArrayTexture&&(x=x.depth(this.depthLayer));const T=Wi(1,_.rgb.mix(x,1),l.mul(x.a)).toVar();return this.shadowMap=o,this.shadow.map=o,T}setup(e){if(e.renderer.shadowMap.enabled!==!1)return ve(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:s}=this,{renderer:r,scene:a}=e;t.updateMatrices(s),n.setSize(t.mapSize.width,t.mapSize.height,n.depth),r.render(a,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:s}=this,{renderer:r,scene:a,camera:o}=e,l=r.shadowMap.type,c=t.depthTexture.version;this._depthVersionCached=c;const d=s.camera.layers.mask;(s.camera.layers.mask&4294967294)===0&&(s.camera.layers.mask=o.layers.mask);const h=r.getRenderObjectFunction(),m=r.getMRT(),v=m?m.has("velocity"):!1;oU=Hne(r,a,oU),a.overrideMaterial=Yne(n),r.setRenderObjectFunction(Kne(r,s,l,v)),r.setClearColor(0,0),r.setRenderTarget(t),this.renderShadow(e),r.setRenderObjectFunction(h),l===zl&&s.isPointLightShadow!==!0&&this.vsmPass(r),s.camera.layers.mask=d,jne(r,a,oU)}vsmPass(e){const{shadow:t}=this,n=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,n),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,n),e.setRenderTarget(this.vsmShadowMapVertical),nR.material=this.vsmMaterialVertical,nR.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),nR.material=this.vsmMaterialHorizontal,nR.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;let n=t.needsUpdate||t.autoUpdate;n&&(this._cameraFrameId[e.camera]===e.frameId&&(n=!1),this._cameraFrameId[e.camera]=e.frameId),n&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const Zne=(i,e)=>st(new dk(i,e)),dOe=new Vt,Cf=ve(([i,e])=>{const t=i.toVar(),n=dr(t),s=sd(1,ma(n.x,ma(n.y,n.z)));n.mulAssign(s),t.mulAssign(s.mul(e.mul(2).oneMinus()));const r=ot(t.xy).toVar(),o=e.mul(1.5).oneMinus();return un(n.z.greaterThanEqual(o),()=>{un(t.z.greaterThan(0),()=>{r.x.assign(Ui(4,t.x))})}).ElseIf(n.x.greaterThanEqual(o),()=>{const l=qE(t.x);r.x.assign(t.z.mul(l).add(l.mul(2)))}).ElseIf(n.y.greaterThanEqual(o),()=>{const l=qE(t.y);r.x.assign(t.x.add(l.mul(2)).add(2)),r.y.assign(t.z.mul(l).sub(2))}),ot(.125,.25).mul(r).add(ot(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),Qne=ve(({depthTexture:i,bd3D:e,dp:t,texelSize:n})=>Ni(i,Cf(e,n.y)).compare(t)),Jne=ve(({depthTexture:i,bd3D:e,dp:t,texelSize:n,shadow:s})=>{const r=tr("radius","float",s).setGroup(cn),a=ot(-1,1).mul(r).mul(n.y);return Ni(i,Cf(e.add(a.xyy),n.y)).compare(t).add(Ni(i,Cf(e.add(a.yyy),n.y)).compare(t)).add(Ni(i,Cf(e.add(a.xyx),n.y)).compare(t)).add(Ni(i,Cf(e.add(a.yyx),n.y)).compare(t)).add(Ni(i,Cf(e,n.y)).compare(t)).add(Ni(i,Cf(e.add(a.xxy),n.y)).compare(t)).add(Ni(i,Cf(e.add(a.yxy),n.y)).compare(t)).add(Ni(i,Cf(e.add(a.xxx),n.y)).compare(t)).add(Ni(i,Cf(e.add(a.yxx),n.y)).compare(t)).mul(1/9)}),fOe=ve(({filterFn:i,depthTexture:e,shadowCoord:t,shadow:n})=>{const s=t.xyz.toVar(),r=s.length(),a=pn("float").setGroup(cn).onRenderUpdate(()=>n.camera.near),o=pn("float").setGroup(cn).onRenderUpdate(()=>n.camera.far),l=tr("bias","float",n).setGroup(cn),c=pn(n.mapSize).setGroup(cn),d=te(1).toVar();return un(r.sub(o).lessThanEqual(0).and(r.sub(a).greaterThanEqual(0)),()=>{const h=r.sub(a).div(o.sub(a)).toVar();h.addAssign(l);const m=s.normalize(),v=ot(1).div(c.mul(ot(4,2)));d.assign(i({depthTexture:e,bd3D:m,dp:h,texelSize:v,shadow:n}))}),d}),Ij=new bn,Jx=new lt,y1=new lt;class hOe extends dk{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===h2?Qne:Jne}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:s,shadowCoord:r,shadow:a}){return fOe({filterFn:t,shadowTexture:n,depthTexture:s,shadowCoord:r,shadow:a})}renderShadow(e){const{shadow:t,shadowMap:n,light:s}=this,{renderer:r,scene:a}=e,o=t.getFrameExtents();y1.copy(t.mapSize),y1.multiply(o),n.setSize(y1.width,y1.height),Jx.copy(t.mapSize);const l=r.autoClear,c=r.getClearColor(dOe),d=r.getClearAlpha();r.autoClear=!1,r.setClearColor(t.clearColor,t.clearAlpha),r.clear();const h=t.getViewportCount();for(let m=0;m<h;m++){const v=t.getViewport(m),_=Jx.x*v.x,x=y1.y-Jx.y-Jx.y*v.y;Ij.set(_,x,Jx.x*v.z,Jx.y*v.w),n.viewport.copy(Ij),t.updateMatrices(s,m),r.render(a,t.camera)}r.autoClear=l,r.setClearColor(c,d)}}const eie=(i,e)=>st(new hOe(i,e));class o0 extends A_{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Vt,this.colorNode=e&&e.colorNode||pn(this.color).setGroup(cn),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=ii.FRAME}getHash(){return this.light.uuid}getLightVector(e){return ak(this.light).sub(e.context.positionView||Aa)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return Zne(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const s=this.light.shadow.shadowNode;let r;s!==void 0?r=st(s):r=this.setupShadowNode(),this.shadowNode=r,this.shadowColorNode=n=this.colorNode.mul(r),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),n=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),n&&e.lightsNode.setupDirectRectAreaLight(e,this,n)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const fk=ve(({lightDistance:i,cutoffDistance:e,decayExponent:t})=>{const n=i.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(n.mul(i.div(e).pow4().oneMinus().clamp().pow2()),n)}),tie=({color:i,lightVector:e,cutoffDistance:t,decayExponent:n})=>{const s=e.normalize(),r=e.length(),a=fk({lightDistance:r,cutoffDistance:t,decayExponent:n}),o=i.mul(a);return{lightDirection:s,lightColor:o}};class nie extends o0{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=pn(0).setGroup(cn),this.decayExponentNode=pn(2).setGroup(cn)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return eie(this.light)}setupDirect(e){return tie({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}const pOe=ve(([i=Ns()])=>{const e=i.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),mOe=ve(([i=Ns()],{renderer:e,material:t})=>{const n=sV(i.mul(2).sub(1));let s;if(t.alphaToCoverage&&e.samples>1){const r=te(n.fwidth()).toVar();s=tf(r.oneMinus(),r.add(1),n).oneMinus()}else s=qo(n.greaterThan(1),0,1);return s}),rE=ve(([i,e,t])=>{const n=te(t).toVar(),s=te(e).toVar(),r=Jd(i).toVar();return qo(r,s,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),BN=ve(([i,e])=>{const t=Jd(e).toVar(),n=te(i).toVar();return qo(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),Wa=ve(([i])=>{const e=te(i).toVar();return de(Zh(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),Lr=ve(([i,e])=>{const t=te(i).toVar();return e.assign(Wa(t)),t.sub(te(e))}),gOe=ve(([i,e,t,n,s,r])=>{const a=te(r).toVar(),o=te(s).toVar(),l=te(n).toVar(),c=te(t).toVar(),d=te(e).toVar(),h=te(i).toVar(),m=te(Ui(1,o)).toVar();return Ui(1,a).mul(h.mul(m).add(d.mul(o))).add(a.mul(c.mul(m).add(l.mul(o))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),yOe=ve(([i,e,t,n,s,r])=>{const a=te(r).toVar(),o=te(s).toVar(),l=ye(n).toVar(),c=ye(t).toVar(),d=ye(e).toVar(),h=ye(i).toVar(),m=te(Ui(1,o)).toVar();return Ui(1,a).mul(h.mul(m).add(d.mul(o))).add(a.mul(c.mul(m).add(l.mul(o))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),iie=Tl([gOe,yOe]),vOe=ve(([i,e,t,n,s,r,a,o,l,c,d])=>{const h=te(d).toVar(),m=te(c).toVar(),v=te(l).toVar(),_=te(o).toVar(),x=te(a).toVar(),T=te(r).toVar(),b=te(s).toVar(),w=te(n).toVar(),M=te(t).toVar(),R=te(e).toVar(),N=te(i).toVar(),D=te(Ui(1,v)).toVar(),L=te(Ui(1,m)).toVar();return te(Ui(1,h)).toVar().mul(L.mul(N.mul(D).add(R.mul(v))).add(m.mul(M.mul(D).add(w.mul(v))))).add(h.mul(L.mul(b.mul(D).add(T.mul(v))).add(m.mul(x.mul(D).add(_.mul(v))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),_Oe=ve(([i,e,t,n,s,r,a,o,l,c,d])=>{const h=te(d).toVar(),m=te(c).toVar(),v=te(l).toVar(),_=ye(o).toVar(),x=ye(a).toVar(),T=ye(r).toVar(),b=ye(s).toVar(),w=ye(n).toVar(),M=ye(t).toVar(),R=ye(e).toVar(),N=ye(i).toVar(),D=te(Ui(1,v)).toVar(),L=te(Ui(1,m)).toVar();return te(Ui(1,h)).toVar().mul(L.mul(N.mul(D).add(R.mul(v))).add(m.mul(M.mul(D).add(w.mul(v))))).add(h.mul(L.mul(b.mul(D).add(T.mul(v))).add(m.mul(x.mul(D).add(_.mul(v))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),sie=Tl([vOe,_Oe]),xOe=ve(([i,e,t])=>{const n=te(t).toVar(),s=te(e).toVar(),r=Ht(i).toVar(),a=Ht(r.bitAnd(Ht(7))).toVar(),o=te(rE(a.lessThan(Ht(4)),s,n)).toVar(),l=te(Wn(2,rE(a.lessThan(Ht(4)),n,s))).toVar();return BN(o,Jd(a.bitAnd(Ht(1)))).add(BN(l,Jd(a.bitAnd(Ht(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),bOe=ve(([i,e,t,n])=>{const s=te(n).toVar(),r=te(t).toVar(),a=te(e).toVar(),o=Ht(i).toVar(),l=Ht(o.bitAnd(Ht(15))).toVar(),c=te(rE(l.lessThan(Ht(8)),a,r)).toVar(),d=te(rE(l.lessThan(Ht(4)),r,rE(l.equal(Ht(12)).or(l.equal(Ht(14))),a,s))).toVar();return BN(c,Jd(l.bitAnd(Ht(1)))).add(BN(d,Jd(l.bitAnd(Ht(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),ko=Tl([xOe,bOe]),SOe=ve(([i,e,t])=>{const n=te(t).toVar(),s=te(e).toVar(),r=HS(i).toVar();return ye(ko(r.x,s,n),ko(r.y,s,n),ko(r.z,s,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),TOe=ve(([i,e,t,n])=>{const s=te(n).toVar(),r=te(t).toVar(),a=te(e).toVar(),o=HS(i).toVar();return ye(ko(o.x,a,r,s),ko(o.y,a,r,s),ko(o.z,a,r,s))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),Bd=Tl([SOe,TOe]),EOe=ve(([i])=>{const e=te(i).toVar();return Wn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),wOe=ve(([i])=>{const e=te(i).toVar();return Wn(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),MOe=ve(([i])=>{const e=ye(i).toVar();return Wn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),rie=Tl([EOe,MOe]),AOe=ve(([i])=>{const e=ye(i).toVar();return Wn(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),aie=Tl([wOe,AOe]),Hu=ve(([i,e])=>{const t=de(e).toVar(),n=Ht(i).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(de(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),oie=ve(([i,e,t])=>{i.subAssign(t),i.bitXorAssign(Hu(t,de(4))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(Hu(i,de(6))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(Hu(e,de(8))),e.addAssign(i),i.subAssign(t),i.bitXorAssign(Hu(t,de(16))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(Hu(i,de(19))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(Hu(e,de(4))),e.addAssign(i)}),vM=ve(([i,e,t])=>{const n=Ht(t).toVar(),s=Ht(e).toVar(),r=Ht(i).toVar();return n.bitXorAssign(s),n.subAssign(Hu(s,de(14))),r.bitXorAssign(n),r.subAssign(Hu(n,de(11))),s.bitXorAssign(r),s.subAssign(Hu(r,de(25))),n.bitXorAssign(s),n.subAssign(Hu(s,de(16))),r.bitXorAssign(n),r.subAssign(Hu(n,de(4))),s.bitXorAssign(r),s.subAssign(Hu(r,de(14))),n.bitXorAssign(s),n.subAssign(Hu(s,de(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),Yl=ve(([i])=>{const e=Ht(i).toVar();return te(e).div(te(Ht(de(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),Jh=ve(([i])=>{const e=te(i).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),COe=ve(([i])=>{const e=de(i).toVar(),t=Ht(Ht(1)).toVar(),n=Ht(Ht(de(3735928559)).add(t.shiftLeft(Ht(2))).add(Ht(13))).toVar();return vM(n.add(Ht(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),ROe=ve(([i,e])=>{const t=de(e).toVar(),n=de(i).toVar(),s=Ht(Ht(2)).toVar(),r=Ht().toVar(),a=Ht().toVar(),o=Ht().toVar();return r.assign(a.assign(o.assign(Ht(de(3735928559)).add(s.shiftLeft(Ht(2))).add(Ht(13))))),r.addAssign(Ht(n)),a.addAssign(Ht(t)),vM(r,a,o)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),NOe=ve(([i,e,t])=>{const n=de(t).toVar(),s=de(e).toVar(),r=de(i).toVar(),a=Ht(Ht(3)).toVar(),o=Ht().toVar(),l=Ht().toVar(),c=Ht().toVar();return o.assign(l.assign(c.assign(Ht(de(3735928559)).add(a.shiftLeft(Ht(2))).add(Ht(13))))),o.addAssign(Ht(r)),l.addAssign(Ht(s)),c.addAssign(Ht(n)),vM(o,l,c)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),DOe=ve(([i,e,t,n])=>{const s=de(n).toVar(),r=de(t).toVar(),a=de(e).toVar(),o=de(i).toVar(),l=Ht(Ht(4)).toVar(),c=Ht().toVar(),d=Ht().toVar(),h=Ht().toVar();return c.assign(d.assign(h.assign(Ht(de(3735928559)).add(l.shiftLeft(Ht(2))).add(Ht(13))))),c.addAssign(Ht(o)),d.addAssign(Ht(a)),h.addAssign(Ht(r)),oie(c,d,h),c.addAssign(Ht(s)),vM(c,d,h)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),POe=ve(([i,e,t,n,s])=>{const r=de(s).toVar(),a=de(n).toVar(),o=de(t).toVar(),l=de(e).toVar(),c=de(i).toVar(),d=Ht(Ht(5)).toVar(),h=Ht().toVar(),m=Ht().toVar(),v=Ht().toVar();return h.assign(m.assign(v.assign(Ht(de(3735928559)).add(d.shiftLeft(Ht(2))).add(Ht(13))))),h.addAssign(Ht(c)),m.addAssign(Ht(l)),v.addAssign(Ht(o)),oie(h,m,v),h.addAssign(Ht(a)),m.addAssign(Ht(r)),vM(h,m,v)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),Cs=Tl([COe,ROe,NOe,DOe,POe]),OOe=ve(([i,e])=>{const t=de(e).toVar(),n=de(i).toVar(),s=Ht(Cs(n,t)).toVar(),r=HS().toVar();return r.x.assign(s.bitAnd(de(255))),r.y.assign(s.shiftRight(de(8)).bitAnd(de(255))),r.z.assign(s.shiftRight(de(16)).bitAnd(de(255))),r}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),LOe=ve(([i,e,t])=>{const n=de(t).toVar(),s=de(e).toVar(),r=de(i).toVar(),a=Ht(Cs(r,s,n)).toVar(),o=HS().toVar();return o.x.assign(a.bitAnd(de(255))),o.y.assign(a.shiftRight(de(8)).bitAnd(de(255))),o.z.assign(a.shiftRight(de(16)).bitAnd(de(255))),o}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Id=Tl([OOe,LOe]),UOe=ve(([i])=>{const e=ot(i).toVar(),t=de().toVar(),n=de().toVar(),s=te(Lr(e.x,t)).toVar(),r=te(Lr(e.y,n)).toVar(),a=te(Jh(s)).toVar(),o=te(Jh(r)).toVar(),l=te(iie(ko(Cs(t,n),s,r),ko(Cs(t.add(de(1)),n),s.sub(1),r),ko(Cs(t,n.add(de(1))),s,r.sub(1)),ko(Cs(t.add(de(1)),n.add(de(1))),s.sub(1),r.sub(1)),a,o)).toVar();return rie(l)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),BOe=ve(([i])=>{const e=ye(i).toVar(),t=de().toVar(),n=de().toVar(),s=de().toVar(),r=te(Lr(e.x,t)).toVar(),a=te(Lr(e.y,n)).toVar(),o=te(Lr(e.z,s)).toVar(),l=te(Jh(r)).toVar(),c=te(Jh(a)).toVar(),d=te(Jh(o)).toVar(),h=te(sie(ko(Cs(t,n,s),r,a,o),ko(Cs(t.add(de(1)),n,s),r.sub(1),a,o),ko(Cs(t,n.add(de(1)),s),r,a.sub(1),o),ko(Cs(t.add(de(1)),n.add(de(1)),s),r.sub(1),a.sub(1),o),ko(Cs(t,n,s.add(de(1))),r,a,o.sub(1)),ko(Cs(t.add(de(1)),n,s.add(de(1))),r.sub(1),a,o.sub(1)),ko(Cs(t,n.add(de(1)),s.add(de(1))),r,a.sub(1),o.sub(1)),ko(Cs(t.add(de(1)),n.add(de(1)),s.add(de(1))),r.sub(1),a.sub(1),o.sub(1)),l,c,d)).toVar();return aie(h)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),hk=Tl([UOe,BOe]),IOe=ve(([i])=>{const e=ot(i).toVar(),t=de().toVar(),n=de().toVar(),s=te(Lr(e.x,t)).toVar(),r=te(Lr(e.y,n)).toVar(),a=te(Jh(s)).toVar(),o=te(Jh(r)).toVar(),l=ye(iie(Bd(Id(t,n),s,r),Bd(Id(t.add(de(1)),n),s.sub(1),r),Bd(Id(t,n.add(de(1))),s,r.sub(1)),Bd(Id(t.add(de(1)),n.add(de(1))),s.sub(1),r.sub(1)),a,o)).toVar();return rie(l)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),FOe=ve(([i])=>{const e=ye(i).toVar(),t=de().toVar(),n=de().toVar(),s=de().toVar(),r=te(Lr(e.x,t)).toVar(),a=te(Lr(e.y,n)).toVar(),o=te(Lr(e.z,s)).toVar(),l=te(Jh(r)).toVar(),c=te(Jh(a)).toVar(),d=te(Jh(o)).toVar(),h=ye(sie(Bd(Id(t,n,s),r,a,o),Bd(Id(t.add(de(1)),n,s),r.sub(1),a,o),Bd(Id(t,n.add(de(1)),s),r,a.sub(1),o),Bd(Id(t.add(de(1)),n.add(de(1)),s),r.sub(1),a.sub(1),o),Bd(Id(t,n,s.add(de(1))),r,a,o.sub(1)),Bd(Id(t.add(de(1)),n,s.add(de(1))),r.sub(1),a,o.sub(1)),Bd(Id(t,n.add(de(1)),s.add(de(1))),r,a.sub(1),o.sub(1)),Bd(Id(t.add(de(1)),n.add(de(1)),s.add(de(1))),r.sub(1),a.sub(1),o.sub(1)),l,c,d)).toVar();return aie(h)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),_M=Tl([IOe,FOe]),zOe=ve(([i])=>{const e=te(i).toVar(),t=de(Wa(e)).toVar();return Yl(Cs(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),VOe=ve(([i])=>{const e=ot(i).toVar(),t=de(Wa(e.x)).toVar(),n=de(Wa(e.y)).toVar();return Yl(Cs(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),kOe=ve(([i])=>{const e=ye(i).toVar(),t=de(Wa(e.x)).toVar(),n=de(Wa(e.y)).toVar(),s=de(Wa(e.z)).toVar();return Yl(Cs(t,n,s))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),GOe=ve(([i])=>{const e=jt(i).toVar(),t=de(Wa(e.x)).toVar(),n=de(Wa(e.y)).toVar(),s=de(Wa(e.z)).toVar(),r=de(Wa(e.w)).toVar();return Yl(Cs(t,n,s,r))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),HOe=Tl([zOe,VOe,kOe,GOe]),jOe=ve(([i])=>{const e=te(i).toVar(),t=de(Wa(e)).toVar();return ye(Yl(Cs(t,de(0))),Yl(Cs(t,de(1))),Yl(Cs(t,de(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),$Oe=ve(([i])=>{const e=ot(i).toVar(),t=de(Wa(e.x)).toVar(),n=de(Wa(e.y)).toVar();return ye(Yl(Cs(t,n,de(0))),Yl(Cs(t,n,de(1))),Yl(Cs(t,n,de(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),WOe=ve(([i])=>{const e=ye(i).toVar(),t=de(Wa(e.x)).toVar(),n=de(Wa(e.y)).toVar(),s=de(Wa(e.z)).toVar();return ye(Yl(Cs(t,n,s,de(0))),Yl(Cs(t,n,s,de(1))),Yl(Cs(t,n,s,de(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),qOe=ve(([i])=>{const e=jt(i).toVar(),t=de(Wa(e.x)).toVar(),n=de(Wa(e.y)).toVar(),s=de(Wa(e.z)).toVar(),r=de(Wa(e.w)).toVar();return ye(Yl(Cs(t,n,s,r,de(0))),Yl(Cs(t,n,s,r,de(1))),Yl(Cs(t,n,s,r,de(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),FD=Tl([jOe,$Oe,WOe,qOe]),IN=ve(([i,e,t,n])=>{const s=te(n).toVar(),r=te(t).toVar(),a=de(e).toVar(),o=ye(i).toVar(),l=te(0).toVar(),c=te(1).toVar();return Ss(a,()=>{l.addAssign(c.mul(hk(o))),c.mulAssign(s),o.mulAssign(r)}),l}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),zD=ve(([i,e,t,n])=>{const s=te(n).toVar(),r=te(t).toVar(),a=de(e).toVar(),o=ye(i).toVar(),l=ye(0).toVar(),c=te(1).toVar();return Ss(a,()=>{l.addAssign(c.mul(_M(o))),c.mulAssign(s),o.mulAssign(r)}),l}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),XOe=ve(([i,e,t,n])=>{const s=te(n).toVar(),r=te(t).toVar(),a=de(e).toVar(),o=ye(i).toVar();return ot(IN(o,a,r,s),IN(o.add(ye(de(19),de(193),de(17))),a,r,s))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),YOe=ve(([i,e,t,n])=>{const s=te(n).toVar(),r=te(t).toVar(),a=de(e).toVar(),o=ye(i).toVar(),l=ye(zD(o,a,r,s)).toVar(),c=te(IN(o.add(ye(de(19),de(193),de(17))),a,r,s)).toVar();return jt(l,c)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),KOe=ve(([i,e,t,n,s,r,a])=>{const o=de(a).toVar(),l=te(r).toVar(),c=de(s).toVar(),d=de(n).toVar(),h=de(t).toVar(),m=de(e).toVar(),v=ot(i).toVar(),_=ye(FD(ot(m.add(d),h.add(c)))).toVar(),x=ot(_.x,_.y).toVar();x.subAssign(.5),x.mulAssign(l),x.addAssign(.5);const T=ot(ot(te(m),te(h)).add(x)).toVar(),b=ot(T.sub(v)).toVar();return un(o.equal(de(2)),()=>dr(b.x).add(dr(b.y))),un(o.equal(de(3)),()=>ma(dr(b.x),dr(b.y))),i0(b,b)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ZOe=ve(([i,e,t,n,s,r,a,o,l])=>{const c=de(l).toVar(),d=te(o).toVar(),h=de(a).toVar(),m=de(r).toVar(),v=de(s).toVar(),_=de(n).toVar(),x=de(t).toVar(),T=de(e).toVar(),b=ye(i).toVar(),w=ye(FD(ye(T.add(v),x.add(m),_.add(h)))).toVar();w.subAssign(.5),w.mulAssign(d),w.addAssign(.5);const M=ye(ye(te(T),te(x),te(_)).add(w)).toVar(),R=ye(M.sub(b)).toVar();return un(c.equal(de(2)),()=>dr(R.x).add(dr(R.y)).add(dr(R.z))),un(c.equal(de(3)),()=>ma(dr(R.x),dr(R.y),dr(R.z))),i0(R,R)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),KS=Tl([KOe,ZOe]),QOe=ve(([i,e,t])=>{const n=de(t).toVar(),s=te(e).toVar(),r=ot(i).toVar(),a=de().toVar(),o=de().toVar(),l=ot(Lr(r.x,a),Lr(r.y,o)).toVar(),c=te(1e6).toVar();return Ss({start:-1,end:de(1),name:"x",condition:"<="},({x:d})=>{Ss({start:-1,end:de(1),name:"y",condition:"<="},({y:h})=>{const m=te(KS(l,d,h,a,o,s,n)).toVar();c.assign(yu(c,m))})}),un(n.equal(de(0)),()=>{c.assign(pp(c))}),c}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),JOe=ve(([i,e,t])=>{const n=de(t).toVar(),s=te(e).toVar(),r=ot(i).toVar(),a=de().toVar(),o=de().toVar(),l=ot(Lr(r.x,a),Lr(r.y,o)).toVar(),c=ot(1e6,1e6).toVar();return Ss({start:-1,end:de(1),name:"x",condition:"<="},({x:d})=>{Ss({start:-1,end:de(1),name:"y",condition:"<="},({y:h})=>{const m=te(KS(l,d,h,a,o,s,n)).toVar();un(m.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(m)}).ElseIf(m.lessThan(c.y),()=>{c.y.assign(m)})})}),un(n.equal(de(0)),()=>{c.assign(pp(c))}),c}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),eLe=ve(([i,e,t])=>{const n=de(t).toVar(),s=te(e).toVar(),r=ot(i).toVar(),a=de().toVar(),o=de().toVar(),l=ot(Lr(r.x,a),Lr(r.y,o)).toVar(),c=ye(1e6,1e6,1e6).toVar();return Ss({start:-1,end:de(1),name:"x",condition:"<="},({x:d})=>{Ss({start:-1,end:de(1),name:"y",condition:"<="},({y:h})=>{const m=te(KS(l,d,h,a,o,s,n)).toVar();un(m.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(m)}).ElseIf(m.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(m)}).ElseIf(m.lessThan(c.z),()=>{c.z.assign(m)})})}),un(n.equal(de(0)),()=>{c.assign(pp(c))}),c}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),tLe=ve(([i,e,t])=>{const n=de(t).toVar(),s=te(e).toVar(),r=ye(i).toVar(),a=de().toVar(),o=de().toVar(),l=de().toVar(),c=ye(Lr(r.x,a),Lr(r.y,o),Lr(r.z,l)).toVar(),d=te(1e6).toVar();return Ss({start:-1,end:de(1),name:"x",condition:"<="},({x:h})=>{Ss({start:-1,end:de(1),name:"y",condition:"<="},({y:m})=>{Ss({start:-1,end:de(1),name:"z",condition:"<="},({z:v})=>{const _=te(KS(c,h,m,v,a,o,l,s,n)).toVar();d.assign(yu(d,_))})})}),un(n.equal(de(0)),()=>{d.assign(pp(d))}),d}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),nLe=Tl([QOe,tLe]),iLe=ve(([i,e,t])=>{const n=de(t).toVar(),s=te(e).toVar(),r=ye(i).toVar(),a=de().toVar(),o=de().toVar(),l=de().toVar(),c=ye(Lr(r.x,a),Lr(r.y,o),Lr(r.z,l)).toVar(),d=ot(1e6,1e6).toVar();return Ss({start:-1,end:de(1),name:"x",condition:"<="},({x:h})=>{Ss({start:-1,end:de(1),name:"y",condition:"<="},({y:m})=>{Ss({start:-1,end:de(1),name:"z",condition:"<="},({z:v})=>{const _=te(KS(c,h,m,v,a,o,l,s,n)).toVar();un(_.lessThan(d.x),()=>{d.y.assign(d.x),d.x.assign(_)}).ElseIf(_.lessThan(d.y),()=>{d.y.assign(_)})})})}),un(n.equal(de(0)),()=>{d.assign(pp(d))}),d}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),sLe=Tl([JOe,iLe]),rLe=ve(([i,e,t])=>{const n=de(t).toVar(),s=te(e).toVar(),r=ye(i).toVar(),a=de().toVar(),o=de().toVar(),l=de().toVar(),c=ye(Lr(r.x,a),Lr(r.y,o),Lr(r.z,l)).toVar(),d=ye(1e6,1e6,1e6).toVar();return Ss({start:-1,end:de(1),name:"x",condition:"<="},({x:h})=>{Ss({start:-1,end:de(1),name:"y",condition:"<="},({y:m})=>{Ss({start:-1,end:de(1),name:"z",condition:"<="},({z:v})=>{const _=te(KS(c,h,m,v,a,o,l,s,n)).toVar();un(_.lessThan(d.x),()=>{d.z.assign(d.y),d.y.assign(d.x),d.x.assign(_)}).ElseIf(_.lessThan(d.y),()=>{d.z.assign(d.y),d.y.assign(_)}).ElseIf(_.lessThan(d.z),()=>{d.z.assign(_)})})})}),un(n.equal(de(0)),()=>{d.assign(pp(d))}),d}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),pk=Tl([eLe,rLe]),aLe=ve(([i,e,t,n,s,r,a,o,l,c,d])=>{const h=de(i).toVar(),m=ot(e).toVar(),v=ot(t).toVar(),_=ot(n).toVar(),x=te(s).toVar(),T=te(r).toVar(),b=te(a).toVar(),w=Jd(o).toVar(),M=de(l).toVar(),R=te(c).toVar(),N=te(d).toVar(),D=m.mul(v).add(_),L=te(0).toVar();return un(h.equal(de(0)),()=>{L.assign(_M(D))}),un(h.equal(de(1)),()=>{L.assign(FD(D))}),un(h.equal(de(2)),()=>{L.assign(pk(D,x,de(0)))}),un(h.equal(de(3)),()=>{L.assign(zD(ye(D,0),M,R,N))}),L.assign(L.mul(b.sub(T)).add(T)),un(w,()=>{L.assign(ef(L,T,b))}),L}).setLayout({name:"mx_unifiednoise2d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"texcoord",type:"vec2"},{name:"freq",type:"vec2"},{name:"offset",type:"vec2"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),oLe=ve(([i,e,t,n,s,r,a,o,l,c,d])=>{const h=de(i).toVar(),m=ye(e).toVar(),v=ye(t).toVar(),_=ye(n).toVar(),x=te(s).toVar(),T=te(r).toVar(),b=te(a).toVar(),w=Jd(o).toVar(),M=de(l).toVar(),R=te(c).toVar(),N=te(d).toVar(),D=m.mul(v).add(_),L=te(0).toVar();return un(h.equal(de(0)),()=>{L.assign(_M(D))}),un(h.equal(de(1)),()=>{L.assign(FD(D))}),un(h.equal(de(2)),()=>{L.assign(pk(D,x,de(0)))}),un(h.equal(de(3)),()=>{L.assign(zD(D,M,R,N))}),L.assign(L.mul(b.sub(T)).add(T)),un(w,()=>{L.assign(ef(L,T,b))}),L}).setLayout({name:"mx_unifiednoise3d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"position",type:"vec3"},{name:"freq",type:"vec3"},{name:"offset",type:"vec3"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),lLe=ve(([i])=>{const e=i.y,t=i.z,n=ye().toVar();return un(e.lessThan(1e-4),()=>{n.assign(ye(t,t,t))}).Else(()=>{let s=i.x;s=s.sub(Zh(s)).mul(6).toVar();const r=de(nV(s)),a=s.sub(te(r)),o=t.mul(e.oneMinus()),l=t.mul(e.mul(a).oneMinus()),c=t.mul(e.mul(a.oneMinus()).oneMinus());un(r.equal(de(0)),()=>{n.assign(ye(t,c,o))}).ElseIf(r.equal(de(1)),()=>{n.assign(ye(l,t,o))}).ElseIf(r.equal(de(2)),()=>{n.assign(ye(o,t,c))}).ElseIf(r.equal(de(3)),()=>{n.assign(ye(o,l,t))}).ElseIf(r.equal(de(4)),()=>{n.assign(ye(c,o,t))}).Else(()=>{n.assign(ye(t,o,l))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),cLe=ve(([i])=>{const e=ye(i).toVar(),t=te(e.x).toVar(),n=te(e.y).toVar(),s=te(e.z).toVar(),r=te(yu(t,yu(n,s))).toVar(),a=te(ma(t,ma(n,s))).toVar(),o=te(a.sub(r)).toVar(),l=te().toVar(),c=te().toVar(),d=te().toVar();return d.assign(a),un(a.greaterThan(0),()=>{c.assign(o.div(a))}).Else(()=>{c.assign(0)}),un(c.lessThanEqual(0),()=>{l.assign(0)}).Else(()=>{un(t.greaterThanEqual(a),()=>{l.assign(n.sub(s).div(o))}).ElseIf(n.greaterThanEqual(a),()=>{l.assign(qa(2,s.sub(t).div(o)))}).Else(()=>{l.assign(qa(4,t.sub(n).div(o)))}),l.mulAssign(1/6),un(l.lessThan(0),()=>{l.addAssign(1)})}),ye(l,c,d)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),uLe=ve(([i])=>{const e=ye(i).toVar(),t=Vz(Kz(e,ye(.04045))).toVar(),n=ye(e.div(12.92)).toVar(),s=ye(Wd(ma(e.add(ye(.055)),ye(0)).div(1.055),ye(2.4))).toVar();return Wi(n,s,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),lie=(i,e)=>{i=te(i),e=te(e);const t=ot(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return tf(i.sub(t),i.add(t),e)},cie=(i,e,t,n)=>Wi(i,e,t[n].clamp()),dLe=(i,e,t=Ns())=>cie(i,e,t,"x"),fLe=(i,e,t=Ns())=>cie(i,e,t,"y"),hLe=(i,e,t,n,s=Ns())=>{const r=s.x.clamp(),a=s.y.clamp(),o=Wi(i,e,r),l=Wi(t,n,r);return Wi(o,l,a)},uie=(i,e,t,n,s)=>Wi(i,e,lie(t,n[s])),pLe=(i,e,t,n=Ns())=>uie(i,e,t,n,"x"),mLe=(i,e,t,n=Ns())=>uie(i,e,t,n,"y"),gLe=(i=1,e=0,t=Ns())=>t.mul(i).add(e),yLe=(i,e=1)=>(i=te(i),i.abs().pow(e).mul(i.sign())),vLe=(i,e=1,t=.5)=>te(i).sub(t).mul(e).add(t),_Le=(i=Ns(),e=1,t=0)=>hk(i.convert("vec2|vec3")).mul(e).add(t),xLe=(i=Ns(),e=1,t=0)=>_M(i.convert("vec2|vec3")).mul(e).add(t),bLe=(i=Ns(),e=1,t=0)=>(i=i.convert("vec2|vec3"),jt(_M(i),hk(i.add(ot(19,73)))).mul(e).add(t)),SLe=(i,e=Ns(),t=ot(1,1),n=ot(0,0),s=1,r=0,a=1,o=!1,l=1,c=2,d=.5)=>aLe(i,e.convert("vec2|vec3"),t,n,s,r,a,o,l,c,d),TLe=(i,e=Ns(),t=ot(1,1),n=ot(0,0),s=1,r=0,a=1,o=!1,l=1,c=2,d=.5)=>oLe(i,e.convert("vec2|vec3"),t,n,s,r,a,o,l,c,d),ELe=(i=Ns(),e=1)=>nLe(i.convert("vec2|vec3"),e,de(1)),wLe=(i=Ns(),e=1)=>sLe(i.convert("vec2|vec3"),e,de(1)),MLe=(i=Ns(),e=1)=>pk(i.convert("vec2|vec3"),e,de(1)),ALe=(i=Ns())=>HOe(i.convert("vec2|vec3")),CLe=(i=Ns(),e=3,t=2,n=.5,s=1)=>IN(i,de(e),t,n).mul(s),RLe=(i=Ns(),e=3,t=2,n=.5,s=1)=>XOe(i,de(e),t,n).mul(s),NLe=(i=Ns(),e=3,t=2,n=.5,s=1)=>zD(i,de(e),t,n).mul(s),DLe=(i=Ns(),e=3,t=2,n=.5,s=1)=>YOe(i,de(e),t,n).mul(s),PLe=(i,e=te(0))=>qa(i,e),OLe=(i,e=te(0))=>Ui(i,e),LLe=(i,e=te(1))=>Wn(i,e),ULe=(i,e=te(1))=>sd(i,e),BLe=(i,e=te(1))=>lM(i,e),ILe=(i,e=te(1))=>Wd(i,e),FLe=(i=te(0),e=te(1))=>_D(i,e),zLe=()=>XS,VLe=()=>rne,kLe=(i,e=te(1))=>Ui(e,i),GLe=(i,e,t,n)=>i.greaterThan(e).mix(t,n),HLe=(i,e,t,n)=>i.greaterThanEqual(e).mix(t,n),jLe=(i,e,t,n)=>i.equal(e).mix(t,n),$Le=(i,e=null)=>{if(typeof e=="string"){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},n=e.replace(/^out/,"").toLowerCase();if(t[n]!==void 0)return i.element(t[n])}if(typeof e=="number")return i.element(e);if(typeof e=="string"&&e.length===1){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3};if(t[e]!==void 0)return i.element(t[e])}return i},WLe=(i,e=ot(.5,.5),t=ot(1,1),n=te(0),s=ot(0,0))=>{let r=i;if(e&&(r=r.sub(e)),t&&(r=r.mul(t)),n){const a=n.mul(Math.PI/180),o=a.cos(),l=a.sin();r=ot(r.x.mul(o).sub(r.y.mul(l)),r.x.mul(l).add(r.y.mul(o)))}return e&&(r=r.add(e)),s&&(r=r.add(s)),r},qLe=(i,e)=>{i=ot(i),e=te(e);const t=e.mul(Math.PI/180);return gM(i,t)},XLe=(i,e,t)=>{i=ye(i),e=te(e),t=ye(t);const n=e.mul(Math.PI/180),s=t.normalize(),r=n.cos(),a=n.sin(),o=te(1).sub(r);return i.mul(r).add(s.cross(i).mul(a)).add(s.mul(s.dot(i)).mul(o))},YLe=(i,e)=>(i=ye(i),e=te(e),EV(i,e)),KLe=ve(([i,e,t])=>{const n=Om(i).toVar(),s=Ui(te(.5).mul(e.sub(t)),Ju).div(n).toVar(),r=Ui(te(-.5).mul(e.sub(t)),Ju).div(n).toVar(),a=ye().toVar();a.x=n.x.greaterThan(te(0)).select(s.x,r.x),a.y=n.y.greaterThan(te(0)).select(s.y,r.y),a.z=n.z.greaterThan(te(0)).select(s.z,r.z);const o=yu(a.x,a.y,a.z).toVar();return Ju.add(n.mul(o)).toVar().sub(t)}),die=ve(([i,e])=>{const t=i.x,n=i.y,s=i.z;let r=e.element(0).mul(.886227);return r=r.add(e.element(1).mul(2*.511664).mul(n)),r=r.add(e.element(2).mul(2*.511664).mul(s)),r=r.add(e.element(3).mul(2*.511664).mul(t)),r=r.add(e.element(4).mul(2*.429043).mul(t).mul(n)),r=r.add(e.element(5).mul(2*.429043).mul(n).mul(s)),r=r.add(e.element(6).mul(s.mul(s).mul(.743125).sub(.247708))),r=r.add(e.element(7).mul(2*.429043).mul(t).mul(s)),r=r.add(e.element(8).mul(.429043).mul(Wn(t,t).sub(Wn(n,n)))),r});var V=Object.freeze({__proto__:null,BRDF_GGX:yB,BRDF_Lambert:f_,BasicPointShadowFilter:Qne,BasicShadowFilter:$ne,Break:Jee,Const:cJ,Continue:jRe,DFGApprox:GV,D_GGX:Nte,Discard:PJ,EPSILON:PQ,F_Schlick:iS,Fn:ve,INFINITY:HCe,If:un,Loop:Ss,NodeAccess:Wo,NodeShaderStage:ub,NodeType:jZ,NodeUpdateType:ii,OnMaterialUpdate:CDe,OnObjectUpdate:ADe,PCFShadowFilter:Wne,PCFSoftShadowFilter:qne,PI:DN,PI2:jCe,PointShadowFilter:Jne,Return:QCe,Schlick_to_F0:Pte,ScriptableNodeResources:OR,ShaderNode:db,Stack:fD,Switch:BCe,TBNViewMatrix:Mv,VSMShadowFilter:Xne,V_GGX_SmithCorrelated:Rte,Var:lJ,VarIntent:uJ,abs:dr,acesFilmicToneMapping:Ane,acos:Jz,add:qa,addMethodChaining:it,addNodeElement:JCe,agxToneMapping:Cne,all:OQ,alphaT:CN,and:yQ,anisotropy:Gg,anisotropyB:Fv,anisotropyT:Z1,any:LQ,append:VCe,array:lQ,arrayBuffer:FCe,asin:FQ,assign:uQ,atan:_D,atan2:rJ,atomicAdd:TPe,atomicAnd:APe,atomicFunc:gp,atomicLoad:bPe,atomicMax:wPe,atomicMin:MPe,atomicOr:CPe,atomicStore:SPe,atomicSub:EPe,atomicXor:RPe,attenuationColor:$z,attenuationDistance:jz,attribute:Sc,attributeArray:RDe,backgroundBlurriness:hne,backgroundIntensity:TB,backgroundRotation:pne,batch:Xee,bentNormalView:pee,billboarding:fDe,bitAnd:bQ,bitNot:SQ,bitOr:TQ,bitXor:EQ,bitangentGeometry:DRe,bitangentLocal:PRe,bitangentView:fee,bitangentWorld:ORe,bitcast:q2e,blendBurn:ute,blendColor:tNe,blendDodge:dte,blendOverlay:hte,blendScreen:fte,blur:Fte,bool:Jd,buffer:dM,bufferAttribute:uM,builtin:Wm,bumpMap:EV,burn:iNe,bvec2:JZ,bvec3:Vz,bvec4:iQ,bypass:RJ,cache:eE,call:fQ,cameraFar:dm,cameraIndex:s0,cameraNear:um,cameraNormalMatrix:uRe,cameraPosition:nE,cameraProjectionMatrix:zd,cameraProjectionMatrixInverse:lRe,cameraViewMatrix:ld,cameraViewport:dRe,cameraWorldMatrix:cRe,cbrt:eJ,cdl:kDe,ceil:vD,checker:pOe,cineonToneMapping:Mne,clamp:ef,clearcoat:AN,clearcoatNormalView:wv,clearcoatRoughness:jE,code:LD,color:ZZ,colorSpaceToWorking:TD,colorToDirection:dNe,compute:MJ,computeKernel:fV,computeSkinning:HRe,context:cM,convert:rQ,convertColorSpace:YCe,convertToTexture:SDe,cos:am,cross:bD,cubeTexture:tS,cubeTextureBase:TV,cubeToUV:Cf,dFdx:eV,dFdy:tV,dashSize:zv,debug:UJ,decrement:NQ,decrementBefore:CQ,defaultBuildStages:wN,defaultShaderStages:Oz,defined:kE,degrees:BQ,deltaTime:rDe,densityFog:rPe,densityFogFactor:ik,depth:FV,depthPass:$De,determinant:$Q,difference:KQ,diffuseColor:as,directPointLight:tie,directionToColor:_te,directionToFaceDirection:$S,dispersion:Wz,distance:YQ,div:sd,dodge:sNe,dot:i0,drawIndex:jee,dynamicBufferAttribute:EJ,element:sQ,emissive:oB,equal:Yz,equals:qQ,equirectUV:zV,exp:Zz,exp2:Jb,expression:Lm,faceDirection:xV,faceForward:oV,faceforward:$Ce,float:te,floatBitsToInt:X2e,floatBitsToUint:Y2e,floor:Zh,fog:XE,fract:$m,frameGroup:oQ,frameId:rne,frontFacing:WJ,fwidth:HQ,gain:J2e,gapSize:WE,getConstNodeType:KZ,getCurrentStack:dD,getDirection:Bte,getDistanceAttenuation:fk,getGeometryRoughness:Cte,getNormalFromDepth:EDe,getParallaxCorrectNormal:KLe,getRoughness:kV,getScreenPosition:TDe,getShIrradianceAt:die,getShadowMaterial:Yne,getShadowRenderObjectFunction:Kne,getTextureIndex:tne,getViewPosition:sb,globalId:uPe,glsl:JDe,glslFn:ePe,grayscale:IDe,greaterThan:Kz,greaterThanEqual:gQ,hash:Q2e,highpModelNormalViewMatrix:dB,highpModelViewMatrix:uB,hue:VDe,increment:RQ,incrementBefore:AQ,instance:VRe,instanceIndex:ly,instancedArray:NDe,instancedBufferAttribute:PN,instancedDynamicBufferAttribute:cB,instancedMesh:Wee,int:de,intBitsToFloat:K2e,inverse:WQ,inverseSqrt:Qz,inversesqrt:WCe,invocationLocalIndex:zRe,invocationSubgroupIndex:FRe,ior:Q1,iridescence:mD,iridescenceIOR:kz,iridescenceThickness:Gz,ivec2:xo,ivec3:eQ,ivec4:tQ,js:ZDe,label:oJ,length:Qh,lengthSq:sV,lessThan:pQ,lessThanEqual:mQ,lightPosition:rk,lightProjectionUV:Bne,lightShadowMatrix:BD,lightTargetDirection:ok,lightTargetPosition:Ine,lightViewPosition:ak,lightingContext:ste,lights:iOe,linearDepth:nS,linearToneMapping:Ene,localId:dPe,log:yD,log2:Kh,logarithmicDepthToViewZ:XRe,luminance:ek,mat2:hD,mat3:Zl,mat4:Iv,matcapUV:jte,materialAO:Gee,materialAlphaTest:yee,materialAnisotropy:Dee,materialAnisotropyVector:ib,materialAttenuationColor:zee,materialAttenuationDistance:Fee,materialClearcoat:wee,materialClearcoatNormal:Aee,materialClearcoatRoughness:Mee,materialColor:LN,materialDispersion:kee,materialEmissive:_ee,materialEnvIntensity:CR,materialEnvRotation:SV,materialIOR:Iee,materialIridescence:Pee,materialIridescenceIOR:Oee,materialIridescenceThickness:Lee,materialLightMap:RV,materialLineDashOffset:CV,materialLineDashSize:MV,materialLineGapSize:AV,materialLineScale:wV,materialLineWidth:NR,materialMetalness:Tee,materialNormal:Eee,materialOpacity:RD,materialPointSize:Vee,materialReference:fm,materialReflectivity:RR,materialRefractionRatio:KJ,materialRotation:Cee,materialRoughness:See,materialSheen:Ree,materialSheenRoughness:Nee,materialShininess:vee,materialSpecular:xee,materialSpecularColor:bee,materialSpecularIntensity:gB,materialSpecularStrength:iE,materialThickness:Bee,materialTransmission:Uee,max:ma,maxMipLevel:gV,mediumpModelViewMatrix:jJ,metalness:HE,min:yu,mix:Wi,mixElement:nJ,mod:lM,modInt:DQ,modelDirection:yRe,modelNormalMatrix:HJ,modelPosition:vRe,modelRadius:GJ,modelScale:_Re,modelViewMatrix:Um,modelViewPosition:xRe,modelViewProjection:NV,modelWorldMatrix:qd,modelWorldMatrixInverse:bRe,morphReference:tte,mrt:ine,mul:Wn,mx_aastep:lie,mx_add:PLe,mx_atan2:FLe,mx_cell_noise_float:ALe,mx_contrast:vLe,mx_divide:ULe,mx_fractal_noise_float:CLe,mx_fractal_noise_vec2:RLe,mx_fractal_noise_vec3:NLe,mx_fractal_noise_vec4:DLe,mx_frame:VLe,mx_heighttonormal:YLe,mx_hsvtorgb:lLe,mx_ifequal:jLe,mx_ifgreater:GLe,mx_ifgreatereq:HLe,mx_invert:kLe,mx_modulo:BLe,mx_multiply:LLe,mx_noise_float:_Le,mx_noise_vec3:xLe,mx_noise_vec4:bLe,mx_place2d:WLe,mx_power:ILe,mx_ramp4:hLe,mx_ramplr:dLe,mx_ramptb:fLe,mx_rgbtohsv:cLe,mx_rotate2d:qLe,mx_rotate3d:XLe,mx_safepower:yLe,mx_separate:$Le,mx_splitlr:pLe,mx_splittb:mLe,mx_srgb_texture_to_lin_rec709:uLe,mx_subtract:OLe,mx_timer:zLe,mx_transform_uv:gLe,mx_unifiednoise2d:SLe,mx_unifiednoise3d:TLe,mx_worley_noise_float:ELe,mx_worley_noise_vec2:wLe,mx_worley_noise_vec3:MLe,negate:zQ,neutralToneMapping:Rne,nodeArray:Bv,nodeImmutable:Ot,nodeObject:st,nodeObjectIntent:L1,nodeObjects:uD,nodeProxy:Un,nodeProxyIntent:Tt,normalFlat:qJ,normalGeometry:wD,normalLocal:vu,normalMap:mB,normalView:bs,normalViewGeometry:eS,normalWorld:r0,normalWorldGeometry:XJ,normalize:Om,not:_Q,notEqual:hQ,numWorkgroups:lPe,objectDirection:fRe,objectGroup:Xz,objectPosition:kJ,objectRadius:gRe,objectScale:pRe,objectViewPosition:mRe,objectWorldMatrix:hRe,oneMinus:VQ,or:vQ,orthographicDepthToViewZ:qRe,oscSawtooth:cDe,oscSine:aDe,oscSquare:oDe,oscTriangle:lDe,output:Rb,outputStruct:W2e,overlay:aNe,overloadingFn:Tl,parabola:SB,parallaxDirection:hee,parallaxUV:LRe,parameter:H2e,pass:HDe,passTexture:jDe,pcurve:eDe,perspectiveDepthToViewZ:BV,pmremTexture:WV,pointShadow:eie,pointUV:DDe,pointWidth:kCe,positionGeometry:gl,positionLocal:Ma,positionPrevious:ON,positionView:Aa,positionViewDirection:br,positionWorld:Ju,positionWorldDirection:_V,posterize:GDe,pow:Wd,pow2:iV,pow3:ZQ,pow4:QQ,premultiplyAlpha:pte,property:If,quadBroadcast:eOe,quadSwapDiagonal:XPe,quadSwapX:WPe,quadSwapY:qPe,radians:UQ,rand:tJ,range:aPe,rangeFog:sPe,rangeFogFactor:nk,reciprocal:GQ,reference:tr,referenceBuffer:fB,reflect:XQ,reflectVector:JJ,reflectView:ZJ,reflector:vDe,refract:aV,refractVector:eee,refractView:QJ,reinhardToneMapping:wne,remap:NJ,remapClamp:DJ,renderGroup:cn,renderOutput:pV,rendererReference:_J,rotate:gM,rotateUV:uDe,roughness:kh,round:kQ,rtt:cne,sRGBTransferEOTF:pJ,sRGBTransferOETF:mJ,sample:MDe,sampler:nRe,samplerComparison:iRe,saturate:rV,saturation:FDe,screen:rNe,screenCoordinate:fM,screenDPR:zJ,screenSize:d_,screenUV:Tm,scriptable:iPe,scriptableValue:PR,select:qo,setCurrentStack:GE,setName:cV,shaderStages:MN,shadow:Zne,shadowPositionWorld:lk,shapeCircle:mOe,sharedUniformGroup:gD,sheen:Ev,sheenRoughness:pD,shiftLeft:wQ,shiftRight:MQ,shininess:RN,sign:qE,sin:$u,sinc:tDe,skinning:Zee,smoothstep:tf,smoothstepElement:iJ,specularColor:ru,specularF90:$E,spherizeUV:dDe,split:zCe,spritesheetUV:pDe,sqrt:pp,stack:DR,step:xD,stepElement:sJ,storage:Vv,storageBarrier:mPe,storageObject:GRe,storageTexture:gne,string:ICe,struct:$2e,sub:Ui,subBuild:Nb,subgroupAdd:PPe,subgroupAll:HPe,subgroupAnd:FPe,subgroupAny:jPe,subgroupBallot:DPe,subgroupBroadcast:YPe,subgroupBroadcastFirst:$Pe,subgroupElect:NPe,subgroupExclusiveAdd:LPe,subgroupExclusiveMul:IPe,subgroupInclusiveAdd:OPe,subgroupInclusiveMul:BPe,subgroupIndex:IRe,subgroupMax:GPe,subgroupMin:kPe,subgroupMul:UPe,subgroupOr:zPe,subgroupShuffle:KPe,subgroupShuffleDown:JPe,subgroupShuffleUp:QPe,subgroupShuffleXor:ZPe,subgroupSize:fPe,subgroupXor:VPe,tan:IQ,tangentGeometry:MD,tangentLocal:pM,tangentView:AD,tangentWorld:dee,texture:Ni,texture3D:vne,textureBarrier:gPe,textureBicubic:NNe,textureBicubicLevel:HV,textureCubeUV:Ite,textureLoad:Ea,textureSize:oy,textureStore:PDe,thickness:Hz,time:XS,toneMapping:bJ,toneMappingExposure:SJ,toonOutlinePass:WDe,transformDirection:JQ,transformNormal:YJ,transformNormalToView:bV,transformedClearcoatNormalView:ERe,transformedNormalView:SRe,transformedNormalWorld:TRe,transmission:NN,transpose:jQ,triNoise3D:iDe,triplanarTexture:mDe,triplanarTextures:one,trunc:nV,uint:Ht,uintBitsToFloat:Z2e,uniform:pn,uniformArray:Hl,uniformCubeTexture:wRe,uniformFlow:aJ,uniformGroup:aQ,uniformTexture:tRe,unpremultiplyAlpha:nNe,userData:LDe,uv:Ns,uvec2:QZ,uvec3:HS,uvec4:nQ,varying:mp,varyingProperty:ku,vec2:ot,vec3:ye,vec4:jt,vectorComponents:t0,velocity:BDe,vertexColor:cte,vertexIndex:Hee,vertexStage:hJ,vibrance:zDe,viewZToLogarithmicDepth:IV,viewZToOrthographicDepth:Pb,viewZToPerspectiveDepth:UV,viewport:Db,viewportCoordinate:VJ,viewportDepthTexture:LV,viewportLinearDepth:YRe,viewportMipTexture:OV,viewportResolution:oRe,viewportSafeUV:hDe,viewportSharedTexture:vte,viewportSize:vV,viewportTexture:WRe,viewportUV:aRe,wgsl:QDe,wgslFn:tPe,workgroupArray:_Pe,workgroupBarrier:pPe,workgroupId:cPe,workingToColorSpace:gJ,xor:xQ});const Mf=new KV;class ZLe extends a0{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const s=this.renderer,r=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(r===null)s._clearColor.getRGB(Mf),Mf.a=s._clearColor.a;else if(r.isColor===!0)r.getRGB(Mf),Mf.a=1,a=!0;else if(r.isNode===!0){const l=this.get(e),c=r;Mf.copy(s._clearColor);let d=l.backgroundMesh;if(d===void 0){let x=function(){r.removeEventListener("dispose",x),d.material.dispose(),d.geometry.dispose()};const m=cM(jt(c).mul(TB),{getUV:()=>pne.mul(XJ),getTextureLevel:()=>hne});let v=NV;v=v.setZ(v.w);const _=new Er;_.name="Background.material",_.side=Ts,_.depthTest=!1,_.depthWrite=!1,_.allowOverride=!1,_.fog=!1,_.lights=!1,_.vertexNode=v,_.colorNode=m,l.backgroundMeshNode=m,l.backgroundMesh=d=new zs(new M_(1,32,32),_),d.frustumCulled=!1,d.name="Background.mesh",d.onBeforeRender=function(T,b,w){this.matrixWorld.copyPosition(w.matrixWorld)},r.addEventListener("dispose",x)}const h=c.getCacheKey();l.backgroundCacheKey!==h&&(l.backgroundMeshNode.node=jt(c).mul(TB),l.backgroundMeshNode.needsUpdate=!0,d.material.needsUpdate=!0,l.backgroundCacheKey=h),t.unshift(d,d.geometry,d.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",r);const o=s.xr.getEnvironmentBlendMode();if(o==="additive"?Mf.set(0,0,0,1):o==="alpha-blend"&&Mf.set(0,0,0,0),s.autoClear===!0||a===!0){const l=n.clearColorValue;l.r=Mf.r,l.g=Mf.g,l.b=Mf.b,l.a=Mf.a,(s.backend.isWebGLBackend===!0||s.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),n.depthClearValue=s._clearDepth,n.stencilClearValue=s._clearStencil,n.clearColor=s.autoClearColor===!0,n.clearDepth=s.autoClearDepth===!0,n.clearStencil=s.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let QLe=0;class EB{constructor(e="",t=[],n=0,s=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=s,this.id=QLe++}}class JLe{constructor(e,t,n,s,r,a,o,l,c,d=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=d,this.nodeAttributes=s,this.bindings=r,this.updateNodes=a,this.updateBeforeNodes=o,this.updateAfterNodes=l,this.observer=c,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const s=new EB(t.name,[],t.index,t.bindingsReference);e.push(s);for(const r of t.bindings)s.bindings.push(r.clone())}else e.push(t);return e}}class wB{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class fie{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class mk{constructor(e,t,n=!1,s=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=s}}class hie extends mk{constructor(e,t,n=null,s=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=n,this.interpolationSampling=s}}class pie{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let eUe=0;class LR{constructor(e=null){this.id=eUe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class tUe{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class l0{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class nUe extends l0{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class iUe extends l0{constructor(e,t=new lt){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class sUe extends l0{constructor(e,t=new ae){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class rUe extends l0{constructor(e,t=new bn){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class aUe extends l0{constructor(e,t=new Vt){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class oUe extends l0{constructor(e,t=new VS){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class lUe extends l0{constructor(e,t=new Kn){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class cUe extends l0{constructor(e,t=new an){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class uUe extends nUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class dUe extends iUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class fUe extends sUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class hUe extends rUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class pUe extends aUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class mUe extends oUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class gUe extends lUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class yUe extends cUe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const Fj=new WeakMap,vUe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),iR=i=>/e/g.test(i)?String(i).replace(/\+/g,""):(i=Number(i),i+(i%1?"":".0"));class gk{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.types={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=DR(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new LR,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.currentStack=null,this.subBuildFn=null}getBindGroupsCache(){let e=Fj.get(this.renderer);return e===void 0&&(e=new qf,Fj.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new rf(e,t,n)}createCubeRenderTarget(e,t){return new bte(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),s=[];let r=!0;for(const o of t)s.push(o),r=r&&o.groupNode.shared!==!0;let a;return r?(a=n.get(s),a===void 0&&(a=new EB(e,s,this.bindingsIndexes[e].group,s),n.set(s,a))):a=new EB(e,s,this.bindingsIndexes[e].group,s),a}getBindGroupArray(e,t){const n=this.bindings[t];let s=n[e];return s===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=s=[]),s}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const s of MN)for(const r in n[s]){const a=n[s][r];(t[r]||(t[r]=[])).push(...a)}e=[];for(const s in t){const r=t[s],a=this._getBindGroup(s,r);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==ii.NONE&&this.updateNodes.push(e);for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==ii.NONE&&this.updateBeforeNodes.push(e),n!==ii.NONE&&this.updateAfterNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Zi||e.magFilter===_m||e.magFilter===jd||e.magFilter===jo||e.minFilter===Zi||e.minFilter===_m||e.minFilter===jd||e.minFilter===jo}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getTernary(){return null}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new LR(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let s=this.generateArrayDeclaration(e,t)+"( ";for(let r=0;r<t;r++){const a=n?n[r]:null;a!==null?s+=a.build(this,e):s+=this.generateConst(e),r<t-1&&(s+=", ")}return s+=" )",s}generateStruct(e,t,n=null){const s=[];for(const r of t){const{name:a,type:o}=r;n&&n[a]&&n[a].isNode?s.push(n[a].build(this,o)):s.push(this.generateConst(o))}return e+"( "+s.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Vt:e==="vec2"?t=new lt:e==="vec3"?t=new ae:e==="vec4"&&(t=new bn)),e==="float")return iR(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${iR(t.r)}, ${iR(t.g)}, ${iR(t.b)} )`;const n=this.getTypeLength(e),s=this.getComponentType(e),r=a=>this.generateConst(s,a);if(n===2)return`${this.getType(e)}( ${r(t.x)}, ${r(t.y)} )`;if(n===3)return`${this.getType(e)}( ${r(t.x)}, ${r(t.y)}, ${r(t.z)} )`;if(n===4&&e!=="mat2")return`${this.getType(e)}( ${r(t.x)}, ${r(t.y)}, ${r(t.z)}, ${r(t.w)} )`;if(n>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(r).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const r of n)if(r.name===e)return r;const s=new wB(e,t);return this.registerDeclaration(s),n.push(s),s}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===oo)return"int";if(t===Rs)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=Cz(e);const s=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),s+n}getTypeFromArray(e){return vUe.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,s=e.itemSize,r=e.normalized;let a;return!(e instanceof M2)&&r!==!0&&(a=this.getTypeFromArray(n)),this.getTypeFromLength(s,a)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){this.stack=DR(this.stack);const e=dD();return this.stacks.push(e),GE(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,GE(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let s=n.getData(e);s===void 0&&(s={},n.setData(e,s)),s[t]===void 0&&(s[t]={});let r=s[t];const a=s.any?s.any.subBuilds:null,o=this.getClosestSubBuild(a);return o&&(r.subBuildsCache===void 0&&(r.subBuildsCache={}),r=r.subBuildsCache[o]||(r.subBuildsCache[o]={}),r.subBuilds=a),r}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let s=n.bufferAttribute;if(s===void 0){const r=this.uniforms.index++;s=new wB("nodeAttribute"+r,t,e),this.bufferAttributes.push(s),n.bufferAttribute=s}return s}getStructTypeNode(e,t=this.shaderStage){return this.types[t][e]||null}getStructTypeFromNode(e,t,n=null,s=this.shaderStage){const r=this.getDataFromNode(e,s,this.globalCache);let a=r.structType;if(a===void 0){const o=this.structs.index++;n===null&&(n="StructType"+o),a=new tUe(n,t),this.structs[s].push(a),this.types[s][n]=e,r.structType=a}return a}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,s=null){const r=this.getDataFromNode(e,n,this.globalCache);let a=r.uniform;if(a===void 0){const o=this.uniforms.index++;a=new fie(s||"nodeUniform"+o,t,e),this.uniforms[n].push(a),this.registerDeclaration(a),r.uniform=a}return a}getVarFromNode(e,t=null,n=e.getNodeType(this),s=this.shaderStage,r=!1){const a=this.getDataFromNode(e,s),o=this.getSubBuildProperty("variable",a.subBuilds);let l=a[o];if(l===void 0){const c=r?"_const":"_var",d=this.vars[s]||(this.vars[s]=[]),h=this.vars[c]||(this.vars[c]=0);t===null&&(t=(r?"nodeConst":"nodeVar")+h,this.vars[c]++),o!=="variable"&&(t=this.getSubBuildProperty(t,a.subBuilds));const m=e.getArrayCount(this);l=new mk(t,n,r,m),r||d.push(l),this.registerDeclaration(l),a[o]=l}return l}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this),s=null,r=null){const a=this.getDataFromNode(e,"any"),o=this.getSubBuildProperty("varying",a.subBuilds);let l=a[o];if(l===void 0){const c=this.varyings,d=c.length;t===null&&(t="nodeVarying"+d),o!=="varying"&&(t=this.getSubBuildProperty(t,a.subBuilds)),l=new hie(t,n,s,r),c.push(l),this.registerDeclaration(l),a[o]=l}return l}registerDeclaration(e){const t=this.shaderStage,n=this.declarations[t]||(this.declarations[t]={}),s=this.getPropertyName(e);let r=1,a=s;for(;n[a]!==void 0;)a=s+"_"+r++;r>1&&(e.name=a,console.warn(`THREE.TSL: Declaration name '${s}' of '${e.type}' already in use. Renamed to '${a}'.`)),n[a]=e}getCodeFromNode(e,t,n=this.shaderStage){const s=this.getDataFromNode(e);let r=s.code;if(r===void 0){const a=this.codes[n]||(this.codes[n]=[]),o=a.length;r=new pie("nodeCode"+o,t),a.push(r),s.code=r}return r}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:s}=this.getDataFromNode(e);let r=!0,a=t;for(;a;){if(s.get(a)===!0){r=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(r)for(const o of n)this.addLineFlowCode(o)}addLineFlowCodeBlock(e,t,n){const s=this.getDataFromNode(e),r=s.flowCodes||(s.flowCodes=[]),a=s.flowCodeBlock||(s.flowCodeBlock=new WeakMap);r.push(t),a.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new tk,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let a=0;const o=Object.values(this);return{next:()=>({value:o[a],done:a++>=o.length})}}};for(const a of t.inputs)n[a.name]=new ZV(a.type,a.name);e.layout=null;const s=e.call(n),r=this.flowStagesNode(s,t.type);return e.layout=t,r}flowBuildStage(e,t,n=null){const s=this.getBuildStage();this.setBuildStage(t);const r=e.build(this,n);return this.setBuildStage(s),r}flowStagesNode(e,t=null){const n=this.flow,s=this.vars,r=this.declarations,a=this.cache,o=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.declarations={},this.cache=new LR,this.stack=DR();for(const d of wN)this.setBuildStage(d),c.result=e.build(this,t);return c.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=s,this.declarations=r,this.cache=a,this.stack=l,this.setBuildStage(o),c}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,t=null){const n=this.flow,s={code:""};return this.flow=s,s.result=e.build(this,t),this.flow=n,s}flowNodeFromShaderStage(e,t,n=null,s=null){const r=this.tab,a=this.cache,o=this.shaderStage,l=this.context;this.setShaderStage(e);const c={...this.context};delete c.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=c;let d=null;if(this.buildStage==="generate"){const h=this.flowChildNode(t,n);s!==null&&(h.code+=`${this.tab+s} = ${h.result};
`),this.flowCode[e]=this.flowCode[e]+h.code,d=h}else d=t.build(this);return this.setShaderStage(o),this.cache=a,this.tab=r,this.context=l,d}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const s of n)t+=`${this.getVar(s.type,s.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const s of t)n+=s.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let t;if(e&&e.isNode?e.isShaderCallNodeInternal?t=e.shaderNode.subBuilds:e.isStackNode?t=[e.subBuild]:t=this.getDataFromNode(e,"any").subBuilds:e instanceof Set?t=[...e]:t=e,!t)return null;const n=this.subBuildLayers;for(let s=t.length-1;s>=0;s--){const r=t[s];if(n.includes(r))return r}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",t=null){let n;t!==null?n=this.getClosestSubBuild(t):n=this.subBuildFn;let s;return n?s=e?n+"_"+e:n:s=e,s}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let s=n.library.fromMaterial(t);s===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),s=new Er),s.build(this)}else this.addFlow("compute",e);for(const s of wN){this.setBuildStage(s),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const r of MN){this.setShaderStage(r);const a=this.flowNodes[r];for(const o of a)s==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new uUe(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new dUe(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new fUe(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new hUe(e);if(t==="color")return new pUe(e);if(t==="mat2")return new mUe(e);if(t==="mat3")return new gUe(e);if(t==="mat4")return new yUe(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const s=this.getTypeLength(t),r=this.getTypeLength(n);return s===16&&r===9?`${this.getType(n)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:s===9&&r===4?`${this.getType(n)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:s>4||r>4||r===0?e:s===r?`${this.getType(n)}( ${e} )`:s>r?(e=n==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,r)}`,this.format(e,this.getTypeFromLength(r,this.getComponentType(t)),n)):r===4&&s>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:s===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(s===1&&r>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${x_} - Node System
`}}class MB{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===ii.FRAME){const{frameMap:s}=this._getMaps(this.updateBeforeMap,n);s.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&s.set(n,this.frameId)}else if(t===ii.RENDER){const{renderMap:s}=this._getMaps(this.updateBeforeMap,n);s.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&s.set(n,this.renderId)}else t===ii.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===ii.FRAME){const{frameMap:s}=this._getMaps(this.updateAfterMap,n);s.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&s.set(n,this.frameId)}else if(t===ii.RENDER){const{renderMap:s}=this._getMaps(this.updateAfterMap,n);s.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&s.set(n,this.renderId)}else t===ii.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===ii.FRAME){const{frameMap:s}=this._getMaps(this.updateMap,n);s.get(n)!==this.frameId&&e.update(this)!==!1&&s.set(n,this.frameId)}else if(t===ii.RENDER){const{renderMap:s}=this._getMaps(this.updateMap,n);s.get(n)!==this.renderId&&e.update(this)!==!1&&s.set(n,this.renderId)}else t===ii.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class VD{constructor(e,t,n=null,s="",r=!1){this.type=e,this.name=t,this.count=n,this.qualifier=s,this.isConst=r}}VD.isNodeFunctionInput=!0;class mie extends o0{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:ok(this.light),lightColor:e}}}const lU=new an,sR=new an;let v1=null;class gie extends o0{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=pn(new ae).setGroup(cn),this.halfWidth=pn(new ae).setGroup(cn),this.updateType=ii.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;sR.identity(),lU.copy(t.matrixWorld),lU.premultiply(n),sR.extractRotation(lU),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(sR),this.halfHeight.value.applyMatrix4(sR)}setupDirectRectArea(e){let t,n;e.isAvailable("float32Filterable")?(t=Ni(v1.LTC_FLOAT_1),n=Ni(v1.LTC_FLOAT_2)):(t=Ni(v1.LTC_HALF_1),n=Ni(v1.LTC_HALF_2));const{colorNode:s,light:r}=this,a=ak(r);return{lightColor:s,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:n}}static setLTC(e){v1=e}}class kD extends o0{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=pn(0).setGroup(cn),this.penumbraCosNode=pn(0).setGroup(cn),this.cutoffDistanceNode=pn(0).setGroup(cn),this.decayExponentNode=pn(0).setGroup(cn),this.colorNode=pn(this.color).setGroup(cn)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){const{coneCosNode:n,penumbraCosNode:s}=this;return tf(n,s,t)}getLightCoord(e){const t=e.getNodeProperties(this);let n=t.projectionUV;return n===void 0&&(n=Bne(this.light,e.context.positionWorld),t.projectionUV=n),n}setupDirect(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:s,light:r}=this,a=this.getLightVector(e),o=a.normalize(),l=o.dot(ok(r)),c=this.getSpotAttenuation(e,l),d=a.length(),h=fk({lightDistance:d,cutoffDistance:n,decayExponent:s});let m=t.mul(c).mul(h),v,_;return r.colorNode?(_=this.getLightCoord(e),v=r.colorNode(_)):r.map&&(_=this.getLightCoord(e),v=Ni(r.map,_.xy).onRenderUpdate(()=>r.map)),v&&(m=_.mul(2).sub(1).abs().lessThan(1).all().select(m.mul(v),m)),{lightColor:m,lightDirection:o}}}class yie extends kD{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){const n=this.light.iesMap;let s=null;if(n&&n.isTexture===!0){const r=t.acos().mul(1/Math.PI);s=Ni(n,ot(r,0),0).r}else s=super.getSpotAttenuation(t);return s}}const _Ue=ve(([i,e])=>{const t=i.abs().sub(e);return Qh(ma(t,0)).add(yu(ma(t.x,t.y),0))});class vie extends kD{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),t.aspect===null){let n=1;t.map!==null&&(n=t.map.width/t.map.height),t.shadow.aspect=n}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){const t=te(0),n=this.penumbraCosNode,s=BD(this.light).mul(e.context.positionWorld||Ju);return un(s.w.greaterThan(0),()=>{const r=s.xyz.div(s.w),a=_Ue(r.xy.sub(ot(.5)),ot(.5)),o=sd(-1,Ui(1,Jz(n)).sub(1));t.assign(rV(a.mul(-2).mul(o)))}),t}}class _ie extends o0{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class xie extends o0{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=rk(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=pn(new Vt).setGroup(cn)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:s}=this,a=r0.dot(s).mul(.5).add(.5),o=Wi(n,t,a);e.context.irradiance.addAssign(o)}}class bie extends o0{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new ae);this.lightProbe=Hl(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=die(r0,this.lightProbe);e.context.irradiance.addAssign(t)}}class Sie{parseFunction(){console.warn("Abstract function.")}}class yk{constructor(e,t,n="",s=""){this.type=e,this.inputs=t,this.name=n,this.precision=s}getCode(){console.warn("Abstract function.")}}yk.isNodeFunction=!0;const xUe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,bUe=/[a-z_0-9]+/ig,zj="#pragma main",SUe=i=>{i=i.trim();const e=i.indexOf(zj),t=e!==-1?i.slice(e+zj.length):i,n=t.match(xUe);if(n!==null&&n.length===5){const s=n[4],r=[];let a=null;for(;(a=bUe.exec(s))!==null;)r.push(a);const o=[];let l=0;for(;l<r.length;){const _=r[l][0]==="const";_===!0&&l++;let x=r[l][0];x==="in"||x==="out"||x==="inout"?l++:x="";const T=r[l++][0];let b=Number.parseInt(r[l][0]);Number.isNaN(b)===!1?l++:b=null;const w=r[l++][0];o.push(new VD(T,w,b,x,_))}const c=t.substring(n[0].length),d=n[3]!==void 0?n[3]:"",h=n[2],m=n[1]!==void 0?n[1]:"",v=e!==-1?i.slice(0,e):"";return{type:h,inputs:o,name:d,precision:m,inputsCode:s,blockCode:c,headerCode:v}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class TUe extends yk{constructor(e){const{type:t,inputs:n,name:s,precision:r,inputsCode:a,blockCode:o,headerCode:l}=SUe(e);super(t,n,s,r),this.inputsCode=a,this.blockCode=o,this.headerCode=l}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:s,inputsCode:r,headerCode:a,precision:o}=this;let l=`${s} ${e} ( ${r.trim()} )`;o!==""&&(l=`${o} ${l}`),t=a+l+n}else t="";return t}}class Tie extends Sie{parseFunction(e){return new TUe(e)}}const Vj=new WeakMap,Bh=[],lv=[];class EUe extends a0{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new MB,this.nodeBuilderCache=new Map,this.callHashCache=new qf,this.groupsData=new qf,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===Xz.name)return!0;if(n===cn.name){const r=this.get(e),a=this.nodeFrame.renderId;return r.renderId!==a?(r.renderId=a,!0):!1}if(n===oQ.name){const r=this.get(e),a=this.nodeFrame.frameId;return r.frameId!==a?(r.frameId=a,!0):!1}Bh[0]=t,Bh[1]=e;let s=this.groupsData.get(Bh);return s===void 0&&this.groupsData.set(Bh,s={}),Bh.length=0,s.version!==t.version?(s.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:s}=this,r=this.getForRenderCacheKey(e);if(n=s.get(r),n===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&a.enableMultiview(),a.build(),n=this._createNodeBuilderState(a),s.set(r,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const s=this.backend.createNodeBuilder(e,this.renderer);s.build(),n=this._createNodeBuilderState(s),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new JLe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){Bh[0]=e,Bh[1]=t;const n=this.renderer.info.calls,s=this.callHashCache.get(Bh)||{};if(s.callId!==n){const r=this.getEnvironmentNode(e),a=this.getFogNode(e);t&&lv.push(t.getCacheKey(!0)),r&&lv.push(r.getCacheKey()),a&&lv.push(a.getCacheKey()),lv.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),lv.push(this.renderer.shadowMap.enabled?1:0),s.callId=n,s.cacheKey=oM(lv),this.callHashCache.set(Bh,s),lv.length=0}return Bh.length=0,s.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const s=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||s){const r=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===Rm||n.mapping===Nm||n.mapping===lp){if(e.backgroundBlurriness>0||n.mapping===lp)return WV(n);{let a;return n.isCubeTexture===!0?a=tS(n):a=Ni(n),Tte(a)}}else{if(n.isTexture===!0)return Ni(n,Tm.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},s);t.backgroundNode=r,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,s=!1){const r=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let a=r.get(t);return(a===void 0||s)&&(a=n(),r.set(t,a)),a}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const s=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const r=tr("color","color",n).setGroup(cn),a=tr("density","float",n).setGroup(cn);return XE(r,ik(a))}else if(n.isFog){const r=tr("color","color",n).setGroup(cn),a=tr("near","float",n).setGroup(cn),o=tr("far","float",n).setGroup(cn);return XE(r,nk(a,o))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=s,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const s=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return tS(n);if(n.isTexture===!0)return Ni(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=s,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,s=null,r=null){const a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=n,a.camera=s,a.material=r,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return Vj.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),s=e.isArrayTexture?vne(e,ye(Tm,Wm("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):Ni(e,Tm).renderOutput(t.toneMapping,t.currentColorSpace);return Vj.set(e,n),s}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const s of n.updateNodes)t.updateNode(s)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const s of n.updateNodes)t.updateNode(s)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new MB,this.nodeBuilderCache=new Map,this.cacheLib={}}}const cU=new Df;class FN{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Kn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const s=e.length;for(let r=0;r<s;r++){cU.copy(e[r]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=t[n+r],o=cU.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=cU.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const s=t.clippingPlanes,r=s.length;let a,o;if(this.clipIntersection?(a=this.intersectionPlanes,o=e.intersectionPlanes.length):(a=this.unionPlanes,o=e.unionPlanes.length),a.length!==o+r){a.length=o+r;for(let l=0;l<r;l++)a[o+l]=new bn;n=!0}this.projectPlanes(s,a,o),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new FN(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class wUe{constructor(e,t){this.bundleGroup=e,this.camera=t}}const _1=[];class MUe{constructor(){this.bundles=new qf}get(e,t){const n=this.bundles;_1[0]=e,_1[1]=t;let s=n.get(_1);return s===void 0&&(s=new wUe(e,t),n.set(_1,s)),_1.length=0,s}dispose(){this.bundles=new qf}}class Eie{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const s in e)t[s]=e[s]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const AUe=new ID,x1=[];class wie extends qf{constructor(){super()}createNode(e=[]){return new ID().setLights(e)}getNode(e,t){if(e.isQuadMesh)return AUe;x1[0]=e,x1[1]=t;let n=this.get(x1);return n===void 0&&(n=this.createNode(),this.set(x1,n)),x1.length=0,n}}class U1 extends rf{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}const kj=new ae,Gj=new ae;class CUe extends _u{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new la,this._cameraL.viewport=new bn,this._cameraR=new la,this._cameraR.viewport=new bn,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new nD,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._sessionUsesLayers=!1,this._supportsGlBinding=typeof XRWebGLBinding<"u",this._frameBufferTargets=null,this._createXRLayer=LUe.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new lt,this._onSessionEvent=DUe.bind(this),this._onSessionEnd=PUe.bind(this),this._onInputSourcesChange=OUe.bind(this),this._onAnimationFrame=UUe.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._supportsLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getBinding(){return this._glBinding===null&&this._supportsGlBinding&&(this._glBinding=new XRWebGLBinding(this._session,this._gl)),this._glBinding}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,n,s,r,a,o,l={}){const c=new Zy(e,t),d=new U1(r,a,{format:nr,type:Tr,depthTexture:new Uc(r,a,l.stencil?Pc:Rs,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?Lc:Oc),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});d._autoAllocateDepthBuffer=!0;const h=new Gl({color:16777215,side:Nc});h.map=d.texture,h.map.offset.y=1,h.map.repeat.y=-1;const m=new zs(c,h);m.position.copy(n),m.quaternion.copy(s);const v={type:"quad",width:e,height:t,translation:n,quaternion:s,pixelwidth:r,pixelheight:a,plane:m,material:h,rendercall:o,renderTarget:d};if(this._layers.push(v),this._session!==null){v.plane.material=new Gl({color:16777215,side:Nc}),v.plane.material.blending=ry,v.plane.material.blendEquation=Ho,v.plane.material.blendSrc=Nf,v.plane.material.blendDst=Nf,v.xrlayer=this._createXRLayer(v);const _=this._session.renderState.layers;_.unshift(v.xrlayer),this._session.updateRenderState({layers:_})}else d.isXRRenderTarget=!1;return m}createCylinderLayer(e,t,n,s,r,a,o,l,c={}){const d=new w_(e,e,e*t/n,64,64,!0,Math.PI-t/2,t),h=new U1(a,o,{format:nr,type:Tr,depthTexture:new Uc(a,o,c.stencil?Pc:Rs,void 0,void 0,void 0,void 0,void 0,void 0,c.stencil?Lc:Oc),stencilBuffer:c.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});h._autoAllocateDepthBuffer=!0;const m=new Gl({color:16777215,side:Ts});m.map=h.texture,m.map.offset.y=1,m.map.repeat.y=-1;const v=new zs(d,m);v.position.copy(s),v.quaternion.copy(r);const _={type:"cylinder",radius:e,centralAngle:t,aspectratio:n,translation:s,quaternion:r,pixelwidth:a,pixelheight:o,plane:v,material:m,rendercall:l,renderTarget:h};if(this._layers.push(_),this._session!==null){_.plane.material=new Gl({color:16777215,side:Ts}),_.plane.material.blending=ry,_.plane.material.blendEquation=Ho,_.plane.material.blendSrc=Nf,_.plane.material.blendDst=Nf,_.xrlayer=this._createXRLayer(_);const x=this._session.renderState.layers;x.unshift(_.xrlayer),this._session.updateRenderState({layers:x})}else h.isXRRenderTarget=!1;return v}renderLayers(){const e=new ae,t=new xl,n=this._renderer,s=this.isPresenting,r=n.getOutputRenderTarget(),a=n._frameBufferTarget;this.isPresenting=!1;const o=new lt;n.getSize(o);const l=n._quad;for(const c of this._layers)if(c.renderTarget.isXRRenderTarget=this._session!==null,c.renderTarget._hasExternalTextures=c.renderTarget.isXRRenderTarget,c.renderTarget.isXRRenderTarget&&this._sessionUsesLayers){c.xrlayer.transform=new XRRigidTransform(c.plane.getWorldPosition(e),c.plane.getWorldQuaternion(t));const d=this._glBinding.getSubImage(c.xrlayer,this._xrFrame);n.backend.setXRRenderTargetTextures(c.renderTarget,d.colorTexture,void 0),n._setXRLayerSize(c.renderTarget.width,c.renderTarget.height),n.setOutputRenderTarget(c.renderTarget),n.setRenderTarget(null),n._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:h,quad:m}=this._frameBufferTargets.get(c.renderTarget)||{frameBufferTarget:null,quad:null};h?(n._frameBufferTarget=h,n._quad=m):(n._quad=new YS(new Er),this._frameBufferTargets.set(c.renderTarget,{frameBufferTarget:n._getFrameBufferTarget(),quad:n._quad})),c.rendercall(),n._frameBufferTarget=null}else n.setRenderTarget(c.renderTarget),c.rendercall();n.setRenderTarget(null),n.setOutputRenderTarget(r),n._frameBufferTarget=a,n._setXRLayerSize(o.x,o.y),n._quad=l,this.isPresenting=s}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend;this._gl=t.getContext();const s=this._gl,r=s.getContextAttributes();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._supportsLayers===!0){let a=null,o=null,l=null;t.depth&&(l=t.stencil?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT24,a=t.stencil?Lc:Oc,o=t.stencil?Pc:Rs);const c={colorFormat:s.RGBA8,depthFormat:l,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(c.textureType="texture-array",this._useMultiview=!0),this._glBinding=this.getBinding();const d=this._glBinding.createProjectionLayer(c),h=[d];this._glProjLayer=d,t.setPixelRatio(1),t._setXRLayerSize(d.textureWidth,d.textureHeight);const m=this._useMultiview?2:1,v=new Uc(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,a,m);if(this._xrRenderTarget=new U1(d.textureWidth,d.textureHeight,{format:nr,type:Tr,colorSpace:t.outputColorSpace,depthTexture:v,stencilBuffer:t.stencil,samples:r.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._sessionUsesLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._sessionUsesLayers)for(const _ of this._layers)_.plane.material=new Gl({color:16777215,side:_.type==="cylinder"?Ts:Nc}),_.plane.material.blending=ry,_.plane.material.blendEquation=Ho,_.plane.material.blendSrc=Nf,_.plane.material.blendDst=Nf,_.xrlayer=this._createXRLayer(_),h.unshift(_.xrlayer);e.updateRenderState({layers:h})}else{const a={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,s,a);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),t.setPixelRatio(1),t._setXRLayerSize(o.framebufferWidth,o.framebufferHeight),this._xrRenderTarget=new U1(o.framebufferWidth,o.framebufferHeight,{format:nr,type:Tr,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:o.ignoreDepthValues===!1,resolveStencilBuffer:o.ignoreDepthValues===!1}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,s=e.far,r=this._cameraXR,a=this._cameraL,o=this._cameraR;r.near=o.near=a.near=n,r.far=o.far=a.far=s,r.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==r.near||this._currentDepthFar!==r.far)&&(t.updateRenderState({depthNear:r.near,depthFar:r.far}),this._currentDepthNear=r.near,this._currentDepthFar=r.far),r.layers.mask=e.layers.mask|6,a.layers.mask=r.layers.mask&3,o.layers.mask=r.layers.mask&5;const l=e.parent,c=r.cameras;Hj(r,l);for(let d=0;d<c.length;d++)Hj(c[d],l);c.length===2?RUe(r,a,o):r.projectionMatrix.copy(a.projectionMatrix),NUe(e,r,l)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new Cb,this._controllers[e]=t),t}}function RUe(i,e,t){kj.setFromMatrixPosition(e.matrixWorld),Gj.setFromMatrixPosition(t.matrixWorld);const n=kj.distanceTo(Gj),s=e.projectionMatrix.elements,r=t.projectionMatrix.elements,a=s[14]/(s[10]-1),o=s[14]/(s[10]+1),l=(s[9]+1)/s[5],c=(s[9]-1)/s[5],d=(s[8]-1)/s[0],h=(r[8]+1)/r[0],m=a*d,v=a*h,_=n/(-d+h),x=_*-d;if(e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(x),i.translateZ(_),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert(),s[10]===-1)i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const T=a+_,b=o+_,w=m-x,M=v+(n-x),R=l*o/b*T,N=c*o/b*T;i.projectionMatrix.makePerspective(w,M,R,N,T,b),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}}function Hj(i,e){e===null?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(e.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}function NUe(i,e,t){t===null?i.matrix.copy(e.matrixWorld):(i.matrix.copy(t.matrixWorld),i.matrix.invert(),i.matrix.multiply(e.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse),i.isPerspectiveCamera&&(i.fov=o_*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1)}function DUe(i){const e=this._controllerInputSources.indexOf(i.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(i.inputSource,i.frame,n),t.dispatchEvent({type:i.type,data:i.inputSource})}}function PUe(){const i=this._session,e=this._renderer;i.removeEventListener("select",this._onSessionEvent),i.removeEventListener("selectstart",this._onSessionEvent),i.removeEventListener("selectend",this._onSessionEvent),i.removeEventListener("squeeze",this._onSessionEvent),i.removeEventListener("squeezestart",this._onSessionEvent),i.removeEventListener("squeezeend",this._onSessionEvent),i.removeEventListener("end",this._onSessionEnd),i.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._sessionUsesLayers===!0)for(const t of this._layers)t.renderTarget=new U1(t.pixelwidth,t.pixelheight,{format:nr,type:Tr,depthTexture:new Uc(t.pixelwidth,t.pixelheight,t.stencilBuffer?Pc:Rs,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?Lc:Oc),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,t.material.map.offset.y=1,t.material.map.repeat.y=-1,delete t.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function OUe(i){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<i.removed.length;n++){const s=i.removed[n],r=t.indexOf(s);r>=0&&(t[r]=null,e[r].disconnect(s))}for(let n=0;n<i.added.length;n++){const s=i.added[n];let r=t.indexOf(s);if(r===-1){for(let o=0;o<e.length;o++)if(o>=t.length){t.push(s),r=o;break}else if(t[o]===null){t[o]=s,r=o;break}if(r===-1)break}const a=e[r];a&&a.connect(s)}}function LUe(i){return i.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(i.translation,i.quaternion),width:i.width/2,height:i.height/2,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(i.translation,i.quaternion),radius:i.radius,centralAngle:i.centralAngle,aspectRatio:i.aspectRatio,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1})}function UUe(i,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,s=n.backend,r=this._glBaseLayer,a=this.getReferenceSpace(),o=e.getViewerPose(a);if(this._xrFrame=e,o!==null){const l=o.views;this._glBaseLayer!==null&&s.setXRTarget(r.framebuffer);let c=!1;l.length!==t.cameras.length&&(t.cameras.length=0,c=!0);for(let d=0;d<l.length;d++){const h=l[d];let m;if(this._supportsLayers===!0){const _=this._glBinding.getViewSubImage(this._glProjLayer,h);m=_.viewport,d===0&&s.setXRRenderTargetTextures(this._xrRenderTarget,_.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:_.depthStencilTexture)}else m=r.getViewport(h);let v=this._cameras[d];v===void 0&&(v=new la,v.layers.enable(d),v.viewport=new bn,this._cameras[d]=v),v.matrix.fromArray(h.transform.matrix),v.matrix.decompose(v.position,v.quaternion,v.scale),v.projectionMatrix.fromArray(h.projectionMatrix),v.projectionMatrixInverse.copy(v.projectionMatrix).invert(),v.viewport.set(m.x,m.y,m.width,m.height),d===0&&(t.matrix.copy(v.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),c===!0&&t.cameras.push(v)}n.setOutputRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const c=this._controllerInputSources[l],d=this._controllers[l];c!==null&&d!==void 0&&d.update(c,e,a)}this._currentAnimationLoop&&this._currentAnimationLoop(i,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const jj=new E_,eb=new lt,uU=new bn,dU=new Ky,fU=new OS,rR=new an,em=new bn;class BUe{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:s=!0,depth:r=!0,stencil:a=!1,antialias:o=!1,samples:l=0,getFallback:c=null,colorBufferType:d=$a,multiview:h=!1}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||o===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=s,this.logarithmicDepthBuffer=n,this.outputColorSpace=ao,this.toneMapping=bo,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=r,this.stencil=a,this.info=new A2e,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new Eie,this.lighting=new wie,this._getFallback=c,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new bn(0,0,this._width,this._height),this._scissor=new bn(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new YS(new Er),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const m=this.alpha===!0?0:1;this._clearColor=new KV(0,0,0,m),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=d,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:bS},this.xr=new CUe(this,h),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(v,_,x)=>{await this.compileAsync(v,_);const T=this._renderLists.get(v,_),b=this._renderContexts.get(v,_,this._renderTarget),w=v.overrideMaterial||x.material,M=this._objects.get(x,w,v,_,T.lightsNode,b,b.clippingContext),{fragmentShader:R,vertexShader:N}=M.getNodeBuilderState();return{fragmentShader:R,vertexShader:N}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(s){if(this._getFallback!==null)try{this.backend=n=this._getFallback(s),await n.init(this)}catch(r){t(r);return}else{t(s);return}}this._nodes=new EUe(this,n),this._animation=new v2e(this._nodes,this.info),this._attributes=new w2e(n),this._background=new ZLe(this,this._nodes),this._geometries=new M2e(this._attributes,this.info),this._textures=new G2e(this,n,this.info),this._pipelines=new D2e(n,this._nodes),this._bindings=new P2e(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new S2e(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new U2e(this.lighting),this._bundles=new MUe,this._renderContexts=new V2e,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const s=this._nodes.nodeFrame,r=s.renderId,a=this._currentRenderContext,o=this._currentRenderObjectFunction,l=this._compilationPromises,c=e.isScene===!0?e:jj;n===null&&(n=e);const d=this._renderTarget,h=this._renderContexts.get(n,t,d),m=this._activeMipmapLevel,v=[];this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=v,s.renderId++,s.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new FN),h.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,d);const _=this._renderLists.get(e,t);if(_.begin(),this._projectObject(e,t,0,_,h.clippingContext),n!==e&&n.traverseVisible(function(M){M.isLight&&M.layers.test(t.layers)&&_.pushLight(M)}),_.finish(),d!==null){this._textures.updateRenderTarget(d,m);const M=this._textures.get(d);h.textures=M.textures,h.depthTexture=M.depthTexture}else h.textures=null,h.depthTexture=null;this._background.update(c,_,h);const x=_.opaque,T=_.transparent,b=_.transparentDoublePass,w=_.lightsNode;this.opaque===!0&&x.length>0&&this._renderObjects(x,t,c,w),this.transparent===!0&&T.length>0&&this._renderTransparents(T,b,t,c,w),s.renderId=r,this._currentRenderContext=a,this._currentRenderObjectFunction=o,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(v)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}set highPrecision(e){e===!0?(this.overrideNodes.modelViewMatrix=uB,this.overrideNodes.modelNormalViewMatrix=dB):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===uB&&this.overrideNodes.modelNormalViewMatrix===dB}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:s,camera:r,renderList:a}=e,o=this._currentRenderContext,l=this._bundles.get(s,r),c=this.backend.get(l);c.renderContexts===void 0&&(c.renderContexts=new Set);const d=s.version!==c.version,h=c.renderContexts.has(o)===!1||d;if(c.renderContexts.add(o),h){this.backend.beginBundle(o),(c.renderObjects===void 0||d)&&(c.renderObjects=[]),this._currentRenderBundle=l;const{transparentDoublePass:m,transparent:v,opaque:_}=a;this.opaque===!0&&_.length>0&&this._renderObjects(_,r,t,n),this.transparent===!0&&v.length>0&&this._renderTransparents(v,m,r,t,n),this._currentRenderBundle=null,this.backend.finishBundle(o,l),c.version=s.version}else{const{renderObjects:m}=c;for(let v=0,_=m.length;v<_;v++){const x=m[v];this._nodes.needsRefresh(x)&&(this._nodes.updateBefore(x),this._nodes.updateForRender(x),this._bindings.updateForRender(x),this._nodes.updateAfter(x))}}this.backend.addBundle(o,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this,n=e!==bo,s=t!==Sn.workingColorSpace;if(n===!1&&s===!1)return null;const{width:r,height:a}=this.getDrawingBufferSize(eb),{depth:o,stencil:l}=this;let c=this._frameBufferTarget;c===null&&(c=new rf(r,a,{depthBuffer:o,stencilBuffer:l,type:this._colorBufferType,format:nr,colorSpace:Sn.workingColorSpace,generateMipmaps:!1,minFilter:Zi,magFilter:Zi,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c);const d=this.getOutputRenderTarget();return c.depthBuffer=o,c.stencilBuffer=l,d!==null?c.setSize(d.width,d.height,d.depth):c.setSize(r,a,1),c.viewport.copy(this._viewport),c.scissor.copy(this._scissor),c.viewport.multiplyScalar(this._pixelRatio),c.scissor.multiplyScalar(this._pixelRatio),c.scissorTest=this._scissorTest,c.multiview=d!==null?d.multiview:!1,c.resolveDepthBuffer=d!==null?d.resolveDepthBuffer:!0,c._autoAllocateDepthBuffer=d!==null?d._autoAllocateDepthBuffer:!1,c}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const s=n?this._getFrameBufferTarget():null,r=this._nodes.nodeFrame,a=r.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,c=e.isScene===!0?e:jj,d=this._renderTarget||this._outputRenderTarget,h=this._activeCubeFace,m=this._activeMipmapLevel;let v;s!==null?(v=s,this.setRenderTarget(v)):v=d;const _=this._renderContexts.get(e,t,v);this._currentRenderContext=_,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,r.renderId=this.info.calls;const x=this.coordinateSystem,T=this.xr;if(t.coordinateSystem!==x&&T.isPresenting===!1&&(t.coordinateSystem=x,t.updateProjectionMatrix(),t.isArrayCamera))for(const Z of t.cameras)Z.coordinateSystem=x,Z.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),T.enabled===!0&&T.isPresenting===!0&&(T.cameraAutoUpdate===!0&&T.updateCamera(t),t=T.getCamera());let b=this._viewport,w=this._scissor,M=this._pixelRatio;v!==null&&(b=v.viewport,w=v.scissor,M=1),this.getDrawingBufferSize(eb),uU.set(0,0,eb.width,eb.height);const R=b.minDepth===void 0?0:b.minDepth,N=b.maxDepth===void 0?1:b.maxDepth;_.viewportValue.copy(b).multiplyScalar(M).floor(),_.viewportValue.width>>=m,_.viewportValue.height>>=m,_.viewportValue.minDepth=R,_.viewportValue.maxDepth=N,_.viewport=_.viewportValue.equals(uU)===!1,_.scissorValue.copy(w).multiplyScalar(M).floor(),_.scissor=this._scissorTest&&_.scissorValue.equals(uU)===!1,_.scissorValue.width>>=m,_.scissorValue.height>>=m,_.clippingContext||(_.clippingContext=new FN),_.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,v);const D=t.isArrayCamera?fU:dU;t.isArrayCamera||(rR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(rR,t.coordinateSystem,t.reversedDepth));const L=this._renderLists.get(e,t);if(L.begin(),this._projectObject(e,t,0,L,_.clippingContext),L.finish(),this.sortObjects===!0&&L.sort(this._opaqueSort,this._transparentSort),v!==null){this._textures.updateRenderTarget(v,m);const Z=this._textures.get(v);_.textures=Z.textures,_.depthTexture=Z.depthTexture,_.width=Z.width,_.height=Z.height,_.renderTarget=v,_.depth=v.depthBuffer,_.stencil=v.stencilBuffer}else _.textures=null,_.depthTexture=null,_.width=eb.width,_.height=eb.height,_.depth=this.depth,_.stencil=this.stencil;_.width>>=m,_.height>>=m,_.activeCubeFace=h,_.activeMipmapLevel=m,_.occlusionQueryCount=L.occlusionQueryCount,_.scissorValue.max(em.set(0,0,0,0)),_.scissorValue.x+_.scissorValue.width>_.width&&(_.scissorValue.width=Math.max(_.width-_.scissorValue.x,0)),_.scissorValue.y+_.scissorValue.height>_.height&&(_.scissorValue.height=Math.max(_.height-_.scissorValue.y,0)),this._background.update(c,L,_),_.camera=t,this.backend.beginRender(_);const{bundles:F,lightsNode:I,transparentDoublePass:z,transparent:H,opaque:Y}=L;return F.length>0&&this._renderBundles(F,c,I),this.opaque===!0&&Y.length>0&&this._renderObjects(Y,t,c,I),this.transparent===!0&&H.length>0&&this._renderTransparents(H,z,t,c,I),this.backend.finishRender(_),r.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=l,s!==null&&(this.setRenderTarget(d,h,m),this._renderOutput(v)),c.onAfterRender(this,e,t,v),_}_setXRLayerSize(e,t){this._width=e,this._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const n=this.autoClear,s=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=n,this.xr.enabled=s}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setSize(e,t,n=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,s){const r=this._scissor;e.isVector4?r.copy(e):r.set(e,t,n,s)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,s,r=0,a=1){const o=this._viewport;e.isVector4?o.copy(e):o.set(e,t,n,s),o.minDepth=r,o.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const s=this._renderTarget||this._getFrameBufferTarget();let r=null;if(s!==null){this._textures.updateRenderTarget(s);const a=this._textures.get(s);r=this._renderContexts.getForClear(s),r.textures=a.textures,r.depthTexture=a.depthTexture,r.width=a.width,r.height=a.height,r.renderTarget=s,r.depth=s.depthBuffer,r.stencil=s.stencilBuffer,r.clearColorValue=this.backend.getClearColor(),r.activeCubeFace=this.getActiveCubeFace(),r.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,n,r),s!==null&&this._renderTarget===null&&this._renderOutput(s)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:bo}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:Sn.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this._initialized===!0&&(this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()})),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,t=null){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const n=this._nodes.nodeFrame,s=n.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,n.renderId=this.info.calls;const r=this.backend,a=this._pipelines,o=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");r.beginCompute(e);for(const d of c){if(a.has(d)===!1){const v=()=>{d.removeEventListener("dispose",v),a.delete(d),o.delete(d),l.delete(d)};d.addEventListener("dispose",v);const _=d.onInitFunction;_!==null&&_.call(d,{renderer:this})}l.updateForCompute(d),o.updateForCompute(d);const h=o.getForCompute(d),m=a.getForCompute(d,h);r.compute(e,d,h,m,t)}r.finishCompute(e),n.renderId=s}async computeAsync(e,t=null){this._initialized===!1&&await this.init(),this.compute(e,t)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=em.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=em.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=em.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,s;n!==null?s=n.renderTarget:(s=this._renderTarget||this._getFrameBufferTarget(),s!==null&&(this._textures.updateRenderTarget(s),n=this._textures.get(s))),this._textures.updateTexture(e,{renderTarget:s}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,s=null,r=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,s,r,a)}async readRenderTargetPixelsAsync(e,t,n,s,r,a=0,o=0){return this.backend.copyTextureToBuffer(e.textures[a],t,n,s,r,o)}_projectObject(e,t,n,s,r){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(r=r.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)s.pushLight(e);else if(e.isSprite){const l=t.isArrayCamera?fU:dU;if(!e.frustumCulled||l.intersectsSprite(e,t)){this.sortObjects===!0&&em.setFromMatrixPosition(e.matrixWorld).applyMatrix4(rR);const{geometry:c,material:d}=e;d.visible&&s.push(e,c,d,n,em.z,null,r)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const l=t.isArrayCamera?fU:dU;if(!e.frustumCulled||l.intersectsObject(e,t)){const{geometry:c,material:d}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),em.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(rR)),Array.isArray(d)){const h=c.groups;for(let m=0,v=h.length;m<v;m++){const _=h[m],x=d[_.materialIndex];x&&x.visible&&s.push(e,c,x,n,em.z,_,r)}}else d.visible&&s.push(e,c,d,n,em.z,null,r)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=s;s=this._renderLists.get(e,t),s.begin(),l.pushBundle({bundleGroup:e,camera:t,renderList:s}),s.finish()}const o=e.children;for(let l=0,c=o.length;l<c;l++)this._projectObject(o[l],t,n,s,r)}_renderBundles(e,t,n){for(const s of e)this._renderBundle(s,t,n)}_renderTransparents(e,t,n,s,r){if(t.length>0){for(const{material:a}of t)a.side=Ts;this._renderObjects(t,n,s,r,"backSide");for(const{material:a}of t)a.side=Nc;this._renderObjects(e,n,s,r);for(const{material:a}of t)a.side=Go}else this._renderObjects(e,n,s,r)}_renderObjects(e,t,n,s,r=null){for(let a=0,o=e.length;a<o;a++){const{object:l,geometry:c,material:d,group:h,clippingContext:m}=e[a];this._currentRenderObjectFunction(l,n,t,c,d,h,s,m,r)}}renderObject(e,t,n,s,r,a,o,l=null,c=null){let d,h,m;if(e.onBeforeRender(this,t,n,s,r,a),r.allowOverride===!0&&t.overrideMaterial!==null){const v=t.overrideMaterial;r.positionNode&&r.positionNode.isNode&&(d=v.positionNode,v.positionNode=r.positionNode),v.alphaTest=r.alphaTest,v.alphaMap=r.alphaMap,v.transparent=r.transparent||r.transmission>0,v.isShadowPassMaterial&&(v.side=r.shadowSide===null?r.side:r.shadowSide,r.depthNode&&r.depthNode.isNode&&(m=v.depthNode,v.depthNode=r.depthNode),r.castShadowNode&&r.castShadowNode.isNode&&(h=v.colorNode,v.colorNode=r.castShadowNode),r.castShadowPositionNode&&r.castShadowPositionNode.isNode&&(d=v.positionNode,v.positionNode=r.castShadowPositionNode)),r=v}r.transparent===!0&&r.side===Go&&r.forceSinglePass===!1?(r.side=Ts,this._handleObjectFunction(e,r,t,n,o,a,l,"backSide"),r.side=Nc,this._handleObjectFunction(e,r,t,n,o,a,l,c),r.side=Go):this._handleObjectFunction(e,r,t,n,o,a,l,c),d!==void 0&&(t.overrideMaterial.positionNode=d),m!==void 0&&(t.overrideMaterial.depthNode=m),h!==void 0&&(t.overrideMaterial.colorNode=h),e.onAfterRender(this,t,n,s,r,a)}_renderObjectDirect(e,t,n,s,r,a,o,l){const c=this._objects.get(e,t,n,s,r,this._currentRenderContext,o,l);c.drawRange=e.geometry.drawRange,c.group=a;const d=this._nodes.needsRefresh(c);d&&(this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c)),this._pipelines.updateForRender(c),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(c),c.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(c,this.info),d&&this._nodes.updateAfter(c)}_createObjectPipeline(e,t,n,s,r,a,o,l){const c=this._objects.get(e,t,n,s,r,this._currentRenderContext,o,l);c.drawRange=e.geometry.drawRange,c.group=a,this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class Mie{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function IUe(i){return i+(jg-i%jg)%jg}class Aie extends Mie{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return IUe(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class Cie extends Aie{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let FUe=0;class Rie extends Cie{constructor(e,t){super("UniformBuffer_"+FUe++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class zUe extends Cie{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let t=0;for(let n=0,s=this.uniforms.length;n<s;n++){const r=this.uniforms[n],a=r.boundary,o=r.itemSize*e,l=t%jg,c=l%a,d=l+c;t+=c,d!==0&&jg-d<o&&(t+=jg-d),r.offset=t/e,t+=o}return Math.ceil(t/jg)*jg}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,s=e.getValue(),r=e.offset,a=e.getType();if(n[r]!==s){const o=this._getBufferForType(a);o[r]=n[r]=s,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,s=e.getValue(),r=e.offset,a=e.getType();if(n[r+0]!==s.x||n[r+1]!==s.y){const o=this._getBufferForType(a);o[r+0]=n[r+0]=s.x,o[r+1]=n[r+1]=s.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,s=e.getValue(),r=e.offset,a=e.getType();if(n[r+0]!==s.x||n[r+1]!==s.y||n[r+2]!==s.z){const o=this._getBufferForType(a);o[r+0]=n[r+0]=s.x,o[r+1]=n[r+1]=s.y,o[r+2]=n[r+2]=s.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,s=e.getValue(),r=e.offset,a=e.getType();if(n[r+0]!==s.x||n[r+1]!==s.y||n[r+2]!==s.z||n[r+4]!==s.w){const o=this._getBufferForType(a);o[r+0]=n[r+0]=s.x,o[r+1]=n[r+1]=s.y,o[r+2]=n[r+2]=s.z,o[r+3]=n[r+3]=s.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,s=e.getValue(),r=e.offset;if(n[r+0]!==s.r||n[r+1]!==s.g||n[r+2]!==s.b){const a=this.buffer;a[r+0]=n[r+0]=s.r,a[r+1]=n[r+1]=s.g,a[r+2]=n[r+2]=s.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,s=e.getValue().elements,r=e.offset;if(n[r+0]!==s[0]||n[r+1]!==s[1]||n[r+2]!==s[2]||n[r+4]!==s[3]||n[r+5]!==s[4]||n[r+6]!==s[5]||n[r+8]!==s[6]||n[r+9]!==s[7]||n[r+10]!==s[8]){const a=this.buffer;a[r+0]=n[r+0]=s[0],a[r+1]=n[r+1]=s[1],a[r+2]=n[r+2]=s[2],a[r+4]=n[r+4]=s[3],a[r+5]=n[r+5]=s[4],a[r+6]=n[r+6]=s[5],a[r+8]=n[r+8]=s[6],a[r+9]=n[r+9]=s[7],a[r+10]=n[r+10]=s[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,s=e.getValue().elements,r=e.offset;return kUe(n,s,r)===!1&&(this.buffer.set(s,r),VUe(n,s,r),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function VUe(i,e,t){for(let n=0,s=e.length;n<s;n++)i[t+n]=e[n]}function kUe(i,e,t){for(let n=0,s=e.length;n<s;n++)if(i[t+n]!==e[n])return!1;return!0}let GUe=0;class Nie extends zUe{constructor(e,t){super(e),this.id=GUe++,this.groupNode=t,this.isNodeUniformsGroup=!0}}class Die extends Mie{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.generation=null,this.isSampler=!0}set texture(e){if(this._texture===e)return;const t=()=>{this._texture=null,this.generation=null,this.version=0};this._texture&&this._texture.removeEventListener("dispose",t),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",t)}get texture(){return this._texture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}clone(){const e=super.clone();return e._texture=null,e.texture=this.texture,e}}let HUe=0;class jUe extends Die{constructor(e,t){super(e,t),this.id=HUe++,this.store=!1,this.isSampledTexture=!0}}class GD extends jUe{constructor(e,t,n,s=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=s}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class Pie extends GD{constructor(e,t,n,s=null){super(e,t,n,s),this.isSampledCubeTexture=!0}}class AB extends GD{constructor(e,t,n,s=null){super(e,t,n,s),this.isSampledTexture3D=!0}}const $j={textureDimensions:"textureSize",equals:"equal",bitcast_float_int:"floatBitsToInt",bitcast_int_float:"intBitsToFloat",bitcast_uint_float:"uintBitsToFloat",bitcast_float_uint:"floatBitsToUint"},$Ue={low:"lowp",medium:"mediump",high:"highp"},Wj={swizzleAssign:!0,storageBuffer:!1},qj={perspective:"smooth",linear:"noperspective"},Xj={centroid:"centroid"},Yj=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class WUe extends gk{constructor(e,t){super(e,t,new Tie),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==kl}getMethod(e){return $j[e]||e}getBitcastMethod(e,t){return $j[`bitcast_${t}_${e}`]}getTernary(e,t,n){return`${e} ? ${t} : ${n}`}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),s=[];for(const a of t.inputs)s.push(this.getType(a.type)+" "+a.name);return`${this.getType(t.type)} ${t.name}( ${s.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,s=t.count*t.itemSize,{itemSize:r}=t,a=t.array.constructor.name.toLowerCase().includes("int");let o=a?km:qy;r===2?o=a?Xy:Of:r===3?o=a?yF:S_:r===4&&(o=a?Yy:nr);const l={Float32Array:fr,Uint8Array:Tr,Uint16Array:Xu,Uint32Array:Rs,Int8Array:xm,Int16Array:bm,Int32Array:oo,Uint8ClampedArray:Tr},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(s/r))));let d=Math.ceil(s/r/c);c*d*r<s&&d++;const h=c*d*r,m=new n.constructor(h);m.set(n,0),t.array=m;const v=new Yd(t.array,c,d,o,l[t.array.constructor.name]||fr);v.needsUpdate=!0,v.isPBOTexture=!0;const _=new Wf(v,null,null);_.setPrecision("high"),t.pboNode=_,t.pbo=_.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,s=t.value;if(this.renderer.backend.has(s)){const d=this.renderer.backend.get(s);d.pbo=s.pbo}const r=this.getUniformFromNode(s.pboNode,"texture",this.shaderStage,this.context.nodeName),a=this.getPropertyName(r);this.increaseUsage(n);const o=n.build(this,"uint"),l=this.getDataFromNode(e);let c=l.propertyName;if(c===void 0){const d=this.getVarFromNode(e);c=this.getPropertyName(d);const h=this.getDataFromNode(t);let m=h.propertySizeName;m===void 0&&(m=c+"Size",this.getVarFromNode(t,m,"uint"),this.addLineFlowCode(`${m} = uint( textureSize( ${a}, 0 ).x )`,e),h.propertySizeName=m);const{itemSize:v}=s,_="."+t0.join("").slice(0,v),x=`ivec2(${o} % ${m}, ${o} / ${m})`,T=this.generateTextureLoad(null,a,x,null,null,"0");let b="vec4";s.pbo.type===Rs?b="uvec4":s.pbo.type===oo&&(b="ivec4"),this.addLineFlowCode(`${c} = ${b}(${T})${_}`,e),l.propertyName=c}return c}generateTextureLoad(e,t,n,s,r,a="0"){let o;return s?r?o=`texelFetchOffset( ${t}, ivec3( ${n}, ${s} ), ${a}, ${r} )`:o=`texelFetch( ${t}, ivec3( ${n}, ${s} ), ${a} )`:r?o=`texelFetchOffset( ${t}, ${n}, ${a}, ${r} )`:o=`texelFetch( ${t}, ${n}, ${a} )`,e!==null&&e.isDepthTexture&&(o+=".x"),o}generateTexture(e,t,n,s,r){return s&&(n=`vec3( ${n}, ${s} )`),e.isDepthTexture?r?`textureOffset( ${t}, ${n}, ${r} ).x`:`texture( ${t}, ${n} ).x`:r?`textureOffset( ${t}, ${n}, ${r} )`:`texture( ${t}, ${n} )`}generateTextureLevel(e,t,n,s,r){return r?`textureLodOffset( ${t}, ${n}, ${s}, ${r} )`:`textureLod( ${t}, ${n}, ${s} )`}generateTextureBias(e,t,n,s,r){return r?`textureOffset( ${t}, ${n}, ${r}, ${s} )`:`texture( ${t}, ${n}, ${s} )`}generateTextureGrad(e,t,n,s,r){return r?`textureGradOffset( ${t}, ${n}, ${s[0]}, ${s[1]}, ${r} )`:`textureGrad( ${t}, ${n}, ${s[0]}, ${s[1]} )`}generateTextureCompare(e,t,n,s,r,a,o=this.shaderStage){if(o==="fragment")return r?a?`textureOffset( ${t}, vec4( ${n}, ${r}, ${s} ), ${a} )`:`texture( ${t}, vec4( ${n}, ${r}, ${s} ) )`:a?`textureOffset( ${t}, vec3( ${n}, ${s} ), ${a} )`:`texture( ${t}, vec3( ${n}, ${s} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const s of n)t.push(`${this.getVar(s.type,s.name,s.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],s={};for(const a of t){let o=null,l=!1;if(a.type==="texture"||a.type==="texture3D"){const d=a.node.value;let h="";(d.isDataTexture===!0||d.isData3DTexture===!0)&&(d.type===Rs?h="u":d.type===oo&&(h="i")),a.type==="texture3D"&&d.isArrayTexture===!1?o=`${h}sampler3D ${a.name};`:d.compareFunction?d.isArrayTexture===!0?o=`sampler2DArrayShadow ${a.name};`:o=`sampler2DShadow ${a.name};`:d.isArrayTexture===!0||d.isDataArrayTexture===!0||d.isCompressedArrayTexture===!0?o=`${h}sampler2DArray ${a.name};`:o=`${h}sampler2D ${a.name};`}else if(a.type==="cubeTexture")o=`samplerCube ${a.name};`;else if(a.type==="buffer"){const d=a.node,h=this.getType(d.bufferType),m=d.bufferCount,v=m>0?m:"";o=`${d.name} {
	${h} ${a.name}[${v}];
};
`}else o=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,l=!0;const c=a.node.precision;if(c!==null&&(o=$Ue[c]+" "+o),l){o="	"+o;const d=a.groupNode.name;(s[d]||(s[d]=[])).push(o)}else o="uniform "+o,n.push(o)}let r="";for(const a in s){const o=s[a];r+=this._getGLSLUniformStruct(e+"_"+a,o.join(`
`))+`
`}return r+=n.join(`
`),r}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==oo){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const s=n.array;s instanceof Uint32Array||s instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let s=0;for(const r of n)t+=`layout( location = ${s++} ) in ${r.type} ${r.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],s=[];for(const r of n)if(r.output)for(const a of r.members)s.push(`layout( location = ${a.index} ) out ${a.type} ${a.name};`);else{let a="struct "+r.name+` {
`;a+=this.getStructMembers(r),a+=`
};
`,t.push(a)}return s.length===0&&s.push("layout( location = 0 ) out vec4 fragColor;"),`
`+s.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const s of n){e==="compute"&&(s.needsInterpolation=!0);const r=this.getType(s.type);if(s.needsInterpolation)if(s.interpolationType){const a=qj[s.interpolationType]||s.interpolationType,o=Xj[s.interpolationSampling]||"";t+=`${a} ${o} out ${r} ${s.name};
`}else{const a=r.includes("int")||r.includes("uv")||r.includes("iv")?"flat ":"";t+=`${a}out ${r} ${s.name};
`}else t+=`${r} ${s.name};
`}else if(e==="fragment"){for(const s of n)if(s.needsInterpolation){const r=this.getType(s.type);if(s.interpolationType){const a=qj[s.interpolationType]||s.interpolationType,o=Xj[s.interpolationSampling]||"";t+=`${a} ${o} in ${r} ${s.name};
`}else{const a=r.includes("int")||r.includes("uv")||r.includes("iv")?"flat ":"";t+=`${a}in ${r} ${s.name};
`}}}for(const s of this.builtins[e])t+=`${s};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,s)=>n*s,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const s=this.extensions[n]||(this.extensions[n]=new Map);s.has(e)===!1&&s.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const s=this.renderer.backend.extensions;this.object.isBatchedMesh&&s.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:s,behavior:r}of n.values())t.push(`#extension ${s} : ${r}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=Wj[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const s=this.renderer.backend.extensions;s.has(n)&&(s.get(n),t=!0)}Wj[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const s=e[n],r=this.getPropertyName(s.attributeNode);r&&(t+=`${s.varyingName} = ${r};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${Yj}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${Yj}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const s=this.flowNodes[t],r=s[s.length-1];for(const o of s){const l=this.getFlowData(o),c=o.name;c&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${c}
	`),n+=`${l.code}
	`,o===r&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${l.result};`):t==="fragment"&&(o.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${l.result};`)))}const a=e[t];a.extensions=this.getExtensions(t),a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.vars=this.getVars(t),a.structs=this.getStructs(t),a.codes=this.getCodes(t),a.transforms=this.getTransforms(t),a.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,s=null){const r=super.getUniformFromNode(e,t,n,s),a=this.getDataFromNode(e,n,this.globalCache);let o=a.uniformGPU;if(o===void 0){const l=e.groupNode,c=l.name,d=this.getBindGroupArray(c,n);if(t==="texture")o=new GD(r.name,r.node,l),d.push(o);else if(t==="cubeTexture")o=new Pie(r.name,r.node,l),d.push(o);else if(t==="texture3D")o=new AB(r.name,r.node,l),d.push(o);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,r.name=`buffer${e.id}`;const h=new Rie(e,l);h.name=e.name,d.push(h),o=h}else{const h=this.uniformGroups[n]||(this.uniformGroups[n]={});let m=h[c];m===void 0&&(m=new Nie(n+"_"+c,l),h[c]=m,d.push(m)),o=this.getNodeUniform(r,t),m.addUniform(o)}a.uniformGPU=o}return r}}let hU=null,tb=null;class Oie{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}getTimestampUID(e){const t=this.get(e);let n=e.isComputeNode===!0?"c":"r";return n+=":"+t.frameCalls+":"+e.id,n}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){Xl("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){Xl(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return hU=hU||new lt,this.renderer.getDrawingBufferSize(hU)}setScissorTest(){}getClearColor(){const e=this.renderer;return tb=tb||new KV,e.getClearColor(tb),tb.getRGB(tb),tb}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:w2(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${x_} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let qUe=0;class XUe{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class YUe{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:s}=n,r=e.array,a=e.usage||s.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,l=n.get(o);let c=l.bufferGPU;c===void 0&&(c=this._createBuffer(s,t,r,a),l.bufferGPU=c,l.bufferType=t,l.version=o.version);let d;if(r instanceof Float32Array)d=s.FLOAT;else if(typeof Float16Array<"u"&&r instanceof Float16Array)d=s.HALF_FLOAT;else if(r instanceof Uint16Array)e.isFloat16BufferAttribute?d=s.HALF_FLOAT:d=s.UNSIGNED_SHORT;else if(r instanceof Int16Array)d=s.SHORT;else if(r instanceof Uint32Array)d=s.UNSIGNED_INT;else if(r instanceof Int32Array)d=s.INT;else if(r instanceof Int8Array)d=s.BYTE;else if(r instanceof Uint8Array)d=s.UNSIGNED_BYTE;else if(r instanceof Uint8ClampedArray)d=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+r);let h={bufferGPU:c,bufferType:t,type:d,byteLength:r.byteLength,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:d===s.INT||d===s.UNSIGNED_INT||e.gpuType===oo,id:qUe++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const m=this._createBuffer(s,t,r,a);h=new XUe(h,m)}n.set(e,h)}updateAttribute(e){const t=this.backend,{gl:n}=t,s=e.array,r=e.isInterleavedBufferAttribute?e.data:e,a=t.get(r),o=a.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(o,a.bufferGPU),l.length===0)n.bufferSubData(o,0,s);else{for(let c=0,d=l.length;c<d;c++){const h=l[c];n.bufferSubData(o,h.start*s.BYTES_PER_ELEMENT,s,h.start,h.count)}r.clearUpdateRanges()}n.bindBuffer(o,null),a.version=r.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const s=t.get(e);n.deleteBuffer(s.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,s=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:r}=t.get(s),a=e.array,o=a.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,r);const l=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.bufferData(n.COPY_WRITE_BUFFER,o,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,o),await t.utils._clientWaitAsync();const c=new e.array.constructor(a.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,c),n.deleteBuffer(l),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,t,n,s){const r=e.createBuffer();return e.bindBuffer(t,r),e.bufferData(t,n,s),e.bindBuffer(t,null),r}}let pU,b1;class KUe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;pU={[Ho]:e.FUNC_ADD,[mw]:e.FUNC_SUBTRACT,[gw]:e.FUNC_REVERSE_SUBTRACT},b1={[Nf]:e.ZERO,[yw]:e.ONE,[vw]:e.SRC_COLOR,[qv]:e.SRC_ALPHA,[Ew]:e.SRC_ALPHA_SATURATE,[Sw]:e.DST_COLOR,[xw]:e.DST_ALPHA,[_w]:e.ONE_MINUS_SRC_COLOR,[Xv]:e.ONE_MINUS_SRC_ALPHA,[Tw]:e.ONE_MINUS_DST_COLOR,[bw]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new bn().fromArray(t),this.currentViewport=new bn().fromArray(n),this._tempVec4=new bn}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==d2?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===ME?t.cullFace(t.BACK):e===f2?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,s,r,a,o,l){const{gl:c}=this;if(e===ql){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==ry){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Ho||this.currentBlendEquationAlpha!==Ho)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Ho,this.currentBlendEquationAlpha=Ho),l)switch(e){case Dc:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case my:c.blendFunc(c.ONE,c.ONE);break;case gy:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case yy:c.blendFuncSeparate(c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA,c.ZERO,c.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case Dc:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case my:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE,c.ONE,c.ONE);break;case gy:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case yy:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}r=r||t,a=a||n,o=o||s,(t!==this.currentBlendEquation||r!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(pU[t],pU[r]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=r),(n!==this.currentBlendSrc||s!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||o!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(b1[n],b1[s],b1[a],b1[o]),this.currentBlendSrc=n,this.currentBlendDst=s,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case Yv:t.depthFunc(t.NEVER);break;case Kv:t.depthFunc(t.ALWAYS);break;case Zv:t.depthFunc(t.LESS);break;case op:t.depthFunc(t.LEQUAL);break;case Qv:t.depthFunc(t.EQUAL);break;case Jv:t.depthFunc(t.GEQUAL);break;case e_:t.depthFunc(t.GREATER);break;case t_:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,s){const r=this._tempVec4.set(e,t,n,s);if(this.currentScissor.equals(r)===!1){const{gl:a}=this;a.scissor(r.x,r.y,r.z,r.w),this.currentScissor.copy(r)}}viewport(e,t,n,s){const r=this._tempVec4.set(e,t,n,s);if(this.currentViewport.equals(r)===!1){const{gl:a}=this;a.viewport(r.x,r.y,r.z,r.w),this.currentViewport.copy(r)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:s}=this;e.side===Go?this.disable(s.CULL_FACE):this.enable(s.CULL_FACE);let r=e.side===Ts;t&&(r=!r),this.setFlipSided(r),e.blending===Dc&&e.transparent===!1?this.setBlending(ql):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(s.SAMPLE_ALPHA_TO_COVERAGE):this.disable(s.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let l=0;l<8;l++)l<n?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,t,n){const{gl:s}=this;e?(this.enable(s.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(s.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(s.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const n=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(n.bindVertexArray(e),t!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:s}=this;return s[e]!==t?(n.bindFramebuffer(e,t),s[e]=t,e===n.DRAW_FRAMEBUFFER&&(s[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(s[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let s=[],r=!1;if(e.textures!==null){s=this.currentDrawbuffers.get(t),s===void 0&&(s=[],this.currentDrawbuffers.set(t,s));const a=e.textures;if(s.length!==a.length||s[0]!==n.COLOR_ATTACHMENT0){for(let o=0,l=a.length;o<l;o++)s[o]=n.COLOR_ATTACHMENT0+o;s.length=a.length,r=!0}}else s[0]!==n.BACK&&(s[0]=n.BACK,r=!0);r&&n.drawBuffers(s)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:s}=this;e===void 0&&(e=t.TEXTURE0+s-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:s,currentTextureSlot:r,currentBoundTextures:a,maxTextures:o}=this;n===void 0&&(r===null?n=s.TEXTURE0+o-1:n=r);let l=a[n];l===void 0&&(l={type:void 0,texture:void 0},a[n]=l),(l.type!==e||l.texture!==t)&&(r!==n&&(s.activeTexture(n),this.currentTextureSlot=n),s.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,n){const{gl:s}=this,r=`${e}-${t}`;return this.currentBoundBufferBases[r]!==n?(s.bindBufferBase(e,t,n),this.currentBoundBufferBases[r]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,s=n[t];s!==void 0&&s.type!==void 0&&(e.bindTexture(s.type,null),s.type=void 0,s.texture=void 0)}}class ZUe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=kl){const{gl:n,extensions:s}=this;let r;const a=Sn.getTransfer(t);if(e===Tr)return n.UNSIGNED_BYTE;if(e===ES)return n.UNSIGNED_SHORT_4_4_4_4;if(e===wS)return n.UNSIGNED_SHORT_5_5_5_1;if(e===MS)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===AS)return n.UNSIGNED_INT_10F_11F_11F_REV;if(e===xm)return n.BYTE;if(e===bm)return n.SHORT;if(e===Xu)return n.UNSIGNED_SHORT;if(e===oo)return n.INT;if(e===Rs)return n.UNSIGNED_INT;if(e===fr)return n.FLOAT;if(e===$a)return n.HALF_FLOAT;if(e===Mw)return n.ALPHA;if(e===S_)return n.RGB;if(e===nr)return n.RGBA;if(e===Oc)return n.DEPTH_COMPONENT;if(e===Lc)return n.DEPTH_STENCIL;if(e===qy)return n.RED;if(e===km)return n.RED_INTEGER;if(e===Of)return n.RG;if(e===Xy)return n.RG_INTEGER;if(e===Yy)return n.RGBA_INTEGER;if(e===Wh||e===qh||e===Xh||e===Yh)if(a===Kt)if(r=s.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(e===Wh)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===qh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Xh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Yh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=s.get("WEBGL_compressed_texture_s3tc"),r!==null){if(e===Wh)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===qh)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Xh)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Yh)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===n_||e===i_||e===s_||e===r_)if(r=s.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(e===n_)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===i_)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===s_)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===r_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===vy||e===_y||e===xy)if(r=s.get("WEBGL_compressed_texture_etc"),r!==null){if(e===vy||e===_y)return a===Kt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(e===xy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===by||e===Sy||e===Ty||e===Ey||e===wy||e===My||e===Ay||e===Cy||e===Ry||e===Ny||e===Dy||e===Py||e===Oy||e===Ly)if(r=s.get("WEBGL_compressed_texture_astc"),r!==null){if(e===by)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===Sy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Ty)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Ey)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===wy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===My)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===Ay)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Cy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===Ry)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Ny)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Dy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Py)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Oy)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Ly)return a===Kt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===Uy)if(r=s.get("EXT_texture_compression_bptc"),r!==null){if(e===Uy)return a===Kt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===By||e===Iy||e===Fy||e===zy)if(r=s.get("EXT_texture_compression_rgtc"),r!==null){if(e===By)return r.COMPRESSED_RED_RGTC1_EXT;if(e===Iy)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===Fy)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===zy)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Pc?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,s)=>{function r(){const a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(t),s();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(r);return}e.deleteSync(t),n()}r()})}}let Kj=!1,aR,mU,Zj;class QUe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},Kj===!1&&(this._init(),Kj=!0)}_init(){const e=this.gl;aR={[cp]:e.REPEAT,[vl]:e.CLAMP_TO_EDGE,[up]:e.MIRRORED_REPEAT},mU={[Fs]:e.NEAREST,[TS]:e.NEAREST_MIPMAP_NEAREST,[jd]:e.NEAREST_MIPMAP_LINEAR,[Zi]:e.LINEAR,[_m]:e.LINEAR_MIPMAP_NEAREST,[jo]:e.LINEAR_MIPMAP_LINEAR},Zj={[Cw]:e.NEVER,[Ow]:e.ALWAYS,[CS]:e.LESS,[RS]:e.LEQUAL,[Rw]:e.EQUAL,[Pw]:e.GEQUAL,[Nw]:e.GREATER,[Dw]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,s,r=!1){const{gl:a,extensions:o}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;if(t===a.RED&&(n===a.FLOAT&&(l=a.R32F),n===a.HALF_FLOAT&&(l=a.R16F),n===a.UNSIGNED_BYTE&&(l=a.R8),n===a.UNSIGNED_SHORT&&(l=a.R16),n===a.UNSIGNED_INT&&(l=a.R32UI),n===a.BYTE&&(l=a.R8I),n===a.SHORT&&(l=a.R16I),n===a.INT&&(l=a.R32I)),t===a.RED_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.R8UI),n===a.UNSIGNED_SHORT&&(l=a.R16UI),n===a.UNSIGNED_INT&&(l=a.R32UI),n===a.BYTE&&(l=a.R8I),n===a.SHORT&&(l=a.R16I),n===a.INT&&(l=a.R32I)),t===a.RG&&(n===a.FLOAT&&(l=a.RG32F),n===a.HALF_FLOAT&&(l=a.RG16F),n===a.UNSIGNED_BYTE&&(l=a.RG8),n===a.UNSIGNED_SHORT&&(l=a.RG16),n===a.UNSIGNED_INT&&(l=a.RG32UI),n===a.BYTE&&(l=a.RG8I),n===a.SHORT&&(l=a.RG16I),n===a.INT&&(l=a.RG32I)),t===a.RG_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RG8UI),n===a.UNSIGNED_SHORT&&(l=a.RG16UI),n===a.UNSIGNED_INT&&(l=a.RG32UI),n===a.BYTE&&(l=a.RG8I),n===a.SHORT&&(l=a.RG16I),n===a.INT&&(l=a.RG32I)),t===a.RGB){const c=r?Vy:Sn.getTransfer(s);n===a.FLOAT&&(l=a.RGB32F),n===a.HALF_FLOAT&&(l=a.RGB16F),n===a.UNSIGNED_BYTE&&(l=a.RGB8),n===a.UNSIGNED_SHORT&&(l=a.RGB16),n===a.UNSIGNED_INT&&(l=a.RGB32UI),n===a.BYTE&&(l=a.RGB8I),n===a.SHORT&&(l=a.RGB16I),n===a.INT&&(l=a.RGB32I),n===a.UNSIGNED_BYTE&&(l=c===Kt?a.SRGB8:a.RGB8),n===a.UNSIGNED_SHORT_5_6_5&&(l=a.RGB565),n===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1),n===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGB4),n===a.UNSIGNED_INT_5_9_9_9_REV&&(l=a.RGB9_E5),n===a.UNSIGNED_INT_10F_11F_11F_REV&&(l=a.R11F_G11F_B10F)}if(t===a.RGB_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RGB8UI),n===a.UNSIGNED_SHORT&&(l=a.RGB16UI),n===a.UNSIGNED_INT&&(l=a.RGB32UI),n===a.BYTE&&(l=a.RGB8I),n===a.SHORT&&(l=a.RGB16I),n===a.INT&&(l=a.RGB32I)),t===a.RGBA){const c=r?Vy:Sn.getTransfer(s);n===a.FLOAT&&(l=a.RGBA32F),n===a.HALF_FLOAT&&(l=a.RGBA16F),n===a.UNSIGNED_BYTE&&(l=a.RGBA8),n===a.UNSIGNED_SHORT&&(l=a.RGBA16),n===a.UNSIGNED_INT&&(l=a.RGBA32UI),n===a.BYTE&&(l=a.RGBA8I),n===a.SHORT&&(l=a.RGBA16I),n===a.INT&&(l=a.RGBA32I),n===a.UNSIGNED_BYTE&&(l=c===Kt?a.SRGB8_ALPHA8:a.RGBA8),n===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGBA4),n===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1)}return t===a.RGBA_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RGBA8UI),n===a.UNSIGNED_SHORT&&(l=a.RGBA16UI),n===a.UNSIGNED_INT&&(l=a.RGBA32UI),n===a.BYTE&&(l=a.RGBA8I),n===a.SHORT&&(l=a.RGBA16I),n===a.INT&&(l=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(n===a.UNSIGNED_SHORT&&(l=a.DEPTH_COMPONENT16),n===a.UNSIGNED_INT&&(l=a.DEPTH_COMPONENT24),n===a.FLOAT&&(l=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&n===a.UNSIGNED_INT_24_8&&(l=a.DEPTH24_STENCIL8),(l===a.R16F||l===a.R32F||l===a.RG16F||l===a.RG32F||l===a.RGBA16F||l===a.RGBA32F)&&o.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:n,extensions:s,backend:r}=this,a=Sn.getPrimaries(Sn.workingColorSpace),o=t.colorSpace===kl?null:Sn.getPrimaries(t.colorSpace),l=t.colorSpace===kl||a===o?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,l),n.texParameteri(e,n.TEXTURE_WRAP_S,aR[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,aR[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&(t.isArrayTexture||n.texParameteri(e,n.TEXTURE_WRAP_R,aR[t.wrapR])),n.texParameteri(e,n.TEXTURE_MAG_FILTER,mU[t.magFilter]);const c=t.mipmaps!==void 0&&t.mipmaps.length>0,d=t.minFilter===Zi&&c?jo:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,mU[d]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,Zj[t.compareFunction])),s.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Fs||t.minFilter!==jd&&t.minFilter!==jo||t.type===fr&&s.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const h=s.get("EXT_texture_filter_anisotropic");n.texParameterf(e,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,r.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:s}=this,r=this.getGLTextureType(e);let a=s[r];a===void 0&&(a=t.createTexture(),n.state.bindTexture(r,a),t.texParameteri(r,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(r,t.TEXTURE_MAG_FILTER,t.NEAREST),s[r]=a),n.set(e,{textureGPU:a,glTextureType:r,isDefault:!0})}createTexture(e,t){const{gl:n,backend:s}=this,{levels:r,width:a,height:o,depth:l}=t,c=s.utils.convert(e.format,e.colorSpace),d=s.utils.convert(e.type),h=this.getInternalFormat(e.internalFormat,c,d,e.colorSpace,e.isVideoTexture),m=n.createTexture(),v=this.getGLTextureType(e);s.state.bindTexture(v,m),this.setTextureParameters(v,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,r,h,a,o,l):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,r,h,a,o,l):e.isVideoTexture||n.texStorage2D(v,r,h,a,o),s.set(e,{textureGPU:m,glTextureType:v,glFormat:c,glType:d,glInternalFormat:h})}copyBufferToTexture(e,t){const{gl:n,backend:s}=this,{textureGPU:r,glTextureType:a,glFormat:o,glType:l}=s.get(t),{width:c,height:d}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),s.state.bindTexture(a,r),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(a,0,0,0,c,d,o,l,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),s.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:s,height:r}=t,{textureGPU:a,glTextureType:o,glFormat:l,glType:c,glInternalFormat:d}=this.backend.get(e);if(!(e.isRenderTargetTexture||a===void 0))if(this.backend.state.bindTexture(o,a),this.setTextureParameters(o,e),e.isCompressedTexture){const h=e.mipmaps,m=t.image;for(let v=0;v<h.length;v++){const _=h[v];e.isCompressedArrayTexture?e.format!==n.RGBA?l!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,v,0,0,0,_.width,_.height,m.depth,l,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,v,0,0,0,_.width,_.height,m.depth,l,c,_.data):l!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,v,0,0,_.width,_.height,l,_.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=t.images,m=e.mipmaps;for(let v=0;v<6;v++){const _=oR(h[v]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,0,0,s,r,l,c,_);for(let x=0;x<m.length;x++){const T=m[x],b=oR(T.images[v]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+v,x+1,0,0,b.width,b.height,l,c,b)}}}else if(e.isDataArrayTexture||e.isArrayTexture){const h=t.image;if(e.layerUpdates.size>0){const m=xN(h.width,h.height,e.format,e.type);for(const v of e.layerUpdates){const _=h.data.subarray(v*m/h.data.BYTES_PER_ELEMENT,(v+1)*m/h.data.BYTES_PER_ELEMENT);n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,v,h.width,h.height,1,l,c,_)}e.clearLayerUpdates()}else n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,l,c,h.data)}else if(e.isData3DTexture){const h=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,l,c,h.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(o,0,d,l,c,t.image);else{const h=e.mipmaps;if(h.length>0)for(let m=0,v=h.length;m<v;m++){const _=h[m],x=oR(_);n.texSubImage2D(o,m,0,0,_.width,_.height,l,c,x)}else{const m=oR(t.image);n.texSubImage2D(o,0,0,0,s,r,l,c,m)}}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:s,glTextureType:r}=n.get(e);n.state.bindTexture(r,s),t.generateMipmap(r)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const s=n.get(e);if(s.renderBufferStorageSetup=void 0,s.framebuffers){for(const r in s.framebuffers)t.deleteFramebuffer(s.framebuffers[r]);delete s.framebuffers}if(s.depthRenderbuffer&&(t.deleteRenderbuffer(s.depthRenderbuffer),delete s.depthRenderbuffer),s.stencilRenderbuffer&&(t.deleteRenderbuffer(s.stencilRenderbuffer),delete s.stencilRenderbuffer),s.msaaFrameBuffer&&(t.deleteFramebuffer(s.msaaFrameBuffer),delete s.msaaFrameBuffer),s.msaaRenderbuffers){for(let r=0;r<s.msaaRenderbuffers.length;r++)t.deleteRenderbuffer(s.msaaRenderbuffers[r]);delete s.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:s,renderTarget:r}=n.get(e);this.deallocateRenderBuffers(r),t.deleteTexture(s),n.delete(e)}copyTextureToTexture(e,t,n=null,s=null,r=0,a=0){const{gl:o,backend:l}=this,{state:c}=this.backend,{textureGPU:d,glTextureType:h,glType:m,glFormat:v}=l.get(t);c.bindTexture(h,d);let _,x,T,b,w,M,R,N,D;const L=e.isCompressedTexture?e.mipmaps[a]:e.image;if(n!==null)_=n.max.x-n.min.x,x=n.max.y-n.min.y,T=n.isBox3?n.max.z-n.min.z:1,b=n.min.x,w=n.min.y,M=n.isBox3?n.min.z:0;else{const se=Math.pow(2,-r);_=Math.floor(L.width*se),x=Math.floor(L.height*se),e.isDataArrayTexture||e.isArrayTexture?T=L.depth:e.isData3DTexture?T=Math.floor(L.depth*se):T=1,b=0,w=0,M=0}s!==null?(R=s.x,N=s.y,D=s.z):(R=0,N=0,D=0),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const F=o.getParameter(o.UNPACK_ROW_LENGTH),I=o.getParameter(o.UNPACK_IMAGE_HEIGHT),z=o.getParameter(o.UNPACK_SKIP_PIXELS),H=o.getParameter(o.UNPACK_SKIP_ROWS),Y=o.getParameter(o.UNPACK_SKIP_IMAGES);o.pixelStorei(o.UNPACK_ROW_LENGTH,L.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,L.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,b),o.pixelStorei(o.UNPACK_SKIP_ROWS,w),o.pixelStorei(o.UNPACK_SKIP_IMAGES,M);const Z=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const se=l.get(e),oe=l.get(t),G=l.get(se.renderTarget),K=l.get(oe.renderTarget),$=G.framebuffers[se.cacheKey],ce=K.framebuffers[oe.cacheKey];c.bindFramebuffer(o.READ_FRAMEBUFFER,$),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,ce);let q=o.COLOR_BUFFER_BIT;e.isDepthTexture&&(q=o.DEPTH_BUFFER_BIT),o.blitFramebuffer(b,w,_,x,R,N,_,x,q,o.NEAREST),c.bindFramebuffer(o.READ_FRAMEBUFFER,null),c.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else Z?e.isDataTexture||e.isData3DTexture?o.texSubImage3D(h,a,R,N,D,_,x,T,v,m,L.data):t.isCompressedArrayTexture?o.compressedTexSubImage3D(h,a,R,N,D,_,x,T,v,L.data):o.texSubImage3D(h,a,R,N,D,_,x,T,v,m,L):e.isDataTexture?o.texSubImage2D(h,a,R,N,_,x,v,m,L.data):e.isCompressedTexture?o.compressedTexSubImage2D(h,a,R,N,L.width,L.height,v,L.data):o.texSubImage2D(h,a,R,N,_,x,v,m,L);o.pixelStorei(o.UNPACK_ROW_LENGTH,F),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,I),o.pixelStorei(o.UNPACK_SKIP_PIXELS,z),o.pixelStorei(o.UNPACK_SKIP_ROWS,H),o.pixelStorei(o.UNPACK_SKIP_IMAGES,Y),a===0&&t.generateMipmaps&&o.generateMipmap(h),c.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:s}=this,{state:r}=this.backend,{textureGPU:a}=this.backend.get(e),{x:o,y:l,z:c,w:d}=n,h=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,m=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(h){const v=o!==0||l!==0;let _,x;if(e.isDepthTexture===!0?(_=s.DEPTH_BUFFER_BIT,x=s.DEPTH_ATTACHMENT,t.stencil&&(_|=s.STENCIL_BUFFER_BIT)):(_=s.COLOR_BUFFER_BIT,x=s.COLOR_ATTACHMENT0),v){const T=this.backend.get(t.renderTarget),b=T.framebuffers[t.getCacheKey()],w=T.msaaFrameBuffer;r.bindFramebuffer(s.DRAW_FRAMEBUFFER,b),r.bindFramebuffer(s.READ_FRAMEBUFFER,w);const M=m-l-d;s.blitFramebuffer(o,M,o+c,M+d,o,M,o+c,M+d,_,s.NEAREST),r.bindFramebuffer(s.READ_FRAMEBUFFER,b),r.bindTexture(s.TEXTURE_2D,a),s.copyTexSubImage2D(s.TEXTURE_2D,0,0,0,o,M,c,d),r.unbindTexture()}else{const T=s.createFramebuffer();r.bindFramebuffer(s.DRAW_FRAMEBUFFER,T),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,x,s.TEXTURE_2D,a,0),s.blitFramebuffer(0,0,c,d,0,0,c,d,_,s.NEAREST),s.deleteFramebuffer(T)}}else r.bindTexture(s.TEXTURE_2D,a),s.copyTexSubImage2D(s.TEXTURE_2D,0,0,0,o,m-d-l,c,d),r.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,s=!1){const{gl:r}=this,a=t.renderTarget,{depthTexture:o,depthBuffer:l,stencilBuffer:c,width:d,height:h}=a;if(r.bindRenderbuffer(r.RENDERBUFFER,e),l&&!c){let m=r.DEPTH_COMPONENT24;s===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(r.RENDERBUFFER,a.samples,m,d,h):n>0?(o&&o.isDepthTexture&&o.type===r.FLOAT&&(m=r.DEPTH_COMPONENT32F),r.renderbufferStorageMultisample(r.RENDERBUFFER,n,m,d,h)):r.renderbufferStorage(r.RENDERBUFFER,m,d,h),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e)}else l&&c&&(n>0?r.renderbufferStorageMultisample(r.RENDERBUFFER,n,r.DEPTH24_STENCIL8,d,h):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,d,h),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e));r.bindRenderbuffer(r.RENDERBUFFER,null)}async copyTextureToBuffer(e,t,n,s,r,a){const{backend:o,gl:l}=this,{textureGPU:c,glFormat:d,glType:h}=this.backend.get(e),m=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,m);const v=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+a:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,v,c,0);const _=this._getTypedArrayType(h),x=this._getBytesPerTexel(h,d),b=s*r*x,w=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,w),l.bufferData(l.PIXEL_PACK_BUFFER,b,l.STREAM_READ),l.readPixels(t,n,s,r,d,h,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await o.utils._clientWaitAsync();const M=new _(b/_.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,w),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,M),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(m),M}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let s=0;if(e===n.UNSIGNED_BYTE&&(s=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(s=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(s=4),t===n.RGBA)return s*4;if(t===n.RGB)return s*3;if(t===n.ALPHA)return s}}function oR(i){return i.isDataTexture?i.image.data:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?i:i.data}class JUe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class e3e{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const Qj={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class t3e{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:s,object:r,type:a,info:o,index:l}=this;l!==0?n.drawElements(s,t,a,e):n.drawArrays(s,e,t),o.update(r,t,1)}renderInstances(e,t,n){const{gl:s,mode:r,type:a,index:o,object:l,info:c}=this;n!==0&&(o!==0?s.drawElementsInstanced(r,t,a,e,n):s.drawArraysInstanced(r,e,t,n),c.update(l,t,n))}renderMultiDraw(e,t,n){const{extensions:s,mode:r,object:a,info:o}=this;if(n===0)return;const l=s.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<n;c++)this.render(e[c],t[c]);else{this.index!==0?l.multiDrawElementsWEBGL(r,t,0,this.type,e,0,n):l.multiDrawArraysWEBGL(r,e,0,t,0,n);let c=0;for(let d=0;d<n;d++)c+=t[d];o.update(a,c,1)}}renderMultiDrawInstances(e,t,n,s){const{extensions:r,mode:a,object:o,info:l}=this;if(n===0)return;const c=r.get("WEBGL_multi_draw");if(c===null)for(let d=0;d<n;d++)this.renderInstances(e[d],t[d],s[d]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,s,0,n):c.multiDrawArraysInstancedWEBGL(a,e,0,t,0,s,0,n);let d=0;for(let h=0;h<n;h++)d+=t[h]*s[h];l.update(o,d,1)}}}class Lie{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class n3e extends Lie{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let s=0;s<this.maxQueries;s++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return Xl(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(s){console.error("Error in beginQuery:",s),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[s,r]of this.queryStates)if(r==="ended"){const a=this.queries[s];e.push(this.resolveQuery(a))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((s,r)=>s+r,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,s=!1;const r=()=>{n&&(clearTimeout(n),n=null)},a=l=>{s||(s=!0,r(),t(l))},o=()=>{if(this.isDisposed){a(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){a(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(o,1);return}const d=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(d)/1e6)}catch(l){console.error("Error checking query:",l),t(this.lastValue)}};o()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class Jj extends Oie{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},s=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function r(a){a.preventDefault();const o={api:"WebGL",message:a.statusMessage||"Unknown reason",reason:null,originalEvent:a};e.onDeviceLost(o)}this._onContextLost=r,e.domElement.addEventListener("webglcontextlost",r,!1),this.gl=s,this.extensions=new JUe(this),this.capabilities=new e3e(this),this.attributeUtils=new YUe(this),this.textureUtils=new QUe(this),this.bufferRenderer=new t3e(this),this.state=new KUe(this),this.utils=new ZUe(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return $o}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,n=null){const s=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:s.RGBA8}),n!==null){const r=e.stencilBuffer?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:r}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer===!0&&e.multiview===!1&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new n3e(this.gl,e,2048));const n=this.timestampQueryPool[e];n.allocateQueriesForContext(t)!==null&&n.beginQuery(t)}prepareTimestampBuffer(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e].endQuery(t)}getContext(){return this.gl}beginRender(e){const{state:t}=this,n=this.get(e);if(n.frameCalls=this.renderer.info.render.frameCalls,e.viewport)this.updateViewport(e);else{const{width:r,height:a}=this.getDrawingBufferSize();t.viewport(0,0,r,a)}if(e.scissor){const{x:r,y:a,width:o,height:l}=e.scissorValue;t.scissor(r,e.height-l-a,o,l)}this.initTimestampQuery(Jg.RENDER,this.getTimestampUID(e)),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const s=e.occlusionQueryCount;s>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(s),n.occlusionQueryObjects=new Array(s),n.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,s=this.get(e),r=s.previousContext;n.resetVertexState();const a=e.occlusionQueryCount;a>0&&(a>s.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const o=e.textures;if(o!==null)for(let l=0;l<o.length;l++){const c=o[l];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=r,this._resolveRenderTarget(e),r!==null)if(this._setFramebuffer(r),r.viewport)this.updateViewport(r);else{const{width:l,height:c}=this.getDrawingBufferSize();n.viewport(0,0,l,c)}this.prepareTimestampBuffer(Jg.RENDER,this.getTimestampUID(e))}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:s}=t;if(n&&s){const r=new WeakSet,{gl:a}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const o=()=>{let l=0;for(let c=0;c<n.length;c++){const d=n[c];d!==null&&a.getQueryParameter(d,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(d,a.QUERY_RESULT)===0&&r.add(s[c]),n[c]=null,a.deleteQuery(d),l++)}l<n.length?requestAnimationFrame(o):t.occluded=r};o()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:s,width:r,height:a}=e.viewportValue;t.viewport(n,e.height-a-s,r,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,n,s=null,r=!0,a=!0){const{gl:o,renderer:l}=this;s===null&&(s={textures:null,clearColorValue:this.getClearColor()});let c=0;if(e&&(c|=o.COLOR_BUFFER_BIT),t&&(c|=o.DEPTH_BUFFER_BIT),n&&(c|=o.STENCIL_BUFFER_BIT),c!==0){let d;s.clearColorValue?d=s.clearColorValue:d=this.getClearColor();const h=l.getClearDepth(),m=l.getClearStencil();if(t&&this.state.setDepthMask(!0),s.textures===null)o.clearColor(d.r,d.g,d.b,d.a),o.clear(c);else{if(r&&this._setFramebuffer(s),e)for(let v=0;v<s.textures.length;v++)v===0?o.clearBufferfv(o.COLOR,v,[d.r,d.g,d.b,d.a]):o.clearBufferfv(o.COLOR,v,[0,0,0,1]);t&&n?o.clearBufferfi(o.DEPTH_STENCIL,0,h,m):t?o.clearBufferfv(o.DEPTH,0,[h]):n&&o.clearBufferiv(o.STENCIL,0,[m]),r&&a&&this._resolveRenderTarget(s)}}}beginCompute(e){const{state:t,gl:n}=this,s=this.get(e);s.frameCalls=this.renderer.info.compute.frameCalls,t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(Jg.COMPUTE,this.getTimestampUID(e))}compute(e,t,n,s,r=null){const{state:a,gl:o}=this;this.discard===!1&&(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:d}=this.get(s),h=this._getVaoKey(d),m=this.vaoCache[h];m===void 0?this.vaoCache[h]=this._createVao(d):a.setVertexState(m),a.useProgram(l),this._bindUniforms(n);const v=this._getTransformFeedback(c);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,v),o.beginTransformFeedback(o.POINTS),r=r!==null?r:t.count,Array.isArray(r)&&(Xl("WebGLBackend.compute(): The count parameter must be a single number, not an array."),r=r[0]),d[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,r):o.drawArrays(o.POINTS,0,r),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let _=0;_<c.length;_++){const x=c[_];x.pbo&&this.has(x.pbo)&&this.textureUtils.copyBufferToTexture(x.transformBuffer,x.pbo),x.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(Jg.COMPUTE,this.getTimestampUID(e)),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:t,pipeline:n,material:s,context:r,hardwareClippingPlanes:a}=e,{programGPU:o}=this.get(n),{gl:l,state:c}=this,d=this.get(r),h=e.getDrawParameters();if(h===null)return;this._bindUniforms(e.getBindings());const m=t.isMesh&&t.matrixWorld.determinant()<0;c.setMaterial(s,m,a),c.useProgram(o);const v=e.getAttributes(),_=this.get(v);let x=_.vaoGPU;if(x===void 0){const F=this._getVaoKey(v);x=this.vaoCache[F],x===void 0&&(x=this._createVao(v),this.vaoCache[F]=x,_.vaoGPU=x)}const T=e.getIndex(),b=T!==null?this.get(T).bufferGPU:null;c.setVertexState(x,b);const w=d.lastOcclusionObject;if(w!==t&&w!==void 0){if(w!==null&&w.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),d.occlusionQueryIndex++),t.occlusionTest===!0){const F=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,F),d.occlusionQueries[d.occlusionQueryIndex]=F,d.occlusionQueryObjects[d.occlusionQueryIndex]=t}d.lastOcclusionObject=t}const M=this.bufferRenderer;t.isPoints?M.mode=l.POINTS:t.isLineSegments?M.mode=l.LINES:t.isLine?M.mode=l.LINE_STRIP:t.isLineLoop?M.mode=l.LINE_LOOP:s.wireframe===!0?(c.setLineWidth(s.wireframeLinewidth*this.renderer.getPixelRatio()),M.mode=l.LINES):M.mode=l.TRIANGLES;const{vertexCount:R,instanceCount:N}=h;let{firstVertex:D}=h;if(M.object=t,T!==null){D*=T.array.BYTES_PER_ELEMENT;const F=this.get(T);M.index=T.count,M.type=F.type}else M.index=0;const L=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?(Xl("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),M.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?M.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):Xl("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):N>1?M.renderInstances(D,R,N):M.render(D,R)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const F=this.get(e.camera),I=e.camera.cameras,z=e.getBindingGroup("cameraIndex").bindings[0];if(F.indexesGPU===void 0||F.indexesGPU.length!==I.length){const G=new Uint32Array([0,0,0,0]),K=[];for(let $=0,ce=I.length;$<ce;$++){const q=l.createBuffer();G[0]=$,l.bindBuffer(l.UNIFORM_BUFFER,q),l.bufferData(l.UNIFORM_BUFFER,G,l.STATIC_DRAW),K.push(q)}F.indexesGPU=K}const H=this.get(z),Y=this.renderer.getPixelRatio(),Z=this._currentContext.renderTarget,se=this._isRenderCameraDepthArray(this._currentContext),oe=this._currentContext.activeCubeFace;if(se){const G=this.get(Z.depthTexture);if(G.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){G.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:K}=Z;for(let $=0,ce=I.length;$<ce;$++)this.renderer._activeCubeFace=$,this._currentContext.activeCubeFace=$,this._setFramebuffer(this._currentContext),this.clear(!1,!0,K,this._currentContext,!1,!1);this.renderer._activeCubeFace=oe,this._currentContext.activeCubeFace=oe}}for(let G=0,K=I.length;G<K;G++){const $=I[G];if(t.layers.test($.layers)){se&&(this.renderer._activeCubeFace=G,this._currentContext.activeCubeFace=G,this._setFramebuffer(this._currentContext));const ce=$.viewport;if(ce!==void 0){const q=ce.x*Y,ue=ce.y*Y,Ae=ce.width*Y,Ne=ce.height*Y;c.viewport(Math.floor(q),Math.floor(e.context.height-Ne-ue),Math.floor(Ae),Math.floor(Ne))}c.bindBufferBase(l.UNIFORM_BUFFER,H.index,F.indexesGPU[G]),L()}this._currentContext.activeCubeFace=oe,this.renderer._activeCubeFace=oe}}else L()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,s,r,a){return this.textureUtils.copyTextureToBuffer(e,t,n,s,r,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new WUe(e,t)}createProgram(e){const t=this.gl,{stage:n,code:s}=e,r=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(r,s),t.compileShader(r),this.set(e,{shaderGPU:r})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,s=e.pipeline,{fragmentProgram:r,vertexProgram:a}=s,o=n.createProgram(),l=this.get(r).shaderGPU,c=this.get(a).shaderGPU;if(n.attachShader(o,l),n.attachShader(o,c),n.linkProgram(o),this.set(s,{programGPU:o,fragmentShader:l,vertexShader:c}),t!==null&&this.parallel){const d=new Promise(h=>{const m=this.parallel,v=()=>{n.getProgramParameter(o,m.COMPLETION_STATUS_KHR)?(this._completeCompile(e,s),h()):requestAnimationFrame(v)};v()});t.push(d);return}this._completeCompile(e,s)}_handleSource(e,t){const n=e.split(`
`),s=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=r;o<a;o++){const l=o+1;s.push(`${l===t?">":" "} ${l}: ${n[o]}`)}return s.join(`
`)}_getShaderErrors(e,t,n){const s=e.getShaderParameter(t,e.COMPILE_STATUS),a=(e.getShaderInfoLog(t)||"").trim();if(s&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const l=parseInt(o[1]);return n.toUpperCase()+`

`+a+`

`+this._handleSource(e.getShaderSource(t),l)}else return a}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const s=this.gl,a=(s.getProgramInfoLog(e)||"").trim();if(s.getProgramParameter(e,s.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(s,e,n,t);else{const o=this._getShaderErrors(s,n,"vertex"),l=this._getShaderErrors(s,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(e,s.VALIDATE_STATUS)+`

Program Info Log: `+a+`
`+o+`
`+l)}else a!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",a)}}_completeCompile(e,t){const{state:n,gl:s}=this,r=this.get(t),{programGPU:a,fragmentShader:o,vertexShader:l}=r;s.getProgramParameter(a,s.LINK_STATUS)===!1&&this._logProgramError(a,o,l),n.useProgram(a);const c=e.getBindings();this._setupBindings(c,a),this.set(t,{programGPU:a})}createComputePipeline(e,t){const{state:n,gl:s}=this,r={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(r);const{computeProgram:a}=e,o=s.createProgram(),l=this.get(r).shaderGPU,c=this.get(a).shaderGPU,d=a.transforms,h=[],m=[];for(let T=0;T<d.length;T++){const b=d[T];h.push(b.varyingName),m.push(b.attributeNode)}s.attachShader(o,l),s.attachShader(o,c),s.transformFeedbackVaryings(o,h,s.SEPARATE_ATTRIBS),s.linkProgram(o),s.getProgramParameter(o,s.LINK_STATUS)===!1&&this._logProgramError(o,l,c),n.useProgram(o),this._setupBindings(t,o);const v=a.attributes,_=[],x=[];for(let T=0;T<v.length;T++){const b=v[T].node.attribute;_.push(b),this.has(b)||this.attributeUtils.createAttribute(b,s.ARRAY_BUFFER)}for(let T=0;T<m.length;T++){const b=m[T].attribute;this.has(b)||this.attributeUtils.createAttribute(b,s.ARRAY_BUFFER);const w=this.get(b);x.push(w)}this.set(e,{programGPU:o,transformBuffers:x,attributes:_})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,s=0;for(const r of t){this.set(r,{textures:s,uniformBuffers:n});for(const a of r.bindings)a.isUniformBuffer&&n++,a.isSampledTexture&&s++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let s=n.uniformBuffers,r=n.textures;for(const a of e.bindings){const o=this.get(a);if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer;let{bufferGPU:c}=this.get(l);c===void 0?(c=t.createBuffer(),t.bindBuffer(t.UNIFORM_BUFFER,c),t.bufferData(t.UNIFORM_BUFFER,l,t.DYNAMIC_DRAW),this.set(l,{bufferGPU:c})):(t.bindBuffer(t.UNIFORM_BUFFER,c),t.bufferSubData(t.UNIFORM_BUFFER,0,l)),o.index=s++,o.bufferGPU=c,this.set(a,o)}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);o.index=r++,o.textureGPU=l,o.glTextureType=c,this.set(a,o)}}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const s=this.get(e).bufferGPU,r=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,s),t.bufferData(t.UNIFORM_BUFFER,r,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(Qj).filter(s=>Qj[s]===e),n=this.extensions;for(let s=0;s<t.length;s++)if(n.has(t[s]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,s=null,r=0,a=0){this.textureUtils.copyTextureToTexture(e,t,n,s,r,a)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let s=null;if(e.textures!==null){const r=e.renderTarget,a=this.get(r),{samples:o,depthBuffer:l,stencilBuffer:c}=r,d=r.isWebGLCubeRenderTarget===!0,h=r.isRenderTarget3D===!0,m=r.depth>1,v=r.isXRRenderTarget===!0,_=v===!0&&r._hasExternalTextures===!0;let x=a.msaaFrameBuffer,T=a.depthRenderbuffer;const b=this.extensions.get("WEBGL_multisampled_render_to_texture"),w=this.extensions.get("OVR_multiview2"),M=this._useMultisampledExtension(r),R=Zte(e);let N;if(d?(a.cubeFramebuffers||(a.cubeFramebuffers={}),N=a.cubeFramebuffers[R]):v&&_===!1?N=this._xrFramebuffer:(a.framebuffers||(a.framebuffers={}),N=a.framebuffers[R]),N===void 0){N=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,N);const D=e.textures,L=[];if(d){a.cubeFramebuffers[R]=N;const{textureGPU:I}=this.get(D[0]),z=this.renderer._activeCubeFace,H=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+z,I,H)}else{a.framebuffers[R]=N;for(let I=0;I<D.length;I++){const z=D[I],H=this.get(z);H.renderTarget=e.renderTarget,H.cacheKey=R;const Y=t.COLOR_ATTACHMENT0+I;if(r.multiview)w.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,Y,H.textureGPU,0,o,0,2);else if(h||m){const Z=this.renderer._activeCubeFace,se=this.renderer._activeMipmapLevel;t.framebufferTextureLayer(t.FRAMEBUFFER,Y,H.textureGPU,se,Z)}else if(M)b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Y,t.TEXTURE_2D,H.textureGPU,0,o);else{const Z=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,Y,t.TEXTURE_2D,H.textureGPU,Z)}}}const F=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(r._autoAllocateDepthBuffer===!0){const I=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(I,e,0,M),a.xrDepthRenderbuffer=I,L.push(c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,I),t.framebufferRenderbuffer(t.FRAMEBUFFER,F,t.RENDERBUFFER,I)}else if(e.depthTexture!==null){L.push(c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);const I=this.get(e.depthTexture);if(I.renderTarget=e.renderTarget,I.cacheKey=R,r.multiview)w.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,F,I.textureGPU,0,o,0,2);else if(_&&M)b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,F,t.TEXTURE_2D,I.textureGPU,0,o);else if(e.depthTexture.isArrayTexture){const z=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,F,I.textureGPU,0,z)}else t.framebufferTexture2D(t.FRAMEBUFFER,F,t.TEXTURE_2D,I.textureGPU,0)}a.depthInvalidationArray=L}else{if(this._isRenderCameraDepthArray(e)){n.bindFramebuffer(t.FRAMEBUFFER,N);const L=this.renderer._activeCubeFace,F=this.get(e.depthTexture),I=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,I,F.textureGPU,0,L)}if((v||M||r.multiview)&&r._isOpaqueFramebuffer!==!0){n.bindFramebuffer(t.FRAMEBUFFER,N);const L=this.get(e.textures[0]);r.multiview?w.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,L.textureGPU,0,o,0,2):M?b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,L.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,L.textureGPU,0);const F=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(r._autoAllocateDepthBuffer===!0){const I=a.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,I),t.framebufferRenderbuffer(t.FRAMEBUFFER,F,t.RENDERBUFFER,I)}else{const I=this.get(e.depthTexture);r.multiview?w.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,F,I.textureGPU,0,o,0,2):M?b.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,F,t.TEXTURE_2D,I.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,F,t.TEXTURE_2D,I.textureGPU,0)}}}if(o>0&&M===!1&&!r.multiview){if(x===void 0){const D=[];x=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,x);const L=[],F=e.textures;for(let I=0;I<F.length;I++){L[I]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,L[I]),D.push(t.COLOR_ATTACHMENT0+I);const z=e.textures[I],H=this.get(z);t.renderbufferStorageMultisample(t.RENDERBUFFER,o,H.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+I,t.RENDERBUFFER,L[I])}if(t.bindRenderbuffer(t.RENDERBUFFER,null),a.msaaFrameBuffer=x,a.msaaRenderbuffers=L,l&&T===void 0){T=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(T,e,o),a.depthRenderbuffer=T;const I=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;D.push(I)}a.invalidationArray=D}s=a.msaaFrameBuffer}else s=N;n.drawBuffers(e,N)}n.bindFramebuffer(t.FRAMEBUFFER,s)}_getVaoKey(e){let t="";for(let n=0;n<e.length;n++){const s=this.get(e[n]);t+=":"+s.id}return t}_createVao(e){const{gl:t}=this,n=t.createVertexArray();t.bindVertexArray(n);for(let s=0;s<e.length;s++){const r=e[s],a=this.get(r);t.bindBuffer(t.ARRAY_BUFFER,a.bufferGPU),t.enableVertexAttribArray(s);let o,l;r.isInterleavedBufferAttribute===!0?(o=r.data.stride*a.bytesPerElement,l=r.offset*a.bytesPerElement):(o=0,l=0),a.isInteger?t.vertexAttribIPointer(s,r.itemSize,a.type,o,l):t.vertexAttribPointer(s,r.itemSize,a.type,r.normalized,o,l),r.isInstancedBufferAttribute&&!r.isInterleavedBufferAttribute?t.vertexAttribDivisor(s,r.meshPerAttribute):r.isInterleavedBufferAttribute&&r.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(s,r.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),n}_getTransformFeedback(e){let t="";for(let r=0;r<e.length;r++)t+=":"+e[r].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:s}=this;n=s.createTransformFeedback(),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,n);for(let r=0;r<e.length;r++){const a=e[r];s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,r,a.transformBuffer)}return s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const s of e)for(const r of s.bindings){const o=this.get(r).index;if(r.isUniformsGroup||r.isUniformBuffer){const l=n.getUniformBlockIndex(t,r.name);n.uniformBlockBinding(t,l,o)}else if(r.isSampledTexture){const l=n.getUniformLocation(t,r.name);n.uniform1i(l,o)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const s of e)for(const r of s.bindings){const a=this.get(r),o=a.index;r.isUniformsGroup||r.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,o,a.bufferGPU):r.isSampledTexture&&n.bindTexture(a.glTextureType,a.textureGPU,t.TEXTURE0+o)}}_resolveRenderTarget(e){const{gl:t,state:n}=this,s=e.renderTarget;if(e.textures!==null&&s){const r=this.get(s);if(s.samples>0&&this._useMultisampledExtension(s)===!1){const a=r.framebuffers[e.getCacheKey()];let o=t.COLOR_BUFFER_BIT;s.resolveDepthBuffer&&(s.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),s.stencilBuffer&&s.resolveStencilBuffer&&(o|=t.STENCIL_BUFFER_BIT));const l=r.msaaFrameBuffer,c=r.msaaRenderbuffers,d=e.textures,h=d.length>1;if(n.bindFramebuffer(t.READ_FRAMEBUFFER,l),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),h)for(let m=0;m<d.length;m++)t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+m,t.RENDERBUFFER,null),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+m,t.TEXTURE_2D,null,0);for(let m=0;m<d.length;m++){if(h){const{textureGPU:v}=this.get(d[m]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,c[m]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,v,0)}if(e.scissor){const{x:v,y:_,width:x,height:T}=e.scissorValue,b=e.height-T-_;t.blitFramebuffer(v,b,v+x,b+T,v,b,v+x,b+T,o,t.NEAREST)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,o,t.NEAREST)}if(h)for(let m=0;m<d.length;m++){const{textureGPU:v}=this.get(d[m]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+m,t.RENDERBUFFER,c[m]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+m,t.TEXTURE_2D,v,0)}this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,r.invalidationArray)}else if(s.resolveDepthBuffer===!1&&r.framebuffers){const a=r.framebuffers[e.getCacheKey()];n.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,r.depthInvalidationArray)}}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const hb={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},fl={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},_c={Store:"store"},xs={Load:"load",Clear:"clear"},e$={CCW:"ccw",CW:"cw"},t$={None:"none",Back:"back"},sS={Uint16:"uint16",Uint32:"uint32"},ge={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rg11b10ufloat",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-unorm-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},gU={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},_v={Linear:"linear",Nearest:"nearest"},Gi={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},cv={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},n$={None:0,All:15},Bg={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},yU={Storage:"storage",ReadOnlyStorage:"read-only-storage"},vU={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},i$={NonFiltering:"non-filtering",Comparison:"comparison"},uv={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},s$={TwoD:"2d",ThreeD:"3d"},io={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},i3e={All:"all"},lR={Vertex:"vertex",Instance:"instance"},CB={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"};class s3e extends Die{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class r3e extends Aie{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let a3e=0;class o3e extends r3e{constructor(e,t){super("StorageBuffer_"+a3e++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Wo.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class l3e extends a0{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,s=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:_v.Linear}),this.flipYSampler=e.createSampler({minFilter:_v.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:s})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:hb.TriangleStrip,stripIndexFormat:sS.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:hb.TriangleStrip,stripIndexFormat:sS.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const s=t.format,{width:r,height:a}=t.size,o=this.getTransferPipeline(s),l=this.getFlipYPipeline(s),c=this.device.createTexture({size:{width:r,height:a,depthOrArrayLayers:1},format:s,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),d=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:io.TwoD,baseArrayLayer:n}),h=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:io.TwoD,baseArrayLayer:0}),m=this.device.createCommandEncoder({}),v=(_,x,T)=>{const b=_.getBindGroupLayout(0),w=this.device.createBindGroup({layout:b,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:x}]}),M=m.beginRenderPass({colorAttachments:[{view:T,loadOp:xs.Clear,storeOp:_c.Store,clearValue:[0,0,0,0]}]});M.setPipeline(_),M.setBindGroup(0,w),M.draw(4,1,0,0),M.end()};v(o,d,h),v(l,h,d),this.device.queue.submit([m.finish()]),c.destroy()}generateMipmaps(e,t,n=0){const s=this.get(e);s.useCount===void 0&&(s.useCount=0,s.layers=[]);const r=s.layers[n]||this._mipmapCreateBundles(e,t,n),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,r),this.device.queue.submit([a.finish()]),s.useCount!==0&&(s.layers[n]=r),s.useCount++}_mipmapCreateBundles(e,t,n){const s=this.getTransferPipeline(t.format),r=s.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:io.TwoD,baseArrayLayer:n});const o=[];for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:r,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),d=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:io.TwoD,baseArrayLayer:n}),h={colorAttachments:[{view:d,loadOp:xs.Clear,storeOp:_c.Store,clearValue:[0,0,0,0]}]},m=this.device.createRenderBundleEncoder({colorFormats:[t.format]});m.setPipeline(s),m.setBindGroup(0,c),m.draw(4,1,0,0),o.push({renderBundles:[m.finish()],passDescriptor:h}),a=d}return o}_mipmapRunBundles(e,t){const n=t.length;for(let s=0;s<n;s++){const r=t[s],a=e.beginRenderPass(r.passDescriptor);a.executeBundles(r.renderBundles),a.end()}}}const c3e={[Cw]:"never",[CS]:"less",[Rw]:"equal",[RS]:"less-equal",[Nw]:"greater",[Pw]:"greater-equal",[Ow]:"always",[Dw]:"not-equal"},u3e=[0,1,3,2,4,5];class d3e{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Uc,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,s=t.get(e),r={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};r.magFilter===_v.Linear&&r.minFilter===_v.Linear&&r.mipmapFilter===_v.Linear&&(r.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(r.compare=c3e[e.compareFunction]),s.sampler=n.createSampler(r)}createDefaultTexture(e){let t;const n=RB(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,s=n.get(e);if(s.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");if(e.isExternalTexture){s.texture=e.sourceTexture,s.initialized=!0;return}t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:r,height:a,depth:o,levels:l}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const c=this._getDimension(e),d=e.internalFormat||t.format||RB(e,n.device);s.format=d;const{samples:h,primarySamples:m,isMSAA:v}=n.utils.getTextureSampleData(e);let _=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(_|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&d!==ge.RGB9E5UFloat&&(_|=GPUTextureUsage.RENDER_ATTACHMENT);const x={label:e.name,size:{width:r,height:a,depthOrArrayLayers:o},mipLevelCount:l,sampleCount:m,dimension:c,format:d,usage:_};if(d===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(x.textureBindingViewDimension=io.Cube),s.texture=n.device.createTexture(x),v){const T=Object.assign({},x);T.label=T.label+"-msaa",T.sampleCount=h,T.mipLevelCount=1,s.msaaTexture=n.device.createTexture(T)}s.initialized=!0,s.textureDescriptorGPU=x}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let s=0;s<n;s++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,s)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:s,height:r}=n.getDrawingBufferSize(),a=this.depthTexture,o=n.get(a).texture;let l,c;if(t?(l=Lc,c=Pc):e&&(l=Oc,c=Rs),o!==void 0){if(a.image.width===s&&a.image.height===r&&a.format===l&&a.type===c)return o;this.destroyTexture(a)}return a.name="depthBuffer",a.format=l,a.type=c,a.image.width=s,a.image.height=r,this.createTexture(a,{width:s,height:r}),n.get(a).texture}updateTexture(e,t){const n=this.backend.get(e),s=e.mipmaps,{textureDescriptorGPU:r}=n;if(!(e.isRenderTargetTexture||r===void 0)){if(e.isDataTexture)if(s.length>0)for(let a=0,o=s.length;a<o;a++){const l=s[a];this._copyBufferToTexture(l,n.texture,r,0,e.flipY,0,a)}else this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let a=0;a<t.image.depth;a++)this._copyBufferToTexture(t.image,n.texture,r,a,e.flipY,a);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r);else if(e.isCubeTexture)this._copyCubeMapToTexture(e,n.texture,r);else if(s.length>0)for(let a=0,o=s.length;a<o;a++){const l=s[a];this._copyImageToTexture(l,n.texture,r,0,e.flipY,e.premultiplyAlpha,a)}else this._copyImageToTexture(t.image,n.texture,r,0,e.flipY,e.premultiplyAlpha);n.version=e.version}}async copyTextureToBuffer(e,t,n,s,r,a){const o=this.backend.device,l=this.backend.get(e),c=l.texture,d=l.textureDescriptorGPU.format,h=this._getBytesPerTexel(d);let m=s*h;m=Math.ceil(m/256)*256;const v=o.createBuffer({size:(r-1)*m+s*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),_=o.createCommandEncoder();_.copyTextureToBuffer({texture:c,origin:{x:t,y:n,z:a}},{buffer:v,bytesPerRow:m},{width:s,height:r});const x=this._getTypedArrayType(d);o.queue.submit([_.finish()]),await v.mapAsync(GPUMapMode.READ);const T=v.getMappedRange();return new x(T)}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Es;n.minFilter=Fs,n.magFilter=Fs,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Gm;n.minFilter=Fs,n.magFilter=Fs,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_copyCubeMapToTexture(e,t,n){const s=e.images,r=e.mipmaps;for(let a=0;a<6;a++){const o=s[a],l=e.flipY===!0?u3e[a]:a;o.isDataTexture?this._copyBufferToTexture(o.image,t,n,l,e.flipY):this._copyImageToTexture(o,t,n,l,e.flipY,e.premultiplyAlpha);for(let c=0;c<r.length;c++){const h=r[c].images[a];h.isDataTexture?this._copyBufferToTexture(h.image,t,n,l,e.flipY,0,c+1):this._copyImageToTexture(h,t,n,l,e.flipY,e.premultiplyAlpha,c+1)}}}_copyImageToTexture(e,t,n,s,r,a,o=0){const l=this.backend.device,c=o>0?e.width:n.size.width,d=o>0?e.height:n.size.height;l.queue.copyExternalImageToTexture({source:e,flipY:r},{texture:t,mipLevel:o,origin:{x:0,y:0,z:s},premultipliedAlpha:a},{width:c,height:d,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new l3e(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,s,r,a=0,o=0){const l=this.backend.device,c=e.data,d=this._getBytesPerTexel(n.format),h=e.width*d;l.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:s}},c,{offset:e.width*e.height*d*a,bytesPerRow:h},{width:e.width,height:e.height,depthOrArrayLayers:1}),r===!0&&this._flipY(t,n,s)}_copyCompressedBufferToTexture(e,t,n){const s=this.backend.device,r=this._getBlockData(n.format),a=n.size.depthOrArrayLayers>1;for(let o=0;o<e.length;o++){const l=e[o],c=l.width,d=l.height,h=a?n.size.depthOrArrayLayers:1,m=Math.ceil(c/r.width)*r.byteLength,v=m*Math.ceil(d/r.height);for(let _=0;_<h;_++)s.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:_}},l.data,{offset:_*v,bytesPerRow:m,rowsPerImage:Math.ceil(d/r.height)},{width:Math.ceil(c/r.width)*r.width,height:Math.ceil(d/r.height)*r.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===ge.BC1RGBAUnorm||e===ge.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===ge.BC2RGBAUnorm||e===ge.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ge.BC3RGBAUnorm||e===ge.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ge.BC4RUnorm||e===ge.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===ge.BC5RGUnorm||e===ge.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===ge.BC6HRGBUFloat||e===ge.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===ge.BC7RGBAUnorm||e===ge.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ge.ETC2RGB8Unorm||e===ge.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ge.ETC2RGB8A1Unorm||e===ge.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ge.ETC2RGBA8Unorm||e===ge.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ge.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===ge.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===ge.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===ge.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===ge.ASTC4x4Unorm||e===ge.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ge.ASTC5x4Unorm||e===ge.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===ge.ASTC5x5Unorm||e===ge.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===ge.ASTC6x5Unorm||e===ge.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===ge.ASTC6x6Unorm||e===ge.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===ge.ASTC8x5Unorm||e===ge.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===ge.ASTC8x6Unorm||e===ge.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===ge.ASTC8x8Unorm||e===ge.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===ge.ASTC10x5Unorm||e===ge.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===ge.ASTC10x6Unorm||e===ge.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===ge.ASTC10x8Unorm||e===ge.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===ge.ASTC10x10Unorm||e===ge.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===ge.ASTC12x10Unorm||e===ge.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===ge.ASTC12x12Unorm||e===ge.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=gU.ClampToEdge;return e===cp?t=gU.Repeat:e===up&&(t=gU.MirrorRepeat),t}_convertFilterMode(e){let t=_v.Linear;return(e===Fs||e===TS||e===jd)&&(t=_v.Nearest),t}_getBytesPerTexel(e){if(e===ge.R8Unorm||e===ge.R8Snorm||e===ge.R8Uint||e===ge.R8Sint)return 1;if(e===ge.R16Uint||e===ge.R16Sint||e===ge.R16Float||e===ge.RG8Unorm||e===ge.RG8Snorm||e===ge.RG8Uint||e===ge.RG8Sint)return 2;if(e===ge.R32Uint||e===ge.R32Sint||e===ge.R32Float||e===ge.RG16Uint||e===ge.RG16Sint||e===ge.RG16Float||e===ge.RGBA8Unorm||e===ge.RGBA8UnormSRGB||e===ge.RGBA8Snorm||e===ge.RGBA8Uint||e===ge.RGBA8Sint||e===ge.BGRA8Unorm||e===ge.BGRA8UnormSRGB||e===ge.RGB9E5UFloat||e===ge.RGB10A2Unorm||e===ge.RG11B10UFloat||e===ge.Depth32Float||e===ge.Depth24Plus||e===ge.Depth24PlusStencil8||e===ge.Depth32FloatStencil8)return 4;if(e===ge.RG32Uint||e===ge.RG32Sint||e===ge.RG32Float||e===ge.RGBA16Uint||e===ge.RGBA16Sint||e===ge.RGBA16Float)return 8;if(e===ge.RGBA32Uint||e===ge.RGBA32Sint||e===ge.RGBA32Float)return 16}_getTypedArrayType(e){if(e===ge.R8Uint)return Uint8Array;if(e===ge.R8Sint)return Int8Array;if(e===ge.R8Unorm)return Uint8Array;if(e===ge.R8Snorm)return Int8Array;if(e===ge.RG8Uint)return Uint8Array;if(e===ge.RG8Sint)return Int8Array;if(e===ge.RG8Unorm)return Uint8Array;if(e===ge.RG8Snorm)return Int8Array;if(e===ge.RGBA8Uint)return Uint8Array;if(e===ge.RGBA8Sint)return Int8Array;if(e===ge.RGBA8Unorm||e===ge.RGBA8UnormSRGB)return Uint8Array;if(e===ge.RGBA8Snorm)return Int8Array;if(e===ge.R16Uint)return Uint16Array;if(e===ge.R16Sint)return Int16Array;if(e===ge.RG16Uint)return Uint16Array;if(e===ge.RG16Sint)return Int16Array;if(e===ge.RGBA16Uint)return Uint16Array;if(e===ge.RGBA16Sint)return Int16Array;if(e===ge.R16Float||e===ge.RG16Float||e===ge.RGBA16Float)return Uint16Array;if(e===ge.R32Uint)return Uint32Array;if(e===ge.R32Sint)return Int32Array;if(e===ge.R32Float)return Float32Array;if(e===ge.RG32Uint)return Uint32Array;if(e===ge.RG32Sint)return Int32Array;if(e===ge.RG32Float)return Float32Array;if(e===ge.RGBA32Uint)return Uint32Array;if(e===ge.RGBA32Sint)return Int32Array;if(e===ge.RGBA32Float)return Float32Array;if(e===ge.BGRA8Unorm||e===ge.BGRA8UnormSRGB)return Uint8Array;if(e===ge.RGB10A2Unorm||e===ge.RGB9E5UFloat||e===ge.RG11B10UFloat)return Uint32Array;if(e===ge.Depth32Float)return Float32Array;if(e===ge.Depth24Plus||e===ge.Depth24PlusStencil8)return Uint32Array;if(e===ge.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.is3DTexture||e.isData3DTexture?t=s$.ThreeD:t=s$.TwoD,t}}function RB(i,e=null){const t=i.format,n=i.type,s=i.colorSpace,r=Sn.getTransfer(s);let a;if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case Wh:case qh:a=r===Kt?ge.BC1RGBAUnormSRGB:ge.BC1RGBAUnorm;break;case Xh:a=r===Kt?ge.BC2RGBAUnormSRGB:ge.BC2RGBAUnorm;break;case Yh:a=r===Kt?ge.BC3RGBAUnormSRGB:ge.BC3RGBAUnorm;break;case By:a=ge.BC4RUnorm;break;case Iy:a=ge.BC4RSnorm;break;case Fy:a=ge.BC5RGUnorm;break;case zy:a=ge.BC5RGSnorm;break;case Uy:a=r===Kt?ge.BC7RGBAUnormSRGB:ge.BC7RGBAUnorm;break;case _y:case vy:a=r===Kt?ge.ETC2RGB8UnormSRGB:ge.ETC2RGB8Unorm;break;case xy:a=r===Kt?ge.ETC2RGBA8UnormSRGB:ge.ETC2RGBA8Unorm;break;case by:a=r===Kt?ge.ASTC4x4UnormSRGB:ge.ASTC4x4Unorm;break;case Sy:a=r===Kt?ge.ASTC5x4UnormSRGB:ge.ASTC5x4Unorm;break;case Ty:a=r===Kt?ge.ASTC5x5UnormSRGB:ge.ASTC5x5Unorm;break;case Ey:a=r===Kt?ge.ASTC6x5UnormSRGB:ge.ASTC6x5Unorm;break;case wy:a=r===Kt?ge.ASTC6x6UnormSRGB:ge.ASTC6x6Unorm;break;case My:a=r===Kt?ge.ASTC8x5UnormSRGB:ge.ASTC8x5Unorm;break;case Ay:a=r===Kt?ge.ASTC8x6UnormSRGB:ge.ASTC8x6Unorm;break;case Cy:a=r===Kt?ge.ASTC8x8UnormSRGB:ge.ASTC8x8Unorm;break;case Ry:a=r===Kt?ge.ASTC10x5UnormSRGB:ge.ASTC10x5Unorm;break;case Ny:a=r===Kt?ge.ASTC10x6UnormSRGB:ge.ASTC10x6Unorm;break;case Dy:a=r===Kt?ge.ASTC10x8UnormSRGB:ge.ASTC10x8Unorm;break;case Py:a=r===Kt?ge.ASTC10x10UnormSRGB:ge.ASTC10x10Unorm;break;case Oy:a=r===Kt?ge.ASTC12x10UnormSRGB:ge.ASTC12x10Unorm;break;case Ly:a=r===Kt?ge.ASTC12x12UnormSRGB:ge.ASTC12x12Unorm;break;case nr:a=r===Kt?ge.RGBA8UnormSRGB:ge.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case nr:switch(n){case xm:a=ge.RGBA8Snorm;break;case bm:a=ge.RGBA16Sint;break;case Xu:a=ge.RGBA16Uint;break;case Rs:a=ge.RGBA32Uint;break;case oo:a=ge.RGBA32Sint;break;case Tr:a=r===Kt?ge.RGBA8UnormSRGB:ge.RGBA8Unorm;break;case $a:a=ge.RGBA16Float;break;case fr:a=ge.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case S_:switch(n){case MS:a=ge.RGB9E5UFloat;break;case AS:a=ge.RG11B10UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case qy:switch(n){case xm:a=ge.R8Snorm;break;case bm:a=ge.R16Sint;break;case Xu:a=ge.R16Uint;break;case Rs:a=ge.R32Uint;break;case oo:a=ge.R32Sint;break;case Tr:a=ge.R8Unorm;break;case $a:a=ge.R16Float;break;case fr:a=ge.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case Of:switch(n){case xm:a=ge.RG8Snorm;break;case bm:a=ge.RG16Sint;break;case Xu:a=ge.RG16Uint;break;case Rs:a=ge.RG32Uint;break;case oo:a=ge.RG32Sint;break;case Tr:a=ge.RG8Unorm;break;case $a:a=ge.RG16Float;break;case fr:a=ge.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case Oc:switch(n){case Xu:a=ge.Depth16Unorm;break;case Rs:a=ge.Depth24Plus;break;case fr:a=ge.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case Lc:switch(n){case Pc:a=ge.Depth24PlusStencil8;break;case fr:e&&e.features.has(CB.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),a=ge.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case km:switch(n){case oo:a=ge.R32Sint;break;case Rs:a=ge.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case Xy:switch(n){case oo:a=ge.RG32Sint;break;case Rs:a=ge.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case Yy:switch(n){case oo:a=ge.RGBA32Sint;break;case Rs:a=ge.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return a}const f3e=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,h3e=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,r$={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},p3e=i=>{i=i.trim();const e=i.match(f3e);if(e!==null&&e.length===4){const t=e[2],n=[];let s=null;for(;(s=h3e.exec(t))!==null;)n.push({name:s[1],type:s[2]});const r=[];for(let d=0;d<n.length;d++){const{name:h,type:m}=n[d];let v=m;v.startsWith("ptr")?v="pointer":(v.startsWith("texture")&&(v=m.split("<")[0]),v=r$[v]),r.push(new VD(v,h))}const a=i.substring(e[0].length),o=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:r$[o]||o,inputs:r,name:l,inputsCode:t,blockCode:a,outputType:o}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class m3e extends yk{constructor(e){const{type:t,inputs:n,name:s,inputsCode:r,blockCode:a,outputType:o}=p3e(e);super(t,n,s),this.inputsCode=r,this.blockCode=a,this.outputType=o}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class g3e extends Sie{parseFunction(e){return new m3e(e)}}const nb=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},y3e={[Wo.READ_ONLY]:"read",[Wo.WRITE_ONLY]:"write",[Wo.READ_WRITE]:"read_write"},a$={[cp]:"repeat",[vl]:"clamp",[up]:"mirror"},cR={vertex:nb?nb.VERTEX:1,fragment:nb?nb.FRAGMENT:2,compute:nb?nb.COMPUTE:4},o$={instance:!0,swizzleAssign:!1,storageBuffer:!0},v3e={"^^":"tsl_xor"},_3e={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},l$={},S1={tsl_xor:new pl("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new pl("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new pl("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new pl("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new pl("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new pl("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new pl("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new pl("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new pl("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new pl("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new pl("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new pl("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new pl(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},x3e={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};let Uie="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(Uie+=`diagnostic( off, derivative_uniformity );
`);class b3e extends gk{constructor(e,t){super(e,t,new g3e),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,t,n,s,r,a=this.shaderStage){return a==="fragment"?s?r?`textureSample( ${t}, ${t}_sampler, ${n}, ${s}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n}, ${s} )`:r?`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.generateTextureSampleLevel(e,t,n,"0",s)}generateTextureSampleLevel(e,t,n,s,r,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${s}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${s} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,a,s):this.generateTextureLod(e,t,n,r,a,s)}generateWrapFunction(e){const t=`tsl_coord_${a$[e.wrapS]}S_${a$[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=l$[t];if(n===void 0){const s=[],r=e.isData3DTexture?"vec3f":"vec2f";let a=`fn ${t}( coord : ${r} ) -> ${r} {

	return ${r}(
`;const o=(l,c)=>{l===cp?(s.push(S1.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${c} )`):l===vl?(s.push(S1.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${c} )`):l===up?(s.push(S1.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${c} )`):(a+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};o(e.wrapS,"x"),a+=`,
`,o(e.wrapT,"y"),e.isData3DTexture&&(a+=`,
`,o(e.wrapR,"z")),a+=`
	);

}
`,l$[t]=n=new pl(a,s)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const s=this.getDataFromNode(e,this.shaderStage,this.globalCache);s.dimensionsSnippet===void 0&&(s.dimensionsSnippet={});let r=s.dimensionsSnippet[n];if(s.dimensionsSnippet[n]===void 0){let a,o;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),c=l>1;e.isData3DTexture?o="vec3<u32>":o="vec2<u32>",c||e.isStorageTexture?a=t:a=`${t}${n?`, u32( ${n} )`:""}`,r=new J1(new tE(`textureDimensions( ${a} )`,o)),s.dimensionsSnippet[n]=r,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(s.arrayLayerCount=new J1(new tE(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(s.cubeFaceCount=new J1(new tE("6u","u32")))}return r.build(this)}generateFilteredTexture(e,t,n,s,r="0u"){this._include("biquadraticTexture");const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,r);return s&&(n=`${n} + vec2<f32>(${s}) / ${o}`),`tsl_biquadraticTexture( ${t}, ${a}( ${n} ), ${o}, u32( ${r} ) )`}generateTextureLod(e,t,n,s,r,a="0u"){const o=this.generateWrapFunction(e),l=this.generateTextureDimension(e,t,a),c=e.isData3DTexture?"vec3":"vec2";r&&(n=`${n} + ${c}<f32>(${r}) / ${c}<f32>( ${l} )`);const d=`${c}<u32>( ${o}( ${n} ) * ${c}<f32>( ${l} ) )`;return this.generateTextureLoad(e,t,d,s,null,a)}generateTextureLoad(e,t,n,s,r,a="0u"){let o;return r&&(n=`${n} + ${r}`),s?o=`textureLoad( ${t}, ${n}, ${s}, u32( ${a} ) )`:(o=`textureLoad( ${t}, ${n}, u32( ${a} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(o+=".x")),o}generateTextureStore(e,t,n,s,r){let a;return s?a=`textureStore( ${t}, ${n}, ${s}, ${r} )`:a=`textureStore( ${t}, ${n}, ${r} )`,a}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===fr||this.isSampleCompare(e)===!1&&e.minFilter===Fs&&e.magFilter===Fs||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,s,r,a=this.shaderStage){let o=null;return this.isUnfilterable(e)?o=this.generateTextureLod(e,t,n,s,r,"0",a):o=this._generateTextureSample(e,t,n,s,r,a),o}generateTextureGrad(e,t,n,s,r,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${s[0]}, ${s[1]}, ${a} )`:`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${s[0]}, ${s[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,n,s,r,a,o=this.shaderStage){if(o==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?a?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r}, ${s}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r}, ${s} )`:a?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,n,s,r,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${s}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${s} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,a,s):this.generateTextureLod(e,t,n,r,a,s)}generateTextureBias(e,t,n,s,r,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${s}, ${a} )`:`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${s} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,s=e.type;return s==="texture"||s==="cubeTexture"||s==="storageTexture"||s==="texture3D"?n:s==="buffer"||s==="storageBuffer"||s==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=v3e[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?e.isAtomic===!0?(console.warn("WebGPURenderer: Atomic operations are only supported in compute shaders."),Wo.READ_WRITE):Wo.READ_ONLY:e.access}getStorageAccess(e,t){return y3e[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,s=null){const r=super.getUniformFromNode(e,t,n,s),a=this.getDataFromNode(e,n,this.globalCache);if(a.uniformGPU===void 0){let o;const l=e.groupNode,c=l.name,d=this.getBindGroupArray(c,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let h=null;const m=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?e.value.is3DTexture===!0?h=new AB(r.name,r.node,l,m):h=new GD(r.name,r.node,l,m):t==="cubeTexture"?h=new Pie(r.name,r.node,l,m):t==="texture3D"&&(h=new AB(r.name,r.node,l,m)),h.store=e.isStorageTextureNode===!0,h.setVisibility(cR[n]),this.isUnfilterable(e.value)===!1&&h.store===!1){const v=new s3e(`${r.name}_sampler`,r.node,l);v.setVisibility(cR[n]),d.push(v,h),o=[v,h]}else d.push(h),o=[h]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const h=t==="buffer"?Rie:o3e,m=new h(e,l);m.setVisibility(cR[n]),d.push(m),o=m,r.name=s||"NodeBuffer_"+r.id}else{const h=this.uniformGroups[n]||(this.uniformGroups[n]={});let m=h[c];m===void 0&&(m=new Nie(c,l),m.setVisibility(cR[n]),h[c]=m,d.push(m)),o=this.getNodeUniform(r,t),m.addUniform(o)}a.uniformGPU=o}return r}getBuiltin(e,t,n,s=this.shaderStage){const r=this.builtins[s]||(this.builtins[s]=new Map);return r.has(e)===!1&&r.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),s=[];for(const a of t.inputs)s.push(a.name+" : "+this.getType(a.type));let r=`fn ${t.name}( ${s.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(r+=`	return ${n.result};
`),r+=`
}
`,r}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const s of n)t.push(`enable ${s};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:s,property:r,type:a}of n.values())t.push(`@builtin( ${s} ) ${r} : ${a}`);return t.join(`,
	`)}getScopedArray(e,t,n,s){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:s}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:s,bufferType:r,bufferCount:a}of this.scopedArrays.values()){const o=this.getType(r);t.push(`var<${s}> ${n}: array< ${o}, ${a} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const s=this.getAttributesArray();for(let r=0,a=s.length;r<a;r++){const o=s[r],l=o.name,c=this.getType(o.type);t.push(`@location( ${r} ) ${l} : ${c}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const s=e.output?"@location( "+n.index+" ) ":"";let r=this.getType(n.type);n.atomic&&(r="atomic< "+r+" >"),t.push(`	${s+n.name} : ${r}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const s=[];for(const r of n){let a=`struct ${r.name} {
`;a+=this.getStructMembers(r),a+=`
};`,s.push(a)}t=`
`+s.join(`

`)+`
`}return t}getVar(e,t,n=null){let s=`var ${t} : `;return n!==null?s+=this.generateArrayDeclaration(e,n):s+=this.getType(e),s}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const s of n)t.push(`	${this.getVar(s.type,s.name,s.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const r=this.varyings,a=this.vars[e];for(let o=0;o<r.length;o++){const l=r[o];if(l.needsInterpolation){let c=`@location( ${o} )`;if(l.interpolationType){const d=l.interpolationSampling!==null?`, ${l.interpolationSampling} )`:" )";c+=` @interpolate( ${l.interpolationType}${d}`}else/^(int|uint|ivec|uvec)/.test(l.type)&&(c+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${c} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&a.includes(l)===!1&&a.push(l)}}const n=this.getBuiltins(e);n&&t.push(n);const s=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+s):s}isCustomStruct(e){const t=e.value,n=e.node,s=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&n.structTypeNode!==null,r=n.value&&n.value.array&&typeof n.value.itemSize=="number"&&n.value.array.length>n.value.itemSize;return s&&!r}getUniforms(e){const t=this.uniforms[e],n=[],s=[],r=[],a={};for(const l of t){const c=l.groupNode.name,d=this.bindingsIndexes[c];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const h=l.node.value;this.isUnfilterable(h)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(h)?n.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${l.name}_sampler : sampler_comparison;`):n.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${l.name}_sampler : sampler;`));let m,v="";const{primarySamples:_}=this.renderer.backend.utils.getTextureSampleData(h);if(_>1&&(v="_multisampled"),h.isCubeTexture===!0)m="texture_cube<f32>";else if(h.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&h.compareFunction===null?m=`texture${v}_2d<f32>`:m=`texture_depth${v}_2d${h.isArrayTexture===!0?"_array":""}`;else if(l.node.isStorageTextureNode===!0){const x=RB(h),T=this.getStorageAccess(l.node,e),b=l.node.value.is3DTexture,w=l.node.value.isArrayTexture;m=`texture_storage_${b?"3d":`2d${w?"_array":""}`}<${x}, ${T}>`}else if(h.isArrayTexture===!0||h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0)m="texture_2d_array<f32>";else if(h.is3DTexture===!0||h.isData3DTexture===!0)m="texture_3d<f32>";else{const x=this.getComponentTypeFromTexture(h).charAt(0);m=`texture${v}_2d<${x}32>`}n.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${l.name} : ${m};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const h=l.node,m=this.getType(h.getNodeType(this)),v=h.bufferCount,_=v>0&&l.type==="buffer"?", "+v:"",x=h.isStorageBufferNode?`storage, ${this.getStorageAccess(h,e)}`:"uniform";if(this.isCustomStruct(l))s.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var<${x}> ${l.name} : ${m};`);else{const b=`	value : array< ${h.isAtomic?`atomic<${m}>`:`${m}`}${_} >`;s.push(this._getWGSLStructBinding(l.name,b,x,d.binding++,d.group))}}else{const h=this.getType(this.getVectorType(l.type)),m=l.groupNode.name;(a[m]||(a[m]={index:d.binding++,id:d.group,snippets:[]})).snippets.push(`	${l.name} : ${h}`)}}for(const l in a){const c=a[l];r.push(this._getWGSLStructBinding(l,c.snippets.join(`,
`),"uniform",c.index,c.id))}let o=n.join(`
`);return o+=s.join(`
`),o+=r.join(`
`),o}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let s=`// code

`;s+=this.flowCode[t];const r=this.flowNodes[t],a=r[r.length-1],o=a.outputNode,l=o!==void 0&&o.isOutputStructNode===!0;for(const c of r){const d=this.getFlowData(c),h=c.name;if(h&&(s.length>0&&(s+=`
`),s+=`	// flow -> ${h}
`),s+=`${d.code}
	`,c===a&&t!=="compute"){if(s+=`// result

	`,t==="vertex")s+=`varyings.Vertex = ${d.result};`;else if(t==="fragment")if(l)n.returnType=o.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",s+=`return ${d.result};`;else{let m="	@location(0) color: vec4<f32>";const v=this.getBuiltins("output");v&&(m+=`,
	`+v),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",m),n.structs+=`
var<private> output : OutputStruct;`,s+=`output.color = ${d.result};

	return output;`}}}n.flow=s}if(this.shaderStage=null,this.material!==null)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{const t=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,t)}}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getBitcastMethod(e){return`bitcast<${this.getType(e)}>`}getTernary(e,t,n){return`select( ${n}, ${t}, ${e} )`}getType(e){return _3e[e]||e}isAvailable(e){let t=o$[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),o$[e]=t),t}_getWGSLMethod(e){return S1[e]!==void 0&&this._include(e),x3e[e]}_include(e){const t=S1[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${Uie}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){const[n,s,r]=t;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${n}, ${s}, ${r} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${n} * numWorkgroups.x )
		+ globalId.z * ( ${n} * numWorkgroups.x ) * ( ${s} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,s=0,r=0){const a=e+"Struct";return`${this._getWGSLStruct(a,t)}
@binding( ${s} ) @group( ${r} )
var<${n}> ${e} : ${a};`}}class S3e{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=ge.Depth24PlusStencil8:e.depth&&(t=ge.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const r=this.backend.renderer,a=r.getRenderTarget();t=a?a.samples:r.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return hb.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return hb.LineList;if(e.isLine)return hb.LineStrip;if(e.isMesh)return hb.TriangleList}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===Tr)return ge.BGRA8Unorm;if(e===$a)return ge.RGBA16Float;throw new Error("Unsupported outputType")}}const Bie=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);typeof Float16Array<"u"&&Bie.set(Float16Array,["float16"]);const T3e=new Map([[M2,["float16"]]]),E3e=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class w3e{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),s=this.backend,r=s.get(n);let a=r.buffer;if(a===void 0){const o=s.device;let l=n.array;if(e.normalized===!1){if(l.constructor===Int16Array||l.constructor===Int8Array)l=new Int32Array(l);else if((l.constructor===Uint16Array||l.constructor===Uint8Array)&&(l=new Uint32Array(l),t&GPUBufferUsage.INDEX))for(let h=0;h<l.length;h++)l[h]===65535&&(l[h]=4294967295)}if(n.array=l,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){l=new l.constructor(n.count*4);for(let h=0;h<n.count;h++)l.set(n.array.subarray(h*3,h*3+3),h*4);n.itemSize=4,n.array=l,r._force3to4BytesAlignment=!0}const c=l.byteLength,d=c+(4-c%4)%4;a=o.createBuffer({label:n.name,size:d,usage:t,mappedAtCreation:!0}),new l.constructor(a.getMappedRange()).set(l),a.unmap(),r.buffer=a}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,s=n.device,r=n.get(t),a=n.get(t).buffer;let o=t.array;if(r._force3to4BytesAlignment===!0){o=new o.constructor(t.count*4);for(let d=0;d<t.count;d++)o.set(t.array.subarray(d*3,d*3+3),d*4);t.array=o}const l=this._isTypedArray(o),c=t.updateRanges;if(c.length===0)s.queue.writeBuffer(a,0,o,0);else{const d=l?1:o.BYTES_PER_ELEMENT;for(let h=0,m=c.length;h<m;h++){const v=c[h];let _,x;if(r._force3to4BytesAlignment===!0){const b=Math.floor(v.start/3),w=Math.ceil(v.count/3);_=b*4*d,x=w*4*d}else _=v.start*d,x=v.count*d;const T=_*(l?o.BYTES_PER_ELEMENT:1);s.queue.writeBuffer(a,T,o,_,x)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let s=0;s<t.length;s++){const r=t[s],a=r.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(r);let l=n.get(o);if(l===void 0){let h,m;r.isInterleavedBufferAttribute===!0?(h=r.data.stride*a,m=r.data.isInstancedInterleavedBuffer?lR.Instance:lR.Vertex):(h=r.itemSize*a,m=r.isInstancedBufferAttribute?lR.Instance:lR.Vertex),r.normalized===!1&&(r.array.constructor===Int16Array||r.array.constructor===Uint16Array)&&(h=4),l={arrayStride:h,attributes:[],stepMode:m},n.set(o,l)}const c=this._getVertexFormat(r),d=r.isInterleavedBufferAttribute===!0?r.offset*a:0;l.attributes.push({shaderLocation:s,offset:d,format:c})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,r=t.get(this._getBufferAttribute(e)).buffer,a=r.size,o=n.createBuffer({label:`${e.name}_readback`,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=n.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(r,0,o,0,a);const c=l.finish();n.queue.submit([c]),await o.mapAsync(GPUMapMode.READ);const d=o.getMappedRange(),h=new e.array.constructor(d.slice(0));return o.unmap(),h.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,s=e.array.constructor,r=e.constructor;let a;if(t===1)a=E3e.get(s);else{const l=(T3e.get(r)||Bie.get(s))[n?1:0];if(l){const c=s.BYTES_PER_ELEMENT*t,h=Math.floor((c+3)/4)*4/s.BYTES_PER_ELEMENT;if(h%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${l}x${h}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class M3e{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,s=[];let r=0;for(const a of e.bindings){const o={binding:r++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const l={};a.isStorageBuffer&&(a.visibility&4&&(a.access===Wo.READ_WRITE||a.access===Wo.WRITE_ONLY)?l.type=yU.Storage:l.type=yU.ReadOnlyStorage),o.buffer=l}else if(a.isSampledTexture&&a.store){const l={};l.format=this.backend.get(a.texture).texture.format;const c=a.access;c===Wo.READ_WRITE?l.access=vU.ReadWrite:c===Wo.WRITE_ONLY?l.access=vU.WriteOnly:l.access=vU.ReadOnly,a.texture.isArrayTexture?l.viewDimension=io.TwoDArray:a.texture.is3DTexture&&(l.viewDimension=io.ThreeD),o.storageTexture=l}else if(a.isSampledTexture){const l={},{primarySamples:c}=t.utils.getTextureSampleData(a.texture);if(c>1&&(l.multisampled=!0,a.texture.isDepthTexture||(l.sampleType=uv.UnfilterableFloat)),a.texture.isDepthTexture)t.compatibilityMode&&a.texture.compareFunction===null?l.sampleType=uv.UnfilterableFloat:l.sampleType=uv.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const d=a.texture.type;d===oo?l.sampleType=uv.SInt:d===Rs?l.sampleType=uv.UInt:d===fr&&(this.backend.hasFeature("float32-filterable")?l.sampleType=uv.Float:l.sampleType=uv.UnfilterableFloat)}a.isSampledCubeTexture?l.viewDimension=io.Cube:a.texture.isArrayTexture||a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?l.viewDimension=io.TwoDArray:a.isSampledTexture3D&&(l.viewDimension=io.ThreeD),o.texture=l}else if(a.isSampler){const l={};a.texture.isDepthTexture&&(a.texture.compareFunction!==null?l.type=i$.Comparison:t.compatibilityMode&&(l.type=i$.NonFiltering)),o.sampler=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);s.push(o)}return n.createBindGroupLayout({entries:s})}createBindings(e,t,n,s=0){const{backend:r,bindGroupLayoutCache:a}=this,o=r.get(e);let l=a.get(e.bindingsReference);l===void 0&&(l=this.createBindingsLayout(e),a.set(e.bindingsReference,l));let c;n>0&&(o.groups===void 0&&(o.groups=[],o.versions=[]),o.versions[n]===s&&(c=o.groups[n])),c===void 0&&(c=this.createBindGroup(e,l),n>0&&(o.groups[n]=c,o.versions[n]=s)),o.group=c,o.layout=l}updateBinding(e){const t=this.backend,n=t.device,s=e.buffer,r=t.get(e).buffer;n.queue.writeBuffer(r,0,s,0)}createBindGroupIndex(e,t){const s=this.backend.device,r=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a=e[0],o=s.createBuffer({label:"bindingCameraIndex_"+a,size:16,usage:r});s.queue.writeBuffer(o,0,e,0);const l=[{binding:0,resource:{buffer:o}}];return s.createBindGroup({label:"bindGroupCameraIndex_"+a,layout:t,entries:l})}createBindGroup(e,t){const n=this.backend,s=n.device;let r=0;const a=[];for(const o of e.bindings){if(o.isUniformBuffer){const l=n.get(o);if(l.buffer===void 0){const c=o.byteLength,d=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,h=s.createBuffer({label:"bindingBuffer_"+o.name,size:c,usage:d});l.buffer=h}a.push({binding:r,resource:{buffer:l.buffer}})}else if(o.isStorageBuffer){const l=n.get(o);if(l.buffer===void 0){const c=o.attribute;l.buffer=n.get(c).buffer}a.push({binding:r,resource:{buffer:l.buffer}})}else if(o.isSampledTexture){const l=n.get(o.texture);let c;if(l.externalTexture!==void 0)c=s.importExternalTexture({source:l.externalTexture});else{const d=o.store?1:l.texture.mipLevelCount;let h=`view-${l.texture.width}-${l.texture.height}`;if(l.texture.depthOrArrayLayers>1&&(h+=`-${l.texture.depthOrArrayLayers}`),h+=`-${d}`,c=l[h],c===void 0){const m=i3e.All;let v;o.isSampledCubeTexture?v=io.Cube:o.isSampledTexture3D?v=io.ThreeD:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?v=io.TwoDArray:v=io.TwoD,c=l[h]=l.texture.createView({aspect:m,dimension:v,mipLevelCount:d})}}a.push({binding:r,resource:c})}else if(o.isSampler){const l=n.get(o.texture);a.push({binding:r,resource:l.sampler})}r++}return s.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:a})}}class A3e{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:s,geometry:r,pipeline:a}=e,{vertexProgram:o,fragmentProgram:l}=a,c=this.backend,d=c.device,h=c.utils,m=c.get(a),v=[];for(const Z of e.getBindings()){const se=c.get(Z);v.push(se.layout)}const _=c.attributeUtils.createShaderVertexBuffers(e);let x;s.blending!==ql&&(s.blending!==Dc||s.transparent!==!1)&&(x=this._getBlending(s));let T={};s.stencilWrite===!0&&(T={compare:this._getStencilCompare(s),failOp:this._getStencilOperation(s.stencilFail),depthFailOp:this._getStencilOperation(s.stencilZFail),passOp:this._getStencilOperation(s.stencilZPass)});const b=this._getColorWriteMask(s),w=[];if(e.context.textures!==null){const Z=e.context.textures;for(let se=0;se<Z.length;se++){const oe=h.getTextureFormatGPU(Z[se]);w.push({format:oe,blend:x,writeMask:b})}}else{const Z=h.getCurrentColorFormat(e.context);w.push({format:Z,blend:x,writeMask:b})}const M=c.get(o).module,R=c.get(l).module,N=this._getPrimitiveState(n,r,s),D=this._getDepthCompare(s),L=h.getCurrentDepthStencilFormat(e.context),F=this._getSampleCount(e.context),I={label:`renderPipeline_${s.name||s.type}_${s.id}`,vertex:Object.assign({},M,{buffers:_}),fragment:Object.assign({},R,{targets:w}),primitive:N,multisample:{count:F,alphaToCoverageEnabled:s.alphaToCoverage&&F>1},layout:d.createPipelineLayout({bindGroupLayouts:v})},z={},H=e.context.depth,Y=e.context.stencil;if((H===!0||Y===!0)&&(H===!0&&(z.format=L,z.depthWriteEnabled=s.depthWrite,z.depthCompare=D),Y===!0&&(z.stencilFront=T,z.stencilBack={},z.stencilReadMask=s.stencilFuncMask,z.stencilWriteMask=s.stencilWriteMask),s.polygonOffset===!0&&(z.depthBias=s.polygonOffsetUnits,z.depthBiasSlopeScale=s.polygonOffsetFactor,z.depthBiasClamp=0),I.depthStencil=z),t===null)m.pipeline=d.createRenderPipeline(I);else{const Z=new Promise(se=>{d.createRenderPipelineAsync(I).then(oe=>{m.pipeline=oe,se()})});t.push(Z)}}createBundleEncoder(e,t="renderBundleEncoder"){const n=this.backend,{utils:s,device:r}=n,a=s.getCurrentDepthStencilFormat(e),o=s.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:t,colorFormats:[o],depthStencilFormat:a,sampleCount:l};return r.createRenderBundleEncoder(c)}createComputePipeline(e,t){const n=this.backend,s=n.device,r=n.get(e.computeProgram).module,a=n.get(e),o=[];for(const l of t){const c=n.get(l);o.push(c.layout)}a.pipeline=s.createComputePipeline({compute:r,layout:s.createPipelineLayout({bindGroupLayouts:o})})}_getBlending(e){let t,n;const s=e.blending,r=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(s===ry){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:r,c=e.blendDstAlpha!==null?e.blendDstAlpha:a,d=e.blendEquationAlpha!==null?e.blendEquationAlpha:o;t={srcFactor:this._getBlendFactor(r),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},n={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(d)}}else{const l=e.premultipliedAlpha,c=(d,h,m,v)=>{t={srcFactor:d,dstFactor:h,operation:cv.Add},n={srcFactor:m,dstFactor:v,operation:cv.Add}};if(l)switch(s){case Dc:c(Gi.One,Gi.OneMinusSrcAlpha,Gi.One,Gi.OneMinusSrcAlpha);break;case my:c(Gi.One,Gi.One,Gi.One,Gi.One);break;case gy:c(Gi.Zero,Gi.OneMinusSrc,Gi.Zero,Gi.One);break;case yy:c(Gi.Dst,Gi.OneMinusSrcAlpha,Gi.Zero,Gi.One);break}else switch(s){case Dc:c(Gi.SrcAlpha,Gi.OneMinusSrcAlpha,Gi.One,Gi.OneMinusSrcAlpha);break;case my:c(Gi.SrcAlpha,Gi.One,Gi.One,Gi.One);break;case gy:console.error("THREE.WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case yy:console.error("THREE.WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true");break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",s)}_getBlendFactor(e){let t;switch(e){case Nf:t=Gi.Zero;break;case yw:t=Gi.One;break;case vw:t=Gi.Src;break;case _w:t=Gi.OneMinusSrc;break;case qv:t=Gi.SrcAlpha;break;case Xv:t=Gi.OneMinusSrcAlpha;break;case Sw:t=Gi.Dst;break;case Tw:t=Gi.OneMinusDst;break;case xw:t=Gi.DstAlpha;break;case bw:t=Gi.OneMinusDstAlpha;break;case Ew:t=Gi.SrcAlphaSaturated;break;case T2e:t=Gi.Constant;break;case E2e:t=Gi.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case NF:t=fl.Never;break;case NE:t=fl.Always;break;case DF:t=fl.Less;break;case OF:t=fl.LessEqual;break;case PF:t=fl.Equal;break;case BF:t=fl.GreaterEqual;break;case LF:t=fl.Greater;break;case UF:t=fl.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case rm:t=Bg.Keep;break;case TF:t=Bg.Zero;break;case EF:t=Bg.Replace;break;case RF:t=Bg.Invert;break;case wF:t=Bg.IncrementClamp;break;case MF:t=Bg.DecrementClamp;break;case AF:t=Bg.IncrementWrap;break;case CF:t=Bg.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Ho:t=cv.Add;break;case mw:t=cv.Subtract;break;case gw:t=cv.ReverseSubtract;break;case p2:t=cv.Min;break;case m2:t=cv.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const s={},r=this.backend.utils;s.topology=r.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(s.stripIndexFormat=t.index.array instanceof Uint16Array?sS.Uint16:sS.Uint32);let a=n.side===Ts;return e.isMesh&&e.matrixWorld.determinant()<0&&(a=!a),s.frontFace=a===!0?e$.CW:e$.CCW,s.cullMode=n.side===Go?t$.None:t$.Back,s}_getColorWriteMask(e){return e.colorWrite===!0?n$.All:n$.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=fl.Always;else{const n=e.depthFunc;switch(n){case Yv:t=fl.Never;break;case Kv:t=fl.Always;break;case Zv:t=fl.Less;break;case op:t=fl.LessEqual;break;case Qv:t=fl.Equal;break;case Jv:t=fl.GreaterEqual;break;case e_:t=fl.Greater;break;case t_:t=fl.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class C3e extends Lie{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const s=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return Xl(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const s=this.device.createCommandEncoder();s.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),s.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const r=s.finish();if(this.device.queue.submit([r]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const a=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let o=0;for(const[,l]of e){const c=a[l],d=a[l+1],h=Number(d-c)/1e6;o+=h}return this.resultBuffer.unmap(),this.lastValue=o,o}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class R3e extends Oie{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new S3e(this),this.attributeUtils=new w3e(this),this.bindingUtils=new M3e(this),this.pipelineUtils=new A3e(this),this.textureUtils=new d3e(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const o={powerPreference:t.powerPreference,featureLevel:t.compatibilityMode?"compatibility":void 0},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(o):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const c=Object.values(CB),d=[];for(const m of c)l.features.has(m)&&d.push(m);const h={requiredFeatures:d,requiredLimits:t.requiredLimits};n=await l.requestDevice(h)}else n=t.device;n.lost.then(o=>{const l={api:"WebGPU",message:o.message||"Unknown reason",reason:o.reason||null,originalEvent:o};e.onDeviceLost(l)});const s=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=s;const r=t.alpha?"premultiplied":"opaque",a=Sn.getToneMappingMode(this.renderer.outputColorSpace);this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:r,toneMapping:{mode:a}}),this.trackTimestamp=this.trackTimestamp&&this.hasFeature(CB.TimestampQuery),this.updateSize()}get coordinateSystem(){return id}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const s=e.colorAttachments[0];this.renderer.samples>0?s.view=this.colorBuffer.createView():s.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,s=this.get(n);let r=s.descriptors;(r===void 0||s.width!==n.width||s.height!==n.height||s.samples!==n.samples)&&(r={},s.descriptors=r);const a=e.getCacheKey();let o=r[a];if(o===void 0){const c=e.textures,d=[];let h;const m=this._isRenderCameraDepthArray(e);for(let v=0;v<c.length;v++){const _=this.get(c[v]),x={label:`colorAttachment_${v}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:io.TwoD};if(n.isRenderTarget3D)h=e.activeCubeFace,x.baseArrayLayer=0,x.dimension=io.ThreeD,x.depthOrArrayLayers=c[v].image.depth;else if(n.isRenderTarget&&c[v].image.depth>1)if(m===!0){const T=e.camera.cameras;for(let b=0;b<T.length;b++){const w={...x,baseArrayLayer:b,arrayLayerCount:1,dimension:io.TwoD},M=_.texture.createView(w);d.push({view:M,resolveTarget:void 0,depthSlice:void 0})}}else x.dimension=io.TwoDArray,x.depthOrArrayLayers=c[v].image.depth;if(m!==!0){const T=_.texture.createView(x);let b,w;_.msaaTexture!==void 0?(b=_.msaaTexture.createView(),w=T):(b=T,w=void 0),d.push({view:b,resolveTarget:w,depthSlice:h})}}if(o={textureViews:d},e.depth){const v=this.get(e.depthTexture),_={};e.depthTexture.isArrayTexture&&(_.dimension=io.TwoD,_.arrayLayerCount=1,_.baseArrayLayer=e.activeCubeFace),o.depthStencilView=v.texture.createView(_)}r[a]=o,s.width=n.width,s.height=n.height,s.samples=n.samples,s.activeMipmapLevel=e.activeMipmapLevel,s.activeCubeFace=e.activeCubeFace}const l={colorAttachments:[]};for(let c=0;c<o.textureViews.length;c++){const d=o.textureViews[c];let h={r:0,g:0,b:0,a:1};c===0&&t.clearValue&&(h=t.clearValue),l.colorAttachments.push({view:d.view,depthSlice:d.depthSlice,resolveTarget:d.resolveTarget,loadOp:t.loadOp||xs.Load,storeOp:t.storeOp||_c.Store,clearValue:h})}return o.depthStencilView&&(l.depthStencilAttachment={view:o.depthStencilView}),l}beginRender(e){const t=this.get(e);t.frameCalls=this.renderer.info.render.frameCalls;const n=this.device,s=e.occlusionQueryCount;let r;s>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,r=n.createQuerySet({type:"occlusion",count:s,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=r,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(s),t.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e,{loadOp:xs.Load}),this.initTimestampQuery(Jg.RENDER,this.getTimestampUID(e),a),a.occlusionQuerySet=r;const o=a.depthStencilAttachment;if(e.textures!==null){const c=a.colorAttachments;for(let d=0;d<c.length;d++){const h=c[d];e.clearColor?(h.clearValue=d===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=xs.Clear):h.loadOp=xs.Load,h.storeOp=_c.Store}}else{const c=a.colorAttachments[0];e.clearColor?(c.clearValue=e.clearColorValue,c.loadOp=xs.Clear):c.loadOp=xs.Load,c.storeOp=_c.Store}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=xs.Clear):o.depthLoadOp=xs.Load,o.depthStoreOp=_c.Store),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=xs.Clear):o.stencilLoadOp=xs.Load,o.stencilStoreOp=_c.Store);const l=n.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const c=e.camera.cameras;!t.layerDescriptors||t.layerDescriptors.length!==c.length?this._createDepthLayerDescriptors(e,t,a,c):this._updateDepthLayerDescriptors(e,t,c),t.bundleEncoders=[],t.bundleSets=[];for(let d=0;d<c.length;d++){const h=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+d),m={attributes:{},bindingGroups:[],pipeline:null,index:null};t.bundleEncoders.push(h),t.bundleSets.push(m)}t.currentPass=null}else{const c=l.beginRenderPass(a);if(t.currentPass=c,e.viewport&&this.updateViewport(e),e.scissor){const{x:d,y:h,width:m,height:v}=e.scissorValue;c.setScissorRect(d,h,m,v)}}t.descriptor=a,t.encoder=l,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[]}_createDepthLayerDescriptors(e,t,n,s){const r=n.depthStencilAttachment;t.layerDescriptors=[];const a=this.get(e.depthTexture);a.viewCache||(a.viewCache=[]);for(let o=0;o<s.length;o++){const l={...n,colorAttachments:[{...n.colorAttachments[0],view:n.colorAttachments[o].view}]};if(n.depthStencilAttachment){const c=o;a.viewCache[c]||(a.viewCache[c]=a.texture.createView({dimension:io.TwoD,baseArrayLayer:o,arrayLayerCount:1})),l.depthStencilAttachment={view:a.viewCache[c],depthLoadOp:r.depthLoadOp||xs.Clear,depthStoreOp:r.depthStoreOp||_c.Store,depthClearValue:r.depthClearValue||1},e.stencil&&(l.depthStencilAttachment.stencilLoadOp=r.stencilLoadOp,l.depthStencilAttachment.stencilStoreOp=r.stencilStoreOp,l.depthStencilAttachment.stencilClearValue=r.stencilClearValue)}else l.depthStencilAttachment={...r};t.layerDescriptors.push(l)}}_updateDepthLayerDescriptors(e,t,n){for(let s=0;s<n.length;s++){const r=t.layerDescriptors[s];if(r.depthStencilAttachment){const a=r.depthStencilAttachment;e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=xs.Clear):a.depthLoadOp=xs.Load),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=xs.Clear):a.stencilLoadOp=xs.Load)}}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();const s=t.encoder;if(this._isRenderCameraDepthArray(e)===!0){const r=[];for(let a=0;a<t.bundleEncoders.length;a++){const o=t.bundleEncoders[a];r.push(o.finish())}for(let a=0;a<t.layerDescriptors.length;a++)if(a<r.length){const o=t.layerDescriptors[a],l=s.beginRenderPass(o);if(e.viewport){const{x:c,y:d,width:h,height:m,minDepth:v,maxDepth:_}=e.viewportValue;l.setViewport(c,d,h,m,v,_)}if(e.scissor){const{x:c,y:d,width:h,height:m}=e.scissorValue;l.setScissorRect(c,d,h,m)}l.executeBundles([r[a]]),l.end()}}else t.currentPass&&t.currentPass.end();if(n>0){const r=n*8;let a=this.occludedResolveCache.get(r);a===void 0&&(a=this.device.createBuffer({size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(r,a));const o=this.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,a,0),t.encoder.copyBufferToBuffer(a,0,o,0,r),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const r=e.textures;for(let a=0;a<r.length;a++){const o=r[a];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:s}=t;if(n&&s){const r=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const a=n.getMappedRange(),o=new BigUint64Array(a);for(let l=0;l<s.length;l++)o[l]===BigInt(0)&&r.add(s[l]);n.destroy(),t.occluded=r}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:s,width:r,height:a,minDepth:o,maxDepth:l}=e.viewportValue;t.setViewport(n,s,r,a,o,l)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,n,s=null){const r=this.device,a=this.renderer;let o=[],l,c,d,h;if(e){const _=this.getClearColor();c={r:_.r,g:_.g,b:_.b,a:_.a}}if(s===null){d=a.depth,h=a.stencil;const _=this._getDefaultRenderPassDescriptor();if(e){o=_.colorAttachments;const x=o[0];x.clearValue=c,x.loadOp=xs.Clear,x.storeOp=_c.Store}(d||h)&&(l=_.depthStencilAttachment)}else{d=s.depth,h=s.stencil;const _={loadOp:e?xs.Clear:xs.Load,clearValue:e?c:void 0};d&&(_.depthLoadOp=t?xs.Clear:xs.Load,_.depthClearValue=t?a.getClearDepth():void 0,_.depthStoreOp=_c.Store),h&&(_.stencilLoadOp=n?xs.Clear:xs.Load,_.stencilClearValue=n?a.getClearStencil():void 0,_.stencilStoreOp=_c.Store);const x=this._getRenderPassDescriptor(s,_);o=x.colorAttachments,l=x.depthStencilAttachment}d&&l&&(t?(l.depthLoadOp=xs.Clear,l.depthClearValue=a.getClearDepth(),l.depthStoreOp=_c.Store):(l.depthLoadOp=xs.Load,l.depthStoreOp=_c.Store)),h&&l&&(n?(l.stencilLoadOp=xs.Clear,l.stencilClearValue=a.getClearStencil(),l.stencilStoreOp=_c.Store):(l.stencilLoadOp=xs.Load,l.stencilStoreOp=_c.Store));const m=r.createCommandEncoder({label:"clear"});m.beginRenderPass({colorAttachments:o,depthStencilAttachment:l}).end(),r.queue.submit([m.finish()])}beginCompute(e){const t=this.get(e);t.frameCalls=this.renderer.info.compute.frameCalls;const n={label:"computeGroup_"+e.id};this.initTimestampQuery(Jg.COMPUTE,this.getTimestampUID(e),n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,s,r=null){const a=this.get(t),{passEncoderGPU:o}=this.get(e),l=this.get(s).pipeline;this.pipelineUtils.setPipeline(o,l);for(let d=0,h=n.length;d<h;d++){const m=n[d],v=this.get(m);o.setBindGroup(d,v.group)}let c;if(r===null&&(r=t.count),typeof r=="number"){const d=r;if(a.dispatchSize===void 0||a.count!==d){a.dispatchSize=[0,1,1],a.count=d;const h=t.workgroupSize;let m=h[0];for(let x=1;x<h.length;x++)m*=h[x];const v=Math.ceil(d/m),_=this.device.limits.maxComputeWorkgroupsPerDimension;c=[v,1,1],v>_&&(c[0]=Math.min(v,_),c[1]=Math.ceil(v/_)),a.dispatchSize=c}c=a.dispatchSize}else c=r;o.dispatchWorkgroups(c[0],c[1]||1,c[2]||1)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,material:s,context:r,pipeline:a}=e,o=e.getBindings(),l=this.get(r),c=this.get(a).pipeline,d=e.getIndex(),h=d!==null,m=e.getDrawParameters();if(m===null)return;const v=(x,T)=>{this.pipelineUtils.setPipeline(x,c),T.pipeline=c;const b=T.bindingGroups;for(let M=0,R=o.length;M<R;M++){const N=o[M],D=this.get(N);b[N.index]!==N.id&&(x.setBindGroup(N.index,D.group),b[N.index]=N.id)}if(h===!0&&T.index!==d){const M=this.get(d).buffer,R=d.array instanceof Uint16Array?sS.Uint16:sS.Uint32;x.setIndexBuffer(M,R),T.index=d}const w=e.getVertexBuffers();for(let M=0,R=w.length;M<R;M++){const N=w[M];if(T.attributes[M]!==N){const D=this.get(N).buffer;x.setVertexBuffer(M,D),T.attributes[M]=N}}r.stencil===!0&&s.stencilWrite===!0&&l.currentStencilRef!==s.stencilRef&&(x.setStencilReference(s.stencilRef),l.currentStencilRef=s.stencilRef)},_=(x,T)=>{if(v(x,T),n.isBatchedMesh===!0){const b=n._multiDrawStarts,w=n._multiDrawCounts,M=n._multiDrawCount,R=n._multiDrawInstances;R!==null&&Xl("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let N=0;N<M;N++){const D=R?R[N]:1,L=D>1?0:N;h===!0?x.drawIndexed(w[N],D,b[N]/d.array.BYTES_PER_ELEMENT,0,L):x.draw(w[N],D,b[N],L),t.update(n,w[N],D)}}else if(h===!0){const{vertexCount:b,instanceCount:w,firstVertex:M}=m,R=e.getIndirect();if(R!==null){const N=this.get(R).buffer;x.drawIndexedIndirect(N,0)}else x.drawIndexed(b,w,M,0,0);t.update(n,b,w)}else{const{vertexCount:b,instanceCount:w,firstVertex:M}=m,R=e.getIndirect();if(R!==null){const N=this.get(R).buffer;x.drawIndirect(N,0)}else x.draw(b,w,M,0);t.update(n,b,w)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const x=this.get(e.camera),T=e.camera.cameras,b=e.getBindingGroup("cameraIndex");if(x.indexesGPU===void 0||x.indexesGPU.length!==T.length){const M=this.get(b),R=[],N=new Uint32Array([0,0,0,0]);for(let D=0,L=T.length;D<L;D++){N[0]=D;const F=this.bindingUtils.createBindGroupIndex(N,M.layout);R.push(F)}x.indexesGPU=R}const w=this.renderer.getPixelRatio();for(let M=0,R=T.length;M<R;M++){const N=T[M];if(n.layers.test(N.layers)){const D=N.viewport;let L=l.currentPass,F=l.currentSets;if(l.bundleEncoders){const I=l.bundleEncoders[M],z=l.bundleSets[M];L=I,F=z}D&&L.setViewport(Math.floor(D.x*w),Math.floor(D.y*w),Math.floor(D.width*w),Math.floor(D.height*w),r.viewportValue.minDepth,r.viewportValue.maxDepth),b&&x.indexesGPU&&(L.setBindGroup(b.index,x.indexesGPU[M]),F.bindingGroups[b.index]=b.id),_(L,F)}}}else if(l.currentPass){if(l.occlusionQuerySet!==void 0){const x=l.lastOcclusionObject;x!==n&&(x!==null&&x.occlusionTest===!0&&(l.currentPass.endOcclusionQuery(),l.occlusionQueryIndex++),n.occlusionTest===!0&&(l.currentPass.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=n),l.lastOcclusionObject=n)}_(l.currentPass,l.currentSets)}}needsRenderUpdate(e){const t=this.get(e),{object:n,material:s}=e,r=this.utils,a=r.getSampleCountRenderContext(e.context),o=r.getCurrentColorSpace(e.context),l=r.getCurrentColorFormat(e.context),c=r.getCurrentDepthStencilFormat(e.context),d=r.getPrimitiveTopology(n,s);let h=!1;return(t.material!==s||t.materialVersion!==s.version||t.transparent!==s.transparent||t.blending!==s.blending||t.premultipliedAlpha!==s.premultipliedAlpha||t.blendSrc!==s.blendSrc||t.blendDst!==s.blendDst||t.blendEquation!==s.blendEquation||t.blendSrcAlpha!==s.blendSrcAlpha||t.blendDstAlpha!==s.blendDstAlpha||t.blendEquationAlpha!==s.blendEquationAlpha||t.colorWrite!==s.colorWrite||t.depthWrite!==s.depthWrite||t.depthTest!==s.depthTest||t.depthFunc!==s.depthFunc||t.stencilWrite!==s.stencilWrite||t.stencilFunc!==s.stencilFunc||t.stencilFail!==s.stencilFail||t.stencilZFail!==s.stencilZFail||t.stencilZPass!==s.stencilZPass||t.stencilFuncMask!==s.stencilFuncMask||t.stencilWriteMask!==s.stencilWriteMask||t.side!==s.side||t.alphaToCoverage!==s.alphaToCoverage||t.sampleCount!==a||t.colorSpace!==o||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==d||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=s,t.materialVersion=s.version,t.transparent=s.transparent,t.blending=s.blending,t.premultipliedAlpha=s.premultipliedAlpha,t.blendSrc=s.blendSrc,t.blendDst=s.blendDst,t.blendEquation=s.blendEquation,t.blendSrcAlpha=s.blendSrcAlpha,t.blendDstAlpha=s.blendDstAlpha,t.blendEquationAlpha=s.blendEquationAlpha,t.colorWrite=s.colorWrite,t.depthWrite=s.depthWrite,t.depthTest=s.depthTest,t.depthFunc=s.depthFunc,t.stencilWrite=s.stencilWrite,t.stencilFunc=s.stencilFunc,t.stencilFail=s.stencilFail,t.stencilZFail=s.stencilZFail,t.stencilZPass=s.stencilZPass,t.stencilFuncMask=s.stencilFuncMask,t.stencilWriteMask=s.stencilWriteMask,t.side=s.side,t.alphaToCoverage=s.alphaToCoverage,t.sampleCount=a,t.colorSpace=o,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=d,t.clippingContextCacheKey=e.clippingContextCacheKey,h=!0),h}getRenderCacheKey(e){const{object:t,material:n}=e,s=this.utils,r=e.context,a=t.isMesh&&t.matrixWorld.determinant()<0;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,a,s.getSampleCountRenderContext(r),s.getCurrentColorSpace(r),s.getCurrentColorFormat(r),s.getCurrentDepthStencilFormat(r),s.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,s,r,a){return this.textureUtils.copyTextureToBuffer(e,t,n,s,r,a)}initTimestampQuery(e,t,n){if(!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new C3e(this.device,e,2048));const s=this.timestampQueryPool[e],r=s.allocateQueriesForContext(t);n.timestampWrites={querySet:s.querySet,beginningOfPassWriteIndex:r,endOfPassWriteIndex:r+1}}createNodeBuilder(e,t){return new b3e(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),r=n.currentPass.finish();this.get(t).bundleGPU=r,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,s){this.bindingUtils.createBindings(e,t,n,s)}updateBindings(e,t,n,s){this.bindingUtils.createBindings(e,t,n,s)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){let t=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(t|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,t)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,s=null,r=0,a=0){let o=0,l=0,c=0,d=0,h=0,m=0,v=e.image.width,_=e.image.height,x=1;n!==null&&(n.isBox3===!0?(d=n.min.x,h=n.min.y,m=n.min.z,v=n.max.x-n.min.x,_=n.max.y-n.min.y,x=n.max.z-n.min.z):(d=n.min.x,h=n.min.y,v=n.max.x-n.min.x,_=n.max.y-n.min.y,x=1)),s!==null&&(o=s.x,l=s.y,c=s.z||0);const T=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),b=this.get(e).texture,w=this.get(t).texture;T.copyTextureToTexture({texture:b,mipLevel:r,origin:{x:d,y:h,z:m}},{texture:w,mipLevel:a,origin:{x:o,y:l,z:c}},[v,_,x]),this.device.queue.submit([T.finish()]),a===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,n){const s=this.get(t);let r=null;t.renderTarget?e.isDepthTexture?r=this.get(t.depthTexture).texture:r=this.get(t.textures[0]).texture:e.isDepthTexture?r=this.textureUtils.getDepthBuffer(t.depth,t.stencil):r=this.context.getCurrentTexture();const a=this.get(e).texture;if(r.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",r.format,a.format);return}let o;if(s.currentPass?(s.currentPass.end(),o=s.encoder):o=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),o.copyTextureToTexture({texture:r,origin:[n.x,n.y,0]},{texture:a},[n.z,n.w]),s.currentPass){const{descriptor:l}=s;for(let c=0;c<l.colorAttachments.length;c++)l.colorAttachments[c].loadOp=xs.Load;if(t.depth&&(l.depthStencilAttachment.depthLoadOp=xs.Load),t.stencil&&(l.depthStencilAttachment.stencilLoadOp=xs.Load),s.currentPass=o.beginRenderPass(l),s.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:c,y:d,width:h,height:m}=t.scissorValue;s.currentPass.setScissorRect(c,d,h,m)}}else this.device.queue.submit([o.finish()]);e.generateMipmaps&&this.textureUtils.generateMipmaps(e)}}class Iie extends FS{constructor(e,t,n,s,r,a){super(e,t,n,s,r,a),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class Fie extends FS{constructor(e,t,n,s,r,a){super(e,t,n,s,r,a),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class N3e extends Eie{constructor(){super(),this.addMaterial(Ate,"MeshPhongMaterial"),this.addMaterial(qV,"MeshStandardMaterial"),this.addMaterial(XV,"MeshPhysicalMaterial"),this.addMaterial(Hte,"MeshToonMaterial"),this.addMaterial(wte,"MeshBasicMaterial"),this.addMaterial(Mte,"MeshLambertMaterial"),this.addMaterial(xte,"MeshNormalMaterial"),this.addMaterial($te,"MeshMatcapMaterial"),this.addMaterial(mte,"LineBasicMaterial"),this.addMaterial(gte,"LineDashedMaterial"),this.addMaterial(qte,"PointsMaterial"),this.addMaterial(YV,"SpriteMaterial"),this.addMaterial(Xte,"ShadowMaterial"),this.addLight(nie,K2),this.addLight(mie,Z2),this.addLight(gie,J2),this.addLight(kD,FS),this.addLight(_ie,Q2),this.addLight(xie,Y2),this.addLight(bie,eD),this.addLight(yie,Iie),this.addLight(vie,Fie),this.addToneMapping(Ene,v2),this.addToneMapping(wne,_2),this.addToneMapping(Mne,x2),this.addToneMapping(Ane,ww),this.addToneMapping(Cne,b2),this.addToneMapping(Rne,S2)}}class zie extends BUe{constructor(e={}){let t;e.forceWebGL?t=Jj:(t=R3e,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new Jj(e)));const n=new t(e);super(n,e),this.library=new N3e,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}class D3e extends pm{constructor(){super(),this.isBundleGroup=!0,this.type="BundleGroup",this.static=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}}class P3e{constructor(e,t=jt(0,0,1,1)){this.renderer=e,this.outputNode=t,this.outputColorTransform=!0,this.needsUpdate=!0;const n=new Er;n.name="PostProcessing",this._quadMesh=new YS(n),this._context=null}render(){const e=this.renderer;this._update(),this._context.onBeforePostProcessing!==null&&this._context.onBeforePostProcessing();const t=e.toneMapping,n=e.outputColorSpace;e.toneMapping=bo,e.outputColorSpace=Sn.workingColorSpace;const s=e.xr.enabled;e.xr.enabled=!1,this._quadMesh.render(e),e.xr.enabled=s,e.toneMapping=t,e.outputColorSpace=n,this._context.onAfterPostProcessing!==null&&this._context.onAfterPostProcessing()}get context(){return this._context}dispose(){this._quadMesh.material.dispose()}_update(){if(this.needsUpdate===!0){const e=this.renderer,t=e.toneMapping,n=e.outputColorSpace,s={postProcessing:this,onBeforePostProcessing:null,onAfterPostProcessing:null};let r=this.outputNode;this.outputColorTransform===!0?(r=r.context(s),r=pV(r,t,n)):(s.toneMapping=t,s.outputColorSpace=n,r=r.context(s)),this._context=s,this._quadMesh.material.fragmentNode=r,this._quadMesh.material.needsUpdate=!0,this.needsUpdate=!1}}async renderAsync(){this._update(),this._context.onBeforePostProcessing!==null&&this._context.onBeforePostProcessing();const e=this.renderer,t=e.toneMapping,n=e.outputColorSpace;e.toneMapping=bo,e.outputColorSpace=Sn.workingColorSpace;const s=e.xr.enabled;e.xr.enabled=!1,await this._quadMesh.renderAsync(e),e.xr.enabled=s,e.toneMapping=t,e.outputColorSpace=n,this._context.onAfterPostProcessing!==null&&this._context.onAfterPostProcessing()}}class O3e extends Es{constructor(e=1,t=1){super(),this.image={width:e,height:t},this.magFilter=Zi,this.minFilter=Zi,this.isStorageTexture=!0}setSize(e,t){(this.image.width!==e||this.image.height!==t)&&(this.image.width=e,this.image.height=t,this.dispose())}}class L3e extends Es{constructor(e=1,t=1,n=1){super(),this.isArrayTexture=!1,this.image={width:e,height:t,depth:n},this.magFilter=Zi,this.minFilter=Zi,this.wrapR=vl,this.isStorageTexture=!0,this.is3DTexture=!0}setSize(e,t,n){(this.image.width!==e||this.image.height!==t||this.image.depth!==n)&&(this.image.width=e,this.image.height=t,this.image.depth=n,this.dispose())}}class U3e extends Es{constructor(e=1,t=1,n=1){super(),this.isArrayTexture=!0,this.image={width:e,height:t,depth:n},this.magFilter=Zi,this.minFilter=Zi,this.isStorageTexture=!0}setSize(e,t,n){(this.image.width!==e||this.image.height!==t||this.image.depth!==n)&&(this.image.width=e,this.image.height=t,this.image.depth=n,this.dispose())}}class B3e extends JV{constructor(e,t){super(e,t,Uint32Array),this.isIndirectStorageBufferAttribute=!0}}class Vie extends Jl{constructor(e){super(e),this.textures={},this.nodes={}}load(e,t,n,s){const r=new $f(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,a=>{try{t(this.parse(JSON.parse(a)))}catch(o){s?s(o):console.error(o),this.manager.itemError(e)}},n,s)}parseNodes(e){const t={};if(e!==void 0){for(const s of e){const{uuid:r,type:a}=s;t[r]=this.createNodeFromType(a),t[r].uuid=r}const n={nodes:t,textures:this.textures};for(const s of e)s.meta=n,t[s.uuid].deserialize(s),delete s.meta}return t}parse(e){const t=this.createNodeFromType(e.type);t.uuid=e.uuid;const s={nodes:this.parseNodes(e.nodes),textures:this.textures};return e.meta=s,t.deserialize(e),delete e.meta,t}setTextures(e){return this.textures=e,this}setNodes(e){return this.nodes=e,this}createNodeFromType(e){return this.nodes[e]===void 0?(console.error("THREE.NodeLoader: Node type not found:",e),te()):st(new this.nodes[e])}}class kie extends zS{constructor(e){super(e),this.nodes={},this.nodeMaterials={}}parse(e){const t=super.parse(e),n=this.nodes,s=e.inputNodes;for(const r in s){const a=s[r];t[r]=n[a]}return t}setNodes(e){return this.nodes=e,this}setNodeMaterials(e){return this.nodeMaterials=e,this}createMaterialFromType(e){const t=this.nodeMaterials[e];return t!==void 0?new t:super.createMaterialFromType(e)}}class I3e extends fz{constructor(e){super(e),this.nodes={},this.nodeMaterials={},this._nodesJSON=null}setNodes(e){return this.nodes=e,this}setNodeMaterials(e){return this.nodeMaterials=e,this}parse(e,t){this._nodesJSON=e.nodes;const n=super.parse(e,t);return this._nodesJSON=null,n}parseNodes(e,t){if(e!==void 0){const n=new Vie;return n.setNodes(this.nodes),n.setTextures(t),n.parseNodes(e)}return{}}parseMaterials(e,t){const n={};if(e!==void 0){const s=this.parseNodes(this._nodesJSON,t),r=new kie;r.setTextures(t),r.setNodes(s),r.setNodeMaterials(this.nodeMaterials);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]=r.parse(l)}}return n}}class F3e extends pm{constructor(){super(),this.isClippingGroup=!0,this.clippingPlanes=[],this.enabled=!0,this.clipIntersection=!1,this.clipShadows=!1}}const z3e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ww,AONode:nte,AddEquation:Ho,AddOperation:y2,AdditiveAnimationBlendMode:T2,AdditiveBlending:my,AgXToneMapping:b2,AlphaFormat:Mw,AlwaysCompare:Ow,AlwaysDepth:Kv,AlwaysStencilFunc:NE,AmbientLight:Q2,AmbientLightNode:_ie,AnalyticLightNode:o0,AnimationAction:yz,AnimationClip:Kb,AnimationLoader:AK,AnimationMixer:FK,AnimationObjectGroup:IK,AnimationUtils:MK,ArcCurve:YF,ArrayCamera:nD,ArrayElementNode:n0,ArrayNode:lB,ArrowHelper:aZ,AssignNode:cQ,AttachedBindMode:pN,AttributeNode:mV,Audio:hz,AudioAnalyser:BK,AudioContext:tD,AudioListener:LK,AudioLoader:PK,AxesHelper:oZ,BackSide:Ts,BasicDepthPacking:bF,BasicEnvironmentNode:ND,BasicShadowMap:h2,BatchNode:qee,BatchedMesh:jF,BitcastNode:qS,Bone:R2,BooleanKeyframeTrack:Qy,Box2:WK,Box3:Xo,Box3Helper:sZ,BoxGeometry:hp,BoxHelper:iZ,BufferAttribute:os,BufferAttributeNode:TJ,BufferGeometry:di,BufferGeometryLoader:dz,BufferNode:ED,BumpMapNode:gee,BundleGroup:D3e,BypassNode:CJ,ByteType:xm,Cache:Uf,CacheNode:AJ,Camera:DS,CameraHelper:nZ,CanvasTexture:_K,CapsuleGeometry:Hw,CatmullRomCurve3:ZF,CineonToneMapping:x2,CircleGeometry:jw,ClampToEdgeWrapping:vl,ClippingGroup:F3e,Clock:iD,CodeNode:pl,Color:Vt,ColorKeyframeTrack:q2,ColorManagement:Sn,ColorSpaceNode:SD,CompressedArrayTexture:yK,CompressedCubeTexture:vK,CompressedTexture:Gw,CompressedTextureLoader:CK,ComputeNode:wJ,ConeGeometry:LS,ConstNode:od,ConstantAlphaFactor:fF,ConstantColorFactor:uF,ContextNode:lV,Controls:cZ,ConvertNode:Lz,CubeCamera:A2,CubeReflectionMapping:gu,CubeRefractionMapping:nd,CubeTexture:Gm,CubeTextureLoader:RK,CubeTextureNode:nee,CubeUVReflectionMapping:lp,CubicBezierCurve:P2,CubicBezierCurve3:QF,CubicInterpolant:sz,CullFaceBack:ME,CullFaceFront:f2,CullFaceFrontBack:zY,CullFaceNone:d2,Curve:af,CurvePath:ez,CustomBlending:ry,CustomToneMapping:pF,CylinderGeometry:w_,Cylindrical:$K,Data3DTexture:Lw,DataArrayTexture:NS,DataTexture:Yd,DataTextureLoader:NK,DataUtils:oK,DebugNode:LJ,DecrementStencilOp:MF,DecrementWrapStencilOp:CF,DefaultLoadingManager:oz,DepthFormat:Oc,DepthStencilFormat:Lc,DepthTexture:Uc,DetachedBindMode:mF,DirectionalLight:Z2,DirectionalLightHelper:tZ,DirectionalLightNode:mie,DiscreteInterpolant:rz,DodecahedronGeometry:$w,DoubleSide:Go,DstAlphaFactor:xw,DstColorFactor:Sw,DynamicCopyUsage:JY,DynamicDrawUsage:Qg,DynamicReadUsage:KY,EdgesGeometry:XF,EllipseCurve:Ww,EnvironmentNode:Gte,EqualCompare:Rw,EqualDepth:Qv,EqualStencilFunc:PF,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:Nm,Euler:Kl,EventDispatcher:_u,EventNode:Bm,ExpressionNode:tE,ExternalTexture:D2,ExtrudeGeometry:qw,FileLoader:$f,Float16BufferAttribute:M2,Float32BufferAttribute:on,FloatType:fr,Fog:Fw,FogExp2:Iw,FramebufferTexture:N2,FrontFacingNode:$J,FrontSide:Nc,Frustum:Ky,FrustumArray:OS,FunctionCallNode:dQ,FunctionNode:tk,FunctionOverloadingNode:sne,GLBufferAttribute:HK,GLSL1:tK,GLSL3:mN,GLSLNodeParser:Tie,GreaterCompare:Nw,GreaterDepth:e_,GreaterEqualCompare:Pw,GreaterEqualDepth:Jv,GreaterEqualStencilFunc:BF,GreaterStencilFunc:LF,GridHelper:JK,Group:pm,HalfFloatType:$a,HemisphereLight:Y2,HemisphereLightHelper:QK,HemisphereLightNode:xie,IESSpotLight:Iie,IESSpotLightNode:yie,IcosahedronGeometry:Xw,ImageBitmapLoader:DK,ImageLoader:Zb,ImageUtils:zF,IncrementStencilOp:wF,IncrementWrapStencilOp:AF,IndexNode:Sr,IndirectStorageBufferAttribute:B3e,InstanceNode:DV,InstancedBufferAttribute:Qu,InstancedBufferGeometry:uz,InstancedInterleavedBuffer:vz,InstancedMesh:HF,InstancedMeshNode:$ee,Int16BufferAttribute:dK,Int32BufferAttribute:fK,Int8BufferAttribute:lK,IntType:oo,InterleavedBuffer:PS,InterleavedBufferAttribute:Dm,Interpolant:BS,InterpolateDiscrete:jb,InterpolateLinear:RE,InterpolateSmooth:$1,InterpolationSamplingMode:iK,InterpolationSamplingType:nK,InvertStencilOp:RF,IrradianceNode:rte,JoinNode:$Z,KeepStencilOp:rm,KeyframeTrack:ad,LOD:kF,LatheGeometry:Yw,Layers:l_,LessCompare:CS,LessDepth:Zv,LessEqualCompare:RS,LessEqualDepth:op,LessEqualStencilFunc:OF,LessStencilFunc:DF,Light:jm,LightProbe:eD,LightProbeNode:bie,Lighting:wie,LightingContextNode:ite,LightingModel:WS,LightingNode:A_,LightsNode:ID,Line:Pm,Line2NodeMaterial:uNe,Line3:qK,LineBasicMaterial:Sl,LineBasicNodeMaterial:mte,LineCurve:O2,LineCurve3:JF,LineDashedMaterial:iM,LineDashedNodeMaterial:gte,LineLoop:$F,LineSegments:Kf,LinearFilter:Zi,LinearInterpolant:W2,LinearMipMapLinearFilter:gF,LinearMipMapNearestFilter:GY,LinearMipmapLinearFilter:jo,LinearMipmapNearestFilter:_m,LinearSRGBColorSpace:Hf,LinearToneMapping:v2,LinearTransfer:Vy,Loader:Jl,LoaderUtils:_N,LoadingManager:X2,LoopNode:Qee,LoopOnce:vF,LoopPingPong:xF,LoopRepeat:_F,MOUSE:IY,MRTNode:nne,Material:So,MaterialLoader:zS,MaterialNode:rt,MaterialReferenceNode:iee,MathUtils:Lf,Matrix2:VS,Matrix3:Kn,Matrix4:an,MaxEquation:m2,MaxMipLevelNode:IJ,MemberNode:qZ,Mesh:zs,MeshBasicMaterial:Gl,MeshBasicNodeMaterial:wte,MeshDepthMaterial:H2,MeshDistanceMaterial:j2,MeshLambertMaterial:G2,MeshLambertNodeMaterial:Mte,MeshMatcapMaterial:$2,MeshMatcapNodeMaterial:$te,MeshNormalMaterial:k2,MeshNormalNodeMaterial:xte,MeshPhongMaterial:z2,MeshPhongNodeMaterial:Ate,MeshPhysicalMaterial:F2,MeshPhysicalNodeMaterial:XV,MeshSSSNodeMaterial:r2e,MeshStandardMaterial:nM,MeshStandardNodeMaterial:qV,MeshToonMaterial:V2,MeshToonNodeMaterial:Hte,MinEquation:p2,MirroredRepeatWrapping:up,MixOperation:g2,ModelNode:rd,MorphNode:ete,MultiplyBlending:yy,MultiplyOperation:b_,NearestFilter:Fs,NearestMipMapLinearFilter:kY,NearestMipMapNearestFilter:VY,NearestMipmapLinearFilter:jd,NearestMipmapNearestFilter:TS,NeutralToneMapping:S2,NeverCompare:Cw,NeverDepth:Yv,NeverStencilFunc:NF,NoBlending:ql,NoColorSpace:kl,NoToneMapping:bo,Node:Jt,NodeAccess:Wo,NodeAttribute:wB,NodeBuilder:gk,NodeCache:LR,NodeCode:pie,NodeFrame:MB,NodeFunctionInput:VD,NodeLoader:Vie,NodeMaterial:Er,NodeMaterialLoader:kie,NodeMaterialObserver:kZ,NodeObjectLoader:I3e,NodeShaderStage:ub,NodeType:jZ,NodeUniform:fie,NodeUpdateType:ii,NodeUtils:yCe,NodeVar:mk,NodeVarying:hie,NormalAnimationBlendMode:Aw,NormalBlending:Dc,NormalMapNode:mee,NotEqualCompare:Dw,NotEqualDepth:t_,NotEqualStencilFunc:UF,NumberKeyframeTrack:Xb,Object3D:Qi,Object3DNode:Li,ObjectLoader:fz,ObjectSpaceNormalMap:E2,OctahedronGeometry:US,OneFactor:yw,OneMinusConstantAlphaFactor:hF,OneMinusConstantColorFactor:dF,OneMinusDstAlphaFactor:bw,OneMinusDstColorFactor:Tw,OneMinusSrcAlphaFactor:Xv,OneMinusSrcColorFactor:_w,OrthographicCamera:e0,OutputStructNode:QV,PCFShadowMap:bS,PCFSoftShadowMap:Mb,PMREMGenerator:Vte,PMREMNode:kte,ParameterNode:ZV,PassNode:Xf,Path:PE,PerspectiveCamera:la,PhongLightingModel:VV,PhysicalLightingModel:PD,Plane:Df,PlaneGeometry:Zy,PlaneHelper:rZ,PointLight:K2,PointLightHelper:ZK,PointLightNode:nie,PointUVNode:fne,Points:WF,PointsMaterial:kw,PointsNodeMaterial:qte,PolarGridHelper:eZ,PolyhedronGeometry:Hm,PositionalAudio:UK,PostProcessing:P3e,PosterizeNode:bne,ProjectorLight:Fie,ProjectorLightNode:vie,PropertyBinding:ns,PropertyMixer:pz,PropertyNode:ps,QuadMesh:YS,QuadraticBezierCurve:L2,QuadraticBezierCurve3:U2,Quaternion:xl,QuaternionKeyframeTrack:IS,QuaternionLinearInterpolant:az,RED_GREEN_RGTC2_Format:Fy,RED_RGTC1_Format:By,REVISION:x_,RGBADepthPacking:SF,RGBAFormat:nr,RGBAIntegerFormat:Yy,RGBA_ASTC_10x10_Format:Py,RGBA_ASTC_10x5_Format:Ry,RGBA_ASTC_10x6_Format:Ny,RGBA_ASTC_10x8_Format:Dy,RGBA_ASTC_12x10_Format:Oy,RGBA_ASTC_12x12_Format:Ly,RGBA_ASTC_4x4_Format:by,RGBA_ASTC_5x4_Format:Sy,RGBA_ASTC_5x5_Format:Ty,RGBA_ASTC_6x5_Format:Ey,RGBA_ASTC_6x6_Format:wy,RGBA_ASTC_8x5_Format:My,RGBA_ASTC_8x6_Format:Ay,RGBA_ASTC_8x8_Format:Cy,RGBA_BPTC_Format:Uy,RGBA_ETC2_EAC_Format:xy,RGBA_PVRTC_2BPPV1_Format:r_,RGBA_PVRTC_4BPPV1_Format:s_,RGBA_S3TC_DXT1_Format:qh,RGBA_S3TC_DXT3_Format:Xh,RGBA_S3TC_DXT5_Format:Yh,RGBDepthPacking:WY,RGBFormat:S_,RGBIntegerFormat:yF,RGB_BPTC_SIGNED_Format:AE,RGB_BPTC_UNSIGNED_Format:CE,RGB_ETC1_Format:vy,RGB_ETC2_Format:_y,RGB_PVRTC_2BPPV1_Format:i_,RGB_PVRTC_4BPPV1_Format:n_,RGB_S3TC_DXT1_Format:Wh,RGDepthPacking:qY,RGFormat:Of,RGIntegerFormat:Xy,RTTNode:lne,RangeNode:Une,RawShaderMaterial:nz,Ray:T_,Raycaster:sD,RectAreaLight:J2,RectAreaLightNode:gie,RedFormat:qy,RedIntegerFormat:km,ReferenceNode:hM,ReflectorNode:OD,ReinhardToneMapping:_2,RemapNode:hV,RenderOutputNode:OJ,RenderTarget:rf,RenderTarget3D:zK,RendererReferenceNode:vJ,RendererUtils:rOe,RepeatWrapping:cp,ReplaceStencilOp:EF,ReverseSubtractEquation:gw,RingGeometry:Kw,RotateNode:Wte,SIGNED_RED_GREEN_RGTC2_Format:zy,SIGNED_RED_RGTC1_Format:Iy,SRGBColorSpace:ao,SRGBTransfer:Kt,Scene:E_,SceneNode:Cc,ScreenNode:er,ScriptableNode:One,ScriptableValueNode:Dne,SetNode:WZ,ShaderMaterial:Qd,ShadowBaseNode:Fne,ShadowMaterial:I2,ShadowNode:dk,ShadowNodeMaterial:Xte,Shape:ay,ShapeGeometry:Zw,ShapePath:lZ,ShapeUtils:$d,ShortType:bm,Skeleton:Vw,SkeletonHelper:YK,SkinnedMesh:GF,SkinningNode:PV,Source:hm,Sphere:co,SphereGeometry:M_,Spherical:_z,SphericalHarmonics3:cz,SplineCurve:B2,SplitNode:Uz,SpotLight:FS,SpotLightHelper:XK,SpotLightNode:kD,Sprite:VF,SpriteMaterial:zw,SpriteNodeMaterial:YV,SpriteSheetUVNode:ane,SrcAlphaFactor:qv,SrcAlphaSaturateFactor:Ew,SrcColorFactor:vw,StackNode:Qte,StaticCopyUsage:QY,StaticDrawUsage:a_,StaticReadUsage:YY,StereoCamera:OK,Storage3DTexture:L3e,StorageArrayElementNode:Yee,StorageArrayTexture:U3e,StorageBufferAttribute:JV,StorageBufferNode:Kee,StorageInstancedBufferAttribute:dne,StorageTexture:O3e,StorageTextureNode:mne,StreamCopyUsage:eK,StreamDrawUsage:XY,StreamReadUsage:ZY,StringKeyframeTrack:Jy,StructNode:ene,StructTypeNode:Jte,SubBuildNode:dJ,SubtractEquation:mw,SubtractiveBlending:gy,TOUCH:FY,TSL:V,TangentSpaceNormalMap:Gf,TempNode:ga,TetrahedronGeometry:Qw,Texture:Es,Texture3DNode:yne,TextureLoader:sM,TextureNode:Wf,TextureSizeNode:BJ,TextureUtils:uZ,Timer:jK,TimestampQuery:Jg,ToneMappingNode:xJ,ToonOutlinePassNode:Tne,TorusGeometry:Jw,TorusKnotGeometry:eM,Triangle:wc,TriangleFanDrawMode:$Y,TriangleStripDrawMode:jY,TrianglesDrawMode:HY,TubeGeometry:tM,UVMapping:SS,Uint16BufferAttribute:Uw,Uint32BufferAttribute:Bw,Uint8BufferAttribute:cK,Uint8ClampedBufferAttribute:uK,Uniform:VK,UniformArrayNode:FJ,UniformGroupNode:qz,UniformNode:jS,UniformsGroup:GK,UnsignedByteType:Tr,UnsignedInt101111Type:AS,UnsignedInt248Type:Pc,UnsignedInt5999Type:MS,UnsignedIntType:Rs,UnsignedShort4444Type:ES,UnsignedShort5551Type:wS,UnsignedShortType:Xu,UserDataNode:_ne,VSMShadowMap:zl,VarNode:J1,VaryingNode:fJ,Vector2:lt,Vector3:ae,Vector4:bn,VectorKeyframeTrack:Yb,VertexColorNode:lte,VideoFrameTexture:gK,VideoTexture:qF,ViewportDepthNode:Ac,ViewportDepthTextureNode:ate,ViewportSharedTextureNode:yte,ViewportTextureNode:mM,VolumeNodeMaterial:y2e,WebGL3DRenderTarget:rK,WebGLArrayRenderTarget:sK,WebGLCoordinateSystem:$o,WebGLCubeRenderTarget:C2,WebGLRenderTarget:jf,WebGPUCoordinateSystem:id,WebGPURenderer:zie,WebXRController:Cb,WireframeGeometry:tz,WrapAroundEnding:$b,ZeroCurvatureEnding:Kg,ZeroFactor:Nf,ZeroSlopeEnding:Zg,ZeroStencilOp:TF,createCanvasElement:w2,defaultBuildStages:wN,defaultShaderStages:Oz,shaderStages:MN,vectorComponents:t0},Symbol.toStringTag,{value:"Module"}));function V3e(i,e,t={leading:!1}){const[n,s]=P.useState(i),r=P.useRef(!1),a=P.useRef(null),o=P.useRef(!1),l=P.useCallback(()=>window.clearTimeout(a.current),[]);return P.useEffect(()=>{r.current&&(!o.current&&t.leading?(o.current=!0,s(i)):(l(),a.current=window.setTimeout(()=>{o.current=!1,s(i)},e)))},[i,t.leading,e]),P.useEffect(()=>(r.current=!0,l),[]),[n,l]}const c$=Lf.degToRad(80),u$=Lf.degToRad(100),d$=-Math.PI/20,f$=Math.PI/20,k3e=()=>{const i=Ih(r=>r.size),[e]=V3e(i,500,{leading:!0}),t=P.useRef(null),n=P.useRef({value:0}),s=P.useRef({value:0});return P.useEffect(()=>{if(!t.current||e.width<480)return;const r=a=>{const o=a.clientY/e.width,l=Lf.lerp(c$,u$,o),c=a.clientX/e.width,d=Lf.lerp(d$,f$,c);n.current.value=l,s.current.value=d};return window.addEventListener("pointermove",r),()=>{window.removeEventListener("pointermove",r)}},[e]),DZ((r,a)=>{if(t.current&&!(e.width<480)){if(t.current.azimuthAngle!==s.current.value){const o=Lf.lerp(t.current.azimuthAngle,s.current.value,a*4);t.current.rotateAzimuthTo(o,!1)}if(t.current.polarAngle!==n.current.value){const o=Lf.lerp(t.current.polarAngle,n.current.value,a*4);t.current.rotatePolarTo(o,!1)}}}),B.jsx(lCe,{ref:t,minPolarAngle:c$,maxPolarAngle:u$,minAzimuthAngle:d$,maxAzimuthAngle:f$,makeDefault:!0,mouseButtons:{left:0,middle:0,right:0,wheel:0},touches:{one:0,two:0,three:0}})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */V.BRDF_GGX;V.BRDF_Lambert;V.BasicPointShadowFilter;V.BasicShadowFilter;V.Break;V.Const;V.Continue;V.DFGApprox;V.D_GGX;V.Discard;V.EPSILON;V.F_Schlick;const YE=V.Fn;V.INFINITY;const G3e=V.If,H3e=V.Loop;V.NodeAccess;V.NodeShaderStage;V.NodeType;V.NodeUpdateType;V.PCFShadowFilter;V.PCFSoftShadowFilter;V.PI;V.PI2;V.PointShadowFilter;V.Return;V.Schlick_to_F0;V.ScriptableNodeResources;V.ShaderNode;V.Stack;V.Switch;V.TBNViewMatrix;V.VSMShadowFilter;V.V_GGX_SmithCorrelated;V.Var;V.VarIntent;const h$=V.abs;V.acesFilmicToneMapping;V.acos;V.add;V.addMethodChaining;V.addNodeElement;V.agxToneMapping;V.all;V.alphaT;V.and;V.anisotropy;V.anisotropyB;V.anisotropyT;V.any;V.append;V.array;V.arrayBuffer;V.asin;V.assign;V.atan;V.atan2;V.atomicAdd;V.atomicAnd;V.atomicFunc;V.atomicLoad;V.atomicMax;V.atomicMin;V.atomicOr;V.atomicStore;V.atomicSub;V.atomicXor;V.attenuationColor;V.attenuationDistance;V.attribute;V.attributeArray;V.backgroundBlurriness;V.backgroundIntensity;V.backgroundRotation;V.batch;V.bentNormalView;V.billboarding;V.bitAnd;V.bitNot;V.bitOr;V.bitXor;V.bitangentGeometry;V.bitangentLocal;V.bitangentView;V.bitangentWorld;V.bitcast;V.blendBurn;V.blendColor;V.blendDodge;V.blendOverlay;V.blendScreen;V.blur;V.bool;V.buffer;V.bufferAttribute;V.bumpMap;V.burn;V.builtin;V.bvec2;V.bvec3;V.bvec4;V.bypass;V.cache;V.call;V.cameraFar;V.cameraIndex;V.cameraNear;V.cameraNormalMatrix;V.cameraPosition;V.cameraProjectionMatrix;V.cameraProjectionMatrixInverse;V.cameraViewMatrix;V.cameraViewport;V.cameraWorldMatrix;V.cbrt;V.cdl;V.ceil;V.checker;V.cineonToneMapping;V.clamp;V.clearcoat;V.clearcoatNormalView;V.clearcoatRoughness;V.code;V.color;V.colorSpaceToWorking;V.colorToDirection;V.compute;V.computeKernel;V.computeSkinning;V.context;V.convert;V.convertColorSpace;const j3e=V.convertToTexture,Gie=V.cos;V.cross;V.cubeTexture;V.cubeTextureBase;V.cubeToUV;V.dFdx;V.dFdy;V.dashSize;V.debug;V.decrement;V.decrementBefore;V.defaultBuildStages;V.defaultShaderStages;V.defined;const p$=V.degrees;V.deltaTime;V.densityFog;V.densityFogFactor;V.depth;V.depthPass;V.determinant;V.difference;V.diffuseColor;V.directPointLight;V.directionToColor;V.directionToFaceDirection;V.dispersion;V.distance;V.div;V.dodge;V.dot;V.drawIndex;V.dynamicBufferAttribute;V.element;V.emissive;V.equal;V.equals;V.equirectUV;V.exp;V.exp2;V.expression;V.faceDirection;V.faceForward;V.faceforward;const ml=V.float;V.floatBitsToInt;V.floatBitsToUint;V.floor;V.fog;V.fract;V.frameGroup;V.frameId;V.frontFacing;V.fwidth;V.gain;V.gapSize;V.getConstNodeType;V.getCurrentStack;V.getDirection;V.getDistanceAttenuation;V.getGeometryRoughness;V.getNormalFromDepth;V.getParallaxCorrectNormal;V.getRoughness;V.getScreenPosition;V.getShIrradianceAt;V.getShadowMaterial;V.getShadowRenderObjectFunction;V.getTextureIndex;V.getViewPosition;V.globalId;V.glsl;V.glslFn;V.grayscale;V.greaterThan;V.greaterThanEqual;V.hash;V.highpModelNormalViewMatrix;V.highpModelViewMatrix;V.hue;V.increment;V.incrementBefore;V.instance;V.instanceIndex;V.instancedArray;V.instancedBufferAttribute;V.instancedDynamicBufferAttribute;V.instancedMesh;const $3e=V.int;V.intBitsToFloat;V.inverse;V.inverseSqrt;V.inversesqrt;V.invocationLocalIndex;V.invocationSubgroupIndex;V.ior;V.iridescence;V.iridescenceIOR;V.iridescenceThickness;V.ivec2;V.ivec3;V.ivec4;V.js;V.label;const W3e=V.length;V.lengthSq;V.lessThan;V.lessThanEqual;V.lightPosition;V.lightProjectionUV;V.lightShadowMatrix;V.lightTargetDirection;V.lightTargetPosition;V.lightViewPosition;V.lightingContext;V.lights;V.linearDepth;V.linearToneMapping;V.localId;V.log;V.log2;V.logarithmicDepthToViewZ;V.luminance;V.mat2;const q3e=V.mat3;V.mat4;V.matcapUV;V.materialAO;V.materialAlphaTest;V.materialAnisotropy;V.materialAnisotropyVector;V.materialAttenuationColor;V.materialAttenuationDistance;V.materialClearcoat;V.materialClearcoatNormal;V.materialClearcoatRoughness;V.materialColor;V.materialDispersion;V.materialEmissive;V.materialEnvIntensity;V.materialEnvRotation;V.materialIOR;V.materialIridescence;V.materialIridescenceIOR;V.materialIridescenceThickness;V.materialLightMap;V.materialLineDashOffset;V.materialLineDashSize;V.materialLineGapSize;V.materialLineScale;V.materialLineWidth;V.materialMetalness;V.materialNormal;V.materialOpacity;V.materialPointSize;V.materialReference;V.materialReflectivity;V.materialRefractionRatio;V.materialRotation;V.materialRoughness;V.materialSheen;V.materialSheenRoughness;V.materialShininess;V.materialSpecular;V.materialSpecularColor;V.materialSpecularIntensity;V.materialSpecularStrength;V.materialThickness;V.materialTransmission;const m$=V.max;V.maxMipLevel;V.mediumpModelViewMatrix;V.metalness;const X3e=V.min,g$=V.mix;V.mixElement;V.mod;V.modInt;V.modelDirection;V.modelNormalMatrix;V.modelPosition;V.modelRadius;V.modelScale;V.modelViewMatrix;V.modelViewPosition;V.modelViewProjection;V.modelWorldMatrix;V.modelWorldMatrixInverse;V.morphReference;V.mrt;V.mul;V.mx_aastep;V.mx_add;V.mx_atan2;V.mx_cell_noise_float;V.mx_contrast;V.mx_divide;V.mx_fractal_noise_float;V.mx_fractal_noise_vec2;V.mx_fractal_noise_vec3;V.mx_fractal_noise_vec4;V.mx_frame;V.mx_heighttonormal;V.mx_hsvtorgb;V.mx_ifequal;V.mx_ifgreater;V.mx_ifgreatereq;V.mx_invert;V.mx_modulo;V.mx_multiply;V.mx_noise_float;V.mx_noise_vec3;V.mx_noise_vec4;V.mx_place2d;V.mx_power;V.mx_ramp4;V.mx_ramplr;V.mx_ramptb;V.mx_rgbtohsv;V.mx_rotate2d;V.mx_rotate3d;V.mx_safepower;V.mx_separate;V.mx_splitlr;V.mx_splittb;V.mx_srgb_texture_to_lin_rec709;V.mx_subtract;V.mx_timer;V.mx_transform_uv;V.mx_unifiednoise2d;V.mx_unifiednoise3d;V.mx_worley_noise_float;V.mx_worley_noise_vec2;V.mx_worley_noise_vec3;V.negate;V.neutralToneMapping;V.nodeArray;V.nodeImmutable;const Y3e=V.nodeObject;V.nodeObjectIntent;V.nodeObjects;V.nodeProxy;V.nodeProxyIntent;V.normalFlat;V.normalGeometry;V.normalLocal;V.normalMap;V.normalView;V.normalViewGeometry;V.normalWorld;V.normalWorldGeometry;V.normalize;V.not;V.notEqual;V.numWorkgroups;V.objectDirection;V.objectGroup;V.objectPosition;V.objectRadius;V.objectScale;V.objectViewPosition;V.objectWorldMatrix;V.OnObjectUpdate;V.OnMaterialUpdate;const y$=V.oneMinus;V.or;V.orthographicDepthToViewZ;V.oscSawtooth;V.oscSine;V.oscSquare;V.oscTriangle;V.output;V.outputStruct;V.overlay;V.overloadingFn;V.parabola;V.parallaxDirection;V.parallaxUV;V.parameter;V.pass;V.passTexture;V.pcurve;V.perspectiveDepthToViewZ;V.pmremTexture;V.pointShadow;V.pointUV;V.pointWidth;V.positionGeometry;const K3e=V.positionLocal;V.positionPrevious;V.positionView;V.positionViewDirection;V.positionWorld;V.positionWorldDirection;V.posterize;V.pow;V.pow2;V.pow3;V.pow4;const Z3e=V.premultiplyAlpha;V.property;V.radians;const Q3e=V.rand;V.range;V.rangeFog;V.rangeFogFactor;V.reciprocal;V.reference;V.referenceBuffer;V.reflect;V.reflectVector;V.reflectView;V.reflector;V.refract;V.refractVector;V.refractView;V.reinhardToneMapping;V.remap;V.remapClamp;V.renderGroup;V.renderOutput;V.rendererReference;V.rotate;V.rotateUV;V.roughness;V.round;V.rtt;V.sRGBTransferEOTF;V.sRGBTransferOETF;V.sample;V.sampler;V.samplerComparison;V.saturate;V.saturation;V.screen;V.screenCoordinate;V.screenDPR;V.screenSize;V.screenUV;V.scriptable;V.scriptableValue;const NB=V.select;V.setCurrentStack;V.setName;V.shaderStages;V.shadow;V.shadowPositionWorld;V.shapeCircle;V.sharedUniformGroup;V.sheen;V.sheenRoughness;V.shiftLeft;V.shiftRight;V.shininess;V.sign;const Hie=V.sin;V.sinc;V.skinning;const J3e=V.smoothstep;V.smoothstepElement;V.specularColor;V.specularF90;V.spherizeUV;V.split;V.spritesheetUV;V.sqrt;V.stack;V.step;V.stepElement;V.storage;V.storageBarrier;V.storageObject;V.storageTexture;V.string;V.struct;V.sub;V.subgroupAdd;V.subgroupAll;V.subgroupAnd;V.subgroupAny;V.subgroupBallot;V.subgroupBroadcast;V.subgroupBroadcastFirst;V.subBuild;V.subgroupElect;V.subgroupExclusiveAdd;V.subgroupExclusiveMul;V.subgroupInclusiveAdd;V.subgroupInclusiveMul;V.subgroupIndex;V.subgroupMax;V.subgroupMin;V.subgroupMul;V.subgroupOr;V.subgroupShuffle;V.subgroupShuffleDown;V.subgroupShuffleUp;V.subgroupShuffleXor;V.subgroupSize;V.subgroupXor;V.tan;V.tangentGeometry;V.tangentLocal;V.tangentView;V.tangentWorld;const eBe=V.texture;V.texture3D;V.textureBarrier;V.textureBicubic;V.textureBicubicLevel;V.textureCubeUV;V.textureLoad;V.textureSize;V.textureStore;V.thickness;V.time;V.toneMapping;V.toneMappingExposure;V.toonOutlinePass;V.transformDirection;V.transformNormal;V.transformNormalToView;V.transformedClearcoatNormalView;V.transformedNormalView;V.transformedNormalWorld;V.transmission;V.transpose;V.triNoise3D;V.triplanarTexture;V.triplanarTextures;V.trunc;V.uint;V.uintBitsToFloat;const uR=V.uniform;V.uniformArray;V.uniformCubeTexture;V.uniformGroup;V.uniformFlow;V.uniformTexture;const tBe=V.unpremultiplyAlpha;V.userData;const jie=V.uv;V.uvec2;V.uvec3;V.uvec4;V.varying;V.varyingProperty;const jh=V.vec2,v$=V.vec3,$ie=V.vec4;V.vectorComponents;V.velocity;V.vertexColor;V.vertexIndex;V.vertexStage;V.vibrance;V.viewZToLogarithmicDepth;V.viewZToOrthographicDepth;V.viewZToPerspectiveDepth;V.viewport;V.viewportCoordinate;V.viewportDepthTexture;V.viewportLinearDepth;V.viewportMipTexture;V.viewportResolution;V.viewportSafeUV;V.viewportSharedTexture;V.viewportSize;V.viewportTexture;V.viewportUV;V.wgsl;V.wgslFn;V.workgroupArray;V.workgroupBarrier;V.workgroupId;V.workingToColorSpace;V.xor;const nBe=YE(([i,e=ml(.1),t={}])=>{i=j3e(i);const n=Y3e(t.repeats)||ml(45),s=t.premultipliedAlpha||!1,r=l=>{const c=i.sample(l);return s?Z3e(c):c},a=i.uvNode||jie(),o=$ie(0);return H3e({start:0,end:n,type:"float"},({i:l})=>{const c=jh(jh(Gie(p$(l.div(n).mul(360))),Hie(p$(l.div(n).mul(360)))).mul(Q3e(jh(l,a.x.add(a.y))).add(e))),d=jh(a.add(c.mul(e)));o.addAssign(r(d))}),o.divAssign(n),s?tBe(o):o}),iBe=YE(([i])=>{const e=ml(Hie(i)).toVar(),t=ml(Gie(i));return q3e(t,0,e.negate(),0,1,0,e,0,t)}).setLayout({name:"rotation3dY",type:"mat3",inputs:[{name:"angle",type:"float",qualifier:"in"}]}),sBe=YE(([i,e,t])=>NB(e.greaterThan(t),jh(i.x,i.y.sub(.5).mul(t.div(e)).add(.5)),jh(i.x.sub(.5).mul(e.div(t)).add(.5),i.y))).setLayout({name:"getCoverUv",type:"vec2",inputs:[{name:"uv",type:"vec2",qualifier:"in"},{name:"planeAspect",type:"float",qualifier:"in"},{name:"imageAspect",type:"float",qualifier:"in"}]}),Ig=({imageSrc:i,height:e,width:t,position:n,withControls:s=!1,isBlurred:r=!1,delay:a=0,replayTime:o=0})=>{const l=wz(i);l.colorSpace=ao;const c=n[0]<0,{key:d,colorNode:h,positionNode:m,uReveal:v,uIsBlurred:_,uEnterProgress:x,uExitProgress:T}=P.useMemo(()=>{const M=uR($3e(r)),R=uR(ml(0)),N=uR(ml(0)),D=uR(ml(1)),L=ml(t/e),F=ml(l.image.width/l.image.height),I=YE(()=>{const Y=sBe(jie(),L,F),Z=eBe(l,Y),se=Z.toVar();G3e(M,()=>{const we=nBe(Z,.06,96);se.assign(we)});const oe=Y.sub(jh(.5,.5)),G=ml(.08).mul(D),K=NB(M,ml(.12),ml(1e-4)),$=g$(ml(.1),K,D),q=NB(L.greaterThan(F),jh(ml(.5),ml(.5).mul(F.div(L))),jh(ml(.5).mul(L.div(F)),ml(.5))).mul(D),ue=jh(h$(oe.x),h$(oe.y)).sub(q.sub(G).sub($)),Ae=X3e(m$(ue.x,ue.y),0).add(W3e(m$(ue,0))).sub(G),Ne=y$(J3e(0,$,Ae));return g$($ie(se.rgb,0),se,Ne)})(),z=YE(()=>{const Y=y$(R),Z=N.mul(10),se=N.mul(c?-1.5:1.5),oe=N.mul(2);return K3e.mul(iBe(Y)).sub(v$(0,Y.mul(2),Y.mul(2))).add(v$(se,Z,oe))})();return{key:I.uuid,colorNode:I,uReveal:D,uIsBlurred:M,uEnterProgress:R,uExitProgress:N,positionNode:z}},[e,l,r,c,t]),[b,w]=lbe(()=>({blur:{value:r,label:"Blurred",min:0,max:1,step:1,onChange(M){s&&(_.value=M)}},reveal:{value:1,min:0,max:1,step:.01,label:"Reveal",onChange:M=>{s&&(v.value=M)}},position:{value:0,min:0,max:1,step:.01,label:"Translate",onChange:M=>{s&&(x.value=M)}},enter:{value:0,min:0,max:1,step:.01,label:"Enter (both)",onChange:M=>{s&&(v.value=M,x.value=M)}}}));return P.useEffect(()=>{const M=Eb.fromTo(v,{value:0},{value:1,duration:1,ease:"power1.out",delay:a,onUpdate:()=>{s&&w({reveal:+v.value})}}),R=Eb.fromTo(x,{value:0},{value:1,duration:1.8,ease:"power1.out",delay:.2+a,onUpdate:()=>{s&&w({position:+x.value})}});return()=>{M.kill(),R.kill()}},[a,o,w,x,v,s]),n2(()=>{Eb.to(T,{ease:"none",value:1,delay:a,scrollTrigger:{start:0,end:"max",scrub:!0}})},[a]),B.jsx(P.Suspense,{fallback:null,children:B.jsx(hCe,{position:n,args:[t,e,1,1],children:B.jsx("meshBasicNodeMaterial",{color:"blue",colorNode:h,positionNode:m,transparent:!0,depthTest:!1},d)})})},rBe=()=>B.jsxs("section",{className:"flex h-svh text-black flex-col items-center justify-center space-y-4 p-8 text-center",children:[B.jsx("h2",{className:"text-2xl font-medium tracking-tight",children:"Not supported by this browser"}),B.jsxs("p",{className:"leading-loose text-blue-600",children:["This experiences uses an experimental technology (WebGPU).",B.jsx("br",{}),"Please open it using a"," ",B.jsx("a",{target:"_blank",rel:"noreferrer",className:"underline text-blue-600 hover:text-blue-800",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebGPU_API#browser_compatibility",children:"compatible browser"}),"."]})]}),aBe="/blade-runner.jpeg",oBe="/couple-coffee.jpeg",lBe="/dali-parrots.jpeg",cBe="/deepmind.jpeg",uBe="/owl.jpeg",dBe="/scientists.jpeg",fBe="/utopia.jpeg",hBe="/yachts.jpeg";Tz(z3e);const pBe=({replayTime:i})=>{const[e,t]=P.useState(null);return P.useLayoutEffect(()=>{t(pCe.isAvailable())},[]),e===null?null:e===!1?B.jsx(rBe,{}):B.jsxs(iCe,{className:"!absolute inset-0 !h-full !w-full",camera:{position:[0,0,6],fov:70,far:20},flat:!0,gl:async n=>{const s=new zie(n);return await s.init(),s},children:[B.jsx("color",{attach:"background",args:["#000"]}),B.jsx(k3e,{}),B.jsx(Ig,{position:[-7,2,-2.5],width:5,height:4,imageSrc:cBe,isBlurred:!0,delay:.32,replayTime:i}),B.jsx(Ig,{position:[-4,3,-1],width:3.8,height:3,imageSrc:fBe,delay:.16,replayTime:i}),B.jsx(Ig,{position:[1,3,0],width:2.4,height:3.2,imageSrc:uBe,delay:.12,replayTime:i}),B.jsx(Ig,{position:[6,3.5,-3],width:4,height:4,isBlurred:!0,imageSrc:aBe,delay:.2,replayTime:i}),B.jsx(Ig,{position:[5,-.25,0],width:3.5,height:2.5,imageSrc:oBe,delay:0,replayTime:i}),B.jsx(Ig,{position:[-4,-2,-.5],width:2.8,height:2.8,imageSrc:lBe,delay:.48,replayTime:i}),B.jsx(Ig,{position:[-6.5,-4,-2],width:6,height:4,isBlurred:!0,imageSrc:hBe,delay:.3,replayTime:i}),B.jsx(Ig,{position:[1,-3.8,-1],width:4.5,height:3,imageSrc:dBe,delay:.6,replayTime:i}),!1]})};Eb.registerPlugin(n2,Yhe,Jhe);const _$=({children:i,...e})=>B.jsx("button",{...e,className:"pointer-events-auto flex gap-2 rounded-full transition-all duration-200 px-7 py-3 font-semibold text-white bg-gradient-to-r from-blue-600 to-teal-600 hover:shadow-md hover:from-blue-700 hover:to-teal-700",children:i}),mBe=()=>{const[i,e]=P.useState(""),t=()=>{e(Date.now().toString())};return B.jsxs("section",{className:"relative w-full overflow-hidden h-screen",children:[B.jsx(pBe,{replayTime:i}),B.jsxs("div",{className:"relative w-full pointer-events-none h-full flex flex-col gap-6 items-center justify-center z-10",children:[B.jsx("img",{src:"/stickerverse-logo-correct.png",alt:"STICKERVERSE",className:"max-w-4xl w-full h-auto object-contain mb-4"}),B.jsxs("h1",{className:"text-3xl md:text-7xl font-medium tracking-tighter text-white text-center",children:["These ",B.jsx("em",{children:"are"})," the stickers",B.jsx("br",{}),"your looking for."]}),B.jsx("p",{className:"text-white/90 text-xl md:text-2xl text-center max-w-3xl leading-relaxed font-medium",children:"The highest quality stickers, printed fast. Delivered even faster with our lightspeed print and ship proccess. Create your stickers with our online sticker designer and get a free online proof."}),B.jsxs("div",{className:"flex gap-4",children:[B.jsxs(_$,{onClick:t,children:["Start Designing",B.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"-mr-2",children:[B.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),B.jsx("path",{d:"M21 3v5h-5"}),B.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),B.jsx("path",{d:"M3 21v-5h5"})]})]}),B.jsxs(_$,{children:["Shop Stickers",B.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"-mr-2",children:B.jsx("path",{d:"m9 18 6-6-6-6"})})]})]})]}),B.jsx(BY,{hidden:!0})]})},gBe=()=>B.jsx(mBe,{});/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yBe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wie=(i,e,t,n)=>{const s=P.forwardRef(({color:r="currentColor",size:a=24,stroke:o=2,title:l,className:c,children:d,...h},m)=>P.createElement("svg",{ref:m,...yBe[i],width:a,height:a,className:["tabler-icon",`tabler-icon-${e}`,c].join(" "),strokeWidth:o,stroke:r,...h},[l&&P.createElement("title",{key:"svg-title"},l),...n.map(([v,_])=>P.createElement(v,_)),...Array.isArray(d)?d:[d]]));return s.displayName=`${t}`,s};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const vBe=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l4 4",key:"svg-1"}],["path",{d:"M5 12l4 -4",key:"svg-2"}]],_Be=Wie("outline","arrow-narrow-left","ArrowNarrowLeft",vBe);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xBe=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M15 16l4 -4",key:"svg-1"}],["path",{d:"M15 8l4 4",key:"svg-2"}]],bBe=Wie("outline","arrow-narrow-right","ArrowNarrowRight",xBe),qie=P.createContext({});function SBe(i){const e=P.useRef(null);return e.current===null&&(e.current=i()),e.current}const vk=typeof window<"u",TBe=vk?P.useLayoutEffect:P.useEffect,_k=P.createContext(null);function xk(i,e){i.indexOf(e)===-1&&i.push(e)}function bk(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const Im=(i,e,t)=>t>e?e:t<i?i:t;let Sk=()=>{};const Fm={},Xie=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function Yie(i){return typeof i=="object"&&i!==null}const Kie=i=>/^0[^.\s]+$/u.test(i);function Tk(i){let e;return()=>(e===void 0&&(e=i()),e)}const Zd=i=>i,EBe=(i,e)=>t=>e(i(t)),xM=(...i)=>i.reduce(EBe),KE=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};class Ek{constructor(){this.subscriptions=[]}add(e){return xk(this.subscriptions,e),()=>bk(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ep=i=>i*1e3,tp=i=>i/1e3;function Zie(i,e){return e?i*(1e3/e):0}const Qie=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,wBe=1e-7,MBe=12;function ABe(i,e,t,n,s){let r,a,o=0;do a=e+(t-e)/2,r=Qie(a,n,s)-i,r>0?t=a:e=a;while(Math.abs(r)>wBe&&++o<MBe);return a}function bM(i,e,t,n){if(i===e&&t===n)return Zd;const s=r=>ABe(r,0,1,i,t);return r=>r===0||r===1?r:Qie(s(r),e,n)}const Jie=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,ese=i=>e=>1-i(1-e),tse=bM(.33,1.53,.69,.99),wk=ese(tse),nse=Jie(wk),ise=i=>(i*=2)<1?.5*wk(i):.5*(2-Math.pow(2,-10*(i-1))),Mk=i=>1-Math.sin(Math.acos(i)),sse=ese(Mk),rse=Jie(Mk),CBe=bM(.42,0,1,1),RBe=bM(0,0,.58,1),ase=bM(.42,0,.58,1),NBe=i=>Array.isArray(i)&&typeof i[0]!="number",ose=i=>Array.isArray(i)&&typeof i[0]=="number",DBe={linear:Zd,easeIn:CBe,easeInOut:ase,easeOut:RBe,circIn:Mk,circInOut:rse,circOut:sse,backIn:wk,backInOut:nse,backOut:tse,anticipate:ise},PBe=i=>typeof i=="string",x$=i=>{if(ose(i)){Sk(i.length===4);const[e,t,n,s]=i;return bM(e,t,n,s)}else if(PBe(i))return DBe[i];return i},dR=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function OBe(i,e){let t=new Set,n=new Set,s=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),i()),d(o)}const c={schedule:(d,h=!1,m=!1)=>{const _=m&&s?t:n;return h&&a.add(d),_.has(d)||_.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,s){r=!0;return}s=!0,[t,n]=[n,t],t.forEach(l),t.clear(),s=!1,r&&(r=!1,c.process(d))}};return c}const LBe=40;function lse(i,e){let t=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,a=dR.reduce((M,R)=>(M[R]=OBe(r),M),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:m,render:v,postRender:_}=a,x=()=>{const M=Fm.useManualTiming?s.timestamp:performance.now();t=!1,Fm.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(M-s.timestamp,LBe),1)),s.timestamp=M,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),h.process(s),m.process(s),v.process(s),_.process(s),s.isProcessing=!1,t&&e&&(n=!1,i(x))},T=()=>{t=!0,n=!0,s.isProcessing||i(x)};return{schedule:dR.reduce((M,R)=>{const N=a[R];return M[R]=(D,L=!1,F=!1)=>(t||T(),N.schedule(D,L,F)),M},{}),cancel:M=>{for(let R=0;R<dR.length;R++)a[dR[R]].cancel(M)},state:s,steps:a}}const{schedule:qr,cancel:Gy,state:yl,steps:_U}=lse(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zd,!0);let UR;function UBe(){UR=void 0}const lu={now:()=>(UR===void 0&&lu.set(yl.isProcessing||Fm.useManualTiming?yl.timestamp:performance.now()),UR),set:i=>{UR=i,queueMicrotask(UBe)}},cse=i=>e=>typeof e=="string"&&e.startsWith(i),Ak=cse("--"),BBe=cse("var(--"),Ck=i=>BBe(i)?IBe.test(i.split("/*")[0].trim()):!1,IBe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ZS={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},ZE={...ZS,transform:i=>Im(0,1,i)},fR={...ZS,default:1},aE=i=>Math.round(i*1e5)/1e5,Rk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FBe(i){return i==null}const zBe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nk=(i,e)=>t=>!!(typeof t=="string"&&zBe.test(t)&&t.startsWith(i)||e&&!FBe(t)&&Object.prototype.hasOwnProperty.call(t,e)),use=(i,e,t)=>n=>{if(typeof n!="string")return n;const[s,r,a,o]=n.match(Rk);return{[i]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},VBe=i=>Im(0,255,i),xU={...ZS,transform:i=>Math.round(VBe(i))},Av={test:Nk("rgb","red"),parse:use("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+xU.transform(i)+", "+xU.transform(e)+", "+xU.transform(t)+", "+aE(ZE.transform(n))+")"};function kBe(i){let e="",t="",n="",s="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),e+=e,t+=t,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const DB={test:Nk("#"),parse:kBe,transform:Av.transform},SM=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),kg=SM("deg"),np=SM("%"),ni=SM("px"),GBe=SM("vh"),HBe=SM("vw"),b$={...np,parse:i=>np.parse(i)/100,transform:i=>np.transform(i*100)},pb={test:Nk("hsl","hue"),parse:use("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+np.transform(aE(e))+", "+np.transform(aE(t))+", "+aE(ZE.transform(n))+")"},no={test:i=>Av.test(i)||DB.test(i)||pb.test(i),parse:i=>Av.test(i)?Av.parse(i):pb.test(i)?pb.parse(i):DB.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Av.transform(i):pb.transform(i),getAnimatableNone:i=>{const e=no.parse(i);return e.alpha=0,no.transform(e)}},jBe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $Be(i){return isNaN(i)&&typeof i=="string"&&(i.match(Rk)?.length||0)+(i.match(jBe)?.length||0)>0}const dse="number",fse="color",WBe="var",qBe="var(",S$="${}",XBe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function QE(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(XBe,l=>(no.test(l)?(n.color.push(r),s.push(fse),t.push(no.parse(l))):l.startsWith(qBe)?(n.var.push(r),s.push(WBe),t.push(l)):(n.number.push(r),s.push(dse),t.push(parseFloat(l))),++r,S$)).split(S$);return{values:t,split:o,indexes:n,types:s}}function hse(i){return QE(i).values}function pse(i){const{split:e,types:t}=QE(i),n=e.length;return s=>{let r="";for(let a=0;a<n;a++)if(r+=e[a],s[a]!==void 0){const o=t[a];o===dse?r+=aE(s[a]):o===fse?r+=no.transform(s[a]):r+=s[a]}return r}}const YBe=i=>typeof i=="number"?0:no.test(i)?no.getAnimatableNone(i):i;function KBe(i){const e=hse(i);return pse(i)(e.map(YBe))}const Hy={test:$Be,parse:hse,createTransformer:pse,getAnimatableNone:KBe};function bU(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function ZBe({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let s=0,r=0,a=0;if(!e)s=r=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;s=bU(l,o,i+1/3),r=bU(l,o,i),a=bU(l,o,i-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:n}}function zN(i,e){return t=>t>0?e:i}const fa=(i,e,t)=>i+(e-i)*t,SU=(i,e,t)=>{const n=i*i,s=t*(e*e-n)+n;return s<0?0:Math.sqrt(s)},QBe=[DB,Av,pb],JBe=i=>QBe.find(e=>e.test(i));function T$(i){const e=JBe(i);if(!e)return!1;let t=e.parse(i);return e===pb&&(t=ZBe(t)),t}const E$=(i,e)=>{const t=T$(i),n=T$(e);if(!t||!n)return zN(i,e);const s={...t};return r=>(s.red=SU(t.red,n.red,r),s.green=SU(t.green,n.green,r),s.blue=SU(t.blue,n.blue,r),s.alpha=fa(t.alpha,n.alpha,r),Av.transform(s))},PB=new Set(["none","hidden"]);function eIe(i,e){return PB.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function tIe(i,e){return t=>fa(i,e,t)}function Dk(i){return typeof i=="number"?tIe:typeof i=="string"?Ck(i)?zN:no.test(i)?E$:sIe:Array.isArray(i)?mse:typeof i=="object"?no.test(i)?E$:nIe:zN}function mse(i,e){const t=[...i],n=t.length,s=i.map((r,a)=>Dk(r)(r,e[a]));return r=>{for(let a=0;a<n;a++)t[a]=s[a](r);return t}}function nIe(i,e){const t={...i,...e},n={};for(const s in t)i[s]!==void 0&&e[s]!==void 0&&(n[s]=Dk(i[s])(i[s],e[s]));return s=>{for(const r in n)t[r]=n[r](s);return t}}function iIe(i,e){const t=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=i.indexes[r][n[r]],o=i.values[a]??0;t[s]=o,n[r]++}return t}const sIe=(i,e)=>{const t=Hy.createTransformer(e),n=QE(i),s=QE(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?PB.has(i)&&!s.values.length||PB.has(e)&&!n.values.length?eIe(i,e):xM(mse(iIe(n,s),s.values),t):zN(i,e)};function gse(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?fa(i,e,t):Dk(i)(i,e)}const rIe=i=>{const e=({timestamp:t})=>i(t);return{start:(t=!0)=>qr.update(e,t),stop:()=>Gy(e),now:()=>yl.isProcessing?yl.timestamp:lu.now()}},yse=(i,e,t=10)=>{let n="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)n+=Math.round(i(r/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},VN=2e4;function Pk(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<VN;)e+=t,n=i.next(e);return e>=VN?1/0:e}function aIe(i,e=100,t){const n=t({...i,keyframes:[0,e]}),s=Math.min(Pk(n),VN);return{type:"keyframes",ease:r=>n.next(s*r).value/e,duration:tp(s)}}const oIe=5;function vse(i,e,t){const n=Math.max(e-oIe,0);return Zie(t-i(n),e-n)}const wa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},TU=.001;function lIe({duration:i=wa.duration,bounce:e=wa.bounce,velocity:t=wa.velocity,mass:n=wa.mass}){let s,r,a=1-e;a=Im(wa.minDamping,wa.maxDamping,a),i=Im(wa.minDuration,wa.maxDuration,tp(i)),a<1?(s=c=>{const d=c*a,h=d*i,m=d-t,v=OB(c,a),_=Math.exp(-h);return TU-m/v*_},r=c=>{const h=c*a*i,m=h*t+t,v=Math.pow(a,2)*Math.pow(c,2)*i,_=Math.exp(-h),x=OB(Math.pow(c,2),a);return(-s(c)+TU>0?-1:1)*((m-v)*_)/x}):(s=c=>{const d=Math.exp(-c*i),h=(c-t)*i+1;return-TU+d*h},r=c=>{const d=Math.exp(-c*i),h=(t-c)*(i*i);return d*h});const o=5/i,l=uIe(s,r,o);if(i=ep(i),isNaN(l))return{stiffness:wa.stiffness,damping:wa.damping,duration:i};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:a*2*Math.sqrt(n*c),duration:i}}}const cIe=12;function uIe(i,e,t){let n=t;for(let s=1;s<cIe;s++)n=n-i(n)/e(n);return n}function OB(i,e){return i*Math.sqrt(1-e*e)}const dIe=["duration","bounce"],fIe=["stiffness","damping","mass"];function w$(i,e){return e.some(t=>i[t]!==void 0)}function hIe(i){let e={velocity:wa.velocity,stiffness:wa.stiffness,damping:wa.damping,mass:wa.mass,isResolvedFromDuration:!1,...i};if(!w$(i,fIe)&&w$(i,dIe))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),s=n*n,r=2*Im(.05,1,1-(i.bounce||0))*Math.sqrt(s);e={...e,mass:wa.mass,stiffness:s,damping:r}}else{const t=lIe(i);e={...e,...t,mass:wa.mass},e.isResolvedFromDuration=!0}return e}function kN(i=wa.visualDuration,e=wa.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:s}=t;const r=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:d,duration:h,velocity:m,isResolvedFromDuration:v}=hIe({...t,velocity:-tp(t.velocity||0)}),_=m||0,x=c/(2*Math.sqrt(l*d)),T=a-r,b=tp(Math.sqrt(l/d)),w=Math.abs(T)<5;n||(n=w?wa.restSpeed.granular:wa.restSpeed.default),s||(s=w?wa.restDelta.granular:wa.restDelta.default);let M;if(x<1){const N=OB(b,x);M=D=>{const L=Math.exp(-x*b*D);return a-L*((_+x*b*T)/N*Math.sin(N*D)+T*Math.cos(N*D))}}else if(x===1)M=N=>a-Math.exp(-b*N)*(T+(_+b*T)*N);else{const N=b*Math.sqrt(x*x-1);M=D=>{const L=Math.exp(-x*b*D),F=Math.min(N*D,300);return a-L*((_+x*b*T)*Math.sinh(F)+N*T*Math.cosh(F))/N}}const R={calculatedDuration:v&&h||null,next:N=>{const D=M(N);if(v)o.done=N>=h;else{let L=N===0?_:0;x<1&&(L=N===0?ep(_):vse(M,N,D));const F=Math.abs(L)<=n,I=Math.abs(a-D)<=s;o.done=F&&I}return o.value=o.done?a:D,o},toString:()=>{const N=Math.min(Pk(R),VN),D=yse(L=>R.next(N*L).value,N,30);return N+"ms "+D},toTransition:()=>{}};return R}kN.applyToOptions=i=>{const e=aIe(i,100,kN);return i.ease=e.ease,i.duration=ep(e.duration),i.type="keyframes",i};function LB({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=i[0],m={done:!1,value:h},v=F=>o!==void 0&&F<o||l!==void 0&&F>l,_=F=>o===void 0?l:l===void 0||Math.abs(o-F)<Math.abs(l-F)?o:l;let x=t*e;const T=h+x,b=a===void 0?T:a(T);b!==T&&(x=b-h);const w=F=>-x*Math.exp(-F/n),M=F=>b+w(F),R=F=>{const I=w(F),z=M(F);m.done=Math.abs(I)<=c,m.value=m.done?b:z};let N,D;const L=F=>{v(m.value)&&(N=F,D=kN({keyframes:[m.value,_(m.value)],velocity:vse(M,F,m.value),damping:s,stiffness:r,restDelta:c,restSpeed:d}))};return L(0),{calculatedDuration:null,next:F=>{let I=!1;return!D&&N===void 0&&(I=!0,R(F),L(F)),N!==void 0&&F>=N?D.next(F-N):(!I&&R(F),m)}}}function pIe(i,e,t){const n=[],s=t||Fm.mix||gse,r=i.length-1;for(let a=0;a<r;a++){let o=s(i[a],i[a+1]);if(e){const l=Array.isArray(e)?e[a]||Zd:e;o=xM(l,o)}n.push(o)}return n}function mIe(i,e,{clamp:t=!0,ease:n,mixer:s}={}){const r=i.length;if(Sk(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),e=[...e].reverse());const o=pIe(e,n,s),l=o.length,c=d=>{if(a&&d<i[0])return e[0];let h=0;if(l>1)for(;h<i.length-2&&!(d<i[h+1]);h++);const m=KE(i[h],i[h+1],d);return o[h](m)};return t?d=>c(Im(i[0],i[r-1],d)):c}function gIe(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const s=KE(0,e,n);i.push(fa(t,1,s))}}function yIe(i){const e=[0];return gIe(e,i.length-1),e}function vIe(i,e){return i.map(t=>t*e)}function _Ie(i,e){return i.map(()=>e||ase).splice(0,i.length-1)}function oE({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const s=NBe(n)?n.map(x$):x$(n),r={done:!1,value:e[0]},a=vIe(t&&t.length===e.length?t:yIe(e),i),o=mIe(a,e,{ease:Array.isArray(s)?s:_Ie(e,s)});return{calculatedDuration:i,next:l=>(r.value=o(l),r.done=l>=i,r)}}const xIe=i=>i!==null;function Ok(i,{repeat:e,repeatType:t="loop"},n,s=1){const r=i.filter(xIe),o=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!o||n===void 0?r[o]:n}const bIe={decay:LB,inertia:LB,tween:oE,keyframes:oE,spring:kN};function _se(i){typeof i.type=="string"&&(i.type=bIe[i.type])}class Lk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const SIe=i=>i/100;class Uk extends Lk{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==lu.now()&&this.tick(lu.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;_se(e);const{type:t=oE,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=t||oE;l!==oE&&typeof o[0]!="number"&&(this.mixKeyframes=xM(SIe,gse(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=Pk(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:v,type:_,onUpdate:x,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,R=n;if(h){const F=Math.min(this.currentTime,s)/o;let I=Math.floor(F),z=F%1;!z&&F>=1&&(z=1),z===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(m==="reverse"?(z=1-z,v&&(z-=v/o)):m==="mirror"&&(R=a)),M=Im(0,1,z)*o}const N=w?{done:!1,value:d[0]}:R.next(M);r&&(N.value=r(N.value));let{done:D}=N;!w&&l!==null&&(D=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return L&&_!==LB&&(N.value=Ok(d,this.options,T,this.speed)),x&&x(N.value),L&&this.finish(),N}then(e,t){return this.finished.then(e,t)}get duration(){return tp(this.calculatedDuration)}get time(){return tp(this.currentTime)}set time(e){e=ep(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(lu.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=tp(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=rIe,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(lu.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function TIe(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const Cv=i=>i*180/Math.PI,UB=i=>{const e=Cv(Math.atan2(i[1],i[0]));return BB(e)},EIe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:UB,rotateZ:UB,skewX:i=>Cv(Math.atan(i[1])),skewY:i=>Cv(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},BB=i=>(i=i%360,i<0&&(i+=360),i),M$=UB,A$=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),C$=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),wIe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:A$,scaleY:C$,scale:i=>(A$(i)+C$(i))/2,rotateX:i=>BB(Cv(Math.atan2(i[6],i[5]))),rotateY:i=>BB(Cv(Math.atan2(-i[2],i[0]))),rotateZ:M$,rotate:M$,skewX:i=>Cv(Math.atan(i[4])),skewY:i=>Cv(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function IB(i){return i.includes("scale")?1:0}function FB(i,e){if(!i||i==="none")return IB(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(t)n=wIe,s=t;else{const o=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=EIe,s=o}if(!s)return IB(e);const r=n[e],a=s[1].split(",").map(AIe);return typeof r=="function"?r(a):a[r]}const MIe=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return FB(t,e)};function AIe(i){return parseFloat(i.trim())}const QS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],JS=new Set(QS),R$=i=>i===ZS||i===ni,CIe=new Set(["x","y","z"]),RIe=QS.filter(i=>!CIe.has(i));function NIe(i){const e=[];return RIe.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const kv={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>FB(e,"x"),y:(i,{transform:e})=>FB(e,"y")};kv.translateX=kv.x;kv.translateY=kv.y;const Gv=new Set;let zB=!1,VB=!1,kB=!1;function xse(){if(VB){const i=Array.from(Gv).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const s=NIe(n);s.length&&(t.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=t.get(n);s&&s.forEach(([r,a])=>{n.getValue(r)?.set(a)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}VB=!1,zB=!1,Gv.forEach(i=>i.complete(kB)),Gv.clear()}function bse(){Gv.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(VB=!0)})}function DIe(){kB=!0,bse(),xse(),kB=!1}class Bk{constructor(e,t,n,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Gv.add(this),zB||(zB=!0,qr.read(bse),qr.resolveKeyframes(xse))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(e[0]===null){const r=s?.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(n&&t){const o=n.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}TIe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Gv.delete(this)}cancel(){this.state==="scheduled"&&(Gv.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const PIe=i=>i.startsWith("--");function OIe(i,e,t){PIe(e)?i.style.setProperty(e,t):i.style[e]=t}const LIe=Tk(()=>window.ScrollTimeline!==void 0),UIe={};function BIe(i,e){const t=Tk(i);return()=>UIe[e]??t()}const Sse=BIe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),B1=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,N$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:B1([0,.65,.55,1]),circOut:B1([.55,0,1,.45]),backIn:B1([.31,.01,.66,-.59]),backOut:B1([.33,1.53,.69,.99])};function Tse(i,e){if(i)return typeof i=="function"?Sse()?yse(i,e):"ease-out":ose(i)?B1(i):Array.isArray(i)?i.map(t=>Tse(t,e)||N$.easeOut):N$[i]}function IIe(i,e,t,{delay:n=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[e]:t};l&&(d.offset=l);const h=Tse(o,s);Array.isArray(h)&&(d.easing=h);const m={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),i.animate(d,m)}function Ese(i){return typeof i=="function"&&"applyToOptions"in i}function FIe({type:i,...e}){return Ese(i)&&Sse()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zIe extends Lk{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,Sk(typeof e.type!="string");const c=FIe(e);this.animation=IIe(t,n,s,c,r),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=Ok(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):OIe(t,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return tp(Number(e))}get time(){return tp(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ep(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&LIe()?(this.animation.timeline=e,Zd):t(this)}}const wse={anticipate:ise,backInOut:nse,circInOut:rse};function VIe(i){return i in wse}function kIe(i){typeof i.ease=="string"&&VIe(i.ease)&&(i.ease=wse[i.ease])}const D$=10;class GIe extends zIe{constructor(e){kIe(e),_se(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:s,element:r,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new Uk({...a,autoplay:!1}),l=ep(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-D$).value,o.sample(l).value,D$),o.stop()}}const P$=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Hy.test(i)||i==="0")&&!i.startsWith("url("));function HIe(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function jIe(i,e,t,n){const s=i[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=i[i.length-1],a=P$(s,e),o=P$(r,e);return!a||!o?!1:HIe(i)||(t==="spring"||Ese(t))&&n}function GB(i){i.duration=0,i.type}const $Ie=new Set(["opacity","clipPath","filter","transform"]),WIe=Tk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qIe(i){const{motionValue:e,name:t,repeatDelay:n,repeatType:s,damping:r,type:a}=i;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return WIe()&&t&&$Ie.has(t)&&(t!=="transform"||!c)&&!l&&!n&&s!=="mirror"&&r!==0&&a!=="inertia"}const XIe=40;class YIe extends Lk{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=lu.now();const m={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:r,repeatType:a,name:l,motionValue:c,element:d,...h},v=d?.KeyframeResolver||Bk;this.keyframeResolver=new v(o,(_,x,T)=>this.onKeyframesResolved(_,x,m,!T),l,c,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:d}=n;this.resolvedAt=lu.now(),jIe(e,r,a,o)||((Fm.instantAnimations||!l)&&d?.(Ok(e,n,t)),e[0]=e[e.length-1],GB(n),n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>XIe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},v=!c&&qIe(m)?new GIe({...m,element:m.motionValue.owner.current}):new Uk(m);v.finished.then(()=>this.notifyFinished()).catch(Zd),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),DIe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const KIe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZIe(i){const e=KIe.exec(i);if(!e)return[,];const[,t,n,s]=e;return[`--${t??n}`,s]}function Mse(i,e,t=1){const[n,s]=ZIe(i);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const a=r.trim();return Xie(a)?parseFloat(a):a}return Ck(s)?Mse(s,e,t+1):s}function Ik(i,e){return i?.[e]??i?.default??i}const Ase=new Set(["width","height","top","left","right","bottom",...QS]),QIe={test:i=>i==="auto",parse:i=>i},Cse=i=>e=>e.test(i),Rse=[ZS,ni,np,kg,HBe,GBe,QIe],O$=i=>Rse.find(Cse(i));function JIe(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||Kie(i):!0}const eFe=new Set(["brightness","contrast","saturate","opacity"]);function tFe(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(Rk)||[];if(!n)return i;const s=t.replace(n,"");let r=eFe.has(e)?1:0;return n!==t&&(r*=100),e+"("+r+s+")"}const nFe=/\b([a-z-]*)\(.*?\)/gu,HB={...Hy,getAnimatableNone:i=>{const e=i.match(nFe);return e?e.map(tFe).join(" "):i}},L$={...ZS,transform:Math.round},iFe={rotate:kg,rotateX:kg,rotateY:kg,rotateZ:kg,scale:fR,scaleX:fR,scaleY:fR,scaleZ:fR,skew:kg,skewX:kg,skewY:kg,distance:ni,translateX:ni,translateY:ni,translateZ:ni,x:ni,y:ni,z:ni,perspective:ni,transformPerspective:ni,opacity:ZE,originX:b$,originY:b$,originZ:ni},Fk={borderWidth:ni,borderTopWidth:ni,borderRightWidth:ni,borderBottomWidth:ni,borderLeftWidth:ni,borderRadius:ni,radius:ni,borderTopLeftRadius:ni,borderTopRightRadius:ni,borderBottomRightRadius:ni,borderBottomLeftRadius:ni,width:ni,maxWidth:ni,height:ni,maxHeight:ni,top:ni,right:ni,bottom:ni,left:ni,padding:ni,paddingTop:ni,paddingRight:ni,paddingBottom:ni,paddingLeft:ni,margin:ni,marginTop:ni,marginRight:ni,marginBottom:ni,marginLeft:ni,backgroundPositionX:ni,backgroundPositionY:ni,...iFe,zIndex:L$,fillOpacity:ZE,strokeOpacity:ZE,numOctaves:L$},sFe={...Fk,color:no,backgroundColor:no,outlineColor:no,fill:no,stroke:no,borderColor:no,borderTopColor:no,borderRightColor:no,borderBottomColor:no,borderLeftColor:no,filter:HB,WebkitFilter:HB},Nse=i=>sFe[i];function Dse(i,e){let t=Nse(i);return t!==HB&&(t=Hy),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rFe=new Set(["auto","none","0"]);function aFe(i,e,t){let n=0,s;for(;n<i.length&&!s;){const r=i[n];typeof r=="string"&&!rFe.has(r)&&QE(r).values.length&&(s=i[n]),n++}if(s&&t)for(const r of e)i[r]=Dse(t,s)}class oFe extends Bk{constructor(e,t,n,s,r){super(e,t,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Ck(c))){const d=Mse(c,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Ase.has(n)||e.length!==2)return;const[s,r]=e,a=O$(s),o=O$(r);if(a!==o)if(R$(a)&&R$(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else kv[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||JIe(e[s]))&&n.push(s);n.length&&aFe(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=kv[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=n.length-1,a=n[r];n[r]=kv[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{e.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function lFe(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=t?.[i]??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}const Pse=(i,e)=>e&&typeof i=="number"?e.transform(i):i;function cFe(i){return Yie(i)&&"offsetHeight"in i}const U$=30,uFe=i=>!isNaN(parseFloat(i));class dFe{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=lu.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=lu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=uFe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ek);const n=this.events[e].add(t);return e==="change"?()=>{n(),qr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=lu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>U$)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,U$);return Zie(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rS(i,e){return new dFe(i,e)}const{schedule:zk}=lse(queueMicrotask,!1),Rf={x:!1,y:!1};function Ose(){return Rf.x||Rf.y}function fFe(i){return i==="x"||i==="y"?Rf[i]?null:(Rf[i]=!0,()=>{Rf[i]=!1}):Rf.x||Rf.y?null:(Rf.x=Rf.y=!0,()=>{Rf.x=Rf.y=!1})}function Lse(i,e){const t=lFe(i),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[t,s,()=>n.abort()]}function B$(i){return!(i.pointerType==="touch"||Ose())}function hFe(i,e,t={}){const[n,s,r]=Lse(i,t),a=o=>{if(!B$(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const d=h=>{B$(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",a,s)}),r}const Use=(i,e)=>e?i===e?!0:Use(i,e.parentElement):!1,Vk=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,pFe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mFe(i){return pFe.has(i.tagName)||i.tabIndex!==-1}const BR=new WeakSet;function I$(i){return e=>{e.key==="Enter"&&i(e)}}function EU(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const gFe=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=I$(()=>{if(BR.has(t))return;EU(t,"down");const s=I$(()=>{EU(t,"up")}),r=()=>EU(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function F$(i){return Vk(i)&&!Ose()}function yFe(i,e,t={}){const[n,s,r]=Lse(i,t),a=o=>{const l=o.currentTarget;if(!F$(o))return;BR.add(l);const c=e(l,o),d=(v,_)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),BR.has(l)&&BR.delete(l),F$(v)&&typeof c=="function"&&c(v,{success:_})},h=v=>{d(v,l===window||l===document||t.useGlobalTarget||Use(l,v.target))},m=v=>{d(v,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return n.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),cFe(o)&&(o.addEventListener("focus",c=>gFe(c,s)),!mFe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function Bse(i){return Yie(i)&&"ownerSVGElement"in i}function vFe(i){return Bse(i)&&i.tagName==="svg"}const $l=i=>!!(i&&i.getVelocity),_Fe=[...Rse,no,Hy],xFe=i=>_Fe.find(Cse(i)),Ise=P.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function bFe(i=!0){const e=P.useContext(_k);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=P.useId();P.useEffect(()=>{if(i)return s(r)},[i]);const a=P.useCallback(()=>i&&n&&n(r),[r,n,i]);return!t&&n?[!1,a]:[!0]}const Fse=P.createContext({strict:!1}),z$={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},aS={};for(const i in z$)aS[i]={isEnabled:e=>z$[i].some(t=>!!e[t])};function SFe(i){for(const e in i)aS[e]={...aS[e],...i[e]}}const TFe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function GN(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||TFe.has(i)}let zse=i=>!GN(i);function EFe(i){typeof i=="function"&&(zse=e=>e.startsWith("on")?!GN(e):i(e))}try{EFe(require("@emotion/is-prop-valid").default)}catch{}function wFe(i,e,t){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(zse(s)||t===!0&&GN(s)||!e&&!GN(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}const HD=P.createContext({});function jD(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function JE(i){return typeof i=="string"||Array.isArray(i)}const kk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gk=["initial",...kk];function $D(i){return jD(i.animate)||Gk.some(e=>JE(i[e]))}function Vse(i){return!!($D(i)||i.variants)}function MFe(i,e){if($D(i)){const{initial:t,animate:n}=i;return{initial:t===!1||JE(t)?t:void 0,animate:JE(n)?n:void 0}}return i.inherit!==!1?e:{}}function AFe(i){const{initial:e,animate:t}=MFe(i,P.useContext(HD));return P.useMemo(()=>({initial:e,animate:t}),[V$(e),V$(t)])}function V$(i){return Array.isArray(i)?i.join(" "):i}const ew={};function CFe(i){for(const e in i)ew[e]=i[e],Ak(e)&&(ew[e].isCSSVariable=!0)}function kse(i,{layout:e,layoutId:t}){return JS.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!ew[i]||i==="opacity")}const RFe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NFe=QS.length;function DFe(i,e,t){let n="",s=!0;for(let r=0;r<NFe;r++){const a=QS[r],o=i[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const c=Pse(o,Fk[a]);if(!l){s=!1;const d=RFe[a]||a;n+=`${d}(${c}) `}t&&(e[a]=c)}}return n=n.trim(),t?n=t(e,s?"":n):s&&(n="none"),n}function Hk(i,e,t){const{style:n,vars:s,transformOrigin:r}=i;let a=!1,o=!1;for(const l in e){const c=e[l];if(JS.has(l)){a=!0;continue}else if(Ak(l)){s[l]=c;continue}else{const d=Pse(c,Fk[l]);l.startsWith("origin")?(o=!0,r[l]=d):n[l]=d}}if(e.transform||(a||t?n.transform=DFe(e,i.transform,t):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=r;n.transformOrigin=`${l} ${c} ${d}`}}const jk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gse(i,e,t){for(const n in e)!$l(e[n])&&!kse(n,t)&&(i[n]=e[n])}function PFe({transformTemplate:i},e){return P.useMemo(()=>{const t=jk();return Hk(t,e,i),Object.assign({},t.vars,t.style)},[e])}function OFe(i,e){const t=i.style||{},n={};return Gse(n,t,i),Object.assign(n,PFe(i,e)),n}function LFe(i,e){const t={},n=OFe(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const UFe={offset:"stroke-dashoffset",array:"stroke-dasharray"},BFe={offset:"strokeDashoffset",array:"strokeDasharray"};function IFe(i,e,t=1,n=0,s=!0){i.pathLength=1;const r=s?UFe:BFe;i[r.offset]=ni.transform(-n);const a=ni.transform(e),o=ni.transform(t);i[r.array]=`${a} ${o}`}function Hse(i,{attrX:e,attrY:t,attrScale:n,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...o},l,c,d){if(Hk(i,o,c),l){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:h,style:m}=i;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=d?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),n!==void 0&&(h.scale=n),s!==void 0&&IFe(h,s,r,a,!1)}const jse=()=>({...jk(),attrs:{}}),$se=i=>typeof i=="string"&&i.toLowerCase()==="svg";function FFe(i,e,t,n){const s=P.useMemo(()=>{const r=jse();return Hse(r,e,$se(n),i.transformTemplate,i.style),{...r.attrs,style:{...r.style}}},[e]);if(i.style){const r={};Gse(r,i.style,i),s.style={...r,...s.style}}return s}const zFe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $k(i){return typeof i!="string"||i.includes("-")?!1:!!(zFe.indexOf(i)>-1||/[A-Z]/u.test(i))}function VFe(i,e,t,{latestValues:n},s,r=!1){const o=($k(i)?FFe:LFe)(e,n,s,i),l=wFe(e,typeof i=="string",r),c=i!==P.Fragment?{...l,...o,ref:t}:{},{children:d}=e,h=P.useMemo(()=>$l(d)?d.get():d,[d]);return P.createElement(i,{...c,children:h})}function k$(i){const e=[{},{}];return i?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function Wk(i,e,t,n){if(typeof e=="function"){const[s,r]=k$(n);e=e(t!==void 0?t:i.custom,s,r)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[s,r]=k$(n);e=e(t!==void 0?t:i.custom,s,r)}return e}function IR(i){return $l(i)?i.get():i}function kFe({scrapeMotionValuesFromProps:i,createRenderState:e},t,n,s){return{latestValues:GFe(t,n,s,i),renderState:e()}}function GFe(i,e,t,n){const s={},r=n(i,{});for(const m in r)s[m]=IR(r[m]);let{initial:a,animate:o}=i;const l=$D(i),c=Vse(i);e&&c&&!l&&i.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=t?t.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!jD(h)){const m=Array.isArray(h)?h:[h];for(let v=0;v<m.length;v++){const _=Wk(i,m[v]);if(_){const{transitionEnd:x,transition:T,...b}=_;for(const w in b){let M=b[w];if(Array.isArray(M)){const R=d?M.length-1:0;M=M[R]}M!==null&&(s[w]=M)}for(const w in x)s[w]=x[w]}}}return s}const Wse=i=>(e,t)=>{const n=P.useContext(HD),s=P.useContext(_k),r=()=>kFe(i,e,n,s);return t?r():SBe(r)};function qk(i,e,t){const{style:n}=i,s={};for(const r in n)($l(n[r])||e.style&&$l(e.style[r])||kse(r,i)||t?.getValue(r)?.liveStyle!==void 0)&&(s[r]=n[r]);return s}const HFe=Wse({scrapeMotionValuesFromProps:qk,createRenderState:jk});function qse(i,e,t){const n=qk(i,e,t);for(const s in i)if($l(i[s])||$l(e[s])){const r=QS.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=i[s]}return n}const jFe=Wse({scrapeMotionValuesFromProps:qse,createRenderState:jse}),$Fe=Symbol.for("motionComponentSymbol");function mb(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function WFe(i,e,t){return P.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):mb(t)&&(t.current=n))},[e])}const Xk=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qFe="framerAppearId",Xse="data-"+Xk(qFe),Yse=P.createContext({});function XFe(i,e,t,n,s){const{visualElement:r}=P.useContext(HD),a=P.useContext(Fse),o=P.useContext(_k),l=P.useContext(Ise).reducedMotion,c=P.useRef(null);n=n||a.renderer,!c.current&&n&&(c.current=n(i,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,h=P.useContext(Yse);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&YFe(c.current,t,s,h);const m=P.useRef(!1);P.useInsertionEffect(()=>{d&&m.current&&d.update(t,o)});const v=t[Xse],_=P.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return TBe(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),_.current&&d.animationState&&d.animationState.animateChanges())}),P.useEffect(()=>{d&&(!_.current&&d.animationState&&d.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),_.current=!1),d.enteringChildren=void 0)}),d}function YFe(i,e,t,n){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:Kse(i.parent)),i.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&mb(o),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:c})}function Kse(i){if(i)return i.options.allowProjection!==!1?i.projection:Kse(i.parent)}function wU(i,{forwardMotionProps:e=!1}={},t,n){t&&SFe(t);const s=$k(i)?jFe:HFe;function r(o,l){let c;const d={...P.useContext(Ise),...o,layoutId:KFe(o)},{isStatic:h}=d,m=AFe(o),v=s(o,h);if(!h&&vk){ZFe();const _=QFe(d);c=_.MeasureLayout,m.visualElement=XFe(i,v,d,n,_.ProjectionNode)}return B.jsxs(HD.Provider,{value:m,children:[c&&m.visualElement?B.jsx(c,{visualElement:m.visualElement,...d}):null,VFe(i,o,WFe(v,m.visualElement,l),v,h,e)]})}r.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const a=P.forwardRef(r);return a[$Fe]=i,a}function KFe({layoutId:i}){const e=P.useContext(qie).id;return e&&i!==void 0?e+"-"+i:i}function ZFe(i,e){P.useContext(Fse).strict}function QFe(i){const{drag:e,layout:t}=aS;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e?.isEnabled(i)||t?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function JFe(i,e){if(typeof Proxy>"u")return wU;const t=new Map,n=(r,a)=>wU(r,a,i,e),s=(r,a)=>n(r,a);return new Proxy(s,{get:(r,a)=>a==="create"?n:(t.has(a)||t.set(a,wU(a,void 0,i,e)),t.get(a))})}function Zse({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function eze({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function tze(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function MU(i){return i===void 0||i===1}function jB({scale:i,scaleX:e,scaleY:t}){return!MU(i)||!MU(e)||!MU(t)}function gv(i){return jB(i)||Qse(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function Qse(i){return G$(i.x)||G$(i.y)}function G$(i){return i&&i!=="0%"}function HN(i,e,t){const n=i-t,s=e*n;return t+s}function H$(i,e,t,n,s){return s!==void 0&&(i=HN(i,s,n)),HN(i,t,n)+e}function $B(i,e=0,t=1,n,s){i.min=H$(i.min,e,t,n,s),i.max=H$(i.max,e,t,n,s)}function Jse(i,{x:e,y:t}){$B(i.x,e.translate,e.scale,e.originPoint),$B(i.y,t.translate,t.scale,t.originPoint)}const j$=.999999999999,$$=1.0000000000001;function nze(i,e,t,n=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,a;for(let o=0;o<s;o++){r=t[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&yb(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Jse(i,a)),n&&gv(r.latestValues)&&yb(i,r.latestValues))}e.x<$$&&e.x>j$&&(e.x=1),e.y<$$&&e.y>j$&&(e.y=1)}function gb(i,e){i.min=i.min+e,i.max=i.max+e}function W$(i,e,t,n,s=.5){const r=fa(i.min,i.max,s);$B(i,e,t,r,n)}function yb(i,e){W$(i.x,e.x,e.scaleX,e.scale,e.originX),W$(i.y,e.y,e.scaleY,e.scale,e.originY)}function ere(i,e){return Zse(tze(i.getBoundingClientRect(),e))}function ize(i,e,t){const n=ere(i,t),{scroll:s}=e;return s&&(gb(n.x,s.offset.x),gb(n.y,s.offset.y)),n}const q$=()=>({translate:0,scale:1,origin:0,originPoint:0}),vb=()=>({x:q$(),y:q$()}),X$=()=>({min:0,max:0}),Ha=()=>({x:X$(),y:X$()}),WB={current:null},tre={current:!1};function sze(){if(tre.current=!0,!!vk)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>WB.current=i.matches;i.addEventListener("change",e),e()}else WB.current=!1}const rze=new WeakMap;function aze(i,e,t){for(const n in e){const s=e[n],r=t[n];if($l(s))i.addValue(n,s);else if($l(r))i.addValue(n,rS(s,{owner:i}));else if(r!==s)if(i.hasValue(n)){const a=i.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=i.getStaticValue(n);i.addValue(n,rS(a!==void 0?a:s,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const Y$=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class oze{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Bk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=lu.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,qr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=$D(t),this.isVariantNode=Vse(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in h){const v=h[m];l[m]!==void 0&&$l(v)&&v.set(l[m])}}mount(e){this.current=e,rze.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),tre.current||sze(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:WB.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Gy(this.notifyUpdate),Gy(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=JS.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&qr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in aS){const t=aS[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ha()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Y$.length;n++){const s=Y$[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=aze(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=rS(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Xie(n)||Kie(n))?n=parseFloat(n):!xFe(n)&&Hy.test(t)&&(n=Dse(e,t)),this.setBaseTarget(e,$l(n)?n.get():n)),$l(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const r=Wk(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!$l(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Ek),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){zk.render(this.render)}}class nre extends oze{constructor(){super(...arguments),this.KeyframeResolver=oFe}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$l(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function ire(i,{style:e,vars:t},n,s){const r=i.style;let a;for(a in e)r[a]=e[a];s?.applyProjectionStyles(r,n);for(a in t)r.setProperty(a,t[a])}function lze(i){return window.getComputedStyle(i)}class cze extends nre{constructor(){super(...arguments),this.type="html",this.renderInstance=ire}readValueFromInstance(e,t){if(JS.has(t))return this.projection?.isProjecting?IB(t):MIe(e,t);{const n=lze(e),s=(Ak(t)?n.getPropertyValue(t):n[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ere(e,t)}build(e,t,n){Hk(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return qk(e,t,n)}}const sre=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uze(i,e,t,n){ire(i,e,void 0,n);for(const s in e.attrs)i.setAttribute(sre.has(s)?s:Xk(s),e.attrs[s])}class dze extends nre{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ha}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(JS.has(t)){const n=Nse(t);return n&&n.default||0}return t=sre.has(t)?t:Xk(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return qse(e,t,n)}build(e,t,n){Hse(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,s){uze(e,t,n,s)}mount(e){this.isSVGTag=$se(e.tagName),super.mount(e)}}const fze=(i,e)=>$k(i)?new dze(e):new cze(e,{allowProjection:i!==P.Fragment});function Ob(i,e,t){const n=i.getProps();return Wk(n,e,t!==void 0?t:n.custom,i)}const qB=i=>Array.isArray(i);function hze(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,rS(t))}function pze(i){return qB(i)?i[i.length-1]||0:i}function mze(i,e){const t=Ob(i,e);let{transitionEnd:n={},transition:s={},...r}=t||{};r={...r,...n};for(const a in r){const o=pze(r[a]);hze(i,a,o)}}function gze(i){return!!($l(i)&&i.add)}function XB(i,e){const t=i.getValue("willChange");if(gze(t))return t.add(e);if(!t&&Fm.WillChange){const n=new Fm.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function rre(i){return i.props[Xse]}const yze=i=>i!==null;function vze(i,{repeat:e,repeatType:t="loop"},n){const s=i.filter(yze),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}const _ze={type:"spring",stiffness:500,damping:25,restSpeed:10},xze=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),bze={type:"keyframes",duration:.8},Sze={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tze=(i,{keyframes:e})=>e.length>2?bze:JS.has(i)?i.startsWith("scale")?xze(e[1]):_ze:Sze;function Eze({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const Yk=(i,e,t,n={},s,r)=>a=>{const o=Ik(n,i)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-ep(l);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:i,motionValue:e,element:r?void 0:s};Eze(o)||Object.assign(d,Tze(i,d)),d.duration&&(d.duration=ep(d.duration)),d.repeatDelay&&(d.repeatDelay=ep(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(GB(d),d.delay===0&&(h=!0)),(Fm.instantAnimations||Fm.skipAnimations)&&(h=!0,GB(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!r&&e.get()!==void 0){const m=vze(d.keyframes,o);if(m!==void 0){qr.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new Uk(d):new YIe(d)};function wze({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function are(i,e,{delay:t=0,transitionOverride:n,type:s}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(r=n);const l=[],c=s&&i.animationState&&i.animationState.getState()[s];for(const d in o){const h=i.getValue(d,i.latestValues[d]??null),m=o[d];if(m===void 0||c&&wze(c,d))continue;const v={delay:t,...Ik(r||{},d)},_=h.get();if(_!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===_&&!v.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const b=rre(i);if(b){const w=window.MotionHandoffAnimation(b,d,qr);w!==null&&(v.startTime=w,x=!0)}}XB(i,d),h.start(Yk(d,h,m,i.shouldReduceMotion&&Ase.has(d)?{type:!1}:v,i,x));const T=h.animation;T&&l.push(T)}return a&&Promise.all(l).then(()=>{qr.update(()=>{a&&mze(i,a)})}),l}function ore(i,e,t,n=0,s=1){const r=Array.from(i).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),a=i.size,o=(a-1)*n;return typeof t=="function"?t(r,a):s===1?r*n:o-r*n}function YB(i,e,t={}){const n=Ob(i,e,t.type==="exit"?i.presenceContext?.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(s=t.transitionOverride);const r=n?()=>Promise.all(are(i,n,t)):()=>Promise.resolve(),a=i.variantChildren&&i.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return Mze(i,e,l,c,d,h,t)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,c]=o==="beforeChildren"?[r,a]:[a,r];return l().then(()=>c())}else return Promise.all([r(),a(t.delay)])}function Mze(i,e,t=0,n=0,s=0,r=1,a){const o=[];for(const l of i.variantChildren)l.notify("AnimationStart",e),o.push(YB(l,e,{...a,delay:t+(typeof n=="function"?0:n)+ore(i.variantChildren,l,n,s,r)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function Aze(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(r=>YB(i,r,t));n=Promise.all(s)}else if(typeof e=="string")n=YB(i,e,t);else{const s=typeof e=="function"?Ob(i,e,t.custom):e;n=Promise.all(are(i,s,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function lre(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const Cze=Gk.length;function cre(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?cre(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<Cze;t++){const n=Gk[t],s=i.props[n];(JE(s)||s===!1)&&(e[n]=s)}return e}const Rze=[...kk].reverse(),Nze=kk.length;function Dze(i){return e=>Promise.all(e.map(({animation:t,options:n})=>Aze(i,t,n)))}function Pze(i){let e=Dze(i),t=K$(),n=!0;const s=l=>(c,d)=>{const h=Ob(i,d,l==="exit"?i.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:v,..._}=h;c={...c,..._,...v}}return c};function r(l){e=l(i)}function a(l){const{props:c}=i,d=cre(i.parent)||{},h=[],m=new Set;let v={},_=1/0;for(let T=0;T<Nze;T++){const b=Rze[T],w=t[b],M=c[b]!==void 0?c[b]:d[b],R=JE(M),N=b===l?w.isActive:null;N===!1&&(_=T);let D=M===d[b]&&M!==c[b]&&R;if(D&&n&&i.manuallyAnimateOnMount&&(D=!1),w.protectedKeys={...v},!w.isActive&&N===null||!M&&!w.prevProp||jD(M)||typeof M=="boolean")continue;const L=Oze(w.prevProp,M);let F=L||b===l&&w.isActive&&!D&&R||T>_&&R,I=!1;const z=Array.isArray(M)?M:[M];let H=z.reduce(s(b),{});N===!1&&(H={});const{prevResolvedValues:Y={}}=w,Z={...Y,...H},se=K=>{F=!0,m.has(K)&&(I=!0,m.delete(K)),w.needsAnimating[K]=!0;const $=i.getValue(K);$&&($.liveStyle=!1)};for(const K in Z){const $=H[K],ce=Y[K];if(v.hasOwnProperty(K))continue;let q=!1;qB($)&&qB(ce)?q=!lre($,ce):q=$!==ce,q?$!=null?se(K):m.add(K):$!==void 0&&m.has(K)?se(K):w.protectedKeys[K]=!0}w.prevProp=M,w.prevResolvedValues=H,w.isActive&&(v={...v,...H}),n&&i.blockInitialAnimation&&(F=!1);const oe=D&&L;F&&(!oe||I)&&h.push(...z.map(K=>{const $={type:b};if(typeof K=="string"&&n&&!oe&&i.manuallyAnimateOnMount&&i.parent){const{parent:ce}=i,q=Ob(ce,K);if(ce.enteringChildren&&q){const{delayChildren:ue}=q.transition||{};$.delay=ore(ce.enteringChildren,i,ue)}}return{animation:K,options:$}}))}if(m.size){const T={};if(typeof c.initial!="boolean"){const b=Ob(i,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(T.transition=b.transition)}m.forEach(b=>{const w=i.getBaseTarget(b),M=i.getValue(b);M&&(M.liveStyle=!0),T[b]=w??null}),h.push({animation:T})}let x=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!i.manuallyAnimateOnMount&&(x=!1),n=!1,x?e(h):Promise.resolve()}function o(l,c){if(t[l].isActive===c)return Promise.resolve();i.variantChildren?.forEach(h=>h.animationState?.setActive(l,c)),t[l].isActive=c;const d=a(l);for(const h in t)t[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>t,reset:()=>{t=K$(),n=!0}}}function Oze(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!lre(e,i):!1}function dv(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function K$(){return{animate:dv(!0),whileInView:dv(),whileHover:dv(),whileTap:dv(),whileDrag:dv(),whileFocus:dv(),exit:dv()}}class c0{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Lze extends c0{constructor(e){super(e),e.animationState||(e.animationState=Pze(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jD(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Uze=0;class Bze extends c0{constructor(){super(...arguments),this.id=Uze++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Ize={animation:{Feature:Lze},exit:{Feature:Bze}};function tw(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function TM(i){return{point:{x:i.pageX,y:i.pageY}}}const Fze=i=>e=>Vk(e)&&i(e,TM(e));function lE(i,e,t,n){return tw(i,e,Fze(t),n)}const ure=1e-4,zze=1-ure,Vze=1+ure,dre=.01,kze=0-dre,Gze=0+dre;function Rc(i){return i.max-i.min}function Hze(i,e,t){return Math.abs(i-e)<=t}function Z$(i,e,t,n=.5){i.origin=n,i.originPoint=fa(e.min,e.max,i.origin),i.scale=Rc(t)/Rc(e),i.translate=fa(t.min,t.max,i.origin)-i.originPoint,(i.scale>=zze&&i.scale<=Vze||isNaN(i.scale))&&(i.scale=1),(i.translate>=kze&&i.translate<=Gze||isNaN(i.translate))&&(i.translate=0)}function cE(i,e,t,n){Z$(i.x,e.x,t.x,n?n.originX:void 0),Z$(i.y,e.y,t.y,n?n.originY:void 0)}function Q$(i,e,t){i.min=t.min+e.min,i.max=i.min+Rc(e)}function jze(i,e,t){Q$(i.x,e.x,t.x),Q$(i.y,e.y,t.y)}function J$(i,e,t){i.min=e.min-t.min,i.max=i.min+Rc(e)}function uE(i,e,t){J$(i.x,e.x,t.x),J$(i.y,e.y,t.y)}function Ud(i){return[i("x"),i("y")]}const fre=({current:i})=>i?i.ownerDocument.defaultView:null,eW=(i,e)=>Math.abs(i-e);function $ze(i,e){const t=eW(i.x,e.x),n=eW(i.y,e.y);return Math.sqrt(t**2+n**2)}class hre{constructor(e,t,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=CU(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,_=$ze(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!_)return;const{point:x}=m,{timestamp:T}=yl;this.history.push({...x,timestamp:T});const{onStart:b,onMove:w}=this.handlers;v||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=AU(v,this.transformPagePoint),qr.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:_,onSessionEnd:x,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=CU(m.type==="pointercancel"?this.lastMoveEventInfo:AU(v,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,b),x&&x(m,b)},!Vk(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=s||window;const o=TM(e),l=AU(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=yl;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=t;h&&h(e,CU(l,this.history)),this.removeListeners=xM(lE(this.contextWindow,"pointermove",this.handlePointerMove),lE(this.contextWindow,"pointerup",this.handlePointerUp),lE(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Gy(this.updatePoint)}}function AU(i,e){return e?{point:e(i.point)}:i}function tW(i,e){return{x:i.x-e.x,y:i.y-e.y}}function CU({point:i},e){return{point:i,delta:tW(i,pre(e)),offset:tW(i,Wze(e)),velocity:qze(e,.1)}}function Wze(i){return i[0]}function pre(i){return i[i.length-1]}function qze(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const s=pre(i);for(;t>=0&&(n=i[t],!(s.timestamp-n.timestamp>ep(e)));)t--;if(!n)return{x:0,y:0};const r=tp(s.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Xze(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?fa(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?fa(t,i,n.max):Math.min(i,t)),i}function nW(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function Yze(i,{top:e,left:t,bottom:n,right:s}){return{x:nW(i.x,t,s),y:nW(i.y,e,n)}}function iW(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function Kze(i,e){return{x:iW(i.x,e.x),y:iW(i.y,e.y)}}function Zze(i,e){let t=.5;const n=Rc(i),s=Rc(e);return s>n?t=KE(e.min,e.max-n,i.min):n>s&&(t=KE(i.min,i.max-s,e.min)),Im(0,1,t)}function Qze(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const KB=.35;function Jze(i=KB){return i===!1?i=0:i===!0&&(i=KB),{x:sW(i,"left","right"),y:sW(i,"top","bottom")}}function sW(i,e,t){return{min:rW(i,e),max:rW(i,t)}}function rW(i,e){return typeof i=="number"?i:i[e]||0}const eVe=new WeakMap;class tVe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ha(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(TM(h).point)},a=(h,m)=>{const{drag:v,dragPropagation:_,onDragStart:x}=this.getProps();if(v&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fFe(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ud(b=>{let w=this.getAxisMotionValue(b).get()||0;if(np.test(w)){const{projection:M}=this.visualElement;if(M&&M.layout){const R=M.layout.layoutBox[b];R&&(w=Rc(R)*(parseFloat(w)/100))}}this.originPoint[b]=w}),x&&qr.postRender(()=>x(h,m)),XB(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:_,onDirectionLock:x,onDrag:T}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:b}=m;if(_&&this.currentDirection===null){this.currentDirection=nVe(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),T&&T(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ud(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new hre(e,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:fre(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,s=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&qr.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!hR(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Xze(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&mb(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Yze(n.layoutBox,e):this.constraints=!1,this.elastic=Jze(t),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ud(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=Qze(n.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!mb(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=ize(n,s.root,this.visualElement.getTransformPagePoint());let a=Kze(s.layout.layoutBox,r);if(t){const o=t(eze(a));this.hasMutatedConstraints=!!o,o&&(a=Zse(o))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Ud(d=>{if(!hR(d,t,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const m=s?200:1e6,v=s?40:1e7,_={type:"inertia",velocity:n?e[d]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return XB(this.visualElement,e),n.start(Yk(e,n,0,t,this.visualElement,!1))}stopAnimation(){Ud(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ud(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ud(t=>{const{drag:n}=this.getProps();if(!hR(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[t];r.set(e[t]-fa(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!mb(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ud(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=Zze({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ud(a=>{if(!hR(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(fa(l,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;eVe.set(this.visualElement,this);const e=this.visualElement.current,t=lE(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();mb(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),qr.read(n);const a=tw(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ud(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{a(),t(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=KB,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function hR(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function nVe(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class iVe extends c0{constructor(e){super(e),this.removeGroupControls=Zd,this.removeListeners=Zd,this.controls=new tVe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zd}unmount(){this.removeGroupControls(),this.removeListeners()}}const aW=i=>(e,t)=>{i&&qr.postRender(()=>i(e,t))};class sVe extends c0{constructor(){super(...arguments),this.removePointerDownListener=Zd}onPointerDown(e){this.session=new hre(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fre(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:aW(e),onStart:aW(t),onMove:n,onEnd:(r,a)=>{delete this.session,s&&qr.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=lE(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const FR={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oW(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const T1={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(ni.test(i))i=parseFloat(i);else return i;const t=oW(i,e.target.x),n=oW(i,e.target.y);return`${t}% ${n}%`}},rVe={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,s=Hy.parse(i);if(s.length>5)return n;const r=Hy.createTransformer(i),a=typeof s[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const c=fa(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),r(s)}};let RU=!1;class aVe extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;CFe(oVe),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),RU&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),FR.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,{projection:a}=n;return a&&(a.isPresent=r,RU=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||qr.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;RU=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mre(i){const[e,t]=bFe(),n=P.useContext(qie);return B.jsx(aVe,{...i,layoutGroup:n,switchLayoutGroup:P.useContext(Yse),isPresent:e,safeToRemove:t})}const oVe={borderRadius:{...T1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:T1,borderTopRightRadius:T1,borderBottomLeftRadius:T1,borderBottomRightRadius:T1,boxShadow:rVe};function lVe(i,e,t){const n=$l(i)?i:rS(i);return n.start(Yk("",n,e,t)),n.animation}const cVe=(i,e)=>i.depth-e.depth;class uVe{constructor(){this.children=[],this.isDirty=!1}add(e){xk(this.children,e),this.isDirty=!0}remove(e){bk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cVe),this.isDirty=!1,this.children.forEach(e)}}function dVe(i,e){const t=lu.now(),n=({timestamp:s})=>{const r=s-t;r>=e&&(Gy(n),i(r-e))};return qr.setup(n,!0),()=>Gy(n)}const gre=["TopLeft","TopRight","BottomLeft","BottomRight"],fVe=gre.length,lW=i=>typeof i=="string"?parseFloat(i):i,cW=i=>typeof i=="number"||ni.test(i);function hVe(i,e,t,n,s,r){s?(i.opacity=fa(0,t.opacity??1,pVe(n)),i.opacityExit=fa(e.opacity??1,0,mVe(n))):r&&(i.opacity=fa(e.opacity??1,t.opacity??1,n));for(let a=0;a<fVe;a++){const o=`border${gre[a]}Radius`;let l=uW(e,o),c=uW(t,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||cW(l)===cW(c)?(i[o]=Math.max(fa(lW(l),lW(c),n),0),(np.test(c)||np.test(l))&&(i[o]+="%")):i[o]=c}(e.rotate||t.rotate)&&(i.rotate=fa(e.rotate||0,t.rotate||0,n))}function uW(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const pVe=yre(0,.5,sse),mVe=yre(.5,.95,Zd);function yre(i,e,t){return n=>n<i?0:n>e?1:t(KE(i,e,n))}function dW(i,e){i.min=e.min,i.max=e.max}function Od(i,e){dW(i.x,e.x),dW(i.y,e.y)}function fW(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function hW(i,e,t,n,s){return i-=e,i=HN(i,1/t,n),s!==void 0&&(i=HN(i,1/s,n)),i}function gVe(i,e=0,t=1,n=.5,s,r=i,a=i){if(np.test(e)&&(e=parseFloat(e),e=fa(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=fa(r.min,r.max,n);i===r&&(o-=e),i.min=hW(i.min,e,t,o,s),i.max=hW(i.max,e,t,o,s)}function pW(i,e,[t,n,s],r,a){gVe(i,e[t],e[n],e[s],e.scale,r,a)}const yVe=["x","scaleX","originX"],vVe=["y","scaleY","originY"];function mW(i,e,t,n){pW(i.x,e,yVe,t?t.x:void 0,n?n.x:void 0),pW(i.y,e,vVe,t?t.y:void 0,n?n.y:void 0)}function gW(i){return i.translate===0&&i.scale===1}function vre(i){return gW(i.x)&&gW(i.y)}function yW(i,e){return i.min===e.min&&i.max===e.max}function _Ve(i,e){return yW(i.x,e.x)&&yW(i.y,e.y)}function vW(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function _re(i,e){return vW(i.x,e.x)&&vW(i.y,e.y)}function _W(i){return Rc(i.x)/Rc(i.y)}function xW(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class xVe{constructor(){this.members=[]}add(e){xk(this.members,e),e.scheduleRender()}remove(e){if(bk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let n;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bVe(i,e,t){let n="";const s=i.x.translate/e.x,r=i.y.translate/e.y,a=t?.z||0;if((s||r||a)&&(n=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:m,skewX:v,skewY:_}=t;c&&(n=`perspective(${c}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),v&&(n+=`skewX(${v}deg) `),_&&(n+=`skewY(${_}deg) `)}const o=i.x.scale*e.x,l=i.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const NU=["","X","Y","Z"],SVe=1e3;let TVe=0;function DU(i,e,t,n){const{latestValues:s}=e;s[i]&&(t[i]=s[i],e.setStaticValue(i,0),n&&(n[i]=0))}function xre(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=rre(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",qr,!(s||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&xre(n)}function bre({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},o=e?.()){this.id=TVe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(MVe),this.nodes.forEach(NVe),this.nodes.forEach(DVe),this.nodes.forEach(AVe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new uVe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Ek),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Bse(a)&&!vFe(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),i){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;qr.read(()=>{h=window.innerWidth}),i(a,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,d&&d(),d=dVe(m,250),FR.hasAnimatedSinceResize&&(FR.hasAnimatedSinceResize=!1,this.nodes.forEach(TW)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||c.getDefaultTransition()||BVe,{onLayoutAnimationStart:x,onLayoutAnimationComplete:T}=c.getProps(),b=!this.targetLayout||!_re(this.targetLayout,v),w=!h&&m;if(this.options.layoutRoot||this.resumeFrom||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Ik(_,"layout"),onPlay:x,onComplete:T};(c.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(d,w)}else h||TW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gy(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PVe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xre(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bW);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SW);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(RVe),this.nodes.forEach(EVe),this.nodes.forEach(wVe)):this.nodes.forEach(SW),this.clearAllSnapshots();const o=lu.now();yl.delta=Im(0,1e3/60,o-yl.timestamp),yl.timestamp=o,yl.isProcessing=!0,_U.update.process(yl),_U.preRender.process(yl),_U.render.process(yl),yl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CVe),this.sharedNodes.forEach(OVe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Rc(this.snapshot.measuredBox.x)&&!Rc(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ha(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!vre(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||gv(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),IVe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Ha();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(FVe))){const{scroll:c}=this.root;c&&(gb(o.x,c.offset.x),gb(o.y,c.offset.y))}return o}removeElementScroll(a){const o=Ha();if(Od(o,a),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Od(o,a),gb(o.x,d.offset.x),gb(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=Ha();Od(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&yb(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),gv(d.latestValues)&&yb(l,d.latestValues)}return gv(this.latestValues)&&yb(l,this.latestValues),l}removeTransform(a){const o=Ha();Od(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!gv(c.latestValues))continue;jB(c.latestValues)&&c.updateSnapshot();const d=Ha(),h=c.measurePageBox();Od(d,h),mW(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return gv(this.latestValues)&&mW(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=yl.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ha(),this.relativeTargetOrigin=Ha(),uE(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Od(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ha(),this.targetWithTransforms=Ha()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jze(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Od(this.target,this.layout.layoutBox),Jse(this.target,this.targetDelta)):Od(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ha(),this.relativeTargetOrigin=Ha(),uE(this.relativeTargetOrigin,this.target,m.target),Od(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jB(this.parent.latestValues)||Qse(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===yl.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Od(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;nze(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ha());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fW(this.prevProjectionDelta.x,this.projectionDelta.x),fW(this.prevProjectionDelta.y,this.projectionDelta.y)),cE(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!xW(this.projectionDelta.x,this.prevProjectionDelta.x)||!xW(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vb(),this.projectionDelta=vb(),this.projectionDeltaWithTransform=vb()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=vb();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Ha(),v=l?l.source:void 0,_=this.layout?this.layout.source:void 0,x=v!==_,T=this.getStack(),b=!T||T.members.length<=1,w=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(UVe));this.animationProgress=0;let M;this.mixTargetDelta=R=>{const N=R/1e3;EW(h.x,a.x,N),EW(h.y,a.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(uE(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LVe(this.relativeTarget,this.relativeTargetOrigin,m,N),M&&_Ve(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Ha()),Od(M,this.relativeTarget)),x&&(this.animationValues=d,hVe(d,c,this.latestValues,N,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Gy(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qr.update(()=>{FR.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rS(0)),this.currentAnimation=lVe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SVe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&Sre(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ha();const h=Rc(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const m=Rc(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Od(o,l),yb(o,d),cE(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new xVe),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&DU("z",a,c,this.animationValues);for(let d=0;d<NU.length;d++)DU(`rotate${NU[d]}`,a,c,this.animationValues),DU(`skew${NU[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=IR(o?.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=IR(o?.pointerEvents)||""),this.hasProjected&&!gv(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=bVe(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),a.transform=h;const{x:m,y:v}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const _ in ew){if(d[_]===void 0)continue;const{correct:x,applyTo:T,isCSSVariable:b}=ew[_],w=h==="none"?d[_]:x(d[_],c);if(T){const M=T.length;for(let R=0;R<M;R++)a[T[R]]=w}else b?this.options.visualElement.renderState.vars[_]=w:a[_]=w}this.options.layoutId&&(a.pointerEvents=c===this?IR(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(bW),this.root.sharedNodes.clear()}}}function EVe(i){i.updateLayout()}function wVe(i){const e=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=i.layout,{animationType:s}=i.options,r=e.source!==i.layout.source;s==="size"?Ud(d=>{const h=r?e.measuredBox[d]:e.layoutBox[d],m=Rc(h);h.min=t[d].min,h.max=h.min+m}):Sre(s,e.layoutBox,t)&&Ud(d=>{const h=r?e.measuredBox[d]:e.layoutBox[d],m=Rc(t[d]);h.max=h.min+m,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[d].max=i.relativeTarget[d].min+m)});const a=vb();cE(a,t,e.layoutBox);const o=vb();r?cE(o,i.applyTransform(n,!0),e.measuredBox):cE(o,t,e.layoutBox);const l=!vre(a);let c=!1;if(!i.resumeFrom){const d=i.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const v=Ha();uE(v,e.layoutBox,h.layoutBox);const _=Ha();uE(_,t,m.layoutBox),_re(v,_)||(c=!0),d.options.layoutRoot&&(i.relativeTarget=_,i.relativeTargetOrigin=v,i.relativeParent=d)}}}i.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(i.isLead()){const{onExitComplete:t}=i.options;t&&t()}i.options.transition=void 0}function MVe(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function AVe(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function CVe(i){i.clearSnapshot()}function bW(i){i.clearMeasurements()}function SW(i){i.isLayoutDirty=!1}function RVe(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function TW(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function NVe(i){i.resolveTargetDelta()}function DVe(i){i.calcProjection()}function PVe(i){i.resetSkewAndRotation()}function OVe(i){i.removeLeadSnapshot()}function EW(i,e,t){i.translate=fa(e.translate,0,t),i.scale=fa(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function wW(i,e,t,n){i.min=fa(e.min,t.min,n),i.max=fa(e.max,t.max,n)}function LVe(i,e,t,n){wW(i.x,e.x,t.x,n),wW(i.y,e.y,t.y,n)}function UVe(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const BVe={duration:.45,ease:[.4,0,.1,1]},MW=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),AW=MW("applewebkit/")&&!MW("chrome/")?Math.round:Zd;function CW(i){i.min=AW(i.min),i.max=AW(i.max)}function IVe(i){CW(i.x),CW(i.y)}function Sre(i,e,t){return i==="position"||i==="preserve-aspect"&&!Hze(_W(e),_W(t),.2)}function FVe(i){return i!==i.root&&i.scroll?.wasRoot}const zVe=bre({attachResizeListener:(i,e)=>tw(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),PU={current:void 0},Tre=bre({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!PU.current){const i=new zVe({});i.mount(window),i.setOptions({layoutScroll:!0}),PU.current=i}return PU.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),VVe={pan:{Feature:sVe},drag:{Feature:iVe,ProjectionNode:Tre,MeasureLayout:mre}};function RW(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=n[s];r&&qr.postRender(()=>r(e,TM(e)))}class kVe extends c0{mount(){const{current:e}=this.node;e&&(this.unmount=hFe(e,(t,n)=>(RW(this.node,n,"Start"),s=>RW(this.node,s,"End"))))}unmount(){}}class GVe extends c0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xM(tw(this.node.current,"focus",()=>this.onFocus()),tw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NW(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=n[s];r&&qr.postRender(()=>r(e,TM(e)))}class HVe extends c0{mount(){const{current:e}=this.node;e&&(this.unmount=yFe(e,(t,n)=>(NW(this.node,n,"Start"),(s,{success:r})=>NW(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ZB=new WeakMap,OU=new WeakMap,jVe=i=>{const e=ZB.get(i.target);e&&e(i)},$Ve=i=>{i.forEach(jVe)};function WVe({root:i,...e}){const t=i||document;OU.has(t)||OU.set(t,{});const n=OU.get(t),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver($Ve,{root:i,...e})),n[s]}function qVe(i,e,t){const n=WVe(e);return ZB.set(i,t),n.observe(i),()=>{ZB.delete(i),n.unobserve(i)}}const XVe={some:0,all:1};class YVe extends c0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:XVe[s]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return qVe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(KVe(e,t))&&this.startObserver()}unmount(){}}function KVe({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const ZVe={inView:{Feature:YVe},tap:{Feature:HVe},focus:{Feature:GVe},hover:{Feature:kVe}},QVe={layout:{ProjectionNode:Tre,MeasureLayout:mre}},JVe={...Ize,...ZVe,...VVe,...QVe},eke=JFe(JVe,fze),Ere=fe.memo(({card:i,index:e})=>{const[t,n]=P.useState(null);return B.jsxs("div",{onMouseEnter:()=>n(e),onMouseLeave:()=>n(null),onClick:()=>window.location.href=i.route,className:"cursor-pointer rounded-3xl bg-gray-100 dark:bg-neutral-900 h-60 md:h-96 w-56 md:w-96 overflow-hidden flex flex-col items-start justify-start relative z-10 hover:scale-105 transition-transform duration-300",children:[B.jsx("img",{src:i.src,alt:i.title,className:"object-cover absolute inset-0 w-full h-full"}),B.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"}),B.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:[B.jsx("div",{className:"text-sm text-gray-300 mb-2",children:i.category}),B.jsx("div",{className:"text-xl md:text-2xl font-bold text-white",children:i.title})]})]})});Ere.displayName="Card";function tke({items:i,initialScroll:e=0}){const t=fe.useRef(null),[n,s]=fe.useState(!1),[r,a]=fe.useState(!0),[o,l]=P.useState(null);P.useEffect(()=>{t.current&&(t.current.scrollLeft=e,c())},[e]);const c=()=>{if(t.current){const{scrollLeft:m,scrollWidth:v,clientWidth:_}=t.current;s(m>0),a(m<v-_)}},d=()=>{t.current&&t.current.scrollBy({left:-300,behavior:"smooth"})},h=()=>{t.current&&t.current.scrollBy({left:300,behavior:"smooth"})};return B.jsxs("div",{className:"relative w-full",children:[B.jsxs("div",{className:"flex w-full overflow-x-scroll overscroll-x-auto py-10 md:py-20 scroll-smooth [scrollbar-width:none]",ref:t,onScroll:c,children:[B.jsx("div",{className:bl("absolute right-0 z-[1000] h-auto w-[5%] overflow-hidden bg-gradient-to-l")}),B.jsx("div",{className:bl("flex flex-row justify-start gap-4 pl-4","max-w-7xl mx-auto"),children:i.map((m,v)=>B.jsx(eke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,delay:.1*v,ease:"easeOut",once:!0}},className:"last:pr-[5%] md:last:pr-[33%] rounded-3xl",children:m},"card"+v))})]}),B.jsxs("div",{className:"flex justify-end gap-2 mr-10",children:[B.jsx("button",{className:"relative z-40 h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center disabled:opacity-50",onClick:d,disabled:!n,children:B.jsx(_Be,{className:"h-6 w-6 text-gray-500"})}),B.jsx("button",{className:"relative z-40 h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center disabled:opacity-50",onClick:h,disabled:!r,children:B.jsx(bBe,{className:"h-6 w-6 text-gray-500"})})]})]})}const pR=({title:i,description:e})=>B.jsx("div",{className:"bg-[#F5F5F7] dark:bg-neutral-800 p-8 md:p-14 rounded-3xl mb-4",children:B.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400 text-base md:text-2xl font-sans max-w-3xl mx-auto",children:[B.jsx("span",{className:"font-bold text-neutral-700 dark:text-neutral-200",children:i})," ",e]})}),nke=[{category:"Design",title:"Die Cut Stickers",src:"https://i.postimg.cc/59kv5xhg/custom-stickers-hero-1-1-2000x2000.png",route:"/designer",content:B.jsx(pR,{title:"Create custom die-cut stickers",description:"Design your perfect sticker with our advanced editor. Precisely cut to any shape you desire."})},{category:"Collections",title:"Sticker Sheets",src:"https://stickerapp.com/media/400x400/63b85e1479/icon-sticker-sheet-400x400.png",route:"/shop",content:B.jsx(pR,{title:"Multiple designs on one sheet",description:"Get more value with sticker sheets featuring multiple designs in one convenient package."})},{category:"Typography",title:"Text Decals",src:"https://stickerapp.com/media/400x400/c4dd7b4b6a/icon-heavy-duty-sticker-400x400.png",route:"/shop",content:B.jsx(pR,{title:"Professional text decals",description:"Clean, professional text decals with no background. Perfect for branding and labeling."})},{category:"Marketplace",title:"Sticker Shop",src:"https://stickerapp.com/media/400x400/95570fc805/sticker-shop-logo-400x400.png",route:"/shop",content:B.jsx(pR,{title:"Browse our marketplace",description:"Discover thousands of unique sticker designs from talented creators around the world."})}];function ike(){const i=nke.map((e,t)=>B.jsx(Ere,{card:e,index:t},e.src));return B.jsxs("div",{className:"w-full h-full py-20 bg-slate-50",children:[B.jsx("h2",{className:"max-w-7xl pl-4 mx-auto text-xl md:text-5xl font-bold text-neutral-800 dark:text-neutral-200 font-sans mb-8",children:"Choose Your Sticker Style"}),B.jsx(tke,{items:i})]})}const ske=({material:i})=>{const[e,t]=P.useState(null),n=P.useRef(null),s=()=>{n.current?.click()};return B.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg flex flex-col overflow-hidden h-full",children:[B.jsx("div",{className:"aspect-square w-full overflow-hidden",children:B.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover"})}),B.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[B.jsxs("div",{className:"flex justify-between items-start mb-2",children:[B.jsxs("div",{children:[B.jsx("h3",{className:"text-2xl font-black text-zinc-900",children:i.title}),B.jsx("p",{className:"text-slate-500",children:i.subtitle})]}),B.jsxs("a",{href:"#",className:"text-blue-600 font-semibold hover:underline",children:["From $",Math.min(...i.prices.map(r=>r.price))]})]}),B.jsx("ul",{className:"my-4 space-y-1",children:i.prices.map((r,a)=>B.jsx("li",{className:`rounded-md transition-colors ${e?.quantity===r.quantity?"bg-yellow-100":"hover:bg-slate-50"}`,children:B.jsxs("label",{className:"flex justify-between items-center p-3 cursor-pointer",children:[B.jsxs("div",{className:"flex items-center",children:[B.jsx("input",{type:"radio",name:`price-${i.id}`,className:"h-4 w-4 text-yellow-500 border-slate-300 focus:ring-yellow-400",checked:e?.quantity===r.quantity,onChange:()=>t(r)}),B.jsxs("span",{className:"ml-3 text-zinc-800",children:[r.quantity," pcs"]})]}),B.jsxs("div",{className:"flex items-center",children:[B.jsxs("span",{className:"font-bold text-zinc-900 mr-2",children:["$",r.price]}),r.discount&&B.jsxs("span",{className:"text-sm font-bold text-green-600 bg-green-100 px-2 py-0.5 rounded-full",children:["-",r.discount,"%"]})]})]})},a))}),B.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-200",children:[B.jsx("ul",{className:"text-sm text-slate-600 space-y-2 mb-4",children:i.features.map((r,a)=>B.jsxs("li",{className:"italic",children:[" ",r]},a))}),B.jsx("input",{type:"file",ref:n,className:"hidden"}),B.jsx("button",{onClick:s,disabled:!e,className:`w-full font-bold py-3 px-6 rounded-lg text-lg transition-all duration-300
                ${e?"bg-yellow-400 text-white hover:bg-yellow-500 shadow-md hover:shadow-lg transform hover:-translate-y-1":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:"Upload file"})]})]})]})},rke=({materials:i})=>B.jsx("section",{className:"bg-slate-50 py-12 md:py-16",children:B.jsxs("div",{className:"container mx-auto px-4",children:[B.jsxs("div",{className:"max-w-2xl mb-12",children:[B.jsx("h2",{className:"text-4xl md:text-5xl font-black text-zinc-900 mb-4",children:"Sticker Materials"}),B.jsx("p",{className:"text-lg text-zinc-700",children:"Explore our durable materials, from vinyl and crystal-clear transparents to iridescent holographic, brushed metallic, glitter, prismatic, and more. Discover the exact finish and feel that brings your design to life."})]}),B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map(e=>B.jsx(ske,{material:e},e.id))})]})}),I1=()=>{const i=[{title:"Any shape",description:"Precisely cut to your design",icon:"https://stickerapp.com/media/131x150/117c70d368/icon-cheese-bullet-yellow-dot.svg/m/600x0/filters:quality(60)",alt:"Shape icon"},{title:"Wide range of materials",description:"Endless possibilities for your design",icon:"https://stickerapp.com/media/131x150/117c70d368/icon-cheese-bullet-yellow-dot.svg/m/600x0/filters:quality(60)",alt:"Materials icon"},{title:"Add-on Options",description:"Back paper print",icon:"https://stickerapp.com/media/131x150/117c70d368/icon-cheese-bullet-yellow-dot.svg/m/600x0/filters:quality(60)",alt:"Add-on icon"}];return B.jsx("div",{className:"bg-white py-16",children:B.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left",children:i.map((e,t)=>B.jsxs("div",{className:"flex items-start space-x-4",children:[B.jsx("img",{src:e.icon,alt:e.alt,className:"w-9 h-auto flex-shrink-0"}),B.jsxs("div",{children:[B.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e.title}),B.jsx("p",{className:"mt-1 text-base text-gray-500",children:e.description})]})]},t))})})})},QB=[{id:"vinyl",title:"Vinyl Stickers",subtitle:"The OG Material",imageUrl:"https://stickerapp.com/media/2000x2000/4987f17673/vinyl-clown-sticker.png/m/1000x0/filters:quality(60)",prices:[{quantity:100,price:62,discount:32},{quantity:300,price:109,discount:52},{quantity:600,price:168,discount:59},{quantity:1200,price:242,discount:65}],features:["PVC Free","Back Paper Print","Waterproof"]},{id:"transparent",title:"Transparent",subtitle:"Custom stickers",imageUrl:"https://stickerapp.com/media/1080x1080/0f6a86e449/transparent-stickers-can.png/m/1000x0/filters:quality(60)",prices:[{quantity:100,price:109},{quantity:300,price:131,discount:52},{quantity:600,price:168,discount:66},{quantity:1200,price:242,discount:71}],features:["PVC Free","Back Paper Print","Waterproof"]},{id:"holographic",title:"Holographic",subtitle:"Custom stickers",imageUrl:"https://stickerapp.com/media/2000x2000/94b677d83d/holographic-sticker-catsemla.png/m/1000x0/filters:quality(60)",prices:[{quantity:50,price:60,discount:8},{quantity:200,price:126,discount:36},{quantity:500,price:181,discount:54},{quantity:900,price:289,discount:63}],features:["PVC Free","Back Paper Print (Not available)","Waterproof"]}],mR=[{title:"Custom Sticker Packs",paragraphs:["Stickers in a bag with a header, done!","Customize your stickers and your header for the ultimate branding kit in a bag from as little as $3.15* per pack.","*3 stickers with a 100 pack minimum order"],buttonText:"Get started",buttonLink:"#",imageUrl:"https://stickerapp.com/media/500x500/13e8253228/custom-stickerpack-creativepain-500x500-2.jpg/m/400x0/filters:quality(60)",imagePosition:"right"},{title:"Transform your ideas into high-quality custom stickers",paragraphs:["In the vibrant world of StickerApp, your creativity meets our cutting-edge technology to turn your visions into high-quality, custom stickers.","Whether you're looking to bring your business logo to life, add a personal touch to your belongings, or create unique promotional material, our sticker services make the process effortless and enjoyable.","Choose from a plethora of sizes, materials, and finishes to perfectly capture your vision. Regardless if you're a design novice or a seasoned pro, our platform guides you through each step, ensuring your custom stickers are exactly how you imagined them."],buttonText:"",buttonLink:"#",imageUrl:"https://stickerapp.com/media/750x750/460aeeddb5/vinyl-diecut-several-stacked-samurai-aquapool-creativesouth-white-bg-750x750.jpg/m/1000x0/filters:quality(60)"},{title:"Experience our celebrated, durable, and weatherproof materials",paragraphs:["Our commitment to quality is unwavering. Utilizing only the finest materials and the latest in printing technology, we ensure your designs not only look stunning but also stand the test of time. From weather-resistance to dishwasher-safe, your stickers will maintain their brilliance through every adventure.","In case you aim for understated elegance or want to make a bold, iridescent statement, we have you covered. With options ranging from sleek vinyl to eye-popping holographic and everything in between, the possibilities are limitless. Choose matte, glossy, or our unique holographic cracked ice finish to give your stickers the exact look and feel you desire."],buttonText:"",buttonLink:"#",imageUrl:"https://stickerapp.com/media/419x419/6626452f09/hi-tack-vinyl-single-flat-noicecanceling-white-bg-419x419.png/m/600x0/filters:quality(60)",imagePosition:"right"},{title:"Ready to turn your ideas into tangible art?",paragraphs:["At StickerApp, we're more than just a printing service; we're a community of creators, businesses, and individuals passionate about quality, creativity, and expression.","We invite you to discover how fun, and cost-effective, custom stickers can be. Make a single masterpiece or bulk orders for your business. We offer transparent pricing and insights into maximizing your investment in custom stickers.","Begin your creative journey to explore the endless possibilities of custom stickers by selecting your preferences in our wizard. With our easy-to-use platform, quality guarantee, and passion for creativity, your perfect sticker is just a few clicks away!"],buttonText:"Make customizable stickers",buttonLink:"#",imageUrl:"https://stickerapp.com/media/750x750/9560968480/vinyl-diecut-single-stacked-vinyldays-white-bg-750x750.jpg/m/600x0/filters:quality(60)"}],wre=[{name:"Contour Cut",icon:"https://d6ce0no7ktiq.cloudfront.net/images/web/wizard/ic_contourcut.svg"},{name:"Square",icon:"https://d6ce0no7ktiq.cloudfront.net/images/web/wizard/ic_square.svg"},{name:"Circle",icon:"https://d6ce0no7ktiq.cloudfront.net/images/web/wizard/ic_circle.svg"},{name:"Rounded Corners",icon:"https://d6ce0no7ktiq.cloudfront.net/images/web/wizard/ic_round-corners.svg"}],DW=["Glossy","Matte","Cracked Ice"],PW=[{name:'2" x 2"'},{name:'3" x 3"'},{name:'4" x 4"'},{name:'5" x 5"'},{name:'6" x 6"'}],LU=[{amount:55,price:26},{amount:100,price:47},{amount:200,price:64,discount:32},{amount:300,price:96,discount:32},{amount:500,price:114,discount:52},{amount:600,price:136,discount:52},{amount:900,price:175,discount:59},{amount:1200,price:201,discount:65}],ake=[{src:"https://stickerapp.com/media/2000x2000/cb074be4de/pixiedust-stickers-howdy-2000x2000.png/m/2400x0/filters:quality(60)",alt:"Howdy sticker with pixie dust effect"},{src:"https://stickerapp.com/media/2000x1600/d800bf7ff2/sushi-bot-vinyl-paiheme-social-4-5-2000x1600.png/m/2400x0/filters:quality(60)",alt:"A hand holding a vinyl sticker of an astronaut eating ramen"},{src:"https://stickerapp.com/media/2000x1600/f851506b47/die-cut-clear-sticker-dealwithit-2000x1600.jpg/m/2400x0/filters:quality(60)",alt:"Transparent die cut sticker of a masked person"},{src:"https://stickerapp.com/media/2000x1600/ec4957fdd8/die-cut-pixie-sticker-girl-2000x1600.jpg/m/1200x0/filters:quality(60)",alt:"Die cut Sticker of a woman with red afro"},{src:"https://stickerapp.com/media/2001x1600/d124ba2dfa/die-cut-vinyl-sticker-head-2000x1600.jpg/m/1200x0/filters:quality(60)",alt:"Stack of die cut stickers featuring a stylized human head"}],oke=[{question:"How do I set up my file for custom stickers?",answer:"Upload your design and leave a comment indicating cutlines, or use design software like Adobe Illustrator to set cutlines. Our team will optimize your files for printing."},{question:"How to make your own cutlines?",answer:'Open your artwork in Adobe Illustrator, create your path for the cutline, and make a new swatch named "die cut" with the spot color set to 100% magenta for the cutline. Include 2 mm bleed and a 2 mm margin between the cut line and important elements in the design.'},{question:"What is the difference between Die Cut and Kiss Cut stickers?",answer:"Die-cut stickers are cut through both the vinyl and the backing, matching the exact shape of your design, while kiss-cut stickers are only cut through the sticker layer, leaving a backing for easier handling."},{question:"Can I mix different materials in the same sticker design?",answer:"Currently, we print each sticker design on a single material. This means that mixing different materials within the same sticker design is not possible."}],lke=[{category:"Back Paper Print",name:"Paper with a purpose",description:"Add text and designs to the back paper of your sticker.",image:"https://stickerapp.com/media/768x512/51c667c59b/bpp-backpaper-diecut-vinyl-single-in-hand-triangle-busy-bg-768x512.png/m/1200x0/filters:quality(60)"},{category:"Kiss Cut",name:"Extra padding",description:"Easy peel stickers with larger back paper.",image:"https://stickerapp.com/media/750x750/6f054177a6/kiss-cut-materials-several-stacked-logos-black-bg-750x750.jpg/m/1200x0/filters:quality(60)"},{category:"Sticker Sheets",name:"Customize the whole sheet",description:"Multiple designs on one sheet.",image:"https://stickerapp.com/media/750x750/737799028b/sticker-sheets-several-stacked-materials-black-bg-750x750.jpg/m/1200x0/filters:quality(60)"}],OW=[{value:"",label:"Select State..."},{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"DC",label:"District Of Columbia"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}],LW=[{value:"US",label:"United States"},{value:"CA",label:"Canada"},{value:"MX",label:"Mexico"},{value:"GB",label:"United Kingdom"},{value:"DE",label:"Germany"},{value:"FR",label:"France"},{value:"JP",label:"Japan"},{value:"AU",label:"Australia"}],cke=()=>B.jsxs("div",{className:"bg-black min-h-screen",children:[B.jsx(gBe,{}),B.jsx(ike,{}),B.jsx(rke,{materials:QB}),B.jsx(I1,{...mR[0]}),B.jsx(I1,{...mR[1],imagePosition:"right"}),B.jsx(I1,{...mR[2]}),B.jsx(I1,{...mR[3],imagePosition:"right"})]}),Kk="h-6 w-6",uke=({className:i=Kk})=>B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",fill:"currentColor",className:i,children:B.jsx("path",{d:"M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"})}),dke=({className:i=Kk})=>B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",fill:"currentColor",className:i,children:B.jsx("path",{d:"M400-240 344-296l184-184-184-184 56-56 240 240-240 240Z"})}),Mre=({className:i="h-5 w-5"})=>B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",fill:"currentColor",className:i,children:B.jsx("path",{d:"M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"})}),fke=({className:i="h-4 w-4"})=>B.jsx("svg",{viewBox:"0 0 96 96",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:i,children:B.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:B.jsxs("g",{children:[B.jsx("rect",{fill:"#00B67A",fillRule:"nonzero",x:"0",y:"0",width:"96",height:"96"}),B.jsx("path",{d:"M48,64.7 L62.6,61 L68.7,79.8 L48,64.7 Z M81.6,40.4 L55.9,40.4 L48,16.2 L40.1,40.4 L14.4,40.4 L35.2,55.4 L27.3,79.6 L48.1,64.6 L60.9,55.4 L81.6,40.4 Z",fill:"#FFFFFF",fillRule:"nonzero"})]})})}),hke=({className:i=Kk})=>B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),pke=({className:i="h-5 w-5"})=>B.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0M2.985 19.644A8.25 8.25 0 0116.023 9.348"})}),mke=({images:i})=>{const[e,t]=P.useState(0),n=()=>{const o=e===0?i.length-1:e-1;t(o)},s=()=>{const o=e===i.length-1?0:e+1;t(o)},r=a=>{t(a)};return!i||i.length===0?B.jsx("div",{children:"No images to display."}):B.jsxs("div",{className:"w-full sticky top-28",children:[B.jsxs("div",{className:"relative aspect-square w-full",children:[i.map((a,o)=>B.jsx("div",{className:`absolute top-0 left-0 w-full h-full transition-opacity duration-500 ease-in-out ${o===e?"opacity-100":"opacity-0"}`,children:B.jsx("img",{src:a.src,alt:a.alt,className:"w-full h-full object-cover rounded-2xl"})},o)),B.jsx("button",{onClick:n,className:"absolute top-1/2 -translate-y-1/2 left-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition","aria-label":"Previous image",children:B.jsx(uke,{className:"h-6 w-6"})}),B.jsx("button",{onClick:s,className:"absolute top-1/2 -translate-y-1/2 right-4 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition","aria-label":"Next image",children:B.jsx(dke,{className:"h-6 w-6"})})]}),B.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:i.map((a,o)=>B.jsx("button",{onClick:()=>r(o),className:`h-3 w-3 rounded-full transition ${e===o?"bg-gray-800":"bg-gray-300"}`,"aria-label":`Go to slide ${o+1}`},o))})]})},UW=10*1024*1024,Are=["image/jpeg","image/png","image/gif","image/svg+xml","image/webp"],gke=Are.join(","),E1=({title:i})=>B.jsx("h3",{className:"text-xl font-extrabold text-gray-900 mb-3",children:i}),BW=({options:i,selected:e,setSelected:t,nameKey:n,valueKey:s,iconKey:r,className:a,itemClassName:o})=>B.jsx("ul",{className:`bg-white rounded-lg ${a}`,children:i.map((l,c)=>{const d=e[s]===l[s];return B.jsx("li",{children:B.jsxs("label",{className:`flex items-center p-3 cursor-pointer transition-colors duration-200 ${o?o(d):d?"bg-gray-200":"hover:bg-gray-100"} ${c===0?"rounded-t-lg":""} ${c===i.length-1?"rounded-b-lg":""}`,children:[B.jsx("input",{type:"radio",name:String(n),value:String(l[s]),checked:d,onChange:()=>t(l),className:"absolute opacity-0 w-0 h-0"}),r&&B.jsx("img",{src:String(l[r]),alt:String(l[n]),className:"w-9 h-9 mr-3"}),B.jsx("span",{className:`font-semibold ${d?"text-black":"text-gray-700"}`,children:String(l[n])})]})},String(l[s]))})}),yke=({uploadedImage:i,setUploadedImage:e,selectedShape:t,setSelectedShape:n,onAddToCart:s})=>{const[r,a]=P.useState(QB[0]),[o,l]=P.useState(DW[0]),[c,d]=P.useState(PW[0]),[h,m]=P.useState(LU[0]),[v,_]=P.useState("idle"),[x,T]=P.useState(null),[b,w]=P.useState(null),M=D=>{const L=D.target.files?.[0];if(!L)return;if(T(null),_("loading"),!Are.includes(L.type)){T("Invalid file type. Please use PNG, JPG, GIF, or SVG."),_("error"),D.target.value="";return}if(L.size>UW){T(`File is too large. Max size is ${UW/1024/1024}MB.`),_("error"),D.target.value="";return}const F=new FileReader;F.onloadend=()=>{e(F.result),w(L.name),_("success")},F.onerror=()=>{T("There was an error reading the file."),_("error"),D.target.value=""},F.readAsDataURL(L)},R=()=>{e(null),w(null),_("idle");const D=document.getElementById("file-upload");D&&(D.value="")},N=()=>{s({shape:t,material:r,finish:o,size:c,quantity:h,image:i})};return B.jsxs("div",{className:"space-y-8",children:[B.jsxs("div",{children:[B.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Custom Stickers"}),B.jsx("h1",{className:"text-5xl font-black text-gray-900 leading-tight",children:"Die Cut"}),B.jsxs("div",{className:"flex items-center mt-2",children:[B.jsx("div",{className:"flex items-center",children:[...Array(5)].map((D,L)=>B.jsx(fke,{className:"h-5 w-5 text-green-600"},L))}),B.jsxs("a",{href:"#reviews",className:"ml-3 text-sm font-medium text-gray-700 hover:text-black",children:[B.jsx("strong",{children:"4.7"})," out of ",B.jsx("strong",{children:"16,558"})," reviews"]})]}),B.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Precisely cut to your designs shape and built to last. Our flagship product is durable, vibrant, and made to stand out. Stick it, send it, or slap it where it matters."})]}),B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{children:[B.jsx(E1,{title:"Shape"}),B.jsx(BW,{options:wre,selected:t,setSelected:n,nameKey:"name",valueKey:"name",iconKey:"icon"})]}),B.jsxs("div",{children:[B.jsx(E1,{title:"Material"}),B.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:QB.map(D=>{const L=r.name===D.name;return B.jsxs("button",{onClick:()=>a(D),className:`p-2 text-center rounded-lg transition-all duration-200 ${L?"bg-gray-200 ring-2 ring-gray-800":"bg-white hover:bg-gray-100 border"}`,children:[B.jsx("img",{src:D.image,alt:D.name,className:"w-16 h-16 mx-auto"}),B.jsx("span",{className:`block text-xs font-bold mt-2 ${L?"text-black":"text-gray-700"}`,children:D.name})]},D.name)})})]}),B.jsxs("div",{children:[B.jsx(E1,{title:"Finish"}),B.jsxs("div",{className:"relative",children:[B.jsx("select",{value:o,onChange:D=>l(D.target.value),className:"w-full appearance-none bg-white border border-gray-300 rounded-lg p-3 pr-8 font-semibold text-gray-800 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition",children:DW.map(D=>B.jsx("option",{value:D,children:D},D))}),B.jsx(Mre,{className:"absolute top-1/2 right-3 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none"})]})]}),B.jsxs("div",{children:[B.jsx(E1,{title:"Size, inch (WxH)"}),B.jsx(BW,{options:PW,selected:c,setSelected:d,nameKey:"name",valueKey:"name"})]}),B.jsxs("div",{children:[B.jsx(E1,{title:"Quantity"}),B.jsx("ul",{className:"bg-white rounded-lg",children:LU.map((D,L)=>{const F=h.amount===D.amount;return B.jsx("li",{children:B.jsxs("label",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors duration-200 ${F?"bg-gray-200":"hover:bg-gray-100"} ${L===0?"rounded-t-lg":""} ${L===LU.length-1?"rounded-b-lg":""}`,children:[B.jsx("input",{type:"radio",name:"quantity",value:D.amount,checked:F,onChange:()=>m(D),className:"absolute opacity-0 w-0 h-0"}),B.jsxs("span",{className:`font-semibold ${F?"text-black":"text-gray-700"}`,children:[D.amount," pcs"]}),B.jsxs("div",{className:"flex items-center",children:[D.discount&&B.jsxs("span",{className:"text-sm font-bold text-green-600 mr-4",children:["-",D.discount,"%"]}),B.jsxs("span",{className:`font-bold ${F?"text-black":"text-gray-800"}`,children:["$",D.price]})]})]})},D.amount)})})]})]}),B.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg space-y-4 sticky bottom-4",children:[B.jsxs("div",{className:"flex justify-between items-center",children:[B.jsx("span",{className:"text-xl font-bold text-gray-800",children:"Total Price"}),B.jsxs("span",{className:"text-3xl font-black text-gray-900",children:["$",h.price.toFixed(2)]})]}),v==="error"&&x&&B.jsx("p",{className:"text-red-600 text-sm font-semibold text-center",children:x}),B.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i?B.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded-lg bg-white overflow-hidden",children:[B.jsx("img",{src:i,alt:"Uploaded preview",className:"w-12 h-12 rounded object-contain flex-shrink-0 bg-gray-200"}),B.jsxs("div",{className:"flex-grow min-w-0",children:[B.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",title:b||"Your Design",children:b||"Your Design"}),B.jsx("button",{onClick:R,className:"text-xs text-red-500 hover:underline font-semibold",children:"Remove"})]})]}):B.jsx("button",{onClick:()=>document.getElementById("file-upload")?.click(),disabled:v==="loading",className:"w-full border-2 border-gray-800 text-black font-extrabold py-3 px-6 rounded-lg text-lg hover:bg-gray-200 transition-colors duration-300 disabled:opacity-50 disabled:cursor-wait",children:v==="loading"?"Uploading...":"Upload file"}),B.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:M,accept:gke}),B.jsx("button",{onClick:N,className:"w-full bg-yellow-400 text-black font-extrabold py-3 px-6 rounded-lg text-lg hover:bg-yellow-500 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400",children:"Add to cart"})]})]})]})},vke=({faq:i,isOpen:e,onClick:t})=>B.jsxs("div",{className:"border-t border-gray-200",children:[B.jsxs("button",{onClick:t,className:"flex justify-between items-start w-full py-5 text-left text-gray-800",children:[B.jsx("h4",{className:"text-lg font-bold",children:i.question}),B.jsx(Mre,{className:`w-6 h-6 transform transition-transform duration-300 ${e?"rotate-180":""}`})]}),B.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${e?"max-h-screen":"max-h-0"}`,children:B.jsx("p",{className:"pb-5 pr-10 text-gray-600",children:i.answer})})]}),_ke=({faqs:i})=>{const[e,t]=P.useState(0),n=s=>{t(e===s?null:s)};return B.jsx("div",{children:i.map((s,r)=>B.jsx(vke,{faq:s,isOpen:e===r,onClick:()=>n(r)},r))})},xke=({isOpen:i,onClose:e,items:t,onRemoveItem:n})=>{const s=t.reduce((r,a)=>r+a.quantity.price,0);return B.jsxs(B.Fragment,{children:[B.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300 ${i?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,"aria-hidden":"true"}),B.jsx("div",{className:`fixed top-0 right-0 h-full w-full max-w-md bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-in-out ${i?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:B.jsxs("div",{className:"flex flex-col h-full",children:[B.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[B.jsx("h2",{id:"cart-heading",className:"text-2xl font-bold text-gray-800",children:"Your Cart"}),B.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close cart",children:B.jsx(hke,{className:"h-6 w-6 text-gray-600"})})]}),B.jsx("div",{className:"flex-grow p-6 overflow-y-auto",children:t.length===0?B.jsx("p",{className:"text-gray-500 text-center mt-8",children:"Your cart is empty."}):B.jsx("ul",{className:"space-y-6",children:t.map(r=>B.jsxs("li",{className:"flex space-x-4 items-start",children:[B.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-md flex-shrink-0 border",children:B.jsx("img",{src:r.image||bke[0].src,alt:"Sticker Preview",className:"w-full h-full object-contain p-1"})}),B.jsxs("div",{className:"flex-grow",children:[B.jsx("h3",{className:"font-bold text-gray-800",children:"Custom Die Cut Sticker"}),B.jsxs("p",{className:"text-sm text-gray-500",children:[r.size.name,", ",r.shape.name]}),B.jsxs("p",{className:"text-sm text-gray-500",children:[r.material.name,", ",r.finish]}),B.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",r.quantity.amount]})]}),B.jsxs("div",{className:"text-right flex-shrink-0",children:[B.jsxs("p",{className:"font-bold text-gray-800",children:["$",r.quantity.price.toFixed(2)]}),B.jsx("button",{onClick:()=>n(r.id),className:"text-xs text-red-500 hover:underline mt-2",children:"Remove"})]})]},r.id))})}),t.length>0&&B.jsxs("div",{className:"p-6 border-t",children:[B.jsxs("div",{className:"flex justify-between items-center mb-4",children:[B.jsx("span",{className:"text-lg font-medium text-gray-600",children:"Subtotal"}),B.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",s.toFixed(2)]})]}),B.jsx("button",{className:"w-full bg-yellow-400 text-black font-extrabold py-3 px-6 rounded-lg text-lg hover:bg-yellow-500 transition-colors duration-300",children:"Checkout"})]})]})})]})},bke=[{src:"https://stickerapp.com/media/2000x2000/cb074be4de/pixiedust-stickers-howdy-2000x2000.png/m/2400x0/filters:quality(60)"}],Ske=({imageUrl:i,shape:e,onClear:t})=>{const n=P.useRef(null),s=P.useRef(null),r=P.useRef(null),a=P.useRef(null);P.useEffect(()=>{const c=new fabric.Canvas(n.current,{width:384,height:384,backgroundColor:"#f3f4f6"});return s.current=c,c.on("object:moving",d=>{const h=d.target;if(!h)return;h.setCoords();const m=h.getBoundingRect(),v=c.getWidth(),_=c.getHeight(),x=h.left-m.left,T=h.top-m.top;let b=m.left;const w=Math.min(0,v-m.width),M=Math.max(0,v-m.width);b<w?b=w:b>M&&(b=M);let R=m.top;const N=Math.min(0,_-m.height),D=Math.max(0,_-m.height);R<N?R=N:R>D&&(R=D),h.set({left:b+x,top:R+T})}),()=>{c.dispose()}},[]),P.useEffect(()=>{const l=s.current;l&&(l.getObjects().forEach(c=>{c!==a.current&&l.remove(c)}),r.current=null,l.renderAll(),i&&fabric.Image.fromURL(i,c=>{const d=l.getWidth(),h=l.getHeight(),m=Math.min(d*.9/(c.width||1),h*.9/(c.height||1));c.set({scaleX:m,scaleY:m,originX:"center",originY:"center",borderColor:"#1f2937",cornerColor:"#1f2937",cornerSize:10,transparentCorners:!1,cornerStyle:"circle"}),l.add(c),l.centerObject(c),l.setActiveObject(c),r.current=c,a.current&&l.bringToFront(a.current),l.renderAll()},{crossOrigin:"anonymous"}))},[i]),P.useEffect(()=>{const l=s.current;if(!l)return;a.current&&(l.remove(a.current),a.current=null),l.wrapperEl&&(l.wrapperEl.style.borderRadius="",l.wrapperEl.style.filter=""),l.clipPath=null;let c=null;const d=l.getWidth(),m=d-8*2,v={fill:"transparent",stroke:"#4b5563",strokeWidth:2,strokeDashArray:[8,4],selectable:!1,evented:!1,originX:"center",originY:"center",top:d/2,left:d/2};switch(e.name){case"Circle":c=new fabric.Circle({...v,radius:m/2});break;case"Square":c=new fabric.Rect({...v,width:m,height:m});break;case"Rounded Corners":c=new fabric.Rect({...v,width:m,height:m,rx:m/8,ry:m/8});break}c&&(l.add(c),l.bringToFront(c),a.current=c),l.renderAll()},[e]);const o=()=>{const l=r.current,c=s.current;if(l&&c){const d=c.getWidth(),h=c.getHeight(),m=Math.min(d*.9/(l.width||1),h*.9/(l.height||1));l.set({scaleX:m,scaleY:m,angle:0}),c.centerObject(l),l.setCoords(),c.renderAll()}};return B.jsxs("div",{className:"w-full sticky top-28 flex flex-col items-center",children:[B.jsx("div",{className:"relative w-full max-w-md aspect-square flex items-center justify-center bg-gray-100 rounded-2xl p-8",children:B.jsx("canvas",{ref:n})}),B.jsx("div",{className:"w-full max-w-md mt-6 p-4 bg-gray-50 border rounded-lg shadow-inner",children:B.jsxs("div",{className:"flex justify-between items-center",children:[B.jsx("p",{className:"text-xs text-gray-500",children:"Use controls to scale, rotate, and pan."}),B.jsxs("button",{onClick:o,className:"text-sm font-semibold text-gray-700 hover:text-black transition flex items-center gap-1 px-3 py-1 rounded-md bg-gray-200 hover:bg-gray-300",children:[B.jsx(pke,{className:"h-4 w-4"}),"Reset"]})]})}),B.jsx("p",{className:"text-center text-sm mt-4 text-gray-500 max-w-md",children:"This is a preview. Your sticker will be cut precisely to your design's shape."}),B.jsx("button",{onClick:t,className:"mt-4 text-sm font-semibold text-red-600 hover:text-red-800 transition",children:"Remove Image"})]})},Tke=()=>{const[i,e]=P.useState(null),[t,n]=P.useState(wre[0]),[s,r]=P.useState(!1),[a,o]=P.useState([]),l=d=>{const h={...d,id:Date.now().toString()+Math.random().toString()};o(m=>[...m,h]),r(!0)},c=d=>{o(h=>h.filter(m=>m.id!==d))};return B.jsxs("div",{className:"bg-white min-h-screen flex flex-col",children:[B.jsx(xke,{isOpen:s,onClose:()=>r(!1),items:a,onRemoveItem:c}),B.jsxs("main",{className:"flex-grow",children:[B.jsx("div",{className:"bg-gray-50",children:B.jsx("div",{className:"max-w-7xl mx-auto pt-8 pb-16 px-4 sm:px-6 lg:px-8",children:B.jsxs("div",{className:"flex flex-col lg:flex-row -mx-8",children:[B.jsx("div",{className:"w-full lg:w-1/2 px-8",children:i?B.jsx(Ske,{imageUrl:i,shape:t,onClear:()=>e(null)}):B.jsx(mke,{images:ake})}),B.jsx("div",{className:"w-full lg:w-1/2 px-8 mt-8 lg:mt-0",children:B.jsx(yke,{uploadedImage:i,setUploadedImage:e,selectedShape:t,setSelectedShape:n,onAddToCart:l})})]})})}),B.jsx(I1,{}),B.jsx("div",{id:"faq",className:"bg-white py-16",children:B.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:B.jsxs("div",{className:"lg:grid lg:grid-cols-3 lg:gap-8",children:[B.jsxs("div",{className:"mb-8 lg:mb-0",children:[B.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Die Cut Stickers FAQ"}),B.jsx("p",{className:"mt-4 text-lg text-gray-500",children:"Looking for answers? Check out these related questions or dive into our support section for more insights."})]}),B.jsx("div",{className:"lg:col-span-2",children:B.jsx(_ke,{faqs:oke})})]})})}),B.jsx("div",{className:"bg-gray-50 py-16",children:B.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[B.jsxs("div",{className:"text-center",children:[B.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Looking for something else?"}),B.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-xl text-gray-500",children:"Our materials have been hand chosen by our team to ensure the highest quality, here are some great products with different ways to utilize them."})]}),B.jsx("div",{className:"mt-12 grid gap-8 lg:grid-cols-3",children:lke.map(d=>B.jsx("a",{href:"#",className:"block group",children:B.jsxs("div",{className:"relative aspect-[4/5] w-full bg-white rounded-2xl overflow-hidden shadow-lg group-hover:shadow-2xl transition-shadow duration-300",children:[B.jsx("img",{className:"absolute inset-0 w-full h-full object-cover transition-transform duration-[2400ms] group-hover:scale-110",src:d.image,alt:d.name}),B.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),B.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex flex-col justify-end text-white",children:[B.jsx("h3",{className:"text-yellow-400 text-lg font-bold uppercase",children:d.category}),B.jsx("p",{className:"text-3xl font-extrabold mt-1",children:d.name}),B.jsx("p",{className:"mt-2 text-lg",children:d.description})]})]})},d.name))})]})})]})]})},Eke=({item:i,onQuantityChange:e,onRemove:t})=>{const n=s=>{const r=parseInt(s.target.value,10);isNaN(r)||e(i.id,r)};return B.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between py-4 border-b border-gray-200 gap-4",children:[B.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[B.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-24 h-24 object-cover rounded-md"}),B.jsxs("div",{children:[B.jsx("h3",{className:"font-bold text-lg text-zinc-800",children:i.name}),i.description.map((s,r)=>B.jsx("p",{className:"text-sm text-gray-600",children:s},r))]})]}),B.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto md:gap-8",children:[B.jsxs("div",{className:"text-center",children:[B.jsx("label",{htmlFor:`quantity-${i.id}`,className:"text-xs text-gray-500 block mb-1",children:"Quantity"}),B.jsx("input",{id:`quantity-${i.id}`,type:"number",value:i.quantity,onChange:n,min:"1",className:"w-20 p-2 border border-gray-300 rounded-md text-center"})]}),B.jsxs("div",{className:"text-center",children:[B.jsx("p",{className:"text-xs text-gray-500",children:"Price/piece"}),B.jsxs("p",{className:"font-semibold text-zinc-700 mt-1",children:["$",i.pricePerPiece.toFixed(2)]})]}),B.jsxs("div",{className:"text-center",children:[B.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),B.jsxs("p",{className:"font-bold text-zinc-800 mt-1",children:["$",(i.quantity*i.pricePerPiece).toFixed(2)]})]}),B.jsx("button",{onClick:()=>t(i.id),className:"text-gray-500 hover:text-red-600 transition-colors self-end md:self-center pb-1 md:pb-0",children:B.jsx(xfe,{className:"w-6 h-6"})})]})]})},hl=({id:i,label:e,type:t,required:n,subtitle:s,value:r,onChange:a,name:o,error:l})=>{const c=l?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500";return B.jsxs("div",{className:"w-full",children:[B.jsxs("label",{htmlFor:i,className:"block text-xs font-semibold text-gray-600 mb-1",children:[e,n&&B.jsx("span",{className:"text-red-500",children:"*"})]}),B.jsx("input",{type:t,id:i,name:o||i,required:n,value:r,onChange:a,className:`w-full p-2 border rounded-md transition ${c}`}),s&&!l&&B.jsx("small",{className:"text-gray-500 italic mt-1 block",children:s}),l&&B.jsx("p",{className:"mt-1 text-xs text-red-600",children:l})]})},gR=({id:i,label:e,options:t,required:n,defaultValue:s,value:r,onChange:a,name:o,error:l})=>{const c=l?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500";return B.jsxs("div",{className:"w-full",children:[B.jsxs("label",{htmlFor:i,className:"block text-xs font-semibold text-gray-600 mb-1",children:[e,n&&B.jsx("span",{className:"text-red-500",children:"*"})]}),B.jsx("select",{id:i,name:o||i,required:n,defaultValue:s,value:r,onChange:a,className:`w-full p-2 border rounded-md transition bg-white ${c}`,children:t.map(d=>B.jsx("option",{value:d.value,children:d.label},d.value))}),l&&B.jsx("p",{className:"mt-1 text-xs text-red-600",children:l})]})},jN=({id:i,label:e,checked:t,onChange:n,name:s})=>B.jsxs("label",{htmlFor:i,className:"flex items-center cursor-pointer",children:[B.jsx("input",{type:"checkbox",id:i,name:s||i,checked:t,onChange:n,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),B.jsx("span",{className:"ml-2 text-sm text-gray-700 font-semibold",children:e})]}),wke=(i,e,t,n=!1)=>{const s="This field is required",r=n?t.shipping:t;if((n?["name","address","zip","city","state","country"]:["firstName","lastName","email","address","zip","city","state","country","phone"]).includes(i)&&!e.trim()||t.isBusiness&&!n&&i==="companyName"&&!e.trim())return s;switch(i){case"email":if(e&&!/\S+@\S+\.\S+/.test(e))return"Please enter a valid email address";break;case"phone":if(e&&!/^\+?[\d\s-()]{7,}$/.test(e))return"Please enter a valid phone number";break;case"zip":if(r.country==="US"&&e&&!/^\d{5}(-\d{4})?$/.test(e))return"Please enter a valid US ZIP code (e.g., 12345 or 12345-6789)";break}},Mke={isBusiness:!1,companyName:"",vatNumber:"",firstName:"",lastName:"",email:"",address:"",address2:"",zip:"",city:"",state:"",country:"US",phone:"",orderReference:"",useDifferentShipping:!1,shipping:{name:"",attName:"",address:"",address2:"",zip:"",city:"",state:"",country:"US"}},Ake=()=>{const[i,e]=P.useState(Mke),[t,n]=P.useState({}),s=(a,o,l)=>{const c=a.split("."),d=c[0]==="shipping",h=d?c[1]:c[0],m=wke(h,o,l,d);n(d?v=>({...v,shipping:{...v.shipping,[h]:m}}):v=>({...v,[h]:m}))},r=a=>{const{name:o,value:l,type:c}=a.target,d=a.target.checked,h=o.split("."),m=h[0]==="shipping",v=m?h[1]:o,_={...i};if(m){const x=h[1];_.shipping[x]=l}else _[v]=c==="checkbox"?d:l;e(_),s(o,l,_)};return B.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[B.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[B.jsx("h2",{className:"text-2xl font-medium text-zinc-800",style:{fontFamily:"'FuturaPT', sans-serif"},children:"Shipping and billing"}),B.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"Login for faster checkout"})]}),B.jsx("div",{className:"bg-gray-100 p-4",children:B.jsx(jN,{id:"is-business",label:"Business",checked:i.isBusiness,onChange:r,name:"isBusiness"})}),B.jsxs("form",{className:"p-4 md:p-6 space-y-4",noValidate:!0,children:[i.isBusiness&&B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(hl,{id:"company_name",label:"Company name",type:"text",name:"companyName",value:i.companyName,onChange:r,error:t.companyName,required:!0}),B.jsx(hl,{id:"vat_number",label:"VAT-number",type:"text",name:"vatNumber",value:i.vatNumber,onChange:r})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(hl,{id:"firstname",label:"First Name",type:"text",name:"firstName",value:i.firstName,onChange:r,error:t.firstName,required:!0}),B.jsx(hl,{id:"surname",label:"Last Name",type:"text",name:"lastName",value:i.lastName,onChange:r,error:t.lastName,required:!0})]}),B.jsx(hl,{id:"email",label:"Email",type:"email",name:"email",value:i.email,onChange:r,error:t.email,required:!0}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(hl,{id:"address",label:"Address",type:"text",name:"address",value:i.address,onChange:r,error:t.address,required:!0}),B.jsx(hl,{id:"address2",label:"Address line 2",name:"address2",type:"text",value:i.address2,onChange:r})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsx(hl,{id:"zip",label:"Zip Code",type:"text",name:"zip",value:i.zip,onChange:r,error:t.zip,required:!0}),B.jsx(hl,{id:"city",label:"City",type:"text",name:"city",value:i.city,onChange:r,error:t.city,required:!0})]}),B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsx(gR,{id:"state",label:"State",name:"state",options:OW,value:i.state,onChange:r,error:t.state,required:!0}),B.jsx(gR,{id:"country",label:"Country",name:"country",options:LW,value:i.country,onChange:r,error:t.country,required:!0})]})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(hl,{id:"phone",label:"Phone",type:"tel",name:"phone",required:!0,subtitle:"Used for shipping purposes only.",value:i.phone,onChange:r,error:t.phone}),B.jsx(hl,{id:"purchase_order",label:"Order reference",type:"text",name:"orderReference",value:i.orderReference,onChange:r})]}),B.jsx("div",{className:"pt-4",children:B.jsx(jN,{id:"other-shipping-address",label:"Use a different shipping address",checked:i.useDifferentShipping,onChange:r,name:"useDifferentShipping"})}),i.useDifferentShipping&&B.jsxs("div",{className:"p-4 mt-4 border-t border-gray-200 space-y-4 bg-gray-50 rounded-md",children:[B.jsx("h3",{className:"text-lg font-semibold text-zinc-700",children:"Shipping Address"}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(hl,{id:"shipping-name",label:"Name or company",type:"text",name:"shipping.name",value:i.shipping.name,onChange:r,error:t.shipping?.name,required:!0}),B.jsx(hl,{id:"shipping-att-name",label:"Attention name",type:"text",name:"shipping.attName",value:i.shipping.attName,onChange:r})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsx(hl,{id:"shipping-address",label:"Address",type:"text",name:"shipping.address",value:i.shipping.address,onChange:r,error:t.shipping?.address,required:!0}),B.jsx(hl,{id:"shipping-address2",label:"Address line 2",type:"text",name:"shipping.address2",value:i.shipping.address2,onChange:r})]}),B.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsx(hl,{id:"shipping-zip",label:"Zip Code",type:"text",name:"shipping.zip",value:i.shipping.zip,onChange:r,error:t.shipping?.zip,required:!0}),B.jsx(hl,{id:"shipping-city",label:"City",type:"text",name:"shipping.city",value:i.shipping.city,onChange:r,error:t.shipping?.city,required:!0})]}),B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsx(gR,{id:"shipping-state",label:"State",name:"shipping.state",options:OW,value:i.shipping.state,onChange:r,error:t.shipping?.state,required:!0}),B.jsx(gR,{id:"shipping-country",label:"Country",name:"shipping.country",options:LW,value:i.shipping.country,onChange:r,error:t.shipping?.country,required:!0})]})]})]})]})]})},IW=({value:i,title:e,date:t,cost:n,selected:s,onSelect:r})=>B.jsxs("label",{className:`flex items-center justify-between p-3 border cursor-pointer rounded-md transition-all ${s?"border-blue-500 bg-blue-50 ring-2 ring-blue-500":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[B.jsxs("div",{className:"flex items-center",children:[B.jsx("input",{type:"radio",name:"shipping_type",checked:s,onChange:()=>r(i),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),B.jsxs("div",{className:"ml-3",children:[B.jsx("span",{className:"text-md font-semibold text-zinc-800",children:e}),B.jsx("p",{className:"text-sm text-gray-500",children:t})]})]}),B.jsxs("div",{className:"flex items-center",children:[B.jsx("span",{className:`text-md font-semibold ${n==="Free"?"text-green-600":"text-zinc-800"}`,children:n}),B.jsx("img",{src:"https://d6ce0no7ktiq.cloudfront.net/images/web/checkout/fedex.png",alt:"FedEx",className:"h-6 ml-4"})]})]}),Cke=({selectedShipping:i,onSelectShipping:e})=>B.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-4 md:p-6",children:[B.jsx("h2",{className:"text-2xl font-medium text-zinc-800 mb-4",style:{fontFamily:"'FuturaPT', sans-serif"},children:"Estimated delivery date"}),B.jsxs("div",{className:"space-y-3",children:[B.jsx(IW,{value:0,title:"Free",date:"September 8-9",cost:"Free",selected:i===0,onSelect:e}),B.jsx(IW,{value:43,title:"Express handling",date:"September 4-5",cost:"$43.00",selected:i===43,onSelect:e})]})]}),Rke=({subtotal:i,shippingCost:e,total:t})=>{const[n,s]=P.useState(!1),[r,a]=P.useState(!1),[o,l]=P.useState("card");return B.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-4 md:p-6 space-y-4",children:[B.jsx("h2",{className:"text-2xl font-medium text-zinc-800",style:{fontFamily:"'FuturaPT', sans-serif"},children:"Summary and payment"}),B.jsxs("div",{className:"space-y-2 text-lg",children:[B.jsxs("div",{className:"flex justify-between font-semibold text-zinc-800",children:[B.jsxs("span",{children:["Total amount ",B.jsx("span",{className:"text-gray-500 font-normal",children:"(USD)"})]}),B.jsxs("span",{children:["$",t.toFixed(2)]})]}),B.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[B.jsx("span",{children:"Subtotal"}),B.jsxs("span",{children:["$",i.toFixed(2)]})]}),B.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[B.jsx("span",{children:"Shipping"}),B.jsx("span",{children:e>0?`$${e.toFixed(2)}`:"Free"})]})]}),B.jsxs("div",{className:"pt-2",children:[B.jsx(jN,{id:"have-coupon",label:"Coupon code",checked:n,onChange:c=>s(c.target.checked)}),n&&B.jsxs("div",{className:"flex mt-2",children:[B.jsx("input",{type:"text",placeholder:"Coupon code: XXXXXX",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"}),B.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded-r-md hover:bg-green-600 font-semibold uppercase text-sm",children:"Redeem"})]})]}),B.jsxs("div",{children:[B.jsx(jN,{id:"have-giftcard",label:"Gift Card",checked:r,onChange:c=>a(c.target.checked)}),r&&B.jsxs("div",{className:"flex mt-2",children:[B.jsx("input",{type:"text",placeholder:"Gift Card: STAPP-XXXXXXXX-XXXX",className:"flex-grow p-2 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"}),B.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded-r-md hover:bg-green-600 font-semibold uppercase text-sm",children:"Redeem"})]})]}),B.jsxs("div",{className:"border-t pt-4 space-y-2",children:[B.jsx(FW,{id:"card",label:"Credit card",icon:B.jsx(bfe,{className:"w-8"}),selected:o==="card",onSelect:()=>l("card")}),B.jsx(FW,{id:"paypal",label:"PayPal",icon:B.jsx(Sfe,{className:"w-8"}),selected:o==="paypal",onSelect:()=>l("paypal")})]}),B.jsxs("div",{className:"text-xs text-gray-500 pt-2",children:["By continuing I accept the ",B.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms & Conditions"})," and ",B.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]}),B.jsx("button",{className:"w-full bg-yellow-400 text-zinc-900 font-bold text-lg py-3 rounded-full hover:bg-yellow-500 transition-colors uppercase",children:"Pay"})]})},FW=({id:i,label:e,icon:t,selected:n,onSelect:s})=>B.jsxs("div",{onClick:s,className:`flex items-center p-3 border rounded-md cursor-pointer transition-all ${n?"border-blue-500 bg-blue-50 ring-2 ring-blue-500":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[B.jsx("input",{type:"radio",name:"payment_method",id:i,checked:n,readOnly:!0,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),B.jsxs("div",{className:"ml-4 flex items-center gap-3",children:[t,B.jsx("label",{htmlFor:i,className:"font-semibold text-zinc-800 cursor-pointer",children:e})]})]}),Nke=()=>{const[i,e]=P.useState([{id:1,name:"Die Cut Sticker",description:["Vinyl / Glossy",'2" x 2"'],imageUrl:"https://picsum.photos/seed/sticker1/100/100",quantity:57,pricePerPiece:.46}]),[t,n]=P.useState(0),s=(l,c)=>{e(d=>d.map(h=>h.id===l?{...h,quantity:Math.max(1,c)}:h))},r=l=>{e(c=>c.filter(d=>d.id!==l))},a=i.reduce((l,c)=>l+c.quantity*c.pricePerPiece,0),o=a+t;return B.jsxs("div",{children:[B.jsx("div",{className:"bg-gray-200 py-6",children:B.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:B.jsx("h1",{className:"text-4xl font-medium text-zinc-800",style:{fontFamily:"'FuturaPT', sans-serif"},children:"Checkout"})})}),B.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-8",children:[B.jsx("div",{className:"bg-white shadow-sm rounded-lg p-6",children:i.map(l=>B.jsx(Eke,{item:l,onQuantityChange:s,onRemove:r},l.id))}),B.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8",children:[B.jsx("div",{className:"lg:col-span-7",children:B.jsx(Ake,{})}),B.jsx("div",{className:"lg:col-span-5",children:B.jsxs("div",{className:"space-y-8",children:[B.jsx(Cke,{selectedShipping:t,onSelectShipping:n}),B.jsx(Rke,{subtotal:a,shippingCost:t,total:o})]})})]})]})]})},Dke=()=>B.jsx("div",{className:"bg-white min-h-screen",children:B.jsx("main",{className:"flex-grow bg-gray-50",children:B.jsx(Nke,{})})});class Pke extends fe.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Shop component error:",e,t)}render(){return this.state.hasError?B.jsxs("div",{style:{padding:"40px",backgroundColor:"#ffffff",minHeight:"100vh",textAlign:"center"},children:[B.jsx("h1",{style:{color:"#ff4444",fontSize:"36px",marginBottom:"20px"},children:" Shop Loading Error"}),B.jsx("p",{style:{color:"#666666",marginBottom:"20px",fontSize:"18px"},children:"The sticker shop component failed to load."}),B.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"20px",borderRadius:"8px",maxWidth:"800px",margin:"0 auto",textAlign:"left"},children:[B.jsx("strong",{children:"Error Details:"}),B.jsx("pre",{style:{backgroundColor:"#eeeeee",padding:"10px",borderRadius:"4px",fontSize:"14px",overflow:"auto"},children:this.state.error?.message||"Unknown error"})]})]}):this.props.children}}const Oke=()=>{const[i,e]=fe.useState(!0),[t,n]=fe.useState(null);return fe.useEffect(()=>{(async()=>{try{const r=await dCe(()=>import("./HttpsStickerappComStickerShopByHtmlToDesignFreeVersion23092025205606Gmt8-D6sB-_CH.js"),[]);n(()=>r.default)}catch(r){console.error("Failed to load shop component:",r)}finally{e(!1)}})()},[]),i?B.jsx("div",{style:{padding:"40px",backgroundColor:"#444444",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:B.jsxs("div",{style:{textAlign:"center"},children:[B.jsx("h2",{style:{marginBottom:"20px",fontSize:"24px"},children:" Loading Sticker Shop..."}),B.jsx("div",{style:{width:"50px",height:"50px",border:"4px solid #333",borderTop:"4px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}})]})}):t?B.jsx(Pke,{children:B.jsx(t,{})}):B.jsxs("div",{style:{padding:"40px",backgroundColor:"#ffffff",minHeight:"100vh",textAlign:"center"},children:[B.jsx("h1",{style:{color:"#ff4444",fontSize:"36px",marginBottom:"20px"},children:" Shop Component Not Found"}),B.jsx("p",{style:{color:"#666666",fontSize:"18px"},children:"Failed to load the sticker shop component."})]})},Lke=()=>B.jsxs(poe,{children:[B.jsx(w1,{path:"/shop",element:B.jsx(Oke,{})}),B.jsx(w1,{path:"/",element:B.jsx(qP,{children:B.jsx(cke,{})})}),B.jsx(w1,{path:"/designer",element:B.jsx(qP,{children:B.jsx(Tke,{})})}),B.jsx(w1,{path:"/checkout",element:B.jsx(qP,{children:B.jsx(Dke,{})})})]});Sae.createRoot(document.getElementById("root")).render(B.jsx(fe.StrictMode,{children:B.jsx(boe,{children:B.jsx(Lke,{})})}));export{B as j};
